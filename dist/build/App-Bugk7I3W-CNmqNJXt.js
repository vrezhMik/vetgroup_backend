import{r as x,S as ha,jL as BW,jj as UW,hL as ft,j as $,i8 as Rn,Q as q,jM as WW,h6 as dt,bt as Bn,jN as Dc,jO as ode,jP as T2,jQ as lde,jR as HW,jS as Wd,U as VW,jT as cde,jU as ude,jV as dde,jW as GW,jX as hde,jY as S2,jZ as fde,jv as pde,gk as Ls,j_ as mde,j$ as gde,k0 as vde,k1 as yde,k2 as bde,k3 as Ede,k4 as xde,k5 as wde,fv as Tde,fw as b5,k6 as Sde}from"./strapi-rhsEjLgL.js";function Br(r){const e=x.useRef(r);return x.useEffect(()=>{e.current=r}),x.useMemo(()=>(...t)=>{var n;return(n=e.current)===null||n===void 0?void 0:n.call(e,...t)},[])}function zA(r,e){return r-e*Math.floor(r/e)}const qW=1721426;function Uy(r,e,t,n){e=A2(r,e);let i=e-1,s=-2;return t<=2?s=0:y1(e)&&(s=-1),qW-1+365*i+Math.floor(i/4)-Math.floor(i/100)+Math.floor(i/400)+Math.floor((367*t-362)/12+s+n)}function y1(r){return r%4===0&&(r%100!==0||r%400===0)}function A2(r,e){return r==="BC"?1-e:e}function Ade(r){let e="AD";return r<=0&&(e="BC",r=1-r),[e,r]}const _de={standard:[31,28,31,30,31,30,31,31,30,31,30,31],leapyear:[31,29,31,30,31,30,31,31,30,31,30,31]};class Yf{fromJulianDay(e){let t=e,n=t-qW,i=Math.floor(n/146097),s=zA(n,146097),a=Math.floor(s/36524),o=zA(s,36524),l=Math.floor(o/1461),c=zA(o,1461),u=Math.floor(c/365),d=i*400+a*100+l*4+u+(a!==4&&u!==4?1:0),[h,f]=Ade(d),m=t-Uy(h,f,1,1),g=2;t<Uy(h,f,3,1)?g=0:y1(f)&&(g=1);let y=Math.floor(((m+g)*12+373)/367),b=t-Uy(h,f,y,1)+1;return new i0(h,f,y,b)}toJulianDay(e){return Uy(e.era,e.year,e.month,e.day)}getDaysInMonth(e){return _de[y1(e.year)?"leapyear":"standard"][e.month-1]}getMonthsInYear(e){return 12}getDaysInYear(e){return y1(e.year)?366:365}getYearsInEra(e){return 9999}getEras(){return["BC","AD"]}isInverseEra(e){return e.era==="BC"}balanceDate(e){e.year<=0&&(e.era=e.era==="BC"?"AD":"BC",e.year=1-e.year)}constructor(){this.identifier="gregory"}}const Cde={"001":1,AD:1,AE:6,AF:6,AI:1,AL:1,AM:1,AN:1,AR:1,AT:1,AU:1,AX:1,AZ:1,BA:1,BE:1,BG:1,BH:6,BM:1,BN:1,BY:1,CH:1,CL:1,CM:1,CN:1,CR:1,CY:1,CZ:1,DE:1,DJ:6,DK:1,DZ:6,EC:1,EE:1,EG:6,ES:1,FI:1,FJ:1,FO:1,FR:1,GB:1,GE:1,GF:1,GP:1,GR:1,HR:1,HU:1,IE:1,IQ:6,IR:6,IS:1,IT:1,JO:6,KG:1,KW:6,KZ:1,LB:1,LI:1,LK:1,LT:1,LU:1,LV:1,LY:6,MC:1,MD:1,ME:1,MK:1,MN:1,MQ:1,MV:5,MY:1,NL:1,NO:1,NZ:1,OM:6,PL:1,QA:6,RE:1,RO:1,RS:1,RU:1,SD:6,SE:1,SI:1,SK:1,SM:1,SY:6,TJ:1,TM:1,TR:1,UA:1,UY:1,UZ:1,VA:1,VN:1,XK:1};function jW(r,e){return e=ra(e,r.calendar),r.era===e.era&&r.year===e.year&&r.month===e.month&&r.day===e.day}function KW(r,e){let t=r.calendar.toJulianDay(r),n=Math.ceil(t+1-Lde(e))%7;return n<0&&(n+=7),n}function Rde(r){return cl(Date.now(),r)}function _2(r){return JW(Rde(r))}function zW(r,e){return r.calendar.toJulianDay(r)-e.calendar.toJulianDay(e)}function kde(r,e){return E5(r)-E5(e)}function E5(r){return r.hour*36e5+r.minute*6e4+r.second*1e3+r.millisecond}let YA=null;function Qf(){return YA==null&&(YA=new Intl.DateTimeFormat().resolvedOptions().timeZone),YA}function Ide(r){return r.subtract({days:r.day-1})}function $de(r){return r.add({days:r.calendar.getDaysInMonth(r)-r.day})}function YW(r,e){let t=KW(r,e);return r.subtract({days:t})}const x5=new Map;function Dde(r){if(Intl.Locale){let t=x5.get(r);return t||(t=new Intl.Locale(r).maximize().region,t&&x5.set(r,t)),t}let e=r.split("-")[1];return e==="u"?void 0:e}function Lde(r){let e=Dde(r);return e&&Cde[e]||0}function zR(r,e){return r&&e?r.compare(e)<=0?r:e:r||e}function YR(r,e){return r&&e?r.compare(e)>=0?r:e:r||e}function Xf(r){r=ra(r,new Yf);let e=A2(r.era,r.year);return QW(e,r.month,r.day,r.hour,r.minute,r.second,r.millisecond)}function QW(r,e,t,n,i,s,a){let o=new Date;return o.setUTCHours(n,i,s,a),o.setUTCFullYear(r,e-1,t),o.getTime()}function QR(r,e){if(e==="UTC")return 0;if(r>0&&e===Qf())return new Date(r).getTimezoneOffset()*-6e4;let{year:t,month:n,day:i,hour:s,minute:a,second:o}=XW(r,e);return QW(t,n,i,s,a,o,0)-Math.floor(r/1e3)*1e3}const w5=new Map;function XW(r,e){let t=w5.get(e);t||(t=new Intl.DateTimeFormat("en-US",{timeZone:e,hour12:!1,era:"short",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"}),w5.set(e,t));let n=t.formatToParts(new Date(r)),i={};for(let s of n)s.type!=="literal"&&(i[s.type]=s.value);return{year:i.era==="BC"||i.era==="B"?-i.year+1:+i.year,month:+i.month,day:+i.day,hour:i.hour==="24"?0:+i.hour,minute:+i.minute,second:+i.second}}const T5=864e5;function Ode(r,e,t,n){return(t===n?[t]:[t,n]).filter(s=>Pde(r,e,s))}function Pde(r,e,t){let n=XW(t,e);return r.year===n.year&&r.month===n.month&&r.day===n.day&&r.hour===n.hour&&r.minute===n.minute&&r.second===n.second}function ol(r,e,t="compatible"){let n=_d(r);if(e==="UTC")return Xf(n);if(e===Qf()&&t==="compatible"){n=ra(n,new Yf);let l=new Date,c=A2(n.era,n.year);return l.setFullYear(c,n.month-1,n.day),l.setHours(n.hour,n.minute,n.second,n.millisecond),l.getTime()}let i=Xf(n),s=QR(i-T5,e),a=QR(i+T5,e),o=Ode(n,e,i-s,i-a);if(o.length===1)return o[0];if(o.length>1)switch(t){case"compatible":case"earlier":return o[0];case"later":return o[o.length-1];case"reject":throw new RangeError("Multiple possible absolute times found")}switch(t){case"earlier":return Math.min(i-s,i-a);case"compatible":case"later":return Math.max(i-s,i-a);case"reject":throw new RangeError("No such absolute time found")}}function ZW(r,e,t="compatible"){return new Date(ol(r,e,t))}function cl(r,e){let t=QR(r,e),n=new Date(r+t),i=n.getUTCFullYear(),s=n.getUTCMonth()+1,a=n.getUTCDate(),o=n.getUTCHours(),l=n.getUTCMinutes(),c=n.getUTCSeconds(),u=n.getUTCMilliseconds();return new Zf(i,s,a,e,t,o,l,c,u)}function JW(r){return new i0(r.calendar,r.era,r.year,r.month,r.day)}function _d(r,e){let t=0,n=0,i=0,s=0;if("timeZone"in r)({hour:t,minute:n,second:i,millisecond:s}=r);else if("hour"in r&&!e)return r;return e&&({hour:t,minute:n,second:i,millisecond:s}=e),new ix(r.calendar,r.era,r.year,r.month,r.day,t,n,i,s)}function ra(r,e){if(r.calendar.identifier===e.identifier)return r;let t=e.fromJulianDay(r.calendar.toJulianDay(r)),n=r.copy();return n.calendar=e,n.era=t.era,n.year=t.year,n.month=t.month,n.day=t.day,Cd(n),n}function Mde(r,e,t){if(r instanceof Zf)return r.timeZone===e?r:eH(r,e);let n=ol(r,e,t);return cl(n,e)}function Nde(r){let e=Xf(r)-r.offset;return new Date(e)}function eH(r,e){let t=Xf(r)-r.offset;return ra(cl(t,e),r.calendar)}const mm=36e5;function Xw(r,e){let t=r.copy(),n="hour"in t?Wde(t,e):0;XR(t,e.years||0),t.calendar.balanceYearMonth&&t.calendar.balanceYearMonth(t,r),t.month+=e.months||0,ZR(t),tH(t),t.day+=(e.weeks||0)*7,t.day+=e.days||0,t.day+=n,Fde(t),t.calendar.balanceDate&&t.calendar.balanceDate(t),t.year<1&&(t.year=1,t.month=1,t.day=1);let i=t.calendar.getYearsInEra(t);if(t.year>i){var s,a;let l=(s=(a=t.calendar).isInverseEra)===null||s===void 0?void 0:s.call(a,t);t.year=i,t.month=l?1:t.calendar.getMonthsInYear(t),t.day=l?1:t.calendar.getDaysInMonth(t)}t.month<1&&(t.month=1,t.day=1);let o=t.calendar.getMonthsInYear(t);return t.month>o&&(t.month=o,t.day=t.calendar.getDaysInMonth(t)),t.day=Math.max(1,Math.min(t.calendar.getDaysInMonth(t),t.day)),t}function XR(r,e){var t,n;!((t=(n=r.calendar).isInverseEra)===null||t===void 0)&&t.call(n,r)&&(e=-e),r.year+=e}function ZR(r){for(;r.month<1;)XR(r,-1),r.month+=r.calendar.getMonthsInYear(r);let e=0;for(;r.month>(e=r.calendar.getMonthsInYear(r));)r.month-=e,XR(r,1)}function Fde(r){for(;r.day<1;)r.month--,ZR(r),r.day+=r.calendar.getDaysInMonth(r);for(;r.day>r.calendar.getDaysInMonth(r);)r.day-=r.calendar.getDaysInMonth(r),r.month++,ZR(r)}function tH(r){r.month=Math.max(1,Math.min(r.calendar.getMonthsInYear(r),r.month)),r.day=Math.max(1,Math.min(r.calendar.getDaysInMonth(r),r.day))}function Cd(r){r.calendar.constrainDate&&r.calendar.constrainDate(r),r.year=Math.max(1,Math.min(r.calendar.getYearsInEra(r),r.year)),tH(r)}function rH(r){let e={};for(let t in r)typeof r[t]=="number"&&(e[t]=-r[t]);return e}function nH(r,e){return Xw(r,rH(e))}function C2(r,e){let t=r.copy();return e.era!=null&&(t.era=e.era),e.year!=null&&(t.year=e.year),e.month!=null&&(t.month=e.month),e.day!=null&&(t.day=e.day),Cd(t),t}function nx(r,e){let t=r.copy();return e.hour!=null&&(t.hour=e.hour),e.minute!=null&&(t.minute=e.minute),e.second!=null&&(t.second=e.second),e.millisecond!=null&&(t.millisecond=e.millisecond),Ude(t),t}function Bde(r){r.second+=Math.floor(r.millisecond/1e3),r.millisecond=Wy(r.millisecond,1e3),r.minute+=Math.floor(r.second/60),r.second=Wy(r.second,60),r.hour+=Math.floor(r.minute/60),r.minute=Wy(r.minute,60);let e=Math.floor(r.hour/24);return r.hour=Wy(r.hour,24),e}function Ude(r){r.millisecond=Math.max(0,Math.min(r.millisecond,1e3)),r.second=Math.max(0,Math.min(r.second,59)),r.minute=Math.max(0,Math.min(r.minute,59)),r.hour=Math.max(0,Math.min(r.hour,23))}function Wy(r,e){let t=r%e;return t<0&&(t+=e),t}function Wde(r,e){return r.hour+=e.hours||0,r.minute+=e.minutes||0,r.second+=e.seconds||0,r.millisecond+=e.milliseconds||0,Bde(r)}function R2(r,e,t,n){let i=r.copy();switch(e){case"era":{let o=r.calendar.getEras(),l=o.indexOf(r.era);if(l<0)throw new Error("Invalid era: "+r.era);l=ul(l,t,0,o.length-1,n?.round),i.era=o[l],Cd(i);break}case"year":var s,a;!((s=(a=i.calendar).isInverseEra)===null||s===void 0)&&s.call(a,i)&&(t=-t),i.year=ul(r.year,t,-1/0,9999,n?.round),i.year===-1/0&&(i.year=1),i.calendar.balanceYearMonth&&i.calendar.balanceYearMonth(i,r);break;case"month":i.month=ul(r.month,t,1,r.calendar.getMonthsInYear(r),n?.round);break;case"day":i.day=ul(r.day,t,1,r.calendar.getDaysInMonth(r),n?.round);break;default:throw new Error("Unsupported field "+e)}return r.calendar.balanceDate&&r.calendar.balanceDate(i),Cd(i),i}function iH(r,e,t,n){let i=r.copy();switch(e){case"hour":{let s=r.hour,a=0,o=23;if(n?.hourCycle===12){let l=s>=12;a=l?12:0,o=l?23:11}i.hour=ul(s,t,a,o,n?.round);break}case"minute":i.minute=ul(r.minute,t,0,59,n?.round);break;case"second":i.second=ul(r.second,t,0,59,n?.round);break;case"millisecond":i.millisecond=ul(r.millisecond,t,0,999,n?.round);break;default:throw new Error("Unsupported field "+e)}return i}function ul(r,e,t,n,i=!1){if(i){r+=Math.sign(e),r<t&&(r=n);let s=Math.abs(e);e>0?r=Math.ceil(r/s)*s:r=Math.floor(r/s)*s,r>n&&(r=t)}else r+=e,r<t?r=n-(t-r-1):r>n&&(r=t+(r-n-1));return r}function sH(r,e){let t;if(e.years!=null&&e.years!==0||e.months!=null&&e.months!==0||e.weeks!=null&&e.weeks!==0||e.days!=null&&e.days!==0){let i=Xw(_d(r),{years:e.years,months:e.months,weeks:e.weeks,days:e.days});t=ol(i,r.timeZone)}else t=Xf(r)-r.offset;t+=e.milliseconds||0,t+=(e.seconds||0)*1e3,t+=(e.minutes||0)*6e4,t+=(e.hours||0)*36e5;let n=cl(t,r.timeZone);return ra(n,r.calendar)}function Hde(r,e){return sH(r,rH(e))}function Vde(r,e,t,n){switch(e){case"hour":{let i=0,s=23;if(n?.hourCycle===12){let m=r.hour>=12;i=m?12:0,s=m?23:11}let a=_d(r),o=ra(nx(a,{hour:i}),new Yf),l=[ol(o,r.timeZone,"earlier"),ol(o,r.timeZone,"later")].filter(m=>cl(m,r.timeZone).day===o.day)[0],c=ra(nx(a,{hour:s}),new Yf),u=[ol(c,r.timeZone,"earlier"),ol(c,r.timeZone,"later")].filter(m=>cl(m,r.timeZone).day===c.day).pop(),d=Xf(r)-r.offset,h=Math.floor(d/mm),f=d%mm;return d=ul(h,t,Math.floor(l/mm),Math.floor(u/mm),n?.round)*mm+f,ra(cl(d,r.timeZone),r.calendar)}case"minute":case"second":case"millisecond":return iH(r,e,t,n);case"era":case"year":case"month":case"day":{let i=R2(_d(r),e,t,n),s=ol(i,r.timeZone);return ra(cl(s,r.timeZone),r.calendar)}default:throw new Error("Unsupported field "+e)}}function Gde(r,e,t){let n=_d(r),i=nx(C2(n,e),e);if(i.compare(n)===0)return r;let s=ol(i,r.timeZone,t);return ra(cl(s,r.timeZone),r.calendar)}const qde=/^(\d{4})-(\d{2})-(\d{2})(?:T(\d{2}))?(?::(\d{2}))?(?::(\d{2}))?(\.\d+)?(?:(?:([+-]\d{2})(?::?(\d{2}))?)|Z)$/;function aH(r,e){let t=r.match(qde);if(!t)throw new Error("Invalid ISO 8601 date time string: "+r);let n=new Zf(Uo(t[1],1,9999),Uo(t[2],1,12),1,e,0,t[4]?Uo(t[4],0,23):0,t[5]?Uo(t[5],0,59):0,t[6]?Uo(t[6],0,59):0,t[7]?Uo(t[7],0,1/0)*1e3:0);n.day=Uo(t[3],0,n.calendar.getDaysInMonth(n));var i;return t[8]&&(n.offset=Uo(t[8],-23,23)*36e5+Uo((i=t[9])!==null&&i!==void 0?i:"0",0,59)*6e4),eH(n,e)}function jde(r){return aH(r,Qf())}function Uo(r,e,t){let n=Number(r);if(n<e||n>t)throw new RangeError(`Value out of range: ${e} <= ${n} <= ${t}`);return n}function Kde(r){return`${String(r.hour).padStart(2,"0")}:${String(r.minute).padStart(2,"0")}:${String(r.second).padStart(2,"0")}${r.millisecond?String(r.millisecond/1e3).slice(1):""}`}function oH(r){let e=ra(r,new Yf);return`${String(e.year).padStart(4,"0")}-${String(e.month).padStart(2,"0")}-${String(e.day).padStart(2,"0")}`}function lH(r){return`${oH(r)}T${Kde(r)}`}function zde(r){let e=Math.sign(r)<0?"-":"+";r=Math.abs(r);let t=Math.floor(r/36e5),n=r%36e5/6e4;return`${e}${String(t).padStart(2,"0")}:${String(n).padStart(2,"0")}`}function Yde(r){return`${lH(r)}${zde(r.offset)}[${r.timeZone}]`}function Qde(r,e){if(e.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object")}function k2(r,e,t){Qde(r,e),e.set(r,t)}function I2(r){let e=typeof r[0]=="object"?r.shift():new Yf,t;if(typeof r[0]=="string")t=r.shift();else{let a=e.getEras();t=a[a.length-1]}let n=r.shift(),i=r.shift(),s=r.shift();return[e,t,n,i,s]}var Xde=new WeakMap;class i0{copy(){return this.era?new i0(this.calendar,this.era,this.year,this.month,this.day):new i0(this.calendar,this.year,this.month,this.day)}add(e){return Xw(this,e)}subtract(e){return nH(this,e)}set(e){return C2(this,e)}cycle(e,t,n){return R2(this,e,t,n)}toDate(e){return ZW(this,e)}toString(){return oH(this)}compare(e){return zW(this,e)}constructor(...e){k2(this,Xde,{writable:!0,value:void 0});let[t,n,i,s,a]=I2(e);this.calendar=t,this.era=n,this.year=i,this.month=s,this.day=a,Cd(this)}}var Zde=new WeakMap;class ix{copy(){return this.era?new ix(this.calendar,this.era,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond):new ix(this.calendar,this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond)}add(e){return Xw(this,e)}subtract(e){return nH(this,e)}set(e){return C2(nx(this,e),e)}cycle(e,t,n){switch(e){case"era":case"year":case"month":case"day":return R2(this,e,t,n);default:return iH(this,e,t,n)}}toDate(e,t){return ZW(this,e,t)}toString(){return lH(this)}compare(e){let t=zW(this,e);return t===0?kde(this,_d(e)):t}constructor(...e){k2(this,Zde,{writable:!0,value:void 0});let[t,n,i,s,a]=I2(e);this.calendar=t,this.era=n,this.year=i,this.month=s,this.day=a,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Cd(this)}}var Jde=new WeakMap;class Zf{copy(){return this.era?new Zf(this.calendar,this.era,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond):new Zf(this.calendar,this.year,this.month,this.day,this.timeZone,this.offset,this.hour,this.minute,this.second,this.millisecond)}add(e){return sH(this,e)}subtract(e){return Hde(this,e)}set(e,t){return Gde(this,e,t)}cycle(e,t,n){return Vde(this,e,t,n)}toDate(){return Nde(this)}toString(){return Yde(this)}toAbsoluteString(){return this.toDate().toISOString()}compare(e){return this.toDate().getTime()-Mde(e,this.timeZone).toDate().getTime()}constructor(...e){k2(this,Jde,{writable:!0,value:void 0});let[t,n,i,s,a]=I2(e),o=e.shift(),l=e.shift();this.calendar=t,this.era=n,this.year=i,this.month=s,this.day=a,this.timeZone=o,this.offset=l,this.hour=e.shift()||0,this.minute=e.shift()||0,this.second=e.shift()||0,this.millisecond=e.shift()||0,Cd(this)}}let QA=new Map;class ehe{format(e){return this.formatter.format(e)}formatToParts(e){return this.formatter.formatToParts(e)}formatRange(e,t){if(typeof this.formatter.formatRange=="function")return this.formatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.formatter.format(e)} – ${this.formatter.format(t)}`}formatRangeToParts(e,t){if(typeof this.formatter.formatRangeToParts=="function")return this.formatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let n=this.formatter.formatToParts(e),i=this.formatter.formatToParts(t);return[...n.map(s=>({...s,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.formatter.resolvedOptions();return nhe()&&(this.resolvedHourCycle||(this.resolvedHourCycle=ihe(e.locale,this.options)),e.hourCycle=this.resolvedHourCycle,e.hour12=this.resolvedHourCycle==="h11"||this.resolvedHourCycle==="h12"),e.calendar==="ethiopic-amete-alem"&&(e.calendar="ethioaa"),e}constructor(e,t={}){this.formatter=cH(e,t),this.options=t}}const the={true:{ja:"h11"},false:{}};function cH(r,e={}){if(typeof e.hour12=="boolean"&&rhe()){e={...e};let i=the[String(e.hour12)][r.split("-")[0]],s=e.hour12?"h12":"h23";e.hourCycle=i??s,delete e.hour12}let t=r+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(QA.has(t))return QA.get(t);let n=new Intl.DateTimeFormat(r,e);return QA.set(t,n),n}let XA=null;function rhe(){return XA==null&&(XA=new Intl.DateTimeFormat("en-US",{hour:"numeric",hour12:!1}).format(new Date(2020,2,3,0))==="24"),XA}let ZA=null;function nhe(){return ZA==null&&(ZA=new Intl.DateTimeFormat("fr",{hour:"numeric",hour12:!1}).resolvedOptions().hourCycle==="h12"),ZA}function ihe(r,e){if(!e.timeStyle&&!e.hour)return;r=r.replace(/(-u-)?-nu-[a-zA-Z0-9]+/,""),r+=(r.includes("-u-")?"":"-u")+"-nu-latn";let t=cH(r,{...e,timeZone:void 0}),n=parseInt(t.formatToParts(new Date(2020,2,3,0)).find(s=>s.type==="hour").value,10),i=parseInt(t.formatToParts(new Date(2020,2,3,23)).find(s=>s.type==="hour").value,10);if(n===0&&i===23)return"h23";if(n===24&&i===23)return"h24";if(n===0&&i===11)return"h11";if(n===12&&i===11)return"h12";throw new Error("Unexpected hour cycle result")}function le(){return le=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)({}).hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},le.apply(null,arguments)}function _e(r,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(r?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}function she(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function Zw(...r){return e=>r.forEach(t=>she(t,e))}function it(...r){return x.useCallback(Zw(...r),r)}function Jw(r,e){const t=x.createContext(e);function n(s){const{children:a,...o}=s,l=x.useMemo(()=>o,Object.values(o));return x.createElement(t.Provider,{value:l},a)}function i(s){const a=x.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${r}\``)}return n.displayName=r+"Provider",[n,i]}function Hr(r,e=[]){let t=[];function n(s,a){const o=x.createContext(a),l=t.length;t=[...t,a];function c(d){const{scope:h,children:f,...m}=d,g=h?.[r][l]||o,y=x.useMemo(()=>m,Object.values(m));return x.createElement(g.Provider,{value:y},f)}function u(d,h){const f=h?.[r][l]||o,m=x.useContext(f);if(m)return m;if(a!==void 0)return a;throw new Error(`\`${d}\` must be used within \`${s}\``)}return c.displayName=s+"Provider",[c,u]}const i=()=>{const s=t.map(a=>x.createContext(a));return function(o){const l=o?.[r]||s;return x.useMemo(()=>({[`__scope${r}`]:{...o,[r]:l}}),[o,l])}};return i.scopeName=r,[n,ahe(i,...e)]}function ahe(...r){const e=r[0];if(r.length===1)return e;const t=()=>{const n=r.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(s){const a=n.reduce((o,{useScope:l,scopeName:c})=>{const d=l(s)[`__scope${c}`];return{...o,...d}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return t.scopeName=e.scopeName,t}const fo=x.forwardRef((r,e)=>{const{children:t,...n}=r,i=x.Children.toArray(t),s=i.find(ohe);if(s){const a=s.props.children,o=i.map(l=>l===s?x.Children.count(a)>1?x.Children.only(null):x.isValidElement(a)?a.props.children:null:l);return x.createElement(JR,le({},n,{ref:e}),x.isValidElement(a)?x.cloneElement(a,void 0,o):null)}return x.createElement(JR,le({},n,{ref:e}),t)});fo.displayName="Slot";const JR=x.forwardRef((r,e)=>{const{children:t,...n}=r;return x.isValidElement(t)?x.cloneElement(t,{...lhe(n,t.props),ref:e?Zw(e,t.ref):t.ref}):x.Children.count(t)>1?x.Children.only(null):null});JR.displayName="SlotClone";const $2=({children:r})=>x.createElement(x.Fragment,null,r);function ohe(r){return x.isValidElement(r)&&r.type===$2}function lhe(r,e){const t={...e};for(const n in e){const i=r[n],s=e[n];/^on[A-Z]/.test(n)?i&&s?t[n]=(...o)=>{s(...o),i(...o)}:i&&(t[n]=i):n==="style"?t[n]={...i,...s}:n==="className"&&(t[n]=[i,s].filter(Boolean).join(" "))}return{...r,...t}}const che=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ge=che.reduce((r,e)=>{const t=x.forwardRef((n,i)=>{const{asChild:s,...a}=n,o=s?fo:e;return x.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),x.createElement(o,le({},a,{ref:i}))});return t.displayName=`Primitive.${e}`,{...r,[e]:t}},{});function uH(r,e){r&&ha.flushSync(()=>r.dispatchEvent(e))}function uhe(r,e=globalThis?.document){const t=Br(r);x.useEffect(()=>{const n=i=>{i.key==="Escape"&&t(i)};return e.addEventListener("keydown",n),()=>e.removeEventListener("keydown",n)},[t,e])}const ek="dismissableLayer.update",dhe="dismissableLayer.pointerDownOutside",hhe="dismissableLayer.focusOutside";let S5;const fhe=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Hd=x.forwardRef((r,e)=>{var t;const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...c}=r,u=x.useContext(fhe),[d,h]=x.useState(null),f=(t=d?.ownerDocument)!==null&&t!==void 0?t:globalThis?.document,[,m]=x.useState({}),g=it(e,k=>h(k)),y=Array.from(u.layers),[b]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),E=y.indexOf(b),w=d?y.indexOf(d):-1,A=u.layersWithOutsidePointerEventsDisabled.size>0,S=w>=E,_=phe(k=>{const D=k.target,I=[...u.branches].some(L=>L.contains(D));!S||I||(s?.(k),o?.(k),k.defaultPrevented||l?.())},f),C=mhe(k=>{const D=k.target;[...u.branches].some(L=>L.contains(D))||(a?.(k),o?.(k),k.defaultPrevented||l?.())},f);return uhe(k=>{w===u.layers.size-1&&(i?.(k),!k.defaultPrevented&&l&&(k.preventDefault(),l()))},f),x.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(S5=f.body.style.pointerEvents,f.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),A5(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(f.body.style.pointerEvents=S5)}},[d,f,n,u]),x.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),A5())},[d,u]),x.useEffect(()=>{const k=()=>m({});return document.addEventListener(ek,k),()=>document.removeEventListener(ek,k)},[]),x.createElement(Ge.div,le({},c,{ref:g,style:{pointerEvents:A?S?"auto":"none":void 0,...r.style},onFocusCapture:_e(r.onFocusCapture,C.onFocusCapture),onBlurCapture:_e(r.onBlurCapture,C.onBlurCapture),onPointerDownCapture:_e(r.onPointerDownCapture,_.onPointerDownCapture)}))});function phe(r,e=globalThis?.document){const t=Br(r),n=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const s=o=>{if(o.target&&!n.current){let c=function(){dH(dhe,t,l,{discrete:!0})};const l={originalEvent:o};o.pointerType==="touch"?(e.removeEventListener("click",i.current),i.current=c,e.addEventListener("click",i.current,{once:!0})):c()}else e.removeEventListener("click",i.current);n.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",s)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",s),e.removeEventListener("click",i.current)}},[e,t]),{onPointerDownCapture:()=>n.current=!0}}function mhe(r,e=globalThis?.document){const t=Br(r),n=x.useRef(!1);return x.useEffect(()=>{const i=s=>{s.target&&!n.current&&dH(hhe,t,{originalEvent:s},{discrete:!1})};return e.addEventListener("focusin",i),()=>e.removeEventListener("focusin",i)},[e,t]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function A5(){const r=new CustomEvent(ek);document.dispatchEvent(r)}function dH(r,e,t,{discrete:n}){const i=t.originalEvent.target,s=new CustomEvent(r,{bubbles:!1,cancelable:!0,detail:t});e&&i.addEventListener(r,e,{once:!0}),n?uH(i,s):i.dispatchEvent(s)}const ghe=Hd,Dr=globalThis?.document?x.useLayoutEffect:()=>{},vhe=BW.useId||(()=>{});let yhe=0;function ii(r){const[e,t]=x.useState(vhe());return Dr(()=>{t(n=>n??String(yhe++))},[r]),e?`radix-${e}`:""}const bhe=["top","right","bottom","left"],Lc=Math.min,es=Math.max,sx=Math.round,Hy=Math.floor,so=r=>({x:r,y:r}),Ehe={left:"right",right:"left",bottom:"top",top:"bottom"},xhe={start:"end",end:"start"};function tk(r,e,t){return es(r,Lc(e,t))}function gl(r,e){return typeof r=="function"?r(e):r}function vl(r){return r.split("-")[0]}function _p(r){return r.split("-")[1]}function D2(r){return r==="x"?"y":"x"}function L2(r){return r==="y"?"height":"width"}function Oc(r){return["top","bottom"].includes(vl(r))?"y":"x"}function O2(r){return D2(Oc(r))}function whe(r,e,t){t===void 0&&(t=!1);const n=_p(r),i=O2(r),s=L2(i);let a=i==="x"?n===(t?"end":"start")?"right":"left":n==="start"?"bottom":"top";return e.reference[s]>e.floating[s]&&(a=ax(a)),[a,ax(a)]}function The(r){const e=ax(r);return[rk(r),e,rk(e)]}function rk(r){return r.replace(/start|end/g,e=>xhe[e])}function She(r,e,t){const n=["left","right"],i=["right","left"],s=["top","bottom"],a=["bottom","top"];switch(r){case"top":case"bottom":return t?e?i:n:e?n:i;case"left":case"right":return e?s:a;default:return[]}}function Ahe(r,e,t,n){const i=_p(r);let s=She(vl(r),t==="start",n);return i&&(s=s.map(a=>a+"-"+i),e&&(s=s.concat(s.map(rk)))),s}function ax(r){return r.replace(/left|right|bottom|top/g,e=>Ehe[e])}function _he(r){return{top:0,right:0,bottom:0,left:0,...r}}function hH(r){return typeof r!="number"?_he(r):{top:r,right:r,bottom:r,left:r}}function ox(r){const{x:e,y:t,width:n,height:i}=r;return{width:n,height:i,top:t,left:e,right:e+n,bottom:t+i,x:e,y:t}}function _5(r,e,t){let{reference:n,floating:i}=r;const s=Oc(e),a=O2(e),o=L2(a),l=vl(e),c=s==="y",u=n.x+n.width/2-i.width/2,d=n.y+n.height/2-i.height/2,h=n[o]/2-i[o]/2;let f;switch(l){case"top":f={x:u,y:n.y-i.height};break;case"bottom":f={x:u,y:n.y+n.height};break;case"right":f={x:n.x+n.width,y:d};break;case"left":f={x:n.x-i.width,y:d};break;default:f={x:n.x,y:n.y}}switch(_p(e)){case"start":f[a]-=h*(t&&c?-1:1);break;case"end":f[a]+=h*(t&&c?-1:1);break}return f}const Che=async(r,e,t)=>{const{placement:n="bottom",strategy:i="absolute",middleware:s=[],platform:a}=t,o=s.filter(Boolean),l=await(a.isRTL==null?void 0:a.isRTL(e));let c=await a.getElementRects({reference:r,floating:e,strategy:i}),{x:u,y:d}=_5(c,n,l),h=n,f={},m=0;for(let g=0;g<o.length;g++){const{name:y,fn:b}=o[g],{x:E,y:w,data:A,reset:S}=await b({x:u,y:d,initialPlacement:n,placement:h,strategy:i,middlewareData:f,rects:c,platform:a,elements:{reference:r,floating:e}});u=E??u,d=w??d,f={...f,[y]:{...f[y],...A}},S&&m<=50&&(m++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(c=S.rects===!0?await a.getElementRects({reference:r,floating:e,strategy:i}):S.rects),{x:u,y:d}=_5(c,h,l)),g=-1)}return{x:u,y:d,placement:h,strategy:i,middlewareData:f}};async function s0(r,e){var t;e===void 0&&(e={});const{x:n,y:i,platform:s,rects:a,elements:o,strategy:l}=r,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:h=!1,padding:f=0}=gl(e,r),m=hH(f),y=o[h?d==="floating"?"reference":"floating":d],b=ox(await s.getClippingRect({element:(t=await(s.isElement==null?void 0:s.isElement(y)))==null||t?y:y.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:l})),E=d==="floating"?{x:n,y:i,width:a.floating.width,height:a.floating.height}:a.reference,w=await(s.getOffsetParent==null?void 0:s.getOffsetParent(o.floating)),A=await(s.isElement==null?void 0:s.isElement(w))?await(s.getScale==null?void 0:s.getScale(w))||{x:1,y:1}:{x:1,y:1},S=ox(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:E,offsetParent:w,strategy:l}):E);return{top:(b.top-S.top+m.top)/A.y,bottom:(S.bottom-b.bottom+m.bottom)/A.y,left:(b.left-S.left+m.left)/A.x,right:(S.right-b.right+m.right)/A.x}}const Rhe=r=>({name:"arrow",options:r,async fn(e){const{x:t,y:n,placement:i,rects:s,platform:a,elements:o,middlewareData:l}=e,{element:c,padding:u=0}=gl(r,e)||{};if(c==null)return{};const d=hH(u),h={x:t,y:n},f=O2(i),m=L2(f),g=await a.getDimensions(c),y=f==="y",b=y?"top":"left",E=y?"bottom":"right",w=y?"clientHeight":"clientWidth",A=s.reference[m]+s.reference[f]-h[f]-s.floating[m],S=h[f]-s.reference[f],_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(c));let C=_?_[w]:0;(!C||!await(a.isElement==null?void 0:a.isElement(_)))&&(C=o.floating[w]||s.floating[m]);const k=A/2-S/2,D=C/2-g[m]/2-1,I=Lc(d[b],D),L=Lc(d[E],D),M=I,F=C-g[m]-L,U=C/2-g[m]/2+k,W=tk(M,U,F),j=!l.arrow&&_p(i)!=null&&U!==W&&s.reference[m]/2-(U<M?I:L)-g[m]/2<0,z=j?U<M?U-M:U-F:0;return{[f]:h[f]+z,data:{[f]:W,centerOffset:U-W-z,...j&&{alignmentOffset:z}},reset:j}}}),khe=function(r){return r===void 0&&(r={}),{name:"flip",options:r,async fn(e){var t,n;const{placement:i,middlewareData:s,rects:a,initialPlacement:o,platform:l,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:h,fallbackStrategy:f="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...y}=gl(r,e);if((t=s.arrow)!=null&&t.alignmentOffset)return{};const b=vl(i),E=Oc(o),w=vl(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(c.floating)),S=h||(w||!g?[ax(o)]:The(o)),_=m!=="none";!h&&_&&S.push(...Ahe(o,g,m,A));const C=[o,...S],k=await s0(e,y),D=[];let I=((n=s.flip)==null?void 0:n.overflows)||[];if(u&&D.push(k[b]),d){const U=whe(i,a,A);D.push(k[U[0]],k[U[1]])}if(I=[...I,{placement:i,overflows:D}],!D.every(U=>U<=0)){var L,M;const U=(((L=s.flip)==null?void 0:L.index)||0)+1,W=C[U];if(W)return{data:{index:U,overflows:I},reset:{placement:W}};let j=(M=I.filter(z=>z.overflows[0]<=0).sort((z,Q)=>z.overflows[1]-Q.overflows[1])[0])==null?void 0:M.placement;if(!j)switch(f){case"bestFit":{var F;const z=(F=I.filter(Q=>{if(_){const V=Oc(Q.placement);return V===E||V==="y"}return!0}).map(Q=>[Q.placement,Q.overflows.filter(V=>V>0).reduce((V,Y)=>V+Y,0)]).sort((Q,V)=>Q[1]-V[1])[0])==null?void 0:F[0];z&&(j=z);break}case"initialPlacement":j=o;break}if(i!==j)return{reset:{placement:j}}}return{}}}};function C5(r,e){return{top:r.top-e.height,right:r.right-e.width,bottom:r.bottom-e.height,left:r.left-e.width}}function R5(r){return bhe.some(e=>r[e]>=0)}const Ihe=function(r){return r===void 0&&(r={}),{name:"hide",options:r,async fn(e){const{rects:t}=e,{strategy:n="referenceHidden",...i}=gl(r,e);switch(n){case"referenceHidden":{const s=await s0(e,{...i,elementContext:"reference"}),a=C5(s,t.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:R5(a)}}}case"escaped":{const s=await s0(e,{...i,altBoundary:!0}),a=C5(s,t.floating);return{data:{escapedOffsets:a,escaped:R5(a)}}}default:return{}}}}};async function $he(r,e){const{placement:t,platform:n,elements:i}=r,s=await(n.isRTL==null?void 0:n.isRTL(i.floating)),a=vl(t),o=_p(t),l=Oc(t)==="y",c=["left","top"].includes(a)?-1:1,u=s&&l?-1:1,d=gl(e,r);let{mainAxis:h,crossAxis:f,alignmentAxis:m}=typeof d=="number"?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return o&&typeof m=="number"&&(f=o==="end"?m*-1:m),l?{x:f*u,y:h*c}:{x:h*c,y:f*u}}const Dhe=function(r){return r===void 0&&(r=0),{name:"offset",options:r,async fn(e){var t,n;const{x:i,y:s,placement:a,middlewareData:o}=e,l=await $he(e,r);return a===((t=o.offset)==null?void 0:t.placement)&&(n=o.arrow)!=null&&n.alignmentOffset?{}:{x:i+l.x,y:s+l.y,data:{...l,placement:a}}}}},Lhe=function(r){return r===void 0&&(r={}),{name:"shift",options:r,async fn(e){const{x:t,y:n,placement:i}=e,{mainAxis:s=!0,crossAxis:a=!1,limiter:o={fn:y=>{let{x:b,y:E}=y;return{x:b,y:E}}},...l}=gl(r,e),c={x:t,y:n},u=await s0(e,l),d=Oc(vl(i)),h=D2(d);let f=c[h],m=c[d];if(s){const y=h==="y"?"top":"left",b=h==="y"?"bottom":"right",E=f+u[y],w=f-u[b];f=tk(E,f,w)}if(a){const y=d==="y"?"top":"left",b=d==="y"?"bottom":"right",E=m+u[y],w=m-u[b];m=tk(E,m,w)}const g=o.fn({...e,[h]:f,[d]:m});return{...g,data:{x:g.x-t,y:g.y-n,enabled:{[h]:s,[d]:a}}}}}},Ohe=function(r){return r===void 0&&(r={}),{options:r,fn(e){const{x:t,y:n,placement:i,rects:s,middlewareData:a}=e,{offset:o=0,mainAxis:l=!0,crossAxis:c=!0}=gl(r,e),u={x:t,y:n},d=Oc(i),h=D2(d);let f=u[h],m=u[d];const g=gl(o,e),y=typeof g=="number"?{mainAxis:g,crossAxis:0}:{mainAxis:0,crossAxis:0,...g};if(l){const w=h==="y"?"height":"width",A=s.reference[h]-s.floating[w]+y.mainAxis,S=s.reference[h]+s.reference[w]-y.mainAxis;f<A?f=A:f>S&&(f=S)}if(c){var b,E;const w=h==="y"?"width":"height",A=["top","left"].includes(vl(i)),S=s.reference[d]-s.floating[w]+(A&&((b=a.offset)==null?void 0:b[d])||0)+(A?0:y.crossAxis),_=s.reference[d]+s.reference[w]+(A?0:((E=a.offset)==null?void 0:E[d])||0)-(A?y.crossAxis:0);m<S?m=S:m>_&&(m=_)}return{[h]:f,[d]:m}}}},Phe=function(r){return r===void 0&&(r={}),{name:"size",options:r,async fn(e){var t,n;const{placement:i,rects:s,platform:a,elements:o}=e,{apply:l=()=>{},...c}=gl(r,e),u=await s0(e,c),d=vl(i),h=_p(i),f=Oc(i)==="y",{width:m,height:g}=s.floating;let y,b;d==="top"||d==="bottom"?(y=d,b=h===(await(a.isRTL==null?void 0:a.isRTL(o.floating))?"start":"end")?"left":"right"):(b=d,y=h==="end"?"top":"bottom");const E=g-u.top-u.bottom,w=m-u.left-u.right,A=Lc(g-u[y],E),S=Lc(m-u[b],w),_=!e.middlewareData.shift;let C=A,k=S;if((t=e.middlewareData.shift)!=null&&t.enabled.x&&(k=w),(n=e.middlewareData.shift)!=null&&n.enabled.y&&(C=E),_&&!h){const I=es(u.left,0),L=es(u.right,0),M=es(u.top,0),F=es(u.bottom,0);f?k=m-2*(I!==0||L!==0?I+L:es(u.left,u.right)):C=g-2*(M!==0||F!==0?M+F:es(u.top,u.bottom))}await l({...e,availableWidth:k,availableHeight:C});const D=await a.getDimensions(o.floating);return m!==D.width||g!==D.height?{reset:{rects:!0}}:{}}}};function eT(){return typeof window<"u"}function Cp(r){return fH(r)?(r.nodeName||"").toLowerCase():"#document"}function ns(r){var e;return(r==null||(e=r.ownerDocument)==null?void 0:e.defaultView)||window}function Eo(r){var e;return(e=(fH(r)?r.ownerDocument:r.document)||window.document)==null?void 0:e.documentElement}function fH(r){return eT()?r instanceof Node||r instanceof ns(r).Node:!1}function la(r){return eT()?r instanceof Element||r instanceof ns(r).Element:!1}function po(r){return eT()?r instanceof HTMLElement||r instanceof ns(r).HTMLElement:!1}function k5(r){return!eT()||typeof ShadowRoot>"u"?!1:r instanceof ShadowRoot||r instanceof ns(r).ShadowRoot}function ov(r){const{overflow:e,overflowX:t,overflowY:n,display:i}=ca(r);return/auto|scroll|overlay|hidden|clip/.test(e+n+t)&&!["inline","contents"].includes(i)}function Mhe(r){return["table","td","th"].includes(Cp(r))}function tT(r){return[":popover-open",":modal"].some(e=>{try{return r.matches(e)}catch{return!1}})}function P2(r){const e=M2(),t=la(r)?ca(r):r;return["transform","translate","scale","rotate","perspective"].some(n=>t[n]?t[n]!=="none":!1)||(t.containerType?t.containerType!=="normal":!1)||!e&&(t.backdropFilter?t.backdropFilter!=="none":!1)||!e&&(t.filter?t.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(n=>(t.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(t.contain||"").includes(n))}function Nhe(r){let e=Pc(r);for(;po(e)&&!Jf(e);){if(P2(e))return e;if(tT(e))return null;e=Pc(e)}return null}function M2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Jf(r){return["html","body","#document"].includes(Cp(r))}function ca(r){return ns(r).getComputedStyle(r)}function rT(r){return la(r)?{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}:{scrollLeft:r.scrollX,scrollTop:r.scrollY}}function Pc(r){if(Cp(r)==="html")return r;const e=r.assignedSlot||r.parentNode||k5(r)&&r.host||Eo(r);return k5(e)?e.host:e}function pH(r){const e=Pc(r);return Jf(e)?r.ownerDocument?r.ownerDocument.body:r.body:po(e)&&ov(e)?e:pH(e)}function a0(r,e,t){var n;e===void 0&&(e=[]),t===void 0&&(t=!0);const i=pH(r),s=i===((n=r.ownerDocument)==null?void 0:n.body),a=ns(i);if(s){const o=nk(a);return e.concat(a,a.visualViewport||[],ov(i)?i:[],o&&t?a0(o):[])}return e.concat(i,a0(i,[],t))}function nk(r){return r.parent&&Object.getPrototypeOf(r.parent)?r.frameElement:null}function mH(r){const e=ca(r);let t=parseFloat(e.width)||0,n=parseFloat(e.height)||0;const i=po(r),s=i?r.offsetWidth:t,a=i?r.offsetHeight:n,o=sx(t)!==s||sx(n)!==a;return o&&(t=s,n=a),{width:t,height:n,$:o}}function N2(r){return la(r)?r:r.contextElement}function _f(r){const e=N2(r);if(!po(e))return so(1);const t=e.getBoundingClientRect(),{width:n,height:i,$:s}=mH(e);let a=(s?sx(t.width):t.width)/n,o=(s?sx(t.height):t.height)/i;return(!a||!Number.isFinite(a))&&(a=1),(!o||!Number.isFinite(o))&&(o=1),{x:a,y:o}}const Fhe=so(0);function gH(r){const e=ns(r);return!M2()||!e.visualViewport?Fhe:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Bhe(r,e,t){return e===void 0&&(e=!1),!t||e&&t!==ns(r)?!1:e}function Rd(r,e,t,n){e===void 0&&(e=!1),t===void 0&&(t=!1);const i=r.getBoundingClientRect(),s=N2(r);let a=so(1);e&&(n?la(n)&&(a=_f(n)):a=_f(r));const o=Bhe(s,t,n)?gH(s):so(0);let l=(i.left+o.x)/a.x,c=(i.top+o.y)/a.y,u=i.width/a.x,d=i.height/a.y;if(s){const h=ns(s),f=n&&la(n)?ns(n):n;let m=h,g=nk(m);for(;g&&n&&f!==m;){const y=_f(g),b=g.getBoundingClientRect(),E=ca(g),w=b.left+(g.clientLeft+parseFloat(E.paddingLeft))*y.x,A=b.top+(g.clientTop+parseFloat(E.paddingTop))*y.y;l*=y.x,c*=y.y,u*=y.x,d*=y.y,l+=w,c+=A,m=ns(g),g=nk(m)}}return ox({width:u,height:d,x:l,y:c})}function F2(r,e){const t=rT(r).scrollLeft;return e?e.left+t:Rd(Eo(r)).left+t}function vH(r,e,t){t===void 0&&(t=!1);const n=r.getBoundingClientRect(),i=n.left+e.scrollLeft-(t?0:F2(r,n)),s=n.top+e.scrollTop;return{x:i,y:s}}function Uhe(r){let{elements:e,rect:t,offsetParent:n,strategy:i}=r;const s=i==="fixed",a=Eo(n),o=e?tT(e.floating):!1;if(n===a||o&&s)return t;let l={scrollLeft:0,scrollTop:0},c=so(1);const u=so(0),d=po(n);if((d||!d&&!s)&&((Cp(n)!=="body"||ov(a))&&(l=rT(n)),po(n))){const f=Rd(n);c=_f(n),u.x=f.x+n.clientLeft,u.y=f.y+n.clientTop}const h=a&&!d&&!s?vH(a,l,!0):so(0);return{width:t.width*c.x,height:t.height*c.y,x:t.x*c.x-l.scrollLeft*c.x+u.x+h.x,y:t.y*c.y-l.scrollTop*c.y+u.y+h.y}}function Whe(r){return Array.from(r.getClientRects())}function Hhe(r){const e=Eo(r),t=rT(r),n=r.ownerDocument.body,i=es(e.scrollWidth,e.clientWidth,n.scrollWidth,n.clientWidth),s=es(e.scrollHeight,e.clientHeight,n.scrollHeight,n.clientHeight);let a=-t.scrollLeft+F2(r);const o=-t.scrollTop;return ca(n).direction==="rtl"&&(a+=es(e.clientWidth,n.clientWidth)-i),{width:i,height:s,x:a,y:o}}function Vhe(r,e){const t=ns(r),n=Eo(r),i=t.visualViewport;let s=n.clientWidth,a=n.clientHeight,o=0,l=0;if(i){s=i.width,a=i.height;const c=M2();(!c||c&&e==="fixed")&&(o=i.offsetLeft,l=i.offsetTop)}return{width:s,height:a,x:o,y:l}}function Ghe(r,e){const t=Rd(r,!0,e==="fixed"),n=t.top+r.clientTop,i=t.left+r.clientLeft,s=po(r)?_f(r):so(1),a=r.clientWidth*s.x,o=r.clientHeight*s.y,l=i*s.x,c=n*s.y;return{width:a,height:o,x:l,y:c}}function I5(r,e,t){let n;if(e==="viewport")n=Vhe(r,t);else if(e==="document")n=Hhe(Eo(r));else if(la(e))n=Ghe(e,t);else{const i=gH(r);n={x:e.x-i.x,y:e.y-i.y,width:e.width,height:e.height}}return ox(n)}function yH(r,e){const t=Pc(r);return t===e||!la(t)||Jf(t)?!1:ca(t).position==="fixed"||yH(t,e)}function qhe(r,e){const t=e.get(r);if(t)return t;let n=a0(r,[],!1).filter(o=>la(o)&&Cp(o)!=="body"),i=null;const s=ca(r).position==="fixed";let a=s?Pc(r):r;for(;la(a)&&!Jf(a);){const o=ca(a),l=P2(a);!l&&o.position==="fixed"&&(i=null),(s?!l&&!i:!l&&o.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ov(a)&&!l&&yH(r,a))?n=n.filter(u=>u!==a):i=o,a=Pc(a)}return e.set(r,n),n}function jhe(r){let{element:e,boundary:t,rootBoundary:n,strategy:i}=r;const a=[...t==="clippingAncestors"?tT(e)?[]:qhe(e,this._c):[].concat(t),n],o=a[0],l=a.reduce((c,u)=>{const d=I5(e,u,i);return c.top=es(d.top,c.top),c.right=Lc(d.right,c.right),c.bottom=Lc(d.bottom,c.bottom),c.left=es(d.left,c.left),c},I5(e,o,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Khe(r){const{width:e,height:t}=mH(r);return{width:e,height:t}}function zhe(r,e,t){const n=po(e),i=Eo(e),s=t==="fixed",a=Rd(r,!0,s,e);let o={scrollLeft:0,scrollTop:0};const l=so(0);if(n||!n&&!s)if((Cp(e)!=="body"||ov(i))&&(o=rT(e)),n){const h=Rd(e,!0,s,e);l.x=h.x+e.clientLeft,l.y=h.y+e.clientTop}else i&&(l.x=F2(i));const c=i&&!n&&!s?vH(i,o):so(0),u=a.left+o.scrollLeft-l.x-c.x,d=a.top+o.scrollTop-l.y-c.y;return{x:u,y:d,width:a.width,height:a.height}}function JA(r){return ca(r).position==="static"}function $5(r,e){if(!po(r)||ca(r).position==="fixed")return null;if(e)return e(r);let t=r.offsetParent;return Eo(r)===t&&(t=t.ownerDocument.body),t}function bH(r,e){const t=ns(r);if(tT(r))return t;if(!po(r)){let i=Pc(r);for(;i&&!Jf(i);){if(la(i)&&!JA(i))return i;i=Pc(i)}return t}let n=$5(r,e);for(;n&&Mhe(n)&&JA(n);)n=$5(n,e);return n&&Jf(n)&&JA(n)&&!P2(n)?t:n||Nhe(r)||t}const Yhe=async function(r){const e=this.getOffsetParent||bH,t=this.getDimensions,n=await t(r.floating);return{reference:zhe(r.reference,await e(r.floating),r.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function Qhe(r){return ca(r).direction==="rtl"}const Xhe={convertOffsetParentRelativeRectToViewportRelativeRect:Uhe,getDocumentElement:Eo,getClippingRect:jhe,getOffsetParent:bH,getElementRects:Yhe,getClientRects:Whe,getDimensions:Khe,getScale:_f,isElement:la,isRTL:Qhe};function EH(r,e){return r.x===e.x&&r.y===e.y&&r.width===e.width&&r.height===e.height}function Zhe(r,e){let t=null,n;const i=Eo(r);function s(){var o;clearTimeout(n),(o=t)==null||o.disconnect(),t=null}function a(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),s();const c=r.getBoundingClientRect(),{left:u,top:d,width:h,height:f}=c;if(o||e(),!h||!f)return;const m=Hy(d),g=Hy(i.clientWidth-(u+h)),y=Hy(i.clientHeight-(d+f)),b=Hy(u),w={rootMargin:-m+"px "+-g+"px "+-y+"px "+-b+"px",threshold:es(0,Lc(1,l))||1};let A=!0;function S(_){const C=_[0].intersectionRatio;if(C!==l){if(!A)return a();C?a(!1,C):n=setTimeout(()=>{a(!1,1e-7)},1e3)}C===1&&!EH(c,r.getBoundingClientRect())&&a(),A=!1}try{t=new IntersectionObserver(S,{...w,root:i.ownerDocument})}catch{t=new IntersectionObserver(S,w)}t.observe(r)}return a(!0),s}function xH(r,e,t,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,c=N2(r),u=i||s?[...c?a0(c):[],...a0(e)]:[];u.forEach(b=>{i&&b.addEventListener("scroll",t,{passive:!0}),s&&b.addEventListener("resize",t)});const d=c&&o?Zhe(c,t):null;let h=-1,f=null;a&&(f=new ResizeObserver(b=>{let[E]=b;E&&E.target===c&&f&&(f.unobserve(e),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=f)==null||w.observe(e)})),t()}),c&&!l&&f.observe(c),f.observe(e));let m,g=l?Rd(r):null;l&&y();function y(){const b=Rd(r);g&&!EH(g,b)&&t(),g=b,m=requestAnimationFrame(y)}return t(),()=>{var b;u.forEach(E=>{i&&E.removeEventListener("scroll",t),s&&E.removeEventListener("resize",t)}),d?.(),(b=f)==null||b.disconnect(),f=null,l&&cancelAnimationFrame(m)}}const Jhe=Dhe,efe=Lhe,tfe=khe,rfe=Phe,nfe=Ihe,D5=Rhe,ife=Ohe,sfe=(r,e,t)=>{const n=new Map,i={platform:Xhe,...t},s={...i.platform,_c:n};return Che(r,e,{...i,platform:s})};var b1=typeof document<"u"?x.useLayoutEffect:x.useEffect;function lx(r,e){if(r===e)return!0;if(typeof r!=typeof e)return!1;if(typeof r=="function"&&r.toString()===e.toString())return!0;let t,n,i;if(r&&e&&typeof r=="object"){if(Array.isArray(r)){if(t=r.length,t!==e.length)return!1;for(n=t;n--!==0;)if(!lx(r[n],e[n]))return!1;return!0}if(i=Object.keys(r),t=i.length,t!==Object.keys(e).length)return!1;for(n=t;n--!==0;)if(!{}.hasOwnProperty.call(e,i[n]))return!1;for(n=t;n--!==0;){const s=i[n];if(!(s==="_owner"&&r.$$typeof)&&!lx(r[s],e[s]))return!1}return!0}return r!==r&&e!==e}function wH(r){return typeof window>"u"?1:(r.ownerDocument.defaultView||window).devicePixelRatio||1}function L5(r,e){const t=wH(r);return Math.round(e*t)/t}function O5(r){const e=x.useRef(r);return b1(()=>{e.current=r}),e}function TH(r){r===void 0&&(r={});const{placement:e="bottom",strategy:t="absolute",middleware:n=[],platform:i,elements:{reference:s,floating:a}={},transform:o=!0,whileElementsMounted:l,open:c}=r,[u,d]=x.useState({x:0,y:0,strategy:t,placement:e,middlewareData:{},isPositioned:!1}),[h,f]=x.useState(n);lx(h,n)||f(n);const[m,g]=x.useState(null),[y,b]=x.useState(null),E=x.useCallback(z=>{z!==_.current&&(_.current=z,g(z))},[]),w=x.useCallback(z=>{z!==C.current&&(C.current=z,b(z))},[]),A=s||m,S=a||y,_=x.useRef(null),C=x.useRef(null),k=x.useRef(u),D=l!=null,I=O5(l),L=O5(i),M=x.useCallback(()=>{if(!_.current||!C.current)return;const z={placement:e,strategy:t,middleware:h};L.current&&(z.platform=L.current),sfe(_.current,C.current,z).then(Q=>{const V={...Q,isPositioned:!0};F.current&&!lx(k.current,V)&&(k.current=V,ha.flushSync(()=>{d(V)}))})},[h,e,t,L]);b1(()=>{c===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,d(z=>({...z,isPositioned:!1})))},[c]);const F=x.useRef(!1);b1(()=>(F.current=!0,()=>{F.current=!1}),[]),b1(()=>{if(A&&(_.current=A),S&&(C.current=S),A&&S){if(I.current)return I.current(A,S,M);M()}},[A,S,M,I,D]);const U=x.useMemo(()=>({reference:_,floating:C,setReference:E,setFloating:w}),[E,w]),W=x.useMemo(()=>({reference:A,floating:S}),[A,S]),j=x.useMemo(()=>{const z={position:t,left:0,top:0};if(!W.floating)return z;const Q=L5(W.floating,u.x),V=L5(W.floating,u.y);return o?{...z,transform:"translate("+Q+"px, "+V+"px)",...wH(W.floating)>=1.5&&{willChange:"transform"}}:{position:t,left:Q,top:V}},[t,o,W.floating,u.x,u.y]);return x.useMemo(()=>({...u,update:M,refs:U,elements:W,floatingStyles:j}),[u,M,U,W,j])}const afe=r=>{function e(t){return{}.hasOwnProperty.call(t,"current")}return{name:"arrow",options:r,fn(t){const{element:n,padding:i}=typeof r=="function"?r(t):r;return n&&e(n)?n.current!=null?D5({element:n.current,padding:i}).fn(t):{}:n?D5({element:n,padding:i}).fn(t):{}}}},SH=(r,e)=>({...Jhe(r),options:[r,e]}),AH=(r,e)=>({...efe(r),options:[r,e]}),ofe=(r,e)=>({...ife(r),options:[r,e]}),_H=(r,e)=>({...tfe(r),options:[r,e]}),lfe=(r,e)=>({...rfe(r),options:[r,e]}),cfe=(r,e)=>({...nfe(r),options:[r,e]}),ufe=(r,e)=>({...afe(r),options:[r,e]}),dfe=x.forwardRef((r,e)=>{const{children:t,width:n=10,height:i=5,...s}=r;return x.createElement(Ge.svg,le({},s,{ref:e,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none"}),r.asChild?t:x.createElement("polygon",{points:"0,0 30,0 15,10"}))}),hfe=dfe;function nT(r){const[e,t]=x.useState(void 0);return Dr(()=>{if(r){t({width:r.offsetWidth,height:r.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const s=i[0];let a,o;if("borderBoxSize"in s){const l=s.borderBoxSize,c=Array.isArray(l)?l[0]:l;a=c.inlineSize,o=c.blockSize}else a=r.offsetWidth,o=r.offsetHeight;t({width:a,height:o})});return n.observe(r,{box:"border-box"}),()=>n.unobserve(r)}else t(void 0)},[r]),e}const CH="Popper",[RH,jc]=Hr(CH),[ffe,kH]=RH(CH),pfe=r=>{const{__scopePopper:e,children:t}=r,[n,i]=x.useState(null);return x.createElement(ffe,{scope:e,anchor:n,onAnchorChange:i},t)},mfe="PopperAnchor",gfe=x.forwardRef((r,e)=>{const{__scopePopper:t,virtualRef:n,...i}=r,s=kH(mfe,t),a=x.useRef(null),o=it(e,a);return x.useEffect(()=>{s.onAnchorChange(n?.current||a.current)}),n?null:x.createElement(Ge.div,le({},i,{ref:o}))}),IH="PopperContent",[vfe,yfe]=RH(IH),bfe=x.forwardRef((r,e)=>{var t,n,i,s,a,o,l,c;const{__scopePopper:u,side:d="bottom",sideOffset:h=0,align:f="center",alignOffset:m=0,arrowPadding:g=0,avoidCollisions:y=!0,collisionBoundary:b=[],collisionPadding:E=0,sticky:w="partial",hideWhenDetached:A=!1,updatePositionStrategy:S="optimized",onPlaced:_,...C}=r,k=kH(IH,u),[D,I]=x.useState(null),L=it(e,et=>I(et)),[M,F]=x.useState(null),U=nT(M),W=(t=U?.width)!==null&&t!==void 0?t:0,j=(n=U?.height)!==null&&n!==void 0?n:0,z=d+(f!=="center"?"-"+f:""),Q=typeof E=="number"?E:{top:0,right:0,bottom:0,left:0,...E},V=Array.isArray(b)?b:[b],Y=V.length>0,J={padding:Q,boundary:V.filter(Tfe),altBoundary:Y},{refs:ue,floatingStyles:ne,placement:ge,isPositioned:ae,middlewareData:ie}=TH({strategy:"fixed",placement:z,whileElementsMounted:(...et)=>xH(...et,{animationFrame:S==="always"}),elements:{reference:k.anchor},middleware:[SH({mainAxis:h+j,alignmentAxis:m}),y&&AH({mainAxis:!0,crossAxis:!1,limiter:w==="partial"?ofe():void 0,...J}),y&&_H({...J}),lfe({...J,apply:({elements:et,rects:Qt,availableWidth:Ut,availableHeight:Wi})=>{const{width:ya,height:Hi}=Qt.reference,tt=et.floating.style;tt.setProperty("--radix-popper-available-width",`${Ut}px`),tt.setProperty("--radix-popper-available-height",`${Wi}px`),tt.setProperty("--radix-popper-anchor-width",`${ya}px`),tt.setProperty("--radix-popper-anchor-height",`${Hi}px`)}}),M&&ufe({element:M,padding:g}),Sfe({arrowWidth:W,arrowHeight:j}),A&&cfe({strategy:"referenceHidden",...J})]}),[ee,be]=$H(ge),we=Br(_);Dr(()=>{ae&&we?.()},[ae,we]);const Re=(i=ie.arrow)===null||i===void 0?void 0:i.x,Oe=(s=ie.arrow)===null||s===void 0?void 0:s.y,me=((a=ie.arrow)===null||a===void 0?void 0:a.centerOffset)!==0,[Ue,Se]=x.useState();return Dr(()=>{D&&Se(window.getComputedStyle(D).zIndex)},[D]),x.createElement("div",{ref:ue.setFloating,"data-radix-popper-content-wrapper":"",style:{...ne,transform:ae?ne.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Ue,"--radix-popper-transform-origin":[(o=ie.transformOrigin)===null||o===void 0?void 0:o.x,(l=ie.transformOrigin)===null||l===void 0?void 0:l.y].join(" ")},dir:r.dir},x.createElement(vfe,{scope:u,placedSide:ee,onArrowChange:F,arrowX:Re,arrowY:Oe,shouldHideArrow:me},x.createElement(Ge.div,le({"data-side":ee,"data-align":be},C,{ref:L,style:{...C.style,animation:ae?void 0:"none",opacity:(c=ie.hide)!==null&&c!==void 0&&c.referenceHidden?0:void 0}}))))}),Efe="PopperArrow",xfe={top:"bottom",right:"left",bottom:"top",left:"right"},wfe=x.forwardRef(function(e,t){const{__scopePopper:n,...i}=e,s=yfe(Efe,n),a=xfe[s.placedSide];return x.createElement("span",{ref:s.onArrowChange,style:{position:"absolute",left:s.arrowX,top:s.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[s.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[s.placedSide],visibility:s.shouldHideArrow?"hidden":void 0}},x.createElement(hfe,le({},i,{ref:t,style:{...i.style,display:"block"}})))});function Tfe(r){return r!==null}const Sfe=r=>({name:"transformOrigin",options:r,fn(e){var t,n,i,s,a;const{placement:o,rects:l,middlewareData:c}=e,d=((t=c.arrow)===null||t===void 0?void 0:t.centerOffset)!==0,h=d?0:r.arrowWidth,f=d?0:r.arrowHeight,[m,g]=$H(o),y={start:"0%",center:"50%",end:"100%"}[g],b=((n=(i=c.arrow)===null||i===void 0?void 0:i.x)!==null&&n!==void 0?n:0)+h/2,E=((s=(a=c.arrow)===null||a===void 0?void 0:a.y)!==null&&s!==void 0?s:0)+f/2;let w="",A="";return m==="bottom"?(w=d?y:`${b}px`,A=`${-f}px`):m==="top"?(w=d?y:`${b}px`,A=`${l.floating.height+f}px`):m==="right"?(w=`${-f}px`,A=d?y:`${E}px`):m==="left"&&(w=`${l.floating.width+f}px`,A=d?y:`${E}px`),{data:{x:w,y:A}}}});function $H(r){const[e,t="center"]=r.split("-");return[e,t]}const lv=pfe,cv=gfe,uv=bfe,Afe=wfe,Rp=x.forwardRef((r,e)=>{var t;const{container:n=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...i}=r;return n?UW.createPortal(x.createElement(Ge.div,le({},i,{ref:e})),n):null});function _fe(r,e){return x.useReducer((t,n)=>{const i=e[t][n];return i??t},r)}const mn=r=>{const{present:e,children:t}=r,n=Cfe(e),i=typeof t=="function"?t({present:n.isPresent}):x.Children.only(t),s=it(n.ref,i.ref);return typeof t=="function"||n.isPresent?x.cloneElement(i,{ref:s}):null};mn.displayName="Presence";function Cfe(r){const[e,t]=x.useState(),n=x.useRef({}),i=x.useRef(r),s=x.useRef("none"),a=r?"mounted":"unmounted",[o,l]=_fe(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const c=Vy(n.current);s.current=o==="mounted"?c:"none"},[o]),Dr(()=>{const c=n.current,u=i.current;if(u!==r){const h=s.current,f=Vy(c);r?l("MOUNT"):f==="none"||c?.display==="none"?l("UNMOUNT"):l(u&&h!==f?"ANIMATION_OUT":"UNMOUNT"),i.current=r}},[r,l]),Dr(()=>{if(e){const c=d=>{const f=Vy(n.current).includes(d.animationName);d.target===e&&f&&ha.flushSync(()=>l("ANIMATION_END"))},u=d=>{d.target===e&&(s.current=Vy(n.current))};return e.addEventListener("animationstart",u),e.addEventListener("animationcancel",c),e.addEventListener("animationend",c),()=>{e.removeEventListener("animationstart",u),e.removeEventListener("animationcancel",c),e.removeEventListener("animationend",c)}}else l("ANIMATION_END")},[e,l]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:x.useCallback(c=>{c&&(n.current=getComputedStyle(c)),t(c)},[])}}function Vy(r){return r?.animationName||"none"}function Gn({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=Rfe({defaultProp:e,onChange:t}),s=r!==void 0,a=s?r:n,o=Br(t),l=x.useCallback(c=>{if(s){const d=typeof c=="function"?c(r):c;d!==r&&o(d)}else i(c)},[s,r,i,o]);return[a,l]}function Rfe({defaultProp:r,onChange:e}){const t=x.useState(r),[n]=t,i=x.useRef(n),s=Br(e);return x.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),t}const DH=x.forwardRef((r,e)=>x.createElement(Ge.span,le({},r,{ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...r.style}}))),kfe=DH,[iT,jut]=Hr("Tooltip",[jc]),B2=jc(),Ife="TooltipProvider",ik="tooltip.open",[Kut,U2]=iT(Ife),W2="Tooltip",[$fe,dv]=iT(W2),Dfe=r=>{const{__scopeTooltip:e,children:t,open:n,defaultOpen:i=!1,onOpenChange:s,disableHoverableContent:a,delayDuration:o}=r,l=U2(W2,r.__scopeTooltip),c=B2(e),[u,d]=x.useState(null),h=ii(),f=x.useRef(0),m=a??l.disableHoverableContent,g=o??l.delayDuration,y=x.useRef(!1),[b=!1,E]=Gn({prop:n,defaultProp:i,onChange:C=>{C?(l.onOpen(),document.dispatchEvent(new CustomEvent(ik))):l.onClose(),s?.(C)}}),w=x.useMemo(()=>b?y.current?"delayed-open":"instant-open":"closed",[b]),A=x.useCallback(()=>{window.clearTimeout(f.current),y.current=!1,E(!0)},[E]),S=x.useCallback(()=>{window.clearTimeout(f.current),E(!1)},[E]),_=x.useCallback(()=>{window.clearTimeout(f.current),f.current=window.setTimeout(()=>{y.current=!0,E(!0)},g)},[g,E]);return x.useEffect(()=>()=>window.clearTimeout(f.current),[]),x.createElement(lv,c,x.createElement($fe,{scope:e,contentId:h,open:b,stateAttribute:w,trigger:u,onTriggerChange:d,onTriggerEnter:x.useCallback(()=>{l.isOpenDelayed?_():A()},[l.isOpenDelayed,_,A]),onTriggerLeave:x.useCallback(()=>{m?S():window.clearTimeout(f.current)},[S,m]),onOpen:A,onClose:S,disableHoverableContent:m},t))},P5="TooltipTrigger",Lfe=x.forwardRef((r,e)=>{const{__scopeTooltip:t,...n}=r,i=dv(P5,t),s=U2(P5,t),a=B2(t),o=x.useRef(null),l=it(e,o,i.onTriggerChange),c=x.useRef(!1),u=x.useRef(!1),d=x.useCallback(()=>c.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",d),[d]),x.createElement(cv,le({asChild:!0},a),x.createElement(Ge.button,le({"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute},n,{ref:l,onPointerMove:_e(r.onPointerMove,h=>{h.pointerType!=="touch"&&!u.current&&!s.isPointerInTransitRef.current&&(i.onTriggerEnter(),u.current=!0)}),onPointerLeave:_e(r.onPointerLeave,()=>{i.onTriggerLeave(),u.current=!1}),onPointerDown:_e(r.onPointerDown,()=>{c.current=!0,document.addEventListener("pointerup",d,{once:!0})}),onFocus:_e(r.onFocus,()=>{c.current||i.onOpen()}),onBlur:_e(r.onBlur,i.onClose),onClick:_e(r.onClick,i.onClose)})))}),LH="TooltipPortal",[Ofe,Pfe]=iT(LH,{forceMount:void 0}),Mfe=r=>{const{__scopeTooltip:e,forceMount:t,children:n,container:i}=r,s=dv(LH,e);return x.createElement(Ofe,{scope:e,forceMount:t},x.createElement(mn,{present:t||s.open},x.createElement(Rp,{asChild:!0,container:i},n)))},o0="TooltipContent",Nfe=x.forwardRef((r,e)=>{const t=Pfe(o0,r.__scopeTooltip),{forceMount:n=t.forceMount,side:i="top",...s}=r,a=dv(o0,r.__scopeTooltip);return x.createElement(mn,{present:n||a.open},a.disableHoverableContent?x.createElement(OH,le({side:i},s,{ref:e})):x.createElement(Ffe,le({side:i},s,{ref:e})))}),Ffe=x.forwardRef((r,e)=>{const t=dv(o0,r.__scopeTooltip),n=U2(o0,r.__scopeTooltip),i=x.useRef(null),s=it(e,i),[a,o]=x.useState(null),{trigger:l,onClose:c}=t,u=i.current,{onPointerInTransitChange:d}=n,h=x.useCallback(()=>{o(null),d(!1)},[d]),f=x.useCallback((m,g)=>{const y=m.currentTarget,b={x:m.clientX,y:m.clientY},E=Ufe(b,y.getBoundingClientRect()),w=Wfe(b,E),A=Hfe(g.getBoundingClientRect()),S=Gfe([...w,...A]);o(S),d(!0)},[d]);return x.useEffect(()=>()=>h(),[h]),x.useEffect(()=>{if(l&&u){const m=y=>f(y,u),g=y=>f(y,l);return l.addEventListener("pointerleave",m),u.addEventListener("pointerleave",g),()=>{l.removeEventListener("pointerleave",m),u.removeEventListener("pointerleave",g)}}},[l,u,f,h]),x.useEffect(()=>{if(a){const m=g=>{const y=g.target,b={x:g.clientX,y:g.clientY},E=l?.contains(y)||u?.contains(y),w=!Vfe(b,a);E?h():w&&(h(),c())};return document.addEventListener("pointermove",m),()=>document.removeEventListener("pointermove",m)}},[l,u,a,c,h]),x.createElement(OH,le({},r,{ref:s}))}),[Bfe,zut]=iT(W2,{isInside:!1}),OH=x.forwardRef((r,e)=>{const{__scopeTooltip:t,children:n,"aria-label":i,onEscapeKeyDown:s,onPointerDownOutside:a,...o}=r,l=dv(o0,t),c=B2(t),{onClose:u}=l;return x.useEffect(()=>(document.addEventListener(ik,u),()=>document.removeEventListener(ik,u)),[u]),x.useEffect(()=>{if(l.trigger){const d=h=>{const f=h.target;f!=null&&f.contains(l.trigger)&&u()};return window.addEventListener("scroll",d,{capture:!0}),()=>window.removeEventListener("scroll",d,{capture:!0})}},[l.trigger,u]),x.createElement(Hd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:d=>d.preventDefault(),onDismiss:u},x.createElement(uv,le({"data-state":l.stateAttribute},c,o,{ref:e,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),x.createElement($2,null,n),x.createElement(Bfe,{scope:t,isInside:!0},x.createElement(kfe,{id:l.contentId,role:"tooltip"},i||n))))});function Ufe(r,e){const t=Math.abs(e.top-r.y),n=Math.abs(e.bottom-r.y),i=Math.abs(e.right-r.x),s=Math.abs(e.left-r.x);switch(Math.min(t,n,i,s)){case s:return"left";case i:return"right";case t:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function Wfe(r,e,t=5){const n=[];switch(e){case"top":n.push({x:r.x-t,y:r.y+t},{x:r.x+t,y:r.y+t});break;case"bottom":n.push({x:r.x-t,y:r.y-t},{x:r.x+t,y:r.y-t});break;case"left":n.push({x:r.x+t,y:r.y-t},{x:r.x+t,y:r.y+t});break;case"right":n.push({x:r.x-t,y:r.y-t},{x:r.x-t,y:r.y+t});break}return n}function Hfe(r){const{top:e,right:t,bottom:n,left:i}=r;return[{x:i,y:e},{x:t,y:e},{x:t,y:n},{x:i,y:n}]}function Vfe(r,e){const{x:t,y:n}=r;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,l=e[s].y,c=e[a].x,u=e[a].y;l>n!=u>n&&t<(c-o)*(n-l)/(u-l)+o&&(i=!i)}return i}function Gfe(r){const e=r.slice();return e.sort((t,n)=>t.x<n.x?-1:t.x>n.x?1:t.y<n.y?-1:t.y>n.y?1:0),qfe(e)}function qfe(r){if(r.length<=1)return r.slice();const e=[];for(let n=0;n<r.length;n++){const i=r[n];for(;e.length>=2;){const s=e[e.length-1],a=e[e.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))e.pop();else break}e.push(i)}e.pop();const t=[];for(let n=r.length-1;n>=0;n--){const i=r[n];for(;t.length>=2;){const s=t[t.length-1],a=t[t.length-2];if((s.x-a.x)*(i.y-a.y)>=(s.y-a.y)*(i.x-a.x))t.pop();else break}t.push(i)}return t.pop(),e.length===1&&t.length===1&&e[0].x===t[0].x&&e[0].y===t[0].y?e:e.concat(t)}const PH=Dfe,MH=Lfe,NH=Mfe,FH=Nfe;let e_=0;function kp(){x.useEffect(()=>{var r,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(r=t[0])!==null&&r!==void 0?r:M5()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:M5()),e_++,()=>{e_===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(n=>n.remove()),e_--}},[])}function M5(){const r=document.createElement("span");return r.setAttribute("data-radix-focus-guard",""),r.tabIndex=0,r.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",r}const t_="focusScope.autoFocusOnMount",r_="focusScope.autoFocusOnUnmount",N5={bubbles:!1,cancelable:!0},Ip=x.forwardRef((r,e)=>{const{loop:t=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:s,...a}=r,[o,l]=x.useState(null),c=Br(i),u=Br(s),d=x.useRef(null),h=it(e,g=>l(g)),f=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let g=function(w){if(f.paused||!o)return;const A=w.target;o.contains(A)?d.current=A:ql(d.current,{select:!0})},y=function(w){if(f.paused||!o)return;const A=w.relatedTarget;A!==null&&(o.contains(A)||ql(d.current,{select:!0}))},b=function(w){if(document.activeElement===document.body)for(const S of w)S.removedNodes.length>0&&ql(o)};document.addEventListener("focusin",g),document.addEventListener("focusout",y);const E=new MutationObserver(b);return o&&E.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",y),E.disconnect()}}},[n,o,f.paused]),x.useEffect(()=>{if(o){B5.add(f);const g=document.activeElement;if(!o.contains(g)){const b=new CustomEvent(t_,N5);o.addEventListener(t_,c),o.dispatchEvent(b),b.defaultPrevented||(jfe(Xfe(BH(o)),{select:!0}),document.activeElement===g&&ql(o))}return()=>{o.removeEventListener(t_,c),setTimeout(()=>{const b=new CustomEvent(r_,N5);o.addEventListener(r_,u),o.dispatchEvent(b),b.defaultPrevented||ql(g??document.body,{select:!0}),o.removeEventListener(r_,u),B5.remove(f)},0)}}},[o,c,u,f]);const m=x.useCallback(g=>{if(!t&&!n||f.paused)return;const y=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,b=document.activeElement;if(y&&b){const E=g.currentTarget,[w,A]=Kfe(E);w&&A?!g.shiftKey&&b===A?(g.preventDefault(),t&&ql(w,{select:!0})):g.shiftKey&&b===w&&(g.preventDefault(),t&&ql(A,{select:!0})):b===E&&g.preventDefault()}},[t,n,f.paused]);return x.createElement(Ge.div,le({tabIndex:-1},a,{ref:h,onKeyDown:m}))});function jfe(r,{select:e=!1}={}){const t=document.activeElement;for(const n of r)if(ql(n,{select:e}),document.activeElement!==t)return}function Kfe(r){const e=BH(r),t=F5(e,r),n=F5(e.reverse(),r);return[t,n]}function BH(r){const e=[],t=document.createTreeWalker(r,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function F5(r,e){for(const t of r)if(!zfe(t,{upTo:e}))return t}function zfe(r,{upTo:e}){if(getComputedStyle(r).visibility==="hidden")return!0;for(;r;){if(e!==void 0&&r===e)return!1;if(getComputedStyle(r).display==="none")return!0;r=r.parentElement}return!1}function Yfe(r){return r instanceof HTMLInputElement&&"select"in r}function ql(r,{select:e=!1}={}){if(r&&r.focus){const t=document.activeElement;r.focus({preventScroll:!0}),r!==t&&Yfe(r)&&e&&r.select()}}const B5=Qfe();function Qfe(){let r=[];return{add(e){const t=r[0];e!==t&&t?.pause(),r=U5(r,e),r.unshift(e)},remove(e){var t;r=U5(r,e),(t=r[0])===null||t===void 0||t.resume()}}}function U5(r,e){const t=[...r],n=t.indexOf(e);return n!==-1&&t.splice(n,1),t}function Xfe(r){return r.filter(e=>e.tagName!=="A")}var Zfe=function(r){if(typeof document>"u")return null;var e=Array.isArray(r)?r[0]:r;return e.ownerDocument.body},gh=new WeakMap,Gy=new WeakMap,qy={},n_=0,UH=function(r){return r&&(r.host||UH(r.parentNode))},Jfe=function(r,e){return e.map(function(t){if(r.contains(t))return t;var n=UH(t);return n&&r.contains(n)?n:(console.error("aria-hidden",t,"in not contained inside",r,". Doing nothing"),null)}).filter(function(t){return!!t})},epe=function(r,e,t,n){var i=Jfe(e,Array.isArray(r)?r:[r]);qy[t]||(qy[t]=new WeakMap);var s=qy[t],a=[],o=new Set,l=new Set(i),c=function(d){!d||o.has(d)||(o.add(d),c(d.parentNode))};i.forEach(c);var u=function(d){!d||l.has(d)||Array.prototype.forEach.call(d.children,function(h){if(o.has(h))u(h);else try{var f=h.getAttribute(n),m=f!==null&&f!=="false",g=(gh.get(h)||0)+1,y=(s.get(h)||0)+1;gh.set(h,g),s.set(h,y),a.push(h),g===1&&m&&Gy.set(h,!0),y===1&&h.setAttribute(t,"true"),m||h.setAttribute(n,"true")}catch(b){console.error("aria-hidden: cannot operate on ",h,b)}})};return u(e),o.clear(),n_++,function(){a.forEach(function(d){var h=gh.get(d)-1,f=s.get(d)-1;gh.set(d,h),s.set(d,f),h||(Gy.has(d)||d.removeAttribute(n),Gy.delete(d)),f||d.removeAttribute(t)}),n_--,n_||(gh=new WeakMap,gh=new WeakMap,Gy=new WeakMap,qy={})}},hv=function(r,e,t){t===void 0&&(t="data-aria-hidden");var n=Array.from(Array.isArray(r)?r:[r]),i=Zfe(r);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live]"))),epe(n,i,t,"aria-hidden")):function(){return null}},Et=function(){return Et=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Et.apply(this,arguments)};function Os(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function fv(r,e,t){if(t||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return r.concat(s||Array.prototype.slice.call(e))}var Tc="right-scroll-bar-position",Sc="width-before-scroll-bar",tpe="with-scroll-bars-hidden",rpe="--removed-body-scroll-bar-size";function i_(r,e){return typeof r=="function"?r(e):r&&(r.current=e),r}function npe(r,e){var t=x.useState(function(){return{value:r,callback:e,facade:{get current(){return t.value},set current(n){var i=t.value;i!==n&&(t.value=n,t.callback(n,i))}}}})[0];return t.callback=e,t.facade}var ipe=typeof window<"u"?x.useLayoutEffect:x.useEffect,W5=new WeakMap;function pv(r,e){var t=npe(null,function(n){return r.forEach(function(i){return i_(i,n)})});return ipe(function(){var n=W5.get(t);if(n){var i=new Set(n),s=new Set(r),a=t.current;i.forEach(function(o){s.has(o)||i_(o,null)}),s.forEach(function(o){i.has(o)||i_(o,a)})}W5.set(t,r)},[r]),t}function spe(r){return r}function ape(r,e){e===void 0&&(e=spe);var t=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return t.length?t[t.length-1]:r},useMedium:function(s){var a=e(s,n);return t.push(a),function(){t=t.filter(function(o){return o!==a})}},assignSyncMedium:function(s){for(n=!0;t.length;){var a=t;t=[],a.forEach(s)}t={push:function(o){return s(o)},filter:function(){return t}}},assignMedium:function(s){n=!0;var a=[];if(t.length){var o=t;t=[],o.forEach(s),a=t}var l=function(){var u=a;a=[],u.forEach(s)},c=function(){return Promise.resolve().then(l)};c(),t={push:function(u){a.push(u),c()},filter:function(u){return a=a.filter(u),t}}}};return i}function mv(r){r===void 0&&(r={});var e=ape(null);return e.options=Et({async:!0,ssr:!1},r),e}var WH=function(r){var e=r.sideCar,t=Os(r,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=e.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,Et({},t))};WH.isSideCarExport=!0;function gv(r,e){return r.useMedium(e),WH}var HH=mv(),s_=function(){},sT=x.forwardRef(function(r,e){var t=x.useRef(null),n=x.useState({onScrollCapture:s_,onWheelCapture:s_,onTouchMoveCapture:s_}),i=n[0],s=n[1],a=r.forwardProps,o=r.children,l=r.className,c=r.removeScrollBar,u=r.enabled,d=r.shards,h=r.sideCar,f=r.noIsolation,m=r.inert,g=r.allowPinchZoom,y=r.as,b=y===void 0?"div":y,E=r.gapMode,w=Os(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=h,S=pv([t,e]),_=Et(Et({},w),i);return x.createElement(x.Fragment,null,u&&x.createElement(A,{sideCar:HH,removeScrollBar:c,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t,gapMode:E}),a?x.cloneElement(x.Children.only(o),Et(Et({},_),{ref:S})):x.createElement(b,Et({},_,{className:l,ref:S}),o))});sT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};sT.classNames={fullWidth:Sc,zeroRight:Tc};var ope=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function lpe(){if(!document)return null;var r=document.createElement("style");r.type="text/css";var e=ope();return e&&r.setAttribute("nonce",e),r}function cpe(r,e){r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}function upe(r){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(r)}var dpe=function(){var r=0,e=null;return{add:function(t){r==0&&(e=lpe())&&(cpe(e,t),upe(e)),r++},remove:function(){r--,!r&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},hpe=function(){var r=dpe();return function(e,t){x.useEffect(function(){return r.add(e),function(){r.remove()}},[e&&t])}},$p=function(){var r=hpe(),e=function(t){var n=t.styles,i=t.dynamic;return r(n,i),null};return e},fpe={left:0,top:0,right:0,gap:0},a_=function(r){return parseInt(r||"",10)||0},ppe=function(r){var e=window.getComputedStyle(document.body),t=e[r==="padding"?"paddingLeft":"marginLeft"],n=e[r==="padding"?"paddingTop":"marginTop"],i=e[r==="padding"?"paddingRight":"marginRight"];return[a_(t),a_(n),a_(i)]},mpe=function(r){if(r===void 0&&(r="margin"),typeof window>"u")return fpe;var e=ppe(r),t=document.documentElement.clientWidth,n=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,n-t+e[2]-e[0])}},gpe=$p(),Cf="data-scroll-locked",vpe=function(r,e,t,n){var i=r.left,s=r.top,a=r.right,o=r.gap;return t===void 0&&(t="margin"),`
  .`.concat(tpe,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(o,"px ").concat(n,`;
  }
  body[`).concat(Cf,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(n,";"),t==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(n,`;
    `),t==="padding"&&"padding-right: ".concat(o,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Tc,` {
    right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Sc,` {
    margin-right: `).concat(o,"px ").concat(n,`;
  }
  
  .`).concat(Tc," .").concat(Tc,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Sc," .").concat(Sc,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Cf,`] {
    `).concat(rpe,": ").concat(o,`px;
  }
`)},H5=function(){var r=parseInt(document.body.getAttribute(Cf)||"0",10);return isFinite(r)?r:0},ype=function(){x.useEffect(function(){return document.body.setAttribute(Cf,(H5()+1).toString()),function(){var r=H5()-1;r<=0?document.body.removeAttribute(Cf):document.body.setAttribute(Cf,r.toString())}},[])},vv=function(r){var e=r.noRelative,t=r.noImportant,n=r.gapMode,i=n===void 0?"margin":n;ype();var s=x.useMemo(function(){return mpe(i)},[i]);return x.createElement(gpe,{styles:vpe(s,!e,i,t?"":"!important")})},sk=!1;if(typeof window<"u")try{var jy=Object.defineProperty({},"passive",{get:function(){return sk=!0,!0}});window.addEventListener("test",jy,jy),window.removeEventListener("test",jy,jy)}catch{sk=!1}var vh=sk?{passive:!1}:!1,bpe=function(r){return r.tagName==="TEXTAREA"},VH=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!bpe(r)&&t[e]==="visible")},Epe=function(r){return VH(r,"overflowY")},xpe=function(r){return VH(r,"overflowX")},V5=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=GH(r,n);if(i){var s=qH(r,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},wpe=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},Tpe=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},GH=function(r,e){return r==="v"?Epe(e):xpe(e)},qH=function(r,e){return r==="v"?wpe(e):Tpe(e)},Spe=function(r,e){return r==="h"&&e==="rtl"?-1:1},Ape=function(r,e,t,n,i){var s=Spe(r,window.getComputedStyle(e).direction),a=s*n,o=t.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{var f=qH(r,o),m=f[0],g=f[1],y=f[2],b=g-y-s*m;(m||b)&&GH(r,o)&&(d+=b,h+=m),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},Ky=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},G5=function(r){return[r.deltaX,r.deltaY]},q5=function(r){return r&&"current"in r?r.current:r},_pe=function(r,e){return r[0]===e[0]&&r[1]===e[1]},Cpe=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},Rpe=0,yh=[];function kpe(r){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState(Rpe++)[0],s=x.useState($p)[0],a=x.useRef(r);x.useEffect(function(){a.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var g=fv([r.lockRef.current],(r.shards||[]).map(q5),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var o=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=Ky(g),E=t.current,w="deltaX"in g?g.deltaX:E[0]-b[0],A="deltaY"in g?g.deltaY:E[1]-b[1],S,_=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var k=V5(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=V5(C,_)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||A)&&(n.current=S),!S)return!0;var D=n.current||S;return Ape(D,y,g,D==="h"?w:A)},[]),l=x.useCallback(function(g){var y=g;if(!(!yh.length||yh[yh.length-1]!==s)){var b="deltaY"in y?G5(y):Ky(y),E=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&_pe(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var w=(a.current.shards||[]).map(q5).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?o(y,w[0]):!a.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,b,E){var w={name:g,delta:y,target:b,should:E,shadowParent:Ipe(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(A){return A!==w})},1)},[]),u=x.useCallback(function(g){t.current=Ky(g),n.current=void 0},[]),d=x.useCallback(function(g){c(g.type,G5(g),g.target,o(g,r.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,Ky(g),g.target,o(g,r.lockRef.current))},[]);x.useEffect(function(){return yh.push(s),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,vh),document.addEventListener("touchmove",l,vh),document.addEventListener("touchstart",u,vh),function(){yh=yh.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,vh),document.removeEventListener("touchmove",l,vh),document.removeEventListener("touchstart",u,vh)}},[]);var f=r.removeScrollBar,m=r.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:Cpe(i)}):null,f?x.createElement(vv,{gapMode:r.gapMode}):null)}function Ipe(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const $pe=gv(HH,kpe);var H2=x.forwardRef(function(r,e){return x.createElement(sT,Et({},r,{ref:e,sideCar:$pe}))});H2.classNames=sT.classNames;function ak(r,[e,t]){return Math.min(t,Math.max(e,r))}function aT(r){const e=r+"CollectionProvider",[t,n]=Hr(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map}),a=f=>{const{scope:m,children:g}=f,y=ft.useRef(null),b=ft.useRef(new Map).current;return ft.createElement(i,{scope:m,itemMap:b,collectionRef:y},g)},o=r+"CollectionSlot",l=ft.forwardRef((f,m)=>{const{scope:g,children:y}=f,b=s(o,g),E=it(m,b.collectionRef);return ft.createElement(fo,{ref:E},y)}),c=r+"CollectionItemSlot",u="data-radix-collection-item",d=ft.forwardRef((f,m)=>{const{scope:g,children:y,...b}=f,E=ft.useRef(null),w=it(m,E),A=s(c,g);return ft.useEffect(()=>(A.itemMap.set(E,{ref:E,...b}),()=>void A.itemMap.delete(E))),ft.createElement(fo,{[u]:"",ref:w},y)});function h(f){const m=s(r+"CollectionConsumer",f);return ft.useCallback(()=>{const y=m.collectionRef.current;if(!y)return[];const b=Array.from(y.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((A,S)=>b.indexOf(A.ref.current)-b.indexOf(S.ref.current))},[m.collectionRef,m.itemMap])}return[{Provider:a,Slot:l,ItemSlot:d},h,n]}const Dpe=x.createContext(void 0);function Vd(r){const e=x.useContext(Dpe);return r||e||"ltr"}function oT(r){const e=x.useRef({value:r,previous:r});return x.useMemo(()=>(e.current.value!==r&&(e.current.previous=e.current.value,e.current.value=r),e.current.previous),[r])}function Lpe(r){const e=`${r}CollectionProvider`,[t,n]=Hr(e),[i,s]=t(e,{collectionRef:{current:null},itemMap:new Map,listeners:new Set}),a=f=>{const{scope:m,children:g}=f,y=x.useRef(null),b=x.useRef(new Map).current,E=x.useRef(new Set).current;return $.jsx(i,{scope:m,itemMap:b,collectionRef:y,listeners:E,children:g})};a.displayName=e;const o=`${r}CollectionSlot`,l=x.forwardRef((f,m)=>{const{scope:g,children:y}=f,b=s(o,g),E=it(m,b.collectionRef);return $.jsx(fo,{ref:E,children:y})});l.displayName=o;const c=`${r}CollectionItemSlot`,u="data-radix-collection-item",d=x.forwardRef((f,m)=>{const{scope:g,children:y,...b}=f,E=x.useRef(null),w=it(m,E),A=s(c,g);return x.useEffect(()=>{const S=Array.from(A.itemMap.values());return A.itemMap.set(E,{ref:E,...b}),A.listeners.forEach(_=>_(Array.from(A.itemMap.values()),S)),()=>{const _=Array.from(A.itemMap.values());A.itemMap.delete(E),A.listeners.forEach(C=>C(Array.from(A.itemMap.values()),_))}}),$.jsx(fo,{[u]:"",ref:w,children:y})});d.displayName=c;function h(f){const m=s(`${r}CollectionConsumer`,f),g=x.useCallback(()=>{const b=m.collectionRef.current;if(!b)return[];const E=Array.from(b.querySelectorAll(`[${u}]`));return Array.from(m.itemMap.values()).sort((S,_)=>E.indexOf(S.ref.current)-E.indexOf(_.ref.current))},[m.collectionRef,m.itemMap]),y=x.useCallback(b=>(m.listeners.add(b),()=>m.listeners.delete(b)),[m.listeners]);return{getItems:g,subscribe:y}}return[{Provider:a,Slot:l,ItemSlot:d},h,n]}const o_=new Map;function Ope(r,e){const t=r+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():"");if(o_.has(t))return o_.get(t);const n=new Intl.Collator(r,e);return o_.set(t,n),n}function V2(r,e){const t=Ope(r,{usage:"search",...e});return{startsWith(n,i){return i.length===0?!0:(n=n.normalize("NFC"),i=i.normalize("NFC"),t.compare(n.slice(0,i.length),i)===0)},endsWith(n,i){return i.length===0?!0:(n=n.normalize("NFC"),i=i.normalize("NFC"),t.compare(n.slice(-i.length),i)===0)},contains(n,i){if(i.length===0)return!0;n=n.normalize("NFC"),i=i.normalize("NFC");let s=0;const a=i.length;for(;s+a<=n.length;s++){const o=n.slice(s,s+a);if(t.compare(i,o)===0)return!0}return!1}}}const Ppe=r=>{const e=x.useRef();return x.useEffect(()=>{e.current=r}),e.current},Mpe=[" ","Enter","ArrowUp","ArrowDown"],Npe=["Enter"],Fpe=r=>!!(r.length===1&&r.match(/\S| /)),jH="Combobox",[ep,yv]=Lpe(jH),[Bpe,xo]=Jw(jH),Upe=({children:r})=>$.jsx(lv,{children:$.jsx(ep.Provider,{scope:void 0,children:r})}),Wpe=r=>typeof r=="string"?r==="none"?{type:r,filter:void 0}:{type:r,filter:"startsWith"}:r,Hpe=r=>{const{allowCustomValue:e=!1,autocomplete:t="none",children:n,open:i,defaultOpen:s,onOpenChange:a,value:o,defaultValue:l,onValueChange:c,disabled:u,required:d=!1,locale:h="en-EN",onTextValueChange:f,textValue:m,defaultTextValue:g,filterValue:y,defaultFilterValue:b,onFilterValueChange:E,isPrintableCharacter:w=Fpe}=r,[A,S]=x.useState(null),[_,C]=x.useState(null),[k,D]=x.useState(null),[I,L]=x.useState(null),[M=!1,F]=Gn({prop:i,defaultProp:s,onChange:a}),[U,W]=Gn({prop:o,defaultProp:l,onChange:c}),[j,z]=Gn({prop:m,defaultProp:e&&!g?o:g,onChange:f}),[Q,V]=Gn({prop:y,defaultProp:b,onChange:E}),Y=ii(),J=x.useCallback((ne,ge)=>{const ae=ge.map(Re=>Re.ref.current),[ie,...ee]=ae,[be]=ee.slice(-1),we=I??ge.find(Re=>Re.value===U)?.ref.current;for(const Re of ne){if(Re===we)return;if(Re?.scrollIntoView({block:"nearest"}),Re===ie&&_&&(_.scrollTop=0),Re===be&&_&&(_.scrollTop=_.scrollHeight),L(Re),t==="both"){const Oe=ge.find(me=>me.ref.current===Re);Oe&&z(Oe.textValue)}if(Re!==we)return}},[t,z,_,I,U]),ue=Wpe(t);return x.useEffect(()=>{t!=="both"&&L(null)},[j,t]),x.useEffect(()=>{if(k&&A)return hv([k,A])},[k,A]),$.jsx(Upe,{children:$.jsx(Bpe,{allowCustomValue:e,autocomplete:ue,required:d,trigger:A,onTriggerChange:S,contentId:Y,value:U,onValueChange:W,open:M,onOpenChange:F,disabled:u,locale:h,focusFirst:J,textValue:j,onTextValueChange:z,onViewportChange:C,onContentChange:D,visuallyFocussedItem:I,filterValue:Q,onFilterValueChange:V,onVisuallyFocussedItemChange:L,isPrintableCharacter:w,children:n})})},KH="ComboboxTrigger",zH=x.forwardRef((r,e)=>{const{...t}=r,n=xo(KH),i=()=>{n.disabled||n.onOpenChange(!0)};return $.jsx(cv,{asChild:!0,children:$.jsx(Ip,{asChild:!0,trapped:n.open,onMountAutoFocus:s=>{s.preventDefault()},onUnmountAutoFocus:s=>{n.trigger?.focus({preventScroll:!0}),document.getSelection()?.empty(),s.preventDefault()},children:$.jsx("div",{ref:e,"data-disabled":n.disabled?"":void 0,...t,onClick:_e(t.onClick,s=>{if(n.disabled){s.preventDefault();return}n.trigger?.focus()}),onPointerDown:_e(t.onPointerDown,s=>{if(n.disabled){s.preventDefault();return}const a=s.target;a.hasPointerCapture(s.pointerId)&&a.releasePointerCapture(s.pointerId),(a.closest("button")??a.closest("div"))===s.currentTarget&&s.button===0&&s.ctrlKey===!1&&(i(),n.trigger?.focus())})})})})});zH.displayName=KH;const YH="ComboboxInput",QH=x.forwardRef((r,e)=>{const t=xo(YH),n=x.useRef(null),{getItems:i}=yv(void 0),{startsWith:s}=V2(t.locale,{sensitivity:"base"}),a=t.disabled,o=it(n,e,t.onTriggerChange),l=()=>{a||t.onOpenChange(!0)},c=Ppe(t.filterValue);return Dr(()=>{const u=setTimeout(()=>{if(t.textValue===""||t.textValue===void 0||t.filterValue===""||t.filterValue===void 0)return;const d=i().find(f=>f.type==="option"&&s(f.textValue,t.textValue)),h=nme(c??"",t.filterValue);d&&!t.visuallyFocussedItem&&h===t.filterValue.length&&n.current?.setSelectionRange(t.filterValue.length,t.textValue.length)});return()=>clearTimeout(u)},[t.textValue,t.filterValue,s,t.visuallyFocussedItem,i,c]),$.jsx("input",{type:"text",role:"combobox","aria-controls":t.contentId,"aria-expanded":t.open,"aria-required":t.required,"aria-autocomplete":t.autocomplete.type,"data-state":t.open?"open":"closed","aria-disabled":a,"aria-activedescendant":t.visuallyFocussedItem?.id,disabled:a,"data-disabled":a?"":void 0,"data-placeholder":t.textValue===void 0?"":void 0,value:t.textValue??"",...r,ref:o,onKeyDown:_e(r.onKeyDown,u=>{if(["ArrowUp","ArrowDown","Home","End"].includes(u.key))t.open||l(),setTimeout(()=>{let h=i().filter(f=>!f.disabled&&f.isVisible).map(f=>f.ref.current);if(["ArrowUp","End"].includes(u.key)&&(h=h.slice().reverse()),["ArrowUp","ArrowDown"].includes(u.key)){const f=t.visuallyFocussedItem??i().find(m=>m.value===t.value)?.ref.current;if(f){let m=h.indexOf(f);m===h.length-1&&(m=-1),h=h.slice(m+1)}}if(["ArrowDown"].includes(u.key)&&t.autocomplete.type==="both"&&h.length>1){const[f,...m]=h,g=i().find(y=>y.ref.current===f).textValue;t.textValue===g&&(h=m)}t.focusFirst(h,i())}),u.preventDefault();else if(["Tab"].includes(u.key)&&t.open)u.preventDefault();else if(["Escape"].includes(u.key))t.open?t.onOpenChange(!1):(t.onValueChange(void 0),t.onTextValueChange("")),u.preventDefault();else if(Npe.includes(u.key)){if(t.visuallyFocussedItem){const d=i().find(h=>h.ref.current===t.visuallyFocussedItem);d&&(t.onValueChange(d.value),t.onTextValueChange(d.textValue),t.autocomplete.type==="both"&&t.onFilterValueChange(d.textValue),d.ref.current?.click())}else{const d=i().find(h=>h.type==="option"&&!h.disabled&&h.textValue===t.textValue);d&&(t.onValueChange(d.value),t.onTextValueChange(d.textValue),t.autocomplete.type==="both"&&t.onFilterValueChange(d.textValue),d.ref.current?.click())}t.onOpenChange(!1),u.preventDefault()}else t.onVisuallyFocussedItemChange(null)}),onChange:_e(r.onChange,u=>{t.onTextValueChange(u.currentTarget.value),t.autocomplete.type==="both"&&t.onFilterValueChange(u.currentTarget.value)}),onKeyUp:_e(r.onKeyUp,u=>{if(!t.open&&(t.isPrintableCharacter(u.key)||["Backspace"].includes(u.key))&&l(),setTimeout(()=>{if(t.autocomplete.type==="both"&&t.isPrintableCharacter(u.key)&&t.filterValue!==void 0){const d=t.filterValue,h=i().find(f=>s(f.textValue,d));h&&t.onTextValueChange(h.textValue)}}),t.autocomplete.type==="none"&&t.isPrintableCharacter(u.key)){const d=t.textValue??"",h=i().find(f=>s(f.textValue,d));h&&(t.onVisuallyFocussedItemChange(h.ref.current),h.ref.current?.scrollIntoView())}}),onBlur:_e(r.onBlur,()=>{if(t.open)return;t.onVisuallyFocussedItemChange(null);const[u]=i().filter(h=>h.textValue===t.textValue&&h.type==="option");if(u){t.onValueChange(u.value),t.autocomplete.type==="both"&&t.onFilterValueChange(u.textValue);return}if(t.allowCustomValue){t.onValueChange(t.textValue),t.autocomplete.type==="both"&&t.onFilterValueChange(t.textValue);return}const[d]=i().filter(h=>h.value===t.value&&h.type==="option");d&&t.textValue!==""?(t.onTextValueChange(d.textValue),t.autocomplete.type==="both"&&t.onFilterValueChange(d.textValue)):(t.onValueChange(void 0),t.onTextValueChange(""))})})});QH.displayName="ComboboxTextInput";const XH=x.forwardRef((r,e)=>{const{children:t,...n}=r,i=xo(YH),s=i.disabled,a=()=>{s||(i.onOpenChange(!0),i.trigger?.focus())};return $.jsx(Ge.button,{"aria-hidden":!0,type:"button","aria-disabled":s,"aria-controls":i.contentId,"aria-expanded":i.open,disabled:s,"data-disabled":s?"":void 0,...n,tabIndex:-1,ref:e,onClick:_e(n.onClick,()=>{i.trigger?.focus()}),onPointerDown:_e(n.onPointerDown,o=>{o.button===0&&o.ctrlKey===!1&&(a(),o.preventDefault())}),onKeyDown:_e(n.onKeyDown,o=>{Mpe.includes(o.key)&&(a(),o.preventDefault())}),children:t||"▼"})});XH.displayName="ComboboxIcon";const Vpe="ComboboxPortal",ZH=r=>$.jsx(Rp,{asChild:!0,...r});ZH.displayName=Vpe;const G2="ComboboxContent",JH=x.forwardRef((r,e)=>{const t=xo(G2),{getItems:n}=yv(void 0),[i,s]=x.useState();if(Dr(()=>{s(new DocumentFragment)},[]),Dr(()=>{t.open&&t.autocomplete.type==="none"&&setTimeout(()=>{n().find(o=>o.value===t.value)?.ref.current?.scrollIntoView({block:"nearest"})})},[n,t.autocomplete,t.value,t.open]),!t.open){const a=i;return a?ha.createPortal($.jsx(ep.Slot,{scope:void 0,children:$.jsx("div",{children:r.children})}),a):null}return $.jsx(eV,{...r,ref:e})});JH.displayName=G2;const Gpe=10,eV=x.forwardRef((r,e)=>{const{onEscapeKeyDown:t,onPointerDownOutside:n,...i}=r,s=xo(G2),a=it(e,l=>s.onContentChange(l)),{onOpenChange:o}=s;return kp(),x.useEffect(()=>{const l=()=>{o(!1)};return window.addEventListener("blur",l),window.addEventListener("resize",l),()=>{window.removeEventListener("blur",l),window.removeEventListener("resize",l)}},[o]),$.jsx(H2,{allowPinchZoom:!0,children:$.jsx(Hd,{asChild:!0,onEscapeKeyDown:t,onPointerDownOutside:n,onFocusOutside:l=>{l.preventDefault()},onDismiss:()=>{s.onOpenChange(!1),s.trigger?.focus({preventScroll:!0})},children:$.jsx(tV,{role:"listbox",id:s.contentId,"data-state":s.open?"open":"closed",onContextMenu:l=>l.preventDefault(),...i,ref:a,style:{display:"flex",flexDirection:"column",outline:"none",...i.style}})})})});eV.displayName="ComboboxContentImpl";const tV=x.forwardRef((r,e)=>{const{align:t="start",collisionPadding:n=Gpe,...i}=r;return $.jsx(uv,{...i,ref:e,align:t,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-combobox-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-combobox-content-available-width":"var(--radix-popper-available-width)","--radix-combobox-content-available-height":"var(--radix-popper-available-height)","--radix-combobox-trigger-width":"var(--radix-popper-anchor-width)","--radix-combobox-trigger-height":"var(--radix-popper-anchor-height)"}})});tV.displayName="ComboboxPopperPosition";const rV="ComboboxViewport",nV=x.forwardRef((r,e)=>{const t=xo(rV),n=it(e,t.onViewportChange);return $.jsxs($.Fragment,{children:[$.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-combobox-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-combobox-viewport]::-webkit-scrollbar{display:none}"}}),$.jsx(ep.Slot,{scope:void 0,children:$.jsx(Ge.div,{"data-radix-combobox-viewport":"",role:"presentation",...r,ref:n,style:{position:"relative",flex:1,overflow:"auto",...r.style}})})]})});nV.displayName=rV;const lT="ComboboxItem",[j5,q2]=Jw(lT),j2=x.forwardRef((r,e)=>{const{value:t,disabled:n=!1,textValue:i,...s}=r,[a,o]=x.useState();Dr(()=>{o(new DocumentFragment)},[]);const{onTextValueChange:l,textValue:c,...u}=xo(lT),d=ii(),[h,f]=x.useState(i??""),m=u.value===t,{startsWith:g,contains:y}=V2(u.locale,{sensitivity:"base"}),b=x.useCallback(E=>{f(w=>w||(E?.textContent??"").trim())},[]);return x.useEffect(()=>{m&&c===void 0&&h!==""&&l(h)},[h,m,c,l]),u.autocomplete.type==="both"&&h&&u.filterValue&&!g(h,u.filterValue)||u.autocomplete.type==="list"&&u.autocomplete.filter==="startsWith"&&h&&c&&!g(h,c)||u.autocomplete.type==="list"&&u.autocomplete.filter==="contains"&&h&&c&&!y(h,c)?a?ha.createPortal($.jsx(j5,{textId:d,onTextValueChange:b,isSelected:m,textValue:h,children:$.jsx(ep.ItemSlot,{scope:void 0,value:t,textValue:h,disabled:n,type:"option",isVisible:!1,children:$.jsx(ok,{ref:e,value:t,disabled:n,...s})})}),a):null:$.jsx(j5,{textId:d,onTextValueChange:b,isSelected:m,textValue:h,children:$.jsx(ep.ItemSlot,{scope:void 0,value:t,textValue:h,disabled:n,type:"option",isVisible:!0,children:$.jsx(ok,{ref:e,value:t,disabled:n,...s})})})});j2.displayName=lT;const iV="ComboboxItemImpl",ok=x.forwardRef((r,e)=>{const{value:t,disabled:n=!1,...i}=r,s=x.useRef(null),a=it(e,s),{getItems:o}=yv(void 0),{onTextValueChange:l,visuallyFocussedItem:c,...u}=xo(lT),{isSelected:d,textValue:h,textId:f}=q2(iV),m=()=>{n||(u.onValueChange(t),l(h),u.onOpenChange(!1),u.autocomplete.type==="both"&&u.onFilterValueChange(h),u.trigger?.focus({preventScroll:!0}))},g=x.useMemo(()=>c===o().find(b=>b.ref.current===s.current)?.ref.current,[o,c]),y=ii();return $.jsx(Ge.div,{role:"option","aria-labelledby":f,"data-highlighted":g?"":void 0,"aria-selected":d&&g,"data-state":d?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...i,id:y,ref:a,onPointerUp:_e(i.onPointerUp,m)})});ok.displayName=iV;const sV="ComboboxItemText",aV=x.forwardRef((r,e)=>{const{className:t,style:n,...i}=r,s=q2(sV),a=it(e,s.onTextValueChange);return $.jsx(Ge.span,{id:s.textId,...i,ref:a})});aV.displayName=sV;const oV="ComboboxItemIndicator",lV=x.forwardRef((r,e)=>{const{isSelected:t}=q2(oV);return t?$.jsx(Ge.span,{"aria-hidden":!0,...r,ref:e}):null});lV.displayName=oV;const K2="ComboboxNoValueFound",cV=x.forwardRef((r,e)=>{const{textValue:t="",filterValue:n="",locale:i,autocomplete:s}=xo(K2),[a,o]=x.useState([]),{subscribe:l}=yv(void 0),{startsWith:c,contains:u}=V2(i,{sensitivity:"base"});return x.useEffect(()=>{const d=l(h=>{o(h)});return()=>{d()}},[l]),s.type==="none"&&a.length>0||s.type==="list"&&s.filter==="startsWith"&&a.some(d=>c(d.textValue,t))||s.type==="both"&&a.some(d=>c(d.textValue,n))||s.type==="list"&&s.filter==="contains"&&a.some(d=>u(d.textValue,t))?null:$.jsx(Ge.div,{...r,ref:e})});cV.displayName=K2;const uV=x.forwardRef((r,e)=>{const{disabled:t=!1,...n}=r,i=xo(K2),{textValue:s,visuallyFocussedItem:a}=i,{getItems:o,subscribe:l}=yv(void 0),c=x.useRef(null),[u,d]=x.useState(!1),h=it(e,c),f=x.useMemo(()=>a===o().find(y=>y.ref.current===c.current)?.ref.current,[o,a]),m=ii(),g=()=>{!t&&s&&(i.onValueChange(s),i.onTextValueChange(s),i.onOpenChange(!1),i.autocomplete.type==="both"&&i.onFilterValueChange(s),i.trigger?.focus({preventScroll:!0}))};return Dr(()=>{const y=l(b=>{d(!b.some(E=>E.textValue===s&&E.type!=="create"))});return o().length===0&&d(!0),()=>{y()}},[s,l,o]),!s||!u?null:$.jsx(ep.ItemSlot,{scope:void 0,value:s??"",textValue:s??"",disabled:t,isVisible:!0,type:"create",children:$.jsx(Ge.div,{role:"option",tabIndex:t?void 0:-1,"aria-disabled":t||void 0,"data-disabled":t?"":void 0,"data-highlighted":f?"":void 0,...n,id:m,ref:h,onPointerUp:_e(n.onPointerUp,g)})})});uV.displayName="ComboboxCreateItem";const qpe=Hpe,jpe=zH,Kpe=QH,zpe=XH,Ype=ZH,Qpe=JH,Xpe=nV,Zpe=j2,Jpe=aV,eme=lV,tme=cV,rme=uV;function nme(r,e){const t=Math.min(r.length,e.length);for(let n=0;n<t;n++)if(r[n]!==e[n])return n;return t}const na=Object.freeze(Object.defineProperty({__proto__:null,ComboboxItem:j2,Content:Qpe,CreateItem:rme,Icon:zpe,Item:Zpe,ItemIndicator:eme,ItemText:Jpe,NoValueFound:tme,Portal:Ype,Root:qpe,TextInput:Kpe,Trigger:jpe,Viewport:Xpe},Symbol.toStringTag,{value:"Module"}));function z2(r){const e=x.useRef(r);return x.useEffect(()=>{e.current=r}),x.useMemo(()=>(...t)=>e.current?.(...t),[])}const ime=[" ","Enter","ArrowUp","ArrowDown"],sme=[" ","Enter"],bv="Select",[cT,Ev,ame]=aT(bv),[Dp,ome]=Hr(bv,[ame,jc]),uT=jc(),[lme,Tl]=Dp(bv),[cme,ume]=Dp(bv),Y2=r=>{const{__scopeSelect:e,children:t,open:n,defaultOpen:i,onOpenChange:s,value:a,defaultValue:o,onValueChange:l,dir:c,disabled:u,required:d,multi:h=!1}=r,f=uT(e),[m,g]=x.useState(null),[y,b]=x.useState(null),[E,w]=x.useState(!1),A=Vd(c),[S=!1,_]=Gn({prop:n,defaultProp:i,onChange:s}),[C,k]=Gn({prop:a,defaultProp:o,onChange(M){l&&(Array.isArray(M),l(M))}}),D=x.useRef(null),[I,L]=x.useState(new Set);return $.jsx(lv,{...f,children:$.jsx(lme,{required:d,scope:e,trigger:m,onTriggerChange:g,valueNode:y,onValueNodeChange:b,valueNodeHasChildren:E,onValueNodeHasChildrenChange:w,contentId:ii(),value:C,onValueChange:k,open:S,onOpenChange:_,dir:A,triggerPointerDownPosRef:D,disabled:u,multi:h,children:$.jsx(cT.Provider,{scope:e,children:$.jsx(cme,{scope:r.__scopeSelect,onNativeOptionAdd:x.useCallback(M=>{L(F=>new Set(F).add(M))},[]),onNativeOptionRemove:x.useCallback(M=>{L(F=>{const U=new Set(F);return U.delete(M),U})},[]),children:t})})})})};Y2.displayName=bv;const dV="SelectTrigger",Q2=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,i=uT(t),s=Tl(dV,t),a=s.disabled,o=it(e,s.onTriggerChange),l=Ev(t),[c,u,d]=EV(f=>{const m=l().filter(b=>!b.disabled),g=m.find(b=>b.value===s.value),y=xV(m,f,g);if(y!==void 0&&!Array.isArray(y.value)){const b=s.multi?[y.value]:y.value;s.onValueChange(b)}}),h=()=>{a||(s.onOpenChange(!0),d())};return $.jsx(cv,{asChild:!0,...i,children:$.jsx(Ge.div,{role:"combobox","aria-controls":s.contentId,"aria-expanded":s.open,"aria-required":s.required,"aria-autocomplete":"none",dir:s.dir,"data-state":s.open?"open":"closed","data-disabled":a?"":void 0,"data-placeholder":s.value===void 0?"":void 0,tabIndex:a?void 0:0,...n,ref:o,onClick:_e(n.onClick,f=>{f.currentTarget.focus()}),onPointerDown:_e(n.onPointerDown,f=>{const m=f.target;m.hasPointerCapture(f.pointerId)&&m.releasePointerCapture(f.pointerId),(m.closest("button")??m.closest("div"))===f.currentTarget&&f.button===0&&f.ctrlKey===!1&&(h(),s.triggerPointerDownPosRef.current={x:Math.round(f.pageX),y:Math.round(f.pageY)},f.preventDefault())}),onKeyDown:_e(n.onKeyDown,f=>{const m=c.current!=="",g=f.ctrlKey||f.altKey||f.metaKey,y=f.target;(y.closest("button")??y.closest("div"))===f.currentTarget&&(!g&&f.key.length===1&&u(f.key),!(m&&f.key===" ")&&ime.includes(f.key)&&(h(),f.preventDefault()))})})})});Q2.displayName=dV;const hV="SelectValue",X2=x.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,placeholder:i,...s}=r,a=Tl(hV,t),{onValueNodeHasChildrenChange:o}=a,l=n!==void 0,c=it(e,a.onValueNodeChange),[u,d]=x.useState([]),h=Ev(t);Dr(()=>{o(l)},[o,l]),x.useLayoutEffect(()=>{if(Array.isArray(a.value)&&u.length!==a.value.length){const m=setTimeout(()=>{const g=h().filter(y=>Array.isArray(y.value)?!1:a.value?.includes(y.value));d(g)});return()=>{clearTimeout(m)}}},[a.value,h,u]);let f;if((a.value===void 0||a.value.length===0)&&i!==void 0)f=$.jsx("span",{children:i});else if(typeof n=="function")if(Array.isArray(a.value)){const m=a.value.map(g=>{const y=u.find(b=>b.value===g);return y?n({value:g,textValue:y?.textValue}):null});f=m.every(g=>g===null)?i:m}else f=n(a.value);else f=n;return $.jsx(Ge.span,{...s,ref:c,children:f||null})});X2.displayName=hV;const dme="SelectIcon",Z2=x.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...i}=r;return $.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:n||"▼"})});Z2.displayName=dme;const hme="SelectPortal",J2=r=>$.jsx(Rp,{asChild:!0,...r});J2.displayName=hme;const kd="SelectContent",eL=x.forwardRef((r,e)=>{const t=Tl(kd,r.__scopeSelect),[n,i]=x.useState();if(Dr(()=>{i(new DocumentFragment)},[]),!t.open){const s=n;return s?ha.createPortal($.jsx(fV,{scope:r.__scopeSelect,children:$.jsx(cT.Slot,{scope:r.__scopeSelect,children:$.jsx("div",{children:r.children})})}),s):null}return $.jsx(pV,{...r,ref:e})});eL.displayName=kd;const Zo=10,[fV,Kc]=Dp(kd),fme="SelectContentImpl",pV=x.forwardRef((r,e)=>{const{__scopeSelect:t,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:s,onPointerDownOutside:a,side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:y,...b}=r,E=Tl(kd,t),[w,A]=x.useState(null),[S,_]=x.useState(null),C=it(e,ee=>A(ee)),[k,D]=x.useState(null),[I,L]=x.useState(null),M=Ev(t),[F,U]=x.useState(!1),W=x.useRef(!1);x.useEffect(()=>{if(w)return hv(w)},[w]),kp();const j=x.useCallback(ee=>{const[be,...we]=M().map(me=>me.ref.current),[Re]=we.slice(-1),Oe=document.activeElement;for(const me of ee)if(me===Oe||(me?.scrollIntoView({block:"nearest"}),me===be&&S&&(S.scrollTop=0),me===Re&&S&&(S.scrollTop=S.scrollHeight),me?.focus(),document.activeElement!==Oe))return},[M,S]),z=x.useCallback(()=>j([k,w]),[j,k,w]);x.useEffect(()=>{F&&z()},[F,z]);const{onOpenChange:Q,triggerPointerDownPosRef:V}=E;x.useEffect(()=>{if(w){let ee={x:0,y:0};const be=Re=>{ee={x:Math.abs(Math.round(Re.pageX)-(V.current?.x??0)),y:Math.abs(Math.round(Re.pageY)-(V.current?.y??0))}},we=Re=>{ee.x<=10&&ee.y<=10?Re.preventDefault():w.contains(Re.target)||Q(!1),document.removeEventListener("pointermove",be),V.current=null};return V.current!==null&&(document.addEventListener("pointermove",be),document.addEventListener("pointerup",we,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",be),document.removeEventListener("pointerup",we,{capture:!0})}}},[w,Q,V]),x.useEffect(()=>{const ee=()=>Q(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[Q]);const[Y,J]=EV(ee=>{const be=M().filter(Oe=>!Oe.disabled),we=be.find(Oe=>Oe.ref.current===document.activeElement),Re=xV(be,ee,we);Re&&setTimeout(()=>Re.ref.current.focus())}),ue=x.useCallback((ee,be,we)=>{const Re=!W.current&&!we;(E.value!==void 0&&E.value===be||Re)&&(D(ee),Re&&(W.current=!0))},[E.value]),ne=x.useCallback(()=>w?.focus(),[w]),ge=x.useCallback((ee,be,we)=>{const Re=!W.current&&!we;(E.value!==void 0&&(Array.isArray(be)?be.every(me=>E.value?.includes(me)):E.value===be)||Re)&&L(ee)},[E.value]),ae=n==="popper"?lk:mV,ie=ae===lk?{side:o,sideOffset:l,align:c,alignOffset:u,arrowPadding:d,collisionBoundary:h,collisionPadding:f,sticky:m,hideWhenDetached:g,avoidCollisions:y}:{};return $.jsx(fV,{scope:t,content:w,viewport:S,onViewportChange:_,itemRefCallback:ue,selectedItem:k,onItemLeave:ne,itemTextRefCallback:ge,focusSelectedItem:z,selectedItemText:I,position:n,isPositioned:F,searchRef:Y,children:$.jsx(H2,{as:fo,allowPinchZoom:!0,children:$.jsx(Ip,{asChild:!0,trapped:E.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:_e(i,ee=>{E.trigger?.focus({preventScroll:!0}),document.getSelection()?.empty(),ee.preventDefault()}),children:$.jsx(Hd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:$.jsx(ae,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed","aria-multiselectable":E.multi?"true":void 0,dir:E.dir,onContextMenu:ee=>ee.preventDefault(),...b,...ie,onPlaced:()=>U(!0),ref:C,style:{display:"flex",flexDirection:"column",outline:"none",...b.style},onKeyDown:_e(b.onKeyDown,ee=>{const be=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!be&&ee.key.length===1&&J(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let Re=M().filter(Oe=>!Oe.disabled).map(Oe=>Oe.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(Re=Re.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const Oe=ee.target,me=Re.indexOf(Oe);Re=Re.slice(me+1)}setTimeout(()=>j(Re)),ee.preventDefault()}})})})})})})});pV.displayName=fme;const pme="SelectItemAlignedPosition",mV=x.forwardRef((r,e)=>{const{__scopeSelect:t,onPlaced:n,...i}=r,s=Tl(kd,t),a=Kc(kd,t),[o,l]=x.useState(null),[c,u]=x.useState(null),d=it(e,C=>u(C)),h=Ev(t),f=x.useRef(!1),m=x.useRef(!0),{viewport:g,selectedItem:y,selectedItemText:b,focusSelectedItem:E}=a,w=x.useCallback(()=>{if(s.trigger&&s.valueNode&&o&&c&&g&&y&&b){const C=s.trigger.getBoundingClientRect(),k=c.getBoundingClientRect(),D=s.valueNode.getBoundingClientRect(),I=b.getBoundingClientRect();if(s.dir!=="rtl"){const Oe=I.left-k.left,me=D.left-Oe,Ue=C.left-me,Se=C.width+Ue,et=Math.max(Se,k.width),Qt=window.innerWidth-Zo,Ut=ak(me,[Zo,Qt-et]);o.style.minWidth=`${Se}px`,o.style.left=`${Ut}px`}else{const Oe=k.right-I.right,me=window.innerWidth-D.right-Oe,Ue=window.innerWidth-C.right-me,Se=C.width+Ue,et=Math.max(Se,k.width),Qt=window.innerWidth-Zo,Ut=ak(me,[Zo,Qt-et]);o.style.minWidth=`${Se}px`,o.style.right=`${Ut}px`}const L=h(),M=window.innerHeight-Zo*2,F=g.scrollHeight,U=window.getComputedStyle(c),W=parseInt(U.borderTopWidth,10),j=parseInt(U.paddingTop,10),z=parseInt(U.borderBottomWidth,10),Q=parseInt(U.paddingBottom,10),V=W+j+F+Q+z,Y=Math.min(y.offsetHeight*5,V),J=window.getComputedStyle(g),ue=parseInt(J.paddingTop,10),ne=parseInt(J.paddingBottom,10),ge=C.top+C.height/2-Zo,ae=M-ge,ie=y.offsetHeight/2,ee=y.offsetTop+ie,be=W+j+ee,we=V-be;if(be<=ge){const Oe=y===L[L.length-1].ref.current;o.style.bottom="0px";const me=c.clientHeight-g.offsetTop-g.offsetHeight,Ue=Math.max(ae,ie+(Oe?ne:0)+me+z),Se=be+Ue;o.style.height=`${Se}px`}else{const Oe=y===L[0].ref.current;o.style.top="0px";const Ue=Math.max(ge,W+g.offsetTop+(Oe?ue:0)+ie)+we;o.style.height=`${Ue}px`,g.scrollTop=be-ge+g.offsetTop}o.style.margin=`${Zo}px 0`,o.style.minHeight=`${Y}px`,o.style.maxHeight=`${M}px`,n?.(),requestAnimationFrame(()=>f.current=!0)}},[h,s.trigger,s.valueNode,o,c,g,y,b,s.dir,n]);Dr(()=>w(),[w]);const[A,S]=x.useState();Dr(()=>{c&&S(window.getComputedStyle(c).zIndex)},[c]);const _=x.useCallback(C=>{C&&m.current===!0&&(w(),E?.(),m.current=!1)},[w,E]);return $.jsx(gme,{scope:t,contentWrapper:o,shouldExpandOnScrollRef:f,onScrollButtonChange:_,children:$.jsx("div",{ref:l,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:$.jsx(Ge.div,{...i,ref:d,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});mV.displayName=pme;const mme="SelectPopperPosition",lk=x.forwardRef((r,e)=>{const{__scopeSelect:t,align:n="start",collisionPadding:i=Zo,...s}=r,a=uT(t);return $.jsx(uv,{...a,...s,ref:e,align:n,collisionPadding:i,style:{boxSizing:"border-box",...s.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});lk.displayName=mme;const[gme,tL]=Dp(kd,{}),ck="SelectViewport",rL=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,i=Kc(ck,t),s=tL(ck,t),a=it(e,i.onViewportChange),o=x.useRef(0);return $.jsxs($.Fragment,{children:[$.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"}}),$.jsx(cT.Slot,{scope:t,children:$.jsx(Ge.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:a,style:{position:"relative",flex:1,overflow:"auto",...n.style},onScroll:_e(n.onScroll,l=>{const c=l.currentTarget,{contentWrapper:u,shouldExpandOnScrollRef:d}=s;if(d?.current&&u){const h=Math.abs(o.current-c.scrollTop);if(h>0){const f=window.innerHeight-Zo*2,m=parseFloat(u.style.minHeight),g=parseFloat(u.style.height),y=Math.max(m,g);if(y<f){const b=y+h,E=Math.min(f,b),w=b-E;u.style.height=`${E}px`,u.style.bottom==="0px"&&(c.scrollTop=w>0?w:0,u.style.justifyContent="flex-end")}}}o.current=c.scrollTop})})})]})});rL.displayName=ck;const gV="SelectGroup",[vme,yme]=Dp(gV),nL=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,i=ii();return $.jsx(vme,{scope:t,id:i,children:$.jsx(Ge.div,{role:"group","aria-labelledby":i,...n,ref:e})})});nL.displayName=gV;const vV="SelectLabel",iL=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,i=yme(vV,t);return $.jsx(Ge.div,{id:i.id,...n,ref:e})});iL.displayName=vV;const cx="SelectItem",[bme,yV]=Dp(cx),sL=x.forwardRef((r,e)=>{const{__scopeSelect:t,value:n,disabled:i=!1,textValue:s,...a}=r,o=Tl(cx,t),l=Kc(cx,t),c=typeof n=="string"?Array.isArray(o.value)?o.value.includes(n):o.value===n:n.every(E=>o.value?.includes(E)),u=Array.isArray(o.value)&&Array.isArray(n)&&n.some(E=>o.value?.includes(E)),[d,h]=x.useState(s??""),[f,m]=x.useState(!1),g=it(e,E=>l.itemRefCallback?.(E,n,i)),y=ii(),b=()=>{if(!i){let E=o.multi&&typeof n=="string"?[n]:n;u&&!c?o.onValueChange(E):Array.isArray(o.value)&&(E=wV(n,o.value)),o.onValueChange(E),o.multi||o.onOpenChange(!1)}};if(!o.multi&&Array.isArray(n))throw new Error("You can only pass an array of values in multi selects");return $.jsx(bme,{scope:t,value:n,disabled:i,textId:y,isSelected:c,isIntermediate:u,onItemTextChange:x.useCallback(E=>{h(w=>w||(E?.textContent??"").trim())},[]),children:$.jsx(cT.ItemSlot,{scope:t,value:n,disabled:i,textValue:d,children:$.jsx(Ge.div,{role:"option","aria-labelledby":y,"data-highlighted":f?"":void 0,"aria-selected":o.multi?void 0:c&&f,"aria-checked":o.multi?c:void 0,"data-state":c?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...a,ref:g,onFocus:_e(a.onFocus,()=>m(!0)),onBlur:_e(a.onBlur,()=>m(!1)),onPointerUp:_e(a.onPointerUp,b),onPointerMove:_e(a.onPointerMove,E=>{i?l.onItemLeave?.():E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:_e(a.onPointerLeave,E=>{E.currentTarget===document.activeElement&&l.onItemLeave?.()}),onKeyDown:_e(a.onKeyDown,E=>{l.searchRef?.current!==""&&E.key===" "||(sme.includes(E.key)&&b(),E.key===" "&&E.preventDefault())})})})})});sL.displayName=cx;const Ym="SelectItemText",aL=x.forwardRef((r,e)=>{const{__scopeSelect:t,className:n,style:i,...s}=r,a=Tl(Ym,t),o=Kc(Ym,t),l=yV(Ym,t),c=ume(Ym,t),[u,d]=x.useState(null),h=it(e,b=>d(b),l.onItemTextChange,b=>o.itemTextRefCallback?.(b,l.value,l.disabled)),f=u?.textContent,m=x.useMemo(()=>$.jsx("option",{value:l.value,disabled:l.disabled,children:f},Array.isArray(l.value)?l.value.join(";"):l.value),[l.disabled,l.value,f]),{onNativeOptionAdd:g,onNativeOptionRemove:y}=c;return Dr(()=>(g(m),()=>y(m)),[g,y,m]),$.jsxs($.Fragment,{children:[$.jsx(Ge.span,{id:l.textId,...s,ref:h}),l.isSelected&&a.valueNode&&!a.valueNodeHasChildren?ha.createPortal(s.children,a.valueNode):null]})});aL.displayName=Ym;const bV="SelectItemIndicator",oL=x.forwardRef((r,e)=>{const{__scopeSelect:t,children:n,...i}=r,s=yV(bV,t);return typeof n=="function"?$.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:n({isSelected:s.isSelected,isIntermediate:s.isIntermediate})}):s.isSelected?$.jsx(Ge.span,{"aria-hidden":!0,...i,ref:e,children:n}):null});oL.displayName=bV;const uk="SelectScrollUpButton",lL=x.forwardRef((r,e)=>{const t=Kc(uk,r.__scopeSelect),n=tL(uk,r.__scopeSelect),[i,s]=x.useState(!1),a=it(e,n.onScrollButtonChange);return Dr(()=>{if(t.viewport&&t.isPositioned){const o=t.viewport,l=()=>{const c=o.scrollTop>0;s(c)};return l(),o.addEventListener("scroll",l),()=>o.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?$.jsx(uL,{...r,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop-=l.offsetHeight)}}):null});lL.displayName=uk;const dk="SelectScrollDownButton",cL=x.forwardRef((r,e)=>{const t=Kc(dk,r.__scopeSelect),n=tL(dk,r.__scopeSelect),[i,s]=x.useState(!1),a=it(e,n.onScrollButtonChange);return Dr(()=>{if(t.viewport&&t.isPositioned){const o=t.viewport,l=()=>{const c=o.scrollHeight-o.clientHeight,u=Math.ceil(o.scrollTop)<c;s(u)};return l(),o.addEventListener("scroll",l),()=>o.removeEventListener("scroll",l)}},[t.viewport,t.isPositioned]),i?$.jsx(uL,{...r,ref:a,onAutoScroll:()=>{const{viewport:o,selectedItem:l}=t;o&&l&&(o.scrollTop+=l.offsetHeight)}}):null});cL.displayName=dk;const uL=x.forwardRef((r,e)=>{const{__scopeSelect:t,onAutoScroll:n,...i}=r,s=Kc("SelectScrollButton",t),a=x.useRef(null),o=Ev(t),l=x.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return x.useEffect(()=>()=>l(),[l]),Dr(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),$.jsx(Ge.div,{"aria-hidden":!0,...i,ref:e,style:{flexShrink:0,...i.style},onPointerMove:_e(i.onPointerMove,()=>{s.onItemLeave?.(),a.current===null&&(a.current=window.setInterval(n,50))}),onPointerLeave:_e(i.onPointerLeave,()=>{l()})})});uL.displayName="SelectScrollButtonImpl";const Eme="SelectSeparator",dL=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r;return $.jsx(Ge.div,{"aria-hidden":!0,...n,ref:e})});dL.displayName=Eme;const hk="SelectArrow",hL=x.forwardRef((r,e)=>{const{__scopeSelect:t,...n}=r,i=uT(t),s=Tl(hk,t),a=Kc(hk,t);return s.open&&a.position==="popper"?$.jsx(Afe,{...i,...n,ref:e}):null});hL.displayName=hk;const xme="BubbleSelect",wme=x.forwardRef((r,e)=>{const{value:t,...n}=r,i=x.useRef(null),s=it(e,i),a=oT(t),o=Tl(xme,void 0);x.useEffect(()=>{const c=i.current,u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(a!==t&&h){const f=new Event("change",{bubbles:!0});h.call(c,t),c.dispatchEvent(f)}},[a,t]);let l=t;return o.multi&&!Array.isArray(t)&&(l=[]),$.jsx(DH,{asChild:!0,children:$.jsx("select",{...n,multiple:o.multi?!0:void 0,ref:s,defaultValue:l})})});wme.displayName="BubbleSelect";function EV(r){const e=z2(r),t=x.useRef(""),n=x.useRef(0),i=x.useCallback(a=>{const o=t.current+a;e(o),function l(c){t.current=c,window.clearTimeout(n.current),c!==""&&(n.current=window.setTimeout(()=>l(""),1e3))}(o)},[e]),s=x.useCallback(()=>{t.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[t,i,s]}function xV(r,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?r.indexOf(t):-1;let a=Tme(r,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==t));const l=a.find(c=>c.textValue.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function Tme(r,e){return r.map((t,n)=>r[(e+n)%r.length])}const wV=(r,e=[])=>{if(Array.isArray(r))return r.reduce((n,i)=>wV(i,n),e);const t=e.indexOf(r);return t===-1?[...e,r]:[...e.slice(0,t),...e.slice(t+1)]},Sme=Y2,Ame=Q2,_me=X2,Cme=Z2,Rme=J2,kme=eL,Ime=rL,$me=nL,Dme=iL,Lme=sL,Ome=aL,Pme=oL,Mme=lL,Nme=cL,Fme=dL,Bme=hL,fa=Object.freeze(Object.defineProperty({__proto__:null,Arrow:Bme,Content:kme,Group:$me,Icon:Cme,Item:Lme,ItemIndicator:Pme,ItemText:Ome,Label:Dme,Portal:Rme,Root:Sme,ScrollDownButton:Nme,ScrollUpButton:Mme,Select:Y2,SelectArrow:hL,SelectContent:eL,SelectGroup:nL,SelectIcon:Z2,SelectItem:sL,SelectItemIndicator:oL,SelectItemText:aL,SelectLabel:iL,SelectPortal:J2,SelectScrollDownButton:cL,SelectScrollUpButton:lL,SelectSeparator:dL,SelectTrigger:Q2,SelectValue:X2,SelectViewport:rL,Separator:Fme,Trigger:Ame,Value:_me,Viewport:Ime,createSelectScope:ome},Symbol.toStringTag,{value:"Module"}));function ud(r,e,{checkForDefaultPrevented:t=!0}={}){return function(i){if(r?.(i),t===!1||!i.defaultPrevented)return e?.(i)}}const TV="Collapsible",[Ume,SV]=Hr(TV),[Wme,fL]=Ume(TV),Hme=x.forwardRef((r,e)=>{const{__scopeCollapsible:t,open:n,defaultOpen:i,disabled:s,onOpenChange:a,...o}=r,[l=!1,c]=Gn({prop:n,defaultProp:i,onChange:a});return x.createElement(Wme,{scope:t,disabled:s,contentId:ii(),open:l,onOpenToggle:x.useCallback(()=>c(u=>!u),[c])},x.createElement(Ge.div,le({"data-state":pL(l),"data-disabled":s?"":void 0},o,{ref:e})))}),Vme="CollapsibleTrigger",Gme=x.forwardRef((r,e)=>{const{__scopeCollapsible:t,...n}=r,i=fL(Vme,t);return x.createElement(Ge.button,le({type:"button","aria-controls":i.contentId,"aria-expanded":i.open||!1,"data-state":pL(i.open),"data-disabled":i.disabled?"":void 0,disabled:i.disabled},n,{ref:e,onClick:_e(r.onClick,i.onOpenToggle)}))}),AV="CollapsibleContent",qme=x.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=fL(AV,r.__scopeCollapsible);return x.createElement(mn,{present:t||i.open},({present:s})=>x.createElement(jme,le({},n,{ref:e,present:s})))}),jme=x.forwardRef((r,e)=>{const{__scopeCollapsible:t,present:n,children:i,...s}=r,a=fL(AV,t),[o,l]=x.useState(n),c=x.useRef(null),u=it(e,c),d=x.useRef(0),h=d.current,f=x.useRef(0),m=f.current,g=a.open||o,y=x.useRef(g),b=x.useRef();return x.useEffect(()=>{const E=requestAnimationFrame(()=>y.current=!1);return()=>cancelAnimationFrame(E)},[]),Dr(()=>{const E=c.current;if(E){b.current=b.current||{transitionDuration:E.style.transitionDuration,animationName:E.style.animationName},E.style.transitionDuration="0s",E.style.animationName="none";const w=E.getBoundingClientRect();d.current=w.height,f.current=w.width,y.current||(E.style.transitionDuration=b.current.transitionDuration,E.style.animationName=b.current.animationName),l(n)}},[a.open,n]),x.createElement(Ge.div,le({"data-state":pL(a.open),"data-disabled":a.disabled?"":void 0,id:a.contentId,hidden:!g},s,{ref:u,style:{"--radix-collapsible-content-height":h?`${h}px`:void 0,"--radix-collapsible-content-width":m?`${m}px`:void 0,...r.style}}),g&&i)});function pL(r){return r?"open":"closed"}const Kme=Hme,zme=Gme,Yme=qme,zc="Accordion",Qme=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[mL,Xme,Zme]=aT(zc),[dT,Yut]=Hr(zc,[Zme,SV]),gL=SV(),_V=ft.forwardRef((r,e)=>{const{type:t,...n}=r,i=n,s=n;return ft.createElement(mL.Provider,{scope:r.__scopeAccordion},t==="multiple"?ft.createElement(rge,le({},s,{ref:e})):ft.createElement(tge,le({},i,{ref:e})))});_V.propTypes={type(r){const e=r.value||r.defaultValue;return r.type&&!["single","multiple"].includes(r.type)?new Error("Invalid prop `type` supplied to `Accordion`. Expected one of `single | multiple`."):r.type==="multiple"&&typeof e=="string"?new Error("Invalid prop `type` supplied to `Accordion`. Expected `single` when `defaultValue` or `value` is type `string`."):r.type==="single"&&Array.isArray(e)?new Error("Invalid prop `type` supplied to `Accordion`. Expected `multiple` when `defaultValue` or `value` is type `string[]`."):null}};const[CV,Jme]=dT(zc),[RV,ege]=dT(zc,{collapsible:!1}),tge=ft.forwardRef((r,e)=>{const{value:t,defaultValue:n,onValueChange:i=()=>{},collapsible:s=!1,...a}=r,[o,l]=Gn({prop:t,defaultProp:n,onChange:i});return ft.createElement(CV,{scope:r.__scopeAccordion,value:o?[o]:[],onItemOpen:l,onItemClose:ft.useCallback(()=>s&&l(""),[s,l])},ft.createElement(RV,{scope:r.__scopeAccordion,collapsible:s},ft.createElement(kV,le({},a,{ref:e}))))}),rge=ft.forwardRef((r,e)=>{const{value:t,defaultValue:n,onValueChange:i=()=>{},...s}=r,[a=[],o]=Gn({prop:t,defaultProp:n,onChange:i}),l=ft.useCallback(u=>o((d=[])=>[...d,u]),[o]),c=ft.useCallback(u=>o((d=[])=>d.filter(h=>h!==u)),[o]);return ft.createElement(CV,{scope:r.__scopeAccordion,value:a,onItemOpen:l,onItemClose:c},ft.createElement(RV,{scope:r.__scopeAccordion,collapsible:!0},ft.createElement(kV,le({},s,{ref:e}))))}),[nge,hT]=dT(zc),kV=ft.forwardRef((r,e)=>{const{__scopeAccordion:t,disabled:n,dir:i,orientation:s="vertical",...a}=r,o=ft.useRef(null),l=it(o,e),c=Xme(t),d=Vd(i)==="ltr",h=_e(r.onKeyDown,f=>{var m;if(!Qme.includes(f.key))return;const g=f.target,y=c().filter(D=>{var I;return!((I=D.ref.current)!==null&&I!==void 0&&I.disabled)}),b=y.findIndex(D=>D.ref.current===g),E=y.length;if(b===-1)return;f.preventDefault();let w=b;const A=0,S=E-1,_=()=>{w=b+1,w>S&&(w=A)},C=()=>{w=b-1,w<A&&(w=S)};switch(f.key){case"Home":w=A;break;case"End":w=S;break;case"ArrowRight":s==="horizontal"&&(d?_():C());break;case"ArrowDown":s==="vertical"&&_();break;case"ArrowLeft":s==="horizontal"&&(d?C():_());break;case"ArrowUp":s==="vertical"&&C();break}const k=w%E;(m=y[k].ref.current)===null||m===void 0||m.focus()});return ft.createElement(nge,{scope:t,disabled:n,direction:i,orientation:s},ft.createElement(mL.Slot,{scope:t},ft.createElement(Ge.div,le({},a,{"data-orientation":s,ref:l,onKeyDown:n?void 0:h}))))}),fk="AccordionItem",[ige,vL]=dT(fk),sge=ft.forwardRef((r,e)=>{const{__scopeAccordion:t,value:n,...i}=r,s=hT(fk,t),a=Jme(fk,t),o=gL(t),l=ii(),c=n&&a.value.includes(n)||!1,u=s.disabled||r.disabled;return ft.createElement(ige,{scope:t,open:c,disabled:u,triggerId:l},ft.createElement(Kme,le({"data-orientation":s.orientation,"data-state":IV(c)},o,i,{ref:e,disabled:u,open:c,onOpenChange:d=>{d?a.onItemOpen(n):a.onItemClose(n)}})))}),age="AccordionHeader",oge=ft.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,i=hT(zc,t),s=vL(age,t);return ft.createElement(Ge.h3,le({"data-orientation":i.orientation,"data-state":IV(s.open),"data-disabled":s.disabled?"":void 0},n,{ref:e}))}),K5="AccordionTrigger",lge=ft.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,i=hT(zc,t),s=vL(K5,t),a=ege(K5,t),o=gL(t);return ft.createElement(mL.ItemSlot,{scope:t},ft.createElement(zme,le({"aria-disabled":s.open&&!a.collapsible||void 0,"data-orientation":i.orientation,id:s.triggerId},o,n,{ref:e})))}),cge="AccordionContent",uge=ft.forwardRef((r,e)=>{const{__scopeAccordion:t,...n}=r,i=hT(zc,t),s=vL(cge,t),a=gL(t);return ft.createElement(Yme,le({role:"region","aria-labelledby":s.triggerId,"data-orientation":i.orientation},a,n,{ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...r.style}}))});function IV(r){return r?"open":"closed"}const dge=_V,hge=sge,fge=oge,pge=lge,mge=uge,$V="Avatar",[gge,Qut]=Hr($V),[vge,DV]=gge($V),yge=x.forwardRef((r,e)=>{const{__scopeAvatar:t,...n}=r,[i,s]=x.useState("idle");return x.createElement(vge,{scope:t,imageLoadingStatus:i,onImageLoadingStatusChange:s},x.createElement(Ge.span,le({},n,{ref:e})))}),bge="AvatarImage",Ege=x.forwardRef((r,e)=>{const{__scopeAvatar:t,src:n,onLoadingStatusChange:i=()=>{},...s}=r,a=DV(bge,t),o=Tge(n),l=Br(c=>{i(c),a.onImageLoadingStatusChange(c)});return Dr(()=>{o!=="idle"&&l(o)},[o,l]),o==="loaded"?x.createElement(Ge.img,le({},s,{ref:e,src:n})):null}),xge="AvatarFallback",wge=x.forwardRef((r,e)=>{const{__scopeAvatar:t,delayMs:n,...i}=r,s=DV(xge,t),[a,o]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const l=window.setTimeout(()=>o(!0),n);return()=>window.clearTimeout(l)}},[n]),a&&s.imageLoadingStatus!=="loaded"?x.createElement(Ge.span,le({},i,{ref:e})):null});function Tge(r){const[e,t]=x.useState("idle");return Dr(()=>{if(!r){t("error");return}let n=!0;const i=new window.Image,s=a=>()=>{n&&t(a)};return t("loading"),i.onload=s("loaded"),i.onerror=s("error"),i.src=r,()=>{n=!1}},[r]),e}const Sge=yge,Age=Ege,_ge=wge,l_="rovingFocusGroup.onEntryFocus",Cge={bubbles:!1,cancelable:!0},yL="RovingFocusGroup",[pk,LV,Rge]=aT(yL),[kge,Lp]=Hr(yL,[Rge]),[Ige,$ge]=kge(yL),Dge=x.forwardRef((r,e)=>x.createElement(pk.Provider,{scope:r.__scopeRovingFocusGroup},x.createElement(pk.Slot,{scope:r.__scopeRovingFocusGroup},x.createElement(Lge,le({},r,{ref:e}))))),Lge=x.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,orientation:n,loop:i=!1,dir:s,currentTabStopId:a,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:l,onEntryFocus:c,...u}=r,d=x.useRef(null),h=it(e,d),f=Vd(s),[m=null,g]=Gn({prop:a,defaultProp:o,onChange:l}),[y,b]=x.useState(!1),E=Br(c),w=LV(t),A=x.useRef(!1),[S,_]=x.useState(0);return x.useEffect(()=>{const C=d.current;if(C)return C.addEventListener(l_,E),()=>C.removeEventListener(l_,E)},[E]),x.createElement(Ige,{scope:t,orientation:n,dir:f,loop:i,currentTabStopId:m,onItemFocus:x.useCallback(C=>g(C),[g]),onItemShiftTab:x.useCallback(()=>b(!0),[]),onFocusableItemAdd:x.useCallback(()=>_(C=>C+1),[]),onFocusableItemRemove:x.useCallback(()=>_(C=>C-1),[])},x.createElement(Ge.div,le({tabIndex:y||S===0?-1:0,"data-orientation":n},u,{ref:h,style:{outline:"none",...r.style},onMouseDown:_e(r.onMouseDown,()=>{A.current=!0}),onFocus:_e(r.onFocus,C=>{const k=!A.current;if(C.target===C.currentTarget&&k&&!y){const D=new CustomEvent(l_,Cge);if(C.currentTarget.dispatchEvent(D),!D.defaultPrevented){const I=w().filter(W=>W.focusable),L=I.find(W=>W.active),M=I.find(W=>W.id===m),U=[L,M,...I].filter(Boolean).map(W=>W.ref.current);OV(U)}}A.current=!1}),onBlur:_e(r.onBlur,()=>b(!1))})))}),Oge="RovingFocusGroupItem",Pge=x.forwardRef((r,e)=>{const{__scopeRovingFocusGroup:t,focusable:n=!0,active:i=!1,tabStopId:s,...a}=r,o=ii(),l=s||o,c=$ge(Oge,t),u=c.currentTabStopId===l,d=LV(t),{onFocusableItemAdd:h,onFocusableItemRemove:f}=c;return x.useEffect(()=>{if(n)return h(),()=>f()},[n,h,f]),x.createElement(pk.ItemSlot,{scope:t,id:l,focusable:n,active:i},x.createElement(Ge.span,le({tabIndex:u?0:-1,"data-orientation":c.orientation},a,{ref:e,onMouseDown:_e(r.onMouseDown,m=>{n?c.onItemFocus(l):m.preventDefault()}),onFocus:_e(r.onFocus,()=>c.onItemFocus(l)),onKeyDown:_e(r.onKeyDown,m=>{if(m.key==="Tab"&&m.shiftKey){c.onItemShiftTab();return}if(m.target!==m.currentTarget)return;const g=Fge(m,c.orientation,c.dir);if(g!==void 0){m.preventDefault();let b=d().filter(E=>E.focusable).map(E=>E.ref.current);if(g==="last")b.reverse();else if(g==="prev"||g==="next"){g==="prev"&&b.reverse();const E=b.indexOf(m.currentTarget);b=c.loop?Bge(b,E+1):b.slice(E+1)}setTimeout(()=>OV(b))}})})))}),Mge={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Nge(r,e){return e!=="rtl"?r:r==="ArrowLeft"?"ArrowRight":r==="ArrowRight"?"ArrowLeft":r}function Fge(r,e,t){const n=Nge(r.key,t);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return Mge[n]}function OV(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function Bge(r,e){return r.map((t,n)=>r[(e+n)%r.length])}const bL=Dge,EL=Pge;var PV=mv(),c_=function(){},fT=x.forwardRef(function(r,e){var t=x.useRef(null),n=x.useState({onScrollCapture:c_,onWheelCapture:c_,onTouchMoveCapture:c_}),i=n[0],s=n[1],a=r.forwardProps,o=r.children,l=r.className,c=r.removeScrollBar,u=r.enabled,d=r.shards,h=r.sideCar,f=r.noIsolation,m=r.inert,g=r.allowPinchZoom,y=r.as,b=y===void 0?"div":y,E=Os(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,A=pv([t,e]),S=Et(Et({},E),i);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:PV,removeScrollBar:c,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t}),a?x.cloneElement(x.Children.only(o),Et(Et({},S),{ref:A})):x.createElement(b,Et({},S,{className:l,ref:A}),o))});fT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};fT.classNames={fullWidth:Sc,zeroRight:Tc};var mk=!1;if(typeof window<"u")try{var zy=Object.defineProperty({},"passive",{get:function(){return mk=!0,!0}});window.addEventListener("test",zy,zy),window.removeEventListener("test",zy,zy)}catch{mk=!1}var bh=mk?{passive:!1}:!1,Uge=function(r){return r.tagName==="TEXTAREA"},MV=function(r,e){var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Uge(r)&&t[e]==="visible")},Wge=function(r){return MV(r,"overflowY")},Hge=function(r){return MV(r,"overflowX")},z5=function(r,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var n=NV(r,t);if(n){var i=FV(r,t),s=i[1],a=i[2];if(s>a)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},Vge=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},Gge=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},NV=function(r,e){return r==="v"?Wge(e):Hge(e)},FV=function(r,e){return r==="v"?Vge(e):Gge(e)},qge=function(r,e){return r==="h"&&e==="rtl"?-1:1},jge=function(r,e,t,n,i){var s=qge(r,window.getComputedStyle(e).direction),a=s*n,o=t.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{var f=FV(r,o),m=f[0],g=f[1],y=f[2],b=g-y-s*m;(m||b)&&NV(r,o)&&(d+=b,h+=m),o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&d===0||!u&&h===0)&&(c=!0),c},Yy=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},Y5=function(r){return[r.deltaX,r.deltaY]},Q5=function(r){return r&&"current"in r?r.current:r},Kge=function(r,e){return r[0]===e[0]&&r[1]===e[1]},zge=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},Yge=0,Eh=[];function Qge(r){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState(Yge++)[0],s=x.useState(function(){return $p()})[0],a=x.useRef(r);x.useEffect(function(){a.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var g=fv([r.lockRef.current],(r.shards||[]).map(Q5),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var o=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=Yy(g),E=t.current,w="deltaX"in g?g.deltaX:E[0]-b[0],A="deltaY"in g?g.deltaY:E[1]-b[1],S,_=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var k=z5(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=z5(C,_)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||A)&&(n.current=S),!S)return!0;var D=n.current||S;return jge(D,y,g,D==="h"?w:A)},[]),l=x.useCallback(function(g){var y=g;if(!(!Eh.length||Eh[Eh.length-1]!==s)){var b="deltaY"in y?Y5(y):Yy(y),E=e.current.filter(function(S){return S.name===y.type&&S.target===y.target&&Kge(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var w=(a.current.shards||[]).map(Q5).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?o(y,w[0]):!a.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,b,E){var w={name:g,delta:y,target:b,should:E};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(A){return A!==w})},1)},[]),u=x.useCallback(function(g){t.current=Yy(g),n.current=void 0},[]),d=x.useCallback(function(g){c(g.type,Y5(g),g.target,o(g,r.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,Yy(g),g.target,o(g,r.lockRef.current))},[]);x.useEffect(function(){return Eh.push(s),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,bh),document.addEventListener("touchmove",l,bh),document.addEventListener("touchstart",u,bh),function(){Eh=Eh.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,bh),document.removeEventListener("touchmove",l,bh),document.removeEventListener("touchstart",u,bh)}},[]);var f=r.removeScrollBar,m=r.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:zge(i)}):null,f?x.createElement(vv,{gapMode:"margin"}):null)}const Xge=gv(PV,Qge);var BV=x.forwardRef(function(r,e){return x.createElement(fT,Et({},r,{ref:e,sideCar:Xge}))});BV.classNames=fT.classNames;const gk=["Enter"," "],Zge=["ArrowDown","PageUp","Home"],UV=["ArrowUp","PageDown","End"],Jge=[...Zge,...UV],e0e={ltr:[...gk,"ArrowRight"],rtl:[...gk,"ArrowLeft"]},t0e={ltr:["ArrowLeft"],rtl:["ArrowRight"]},pT="Menu",[l0,r0e,n0e]=aT(pT),[Gd,WV]=Hr(pT,[n0e,jc,Lp]),mT=jc(),HV=Lp(),[VV,Yc]=Gd(pT),[i0e,xv]=Gd(pT),s0e=r=>{const{__scopeMenu:e,open:t=!1,children:n,dir:i,onOpenChange:s,modal:a=!0}=r,o=mT(e),[l,c]=x.useState(null),u=x.useRef(!1),d=Br(s),h=Vd(i);return x.useEffect(()=>{const f=()=>{u.current=!0,document.addEventListener("pointerdown",m,{capture:!0,once:!0}),document.addEventListener("pointermove",m,{capture:!0,once:!0})},m=()=>u.current=!1;return document.addEventListener("keydown",f,{capture:!0}),()=>{document.removeEventListener("keydown",f,{capture:!0}),document.removeEventListener("pointerdown",m,{capture:!0}),document.removeEventListener("pointermove",m,{capture:!0})}},[]),x.createElement(lv,o,x.createElement(VV,{scope:e,open:t,onOpenChange:d,content:l,onContentChange:c},x.createElement(i0e,{scope:e,onClose:x.useCallback(()=>d(!1),[d]),isUsingKeyboardRef:u,dir:h,modal:a},n)))},GV=x.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r,i=mT(t);return x.createElement(cv,le({},i,n,{ref:e}))}),qV="MenuPortal",[a0e,jV]=Gd(qV,{forceMount:void 0}),o0e=r=>{const{__scopeMenu:e,forceMount:t,children:n,container:i}=r,s=Yc(qV,e);return x.createElement(a0e,{scope:e,forceMount:t},x.createElement(mn,{present:t||s.open},x.createElement(Rp,{asChild:!0,container:i},n)))},aa="MenuContent",[l0e,xL]=Gd(aa),c0e=x.forwardRef((r,e)=>{const t=jV(aa,r.__scopeMenu),{forceMount:n=t.forceMount,...i}=r,s=Yc(aa,r.__scopeMenu),a=xv(aa,r.__scopeMenu);return x.createElement(l0.Provider,{scope:r.__scopeMenu},x.createElement(mn,{present:n||s.open},x.createElement(l0.Slot,{scope:r.__scopeMenu},a.modal?x.createElement(u0e,le({},i,{ref:e})):x.createElement(d0e,le({},i,{ref:e})))))}),u0e=x.forwardRef((r,e)=>{const t=Yc(aa,r.__scopeMenu),n=x.useRef(null),i=it(e,n);return x.useEffect(()=>{const s=n.current;if(s)return hv(s)},[]),x.createElement(wL,le({},r,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:t.open,disableOutsideScroll:!0,onFocusOutside:_e(r.onFocusOutside,s=>s.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>t.onOpenChange(!1)}))}),d0e=x.forwardRef((r,e)=>{const t=Yc(aa,r.__scopeMenu);return x.createElement(wL,le({},r,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>t.onOpenChange(!1)}))}),wL=x.forwardRef((r,e)=>{const{__scopeMenu:t,loop:n=!1,trapFocus:i,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEntryFocus:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f,disableOutsideScroll:m,...g}=r,y=Yc(aa,t),b=xv(aa,t),E=mT(t),w=HV(t),A=r0e(t),[S,_]=x.useState(null),C=x.useRef(null),k=it(e,C,y.onContentChange),D=x.useRef(0),I=x.useRef(""),L=x.useRef(0),M=x.useRef(null),F=x.useRef("right"),U=x.useRef(0),W=m?BV:x.Fragment,j=m?{as:fo,allowPinchZoom:!0}:void 0,z=V=>{var Y,J;const ue=I.current+V,ne=A().filter(we=>!we.disabled),ge=document.activeElement,ae=(Y=ne.find(we=>we.ref.current===ge))===null||Y===void 0?void 0:Y.textValue,ie=ne.map(we=>we.textValue),ee=S0e(ie,ue,ae),be=(J=ne.find(we=>we.textValue===ee))===null||J===void 0?void 0:J.ref.current;(function we(Re){I.current=Re,window.clearTimeout(D.current),Re!==""&&(D.current=window.setTimeout(()=>we(""),1e3))})(ue),be&&setTimeout(()=>be.focus())};x.useEffect(()=>()=>window.clearTimeout(D.current),[]),kp();const Q=x.useCallback(V=>{var Y,J;return F.current===((Y=M.current)===null||Y===void 0?void 0:Y.side)&&_0e(V,(J=M.current)===null||J===void 0?void 0:J.area)},[]);return x.createElement(l0e,{scope:t,searchRef:I,onItemEnter:x.useCallback(V=>{Q(V)&&V.preventDefault()},[Q]),onItemLeave:x.useCallback(V=>{var Y;Q(V)||((Y=C.current)===null||Y===void 0||Y.focus(),_(null))},[Q]),onTriggerLeave:x.useCallback(V=>{Q(V)&&V.preventDefault()},[Q]),pointerGraceTimerRef:L,onPointerGraceIntentChange:x.useCallback(V=>{M.current=V},[])},x.createElement(W,j,x.createElement(Ip,{asChild:!0,trapped:i,onMountAutoFocus:_e(s,V=>{var Y;V.preventDefault(),(Y=C.current)===null||Y===void 0||Y.focus()}),onUnmountAutoFocus:a},x.createElement(Hd,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:h,onDismiss:f},x.createElement(bL,le({asChild:!0},w,{dir:b.dir,orientation:"vertical",loop:n,currentTabStopId:S,onCurrentTabStopIdChange:_,onEntryFocus:_e(l,V=>{b.isUsingKeyboardRef.current||V.preventDefault()})}),x.createElement(uv,le({role:"menu","aria-orientation":"vertical","data-state":QV(y.open),"data-radix-menu-content":"",dir:b.dir},E,g,{ref:k,style:{outline:"none",...g.style},onKeyDown:_e(g.onKeyDown,V=>{const J=V.target.closest("[data-radix-menu-content]")===V.currentTarget,ue=V.ctrlKey||V.altKey||V.metaKey,ne=V.key.length===1;J&&(V.key==="Tab"&&V.preventDefault(),!ue&&ne&&z(V.key));const ge=C.current;if(V.target!==ge||!Jge.includes(V.key))return;V.preventDefault();const ie=A().filter(ee=>!ee.disabled).map(ee=>ee.ref.current);UV.includes(V.key)&&ie.reverse(),w0e(ie)}),onBlur:_e(r.onBlur,V=>{V.currentTarget.contains(V.target)||(window.clearTimeout(D.current),I.current="")}),onPointerMove:_e(r.onPointerMove,c0(V=>{const Y=V.target,J=U.current!==V.clientX;if(V.currentTarget.contains(Y)&&J){const ue=V.clientX>U.current?"right":"left";F.current=ue,U.current=V.clientX}}))})))))))}),h0e=x.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return x.createElement(Ge.div,le({},n,{ref:e}))}),vk="MenuItem",X5="menu.itemSelect",f0e=x.forwardRef((r,e)=>{const{disabled:t=!1,onSelect:n,...i}=r,s=x.useRef(null),a=xv(vk,r.__scopeMenu),o=xL(vk,r.__scopeMenu),l=it(e,s),c=x.useRef(!1),u=()=>{const d=s.current;if(!t&&d){const h=new CustomEvent(X5,{bubbles:!0,cancelable:!0});d.addEventListener(X5,f=>n?.(f),{once:!0}),uH(d,h),h.defaultPrevented?c.current=!1:a.onClose()}};return x.createElement(KV,le({},i,{ref:l,disabled:t,onClick:_e(r.onClick,u),onPointerDown:d=>{var h;(h=r.onPointerDown)===null||h===void 0||h.call(r,d),c.current=!0},onPointerUp:_e(r.onPointerUp,d=>{var h;c.current||(h=d.currentTarget)===null||h===void 0||h.click()}),onKeyDown:_e(r.onKeyDown,d=>{const h=o.searchRef.current!=="";t||h&&d.key===" "||gk.includes(d.key)&&(d.currentTarget.click(),d.preventDefault())})}))}),KV=x.forwardRef((r,e)=>{const{__scopeMenu:t,disabled:n=!1,textValue:i,...s}=r,a=xL(vk,t),o=HV(t),l=x.useRef(null),c=it(e,l),[u,d]=x.useState(!1),[h,f]=x.useState("");return x.useEffect(()=>{const m=l.current;if(m){var g;f(((g=m.textContent)!==null&&g!==void 0?g:"").trim())}},[s.children]),x.createElement(l0.ItemSlot,{scope:t,disabled:n,textValue:i??h},x.createElement(EL,le({asChild:!0},o,{focusable:!n}),x.createElement(Ge.div,le({role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0},s,{ref:c,onPointerMove:_e(r.onPointerMove,c0(m=>{n?a.onItemLeave(m):(a.onItemEnter(m),m.defaultPrevented||m.currentTarget.focus())})),onPointerLeave:_e(r.onPointerLeave,c0(m=>a.onItemLeave(m))),onFocus:_e(r.onFocus,()=>d(!0)),onBlur:_e(r.onBlur,()=>d(!1))}))))}),p0e="MenuRadioGroup",[Xut,Zut]=Gd(p0e,{value:void 0,onValueChange:()=>{}}),m0e="MenuItemIndicator",[Jut,edt]=Gd(m0e,{checked:!1}),g0e=x.forwardRef((r,e)=>{const{__scopeMenu:t,...n}=r;return x.createElement(Ge.div,le({role:"separator","aria-orientation":"horizontal"},n,{ref:e}))}),zV="MenuSub",[v0e,YV]=Gd(zV),y0e=r=>{const{__scopeMenu:e,children:t,open:n=!1,onOpenChange:i}=r,s=Yc(zV,e),a=mT(e),[o,l]=x.useState(null),[c,u]=x.useState(null),d=Br(i);return x.useEffect(()=>(s.open===!1&&d(!1),()=>d(!1)),[s.open,d]),x.createElement(lv,a,x.createElement(VV,{scope:e,open:n,onOpenChange:d,content:c,onContentChange:u},x.createElement(v0e,{scope:e,contentId:ii(),triggerId:ii(),trigger:o,onTriggerChange:l},t)))},Qy="MenuSubTrigger",b0e=x.forwardRef((r,e)=>{const t=Yc(Qy,r.__scopeMenu),n=xv(Qy,r.__scopeMenu),i=YV(Qy,r.__scopeMenu),s=xL(Qy,r.__scopeMenu),a=x.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:l}=s,c={__scopeMenu:r.__scopeMenu},u=x.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return x.useEffect(()=>u,[u]),x.useEffect(()=>{const d=o.current;return()=>{window.clearTimeout(d),l(null)}},[o,l]),x.createElement(GV,le({asChild:!0},c),x.createElement(KV,le({id:i.triggerId,"aria-haspopup":"menu","aria-expanded":t.open,"aria-controls":i.contentId,"data-state":QV(t.open)},r,{ref:Zw(e,i.onTriggerChange),onClick:d=>{var h;(h=r.onClick)===null||h===void 0||h.call(r,d),!(r.disabled||d.defaultPrevented)&&(d.currentTarget.focus(),t.open||t.onOpenChange(!0))},onPointerMove:_e(r.onPointerMove,c0(d=>{s.onItemEnter(d),!d.defaultPrevented&&!r.disabled&&!t.open&&!a.current&&(s.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{t.onOpenChange(!0),u()},100))})),onPointerLeave:_e(r.onPointerLeave,c0(d=>{var h;u();const f=(h=t.content)===null||h===void 0?void 0:h.getBoundingClientRect();if(f){var m;const g=(m=t.content)===null||m===void 0?void 0:m.dataset.side,y=g==="right",b=y?-5:5,E=f[y?"left":"right"],w=f[y?"right":"left"];s.onPointerGraceIntentChange({area:[{x:d.clientX+b,y:d.clientY},{x:E,y:f.top},{x:w,y:f.top},{x:w,y:f.bottom},{x:E,y:f.bottom}],side:g}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>s.onPointerGraceIntentChange(null),300)}else{if(s.onTriggerLeave(d),d.defaultPrevented)return;s.onPointerGraceIntentChange(null)}})),onKeyDown:_e(r.onKeyDown,d=>{const h=s.searchRef.current!=="";if(!(r.disabled||h&&d.key===" ")&&e0e[n.dir].includes(d.key)){var f;t.onOpenChange(!0),(f=t.content)===null||f===void 0||f.focus(),d.preventDefault()}})})))}),E0e="MenuSubContent",x0e=x.forwardRef((r,e)=>{const t=jV(aa,r.__scopeMenu),{forceMount:n=t.forceMount,...i}=r,s=Yc(aa,r.__scopeMenu),a=xv(aa,r.__scopeMenu),o=YV(E0e,r.__scopeMenu),l=x.useRef(null),c=it(e,l);return x.createElement(l0.Provider,{scope:r.__scopeMenu},x.createElement(mn,{present:n||s.open},x.createElement(l0.Slot,{scope:r.__scopeMenu},x.createElement(wL,le({id:o.contentId,"aria-labelledby":o.triggerId},i,{ref:c,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{var d;a.isUsingKeyboardRef.current&&((d=l.current)===null||d===void 0||d.focus()),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:_e(r.onFocusOutside,u=>{u.target!==o.trigger&&s.onOpenChange(!1)}),onEscapeKeyDown:_e(r.onEscapeKeyDown,u=>{a.onClose(),u.preventDefault()}),onKeyDown:_e(r.onKeyDown,u=>{const d=u.currentTarget.contains(u.target),h=t0e[a.dir].includes(u.key);if(d&&h){var f;s.onOpenChange(!1),(f=o.trigger)===null||f===void 0||f.focus(),u.preventDefault()}})})))))});function QV(r){return r?"open":"closed"}function w0e(r){const e=document.activeElement;for(const t of r)if(t===e||(t.focus(),document.activeElement!==e))return}function T0e(r,e){return r.map((t,n)=>r[(e+n)%r.length])}function S0e(r,e,t){const i=e.length>1&&Array.from(e).every(c=>c===e[0])?e[0]:e,s=t?r.indexOf(t):-1;let a=T0e(r,Math.max(s,0));i.length===1&&(a=a.filter(c=>c!==t));const l=a.find(c=>c.toLowerCase().startsWith(i.toLowerCase()));return l!==t?l:void 0}function A0e(r,e){const{x:t,y:n}=r;let i=!1;for(let s=0,a=e.length-1;s<e.length;a=s++){const o=e[s].x,l=e[s].y,c=e[a].x,u=e[a].y;l>n!=u>n&&t<(c-o)*(n-l)/(u-l)+o&&(i=!i)}return i}function _0e(r,e){if(!e)return!1;const t={x:r.clientX,y:r.clientY};return A0e(t,e)}function c0(r){return e=>e.pointerType==="mouse"?r(e):void 0}const C0e=s0e,R0e=GV,k0e=o0e,I0e=c0e,$0e=h0e,D0e=f0e,L0e=g0e,O0e=y0e,P0e=b0e,M0e=x0e,XV="DropdownMenu",[N0e,tdt]=Hr(XV,[WV]),wo=WV(),[F0e,ZV]=N0e(XV),B0e=r=>{const{__scopeDropdownMenu:e,children:t,dir:n,open:i,defaultOpen:s,onOpenChange:a,modal:o=!0}=r,l=wo(e),c=x.useRef(null),[u=!1,d]=Gn({prop:i,defaultProp:s,onChange:a});return x.createElement(F0e,{scope:e,triggerId:ii(),triggerRef:c,contentId:ii(),open:u,onOpenChange:d,onOpenToggle:x.useCallback(()=>d(h=>!h),[d]),modal:o},x.createElement(C0e,le({},l,{open:u,onOpenChange:d,dir:n,modal:o}),t))},U0e="DropdownMenuTrigger",W0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,disabled:n=!1,...i}=r,s=ZV(U0e,t),a=wo(t);return x.createElement(R0e,le({asChild:!0},a),x.createElement(Ge.button,le({type:"button",id:s.triggerId,"aria-haspopup":"menu","aria-expanded":s.open,"aria-controls":s.open?s.contentId:void 0,"data-state":s.open?"open":"closed","data-disabled":n?"":void 0,disabled:n},i,{ref:Zw(e,s.triggerRef),onPointerDown:_e(r.onPointerDown,o=>{!n&&o.button===0&&o.ctrlKey===!1&&(s.onOpenToggle(),s.open||o.preventDefault())}),onKeyDown:_e(r.onKeyDown,o=>{n||(["Enter"," "].includes(o.key)&&s.onOpenToggle(),o.key==="ArrowDown"&&s.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})))}),H0e=r=>{const{__scopeDropdownMenu:e,...t}=r,n=wo(e);return x.createElement(k0e,le({},n,t))},V0e="DropdownMenuContent",G0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=ZV(V0e,t),s=wo(t),a=x.useRef(!1);return x.createElement(I0e,le({id:i.contentId,"aria-labelledby":i.triggerId},s,n,{ref:e,onCloseAutoFocus:_e(r.onCloseAutoFocus,o=>{var l;a.current||(l=i.triggerRef.current)===null||l===void 0||l.focus(),a.current=!1,o.preventDefault()}),onInteractOutside:_e(r.onInteractOutside,o=>{const l=o.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;(!i.modal||u)&&(a.current=!0)}),style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),q0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=wo(t);return x.createElement($0e,le({},i,n,{ref:e}))}),j0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=wo(t);return x.createElement(D0e,le({},i,n,{ref:e}))}),K0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=wo(t);return x.createElement(L0e,le({},i,n,{ref:e}))}),z0e=r=>{const{__scopeDropdownMenu:e,children:t,open:n,onOpenChange:i,defaultOpen:s}=r,a=wo(e),[o=!1,l]=Gn({prop:n,defaultProp:s,onChange:i});return x.createElement(O0e,le({},a,{open:o,onOpenChange:l}),t)},Y0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=wo(t);return x.createElement(P0e,le({},i,n,{ref:e}))}),Q0e=x.forwardRef((r,e)=>{const{__scopeDropdownMenu:t,...n}=r,i=wo(t);return x.createElement(M0e,le({},i,n,{ref:e,style:{...r.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}}))}),X0e=B0e,Z0e=W0e,JV=H0e,J0e=G0e,eve=q0e,tve=j0e,rve=K0e,nve=z0e,ive=Y0e,sve=Q0e,eG="Checkbox",[ave,rdt]=Hr(eG),[ove,lve]=ave(eG),cve=x.forwardRef((r,e)=>{const{__scopeCheckbox:t,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,...u}=r,[d,h]=x.useState(null),f=it(e,w=>h(w)),m=x.useRef(!1),g=d?!!d.closest("form"):!0,[y=!1,b]=Gn({prop:i,defaultProp:s,onChange:c}),E=x.useRef(y);return x.useEffect(()=>{const w=d?.form;if(w){const A=()=>b(E.current);return w.addEventListener("reset",A),()=>w.removeEventListener("reset",A)}},[d,b]),x.createElement(ove,{scope:t,state:y,disabled:o},x.createElement(Ge.button,le({type:"button",role:"checkbox","aria-checked":dd(y)?"mixed":y,"aria-required":a,"data-state":tG(y),"data-disabled":o?"":void 0,disabled:o,value:l},u,{ref:f,onKeyDown:_e(r.onKeyDown,w=>{w.key==="Enter"&&w.preventDefault()}),onClick:_e(r.onClick,w=>{b(A=>dd(A)?!0:!A),g&&(m.current=w.isPropagationStopped(),m.current||w.stopPropagation())})})),g&&x.createElement(hve,{control:d,bubbles:!m.current,name:n,value:l,checked:y,required:a,disabled:o,style:{transform:"translateX(-100%)"}}))}),uve="CheckboxIndicator",dve=x.forwardRef((r,e)=>{const{__scopeCheckbox:t,forceMount:n,...i}=r,s=lve(uve,t);return x.createElement(mn,{present:n||dd(s.state)||s.state===!0},x.createElement(Ge.span,le({"data-state":tG(s.state),"data-disabled":s.disabled?"":void 0},i,{ref:e,style:{pointerEvents:"none",...r.style}})))}),hve=r=>{const{control:e,checked:t,bubbles:n=!0,...i}=r,s=x.useRef(null),a=oT(t),o=nT(e);return x.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(a!==t&&d){const h=new Event("click",{bubbles:n});l.indeterminate=dd(t),d.call(l,dd(t)?!1:t),l.dispatchEvent(h)}},[a,t,n]),x.createElement("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:dd(t)?!1:t},i,{tabIndex:-1,ref:s,style:{...r.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function dd(r){return r==="indeterminate"}function tG(r){return dd(r)?"indeterminate":r?"checked":"unchecked"}const fve=cve,pve=dve;var rG=mv(),u_=function(){},gT=x.forwardRef(function(r,e){var t=x.useRef(null),n=x.useState({onScrollCapture:u_,onWheelCapture:u_,onTouchMoveCapture:u_}),i=n[0],s=n[1],a=r.forwardProps,o=r.children,l=r.className,c=r.removeScrollBar,u=r.enabled,d=r.shards,h=r.sideCar,f=r.noIsolation,m=r.inert,g=r.allowPinchZoom,y=r.as,b=y===void 0?"div":y,E=Os(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,A=pv([t,e]),S=Et(Et({},E),i);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:rG,removeScrollBar:c,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t}),a?x.cloneElement(x.Children.only(o),Et(Et({},S),{ref:A})):x.createElement(b,Et({},S,{className:l,ref:A}),o))});gT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};gT.classNames={fullWidth:Sc,zeroRight:Tc};var yk=!1;if(typeof window<"u")try{var Xy=Object.defineProperty({},"passive",{get:function(){return yk=!0,!0}});window.addEventListener("test",Xy,Xy),window.removeEventListener("test",Xy,Xy)}catch{yk=!1}var xh=yk?{passive:!1}:!1,mve=function(r){return r.tagName==="TEXTAREA"},nG=function(r,e){var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!mve(r)&&t[e]==="visible")},gve=function(r){return nG(r,"overflowY")},vve=function(r){return nG(r,"overflowX")},Z5=function(r,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var n=iG(r,t);if(n){var i=sG(r,t),s=i[1],a=i[2];if(s>a)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},yve=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},bve=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},iG=function(r,e){return r==="v"?gve(e):vve(e)},sG=function(r,e){return r==="v"?yve(e):bve(e)},Eve=function(r,e){return r==="h"&&e==="rtl"?-1:1},xve=function(r,e,t,n,i){var s=Eve(r,window.getComputedStyle(e).direction),a=s*n,o=t.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{var f=sG(r,o),m=f[0],g=f[1],y=f[2],b=g-y-s*m;(m||b)&&iG(r,o)&&(d+=b,h+=m),o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&d===0||!u&&h===0)&&(c=!0),c},Zy=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},J5=function(r){return[r.deltaX,r.deltaY]},eF=function(r){return r&&"current"in r?r.current:r},wve=function(r,e){return r[0]===e[0]&&r[1]===e[1]},Tve=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},Sve=0,wh=[];function Ave(r){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState(Sve++)[0],s=x.useState(function(){return $p()})[0],a=x.useRef(r);x.useEffect(function(){a.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var g=fv([r.lockRef.current],(r.shards||[]).map(eF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var o=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=Zy(g),E=t.current,w="deltaX"in g?g.deltaX:E[0]-b[0],A="deltaY"in g?g.deltaY:E[1]-b[1],S,_=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var k=Z5(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=Z5(C,_)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||A)&&(n.current=S),!S)return!0;var D=n.current||S;return xve(D,y,g,D==="h"?w:A)},[]),l=x.useCallback(function(g){var y=g;if(!(!wh.length||wh[wh.length-1]!==s)){var b="deltaY"in y?J5(y):Zy(y),E=e.current.filter(function(S){return S.name===y.type&&S.target===y.target&&wve(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var w=(a.current.shards||[]).map(eF).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?o(y,w[0]):!a.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,b,E){var w={name:g,delta:y,target:b,should:E};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(A){return A!==w})},1)},[]),u=x.useCallback(function(g){t.current=Zy(g),n.current=void 0},[]),d=x.useCallback(function(g){c(g.type,J5(g),g.target,o(g,r.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,Zy(g),g.target,o(g,r.lockRef.current))},[]);x.useEffect(function(){return wh.push(s),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,xh),document.addEventListener("touchmove",l,xh),document.addEventListener("touchstart",u,xh),function(){wh=wh.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,xh),document.removeEventListener("touchmove",l,xh),document.removeEventListener("touchstart",u,xh)}},[]);var f=r.removeScrollBar,m=r.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:Tve(i)}):null,f?x.createElement(vv,{gapMode:"margin"}):null)}const _ve=gv(rG,Ave);var aG=x.forwardRef(function(r,e){return x.createElement(gT,Et({},r,{ref:e,sideCar:_ve}))});aG.classNames=gT.classNames;const oG="Dialog",[lG,cG]=Hr(oG),[ndt,pa]=lG(oG),Cve="DialogTrigger",Rve=x.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,i=pa(Cve,t),s=it(e,i.triggerRef);return x.createElement(Ge.button,le({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":TL(i.open)},n,{ref:s,onClick:_e(r.onClick,i.onOpenToggle)}))}),uG="DialogPortal",[kve,dG]=lG(uG,{forceMount:void 0}),Ive=r=>{const{__scopeDialog:e,forceMount:t,children:n,container:i}=r,s=pa(uG,e);return x.createElement(kve,{scope:e,forceMount:t},x.Children.map(n,a=>x.createElement(mn,{present:t||s.open},x.createElement(Rp,{asChild:!0,container:i},a))))},bk="DialogOverlay",$ve=x.forwardRef((r,e)=>{const t=dG(bk,r.__scopeDialog),{forceMount:n=t.forceMount,...i}=r,s=pa(bk,r.__scopeDialog);return s.modal?x.createElement(mn,{present:n||s.open},x.createElement(Dve,le({},i,{ref:e}))):null}),Dve=x.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,i=pa(bk,t);return x.createElement(aG,{as:fo,allowPinchZoom:!0,shards:[i.contentRef]},x.createElement(Ge.div,le({"data-state":TL(i.open)},n,{ref:e,style:{pointerEvents:"auto",...n.style}})))}),tp="DialogContent",Lve=x.forwardRef((r,e)=>{const t=dG(tp,r.__scopeDialog),{forceMount:n=t.forceMount,...i}=r,s=pa(tp,r.__scopeDialog);return x.createElement(mn,{present:n||s.open},s.modal?x.createElement(Ove,le({},i,{ref:e})):x.createElement(Pve,le({},i,{ref:e})))}),Ove=x.forwardRef((r,e)=>{const t=pa(tp,r.__scopeDialog),n=x.useRef(null),i=it(e,t.contentRef,n);return x.useEffect(()=>{const s=n.current;if(s)return hv(s)},[]),x.createElement(hG,le({},r,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(r.onCloseAutoFocus,s=>{var a;s.preventDefault(),(a=t.triggerRef.current)===null||a===void 0||a.focus()}),onPointerDownOutside:_e(r.onPointerDownOutside,s=>{const a=s.detail.originalEvent,o=a.button===0&&a.ctrlKey===!0;(a.button===2||o)&&s.preventDefault()}),onFocusOutside:_e(r.onFocusOutside,s=>s.preventDefault())}))}),Pve=x.forwardRef((r,e)=>{const t=pa(tp,r.__scopeDialog),n=x.useRef(!1),i=x.useRef(!1);return x.createElement(hG,le({},r,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a;if((a=r.onCloseAutoFocus)===null||a===void 0||a.call(r,s),!s.defaultPrevented){var o;n.current||(o=t.triggerRef.current)===null||o===void 0||o.focus(),s.preventDefault()}n.current=!1,i.current=!1},onInteractOutside:s=>{var a,o;(a=r.onInteractOutside)===null||a===void 0||a.call(r,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((o=t.triggerRef.current)===null||o===void 0?void 0:o.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),hG=x.forwardRef((r,e)=>{const{__scopeDialog:t,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,...a}=r,o=pa(tp,t),l=x.useRef(null),c=it(e,l);return kp(),x.createElement(x.Fragment,null,x.createElement(Ip,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s},x.createElement(Hd,le({role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":TL(o.open)},a,{ref:c,onDismiss:()=>o.onOpenChange(!1)}))),!1)}),fG="DialogTitle",Mve=x.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,i=pa(fG,t);return x.createElement(Ge.h2,le({id:i.titleId},n,{ref:e}))}),Nve="DialogDescription",Fve=x.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,i=pa(Nve,t);return x.createElement(Ge.p,le({id:i.descriptionId},n,{ref:e}))}),Bve="DialogClose",Uve=x.forwardRef((r,e)=>{const{__scopeDialog:t,...n}=r,i=pa(Bve,t);return x.createElement(Ge.button,le({type:"button"},n,{ref:e,onClick:_e(r.onClick,()=>i.onOpenChange(!1))}))});function TL(r){return r?"open":"closed"}const Wve="DialogTitleWarning",[Hve,idt]=Jw(Wve,{contentName:tp,titleName:fG,docsSlug:"dialog"}),pG=Rve,mG=Ive,gG=$ve,vG=Lve,yG=Mve,Vve=Fve,SL=Uve,Gve="AlertDialog",[qve,sdt]=Hr(Gve,[cG]),Qc=cG(),jve=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,i=Qc(t);return x.createElement(pG,le({},i,n,{ref:e}))}),Kve=r=>{const{__scopeAlertDialog:e,...t}=r,n=Qc(e);return x.createElement(mG,le({},n,t))},zve=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,i=Qc(t);return x.createElement(gG,le({},i,n,{ref:e}))}),bG="AlertDialogContent",[Yve,Qve]=qve(bG),Xve=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,children:n,...i}=r,s=Qc(t),a=x.useRef(null),o=it(e,a),l=x.useRef(null);return x.createElement(Hve,{contentName:bG,titleName:Zve,docsSlug:"alert-dialog"},x.createElement(Yve,{scope:t,cancelRef:l},x.createElement(vG,le({role:"alertdialog"},s,i,{ref:o,onOpenAutoFocus:_e(i.onOpenAutoFocus,c=>{var u;c.preventDefault(),(u=l.current)===null||u===void 0||u.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault()}),x.createElement($2,null,n),!1)))}),Zve="AlertDialogTitle",Jve=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,i=Qc(t);return x.createElement(yG,le({},i,n,{ref:e}))}),eye=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,i=Qc(t);return x.createElement(Vve,le({},i,n,{ref:e}))}),tye=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,i=Qc(t);return x.createElement(SL,le({},i,n,{ref:e}))}),rye="AlertDialogCancel",nye=x.forwardRef((r,e)=>{const{__scopeAlertDialog:t,...n}=r,{cancelRef:i}=Qve(rye,t),s=Qc(t),a=it(e,i);return x.createElement(SL,le({},s,n,{ref:a}))}),iye=jve,sye=Kve,aye=zve,oye=Xve,lye=tye,cye=nye,uye=Jve,dye=eye;var EG=mv(),d_=function(){},vT=x.forwardRef(function(r,e){var t=x.useRef(null),n=x.useState({onScrollCapture:d_,onWheelCapture:d_,onTouchMoveCapture:d_}),i=n[0],s=n[1],a=r.forwardProps,o=r.children,l=r.className,c=r.removeScrollBar,u=r.enabled,d=r.shards,h=r.sideCar,f=r.noIsolation,m=r.inert,g=r.allowPinchZoom,y=r.as,b=y===void 0?"div":y,E=r.gapMode,w=Os(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),A=h,S=pv([t,e]),_=Et(Et({},w),i);return x.createElement(x.Fragment,null,u&&x.createElement(A,{sideCar:EG,removeScrollBar:c,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t,gapMode:E}),a?x.cloneElement(x.Children.only(o),Et(Et({},_),{ref:S})):x.createElement(b,Et({},_,{className:l,ref:S}),o))});vT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};vT.classNames={fullWidth:Sc,zeroRight:Tc};var Ek=!1;if(typeof window<"u")try{var Jy=Object.defineProperty({},"passive",{get:function(){return Ek=!0,!0}});window.addEventListener("test",Jy,Jy),window.removeEventListener("test",Jy,Jy)}catch{Ek=!1}var Th=Ek?{passive:!1}:!1,hye=function(r){return r.tagName==="TEXTAREA"},xG=function(r,e){if(!(r instanceof Element))return!1;var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!hye(r)&&t[e]==="visible")},fye=function(r){return xG(r,"overflowY")},pye=function(r){return xG(r,"overflowX")},tF=function(r,e){var t=e.ownerDocument,n=e;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=wG(r,n);if(i){var s=TG(r,n),a=s[1],o=s[2];if(a>o)return!0}n=n.parentNode}while(n&&n!==t.body);return!1},mye=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},gye=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},wG=function(r,e){return r==="v"?fye(e):pye(e)},TG=function(r,e){return r==="v"?mye(e):gye(e)},vye=function(r,e){return r==="h"&&e==="rtl"?-1:1},yye=function(r,e,t,n,i){var s=vye(r,window.getComputedStyle(e).direction),a=s*n,o=t.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{var f=TG(r,o),m=f[0],g=f[1],y=f[2],b=g-y-s*m;(m||b)&&wG(r,o)&&(d+=b,h+=m),o instanceof ShadowRoot?o=o.host:o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&Math.abs(d)<1||!u&&Math.abs(h)<1)&&(c=!0),c},eb=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},rF=function(r){return[r.deltaX,r.deltaY]},nF=function(r){return r&&"current"in r?r.current:r},bye=function(r,e){return r[0]===e[0]&&r[1]===e[1]},Eye=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},xye=0,Sh=[];function wye(r){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState(xye++)[0],s=x.useState($p)[0],a=x.useRef(r);x.useEffect(function(){a.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var g=fv([r.lockRef.current],(r.shards||[]).map(nF),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var o=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=eb(g),E=t.current,w="deltaX"in g?g.deltaX:E[0]-b[0],A="deltaY"in g?g.deltaY:E[1]-b[1],S,_=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var k=tF(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=tF(C,_)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||A)&&(n.current=S),!S)return!0;var D=n.current||S;return yye(D,y,g,D==="h"?w:A)},[]),l=x.useCallback(function(g){var y=g;if(!(!Sh.length||Sh[Sh.length-1]!==s)){var b="deltaY"in y?rF(y):eb(y),E=e.current.filter(function(S){return S.name===y.type&&(S.target===y.target||y.target===S.shadowParent)&&bye(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var w=(a.current.shards||[]).map(nF).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?o(y,w[0]):!a.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,b,E){var w={name:g,delta:y,target:b,should:E,shadowParent:Tye(b)};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(A){return A!==w})},1)},[]),u=x.useCallback(function(g){t.current=eb(g),n.current=void 0},[]),d=x.useCallback(function(g){c(g.type,rF(g),g.target,o(g,r.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,eb(g),g.target,o(g,r.lockRef.current))},[]);x.useEffect(function(){return Sh.push(s),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,Th),document.addEventListener("touchmove",l,Th),document.addEventListener("touchstart",u,Th),function(){Sh=Sh.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,Th),document.removeEventListener("touchmove",l,Th),document.removeEventListener("touchstart",u,Th)}},[]);var f=r.removeScrollBar,m=r.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:Eye(i)}):null,f?x.createElement(vv,{gapMode:r.gapMode}):null)}function Tye(r){for(var e=null;r!==null;)r instanceof ShadowRoot&&(e=r.host,r=r.host),r=r.parentNode;return e}const Sye=gv(EG,wye);var SG=x.forwardRef(function(r,e){return x.createElement(vT,Et({},r,{ref:e,sideCar:Sye}))});SG.classNames=vT.classNames;function Aye(r,e){return x.useReducer((t,n)=>{const i=e[t][n];return i??t},r)}const AG="ScrollArea",[_G,adt]=Hr(AG),[_ye,To]=_G(AG),Cye=x.forwardRef((r,e)=>{const{__scopeScrollArea:t,type:n="hover",dir:i,scrollHideDelay:s=600,...a}=r,[o,l]=x.useState(null),[c,u]=x.useState(null),[d,h]=x.useState(null),[f,m]=x.useState(null),[g,y]=x.useState(null),[b,E]=x.useState(0),[w,A]=x.useState(0),[S,_]=x.useState(!1),[C,k]=x.useState(!1),D=it(e,L=>l(L)),I=Vd(i);return x.createElement(_ye,{scope:t,type:n,dir:I,scrollHideDelay:s,scrollArea:o,viewport:c,onViewportChange:u,content:d,onContentChange:h,scrollbarX:f,onScrollbarXChange:m,scrollbarXEnabled:S,onScrollbarXEnabledChange:_,scrollbarY:g,onScrollbarYChange:y,scrollbarYEnabled:C,onScrollbarYEnabledChange:k,onCornerWidthChange:E,onCornerHeightChange:A},x.createElement(Ge.div,le({dir:I},a,{ref:D,style:{position:"relative","--radix-scroll-area-corner-width":b+"px","--radix-scroll-area-corner-height":w+"px",...r.style}})))}),Rye="ScrollAreaViewport",kye=x.forwardRef((r,e)=>{const{__scopeScrollArea:t,children:n,...i}=r,s=To(Rye,t),a=x.useRef(null),o=it(e,a,s.onViewportChange);return x.createElement(x.Fragment,null,x.createElement("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"}}),x.createElement(Ge.div,le({"data-radix-scroll-area-viewport":""},i,{ref:o,style:{overflowX:s.scrollbarXEnabled?"scroll":"hidden",overflowY:s.scrollbarYEnabled?"scroll":"hidden",...r.style}}),x.createElement("div",{ref:s.onContentChange,style:{minWidth:"100%",display:"table"}},n)))}),Sl="ScrollAreaScrollbar",Iye=x.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=To(Sl,r.__scopeScrollArea),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:a}=i,o=r.orientation==="horizontal";return x.useEffect(()=>(o?s(!0):a(!0),()=>{o?s(!1):a(!1)}),[o,s,a]),i.type==="hover"?x.createElement($ye,le({},n,{ref:e,forceMount:t})):i.type==="scroll"?x.createElement(Dye,le({},n,{ref:e,forceMount:t})):i.type==="auto"?x.createElement(CG,le({},n,{ref:e,forceMount:t})):i.type==="always"?x.createElement(AL,le({},n,{ref:e})):null}),$ye=x.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=To(Sl,r.__scopeScrollArea),[s,a]=x.useState(!1);return x.useEffect(()=>{const o=i.scrollArea;let l=0;if(o){const c=()=>{window.clearTimeout(l),a(!0)},u=()=>{l=window.setTimeout(()=>a(!1),i.scrollHideDelay)};return o.addEventListener("pointerenter",c),o.addEventListener("pointerleave",u),()=>{window.clearTimeout(l),o.removeEventListener("pointerenter",c),o.removeEventListener("pointerleave",u)}}},[i.scrollArea,i.scrollHideDelay]),x.createElement(mn,{present:t||s},x.createElement(CG,le({"data-state":s?"visible":"hidden"},n,{ref:e})))}),Dye=x.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=To(Sl,r.__scopeScrollArea),s=r.orientation==="horizontal",a=bT(()=>l("SCROLL_END"),100),[o,l]=Aye("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(o==="idle"){const c=window.setTimeout(()=>l("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(c)}},[o,i.scrollHideDelay,l]),x.useEffect(()=>{const c=i.viewport,u=s?"scrollLeft":"scrollTop";if(c){let d=c[u];const h=()=>{const f=c[u];d!==f&&(l("SCROLL"),a()),d=f};return c.addEventListener("scroll",h),()=>c.removeEventListener("scroll",h)}},[i.viewport,s,l,a]),x.createElement(mn,{present:t||o!=="hidden"},x.createElement(AL,le({"data-state":o==="hidden"?"hidden":"visible"},n,{ref:e,onPointerEnter:_e(r.onPointerEnter,()=>l("POINTER_ENTER")),onPointerLeave:_e(r.onPointerLeave,()=>l("POINTER_LEAVE"))})))}),CG=x.forwardRef((r,e)=>{const t=To(Sl,r.__scopeScrollArea),{forceMount:n,...i}=r,[s,a]=x.useState(!1),o=r.orientation==="horizontal",l=bT(()=>{if(t.viewport){const c=t.viewport.offsetWidth<t.viewport.scrollWidth,u=t.viewport.offsetHeight<t.viewport.scrollHeight;a(o?c:u)}},10);return dx(t.viewport,l),dx(t.content,l),x.createElement(mn,{present:n||s},x.createElement(AL,le({"data-state":s?"visible":"hidden"},i,{ref:e})))}),AL=x.forwardRef((r,e)=>{const{orientation:t="vertical",...n}=r,i=To(Sl,r.__scopeScrollArea),s=x.useRef(null),a=x.useRef(0),[o,l]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=IG(o.viewport,o.content),u={...n,sizes:o,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>s.current=h,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:h=>a.current=h};function d(h,f){return Fye(h,a.current,o,f)}return t==="horizontal"?x.createElement(Lye,le({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollLeft,f=iF(h,o,i.dir);s.current.style.transform=`translate3d(${f}px, 0, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollLeft=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollLeft=d(h,i.dir))}})):t==="vertical"?x.createElement(Oye,le({},u,{ref:e,onThumbPositionChange:()=>{if(i.viewport&&s.current){const h=i.viewport.scrollTop,f=iF(h,o);s.current.style.transform=`translate3d(0, ${f}px, 0)`}},onWheelScroll:h=>{i.viewport&&(i.viewport.scrollTop=h)},onDragScroll:h=>{i.viewport&&(i.viewport.scrollTop=d(h))}})):null}),Lye=x.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=To(Sl,r.__scopeScrollArea),[a,o]=x.useState(),l=x.useRef(null),c=it(e,l,s.onScrollbarXChange);return x.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),x.createElement(kG,le({"data-orientation":"horizontal"},i,{ref:c,sizes:t,style:{bottom:0,left:s.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:s.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":yT(t)+"px",...r.style},onThumbPointerDown:u=>r.onThumbPointerDown(u.x),onDragScroll:u=>r.onDragScroll(u.x),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollLeft+u.deltaX;r.onWheelScroll(h),DG(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&n({content:s.viewport.scrollWidth,viewport:s.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:ux(a.paddingLeft),paddingEnd:ux(a.paddingRight)}})}}))}),Oye=x.forwardRef((r,e)=>{const{sizes:t,onSizesChange:n,...i}=r,s=To(Sl,r.__scopeScrollArea),[a,o]=x.useState(),l=x.useRef(null),c=it(e,l,s.onScrollbarYChange);return x.useEffect(()=>{l.current&&o(getComputedStyle(l.current))},[l]),x.createElement(kG,le({"data-orientation":"vertical"},i,{ref:c,sizes:t,style:{top:0,right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":yT(t)+"px",...r.style},onThumbPointerDown:u=>r.onThumbPointerDown(u.y),onDragScroll:u=>r.onDragScroll(u.y),onWheelScroll:(u,d)=>{if(s.viewport){const h=s.viewport.scrollTop+u.deltaY;r.onWheelScroll(h),DG(h,d)&&u.preventDefault()}},onResize:()=>{l.current&&s.viewport&&a&&n({content:s.viewport.scrollHeight,viewport:s.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:ux(a.paddingTop),paddingEnd:ux(a.paddingBottom)}})}}))}),[Pye,RG]=_G(Sl),kG=x.forwardRef((r,e)=>{const{__scopeScrollArea:t,sizes:n,hasThumb:i,onThumbChange:s,onThumbPointerUp:a,onThumbPointerDown:o,onThumbPositionChange:l,onDragScroll:c,onWheelScroll:u,onResize:d,...h}=r,f=To(Sl,t),[m,g]=x.useState(null),y=it(e,D=>g(D)),b=x.useRef(null),E=x.useRef(""),w=f.viewport,A=n.content-n.viewport,S=Br(u),_=Br(l),C=bT(d,10);function k(D){if(b.current){const I=D.clientX-b.current.left,L=D.clientY-b.current.top;c({x:I,y:L})}}return x.useEffect(()=>{const D=I=>{const L=I.target;m?.contains(L)&&S(I,A)};return document.addEventListener("wheel",D,{passive:!1}),()=>document.removeEventListener("wheel",D,{passive:!1})},[w,m,A,S]),x.useEffect(_,[n,_]),dx(m,C),dx(f.content,C),x.createElement(Pye,{scope:t,scrollbar:m,hasThumb:i,onThumbChange:Br(s),onThumbPointerUp:Br(a),onThumbPositionChange:_,onThumbPointerDown:Br(o)},x.createElement(Ge.div,le({},h,{ref:y,style:{position:"absolute",...h.style},onPointerDown:_e(r.onPointerDown,D=>{D.button===0&&(D.target.setPointerCapture(D.pointerId),b.current=m.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",f.viewport&&(f.viewport.style.scrollBehavior="auto"),k(D))}),onPointerMove:_e(r.onPointerMove,k),onPointerUp:_e(r.onPointerUp,D=>{const I=D.target;I.hasPointerCapture(D.pointerId)&&I.releasePointerCapture(D.pointerId),document.body.style.webkitUserSelect=E.current,f.viewport&&(f.viewport.style.scrollBehavior=""),b.current=null})})))}),xk="ScrollAreaThumb",Mye=x.forwardRef((r,e)=>{const{forceMount:t,...n}=r,i=RG(xk,r.__scopeScrollArea);return x.createElement(mn,{present:t||i.hasThumb},x.createElement(Nye,le({ref:e},n)))}),Nye=x.forwardRef((r,e)=>{const{__scopeScrollArea:t,style:n,...i}=r,s=To(xk,t),a=RG(xk,t),{onThumbPositionChange:o}=a,l=it(e,d=>a.onThumbChange(d)),c=x.useRef(),u=bT(()=>{c.current&&(c.current(),c.current=void 0)},100);return x.useEffect(()=>{const d=s.viewport;if(d){const h=()=>{if(u(),!c.current){const f=Bye(d,o);c.current=f,o()}};return o(),d.addEventListener("scroll",h),()=>d.removeEventListener("scroll",h)}},[s.viewport,u,o]),x.createElement(Ge.div,le({"data-state":a.hasThumb?"visible":"hidden"},i,{ref:l,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:_e(r.onPointerDownCapture,d=>{const f=d.target.getBoundingClientRect(),m=d.clientX-f.left,g=d.clientY-f.top;a.onThumbPointerDown({x:m,y:g})}),onPointerUp:_e(r.onPointerUp,a.onThumbPointerUp)}))});function ux(r){return r?parseInt(r,10):0}function IG(r,e){const t=r/e;return isNaN(t)?0:t}function yT(r){const e=IG(r.viewport,r.content),t=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,n=(r.scrollbar.size-t)*e;return Math.max(n,18)}function Fye(r,e,t,n="ltr"){const i=yT(t),s=i/2,a=e||s,o=i-a,l=t.scrollbar.paddingStart+a,c=t.scrollbar.size-t.scrollbar.paddingEnd-o,u=t.content-t.viewport,d=n==="ltr"?[0,u]:[u*-1,0];return $G([l,c],d)(r)}function iF(r,e,t="ltr"){const n=yT(e),i=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=e.scrollbar.size-i,a=e.content-e.viewport,o=s-n,l=t==="ltr"?[0,a]:[a*-1,0],c=ak(r,l);return $G([0,a],[0,o])(c)}function $G(r,e){return t=>{if(r[0]===r[1]||e[0]===e[1])return e[0];const n=(e[1]-e[0])/(r[1]-r[0]);return e[0]+n*(t-r[0])}}function DG(r,e){return r>0&&r<e}const Bye=(r,e=()=>{})=>{let t={left:r.scrollLeft,top:r.scrollTop},n=0;return function i(){const s={left:r.scrollLeft,top:r.scrollTop},a=t.left!==s.left,o=t.top!==s.top;(a||o)&&e(),t=s,n=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(n)};function bT(r,e){const t=Br(r),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(t,e)},[t,e])}function dx(r,e){const t=Br(e);Dr(()=>{let n=0;if(r){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(t)});return i.observe(r),()=>{window.cancelAnimationFrame(n),i.unobserve(r)}}},[r,t])}const Uye=Cye,Wye=kye,Hye=Iye,Vye=Mye,LG=1024;let Gye=0,h_=class{constructor(e,t){this.from=e,this.to=t}};class Tt{constructor(e={}){this.id=Gye++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Mi.match(e)),t=>{let n=e(t);return n===void 0?null:[this,n]}}}Tt.closedBy=new Tt({deserialize:r=>r.split(" ")});Tt.openedBy=new Tt({deserialize:r=>r.split(" ")});Tt.group=new Tt({deserialize:r=>r.split(" ")});Tt.isolate=new Tt({deserialize:r=>{if(r&&r!="rtl"&&r!="ltr"&&r!="auto")throw new RangeError("Invalid value for isolate: "+r);return r||"auto"}});Tt.contextHash=new Tt({perNode:!0});Tt.lookAhead=new Tt({perNode:!0});Tt.mounted=new Tt({perNode:!0});class hx{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Tt.mounted.id]}}const qye=Object.create(null);class Mi{constructor(e,t,n,i=0){this.name=e,this.props=t,this.id=n,this.flags=i}static define(e){let t=e.props&&e.props.length?Object.create(null):qye,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),i=new Mi(e.name||"",t,e.id,n);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(i)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[s[0].id]=s[1]}}return i}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Tt.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let i of n.split(" "))t[i]=e[n];return n=>{for(let i=n.prop(Tt.group),s=-1;s<(i?i.length:0);s++){let a=t[s<0?n.name:i[s]];if(a)return a}}}}Mi.none=new Mi("",Object.create(null),0,8);class _L{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let i=null;for(let s of e){let a=s(n);a&&(i||(i=Object.assign({},n.props)),i[a[0].id]=a[1])}t.push(i?new Mi(n.name,i,n.id,n.flags):n)}return new _L(t)}}const tb=new WeakMap,sF=new WeakMap;var Cn;(function(r){r[r.ExcludeBuffers=1]="ExcludeBuffers",r[r.IncludeAnonymous=2]="IncludeAnonymous",r[r.IgnoreMounts=4]="IgnoreMounts",r[r.IgnoreOverlays=8]="IgnoreOverlays"})(Cn||(Cn={}));class Jr{constructor(e,t,n,i,s){if(this.type=e,this.children=t,this.positions=n,this.length=i,this.props=null,s&&s.length){this.props=Object.create(null);for(let[a,o]of s)this.props[typeof a=="number"?a:a.id]=o}}toString(){let e=hx.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let i=n.toString();i&&(t&&(t+=","),t+=i)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Tk(this.topNode,e)}cursorAt(e,t=0,n=0){let i=tb.get(this)||this.topNode,s=new Tk(i);return s.moveTo(e,t),tb.set(this,s._tree),s}get topNode(){return new ks(this,0,0,null)}resolve(e,t=0){let n=u0(tb.get(this)||this.topNode,e,t,!1);return tb.set(this,n),n}resolveInner(e,t=0){let n=u0(sF.get(this)||this.topNode,e,t,!0);return sF.set(this,n),n}resolveStack(e,t=0){return zye(this,e,t)}iterate(e){let{enter:t,leave:n,from:i=0,to:s=this.length}=e,a=e.mode||0,o=(a&Cn.IncludeAnonymous)>0;for(let l=this.cursor(a|Cn.IncludeAnonymous);;){let c=!1;if(l.from<=s&&l.to>=i&&(!o&&l.type.isAnonymous||t(l)!==!1)){if(l.firstChild())continue;c=!0}for(;c&&n&&(o||!l.type.isAnonymous)&&n(l),!l.nextSibling();){if(!l.parent())return;c=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:kL(Mi.none,this.children,this.positions,0,this.children.length,0,this.length,(t,n,i)=>new Jr(this.type,t,n,i,this.propValues),e.makeTree||((t,n,i)=>new Jr(Mi.none,t,n,i)))}static build(e){return Yye(e)}}Jr.empty=new Jr(Mi.none,[],[],0);class CL{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new CL(this.buffer,this.index)}}class Mc{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Mi.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],i=this.set.types[t],s=i.name;if(/\W/.test(s)&&!i.isError&&(s=JSON.stringify(s)),e+=4,n==e)return s;let a=[];for(;e<n;)a.push(this.childString(e)),e=this.buffer[e+3];return s+"("+a.join(",")+")"}findChild(e,t,n,i,s){let{buffer:a}=this,o=-1;for(let l=e;l!=t&&!(OG(s,i,a[l+1],a[l+2])&&(o=l,n>0));l=a[l+3]);return o}slice(e,t,n){let i=this.buffer,s=new Uint16Array(t-e),a=0;for(let o=e,l=0;o<t;){s[l++]=i[o++],s[l++]=i[o++]-n;let c=s[l++]=i[o++]-n;s[l++]=i[o++]-e,a=Math.max(a,c)}return new Mc(s,a,this.set)}}function OG(r,e,t,n){switch(r){case-2:return t<e;case-1:return n>=e&&t<e;case 0:return t<e&&n>e;case 1:return t<=e&&n>e;case 2:return n>e;case 4:return!0}}function u0(r,e,t,n){for(var i;r.from==r.to||(t<1?r.from>=e:r.from>e)||(t>-1?r.to<=e:r.to<e);){let a=!n&&r instanceof ks&&r.index<0?null:r.parent;if(!a)return r;r=a}let s=n?0:Cn.IgnoreOverlays;if(n)for(let a=r,o=a.parent;o;a=o,o=a.parent)a instanceof ks&&a.index<0&&((i=o.enter(e,t,s))===null||i===void 0?void 0:i.from)!=a.from&&(r=o);for(;;){let a=r.enter(e,t,s);if(!a)return r;r=a}}class PG{cursor(e=0){return new Tk(this,e)}getChild(e,t=null,n=null){let i=aF(this,e,t,n);return i.length?i[0]:null}getChildren(e,t=null,n=null){return aF(this,e,t,n)}resolve(e,t=0){return u0(this,e,t,!1)}resolveInner(e,t=0){return u0(this,e,t,!0)}matchContext(e){return wk(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;for(;t;){let i=t.lastChild;if(!i||i.to!=t.to)break;i.type.isError&&i.from==i.to?(n=t,t=i.prevSibling):t=i}return n}get node(){return this}get next(){return this.parent}}class ks extends PG{constructor(e,t,n,i){super(),this._tree=e,this.from=t,this.index=n,this._parent=i}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,i,s=0){for(let a=this;;){for(let{children:o,positions:l}=a._tree,c=t>0?o.length:-1;e!=c;e+=t){let u=o[e],d=l[e]+a.from;if(OG(i,n,d,d+u.length)){if(u instanceof Mc){if(s&Cn.ExcludeBuffers)continue;let h=u.findChild(0,u.buffer.length,t,n-d,i);if(h>-1)return new mc(new jye(a,u,e,d),null,h)}else if(s&Cn.IncludeAnonymous||!u.type.isAnonymous||RL(u)){let h;if(!(s&Cn.IgnoreMounts)&&(h=hx.get(u))&&!h.overlay)return new ks(h.tree,d,e,a);let f=new ks(u,d,e,a);return s&Cn.IncludeAnonymous||!f.type.isAnonymous?f:f.nextChild(t<0?u.children.length-1:0,t,n,i)}}}if(s&Cn.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let i;if(!(n&Cn.IgnoreOverlays)&&(i=hx.get(this._tree))&&i.overlay){let s=e-this.from;for(let{from:a,to:o}of i.overlay)if((t>0?a<=s:a<s)&&(t<0?o>=s:o>s))return new ks(i.tree,i.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function aF(r,e,t,n){let i=r.cursor(),s=[];if(!i.firstChild())return s;if(t!=null){for(let a=!1;!a;)if(a=i.type.is(t),!i.nextSibling())return s}for(;;){if(n!=null&&i.type.is(n))return s;if(i.type.is(e)&&s.push(i.node),!i.nextSibling())return n==null?s:[]}}function wk(r,e,t=e.length-1){for(let n=r;t>=0;n=n.parent){if(!n)return!1;if(!n.type.isAnonymous){if(e[t]&&e[t]!=n.name)return!1;t--}}return!0}class jye{constructor(e,t,n,i){this.parent=e,this.buffer=t,this.index=n,this.start=i}}class mc extends PG{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.context.start,n);return s<0?null:new mc(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Cn.ExcludeBuffers)return null;let{buffer:i}=this.context,s=i.findChild(this.index+4,i.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return s<0?null:new mc(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new mc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new mc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,i=this.index+4,s=n.buffer[this.index+3];if(s>i){let a=n.buffer[this.index+1];e.push(n.slice(i,s,a)),t.push(0)}return new Jr(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function MG(r){if(!r.length)return null;let e=0,t=r[0];for(let s=1;s<r.length;s++){let a=r[s];(a.from>t.from||a.to<t.to)&&(t=a,e=s)}let n=t instanceof ks&&t.index<0?null:t.parent,i=r.slice();return n?i[e]=n:i.splice(e,1),new Kye(i,t)}class Kye{constructor(e,t){this.heads=e,this.node=t}get next(){return MG(this.heads)}}function zye(r,e,t){let n=r.resolveInner(e,t),i=null;for(let s=n instanceof ks?n:n.context.parent;s;s=s.parent)if(s.index<0){let a=s.parent;(i||(i=[n])).push(a.resolve(e,t)),s=a}else{let a=hx.get(s.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let o=new ks(a.tree,a.overlay[0].from+s.from,-1,s);(i||(i=[n])).push(u0(o,e,t,!1))}}return i?MG(i):n}class Tk{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ks)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let n=e._parent;n;n=n._parent)this.stack.unshift(n.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:n,buffer:i}=this.buffer;return this.type=t||i.set.types[i.buffer[e]],this.from=n+i.buffer[e+1],this.to=n+i.buffer[e+2],!0}yield(e){return e?e instanceof ks?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:i}=this.buffer,s=i.findChild(this.index+4,i.buffer[this.index+3],e,t-this.buffer.start,n);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?n&Cn.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Cn.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Cn.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let i=n<0?0:this.stack[n]+4;if(this.index!=i)return this.yieldBuf(t.findChild(i,this.index,-1,0,4))}else{let i=t.buffer[this.index+3];if(i<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(i)}return n<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:i}=this;if(i){if(e>0){if(this.index<i.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(i.buffer.buffer[s+3]<this.index)return!1;({index:t,parent:n}=i)}else({index:t,_parent:n}=this._tree);for(;n;{index:t,_parent:n}=n)if(t>-1)for(let s=t+e,a=e<0?-1:n._tree.children.length;s!=a;s+=e){let o=n._tree.children[s];if(this.mode&Cn.IncludeAnonymous||o instanceof Mc||!o.type.isAnonymous||RL(o))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let i=this.index,s=this.stack.length;s>=0;){for(let a=e;a;a=a._parent)if(a.index==i){if(i==this.index)return a;t=a,n=s+1;break e}i=this.stack[--s]}for(let i=n;i<this.stack.length;i++)t=new mc(this.buffer,t,this.stack[i]);return this.bufferNode=new mc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let i=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){n++;continue}this.type.isAnonymous||(i=!0)}for(;;){if(i&&t&&t(this),i=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,i=!0}}}matchContext(e){if(!this.buffer)return wk(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let i=e.length-1,s=this.stack.length-1;i>=0;s--){if(s<0)return wk(this._tree,e,i);let a=n[t.buffer[this.stack[s]]];if(!a.isAnonymous){if(e[i]&&e[i]!=a.name)return!1;i--}}return!0}}function RL(r){return r.children.some(e=>e instanceof Mc||!e.type.isAnonymous||RL(e))}function Yye(r){var e;let{buffer:t,nodeSet:n,maxBufferLength:i=LG,reused:s=[],minRepeatType:a=n.types.length}=r,o=Array.isArray(t)?new CL(t,t.length):t,l=n.types,c=0,u=0;function d(S,_,C,k,D,I){let{id:L,start:M,end:F,size:U}=o,W=u,j=c;for(;U<0;)if(o.next(),U==-1){let J=s[L];C.push(J),k.push(M-S);return}else if(U==-3){c=L;return}else if(U==-4){u=L;return}else throw new RangeError(`Unrecognized record size: ${U}`);let z=l[L],Q,V,Y=M-S;if(F-M<=i&&(V=y(o.pos-_,D))){let J=new Uint16Array(V.size-V.skip),ue=o.pos-V.size,ne=J.length;for(;o.pos>ue;)ne=b(V.start,J,ne);Q=new Mc(J,F-V.start,n),Y=V.start-S}else{let J=o.pos-U;o.next();let ue=[],ne=[],ge=L>=a?L:-1,ae=0,ie=F;for(;o.pos>J;)ge>=0&&o.id==ge&&o.size>=0?(o.end<=ie-i&&(m(ue,ne,M,ae,o.end,ie,ge,W,j),ae=ue.length,ie=o.end),o.next()):I>2500?h(M,J,ue,ne):d(M,J,ue,ne,ge,I+1);if(ge>=0&&ae>0&&ae<ue.length&&m(ue,ne,M,ae,M,ie,ge,W,j),ue.reverse(),ne.reverse(),ge>-1&&ae>0){let ee=f(z,j);Q=kL(z,ue,ne,0,ue.length,0,F-M,ee,ee)}else Q=g(z,ue,ne,F-M,W-F,j)}C.push(Q),k.push(Y)}function h(S,_,C,k){let D=[],I=0,L=-1;for(;o.pos>_;){let{id:M,start:F,end:U,size:W}=o;if(W>4)o.next();else{if(L>-1&&F<L)break;L<0&&(L=U-i),D.push(M,F,U),I++,o.next()}}if(I){let M=new Uint16Array(I*4),F=D[D.length-2];for(let U=D.length-3,W=0;U>=0;U-=3)M[W++]=D[U],M[W++]=D[U+1]-F,M[W++]=D[U+2]-F,M[W++]=W;C.push(new Mc(M,D[2]-F,n)),k.push(F-S)}}function f(S,_){return(C,k,D)=>{let I=0,L=C.length-1,M,F;if(L>=0&&(M=C[L])instanceof Jr){if(!L&&M.type==S&&M.length==D)return M;(F=M.prop(Tt.lookAhead))&&(I=k[L]+M.length+F)}return g(S,C,k,D,I,_)}}function m(S,_,C,k,D,I,L,M,F){let U=[],W=[];for(;S.length>k;)U.push(S.pop()),W.push(_.pop()+C-D);S.push(g(n.types[L],U,W,I-D,M-I,F)),_.push(D-C)}function g(S,_,C,k,D,I,L){if(I){let M=[Tt.contextHash,I];L=L?[M].concat(L):[M]}if(D>25){let M=[Tt.lookAhead,D];L=L?[M].concat(L):[M]}return new Jr(S,_,C,k,L)}function y(S,_){let C=o.fork(),k=0,D=0,I=0,L=C.end-i,M={size:0,start:0,skip:0};e:for(let F=C.pos-S;C.pos>F;){let U=C.size;if(C.id==_&&U>=0){M.size=k,M.start=D,M.skip=I,I+=4,k+=4,C.next();continue}let W=C.pos-U;if(U<0||W<F||C.start<L)break;let j=C.id>=a?4:0,z=C.start;for(C.next();C.pos>W;){if(C.size<0)if(C.size==-3)j+=4;else break e;else C.id>=a&&(j+=4);C.next()}D=z,k+=U,I+=j}return(_<0||k==S)&&(M.size=k,M.start=D,M.skip=I),M.size>4?M:void 0}function b(S,_,C){let{id:k,start:D,end:I,size:L}=o;if(o.next(),L>=0&&k<a){let M=C;if(L>4){let F=o.pos-(L-4);for(;o.pos>F;)C=b(S,_,C)}_[--C]=M,_[--C]=I-S,_[--C]=D-S,_[--C]=k}else L==-3?c=k:L==-4&&(u=k);return C}let E=[],w=[];for(;o.pos>0;)d(r.start||0,r.bufferStart||0,E,w,-1,0);let A=(e=r.length)!==null&&e!==void 0?e:E.length?w[0]+E[0].length:0;return new Jr(l[r.topID],E.reverse(),w.reverse(),A)}const oF=new WeakMap;function E1(r,e){if(!r.isAnonymous||e instanceof Mc||e.type!=r)return 1;let t=oF.get(e);if(t==null){t=1;for(let n of e.children){if(n.type!=r||!(n instanceof Jr)){t=1;break}t+=E1(r,n)}oF.set(e,t)}return t}function kL(r,e,t,n,i,s,a,o,l){let c=0;for(let m=n;m<i;m++)c+=E1(r,e[m]);let u=Math.ceil(c*1.5/8),d=[],h=[];function f(m,g,y,b,E){for(let w=y;w<b;){let A=w,S=g[w],_=E1(r,m[w]);for(w++;w<b;w++){let C=E1(r,m[w]);if(_+C>=u)break;_+=C}if(w==A+1){if(_>u){let C=m[A];f(C.children,C.positions,0,C.children.length,g[A]+E);continue}d.push(m[A])}else{let C=g[w-1]+m[w-1].length-S;d.push(kL(r,m,g,A,w,S,C,null,l))}h.push(S+E-s)}}return f(e,t,n,i,0),(o||l)(d,h,a)}class hd{constructor(e,t,n,i,s=!1,a=!1){this.from=e,this.to=t,this.tree=n,this.offset=i,this.open=(s?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],n=!1){let i=[new hd(0,e.length,e,0,!1,n)];for(let s of t)s.to>e.length&&i.push(s);return i}static applyChanges(e,t,n=128){if(!t.length)return e;let i=[],s=1,a=e.length?e[0]:null;for(let o=0,l=0,c=0;;o++){let u=o<t.length?t[o]:null,d=u?u.fromA:1e9;if(d-l>=n)for(;a&&a.from<d;){let h=a;if(l>=h.from||d<=h.to||c){let f=Math.max(h.from,l)-c,m=Math.min(h.to,d)-c;h=f>=m?null:new hd(f,m,h.tree,h.offset+c,o>0,!!u)}if(h&&i.push(h),a.to>d)break;a=s<e.length?e[s++]:null}if(!u)break;l=u.toA,c=u.toA-u.toB}return i}}class NG{startParse(e,t,n){return typeof e=="string"&&(e=new Qye(e)),n=n?n.length?n.map(i=>new h_(i.from,i.to)):[new h_(0,0)]:[new h_(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let i=this.startParse(e,t,n);for(;;){let s=i.advance();if(s)return s}}}class Qye{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Tt({perNode:!0});var lF={};let Xye=class Sk{constructor(e,t,n,i,s,a,o,l,c,u=0,d){this.p=e,this.stack=t,this.state=n,this.reducePos=i,this.pos=s,this.score=a,this.buffer=o,this.bufferBase=l,this.curContext=c,this.lookAhead=u,this.parent=d}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let i=e.parser.context;return new Sk(e,[],t,n,n,0,[],0,i?new cF(i,i.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,i=e&65535,{parser:s}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let o=s.dynamicPrecedence(i);if(o&&(this.score+=o),n==0){this.pushState(s.getGoto(this.state,i,!0),this.reducePos),i<s.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(i,this.reducePos);return}let l=this.stack.length-(n-1)*3-(e&262144?6:0),c=l?this.stack[l-2]:this.p.ranges[0].from,u=this.reducePos-c;u>=2e3&&!(!((t=this.p.parser.nodeSet.types[i])===null||t===void 0)&&t.isAnonymous)&&(c==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=u):this.p.lastBigReductionSize<u&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=c,this.p.lastBigReductionSize=u));let d=l?this.stack[l-1]:0,h=this.bufferBase+this.buffer.length-d;if(i<s.minRepeatTerm||e&131072){let f=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,c,f,h+4,!0)}if(e&262144)this.state=this.stack[l];else{let f=this.stack[l-3];this.state=s.getGoto(f,i,!0)}for(;this.stack.length>l;)this.stack.pop();this.reduceContext(i,c)}storeNode(e,t,n,i=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,o=this.buffer.length;if(o==0&&a.parent&&(o=a.bufferBase-a.parent.bufferBase,a=a.parent),o>0&&a.buffer[o-4]==0&&a.buffer[o-1]>-1){if(t==n)return;if(a.buffer[o-2]>=t){a.buffer[o-2]=n;return}}}if(!s||this.pos==n)this.buffer.push(e,t,n,i);else{let a=this.buffer.length;if(a>0&&this.buffer[a-4]!=0){let o=!1;for(let l=a;l>0&&this.buffer[l-2]>n;l-=4)if(this.buffer[l-1]>=0){o=!0;break}if(o)for(;a>0&&this.buffer[a-2]>n;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,i>4&&(i-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=n,this.buffer[a+3]=i}}shift(e,t,n,i){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=i,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,i,4);else{let s=e,{parser:a}=this.p;(i>this.pos||t<=a.maxNode)&&(this.pos=i,a.stateFlag(s,1)||(this.reducePos=i)),this.pushState(s,n),this.shiftContext(t,n),t<=a.maxNode&&this.buffer.push(t,n,i,4)}}apply(e,t,n,i){e&65536?this.reduce(e):this.shift(e,t,n,i)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let i=this.pos;this.reducePos=this.pos=i+e.length,this.pushState(t,i),this.buffer.push(n,i,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let n=e.buffer.slice(t),i=e.bufferBase+t;for(;e&&i==e.bufferBase;)e=e.parent;return new Sk(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,i,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new Zye(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(n==0)return!1;if(!(n&65536))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let i=[];for(let s=0,a;s<t.length;s+=2)(a=t[s+1])!=this.state&&this.p.parser.hasAction(a,e)&&i.push(t[s],a);if(this.stack.length<120)for(let s=0;i.length<8&&s<t.length;s+=2){let a=t[s+1];i.some((o,l)=>l&1&&o==a)||i.push(t[s],a)}t=i}let n=[];for(let i=0;i<t.length&&n.length<4;i+=2){let s=t[i+1];if(s==this.state)continue;let a=this.split();a.pushState(s,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[i],this.pos),a.reducePos=this.pos,a.score-=200,n.push(a)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(!(t&65536))return!1;if(!e.validAction(this.state,t)){let n=t>>19,i=t&65535,s=this.stack.length-n*3;if(s<0||e.getGoto(this.stack[s],i,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(i,s)=>{if(!t.includes(i))return t.push(i),e.allActions(i,a=>{if(!(a&393216))if(a&65536){let o=(a>>19)-s;if(o>1){let l=a&65535,c=this.stack.length-o*3;if(c>=0&&e.getGoto(this.stack[c],l,!1)>=0)return o<<19|65536|l}}else{let o=n(a,s+1);if(o!=null)return o}})};return n(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new cF(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};class cF{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class Zye{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,n=e>>19;n==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(n-1)*3;let i=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=i}}class fx{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new fx(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new fx(this.stack,this.pos,this.index)}}function rb(r,e=Uint16Array){if(typeof r!="string")return r;let t=null;for(let n=0,i=0;n<r.length;){let s=0;for(;;){let a=r.charCodeAt(n++),o=!1;if(a==126){s=65535;break}a>=92&&a--,a>=34&&a--;let l=a-32;if(l>=46&&(l-=46,o=!0),s+=l,o)break;s*=46}t?t[i++]=s:t=new e(s)}return t}class x1{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const uF=new x1;class Jye{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=uF,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,i=this.rangeIndex,s=this.pos+e;for(;s<n.from;){if(!i)return null;let a=this.ranges[--i];s-=n.from-a.to,n=a}for(;t<0?s>n.to:s>=n.to;){if(i==this.ranges.length-1)return null;let a=this.ranges[++i];s+=a.from-n.to,n=a}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,n,i;if(t>=0&&t<this.chunk.length)n=this.pos+e,i=this.chunk.charCodeAt(t);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(n=s,n>=this.chunk2Pos&&n<this.chunk2Pos+this.chunk2.length)i=this.chunk2.charCodeAt(n-this.chunk2Pos);else{let a=this.rangeIndex,o=this.range;for(;o.to<=n;)o=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=n),n+this.chunk2.length>o.to&&(this.chunk2=this.chunk2.slice(0,o.to-n)),i=this.chunk2.charCodeAt(0)}}return n>=this.token.lookAhead&&(this.token.lookAhead=n+1),i}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(n==null||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=uF,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let i of this.ranges){if(i.from>=t)break;i.to>e&&(n+=this.input.read(Math.max(i.from,e),Math.min(i.to,t)))}return n}}class Rf{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;ebe(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}Rf.prototype.contextual=Rf.prototype.fallback=Rf.prototype.extend=!1;Rf.prototype.fallback=Rf.prototype.extend=!1;function ebe(r,e,t,n,i,s){let a=0,o=1<<n,{dialect:l}=t.p.parser;e:for(;o&r[a];){let c=r[a+1];for(let f=a+3;f<c;f+=2)if((r[f+1]&o)>0){let m=r[f];if(l.allows(m)&&(e.token.value==-1||e.token.value==m||tbe(m,e.token.value,i,s))){e.acceptToken(m);break}}let u=e.next,d=0,h=r[a+2];if(e.next<0&&h>d&&r[c+h*3-3]==65535){a=r[c+h*3-1];continue e}for(;d<h;){let f=d+h>>1,m=c+f+(f<<1),g=r[m],y=r[m+1]||65536;if(u<g)h=f;else if(u>=y)d=f+1;else{a=r[m+2],e.advance();continue e}}break}}function dF(r,e,t){for(let n=e,i;(i=r[n])!=65535;n++)if(i==t)return n-e;return-1}function tbe(r,e,t,n){let i=dF(t,n,e);return i<0||dF(t,n,r)<i}const Qi=typeof process<"u"&&lF&&/\bparse\b/.test(lF.LOG);let f_=null;function hF(r,e,t){let n=r.cursor(Cn.IncludeAnonymous);for(n.moveTo(e);;)if(!(t<0?n.childBefore(e):n.childAfter(e)))for(;;){if((t<0?n.to<e:n.from>e)&&!n.type.isError)return t<0?Math.max(0,Math.min(n.to-1,e-25)):Math.min(r.length,Math.max(n.from+1,e+25));if(t<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return t<0?0:r.length}}class rbe{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?hF(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?hF(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],i=this.index[t];if(i==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=n.children[i],a=this.start[t]+n.positions[i];if(a>e)return this.nextStart=a,null;if(s instanceof Jr){if(a==e){if(a<this.safeFrom)return null;let o=a+s.length;if(o<=this.safeTo){let l=s.prop(Tt.lookAhead);if(!l||o+l<this.fragment.to)return s}}this.index[t]++,a+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+s.length}}}class nbe{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(n=>new x1)}getActions(e){let t=0,n=null,{parser:i}=e.p,{tokenizers:s}=i,a=i.stateSlot(e.state,3),o=e.curContext?e.curContext.hash:0,l=0;for(let c=0;c<s.length;c++){if(!(1<<c&a))continue;let u=s[c],d=this.tokens[c];if(!(n&&!u.fallback)&&((u.contextual||d.start!=e.pos||d.mask!=a||d.context!=o)&&(this.updateCachedToken(d,u,e),d.mask=a,d.context=o),d.lookAhead>d.end+25&&(l=Math.max(d.lookAhead,l)),d.value!=0)){let h=t;if(d.extended>-1&&(t=this.addActions(e,d.extended,d.end,t)),t=this.addActions(e,d.value,d.end,t),!u.extend&&(n=d,t>h))break}}for(;this.actions.length>t;)this.actions.pop();return l&&e.setLookAhead(l),!n&&e.pos==this.stream.end&&(n=new x1,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new x1,{pos:n,p:i}=e;return t.start=n,t.end=Math.min(n+1,i.stream.end),t.value=n==i.stream.end?i.parser.eofTerm:0,t}updateCachedToken(e,t,n){let i=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(i,e),n),e.value>-1){let{parser:s}=n.p;for(let a=0;a<s.specialized.length;a++)if(s.specialized[a]==e.value){let o=s.specializers[a](this.stream.read(e.start,e.end),n);if(o>=0&&n.p.parser.dialect.allows(o>>1)){o&1?e.extended=o>>1:e.value=o>>1;break}}}else e.value=0,e.end=this.stream.clipPos(i+1)}putAction(e,t,n,i){for(let s=0;s<i;s+=3)if(this.actions[s]==e)return i;return this.actions[i++]=e,this.actions[i++]=t,this.actions[i++]=n,i}addActions(e,t,n,i){let{state:s}=e,{parser:a}=e.p,{data:o}=a;for(let l=0;l<2;l++)for(let c=a.stateSlot(s,l?2:1);;c+=3){if(o[c]==65535)if(o[c+1]==1)c=nl(o,c+2);else{i==0&&o[c+1]==2&&(i=this.putAction(nl(o,c+2),t,n,i));break}o[c]==t&&(i=this.putAction(nl(o,c+1),t,n,i))}return i}}class ibe{constructor(e,t,n,i){this.parser=e,this.input=t,this.ranges=i,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Jye(t,i),this.tokens=new nbe(e,this.stream),this.topTerm=e.top[1];let{from:s}=i[0];this.stacks=[Xye.start(this,e.top[0],s)],this.fragments=n.length&&this.stream.end-s>e.bufferLength*4?new rbe(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,n=this.stacks=[],i,s;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let o=e[a];for(;;){if(this.tokens.mainToken=null,o.pos>t)n.push(o);else{if(this.advanceStack(o,n,e))continue;{i||(i=[],s=[]),i.push(o);let l=this.tokens.getMainToken(o);s.push(l.value,l.end)}}break}}if(!n.length){let a=i&&abe(i);if(a)return Qi&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw Qi&&i&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&i){let a=this.stoppedAt!=null&&i[0].pos>this.stoppedAt?i[0]:this.runRecovery(i,s,n);if(a)return Qi&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(n.length>a)for(n.sort((o,l)=>l.score-o.score);n.length>a;)n.pop();n.some(o=>o.reducePos>t)&&this.recovering--}else if(n.length>1){e:for(let a=0;a<n.length-1;a++){let o=n[a];for(let l=a+1;l<n.length;l++){let c=n[l];if(o.sameState(c)||o.buffer.length>500&&c.buffer.length>500)if((o.score-c.score||o.buffer.length-c.buffer.length)>0)n.splice(l--,1);else{n.splice(a--,1);continue e}}}n.length>12&&n.splice(12,n.length-12)}this.minStackPos=n[0].pos;for(let a=1;a<n.length;a++)n[a].pos<this.minStackPos&&(this.minStackPos=n[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let i=e.pos,{parser:s}=this,a=Qi?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&i>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let c=e.curContext&&e.curContext.tracker.strict,u=c?e.curContext.hash:0;for(let d=this.fragments.nodeAt(i);d;){let h=this.parser.nodeSet.types[d.type.id]==d.type?s.getGoto(e.state,d.type.id):-1;if(h>-1&&d.length&&(!c||(d.prop(Tt.contextHash)||0)==u))return e.useNode(d,h),Qi&&console.log(a+this.stackID(e)+` (via reuse of ${s.getName(d.type.id)})`),!0;if(!(d instanceof Jr)||d.children.length==0||d.positions[0]>0)break;let f=d.children[0];if(f instanceof Jr&&d.positions[0]==0)d=f;else break}}let o=s.stateSlot(e.state,4);if(o>0)return e.reduce(o),Qi&&console.log(a+this.stackID(e)+` (via always-reduce ${s.getName(o&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let l=this.tokens.getActions(e);for(let c=0;c<l.length;){let u=l[c++],d=l[c++],h=l[c++],f=c==l.length||!n,m=f?e:e.split(),g=this.tokens.mainToken;if(m.apply(u,d,g?g.start:m.pos,h),Qi&&console.log(a+this.stackID(m)+` (via ${u&65536?`reduce of ${s.getName(u&65535)}`:"shift"} for ${s.getName(d)} @ ${i}${m==e?"":", split"})`),f)return!0;m.pos>i?t.push(m):n.push(m)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return fF(e,t),!0}}runRecovery(e,t,n){let i=null,s=!1;for(let a=0;a<e.length;a++){let o=e[a],l=t[a<<1],c=t[(a<<1)+1],u=Qi?this.stackID(o)+" -> ":"";if(o.deadEnd&&(s||(s=!0,o.restart(),Qi&&console.log(u+this.stackID(o)+" (restarted)"),this.advanceFully(o,n))))continue;let d=o.split(),h=u;for(let f=0;d.forceReduce()&&f<10&&(Qi&&console.log(h+this.stackID(d)+" (via force-reduce)"),!this.advanceFully(d,n));f++)Qi&&(h=this.stackID(d)+" -> ");for(let f of o.recoverByInsert(l))Qi&&console.log(u+this.stackID(f)+" (via recover-insert)"),this.advanceFully(f,n);this.stream.end>o.pos?(c==o.pos&&(c++,l=0),o.recoverByDelete(l,c),Qi&&console.log(u+this.stackID(o)+` (via recover-delete ${this.parser.getName(l)})`),fF(o,n)):(!i||i.score<o.score)&&(i=o)}return i}stackToTree(e){return e.close(),Jr.build({buffer:fx.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(f_||(f_=new WeakMap)).get(e);return t||f_.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function fF(r,e){for(let t=0;t<e.length;t++){let n=e[t];if(n.pos==r.pos&&n.sameState(r)){e[t].score<r.score&&(e[t]=r);return}}e.push(r)}class sbe{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||this.disabled[e]==0}}class px extends NG{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let o=0;o<e.repeatNodeCount;o++)t.push("");let n=Object.keys(e.topRules).map(o=>e.topRules[o][1]),i=[];for(let o=0;o<t.length;o++)i.push([]);function s(o,l,c){i[o].push([l,l.deserialize(String(c))])}if(e.nodeProps)for(let o of e.nodeProps){let l=o[0];typeof l=="string"&&(l=Tt[l]);for(let c=1;c<o.length;){let u=o[c++];if(u>=0)s(u,l,o[c++]);else{let d=o[c+-u];for(let h=-u;h>0;h--)s(o[c++],l,d);c++}}}this.nodeSet=new _L(t.map((o,l)=>Mi.define({name:l>=this.minRepeatTerm?void 0:o,id:l,props:i[l],top:n.indexOf(l)>-1,error:l==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(l)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=LG;let a=rb(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let o=0;o<this.specializerSpecs.length;o++)this.specialized[o]=this.specializerSpecs[o].term;this.specializers=this.specializerSpecs.map(pF),this.states=rb(e.states,Uint32Array),this.data=rb(e.stateData),this.goto=rb(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(o=>typeof o=="number"?new Rf(a,o):o),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let i=new ibe(this,e,t,n);for(let s of this.wrappers)i=s(i,e,t,n);return i}getGoto(e,t,n=!1){let i=this.goto;if(t>=i[0])return-1;for(let s=i[t+1];;){let a=i[s++],o=a&1,l=i[s++];if(o&&n)return l;for(let c=s+(a>>1);s<c;s++)if(i[s]==e)return l;if(o)return-1}}hasAction(e,t){let n=this.data;for(let i=0;i<2;i++)for(let s=this.stateSlot(e,i?2:1),a;;s+=3){if((a=n[s])==65535)if(n[s+1]==1)a=n[s=nl(n,s+2)];else{if(n[s+1]==2)return nl(n,s+2);break}if(a==t||a==0)return nl(n,s+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,n=>n==t?!0:null)}allActions(e,t){let n=this.stateSlot(e,4),i=n?t(n):void 0;for(let s=this.stateSlot(e,1);i==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=nl(this.data,s+2);else break;i=t(nl(this.data,s+1))}return i}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(this.data[n]==65535)if(this.data[n+1]==1)n=nl(this.data,n+2);else break;if(!(this.data[n+2]&1)){let i=this.data[n+1];t.some((s,a)=>a&1&&s==i)||t.push(this.data[n],i)}}return t}configure(e){let t=Object.assign(Object.create(px.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(n=>{let i=e.tokenizers.find(s=>s.from==n);return i?i.to:n})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((n,i)=>{let s=e.specializers.find(o=>o.from==n.external);if(!s)return n;let a=Object.assign(Object.assign({},n),{external:s.to});return t.specializers[i]=pF(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map(()=>!1);if(e)for(let s of e.split(" ")){let a=t.indexOf(s);a>=0&&(n[a]=!0)}let i=null;for(let s=0;s<t.length;s++)if(!n[s])for(let a=this.dialects[t[s]],o;(o=this.data[a++])!=65535;)(i||(i=new Uint8Array(this.maxTerm+1)))[o]=1;return new sbe(e,n,i)}static deserialize(e){return new px(e)}}function nl(r,e){return r[e]|r[e+1]<<16}function abe(r){let e=null;for(let t of r){let n=t.p.stoppedAt;(t.pos==t.p.stream.end||n!=null&&t.pos>n)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function pF(r){if(r.external){let e=r.extend?1:0;return(t,n)=>r.external(t,n)<<1|e}return r.get}let obe=0,il=class Ak{constructor(e,t,n,i){this.name=e,this.set=t,this.base=n,this.modified=i,this.id=obe++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n=typeof e=="string"?e:"?";if(e instanceof Ak&&(t=e),t?.base)throw new Error("Can not derive from a modified tag");let i=new Ak(n,[],null,[]);if(i.set.push(i),t)for(let s of t.set)i.set.push(s);return i}static defineModifier(e){let t=new mx(e);return n=>n.modified.indexOf(t)>-1?n:mx.get(n.base||n,n.modified.concat(t).sort((i,s)=>i.id-s.id))}},lbe=0;class mx{constructor(e){this.name=e,this.instances=[],this.id=lbe++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find(o=>o.base==e&&cbe(t,o.modified));if(n)return n;let i=[],s=new il(e.name,i,e,t);for(let o of t)o.instances.push(s);let a=ube(t);for(let o of e.set)if(!o.modified.length)for(let l of a)i.push(mx.get(o,l));return s}}function cbe(r,e){return r.length==e.length&&r.every((t,n)=>t==e[n])}function ube(r){let e=[[]];for(let t=0;t<r.length;t++)for(let n=0,i=e.length;n<i;n++)e.push(e[n].concat(r[t]));return e.sort((t,n)=>n.length-t.length)}function FG(r){let e=Object.create(null);for(let t in r){let n=r[t];Array.isArray(n)||(n=[n]);for(let i of t.split(" "))if(i){let s=[],a=2,o=i;for(let d=0;;){if(o=="..."&&d>0&&d+3==i.length){a=1;break}let h=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!h)throw new RangeError("Invalid path: "+i);if(s.push(h[0]=="*"?"":h[0][0]=='"'?JSON.parse(h[0]):h[0]),d+=h[0].length,d==i.length)break;let f=i[d++];if(d==i.length&&f=="!"){a=0;break}if(f!="/")throw new RangeError("Invalid path: "+i);o=i.slice(d)}let l=s.length-1,c=s[l];if(!c)throw new RangeError("Invalid path: "+i);let u=new gx(n,a,l>0?s.slice(0,l):null);e[c]=u.sort(e[c])}}return BG.add(e)}const BG=new Tt;class gx{constructor(e,t,n,i){this.tags=e,this.mode=t,this.context=n,this.next=i}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}gx.empty=new gx([],2,null);function UG(r,e){let t=Object.create(null);for(let s of r)if(!Array.isArray(s.tag))t[s.tag.id]=s.class;else for(let a of s.tag)t[a.id]=s.class;let{scope:n,all:i=null}=e||{};return{style:s=>{let a=i;for(let o of s)for(let l of o.set){let c=t[l.id];if(c){a=a?a+" "+c:c;break}}return a},scope:n}}function dbe(r,e){let t=null;for(let n of r){let i=n.style(e);i&&(t=t?t+" "+i:i)}return t}function hbe(r,e,t,n=0,i=r.length){let s=new fbe(n,Array.isArray(e)?e:[e],t);s.highlightRange(r.cursor(),n,i,"",s.highlighters),s.flush(i)}class fbe{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,i,s){let{type:a,from:o,to:l}=e;if(o>=n||l<=t)return;a.isTop&&(s=this.highlighters.filter(f=>!f.scope||f.scope(a)));let c=i,u=pbe(e)||gx.empty,d=dbe(s,u.tags);if(d&&(c&&(c+=" "),c+=d,u.mode==1&&(i+=(i?" ":"")+d)),this.startSpan(Math.max(t,o),c),u.opaque)return;let h=e.tree&&e.tree.prop(Tt.mounted);if(h&&h.overlay){let f=e.node.enter(h.overlay[0].from+o,1),m=this.highlighters.filter(y=>!y.scope||y.scope(h.tree.type)),g=e.firstChild();for(let y=0,b=o;;y++){let E=y<h.overlay.length?h.overlay[y]:null,w=E?E.from+o:l,A=Math.max(t,b),S=Math.min(n,w);if(A<S&&g)for(;e.from<S&&(this.highlightRange(e,A,S,i,s),this.startSpan(Math.min(S,e.to),c),!(e.to>=w||!e.nextSibling())););if(!E||w>n)break;b=E.to+o,b>t&&(this.highlightRange(f.cursor(),Math.max(t,E.from+o),Math.min(n,b),"",m),this.startSpan(Math.min(n,b),c))}g&&e.parent()}else if(e.firstChild()){h&&(i="");do if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,i,s),this.startSpan(Math.min(n,e.to),c)}while(e.nextSibling());e.parent()}}}function pbe(r){let e=r.type.prop(BG);for(;e&&e.context&&!r.matchContext(e.context);)e=e.next;return e||null}const $e=il.define,nb=$e(),tc=$e(),mF=$e(tc),gF=$e(tc),rc=$e(),ib=$e(rc),p_=$e(rc),$a=$e(),uu=$e($a),Ta=$e(),Sa=$e(),_k=$e(),gm=$e(_k),sb=$e(),fe={comment:nb,lineComment:$e(nb),blockComment:$e(nb),docComment:$e(nb),name:tc,variableName:$e(tc),typeName:mF,tagName:$e(mF),propertyName:gF,attributeName:$e(gF),className:$e(tc),labelName:$e(tc),namespace:$e(tc),macroName:$e(tc),literal:rc,string:ib,docString:$e(ib),character:$e(ib),attributeValue:$e(ib),number:p_,integer:$e(p_),float:$e(p_),bool:$e(rc),regexp:$e(rc),escape:$e(rc),color:$e(rc),url:$e(rc),keyword:Ta,self:$e(Ta),null:$e(Ta),atom:$e(Ta),unit:$e(Ta),modifier:$e(Ta),operatorKeyword:$e(Ta),controlKeyword:$e(Ta),definitionKeyword:$e(Ta),moduleKeyword:$e(Ta),operator:Sa,derefOperator:$e(Sa),arithmeticOperator:$e(Sa),logicOperator:$e(Sa),bitwiseOperator:$e(Sa),compareOperator:$e(Sa),updateOperator:$e(Sa),definitionOperator:$e(Sa),typeOperator:$e(Sa),controlOperator:$e(Sa),punctuation:_k,separator:$e(_k),bracket:gm,angleBracket:$e(gm),squareBracket:$e(gm),paren:$e(gm),brace:$e(gm),content:$a,heading:uu,heading1:$e(uu),heading2:$e(uu),heading3:$e(uu),heading4:$e(uu),heading5:$e(uu),heading6:$e(uu),contentSeparator:$e($a),list:$e($a),quote:$e($a),emphasis:$e($a),strong:$e($a),link:$e($a),monospace:$e($a),strikethrough:$e($a),inserted:$e(),deleted:$e(),changed:$e(),invalid:$e(),meta:sb,documentMeta:$e(sb),annotation:$e(sb),processingInstruction:$e(sb),definition:il.defineModifier("definition"),constant:il.defineModifier("constant"),function:il.defineModifier("function"),standard:il.defineModifier("standard"),local:il.defineModifier("local"),special:il.defineModifier("special")};for(let r in fe){let e=fe[r];e instanceof il&&(e.name=r)}UG([{tag:fe.link,class:"tok-link"},{tag:fe.heading,class:"tok-heading"},{tag:fe.emphasis,class:"tok-emphasis"},{tag:fe.strong,class:"tok-strong"},{tag:fe.keyword,class:"tok-keyword"},{tag:fe.atom,class:"tok-atom"},{tag:fe.bool,class:"tok-bool"},{tag:fe.url,class:"tok-url"},{tag:fe.labelName,class:"tok-labelName"},{tag:fe.inserted,class:"tok-inserted"},{tag:fe.deleted,class:"tok-deleted"},{tag:fe.literal,class:"tok-literal"},{tag:fe.string,class:"tok-string"},{tag:fe.number,class:"tok-number"},{tag:[fe.regexp,fe.escape,fe.special(fe.string)],class:"tok-string2"},{tag:fe.variableName,class:"tok-variableName"},{tag:fe.local(fe.variableName),class:"tok-variableName tok-local"},{tag:fe.definition(fe.variableName),class:"tok-variableName tok-definition"},{tag:fe.special(fe.variableName),class:"tok-variableName2"},{tag:fe.definition(fe.propertyName),class:"tok-propertyName tok-definition"},{tag:fe.typeName,class:"tok-typeName"},{tag:fe.namespace,class:"tok-namespace"},{tag:fe.className,class:"tok-className"},{tag:fe.macroName,class:"tok-macroName"},{tag:fe.propertyName,class:"tok-propertyName"},{tag:fe.operator,class:"tok-operator"},{tag:fe.comment,class:"tok-comment"},{tag:fe.meta,class:"tok-meta"},{tag:fe.invalid,class:"tok-invalid"},{tag:fe.punctuation,class:"tok-punctuation"}]);const mbe=FG({String:fe.string,Number:fe.number,"True False":fe.bool,PropertyName:fe.propertyName,Null:fe.null,", :":fe.separator,"[ ]":fe.squareBracket,"{ }":fe.brace}),gbe=px.deserialize({version:14,states:"$bOVQPOOOOQO'#Cb'#CbOnQPO'#CeOvQPO'#ClOOQO'#Cr'#CrQOQPOOOOQO'#Cg'#CgO}QPO'#CfO!SQPO'#CtOOQO,59P,59PO![QPO,59PO!aQPO'#CuOOQO,59W,59WO!iQPO,59WOVQPO,59QOqQPO'#CmO!nQPO,59`OOQO1G.k1G.kOVQPO'#CnO!vQPO,59aOOQO1G.r1G.rOOQO1G.l1G.lOOQO,59X,59XOOQO-E6k-E6kOOQO,59Y,59YOOQO-E6l-E6l",stateData:"#O~OeOS~OQSORSOSSOTSOWQO_ROgPO~OVXOgUO~O^[O~PVO[^O~O]_OVhX~OVaO~O]bO^iX~O^dO~O]_OVha~O]bO^ia~O",goto:"!kjPPPPPPkPPkqwPPPPk{!RPPP!XP!e!hXSOR^bQWQRf_TVQ_Q`WRg`QcZRicQTOQZRQe^RhbRYQR]R",nodeNames:"⚠ JsonText True False Null Number String } { Object Property PropertyName : , ] [ Array",maxTerm:25,nodeProps:[["isolate",-2,6,11,""],["openedBy",7,"{",14,"["],["closedBy",8,"}",15,"]"]],propSources:[mbe],skippedNodes:[0],repeatNodeCount:2,tokenData:"(|~RaXY!WYZ!W]^!Wpq!Wrs!]|}$u}!O$z!Q!R%T!R![&c![!]&t!}#O&y#P#Q'O#Y#Z'T#b#c'r#h#i(Z#o#p(r#q#r(w~!]Oe~~!`Wpq!]qr!]rs!xs#O!]#O#P!}#P;'S!];'S;=`$o<%lO!]~!}Og~~#QXrs!]!P!Q!]#O#P!]#U#V!]#Y#Z!]#b#c!]#f#g!]#h#i!]#i#j#m~#pR!Q![#y!c!i#y#T#Z#y~#|R!Q![$V!c!i$V#T#Z$V~$YR!Q![$c!c!i$c#T#Z$c~$fR!Q![!]!c!i!]#T#Z!]~$rP;=`<%l!]~$zO]~~$}Q!Q!R%T!R![&c~%YRT~!O!P%c!g!h%w#X#Y%w~%fP!Q![%i~%nRT~!Q![%i!g!h%w#X#Y%w~%zR{|&T}!O&T!Q![&Z~&WP!Q![&Z~&`PT~!Q![&Z~&hST~!O!P%c!Q![&c!g!h%w#X#Y%w~&yO[~~'OO_~~'TO^~~'WP#T#U'Z~'^P#`#a'a~'dP#g#h'g~'jP#X#Y'm~'rOR~~'uP#i#j'x~'{P#`#a(O~(RP#`#a(U~(ZOS~~(^P#f#g(a~(dP#i#j(g~(jP#X#Y(m~(rOQ~~(wOW~~(|OV~",tokenizers:[0],topRules:{JsonText:[0,1]},tokenPrec:0});let Ck=[],WG=[];(()=>{let r="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<r.length;e++)(e%2?WG:Ck).push(t=t+r[e])})();function vbe(r){if(r<768)return!1;for(let e=0,t=Ck.length;;){let n=e+t>>1;if(r<Ck[n])t=n;else if(r>=WG[n])e=n+1;else return!0;if(e==t)return!1}}function vF(r){return r>=127462&&r<=127487}const yF=8205;function ybe(r,e,t=!0,n=!0){return(t?HG:bbe)(r,e,n)}function HG(r,e,t){if(e==r.length)return e;e&&VG(r.charCodeAt(e))&&GG(r.charCodeAt(e-1))&&e--;let n=m_(r,e);for(e+=bF(n);e<r.length;){let i=m_(r,e);if(n==yF||i==yF||t&&vbe(i))e+=bF(i),n=i;else if(vF(i)){let s=0,a=e-2;for(;a>=0&&vF(m_(r,a));)s++,a-=2;if(s%2==0)break;e+=2}else break}return e}function bbe(r,e,t){for(;e>0;){let n=HG(r,e-2,t);if(n<e)return n;e--}return 0}function m_(r,e){let t=r.charCodeAt(e);if(!GG(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return VG(n)?(t-55296<<10)+(n-56320)+65536:t}function VG(r){return r>=56320&&r<57344}function GG(r){return r>=55296&&r<56320}function bF(r){return r<65536?1:2}let Bt=class qG{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=rp(this,e,t);let i=[];return this.decompose(0,e,i,2),n.length&&n.decompose(0,n.length,i,3),this.decompose(t,this.length,i,1),Ka.from(i,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=rp(this,e,t);let n=[];return this.decompose(e,t,n,0),Ka.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),i=new $g(this),s=new $g(e);for(let a=t,o=t;;){if(i.next(a),s.next(a),a=0,i.lineBreak!=s.lineBreak||i.done!=s.done||i.value!=s.value)return!1;if(o+=i.value.length,i.done||o>=n)return!0}}iter(e=1){return new $g(this,e)}iterRange(e,t=this.length){return new jG(this,e,t)}iterLines(e,t){let n;if(e==null)n=this.iter();else{t==null&&(t=this.lines+1);let i=this.line(e).from;n=this.iterRange(i,Math.max(i,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new KG(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?qG.empty:e.length<=32?new Fr(e):Ka.from(Fr.split(e,[]))}};class Fr extends Bt{constructor(e,t=Ebe(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,i){for(let s=0;;s++){let a=this.text[s],o=i+a.length;if((t?n:o)>=e)return new xbe(i,o,n,a);i=o+1,n++}}decompose(e,t,n,i){let s=e<=0&&t>=this.length?this:new Fr(EF(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(i&1){let a=n.pop(),o=w1(s.text,a.text.slice(),0,s.length);if(o.length<=32)n.push(new Fr(o,a.length+s.length));else{let l=o.length>>1;n.push(new Fr(o.slice(0,l)),new Fr(o.slice(l)))}}else n.push(s)}replace(e,t,n){if(!(n instanceof Fr))return super.replace(e,t,n);[e,t]=rp(this,e,t);let i=w1(this.text,w1(n.text,EF(this.text,0,e)),t),s=this.length+n.length-(t-e);return i.length<=32?new Fr(i,s):Ka.from(Fr.split(i,[]),s)}sliceString(e,t=this.length,n=`
`){[e,t]=rp(this,e,t);let i="";for(let s=0,a=0;s<=t&&a<this.text.length;a++){let o=this.text[a],l=s+o.length;s>e&&a&&(i+=n),e<l&&t>s&&(i+=o.slice(Math.max(0,e-s),t-s)),s=l+1}return i}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],i=-1;for(let s of e)n.push(s),i+=s.length+1,n.length==32&&(t.push(new Fr(n,i)),n=[],i=-1);return i>-1&&t.push(new Fr(n,i)),t}}class Ka extends Bt{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,i){for(let s=0;;s++){let a=this.children[s],o=i+a.length,l=n+a.lines-1;if((t?l:o)>=e)return a.lineInner(e,t,n,i);i=o+1,n=l+1}}decompose(e,t,n,i){for(let s=0,a=0;a<=t&&s<this.children.length;s++){let o=this.children[s],l=a+o.length;if(e<=l&&t>=a){let c=i&((a<=e?1:0)|(l>=t?2:0));a>=e&&l<=t&&!c?n.push(o):o.decompose(e-a,t-a,n,c)}a=l+1}}replace(e,t,n){if([e,t]=rp(this,e,t),n.lines<this.lines)for(let i=0,s=0;i<this.children.length;i++){let a=this.children[i],o=s+a.length;if(e>=s&&t<=o){let l=a.replace(e-s,t-s,n),c=this.lines-a.lines+l.lines;if(l.lines<c>>4&&l.lines>c>>6){let u=this.children.slice();return u[i]=l,new Ka(u,this.length-(t-e)+n.length)}return super.replace(s,o,l)}s=o+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n=`
`){[e,t]=rp(this,e,t);let i="";for(let s=0,a=0;s<this.children.length&&a<=t;s++){let o=this.children[s],l=a+o.length;a>e&&s&&(i+=n),e<l&&t>a&&(i+=o.sliceString(e-a,t-a,n)),a=l+1}return i}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Ka))return 0;let n=0,[i,s,a,o]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;i+=t,s+=t){if(i==a||s==o)return n;let l=this.children[i],c=e.children[s];if(l!=c)return n+l.scanIdentical(c,t);n+=l.length+1}}static from(e,t=e.reduce((n,i)=>n+i.length+1,-1)){let n=0;for(let f of e)n+=f.lines;if(n<32){let f=[];for(let m of e)m.flatten(f);return new Fr(f,t)}let i=Math.max(32,n>>5),s=i<<1,a=i>>1,o=[],l=0,c=-1,u=[];function d(f){let m;if(f.lines>s&&f instanceof Ka)for(let g of f.children)d(g);else f.lines>a&&(l>a||!l)?(h(),o.push(f)):f instanceof Fr&&l&&(m=u[u.length-1])instanceof Fr&&f.lines+m.lines<=32?(l+=f.lines,c+=f.length+1,u[u.length-1]=new Fr(m.text.concat(f.text),m.length+1+f.length)):(l+f.lines>i&&h(),l+=f.lines,c+=f.length+1,u.push(f))}function h(){l!=0&&(o.push(u.length==1?u[0]:Ka.from(u,c)),c=-1,l=u.length=0)}for(let f of e)d(f);return h(),o.length==1?o[0]:new Ka(o,t)}}Bt.empty=new Fr([""],0);function Ebe(r){let e=-1;for(let t of r)e+=t.length+1;return e}function w1(r,e,t=0,n=1e9){for(let i=0,s=0,a=!0;s<r.length&&i<=n;s++){let o=r[s],l=i+o.length;l>=t&&(l>n&&(o=o.slice(0,n-i)),i<t&&(o=o.slice(t-i)),a?(e[e.length-1]+=o,a=!1):e.push(o)),i=l+1}return e}function EF(r,e,t){return w1(r,[""],e,t)}class $g{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Fr?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,i=this.nodes[n],s=this.offsets[n],a=s>>1,o=i instanceof Fr?i.text.length:i.children.length;if(a==(t>0?o:0)){if(n==0)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(t>0?0:1)){if(this.offsets[n]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(i instanceof Fr){let l=i.text[a+(t<0?-1:0)];if(this.offsets[n]+=t,l.length>Math.max(0,e))return this.value=e==0?l:t>0?l.slice(e):l.slice(0,l.length-e),this;e-=l.length}else{let l=i.children[a+(t<0?-1:0)];e>l.length?(e-=l.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(l),this.offsets.push(t>0?1:(l instanceof Fr?l.text.length:l.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class jG{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new $g(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:i}=this.cursor.next(e);return this.pos+=(i.length+e)*t,this.value=i.length<=n?i:t<0?i.slice(i.length-n):i.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class KG{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:i}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=i,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Bt.prototype[Symbol.iterator]=function(){return this.iter()},$g.prototype[Symbol.iterator]=jG.prototype[Symbol.iterator]=KG.prototype[Symbol.iterator]=function(){return this});class xbe{constructor(e,t,n,i){this.from=e,this.to=t,this.number=n,this.text=i}get length(){return this.to-this.from}}function rp(r,e,t){return e=Math.max(0,Math.min(r.length,e)),[e,Math.max(e,Math.min(r.length,t))]}function qn(r,e,t=!0,n=!0){return ybe(r,e,t,n)}function wbe(r){return r>=56320&&r<57344}function Tbe(r){return r>=55296&&r<56320}function ki(r,e){let t=r.charCodeAt(e);if(!Tbe(t)||e+1==r.length)return t;let n=r.charCodeAt(e+1);return wbe(n)?(t-55296<<10)+(n-56320)+65536:t}function IL(r){return r<=65535?String.fromCharCode(r):(r-=65536,String.fromCharCode((r>>10)+55296,(r&1023)+56320))}function za(r){return r<65536?1:2}const Rk=/\r\n?|\n/;var hi=function(r){return r[r.Simple=0]="Simple",r[r.TrackDel=1]="TrackDel",r[r.TrackBefore=2]="TrackBefore",r[r.TrackAfter=3]="TrackAfter",r}(hi||(hi={}));class ao{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,i=0;t<this.sections.length;){let s=this.sections[t++],a=this.sections[t++];a<0?(e(n,i,s),i+=s):i+=a,n+=s}}iterChangedRanges(e,t=!1){kk(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];i<0?e.push(n,i):e.push(i,n)}return new ao(e)}composeDesc(e){return this.empty?e:e.empty?this:zG(this,e)}mapDesc(e,t=!1){return e.empty?this:Ik(this,e,t)}mapPos(e,t=-1,n=hi.Simple){let i=0,s=0;for(let a=0;a<this.sections.length;){let o=this.sections[a++],l=this.sections[a++],c=i+o;if(l<0){if(c>e)return s+(e-i);s+=o}else{if(n!=hi.Simple&&c>=e&&(n==hi.TrackDel&&i<e&&c>e||n==hi.TrackBefore&&i<e||n==hi.TrackAfter&&c>e))return null;if(c>e||c==e&&t<0&&!o)return e==i||t<0?s:s+l;s+=l}i=c}if(e>i)throw new RangeError(`Position ${e} is out of range for changeset of length ${i}`);return s}touchesRange(e,t=e){for(let n=0,i=0;n<this.sections.length&&i<=t;){let s=this.sections[n++],a=this.sections[n++],o=i+s;if(a>=0&&i<=t&&o>=e)return i<e&&o>t?"cover":!0;i=o}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],i=this.sections[t++];e+=(e?" ":"")+n+(i>=0?":"+i:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ao(e)}static create(e){return new ao(e)}}class un extends ao{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kk(this,(t,n,i,s,a)=>e=e.replace(i,i+(n-t),a),!1),e}mapDesc(e,t=!1){return Ik(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let i=0,s=0;i<t.length;i+=2){let a=t[i],o=t[i+1];if(o>=0){t[i]=o,t[i+1]=a;let l=i>>1;for(;n.length<l;)n.push(Bt.empty);n.push(a?e.slice(s,s+a):Bt.empty)}s+=a}return new un(t,n)}compose(e){return this.empty?e:e.empty?this:zG(this,e,!0)}map(e,t=!1){return e.empty?this:Ik(this,e,t,!0)}iterChanges(e,t=!1){kk(this,e,t)}get desc(){return ao.create(this.sections)}filter(e){let t=[],n=[],i=[],s=new d0(this);e:for(let a=0,o=0;;){let l=a==e.length?1e9:e[a++];for(;o<l||o==l&&s.len==0;){if(s.done)break e;let u=Math.min(s.len,l-o);ri(i,u,-1);let d=s.ins==-1?-1:s.off==0?s.ins:0;ri(t,u,d),d>0&&gc(n,t,s.text),s.forward(u),o+=u}let c=e[a++];for(;o<c;){if(s.done)break e;let u=Math.min(s.len,c-o);ri(t,u,-1),ri(i,u,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(u),o+=u}}return{changes:new un(t,n),filtered:ao.create(i)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],i=this.sections[t+1];i<0?e.push(n):i==0?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let i=[],s=[],a=0,o=null;function l(u=!1){if(!u&&!i.length)return;a<t&&ri(i,t-a,-1);let d=new un(i,s);o=o?o.compose(d.map(o)):d,i=[],s=[],a=0}function c(u){if(Array.isArray(u))for(let d of u)c(d);else if(u instanceof un){if(u.length!=t)throw new RangeError(`Mismatched change set length (got ${u.length}, expected ${t})`);l(),o=o?o.compose(u.map(o)):u}else{let{from:d,to:h=d,insert:f}=u;if(d>h||d<0||h>t)throw new RangeError(`Invalid change range ${d} to ${h} (in doc of length ${t})`);let m=f?typeof f=="string"?Bt.of(f.split(n||Rk)):f:Bt.empty,g=m.length;if(d==h&&g==0)return;d<a&&l(),d>a&&ri(i,d-a,-1),ri(i,h-d,g),gc(s,i,m),a=h}}return c(e),l(!o),o}static empty(e){return new un(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let i=0;i<e.length;i++){let s=e[i];if(typeof s=="number")t.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((a,o)=>o&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)t.push(s[0],0);else{for(;n.length<i;)n.push(Bt.empty);n[i]=Bt.of(s.slice(1)),t.push(s[0],n[i].length)}}}return new un(t,n)}static createSet(e,t){return new un(e,t)}}function ri(r,e,t,n=!1){if(e==0&&t<=0)return;let i=r.length-2;i>=0&&t<=0&&t==r[i+1]?r[i]+=e:i>=0&&e==0&&r[i]==0?r[i+1]+=t:n?(r[i]+=e,r[i+1]+=t):r.push(e,t)}function gc(r,e,t){if(t.length==0)return;let n=e.length-2>>1;if(n<r.length)r[r.length-1]=r[r.length-1].append(t);else{for(;r.length<n;)r.push(Bt.empty);r.push(t)}}function kk(r,e,t){let n=r.inserted;for(let i=0,s=0,a=0;a<r.sections.length;){let o=r.sections[a++],l=r.sections[a++];if(l<0)i+=o,s+=o;else{let c=i,u=s,d=Bt.empty;for(;c+=o,u+=l,l&&n&&(d=d.append(n[a-2>>1])),!(t||a==r.sections.length||r.sections[a+1]<0);)o=r.sections[a++],l=r.sections[a++];e(i,c,s,u,d),i=c,s=u}}}function Ik(r,e,t,n=!1){let i=[],s=n?[]:null,a=new d0(r),o=new d0(e);for(let l=-1;;){if(a.done&&o.len||o.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&o.ins==-1){let c=Math.min(a.len,o.len);ri(i,c,-1),a.forward(c),o.forward(c)}else if(o.ins>=0&&(a.ins<0||l==a.i||a.off==0&&(o.len<a.len||o.len==a.len&&!t))){let c=o.len;for(ri(i,o.ins,-1);c;){let u=Math.min(a.len,c);a.ins>=0&&l<a.i&&a.len<=u&&(ri(i,0,a.ins),s&&gc(s,i,a.text),l=a.i),a.forward(u),c-=u}o.next()}else if(a.ins>=0){let c=0,u=a.len;for(;u;)if(o.ins==-1){let d=Math.min(u,o.len);c+=d,u-=d,o.forward(d)}else if(o.ins==0&&o.len<u)u-=o.len,o.next();else break;ri(i,c,l<a.i?a.ins:0),s&&l<a.i&&gc(s,i,a.text),l=a.i,a.forward(a.len-u)}else{if(a.done&&o.done)return s?un.createSet(i,s):ao.create(i);throw new Error("Mismatched change set lengths")}}}function zG(r,e,t=!1){let n=[],i=t?[]:null,s=new d0(r),a=new d0(e);for(let o=!1;;){if(s.done&&a.done)return i?un.createSet(n,i):ao.create(n);if(s.ins==0)ri(n,s.len,0,o),s.next();else if(a.len==0&&!a.done)ri(n,0,a.ins,o),i&&gc(i,n,a.text),a.next();else{if(s.done||a.done)throw new Error("Mismatched change set lengths");{let l=Math.min(s.len2,a.len),c=n.length;if(s.ins==-1){let u=a.ins==-1?-1:a.off?0:a.ins;ri(n,l,u,o),i&&u&&gc(i,n,a.text)}else a.ins==-1?(ri(n,s.off?0:s.len,l,o),i&&gc(i,n,s.textBit(l))):(ri(n,s.off?0:s.len,a.off?0:a.ins,o),i&&!a.off&&gc(i,n,a.text));o=(s.ins>l||a.ins>=0&&a.len>l)&&(o||n.length>c),s.forward2(l),a.forward(l)}}}}class d0{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Bt.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?Bt.empty:t[n].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Zu{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let n,i;return this.empty?n=i=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),i=e.mapPos(this.to,-1)),n==this.from&&i==this.to?this:new Zu(n,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Ee.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Ee.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Ee.range(e.anchor,e.head)}static create(e,t,n){return new Zu(e,t,n)}}class Ee{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Ee.create(this.ranges.map(n=>n.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Ee([this.main],0)}addRange(e,t=!0){return Ee.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,Ee.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Ee(e.ranges.map(t=>Zu.fromJSON(t)),e.main)}static single(e,t=e){return new Ee([Ee.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let n=0,i=0;i<e.length;i++){let s=e[i];if(s.empty?s.from<=n:s.from<n)return Ee.normalized(e.slice(),t);n=s.to}return new Ee(e,t)}static cursor(e,t=0,n,i){return Zu.create(e,e,(t==0?0:t<0?8:16)|(n==null?7:Math.min(6,n))|(i??16777215)<<6)}static range(e,t,n,i){let s=(n??16777215)<<6|(i==null?7:Math.min(6,i));return t<e?Zu.create(t,e,48|s):Zu.create(e,t,(t>e?8:0)|s)}static normalized(e,t=0){let n=e[t];e.sort((i,s)=>i.from-s.from),t=e.indexOf(n);for(let i=1;i<e.length;i++){let s=e[i],a=e[i-1];if(s.empty?s.from<=a.to:s.from<a.to){let o=a.from,l=Math.max(s.to,a.to);i<=t&&t--,e.splice(--i,2,s.anchor>s.head?Ee.range(l,o):Ee.range(o,l))}}return new Ee(e,t)}}function YG(r,e){for(let t of r.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let $L=0;class Be{constructor(e,t,n,i,s){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=i,this.id=$L++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new Be(e.combine||(t=>t),e.compareInput||((t,n)=>t===n),e.compare||(e.combine?(t,n)=>t===n:DL),!!e.static,e.enables)}of(e){return new T1([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new T1(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new T1(e,this,2,t)}from(e,t){return t||(t=n=>n),this.compute([e],n=>t(n.field(e)))}}function DL(r,e){return r==e||r.length==e.length&&r.every((t,n)=>t===e[n])}class T1{constructor(e,t,n,i){this.dependencies=e,this.facet=t,this.type=n,this.value=i,this.id=$L++}dynamicSlot(e){var t;let n=this.value,i=this.facet.compareInput,s=this.id,a=e[s]>>1,o=this.type==2,l=!1,c=!1,u=[];for(let d of this.dependencies)d=="doc"?l=!0:d=="selection"?c=!0:((t=e[d.id])!==null&&t!==void 0?t:1)&1||u.push(e[d.id]);return{create(d){return d.values[a]=n(d),1},update(d,h){if(l&&h.docChanged||c&&(h.docChanged||h.selection)||$k(d,u)){let f=n(d);if(o?!xF(f,d.values[a],i):!i(f,d.values[a]))return d.values[a]=f,1}return 0},reconfigure:(d,h)=>{let f,m=h.config.address[s];if(m!=null){let g=yx(h,m);if(this.dependencies.every(y=>y instanceof Be?h.facet(y)===d.facet(y):y instanceof On?h.field(y,!1)==d.field(y,!1):!0)||(o?xF(f=n(d),g,i):i(f=n(d),g)))return d.values[a]=g,0}else f=n(d);return d.values[a]=f,1}}}}function xF(r,e,t){if(r.length!=e.length)return!1;for(let n=0;n<r.length;n++)if(!t(r[n],e[n]))return!1;return!0}function $k(r,e){let t=!1;for(let n of e)Dg(r,n)&1&&(t=!0);return t}function Sbe(r,e,t){let n=t.map(l=>r[l.id]),i=t.map(l=>l.type),s=n.filter(l=>!(l&1)),a=r[e.id]>>1;function o(l){let c=[];for(let u=0;u<n.length;u++){let d=yx(l,n[u]);if(i[u]==2)for(let h of d)c.push(h);else c.push(d)}return e.combine(c)}return{create(l){for(let c of n)Dg(l,c);return l.values[a]=o(l),1},update(l,c){if(!$k(l,s))return 0;let u=o(l);return e.compare(u,l.values[a])?0:(l.values[a]=u,1)},reconfigure(l,c){let u=$k(l,n),d=c.config.facets[e.id],h=c.facet(e);if(d&&!u&&DL(t,d))return l.values[a]=h,0;let f=o(l);return e.compare(f,h)?(l.values[a]=h,0):(l.values[a]=f,1)}}}const ab=Be.define({static:!0});class On{constructor(e,t,n,i,s){this.id=e,this.createF=t,this.updateF=n,this.compareF=i,this.spec=s,this.provides=void 0}static define(e){let t=new On($L++,e.create,e.update,e.compare||((n,i)=>n===i),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ab).find(n=>n.field==this);return(t?.create||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:n=>(n.values[t]=this.create(n),1),update:(n,i)=>{let s=n.values[t],a=this.updateF(s,i);return this.compareF(s,a)?0:(n.values[t]=a,1)},reconfigure:(n,i)=>{let s=n.facet(ab),a=i.facet(ab),o;return(o=s.find(l=>l.field==this))&&o!=a.find(l=>l.field==this)?(n.values[t]=o.create(n),1):i.config.address[this.id]!=null?(n.values[t]=i.field(this),0):(n.values[t]=this.create(n),1)}}}init(e){return[this,ab.of({field:this,create:e})]}get extension(){return this}}const Ku={lowest:4,low:3,default:2,high:1,highest:0};function vm(r){return e=>new QG(e,r)}const qd={highest:vm(Ku.highest),high:vm(Ku.high),default:vm(Ku.default),low:vm(Ku.low),lowest:vm(Ku.lowest)};class QG{constructor(e,t){this.inner=e,this.prec=t}}class ET{of(e){return new Dk(this,e)}reconfigure(e){return ET.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Dk{constructor(e,t){this.compartment=e,this.inner=t}}class vx{constructor(e,t,n,i,s,a){for(this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=i,this.staticValues=s,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<n.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let i=[],s=Object.create(null),a=new Map;for(let h of Abe(e,t,a))h instanceof On?i.push(h):(s[h.facet.id]||(s[h.facet.id]=[])).push(h);let o=Object.create(null),l=[],c=[];for(let h of i)o[h.id]=c.length<<1,c.push(f=>h.slot(f));let u=n?.config.facets;for(let h in s){let f=s[h],m=f[0].facet,g=u&&u[h]||[];if(f.every(y=>y.type==0))if(o[m.id]=l.length<<1|1,DL(g,f))l.push(n.facet(m));else{let y=m.combine(f.map(b=>b.value));l.push(n&&m.compare(y,n.facet(m))?n.facet(m):y)}else{for(let y of f)y.type==0?(o[y.id]=l.length<<1|1,l.push(y.value)):(o[y.id]=c.length<<1,c.push(b=>y.dynamicSlot(b)));o[m.id]=c.length<<1,c.push(y=>Sbe(y,m,f))}}let d=c.map(h=>h(o));return new vx(e,a,d,o,l,s)}}function Abe(r,e,t){let n=[[],[],[],[],[]],i=new Map;function s(a,o){let l=i.get(a);if(l!=null){if(l<=o)return;let c=n[l].indexOf(a);c>-1&&n[l].splice(c,1),a instanceof Dk&&t.delete(a.compartment)}if(i.set(a,o),Array.isArray(a))for(let c of a)s(c,o);else if(a instanceof Dk){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let c=e.get(a.compartment)||a.inner;t.set(a.compartment,c),s(c,o)}else if(a instanceof QG)s(a.inner,a.prec);else if(a instanceof On)n[o].push(a),a.provides&&s(a.provides,o);else if(a instanceof T1)n[o].push(a),a.facet.extensions&&s(a.facet.extensions,Ku.default);else{let c=a.extension;if(!c)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(c,o)}}return s(r,Ku.default),n.reduce((a,o)=>a.concat(o))}function Dg(r,e){if(e&1)return 2;let t=e>>1,n=r.status[t];if(n==4)throw new Error("Cyclic dependency between fields and/or facets");if(n&2)return n;r.status[t]=4;let i=r.computeSlot(r,r.config.dynamicSlots[t]);return r.status[t]=2|i}function yx(r,e){return e&1?r.config.staticValues[e>>1]:r.values[e>>1]}const XG=Be.define(),Lk=Be.define({combine:r=>r.some(e=>e),static:!0}),ZG=Be.define({combine:r=>r.length?r[0]:void 0,static:!0}),JG=Be.define(),eq=Be.define(),tq=Be.define(),rq=Be.define({combine:r=>r.length?r[0]:!1});class So{constructor(e,t){this.type=e,this.value=t}static define(){return new _be}}class _be{of(e){return new So(this,e)}}class Cbe{constructor(e){this.map=e}of(e){return new pt(this,e)}}class pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new Cbe(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let i of e){let s=i.map(t);s&&n.push(s)}return n}}pt.reconfigure=pt.define();pt.appendConfig=pt.define();class dn{constructor(e,t,n,i,s,a){this.startState=e,this.changes=t,this.selection=n,this.effects=i,this.annotations=s,this.scrollIntoView=a,this._doc=null,this._state=null,n&&YG(n,t.newLength),s.some(o=>o.type==dn.time)||(this.annotations=s.concat(dn.time.of(Date.now())))}static create(e,t,n,i,s,a){return new dn(e,t,n,i,s,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(dn.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}dn.time=So.define();dn.userEvent=So.define();dn.addToHistory=So.define();dn.remote=So.define();function Rbe(r,e){let t=[];for(let n=0,i=0;;){let s,a;if(n<r.length&&(i==e.length||e[i]>=r[n]))s=r[n++],a=r[n++];else if(i<e.length)s=e[i++],a=e[i++];else return t;!t.length||t[t.length-1]<s?t.push(s,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function nq(r,e,t){var n;let i,s,a;return t?(i=e.changes,s=un.empty(e.changes.length),a=r.changes.compose(e.changes)):(i=e.changes.map(r.changes),s=r.changes.mapDesc(e.changes,!0),a=r.changes.compose(i)),{changes:a,selection:e.selection?e.selection.map(s):(n=r.selection)===null||n===void 0?void 0:n.map(i),effects:pt.mapEffects(r.effects,i).concat(pt.mapEffects(e.effects,s)),annotations:r.annotations.length?r.annotations.concat(e.annotations):e.annotations,scrollIntoView:r.scrollIntoView||e.scrollIntoView}}function Ok(r,e,t){let n=e.selection,i=kf(e.annotations);return e.userEvent&&(i=i.concat(dn.userEvent.of(e.userEvent))),{changes:e.changes instanceof un?e.changes:un.of(e.changes||[],t,r.facet(ZG)),selection:n&&(n instanceof Ee?n:Ee.single(n.anchor,n.head)),effects:kf(e.effects),annotations:i,scrollIntoView:!!e.scrollIntoView}}function iq(r,e,t){let n=Ok(r,e.length?e[0]:{},r.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(t=!1);let a=!!e[s].sequential;n=nq(n,Ok(r,e[s],a?n.changes.newLength:r.doc.length),a)}let i=dn.create(r,n.changes,n.selection,n.effects,n.annotations,n.scrollIntoView);return Ibe(t?kbe(i):i)}function kbe(r){let e=r.startState,t=!0;for(let i of e.facet(JG)){let s=i(r);if(s===!1){t=!1;break}Array.isArray(s)&&(t=t===!0?s:Rbe(t,s))}if(t!==!0){let i,s;if(t===!1)s=r.changes.invertedDesc,i=un.empty(e.doc.length);else{let a=r.changes.filter(t);i=a.changes,s=a.filtered.mapDesc(a.changes).invertedDesc}r=dn.create(e,i,r.selection&&r.selection.map(s),pt.mapEffects(r.effects,s),r.annotations,r.scrollIntoView)}let n=e.facet(eq);for(let i=n.length-1;i>=0;i--){let s=n[i](r);s instanceof dn?r=s:Array.isArray(s)&&s.length==1&&s[0]instanceof dn?r=s[0]:r=iq(e,kf(s),!1)}return r}function Ibe(r){let e=r.startState,t=e.facet(tq),n=r;for(let i=t.length-1;i>=0;i--){let s=t[i](r);s&&Object.keys(s).length&&(n=nq(n,Ok(e,s,r.changes.newLength),!0))}return n==r?r:dn.create(e,r.changes,r.selection,n.effects,n.annotations,n.scrollIntoView)}const $be=[];function kf(r){return r==null?$be:Array.isArray(r)?r:[r]}var _r=function(r){return r[r.Word=0]="Word",r[r.Space=1]="Space",r[r.Other=2]="Other",r}(_r||(_r={}));const Dbe=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Pk;try{Pk=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function Lbe(r){if(Pk)return Pk.test(r);for(let e=0;e<r.length;e++){let t=r[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||Dbe.test(t)))return!0}return!1}function Obe(r){return e=>{if(!/\S/.test(e))return _r.Space;if(Lbe(e))return _r.Word;for(let t=0;t<r.length;t++)if(e.indexOf(r[t])>-1)return _r.Word;return _r.Other}}class $t{constructor(e,t,n,i,s,a){this.config=e,this.doc=t,this.selection=n,this.values=i,this.status=e.statusTemplate.slice(),this.computeSlot=s,a&&(a._state=this);for(let o=0;o<this.config.dynamicSlots.length;o++)Dg(this,o<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(n==null){if(t)throw new RangeError("Field is not present in this state");return}return Dg(this,n),yx(this,n)}update(...e){return iq(this,e,!0)}applyTransaction(e){let t=this.config,{base:n,compartments:i}=t;for(let o of e.effects)o.is(ET.reconfigure)?(t&&(i=new Map,t.compartments.forEach((l,c)=>i.set(c,l)),t=null),i.set(o.value.compartment,o.value.extension)):o.is(pt.reconfigure)?(t=null,n=o.value):o.is(pt.appendConfig)&&(t=null,n=kf(n).concat(o.value));let s;t?s=e.startState.values.slice():(t=vx.resolve(n,i,this),s=new $t(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(l,c)=>c.reconfigure(l,this),null).values);let a=e.startState.facet(Lk)?e.newSelection:e.newSelection.asSingle();new $t(t,e.newDoc,a,s,(o,l)=>l.update(o,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Ee.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),i=this.changes(n.changes),s=[n.range],a=kf(n.effects);for(let o=1;o<t.ranges.length;o++){let l=e(t.ranges[o]),c=this.changes(l.changes),u=c.map(i);for(let h=0;h<o;h++)s[h]=s[h].map(u);let d=i.mapDesc(c,!0);s.push(l.range.map(d)),i=i.compose(u),a=pt.mapEffects(a,u).concat(pt.mapEffects(kf(l.effects),d))}return{changes:i,selection:Ee.create(s,t.mainIndex),effects:a}}changes(e=[]){return e instanceof un?e:un.of(e,this.doc.length,this.facet($t.lineSeparator))}toText(e){return Bt.of(e.split(this.facet($t.lineSeparator)||Rk))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Dg(this,t),yx(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let i=e[n];i instanceof On&&this.config.address[i.id]!=null&&(t[n]=i.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let i=[];if(n){for(let s in n)if(Object.prototype.hasOwnProperty.call(e,s)){let a=n[s],o=e[s];i.push(a.init(l=>a.spec.fromJSON(o,l)))}}return $t.create({doc:e.doc,selection:Ee.fromJSON(e.selection),extensions:t.extensions?i.concat([t.extensions]):i})}static create(e={}){let t=vx.resolve(e.extensions||[],new Map),n=e.doc instanceof Bt?e.doc:Bt.of((e.doc||"").split(t.staticFacet($t.lineSeparator)||Rk)),i=e.selection?e.selection instanceof Ee?e.selection:Ee.single(e.selection.anchor,e.selection.head):Ee.single(0);return YG(i,n.length),t.staticFacet(Lk)||(i=i.asSingle()),new $t(t,n,i,t.dynamicSlots.map(()=>null),(s,a)=>a.create(s),null)}get tabSize(){return this.facet($t.tabSize)}get lineBreak(){return this.facet($t.lineSeparator)||`
`}get readOnly(){return this.facet(rq)}phrase(e,...t){for(let n of this.facet($t.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(n,i)=>{if(i=="$")return"$";let s=+(i||1);return!s||s>t.length?n:t[s-1]})),e}languageDataAt(e,t,n=-1){let i=[];for(let s of this.facet(XG))for(let a of s(this,t,n))Object.prototype.hasOwnProperty.call(a,e)&&i.push(a[e]);return i}charCategorizer(e){return Obe(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:i}=this.doc.lineAt(e),s=this.charCategorizer(e),a=e-n,o=e-n;for(;a>0;){let l=qn(t,a,!1);if(s(t.slice(l,a))!=_r.Word)break;a=l}for(;o<i;){let l=qn(t,o);if(s(t.slice(o,l))!=_r.Word)break;o=l}return a==o?null:Ee.range(a+n,o+n)}}$t.allowMultipleSelections=Lk;$t.tabSize=Be.define({combine:r=>r.length?r[0]:4});$t.lineSeparator=ZG;$t.readOnly=rq;$t.phrases=Be.define({compare(r,e){let t=Object.keys(r),n=Object.keys(e);return t.length==n.length&&t.every(i=>r[i]==e[i])}});$t.languageData=XG;$t.changeFilter=JG;$t.transactionFilter=eq;$t.transactionExtender=tq;ET.reconfigure=pt.define();function Ao(r,e,t={}){let n={};for(let i of r)for(let s of Object.keys(i)){let a=i[s],o=n[s];if(o===void 0)n[s]=a;else if(!(o===a||a===void 0))if(Object.hasOwnProperty.call(t,s))n[s]=t[s](o,a);else throw new Error("Config merge conflict for field "+s)}for(let i in e)n[i]===void 0&&(n[i]=e[i]);return n}class Id{eq(e){return this==e}range(e,t=e){return h0.create(e,t,this)}}Id.prototype.startSide=Id.prototype.endSide=0;Id.prototype.point=!1;Id.prototype.mapMode=hi.TrackDel;class h0{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new h0(e,t,n)}}function Mk(r,e){return r.from-e.from||r.value.startSide-e.value.startSide}class LL{constructor(e,t,n,i){this.from=e,this.to=t,this.value=n,this.maxPoint=i}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,i=0){let s=n?this.to:this.from;for(let a=i,o=s.length;;){if(a==o)return a;let l=a+o>>1,c=s[l]-e||(n?this.value[l].endSide:this.value[l].startSide)-t;if(l==a)return c>=0?a:o;c>=0?o=l:a=l+1}}between(e,t,n,i){for(let s=this.findIndex(t,-1e9,!0),a=this.findIndex(n,1e9,!1,s);s<a;s++)if(i(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,t){let n=[],i=[],s=[],a=-1,o=-1;for(let l=0;l<this.value.length;l++){let c=this.value[l],u=this.from[l]+e,d=this.to[l]+e,h,f;if(u==d){let m=t.mapPos(u,c.startSide,c.mapMode);if(m==null||(h=f=m,c.startSide!=c.endSide&&(f=t.mapPos(u,c.endSide),f<h)))continue}else if(h=t.mapPos(u,c.startSide),f=t.mapPos(d,c.endSide),h>f||h==f&&c.startSide>0&&c.endSide<=0)continue;(f-h||c.endSide-c.startSide)<0||(a<0&&(a=h),c.point&&(o=Math.max(o,f-h)),n.push(c),i.push(h-a),s.push(f-a))}return{mapped:n.length?new LL(i,s,n,o):null,pos:a}}}class Pt{constructor(e,t,n,i){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=i}static create(e,t,n,i){return new Pt(e,t,n,i)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:i=0,filterTo:s=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(n&&(t=t.slice().sort(Mk)),this.isEmpty)return t.length?Pt.of(t):this;let o=new sq(this,null,-1).goto(0),l=0,c=[],u=new yl;for(;o.value||l<t.length;)if(l<t.length&&(o.from-t[l].from||o.startSide-t[l].value.startSide)>=0){let d=t[l++];u.addInner(d.from,d.to,d.value)||c.push(d)}else o.rangeIndex==1&&o.chunkIndex<this.chunk.length&&(l==t.length||this.chunkEnd(o.chunkIndex)<t[l].from)&&(!a||i>this.chunkEnd(o.chunkIndex)||s<this.chunkPos[o.chunkIndex])&&u.addChunk(this.chunkPos[o.chunkIndex],this.chunk[o.chunkIndex])?o.nextChunk():((!a||i>o.to||s<o.from||a(o.from,o.to,o.value))&&(u.addInner(o.from,o.to,o.value)||c.push(h0.create(o.from,o.to,o.value))),o.next());return u.finishInner(this.nextLayer.isEmpty&&!c.length?Pt.empty:this.nextLayer.update({add:c,filter:a,filterFrom:i,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],i=-1;for(let a=0;a<this.chunk.length;a++){let o=this.chunkPos[a],l=this.chunk[a],c=e.touchesRange(o,o+l.length);if(c===!1)i=Math.max(i,l.maxPoint),t.push(l),n.push(e.mapPos(o));else if(c===!0){let{mapped:u,pos:d}=l.map(o,e);u&&(i=Math.max(i,u.maxPoint),t.push(u),n.push(d))}}let s=this.nextLayer.map(e);return t.length==0?s:new Pt(n,t,s||Pt.empty,i)}between(e,t,n){if(!this.isEmpty){for(let i=0;i<this.chunk.length;i++){let s=this.chunkPos[i],a=this.chunk[i];if(t>=s&&e<=s+a.length&&a.between(s,e-s,t-s,n)===!1)return}this.nextLayer.between(e,t,n)}}iter(e=0){return f0.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return f0.from(e).goto(t)}static compare(e,t,n,i,s=-1){let a=e.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),o=t.filter(d=>d.maxPoint>0||!d.isEmpty&&d.maxPoint>=s),l=wF(a,o,n),c=new ym(a,l,s),u=new ym(o,l,s);n.iterGaps((d,h,f)=>TF(c,d,u,h,f,i)),n.empty&&n.length==0&&TF(c,0,u,0,0,i)}static eq(e,t,n=0,i){i==null&&(i=999999999);let s=e.filter(u=>!u.isEmpty&&t.indexOf(u)<0),a=t.filter(u=>!u.isEmpty&&e.indexOf(u)<0);if(s.length!=a.length)return!1;if(!s.length)return!0;let o=wF(s,a),l=new ym(s,o,0).goto(n),c=new ym(a,o,0).goto(n);for(;;){if(l.to!=c.to||!Nk(l.active,c.active)||l.point&&(!c.point||!l.point.eq(c.point)))return!1;if(l.to>i)return!0;l.next(),c.next()}}static spans(e,t,n,i,s=-1){let a=new ym(e,null,s).goto(t),o=t,l=a.openStart;for(;;){let c=Math.min(a.to,n);if(a.point){let u=a.activeForPoint(a.to),d=a.pointFrom<t?u.length+1:a.point.startSide<0?u.length:Math.min(u.length,l);i.point(o,c,a.point,u,d,a.pointRank),l=Math.min(a.openEnd(c),u.length)}else c>o&&(i.span(o,c,a.active,l),l=a.openEnd(c));if(a.to>n)return l+(a.point&&a.to>n?1:0);o=a.to,a.next()}}static of(e,t=!1){let n=new yl;for(let i of e instanceof h0?[e]:t?Pbe(e):e)n.add(i.from,i.to,i.value);return n.finish()}static join(e){if(!e.length)return Pt.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let i=e[n];i!=Pt.empty;i=i.nextLayer)t=new Pt(i.chunkPos,i.chunk,t,Math.max(i.maxPoint,t.maxPoint));return t}}Pt.empty=new Pt([],[],null,-1);function Pbe(r){if(r.length>1)for(let e=r[0],t=1;t<r.length;t++){let n=r[t];if(Mk(e,n)>0)return r.slice().sort(Mk);e=n}return r}Pt.empty.nextLayer=Pt.empty;class yl{finishChunk(e){this.chunks.push(new LL(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new yl)).add(e,t,n)}addInner(e,t,n){let i=e-this.lastTo||n.startSide-this.last.endSide;if(i<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return i<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Pt.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Pt.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function wF(r,e,t){let n=new Map;for(let s of r)for(let a=0;a<s.chunk.length;a++)s.chunk[a].maxPoint<=0&&n.set(s.chunk[a],s.chunkPos[a]);let i=new Set;for(let s of e)for(let a=0;a<s.chunk.length;a++){let o=n.get(s.chunk[a]);o!=null&&(t?t.mapPos(o):o)==s.chunkPos[a]&&!t?.touchesRange(o,o+s.chunk[a].length)&&i.add(s.chunk[a])}return i}class sq{constructor(e,t,n,i=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=i}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){for(;this.chunkIndex<this.layer.chunk.length;){let i=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(i)||this.layer.chunkEnd(this.chunkIndex)<e||i.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let i=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<i)&&this.setRangeIndex(i)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class f0{constructor(e){this.heap=e}static from(e,t=null,n=-1){let i=[];for(let s=0;s<e.length;s++)for(let a=e[s];!a.isEmpty;a=a.nextLayer)a.maxPoint>=n&&i.push(new sq(a,t,n,s));return i.length==1?i[0]:new f0(i)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)g_(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)g_(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),g_(this.heap,0)}}}function g_(r,e){for(let t=r[e];;){let n=(e<<1)+1;if(n>=r.length)break;let i=r[n];if(n+1<r.length&&i.compare(r[n+1])>=0&&(i=r[n+1],n++),t.compare(i)<0)break;r[n]=t,r[e]=i,e=n}}class ym{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=f0.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){ob(this.active,e),ob(this.activeTo,e),ob(this.activeRank,e),this.minActive=SF(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:i,rank:s}=this.cursor;for(;t<this.activeRank.length&&(s-this.activeRank[t]||i-this.activeTo[t])>0;)t++;lb(this.active,t,n),lb(this.activeTo,t,i),lb(this.activeRank,t,s),e&&lb(e,t,this.cursor.from),this.minActive=SF(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let i=this.minActive;if(i>-1&&(this.activeTo[i]-this.cursor.from||this.active[i].endSide-this.cursor.startSide)<0){if(this.activeTo[i]>e){this.to=this.activeTo[i],this.endSide=this.active[i].endSide;break}this.removeActive(i),n&&ob(n,i)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(n),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(n){this.openStart=0;for(let i=n.length-1;i>=0&&n[i]<e;i--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0&&!(this.activeRank[n]<this.pointRank);n--)(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n]);return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function TF(r,e,t,n,i,s){r.goto(e),t.goto(n);let a=n+i,o=n,l=n-e;for(;;){let c=r.to+l-t.to,u=c||r.endSide-t.endSide,d=u<0?r.to+l:t.to,h=Math.min(d,a);if(r.point||t.point?r.point&&t.point&&(r.point==t.point||r.point.eq(t.point))&&Nk(r.activeForPoint(r.to),t.activeForPoint(t.to))||s.comparePoint(o,h,r.point,t.point):h>o&&!Nk(r.active,t.active)&&s.compareRange(o,h,r.active,t.active),d>a)break;(c||r.openEnd!=t.openEnd)&&s.boundChange&&s.boundChange(d),o=d,u<=0&&r.next(),u>=0&&t.next()}}function Nk(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!=e[t]&&!r[t].eq(e[t]))return!1;return!0}function ob(r,e){for(let t=e,n=r.length-1;t<n;t++)r[t]=r[t+1];r.pop()}function lb(r,e,t){for(let n=r.length-1;n>=e;n--)r[n+1]=r[n];r[e]=t}function SF(r,e){let t=-1,n=1e9;for(let i=0;i<e.length;i++)(e[i]-n||r[i].endSide-r[t].endSide)<0&&(t=i,n=e[i]);return t}function Op(r,e,t=r.length){let n=0;for(let i=0;i<t&&i<r.length;)r.charCodeAt(i)==9?(n+=e-n%e,i++):(n++,i=qn(r,i));return n}function Fk(r,e,t,n){for(let i=0,s=0;;){if(s>=e)return i;if(i==r.length)break;s+=r.charCodeAt(i)==9?t-s%t:1,i=qn(r,i)}return n===!0?-1:r.length}const Bk="ͼ",AF=typeof Symbol>"u"?"__"+Bk:Symbol.for(Bk),Uk=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),_F=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Nc{constructor(e,t){this.rules=[];let{finish:n}=t||{};function i(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function s(a,o,l,c){let u=[],d=/^@(\w+)\b/.exec(a[0]),h=d&&d[1]=="keyframes";if(d&&o==null)return l.push(a[0]+";");for(let f in o){let m=o[f];if(/&/.test(f))s(f.split(/,\s*/).map(g=>a.map(y=>g.replace(/&/,y))).reduce((g,y)=>g.concat(y)),m,l);else if(m&&typeof m=="object"){if(!d)throw new RangeError("The value of a property ("+f+") should be a primitive value.");s(i(f),m,u,h)}else m!=null&&u.push(f.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+m+";")}(u.length||h)&&l.push((n&&!d&&!c?a.map(n):a).join(", ")+" {"+u.join(" ")+"}")}for(let a in e)s(i(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=_F[AF]||1;return _F[AF]=e+1,Bk+e.toString(36)}static mount(e,t,n){let i=e[Uk],s=n&&n.nonce;i?s&&i.setNonce(s):i=new Mbe(e,s),i.mount(Array.isArray(t)?t:[t],e)}}let CF=new Map;class Mbe{constructor(e,t){let n=e.ownerDocument||e,i=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&i.CSSStyleSheet){let s=CF.get(n);if(s)return e[Uk]=s;this.sheet=new i.CSSStyleSheet,CF.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Uk]=this}mount(e,t){let n=this.sheet,i=0,s=0;for(let a=0;a<e.length;a++){let o=e[a],l=this.modules.indexOf(o);if(l<s&&l>-1&&(this.modules.splice(l,1),s--,l=-1),l==-1){if(this.modules.splice(s++,0,o),n)for(let c=0;c<o.rules.length;c++)n.insertRule(o.rules[c],i++)}else{for(;s<l;)i+=this.modules[s++].rules.length;i+=o.rules.length,s++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let l=0;l<this.modules.length;l++)a+=this.modules[l].getRules()+`
`;this.styleTag.textContent=a;let o=t.head||t;this.styleTag.parentNode!=o&&o.insertBefore(this.styleTag,o.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Fc={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},p0={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Nbe=typeof navigator<"u"&&/Mac/.test(navigator.platform),Fbe=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Vn=0;Vn<10;Vn++)Fc[48+Vn]=Fc[96+Vn]=String(Vn);for(var Vn=1;Vn<=24;Vn++)Fc[Vn+111]="F"+Vn;for(var Vn=65;Vn<=90;Vn++)Fc[Vn]=String.fromCharCode(Vn+32),p0[Vn]=String.fromCharCode(Vn);for(var v_ in Fc)p0.hasOwnProperty(v_)||(p0[v_]=Fc[v_]);function Bbe(r){var e=Nbe&&r.metaKey&&r.shiftKey&&!r.ctrlKey&&!r.altKey||Fbe&&r.shiftKey&&r.key&&r.key.length==1||r.key=="Unidentified",t=!e&&r.key||(r.shiftKey?p0:Fc)[r.keyCode]||r.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}function m0(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function Wk(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function S1(r,e){if(!e.anchorNode)return!1;try{return Wk(r,e.anchorNode)}catch{return!1}}function np(r){return r.nodeType==3?Dd(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function Lg(r,e,t,n){return t?RF(r,e,t,n,-1)||RF(r,e,t,n,1):!1}function $d(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function bx(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}function RF(r,e,t,n,i){for(;;){if(r==t&&e==n)return!0;if(e==(i<0?0:mo(r))){if(r.nodeName=="DIV")return!1;let s=r.parentNode;if(!s||s.nodeType!=1)return!1;e=$d(r)+(i<0?0:1),r=s}else if(r.nodeType==1){if(r=r.childNodes[e+(i<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=i<0?mo(r):0}else return!1}}function mo(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}function wv(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function Ube(r){let e=r.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function aq(r,e){let t=e.width/r.offsetWidth,n=e.height/r.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-r.offsetWidth)<1)&&(t=1),(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.height-r.offsetHeight)<1)&&(n=1),{scaleX:t,scaleY:n}}function Wbe(r,e,t,n,i,s,a,o){let l=r.ownerDocument,c=l.defaultView||window;for(let u=r,d=!1;u&&!d;)if(u.nodeType==1){let h,f=u==l.body,m=1,g=1;if(f)h=Ube(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(d=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let E=u.getBoundingClientRect();({scaleX:m,scaleY:g}=aq(u,E)),h={left:E.left,right:E.left+u.clientWidth*m,top:E.top,bottom:E.top+u.clientHeight*g}}let y=0,b=0;if(i=="nearest")e.top<h.top?(b=e.top-(h.top+a),t>0&&e.bottom>h.bottom+b&&(b=e.bottom-h.bottom+a)):e.bottom>h.bottom&&(b=e.bottom-h.bottom+a,t<0&&e.top-b<h.top&&(b=e.top-(h.top+a)));else{let E=e.bottom-e.top,w=h.bottom-h.top;b=(i=="center"&&E<=w?e.top+E/2-w/2:i=="start"||i=="center"&&t<0?e.top-a:e.bottom-w+a)-h.top}if(n=="nearest"?e.left<h.left?(y=e.left-(h.left+s),t>0&&e.right>h.right+y&&(y=e.right-h.right+s)):e.right>h.right&&(y=e.right-h.right+s,t<0&&e.left<h.left+y&&(y=e.left-(h.left+s))):y=(n=="center"?e.left+(e.right-e.left)/2-(h.right-h.left)/2:n=="start"==o?e.left-s:e.right-(h.right-h.left)+s)-h.left,y||b)if(f)c.scrollBy(y,b);else{let E=0,w=0;if(b){let A=u.scrollTop;u.scrollTop+=b/g,w=(u.scrollTop-A)*g}if(y){let A=u.scrollLeft;u.scrollLeft+=y/m,E=(u.scrollLeft-A)*m}e={left:e.left-E,top:e.top-w,right:e.right-E,bottom:e.bottom-w},E&&Math.abs(E-y)<1&&(n="nearest"),w&&Math.abs(w-b)<1&&(i="nearest")}if(f)break;(e.top<h.top||e.bottom>h.bottom||e.left<h.left||e.right>h.right)&&(e={left:Math.max(e.left,h.left),right:Math.min(e.right,h.right),top:Math.max(e.top,h.top),bottom:Math.min(e.bottom,h.bottom)}),u=u.assignedSlot||u.parentNode}else if(u.nodeType==11)u=u.host;else break}function Hbe(r){let e=r.ownerDocument,t,n;for(let i=r.parentNode;i&&!(i==e.body||t&&n);)if(i.nodeType==1)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;return{x:t,y:n}}class Vbe{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?mo(t):0),n,Math.min(e.focusOffset,n?mo(n):0))}set(e,t,n,i){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=i}}let Ah=null;function oq(r){if(r.setActive)return r.setActive();if(Ah)return r.focus(Ah);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(Ah==null?{get preventScroll(){return Ah={preventScroll:!0},!0}}:void 0),!Ah){Ah=!1;for(let t=0;t<e.length;){let n=e[t++],i=e[t++],s=e[t++];n.scrollTop!=i&&(n.scrollTop=i),n.scrollLeft!=s&&(n.scrollLeft=s)}}}let kF;function Dd(r,e,t=e){let n=kF||(kF=document.createRange());return n.setEnd(r,t),n.setStart(r,e),n}function If(r,e,t,n){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0};n&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=n);let s=new KeyboardEvent("keydown",i);s.synthetic=!0,r.dispatchEvent(s);let a=new KeyboardEvent("keyup",i);return a.synthetic=!0,r.dispatchEvent(a),s.defaultPrevented||a.defaultPrevented}function Gbe(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function lq(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}function qbe(r,e){let t=e.focusNode,n=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=n)return!1;for(n=Math.min(n,mo(t));;)if(n){if(t.nodeType!=1)return!1;let i=t.childNodes[n-1];i.contentEditable=="false"?n--:(t=i,n=mo(t))}else{if(t==r)return!0;n=$d(t),t=t.parentNode}}function cq(r){return r.scrollTop>Math.max(1,r.scrollHeight-r.clientHeight-4)}function uq(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n>0)return{node:t,offset:n};if(t.nodeType==1&&n>0){if(t.contentEditable=="false")return null;t=t.childNodes[n-1],n=mo(t)}else if(t.parentNode&&!bx(t))n=$d(t),t=t.parentNode;else return null}}function dq(r,e){for(let t=r,n=e;;){if(t.nodeType==3&&n<t.nodeValue.length)return{node:t,offset:n};if(t.nodeType==1&&n<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[n],n=0}else if(t.parentNode&&!bx(t))n=$d(t)+1,t=t.parentNode;else return null}}class ni{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new ni(e.parentNode,$d(e),t)}static after(e,t){return new ni(e.parentNode,$d(e)+1,t)}}const OL=[];class ir{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let n=this.dom,i=null,s;for(let a of this.children){if(a.flags&7){if(!a.dom&&(s=i?i.nextSibling:n.firstChild)){let o=ir.get(s);(!o||!o.parent&&o.canReuseDOM(a))&&a.reuseDOM(s)}a.sync(e,t),a.flags&=-8}if(s=i?i.nextSibling:n.firstChild,t&&!t.written&&t.node==n&&s!=a.dom&&(t.written=!0),a.dom.parentNode==n)for(;s&&s!=a.dom;)s=IF(s);else n.insertBefore(a.dom,s);i=a.dom}for(s=i?i.nextSibling:n.firstChild,s&&t&&t.node==n&&(t.written=!0);s;)s=IF(s)}else if(this.flags&1)for(let n of this.children)n.flags&7&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let i=mo(e)==0?0:t==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;i==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?i=-1:i=1),e=s}i<0?n=e:n=e.nextSibling}if(n==this.dom.firstChild)return 0;for(;n&&!ir.get(n);)n=n.nextSibling;if(!n)return this.length;for(let i=0,s=0;;i++){let a=this.children[i];if(a.dom==n)return s;s+=a.length+a.breakAfter}}domBoundsAround(e,t,n=0){let i=-1,s=-1,a=-1,o=-1;for(let l=0,c=n,u=n;l<this.children.length;l++){let d=this.children[l],h=c+d.length;if(c<e&&h>t)return d.domBoundsAround(e,t,c);if(h>=e&&i==-1&&(i=l,s=c),c>t&&d.dom.parentNode==this.dom){a=l,o=u;break}u=h,c=h+d.breakAfter}return{from:s,to:o<0?n+this.length:o,startDOM:(i?this.children[i-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=OL){this.markDirty();for(let i=e;i<t;i++){let s=this.children[i];s.parent==this&&n.indexOf(s)<0&&s.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let i=0;i<n.length;i++)n[i].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new hq(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,i,s,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ir.prototype.breakAfter=0;function IF(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class hq{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function fq(r,e,t,n,i,s,a,o,l){let{children:c}=r,u=c.length?c[e]:null,d=s.length?s[s.length-1]:null,h=d?d.breakAfter:a;if(!(e==n&&u&&!a&&!h&&s.length<2&&u.merge(t,i,s.length?d:null,t==0,o,l))){if(n<c.length){let f=c[n];f&&(i<f.length||f.breakAfter&&d?.breakAfter)?(e==n&&(f=f.split(i),i=0),!h&&d&&f.merge(0,i,d,!0,0,l)?s[s.length-1]=f:((i||f.children.length&&!f.children[0].length)&&f.merge(0,i,null,!1,0,l),s.push(f))):f?.breakAfter&&(d?d.breakAfter=1:a=1),n++}for(u&&(u.breakAfter=a,t>0&&(!a&&s.length&&u.merge(t,u.length,s[0],!1,o,0)?u.breakAfter=s.shift().breakAfter:(t<u.length||u.children.length&&u.children[u.children.length-1].length==0)&&u.merge(t,u.length,null,!1,o,0),e++));e<n&&s.length;)if(c[n-1].become(s[s.length-1]))n--,s.pop(),l=s.length?0:o;else if(c[e].become(s[0]))e++,s.shift(),o=s.length?0:l;else break;!s.length&&e&&n<c.length&&!c[e-1].breakAfter&&c[n].merge(0,0,c[e-1],!1,o,l)&&e--,(e<n||s.length)&&r.replaceChildren(e,n,s)}}function pq(r,e,t,n,i,s){let a=r.childCursor(),{i:o,off:l}=a.findPos(t,1),{i:c,off:u}=a.findPos(e,-1),d=e-t;for(let h of n)d+=h.length;r.length+=d,fq(r,c,u,o,l,n,0,i,s)}let Ii=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Hk=typeof document<"u"?document:{documentElement:{style:{}}};const Vk=/Edge\/(\d+)/.exec(Ii.userAgent),mq=/MSIE \d/.test(Ii.userAgent),Gk=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ii.userAgent),xT=!!(mq||Gk||Vk),$F=!xT&&/gecko\/(\d+)/i.test(Ii.userAgent),y_=!xT&&/Chrome\/(\d+)/.exec(Ii.userAgent),DF="webkitFontSmoothing"in Hk.documentElement.style,gq=!xT&&/Apple Computer/.test(Ii.vendor),LF=gq&&(/Mobile\/\w+/.test(Ii.userAgent)||Ii.maxTouchPoints>2);var Me={mac:LF||/Mac/.test(Ii.platform),windows:/Win/.test(Ii.platform),linux:/Linux|X11/.test(Ii.platform),ie:xT,ie_version:mq?Hk.documentMode||6:Gk?+Gk[1]:Vk?+Vk[1]:0,gecko:$F,gecko_version:$F?+(/Firefox\/(\d+)/.exec(Ii.userAgent)||[0,0])[1]:0,chrome:!!y_,chrome_version:y_?+y_[1]:0,ios:LF,android:/Android\b/.test(Ii.userAgent),webkit:DF,safari:gq,webkit_version:DF?+(/\bAppleWebKit\/(\d+)/.exec(Ii.userAgent)||[0,0])[1]:0,tabSize:Hk.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const jbe=256;class ua extends ir{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,n){return this.flags&8||n&&(!(n instanceof ua)||this.length-(t-e)+n.length>jbe||n.flags&8)?!1:(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ua(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new ni(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Kbe(this.dom,e,t)}}class bl extends ir{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let i of t)i.setParent(this)}setAttrs(e){if(lq(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,i,s,a){return n&&(!(n instanceof bl&&n.mark.eq(this.mark))||e&&s<=0||t<this.length&&a<=0)?!1:(pq(this,e,t,n?n.children.slice():[],s-1,a-1),this.markDirty(),!0)}split(e){let t=[],n=0,i=-1,s=0;for(let o of this.children){let l=n+o.length;l>e&&t.push(n<e?o.split(e-n):o),i<0&&n>=e&&(i=s),n=l,s++}let a=this.length-e;return this.length=e,i>-1&&(this.children.length=i,this.markDirty()),new bl(this.mark,t,a)}domAtPos(e){return vq(this,e)}coordsAt(e,t){return bq(this,e,t)}}function Kbe(r,e,t){let n=r.nodeValue.length;e>n&&(e=n);let i=e,s=e,a=0;e==0&&t<0||e==n&&t>=0?Me.chrome||Me.gecko||(e?(i--,a=1):s<n&&(s++,a=-1)):t<0?i--:s<n&&s++;let o=Dd(r,i,s).getClientRects();if(!o.length)return null;let l=o[(a?a<0:t>=0)?0:o.length-1];return Me.safari&&!a&&l.width==0&&(l=Array.prototype.find.call(o,c=>c.width)||l),a?wv(l,a<0):l||null}class vc extends ir{static create(e,t,n){return new vc(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=vc.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,i,s,a){return n&&(!(n instanceof vc)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof vc&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Bt.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,n=t&&t.state.doc,i=this.posAtStart;return n?n.slice(i,i+this.length):Bt.empty}domAtPos(e){return(this.length?e==0:this.side>0)?ni.before(this.dom):ni.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let i=this.dom.getClientRects(),s=null;if(!i.length)return null;let a=this.side?this.side<0:e>0;for(let o=a?i.length-1:0;s=i[o],!(e>0?o==0:o==i.length-1||s.top<s.bottom);o+=a?-1:1);return wv(s,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ip extends ir{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ip&&e.side==this.side}split(){return new ip(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?ni.before(this.dom):ni.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Bt.empty}get isHidden(){return!0}}ua.prototype.children=vc.prototype.children=ip.prototype.children=OL;function vq(r,e){let t=r.dom,{children:n}=r,i=0;for(let s=0;i<n.length;i++){let a=n[i],o=s+a.length;if(!(o==s&&a.getSide()<=0)){if(e>s&&e<o&&a.dom.parentNode==t)return a.domAtPos(e-s);if(e<=s)break;s=o}}for(let s=i;s>0;s--){let a=n[s-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let s=i;s<n.length;s++){let a=n[s];if(a.dom.parentNode==t)return a.domAtPos(0)}return new ni(t,0)}function yq(r,e,t){let n,{children:i}=r;t>0&&e instanceof bl&&i.length&&(n=i[i.length-1])instanceof bl&&n.mark.eq(e.mark)?yq(n,e.children[0],t-1):(i.push(e),e.setParent(r)),r.length+=e.length}function bq(r,e,t){let n=null,i=-1,s=null,a=-1;function o(c,u){for(let d=0,h=0;d<c.children.length&&h<=u;d++){let f=c.children[d],m=h+f.length;m>=u&&(f.children.length?o(f,u-h):(!s||s.isHidden&&t>0)&&(m>u||h==m&&f.getSide()>0)?(s=f,a=u-h):(h<u||h==m&&f.getSide()<0&&!f.isHidden)&&(n=f,i=u-h)),h=m}}o(r,e);let l=(t<0?n:s)||n||s;return l?l.coordsAt(Math.max(0,l==n?i:a),t):zbe(r)}function zbe(r){let e=r.dom.lastChild;if(!e)return r.dom.getBoundingClientRect();let t=np(e);return t[t.length-1]||null}function qk(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}const OF=Object.create(null);function Ex(r,e,t){if(r==e)return!0;r||(r=OF),e||(e=OF);let n=Object.keys(r),i=Object.keys(e);if(n.length-(t&&n.indexOf(t)>-1?1:0)!=i.length-(t&&i.indexOf(t)>-1?1:0))return!1;for(let s of n)if(s!=t&&(i.indexOf(s)==-1||r[s]!==e[s]))return!1;return!0}function jk(r,e,t){let n=!1;if(e)for(let i in e)t&&i in t||(n=!0,i=="style"?r.style.cssText="":r.removeAttribute(i));if(t)for(let i in t)e&&e[i]==t[i]||(n=!0,i=="style"?r.style.cssText=t[i]:r.setAttribute(i,t[i]));return n}function Ybe(r){let e=Object.create(null);for(let t=0;t<r.attributes.length;t++){let n=r.attributes[t];e[n.name]=n.value}return e}class Al{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var fi=function(r){return r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange",r}(fi||(fi={}));class Ye extends Id{constructor(e,t,n,i){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=i}get heightRelevant(){return!1}static mark(e){return new Tv(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Bc(e,t,t,n,e.widget||null,!1)}static replace(e){let t=!!e.block,n,i;if(e.isBlockGap)n=-5e8,i=4e8;else{let{start:s,end:a}=Eq(e,t);n=(s?t?-3e8:-1:5e8)-1,i=(a?t?2e8:1:-6e8)+1}return new Bc(e,n,i,t,e.widget||null,!0)}static line(e){return new Sv(e)}static set(e,t=!1){return Pt.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ye.none=Pt.empty;class Tv extends Ye{constructor(e){let{start:t,end:n}=Eq(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Tv&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((n=e.attrs)===null||n===void 0?void 0:n.class))&&Ex(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Tv.prototype.point=!1;class Sv extends Ye{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof Sv&&this.spec.class==e.spec.class&&Ex(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}Sv.prototype.mapMode=hi.TrackBefore;Sv.prototype.point=!0;class Bc extends Ye{constructor(e,t,n,i,s,a){super(t,n,s,e),this.block=i,this.isReplace=a,this.mapMode=i?t<=0?hi.TrackBefore:hi.TrackAfter:hi.TrackDel}get type(){return this.startSide!=this.endSide?fi.WidgetRange:this.startSide<=0?fi.WidgetBefore:fi.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Bc&&Qbe(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Bc.prototype.point=!0;function Eq(r,e=!1){let{inclusiveStart:t,inclusiveEnd:n}=r;return t==null&&(t=r.inclusive),n==null&&(n=r.inclusive),{start:t??e,end:n??e}}function Qbe(r,e){return r==e||!!(r&&e&&r.compare(e))}function A1(r,e,t,n=0){let i=t.length-1;i>=0&&t[i]+n>=r?t[i]=Math.max(t[i],e):t.push(r,e)}class qr extends ir{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,i,s,a){if(n){if(!(n instanceof qr))return!1;this.dom||n.transferDOM(this)}return i&&this.setDeco(n?n.attrs:null),pq(this,e,t,n?n.children.slice():[],s,a),!0}split(e){let t=new qr;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:n,off:i}=this.childPos(e);i&&(t.append(this.children[n].split(i),0),this.children[n].merge(i,this.children[n].length,null,!1,0,0),n++);for(let s=n;s<this.children.length;s++)t.append(this.children[s],0);for(;n>0&&this.children[n-1].length==0;)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Ex(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){yq(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=qk(t,this.attrs||{})),n&&(this.attrs=qk({class:n},this.attrs||{}))}domAtPos(e){return vq(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?this.flags&4&&(lq(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(jk(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let i=this.dom.lastChild;for(;i&&ir.get(i)instanceof bl;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((n=ir.get(i))===null||n===void 0?void 0:n.isEditable)==!1&&(!Me.ios||!this.children.some(s=>s instanceof ua))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let n of this.children){if(!(n instanceof ua)||/[^ -~]/.test(n.text))return null;let i=np(n.dom);if(i.length!=1)return null;e+=i[0].width,t=i[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let n=bq(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:i}=this.parent.view.viewState,s=n.bottom-n.top;if(Math.abs(s-i.lineHeight)<2&&i.textHeight<s){let a=(s-i.textHeight)/2;return{top:n.top+a,bottom:n.bottom-a,left:n.left,right:n.left}}}return n}become(e){return e instanceof qr&&this.children.length==0&&e.children.length==0&&Ex(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,i=0;n<e.children.length;n++){let s=e.children[n],a=i+s.length;if(a>=t){if(s instanceof qr)return s;if(a>t)break}i=a+s.breakAfter}return null}}class fl extends ir{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,i,s,a){return n&&(!(n instanceof fl)||!this.widget.compare(n.widget)||e>0&&s<=0||t<this.length&&a<=0)?!1:(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?ni.before(this.dom):ni.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new fl(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return OL}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Bt.empty}domBoundsAround(){return null}become(e){return e instanceof fl&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof Kk?null:wv(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t==n?!1:e<0?t<0:n>0}}class Kk extends Al{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Og{constructor(e,t,n,i){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof fl&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qr),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(cb(new ip(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof fl)&&this.getLine()}buildText(e,t,n){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:a,done:o}=this.cursor.next(this.skip);if(this.skip=0,o)throw new Error("Ran out of text content when drawing inline views");if(a){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let i=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(cb(new ua(this.text.slice(this.textOff,this.textOff+i)),t),n),this.atCursorPos=!0,this.textOff+=i,e-=i,n=0}}span(e,t,n,i){this.buildText(t-e,n,i),this.pos=t,this.openStart<0&&(this.openStart=i)}point(e,t,n,i,s,a){if(this.disallowBlockEffectsFor[a]&&n instanceof Bc){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let o=t-e;if(n instanceof Bc)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new fl(n.widget||sp.block,o,n));else{let l=vc.create(n.widget||sp.inline,o,o?0:n.startSide),c=this.atCursorPos&&!l.isEditable&&s<=i.length&&(e<t||n.startSide>0),u=!l.isEditable&&(e<t||s>i.length||n.startSide<=0),d=this.getLine();this.pendingBuffer==2&&!c&&!l.isEditable&&(this.pendingBuffer=0),this.flushBuffer(i),c&&(d.append(cb(new ip(1),i),s),s=i.length+Math.max(0,s-i.length)),d.append(cb(l,i),s),this.atCursorPos=u,this.pendingBuffer=u?e<t||s>i.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=i.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);o&&(this.textOff+o<=this.text.length?this.textOff+=o:(this.skip+=o-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=s)}static build(e,t,n,i,s){let a=new Og(e,t,n,s);return a.openEnd=Pt.spans(i,t,n,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function cb(r,e){for(let t of e)r=new bl(t,[r],r.length);return r}class sp extends Al{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}sp.inline=new sp("span");sp.block=new sp("div");var gr=function(r){return r[r.LTR=0]="LTR",r[r.RTL=1]="RTL",r}(gr||(gr={}));const Ld=gr.LTR,PL=gr.RTL;function xq(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const Xbe=xq("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Zbe=xq("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),zk=Object.create(null),Aa=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);zk[e]=t,zk[t]=-e}function wq(r){return r<=247?Xbe[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?Zbe[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8204?256:64336<=r&&r<=65023?4:1}const Jbe=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class yc{get dir(){return this.level%2?PL:Ld}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,i){let s=-1;for(let a=0;a<e.length;a++){let o=e[a];if(o.from<=t&&o.to>=t){if(o.level==n)return a;(s<0||(i!=0?i<0?o.from<t:o.to>t:e[s].level>o.level))&&(s=a)}}if(s<0)throw new RangeError("Index out of range");return s}}function Tq(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++){let n=r[t],i=e[t];if(n.from!=i.from||n.to!=i.to||n.direction!=i.direction||!Tq(n.inner,i.inner))return!1}return!0}const rr=[];function e1e(r,e,t,n,i){for(let s=0;s<=n.length;s++){let a=s?n[s-1].to:e,o=s<n.length?n[s].from:t,l=s?256:i;for(let c=a,u=l,d=l;c<o;c++){let h=wq(r.charCodeAt(c));h==512?h=u:h==8&&d==4&&(h=16),rr[c]=h==4?2:h,h&7&&(d=h),u=h}for(let c=a,u=l,d=l;c<o;c++){let h=rr[c];if(h==128)c<o-1&&u==rr[c+1]&&u&24?h=rr[c]=u:rr[c]=256;else if(h==64){let f=c+1;for(;f<o&&rr[f]==64;)f++;let m=c&&u==8||f<t&&rr[f]==8?d==1?1:8:256;for(let g=c;g<f;g++)rr[g]=m;c=f-1}else h==8&&d==1&&(rr[c]=1);u=h,h&7&&(d=h)}}}function t1e(r,e,t,n,i){let s=i==1?2:1;for(let a=0,o=0,l=0;a<=n.length;a++){let c=a?n[a-1].to:e,u=a<n.length?n[a].from:t;for(let d=c,h,f,m;d<u;d++)if(f=zk[h=r.charCodeAt(d)])if(f<0){for(let g=o-3;g>=0;g-=3)if(Aa[g+1]==-f){let y=Aa[g+2],b=y&2?i:y&4?y&1?s:i:0;b&&(rr[d]=rr[Aa[g]]=b),o=g;break}}else{if(Aa.length==189)break;Aa[o++]=d,Aa[o++]=h,Aa[o++]=l}else if((m=rr[d])==2||m==1){let g=m==i;l=g?0:1;for(let y=o-3;y>=0;y-=3){let b=Aa[y+2];if(b&2)break;if(g)Aa[y+2]|=2;else{if(b&4)break;Aa[y+2]|=4}}}}}function r1e(r,e,t,n){for(let i=0,s=n;i<=t.length;i++){let a=i?t[i-1].to:r,o=i<t.length?t[i].from:e;for(let l=a;l<o;){let c=rr[l];if(c==256){let u=l+1;for(;;)if(u==o){if(i==t.length)break;u=t[i++].to,o=i<t.length?t[i].from:e}else if(rr[u]==256)u++;else break;let d=s==1,h=(u<e?rr[u]:n)==1,f=d==h?d?1:2:n;for(let m=u,g=i,y=g?t[g-1].to:r;m>l;)m==y&&(m=t[--g].from,y=g?t[g-1].to:r),rr[--m]=f;l=u}else s=c,l++}}}function Yk(r,e,t,n,i,s,a){let o=n%2?2:1;if(n%2==i%2)for(let l=e,c=0;l<t;){let u=!0,d=!1;if(c==s.length||l<s[c].from){let g=rr[l];g!=o&&(u=!1,d=g==16)}let h=!u&&o==1?[]:null,f=u?n:n+1,m=l;e:for(;;)if(c<s.length&&m==s[c].from){if(d)break e;let g=s[c];if(!u)for(let y=g.to,b=c+1;;){if(y==t)break e;if(b<s.length&&s[b].from==y)y=s[b++].to;else{if(rr[y]==o)break e;break}}if(c++,h)h.push(g);else{g.from>l&&a.push(new yc(l,g.from,f));let y=g.direction==Ld!=!(f%2);Qk(r,y?n+1:n,i,g.inner,g.from,g.to,a),l=g.to}m=g.to}else{if(m==t||(u?rr[m]!=o:rr[m]==o))break;m++}h?Yk(r,l,m,n+1,i,h,a):l<m&&a.push(new yc(l,m,f)),l=m}else for(let l=t,c=s.length;l>e;){let u=!0,d=!1;if(!c||l>s[c-1].to){let g=rr[l-1];g!=o&&(u=!1,d=g==16)}let h=!u&&o==1?[]:null,f=u?n:n+1,m=l;e:for(;;)if(c&&m==s[c-1].to){if(d)break e;let g=s[--c];if(!u)for(let y=g.from,b=c;;){if(y==e)break e;if(b&&s[b-1].to==y)y=s[--b].from;else{if(rr[y-1]==o)break e;break}}if(h)h.push(g);else{g.to<l&&a.push(new yc(g.to,l,f));let y=g.direction==Ld!=!(f%2);Qk(r,y?n+1:n,i,g.inner,g.from,g.to,a),l=g.from}m=g.from}else{if(m==e||(u?rr[m-1]!=o:rr[m-1]==o))break;m--}h?Yk(r,m,l,n+1,i,h,a):m<l&&a.push(new yc(m,l,f)),l=m}}function Qk(r,e,t,n,i,s,a){let o=e%2?2:1;e1e(r,i,s,n,o),t1e(r,i,s,n,o),r1e(i,s,n,o),Yk(r,i,s,e,t,n,a)}function n1e(r,e,t){if(!r)return[new yc(0,0,e==PL?1:0)];if(e==Ld&&!t.length&&!Jbe.test(r))return Sq(r.length);if(t.length)for(;r.length>rr.length;)rr[rr.length]=256;let n=[],i=e==Ld?0:1;return Qk(r,i,i,t,0,r.length,n),n}function Sq(r){return[new yc(0,r,0)]}let Aq="";function i1e(r,e,t,n,i){var s;let a=n.head-r.from,o=yc.find(e,a,(s=n.bidiLevel)!==null&&s!==void 0?s:-1,n.assoc),l=e[o],c=l.side(i,t);if(a==c){let h=o+=i?1:-1;if(h<0||h>=e.length)return null;l=e[o=h],a=l.side(!i,t),c=l.side(i,t)}let u=qn(r.text,a,l.forward(i,t));(u<l.from||u>l.to)&&(u=c),Aq=r.text.slice(Math.min(a,u),Math.max(a,u));let d=o==(i?e.length-1:0)?null:e[o+(i?1:-1)];return d&&u==c&&d.level+(i?0:1)<l.level?Ee.cursor(d.side(!i,t)+r.from,d.forward(i,t)?1:-1,d.level):Ee.cursor(u+r.from,l.forward(i,t)?-1:1,l.level)}function s1e(r,e,t){for(let n=e;n<t;n++){let i=wq(r.charCodeAt(n));if(i==1)return Ld;if(i==2||i==4)return PL}return Ld}const _q=Be.define(),Cq=Be.define(),Rq=Be.define(),kq=Be.define(),Xk=Be.define(),Iq=Be.define(),$q=Be.define(),ML=Be.define(),NL=Be.define(),Dq=Be.define({combine:r=>r.some(e=>e)}),Lq=Be.define({combine:r=>r.some(e=>e)}),Oq=Be.define();class $f{constructor(e,t="nearest",n="nearest",i=5,s=5,a=!1){this.range=e,this.y=t,this.x=n,this.yMargin=i,this.xMargin=s,this.isSnapshot=a}map(e){return e.empty?this:new $f(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new $f(Ee.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const ub=pt.define({map:(r,e)=>r.map(e)}),Pq=pt.define();function Li(r,e,t){let n=r.facet(kq);n.length?n[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const ll=Be.define({combine:r=>r.length?r[0]:!0});let a1e=0;const Qm=Be.define();class Wr{constructor(e,t,n,i,s){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=i,this.extension=s(this)}static define(e,t){const{eventHandlers:n,eventObservers:i,provide:s,decorations:a}=t||{};return new Wr(a1e++,e,n,i,o=>{let l=[Qm.of(o)];return a&&l.push(g0.of(c=>{let u=c.plugin(o);return u?a(u):Ye.none})),s&&l.push(s(o)),l})}static fromClass(e,t){return Wr.define(n=>new e(n),t)}}class b_{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(n){if(Li(t.state,n,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Li(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(n){Li(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Mq=Be.define(),FL=Be.define(),g0=Be.define(),Nq=Be.define(),BL=Be.define(),Fq=Be.define();function PF(r,e){let t=r.state.facet(Fq);if(!t.length)return t;let n=t.map(s=>s instanceof Function?s(r):s),i=[];return Pt.spans(n,e.from,e.to,{point(){},span(s,a,o,l){let c=s-e.from,u=a-e.from,d=i;for(let h=o.length-1;h>=0;h--,l--){let f=o[h].spec.bidiIsolate,m;if(f==null&&(f=s1e(e.text,c,u)),l>0&&d.length&&(m=d[d.length-1]).to==c&&m.direction==f)m.to=u,d=m.inner;else{let g={from:c,to:u,direction:f,inner:[]};d.push(g),d=g.inner}}}}),i}const Bq=Be.define();function UL(r){let e=0,t=0,n=0,i=0;for(let s of r.state.facet(Bq)){let a=s(r);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(n=Math.max(n,a.top)),a.bottom!=null&&(i=Math.max(i,a.bottom)))}return{left:e,right:t,top:n,bottom:i}}const Xm=Be.define();class Is{constructor(e,t,n,i){this.fromA=e,this.toA=t,this.fromB=n,this.toB=i}join(e){return new Is(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let i=e[t-1];if(!(i.fromA>n.toA)){if(i.toA<n.fromA)break;n=n.join(i),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(t.length==0)return e;let n=[];for(let i=0,s=0,a=0,o=0;;i++){let l=i==e.length?null:e[i],c=a-o,u=l?l.fromB:1e9;for(;s<t.length&&t[s]<u;){let d=t[s],h=t[s+1],f=Math.max(o,d),m=Math.min(u,h);if(f<=m&&new Is(f+c,m+c,f,m).addToSet(n),h>u)break;s+=2}if(!l)return n;new Is(l.fromA,l.toA,l.fromB,l.toB).addToSet(n),a=l.toA,o=l.toB}}}class xx{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=un.empty(this.startState.doc.length);for(let s of n)this.changes=this.changes.compose(s.changes);let i=[];this.changes.iterChangedRanges((s,a,o,l)=>i.push(new Is(s,a,o,l))),this.changedRanges=i}static create(e,t,n){return new xx(e,t,n)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class MF extends ir{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ye.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qr],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Is(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every(({fromA:c,toA:u})=>u<this.minWidthFrom||c>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let i=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?i=this.domChanged.newSel.head:!f1e(e.changes,this.hasComposition)&&!e.selectionSet&&(i=e.state.selection.main.head));let s=i>-1?l1e(this.view,e.changes,i):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:c,to:u}=this.hasComposition;n=new Is(c,u,e.changes.mapPos(c,-1),e.changes.mapPos(u,1)).addToSet(n.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(Me.ie||Me.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,o=this.updateDeco(),l=d1e(a,o,e.changes);return n=Is.extendWithRanges(n,l),!(this.flags&7)&&n.length==0?!1:(this.updateInner(n,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=Me.chrome||Me.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||i.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof fl&&a.widget instanceof Kk&&s.push(a.dom);i.updateGaps(s)}updateChildren(e,t,n){let i=n?n.range.addToSet(e.slice()):e,s=this.childCursor(t);for(let a=i.length-1;;a--){let o=a>=0?i[a]:null;if(!o)break;let{fromA:l,toA:c,fromB:u,toB:d}=o,h,f,m,g;if(n&&n.range.fromB<d&&n.range.toB>u){let A=Og.build(this.view.state.doc,u,n.range.fromB,this.decorations,this.dynamicDecorationMap),S=Og.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);f=A.breakAtStart,m=A.openStart,g=S.openEnd;let _=this.compositionView(n);S.breakAtStart?_.breakAfter=1:S.content.length&&_.merge(_.length,_.length,S.content[0],!1,S.openStart,0)&&(_.breakAfter=S.content[0].breakAfter,S.content.shift()),A.content.length&&_.merge(0,0,A.content[A.content.length-1],!0,0,A.openEnd)&&A.content.pop(),h=A.content.concat(_).concat(S.content)}else({content:h,breakAtStart:f,openStart:m,openEnd:g}=Og.build(this.view.state.doc,u,d,this.decorations,this.dynamicDecorationMap));let{i:y,off:b}=s.findPos(c,1),{i:E,off:w}=s.findPos(l,-1);fq(this,E,w,y,b,h,f,m,g)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let n of t.effects)n.is(Pq)&&(this.editContextFormatting=n.value)}compositionView(e){let t=new ua(e.text.nodeValue);t.flags|=8;for(let{deco:i}of e.marks)t=new bl(i,[t],t.length);let n=new qr;return n.append(t,0),n}fixCompositionDOM(e){let t=(s,a)=>{a.flags|=8|(a.children.some(l=>l.flags&7)?1:0),this.markedForComposition.add(a);let o=ir.get(s);o&&o!=a&&(o.dom=null),a.setDOM(s)},n=this.childPos(e.range.fromB,1),i=this.children[n.i];t(e.line,i);for(let s=e.marks.length-1;s>=-1;s--)n=i.childPos(n.off,1),i=i.children[n.i],t(s>=0?e.marks[s].node:e.text,i)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let n=this.view.root.activeElement,i=n==this.dom,s=!i&&!(this.view.state.facet(ll)||this.dom.tabIndex>-1)&&S1(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(i||t||s))return;let a=this.forceSelection;this.forceSelection=!1;let o=this.view.state.selection.main,l=this.moveToLine(this.domAtPos(o.anchor)),c=o.empty?l:this.moveToLine(this.domAtPos(o.head));if(Me.gecko&&o.empty&&!this.hasComposition&&o1e(l)){let d=document.createTextNode("");this.view.observer.ignore(()=>l.node.insertBefore(d,l.node.childNodes[l.offset]||null)),l=c=new ni(d,0),a=!0}let u=this.view.observer.selectionRange;(a||!u.focusNode||(!Lg(l.node,l.offset,u.anchorNode,u.anchorOffset)||!Lg(c.node,c.offset,u.focusNode,u.focusOffset))&&!this.suppressWidgetCursorChange(u,o))&&(this.view.observer.ignore(()=>{Me.android&&Me.chrome&&this.dom.contains(u.focusNode)&&h1e(u.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let d=m0(this.view.root);if(d)if(o.empty){if(Me.gecko){let h=c1e(l.node,l.offset);if(h&&h!=3){let f=(h==1?uq:dq)(l.node,l.offset);f&&(l=new ni(f.node,f.offset))}}d.collapse(l.node,l.offset),o.bidiLevel!=null&&d.caretBidiLevel!==void 0&&(d.caretBidiLevel=o.bidiLevel)}else if(d.extend){d.collapse(l.node,l.offset);try{d.extend(c.node,c.offset)}catch{}}else{let h=document.createRange();o.anchor>o.head&&([l,c]=[c,l]),h.setEnd(c.node,c.offset),h.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(h)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())}),this.view.observer.setSelectionRange(l,c)),this.impreciseAnchor=l.precise?null:new ni(u.anchorNode,u.anchorOffset),this.impreciseHead=c.precise?null:new ni(u.focusNode,u.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Lg(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=m0(e.root),{anchorNode:i,anchorOffset:s}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let a=qr.find(this,t.head);if(!a)return;let o=a.posAtStart;if(t.head==o||t.head==o+a.length)return;let l=this.coordsAt(t.head,-1),c=this.coordsAt(t.head,1);if(!l||!c||l.bottom>c.top)return;let u=this.domAtPos(t.head+t.assoc);n.collapse(u.node,u.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let d=e.observer.selectionRange;e.docView.posFromDOM(d.anchorNode,d.anchorOffset)!=t.from&&n.collapse(i,s)}moveToLine(e){let t=this.dom,n;if(e.node!=t)return e;for(let i=e.offset;!n&&i<t.childNodes.length;i++){let s=ir.get(t.childNodes[i]);s instanceof qr&&(n=s.domAtPos(0))}for(let i=e.offset-1;!n&&i>=0;i--){let s=ir.get(t.childNodes[i]);s instanceof qr&&(n=s.domAtPos(s.length))}return n?new ni(n.node,n.offset,!0):e}nearest(e){for(let t=e;t;){let n=ir.get(t);if(n&&n.rootView==this)return n;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let i=this.children[t];if(n<i.length||i instanceof qr)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,i=0;for(let s=this.length,a=this.children.length-1;a>=0;a--){let o=this.children[a],l=s-o.breakAfter,c=l-o.length;if(l<e)break;if(c<=e&&(c<e||o.covers(-1))&&(l>e||o.covers(1))&&(!n||o instanceof qr&&!(n instanceof qr&&t>=0)))n=o,i=c;else if(n&&c==e&&l==e&&o instanceof fl&&Math.abs(t)<2){if(o.deco.startSide<0)break;a&&(n=null)}s=c}return n?n.coordsAt(e-i,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),i=this.children[t];if(!(i instanceof qr))return null;for(;i.children.length;){let{i:o,off:l}=i.childPos(n,1);for(;;o++){if(o==i.children.length)return null;if((i=i.children[o]).length)break}n=l}if(!(i instanceof ua))return null;let s=qn(i.text,n);if(s==n)return null;let a=Dd(i.dom,n,s).getClientRects();for(let o=0;o<a.length;o++){let l=a[o];if(o==a.length-1||l.top<l.bottom&&l.left<l.right)return l}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:i}=e,s=this.view.contentDOM.clientWidth,a=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,o=-1,l=this.view.textDirection==gr.LTR;for(let c=0,u=0;u<this.children.length;u++){let d=this.children[u],h=c+d.length;if(h>i)break;if(c>=n){let f=d.dom.getBoundingClientRect();if(t.push(f.height),a){let m=d.dom.lastChild,g=m?np(m):[];if(g.length){let y=g[g.length-1],b=l?y.right-f.left:f.right-y.left;b>o&&(o=b,this.minWidth=s,this.minWidthFrom=c,this.minWidthTo=h)}}}c=h+d.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?gr.RTL:gr.LTR}measureTextSize(){for(let s of this.children)if(s instanceof qr){let a=s.measureTextSize();if(a)return a}let e=document.createElement("div"),t,n,i;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=np(e.firstChild)[0];t=e.getBoundingClientRect().height,n=s?s.width/27:7,i=s?s.height:t,e.remove()}),{lineHeight:t,charWidth:n,textHeight:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new hq(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,i=0;;i++){let s=i==t.viewports.length?null:t.viewports[i],a=s?s.from-1:this.length;if(a>n){let o=(t.lineBlockAt(a).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Ye.replace({widget:new Kk(o),block:!0,inclusive:!0,isBlockGap:!0}).range(n,a))}if(!s)break;n=s.to+1}return Ye.set(e)}updateDeco(){let e=1,t=this.view.state.facet(g0).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),n=!1,i=this.view.state.facet(Nq).map((s,a)=>{let o=typeof s=="function";return o&&(n=!0),o?s(this.view):s});for(i.length&&(this.dynamicDecorationMap[e++]=n,t.push(Pt.join(i))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let c=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=c.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let c of this.view.state.facet(Oq))try{if(c(this.view,e.range,e))return!0}catch(u){Li(this.view.state,u,"scroll handler")}let{range:t}=e,n=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),i;if(!n)return;!t.empty&&(i=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(n={left:Math.min(n.left,i.left),top:Math.min(n.top,i.top),right:Math.max(n.right,i.right),bottom:Math.max(n.bottom,i.bottom)});let s=UL(this.view),a={left:n.left-s.left,top:n.top-s.top,right:n.right+s.right,bottom:n.bottom+s.bottom},{offsetWidth:o,offsetHeight:l}=this.view.scrollDOM;Wbe(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,o),-o),Math.max(Math.min(e.yMargin,l),-l),this.view.textDirection==gr.LTR)}}function o1e(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}function Uq(r,e){let t=r.observer.selectionRange;if(!t.focusNode)return null;let n=uq(t.focusNode,t.focusOffset),i=dq(t.focusNode,t.focusOffset),s=n||i;if(i&&n&&i.node!=n.node){let o=ir.get(i.node);if(!o||o instanceof ua&&o.text!=i.node.nodeValue)s=i;else if(r.docView.lastCompositionAfterCursor){let l=ir.get(n.node);!l||l instanceof ua&&l.text!=n.node.nodeValue||(s=i)}}if(r.docView.lastCompositionAfterCursor=s!=n,!s)return null;let a=e-s.offset;return{from:a,to:a+s.node.nodeValue.length,node:s.node}}function l1e(r,e,t){let n=Uq(r,t);if(!n)return null;let{node:i,from:s,to:a}=n,o=i.nodeValue;if(/[\n\r]/.test(o)||r.state.doc.sliceString(n.from,n.to)!=o)return null;let l=e.invertedDesc,c=new Is(l.mapPos(s),l.mapPos(a),s,a),u=[];for(let d=i.parentNode;;d=d.parentNode){let h=ir.get(d);if(h instanceof bl)u.push({node:d,deco:h.mark});else{if(h instanceof qr||d.nodeName=="DIV"&&d.parentNode==r.contentDOM)return{range:c,text:i,marks:u,line:d};if(d!=r.contentDOM)u.push({node:d,deco:new Tv({inclusive:!0,attributes:Ybe(d),tagName:d.tagName.toLowerCase()})});else return null}}}function c1e(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}let u1e=class{constructor(){this.changes=[]}compareRange(e,t){A1(e,t,this.changes)}comparePoint(e,t){A1(e,t,this.changes)}boundChange(e){A1(e,e,this.changes)}};function d1e(r,e,t){let n=new u1e;return Pt.compare(r,e,t,n),n.changes}function h1e(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function f1e(r,e){let t=!1;return e&&r.iterChangedRanges((n,i)=>{n<e.to&&i>e.from&&(t=!0)}),t}function p1e(r,e,t=1){let n=r.charCategorizer(e),i=r.doc.lineAt(e),s=e-i.from;if(i.length==0)return Ee.cursor(e);s==0?t=1:s==i.length&&(t=-1);let a=s,o=s;t<0?a=qn(i.text,s,!1):o=qn(i.text,s);let l=n(i.text.slice(a,o));for(;a>0;){let c=qn(i.text,a,!1);if(n(i.text.slice(c,a))!=l)break;a=c}for(;o<i.length;){let c=qn(i.text,o);if(n(i.text.slice(o,c))!=l)break;o=c}return Ee.range(a+i.from,o+i.from)}function m1e(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function g1e(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function E_(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function NF(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function FF(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Zk(r,e,t){let n,i,s,a,o=!1,l,c,u,d;for(let m=r.firstChild;m;m=m.nextSibling){let g=np(m);for(let y=0;y<g.length;y++){let b=g[y];i&&E_(i,b)&&(b=NF(FF(b,i.bottom),i.top));let E=m1e(e,b),w=g1e(t,b);if(E==0&&w==0)return m.nodeType==3?BF(m,e,t):Zk(m,e,t);if(!n||a>w||a==w&&s>E){n=m,i=b,s=E,a=w;let A=w?t<b.top?-1:1:E?e<b.left?-1:1:0;o=!A||(A>0?y<g.length-1:y>0)}E==0?t>b.bottom&&(!u||u.bottom<b.bottom)?(l=m,u=b):t<b.top&&(!d||d.top>b.top)&&(c=m,d=b):u&&E_(u,b)?u=FF(u,b.bottom):d&&E_(d,b)&&(d=NF(d,b.top))}}if(u&&u.bottom>=t?(n=l,i=u):d&&d.top<=t&&(n=c,i=d),!n)return{node:r,offset:0};let h=Math.max(i.left,Math.min(i.right,e));if(n.nodeType==3)return BF(n,h,t);if(o&&n.contentEditable!="false")return Zk(n,h,t);let f=Array.prototype.indexOf.call(r.childNodes,n)+(e>=(i.left+i.right)/2?1:0);return{node:r,offset:f}}function BF(r,e,t){let n=r.nodeValue.length,i=-1,s=1e9,a=0;for(let o=0;o<n;o++){let l=Dd(r,o,o+1).getClientRects();for(let c=0;c<l.length;c++){let u=l[c];if(u.top==u.bottom)continue;a||(a=e-u.left);let d=(u.top>t?u.top-t:t-u.bottom)-1;if(u.left-1<=e&&u.right+1>=e&&d<s){let h=e>=(u.left+u.right)/2,f=h;if((Me.chrome||Me.gecko)&&Dd(r,o).getBoundingClientRect().left==u.right&&(f=!h),d<=0)return{node:r,offset:o+(f?1:0)};i=o+(f?1:0),s=d}}}return{node:r,offset:i>-1?i:a>0?r.nodeValue.length:0}}function Wq(r,e,t,n=-1){var i,s;let a=r.contentDOM.getBoundingClientRect(),o=a.top+r.viewState.paddingTop,l,{docHeight:c}=r.viewState,{x:u,y:d}=e,h=d-o;if(h<0)return 0;if(h>c)return r.state.doc.length;for(let A=r.viewState.heightOracle.textHeight/2,S=!1;l=r.elementAtHeight(h),l.type!=fi.Text;)for(;h=n>0?l.bottom+A:l.top-A,!(h>=0&&h<=c);){if(S)return t?null:0;S=!0,n=-n}d=o+h;let f=l.from;if(f<r.viewport.from)return r.viewport.from==0?0:t?null:UF(r,a,l,u,d);if(f>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:t?null:UF(r,a,l,u,d);let m=r.dom.ownerDocument,g=r.root.elementFromPoint?r.root:m,y=g.elementFromPoint(u,d);y&&!r.contentDOM.contains(y)&&(y=null),y||(u=Math.max(a.left+1,Math.min(a.right-1,u)),y=g.elementFromPoint(u,d),y&&!r.contentDOM.contains(y)&&(y=null));let b,E=-1;if(y&&((i=r.docView.nearest(y))===null||i===void 0?void 0:i.isEditable)!=!1){if(m.caretPositionFromPoint){let A=m.caretPositionFromPoint(u,d);A&&({offsetNode:b,offset:E}=A)}else if(m.caretRangeFromPoint){let A=m.caretRangeFromPoint(u,d);A&&({startContainer:b,startOffset:E}=A,(!r.contentDOM.contains(b)||Me.safari&&v1e(b,E,u)||Me.chrome&&y1e(b,E,u))&&(b=void 0))}b&&(E=Math.min(mo(b),E))}if(!b||!r.docView.dom.contains(b)){let A=qr.find(r.docView,f);if(!A)return h>l.top+l.height/2?l.to:l.from;({node:b,offset:E}=Zk(A.dom,u,d))}let w=r.docView.nearest(b);if(!w)return null;if(w.isWidget&&((s=w.dom)===null||s===void 0?void 0:s.nodeType)==1){let A=w.dom.getBoundingClientRect();return e.y<A.top||e.y<=A.bottom&&e.x<=(A.left+A.right)/2?w.posAtStart:w.posAtEnd}else return w.localPosFromDOM(b,E)+w.posAtStart}function UF(r,e,t,n,i){let s=Math.round((n-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let o=r.viewState.heightOracle.textHeight,l=Math.floor((i-t.top-(r.defaultLineHeight-o)*.5)/o);s+=l*r.viewState.heightOracle.lineLength}let a=r.state.sliceDoc(t.from,t.to);return t.from+Fk(a,s,r.state.tabSize)}function v1e(r,e,t){let n;if(r.nodeType!=3||e!=(n=r.nodeValue.length))return!1;for(let i=r.nextSibling;i;i=i.nextSibling)if(i.nodeType!=1||i.nodeName!="BR")return!1;return Dd(r,n-1,n).getBoundingClientRect().left>t}function y1e(r,e,t){if(e!=0)return!1;for(let i=r;;){let s=i.parentNode;if(!s||s.nodeType!=1||s.firstChild!=i)return!1;if(s.classList.contains("cm-line"))break;i=s}let n=r.nodeType==1?r.getBoundingClientRect():Dd(r,0,Math.max(r.nodeValue.length,1)).getBoundingClientRect();return t-n.left>5}function Jk(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let n of t.type)if(n.to>e||n.to==e&&(n.to==t.to||n.type==fi.Text))return n}return t}function b1e(r,e,t,n){let i=Jk(r,e.head),s=!n||i.type!=fi.Text||!(r.lineWrapping||i.widgetLineBreaks)?null:r.coordsAtPos(e.assoc<0&&e.head>i.from?e.head-1:e.head);if(s){let a=r.dom.getBoundingClientRect(),o=r.textDirectionAt(i.from),l=r.posAtCoords({x:t==(o==gr.LTR)?a.right-1:a.left+1,y:(s.top+s.bottom)/2});if(l!=null)return Ee.cursor(l,t?-1:1)}return Ee.cursor(t?i.to:i.from,t?-1:1)}function WF(r,e,t,n){let i=r.state.doc.lineAt(e.head),s=r.bidiSpans(i),a=r.textDirectionAt(i.from);for(let o=e,l=null;;){let c=i1e(i,s,a,o,t),u=Aq;if(!c){if(i.number==(t?r.state.doc.lines:1))return o;u=`
`,i=r.state.doc.line(i.number+(t?1:-1)),s=r.bidiSpans(i),c=r.visualLineSide(i,!t)}if(l){if(!l(u))return o}else{if(!n)return c;l=n(u)}o=c}}function E1e(r,e,t){let n=r.state.charCategorizer(e),i=n(t);return s=>{let a=n(s);return i==_r.Space&&(i=a),i==a}}function x1e(r,e,t,n){let i=e.head,s=t?1:-1;if(i==(t?r.state.doc.length:0))return Ee.cursor(i,e.assoc);let a=e.goalColumn,o,l=r.contentDOM.getBoundingClientRect(),c=r.coordsAtPos(i,e.assoc||-1),u=r.documentTop;if(c)a==null&&(a=c.left-l.left),o=s<0?c.top:c.bottom;else{let f=r.viewState.lineBlockAt(i);a==null&&(a=Math.min(l.right-l.left,r.defaultCharacterWidth*(i-f.from))),o=(s<0?f.top:f.bottom)+u}let d=l.left+a,h=n??r.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let m=o+(h+f)*s,g=Wq(r,{x:d,y:m},!1,s);if(m<l.top||m>l.bottom||(s<0?g<i:g>i)){let y=r.docView.coordsForChar(g),b=!y||m<y.top?-1:1;return Ee.cursor(g,b,void 0,a)}}}function _1(r,e,t){for(;;){let n=0;for(let i of r)i.between(e-1,e+1,(s,a,o)=>{if(e>s&&e<a){let l=n||t||(e-s<a-e?-1:1);e=l<0?s:a,n=l}});if(!n)return e}}function x_(r,e,t){let n=_1(r.state.facet(BL).map(i=>i(r)),t.from,e.head>t.from?-1:1);return n==t.from?t:Ee.cursor(n,n<t.from?1:-1)}const Zm="￿";class w1e{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet($t.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Zm}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let i=e;;){this.findPointBefore(n,i);let s=this.text.length;this.readNode(i);let a=i.nextSibling;if(a==t)break;let o=ir.get(i),l=ir.get(a);(o&&l?o.breakAfter:(o?o.breakAfter:bx(i))||bx(a)&&(i.nodeName!="BR"||i.cmIgnore)&&this.text.length>s)&&this.lineBreak(),i=a}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,i=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,a=1,o;if(this.lineSeparator?(s=t.indexOf(this.lineSeparator,n),a=this.lineSeparator.length):(o=i.exec(t))&&(s=o.index,a=o[0].length),this.append(t.slice(n,s<0?t.length:s)),s<0)break;if(this.lineBreak(),a>1)for(let l of this.points)l.node==e&&l.pos>this.text.length&&(l.pos-=a-1);n=s+a}}readNode(e){if(e.cmIgnore)return;let t=ir.get(e),n=t&&t.overrideDOMText;if(n!=null){this.findPointInside(e,n.length);for(let i=n.iter();!i.next().done;)i.lineBreak?this.lineBreak():this.append(i.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(e.nodeType==3?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(T1e(e,n.node,n.offset)?t:0))}}function T1e(r,e,t){for(;;){if(!e||t<mo(e))return!1;if(e==r)return!0;t=$d(e)+1,e=e.parentNode}}class HF{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class S1e{constructor(e,t,n,i){this.typeOver=i,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:s,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let o=s||a?[]:C1e(e),l=new w1e(o,e.state);l.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=l.text,this.newSel=R1e(o,this.bounds.from)}else{let o=e.observer.selectionRange,l=s&&s.node==o.focusNode&&s.offset==o.focusOffset||!Wk(e.contentDOM,o.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(o.focusNode,o.focusOffset),c=a&&a.node==o.anchorNode&&a.offset==o.anchorOffset||!Wk(e.contentDOM,o.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(o.anchorNode,o.anchorOffset),u=e.viewport;if((Me.ios||Me.chrome)&&e.state.selection.main.empty&&l!=c&&(u.from>0||u.to<e.state.doc.length)){let d=Math.min(l,c),h=Math.max(l,c),f=u.from-d,m=u.to-h;(f==0||f==1||d==0)&&(m==0||m==-1||h==e.state.doc.length)&&(l=0,c=e.state.doc.length)}this.newSel=Ee.single(c,l)}}}function Hq(r,e){let t,{newSel:n}=e,i=r.state.selection.main,s=r.inputState.lastKeyTime>Date.now()-100?r.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:o}=e.bounds,l=i.from,c=null;(s===8||Me.android&&e.text.length<o-a)&&(l=i.to,c="end");let u=_1e(r.state.doc.sliceString(a,o,Zm),e.text,l-a,c);u&&(Me.chrome&&s==13&&u.toB==u.from+2&&e.text.slice(u.from,u.toB)==Zm+Zm&&u.toB--,t={from:a+u.from,to:a+u.toA,insert:Bt.of(e.text.slice(u.from,u.toB).split(Zm))})}else n&&(!r.hasFocus&&r.state.facet(ll)||n.main.eq(i))&&(n=null);if(!t&&!n)return!1;if(!t&&e.typeOver&&!i.empty&&n&&n.main.empty?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,i.to)}:(Me.mac||Me.android)&&t&&t.from==t.to&&t.from==i.head-1&&/^\. ?$/.test(t.insert.toString())&&r.contentDOM.getAttribute("autocorrect")=="off"?(n&&t.insert.length==2&&(n=Ee.single(n.main.anchor-1,n.main.head-1)),t={from:t.from,to:t.to,insert:Bt.of([t.insert.toString().replace("."," ")])}):t&&t.from>=i.from&&t.to<=i.to&&(t.from!=i.from||t.to!=i.to)&&i.to-i.from-(t.to-t.from)<=4?t={from:i.from,to:i.to,insert:r.state.doc.slice(i.from,t.from).append(t.insert).append(r.state.doc.slice(t.to,i.to))}:Me.chrome&&t&&t.from==t.to&&t.from==i.head&&t.insert.toString()==`
 `&&r.lineWrapping&&(n&&(n=Ee.single(n.main.anchor-1,n.main.head-1)),t={from:i.from,to:i.to,insert:Bt.of([" "])}),t)return WL(r,t,n,s);if(n&&!n.main.eq(i)){let a=!1,o="select";return r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(a=!0),o=r.inputState.lastSelectionOrigin),r.dispatch({selection:n,scrollIntoView:a,userEvent:o}),!0}else return!1}function WL(r,e,t,n=-1){if(Me.ios&&r.inputState.flushIOSKey(e))return!0;let i=r.state.selection.main;if(Me.android&&(e.to==i.to&&(e.from==i.from||e.from==i.from-1&&r.state.sliceDoc(e.from,i.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&If(r.contentDOM,"Enter",13)||(e.from==i.from-1&&e.to==i.to&&e.insert.length==0||n==8&&e.insert.length<e.to-e.from&&e.to>i.head)&&If(r.contentDOM,"Backspace",8)||e.from==i.from&&e.to==i.to+1&&e.insert.length==0&&If(r.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();r.inputState.composing>=0&&r.inputState.composing++;let a,o=()=>a||(a=A1e(r,e,t));return r.state.facet(Iq).some(l=>l(r,e.from,e.to,s,o))||r.dispatch(o()),!0}function A1e(r,e,t){let n,i=r.state,s=i.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&r.inputState.composing<0){let o=s.from<e.from?i.sliceDoc(s.from,e.from):"",l=s.to>e.to?i.sliceDoc(e.to,s.to):"";n=i.replaceSelection(r.state.toText(o+e.insert.sliceString(0,void 0,r.state.lineBreak)+l))}else{let o=i.changes(e),l=t&&t.main.to<=o.newLength?t.main:void 0;if(i.selection.ranges.length>1&&r.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let c=r.state.sliceDoc(e.from,e.to),u,d=t&&Uq(r,t.main.head);if(d){let m=e.insert.length-(e.to-e.from);u={from:d.from,to:d.to-m}}else u=r.state.doc.lineAt(s.head);let h=s.to-e.to,f=s.to-s.from;n=i.changeByRange(m=>{if(m.from==s.from&&m.to==s.to)return{changes:o,range:l||m.map(o)};let g=m.to-h,y=g-c.length;if(m.to-m.from!=f||r.state.sliceDoc(y,g)!=c||m.to>=u.from&&m.from<=u.to)return{range:m};let b=i.changes({from:y,to:g,insert:e.insert}),E=m.to-s.to;return{changes:b,range:l?Ee.range(Math.max(0,l.anchor+E),Math.max(0,l.head+E)):m.map(b)}})}else n={changes:o,selection:l&&i.selection.replaceRange(l)}}let a="input.type";return(r.composing||r.inputState.compositionPendingChange&&r.inputState.compositionEndedAt>Date.now()-50)&&(r.inputState.compositionPendingChange=!1,a+=".compose",r.inputState.compositionFirstChange&&(a+=".start",r.inputState.compositionFirstChange=!1)),i.update(n,{userEvent:a,scrollIntoView:!0})}function _1e(r,e,t,n){let i=Math.min(r.length,e.length),s=0;for(;s<i&&r.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==i&&r.length==e.length)return null;let a=r.length,o=e.length;for(;a>0&&o>0&&r.charCodeAt(a-1)==e.charCodeAt(o-1);)a--,o--;if(n=="end"){let l=Math.max(0,s-Math.min(a,o));t-=a+l-s}if(a<s&&r.length<e.length){let l=t<=s&&t>=a?s-t:0;s-=l,o=s+(o-a),a=s}else if(o<s){let l=t<=s&&t>=o?s-t:0;s-=l,a=s+(a-o),o=s}return{from:s,toA:a,toB:o}}function C1e(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:s}=r.observer.selectionRange;return t&&(e.push(new HF(t,n)),(i!=t||s!=n)&&e.push(new HF(i,s))),e}function R1e(r,e){if(r.length==0)return null;let t=r[0].pos,n=r.length==2?r[1].pos:t;return t>-1&&n>-1?Ee.single(t+e,n+e):null}class k1e{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,Me.safari&&e.contentDOM.addEventListener("input",()=>null),Me.gecko&&q1e(e.contentDOM.ownerDocument)}handleEvent(e){!N1e(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let i of n.observers)i(this.view,t);for(let i of n.handlers){if(t.defaultPrevented)break;if(i(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=I1e(e),n=this.handlers,i=this.view.contentDOM;for(let s in t)if(s!="scroll"){let a=!t[s].handlers.length,o=n[s];o&&a!=!o.handlers.length&&(i.removeEventListener(s,this.handleEvent),o=null),o||i.addEventListener(s,this.handleEvent,{passive:a})}for(let s in n)s!="scroll"&&!t[s]&&i.removeEventListener(s,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Gq.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),Me.android&&Me.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return Me.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Vq.find(n=>n.keyCode==e.keyCode))&&!e.ctrlKey||$1e.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,If(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:Me.safari&&!Me.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function VF(r,e){return(t,n)=>{try{return e.call(r,n,t)}catch(i){Li(t.state,i)}}}function I1e(r){let e=Object.create(null);function t(n){return e[n]||(e[n]={observers:[],handlers:[]})}for(let n of r){let i=n.spec;if(i&&i.domEventHandlers)for(let s in i.domEventHandlers){let a=i.domEventHandlers[s];a&&t(s).handlers.push(VF(n.value,a))}if(i&&i.domEventObservers)for(let s in i.domEventObservers){let a=i.domEventObservers[s];a&&t(s).observers.push(VF(n.value,a))}}for(let n in da)t(n).handlers.push(da[n]);for(let n in $s)t(n).observers.push($s[n]);return e}const Vq=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$1e="dthko",Gq=[16,17,18,20,91,92,224,225],db=6;function hb(r){return Math.max(0,r)*.7+8}function D1e(r,e){return Math.max(Math.abs(r.clientX-e.clientX),Math.abs(r.clientY-e.clientY))}class L1e{constructor(e,t,n,i){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=i,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Hbe(e.contentDOM),this.atoms=e.state.facet(BL).map(a=>a(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet($t.allowMultipleSelections)&&O1e(e,t),this.dragging=M1e(e,t)&&Kq(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&D1e(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,i=0,s=0,a=this.view.win.innerWidth,o=this.view.win.innerHeight;this.scrollParents.x&&({left:i,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:o}=this.scrollParents.y.getBoundingClientRect());let l=UL(this.view);e.clientX-l.left<=i+db?t=-hb(i-e.clientX):e.clientX+l.right>=a-db&&(t=hb(e.clientX-a)),e.clientY-l.top<=s+db?n=-hb(s-e.clientY):e.clientY+l.bottom>=o-db&&(n=hb(e.clientY-o)),this.setScrollSpeed(t,n)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let i=e.ranges[n],s=null;if(i.empty){let a=_1(this.atoms,i.from,0);a!=i.from&&(s=Ee.cursor(a,-1))}else{let a=_1(this.atoms,i.from,-1),o=_1(this.atoms,i.to,1);(a!=i.from||o!=i.to)&&(s=Ee.range(i.from==i.anchor?a:o,i.from==i.head?a:o))}s&&(t||(t=e.ranges.slice()),t[n]=s)}return t?Ee.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!n.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function O1e(r,e){let t=r.state.facet(_q);return t.length?t[0](e):Me.mac?e.metaKey:e.ctrlKey}function P1e(r,e){let t=r.state.facet(Cq);return t.length?t[0](e):Me.mac?!e.altKey:!e.ctrlKey}function M1e(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let n=m0(r.root);if(!n||n.rangeCount==0)return!0;let i=n.getRangeAt(0).getClientRects();for(let s=0;s<i.length;s++){let a=i[s];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function N1e(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,n;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(n=ir.get(t))&&n.ignoreEvent(e))return!1;return!0}const da=Object.create(null),$s=Object.create(null),qq=Me.ie&&Me.ie_version<15||Me.ios&&Me.webkit_version<604;function F1e(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),jq(r,t.value)},50)}function wT(r,e,t){for(let n of r.facet(e))t=n(t,r);return t}function jq(r,e){e=wT(r.state,ML,e);let{state:t}=r,n,i=1,s=t.toText(e),a=s.lines==t.selection.ranges.length;if(eI!=null&&t.selection.ranges.every(l=>l.empty)&&eI==s.toString()){let l=-1;n=t.changeByRange(c=>{let u=t.doc.lineAt(c.from);if(u.from==l)return{range:c};l=u.from;let d=t.toText((a?s.line(i++).text:e)+t.lineBreak);return{changes:{from:u.from,insert:d},range:Ee.cursor(c.from+d.length)}})}else a?n=t.changeByRange(l=>{let c=s.line(i++);return{changes:{from:l.from,to:l.to,insert:c.text},range:Ee.cursor(l.from+c.length)}}):n=t.replaceSelection(s);r.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}$s.scroll=r=>{r.inputState.lastScrollTop=r.scrollDOM.scrollTop,r.inputState.lastScrollLeft=r.scrollDOM.scrollLeft};da.keydown=(r,e)=>(r.inputState.setSelectionOrigin("select"),e.keyCode==27&&r.inputState.tabFocusMode!=0&&(r.inputState.tabFocusMode=Date.now()+2e3),!1);$s.touchstart=(r,e)=>{r.inputState.lastTouchTime=Date.now(),r.inputState.setSelectionOrigin("select.pointer")};$s.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")};da.mousedown=(r,e)=>{if(r.observer.flush(),r.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let n of r.state.facet(Rq))if(t=n(r,e),t)break;if(!t&&e.button==0&&(t=W1e(r,e)),t){let n=!r.hasFocus;r.inputState.startMouseSelection(new L1e(r,e,t,n)),n&&r.observer.ignore(()=>{oq(r.contentDOM);let s=r.root.activeElement;s&&!s.contains(r.contentDOM)&&s.blur()});let i=r.inputState.mouseSelection;if(i)return i.start(e),i.dragging===!1}return!1};function GF(r,e,t,n){if(n==1)return Ee.cursor(e,t);if(n==2)return p1e(r.state,e,t);{let i=qr.find(r.docView,e),s=r.state.doc.lineAt(i?i.posAtEnd:e),a=i?i.posAtStart:s.from,o=i?i.posAtEnd:s.to;return o<r.state.doc.length&&o==s.to&&o++,Ee.range(a,o)}}let qF=(r,e,t)=>e>=t.top&&e<=t.bottom&&r>=t.left&&r<=t.right;function B1e(r,e,t,n){let i=qr.find(r.docView,e);if(!i)return 1;let s=e-i.posAtStart;if(s==0)return 1;if(s==i.length)return-1;let a=i.coordsAt(s,-1);if(a&&qF(t,n,a))return-1;let o=i.coordsAt(s,1);return o&&qF(t,n,o)?1:a&&a.bottom>=n?-1:1}function jF(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:B1e(r,t,e.clientX,e.clientY)}}const U1e=Me.ie&&Me.ie_version<=11;let KF=null,zF=0,YF=0;function Kq(r){if(!U1e)return r.detail;let e=KF,t=YF;return KF=r,YF=Date.now(),zF=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(zF+1)%3:1}function W1e(r,e){let t=jF(r,e),n=Kq(e),i=r.state.selection;return{update(s){s.docChanged&&(t.pos=s.changes.mapPos(t.pos),i=i.map(s.changes))},get(s,a,o){let l=jF(r,s),c,u=GF(r,l.pos,l.bias,n);if(t.pos!=l.pos&&!a){let d=GF(r,t.pos,t.bias,n),h=Math.min(d.from,u.from),f=Math.max(d.to,u.to);u=h<u.from?Ee.range(h,f):Ee.range(f,h)}return a?i.replaceRange(i.main.extend(u.from,u.to)):o&&n==1&&i.ranges.length>1&&(c=H1e(i,l.pos))?c:o?i.addRange(u):Ee.create([u])}}}function H1e(r,e){for(let t=0;t<r.ranges.length;t++){let{from:n,to:i}=r.ranges[t];if(n<=e&&i>=e)return Ee.create(r.ranges.slice(0,t).concat(r.ranges.slice(t+1)),r.mainIndex==t?0:r.mainIndex-(r.mainIndex>t?1:0))}return null}da.dragstart=(r,e)=>{let{selection:{main:t}}=r.state;if(e.target.draggable){let i=r.docView.nearest(e.target);if(i&&i.isWidget){let s=i.posAtStart,a=s+i.length;(s>=t.to||a<=t.from)&&(t=Ee.range(s,a))}}let{inputState:n}=r;return n.mouseSelection&&(n.mouseSelection.dragging=!0),n.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",wT(r.state,NL,r.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};da.dragend=r=>(r.inputState.draggedContent=null,!1);function QF(r,e,t,n){if(t=wT(r.state,ML,t),!t)return;let i=r.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=r.inputState,a=n&&s&&P1e(r,e)?{from:s.from,to:s.to}:null,o={from:i,insert:t},l=r.state.changes(a?[a,o]:o);r.focus(),r.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:a?"move.drop":"input.drop"}),r.inputState.draggedContent=null}da.drop=(r,e)=>{if(!e.dataTransfer)return!1;if(r.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let n=Array(t.length),i=0,s=()=>{++i==t.length&&QF(r,e,n.filter(a=>a!=null).join(r.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let o=new FileReader;o.onerror=s,o.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(o.result)||(n[a]=o.result),s()},o.readAsText(t[a])}return!0}else{let n=e.dataTransfer.getData("Text");if(n)return QF(r,e,n,!0),!0}return!1};da.paste=(r,e)=>{if(r.state.readOnly)return!0;r.observer.flush();let t=qq?null:e.clipboardData;return t?(jq(r,t.getData("text/plain")||t.getData("text/uri-list")),!0):(F1e(r),!1)};function V1e(r,e){let t=r.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=e,n.focus(),n.selectionEnd=e.length,n.selectionStart=0,setTimeout(()=>{n.remove(),r.focus()},50)}function G1e(r){let e=[],t=[],n=!1;for(let i of r.selection.ranges)i.empty||(e.push(r.sliceDoc(i.from,i.to)),t.push(i));if(!e.length){let i=-1;for(let{from:s}of r.selection.ranges){let a=r.doc.lineAt(s);a.number>i&&(e.push(a.text),t.push({from:a.from,to:Math.min(r.doc.length,a.to+1)})),i=a.number}n=!0}return{text:wT(r,NL,e.join(r.lineBreak)),ranges:t,linewise:n}}let eI=null;da.copy=da.cut=(r,e)=>{let{text:t,ranges:n,linewise:i}=G1e(r.state);if(!t&&!i)return!1;eI=i?t:null,e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:n,scrollIntoView:!0,userEvent:"delete.cut"});let s=qq?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",t),!0):(V1e(r,t),!1)};const zq=So.define();function Yq(r,e){let t=[];for(let n of r.facet($q)){let i=n(r,e);i&&t.push(i)}return t?r.update({effects:t,annotations:zq.of(!0)}):null}function Qq(r){setTimeout(()=>{let e=r.hasFocus;if(e!=r.inputState.notifiedFocused){let t=Yq(r.state,e);t?r.dispatch(t):r.update([])}},10)}$s.focus=r=>{r.inputState.lastFocusTime=Date.now(),!r.scrollDOM.scrollTop&&(r.inputState.lastScrollTop||r.inputState.lastScrollLeft)&&(r.scrollDOM.scrollTop=r.inputState.lastScrollTop,r.scrollDOM.scrollLeft=r.inputState.lastScrollLeft),Qq(r)};$s.blur=r=>{r.observer.clearSelectionRange(),Qq(r)};$s.compositionstart=$s.compositionupdate=r=>{r.observer.editContext||(r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0))};$s.compositionend=r=>{r.observer.editContext||(r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionPendingKey=!0,r.inputState.compositionPendingChange=r.observer.pendingRecords().length>0,r.inputState.compositionFirstChange=null,Me.chrome&&Me.android?r.observer.flushSoon():r.inputState.compositionPendingChange?Promise.resolve().then(()=>r.observer.flush()):setTimeout(()=>{r.inputState.composing<0&&r.docView.hasComposition&&r.update([])},50))};$s.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()};da.beforeinput=(r,e)=>{var t,n;if(e.inputType=="insertReplacementText"&&r.observer.editContext){let s=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(s&&a.length){let o=a[0],l=r.posAtDOM(o.startContainer,o.startOffset),c=r.posAtDOM(o.endContainer,o.endOffset);return WL(r,{from:l,to:c,insert:r.state.toText(s)},null),!0}}let i;if(Me.chrome&&Me.android&&(i=Vq.find(s=>s.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let s=((n=window.visualViewport)===null||n===void 0?void 0:n.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>s+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}return Me.ios&&e.inputType=="deleteContentForward"&&r.observer.flushSoon(),Me.safari&&e.inputType=="insertText"&&r.inputState.composing>=0&&setTimeout(()=>$s.compositionend(r,e),20),!1};const XF=new Set;function q1e(r){XF.has(r)||(XF.add(r),r.addEventListener("copy",()=>{}),r.addEventListener("cut",()=>{}))}const ZF=["pre-wrap","normal","pre-line","break-spaces"];let ap=!1;function JF(){ap=!1}class j1e{constructor(e){this.lineWrapping=e,this.doc=Bt.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return ZF.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let i=e[n];i<0?n++:this.heightSamples[Math.floor(i*10)]||(t=!0,this.heightSamples[Math.floor(i*10)]=!0)}return t}refresh(e,t,n,i,s,a){let o=ZF.indexOf(e)>-1,l=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=o;if(this.lineWrapping=o,this.lineHeight=t,this.charWidth=n,this.textHeight=i,this.lineLength=s,l){this.heightSamples={};for(let c=0;c<a.length;c++){let u=a[c];u<0?c++:this.heightSamples[Math.floor(u*10)]=!0}}return l}}class K1e{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ya{constructor(e,t,n,i,s){this.from=e,this.length=t,this.top=n,this.height=i,this._content=s}get type(){return typeof this._content=="number"?fi.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Bc?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ya(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var pr=function(r){return r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight",r}(pr||(pr={}));const C1=.001;class pi{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>C1&&(ap=!0),this.height=e)}replace(e,t,n){return pi.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,i){let s=this,a=n.doc;for(let o=i.length-1;o>=0;o--){let{fromA:l,toA:c,fromB:u,toB:d}=i[o],h=s.lineAt(l,pr.ByPosNoHeight,n.setDoc(t),0,0),f=h.to>=c?h:s.lineAt(c,pr.ByPosNoHeight,n,0,0);for(d+=f.to-c,c=f.to;o>0&&h.from<=i[o-1].toA;)l=i[o-1].fromA,u=i[o-1].fromB,o--,l<h.from&&(h=s.lineAt(l,pr.ByPosNoHeight,n,0,0));u+=h.from-l,l=h.from;let m=HL.build(n.setDoc(a),e,u,d);s=wx(s,s.replace(l,c,m))}return s.updateHeight(n,0)}static empty(){return new Ji(0,0)}static of(e){if(e.length==1)return e[0];let t=0,n=e.length,i=0,s=0;for(;;)if(t==n)if(i>s*2){let o=e[t-1];o.break?e.splice(--t,1,o.left,null,o.right):e.splice(--t,1,o.left,o.right),n+=1+o.break,i-=o.size}else if(s>i*2){let o=e[n];o.break?e.splice(n,1,o.left,null,o.right):e.splice(n,1,o.left,o.right),n+=2+o.break,s-=o.size}else break;else if(i<s){let o=e[t++];o&&(i+=o.size)}else{let o=e[--n];o&&(s+=o.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,n++),new z1e(pi.of(e.slice(0,t)),a,pi.of(e.slice(n)))}}function wx(r,e){return r==e?r:(r.constructor!=e.constructor&&(ap=!0),e)}pi.prototype.size=1;class Xq extends pi{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,i){return new Ya(i,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,i,s){return this.blockAt(0,n,i,s)}forEachLine(e,t,n,i,s,a){e<=s+this.length&&t>=s&&a(this.blockAt(0,n,i,s))}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more&&this.setHeight(i.heights[i.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Ji extends Xq{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,i){return new Ya(i,this.length,n,this.height,this.breaks)}replace(e,t,n){let i=n[0];return n.length==1&&(i instanceof Ji||i instanceof Wn&&i.flags&4)&&Math.abs(this.length-i.length)<10?(i instanceof Wn?i=new Ji(i.length,this.height):i.height=this.height,this.outdated||(i.outdated=!1),i):pi.of(n)}updateHeight(e,t=0,n=!1,i){return i&&i.from<=t&&i.more?this.setHeight(i.heights[i.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Wn extends pi{constructor(e){super(e,0)}heightMetrics(e,t){let n=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,s=i-n+1,a,o=0;if(e.lineWrapping){let l=Math.min(this.height,e.lineHeight*s);a=l/s,this.length>s+1&&(o=(this.height-l)/(this.length-s-1))}else a=this.height/s;return{firstLine:n,lastLine:i,perLine:a,perChar:o}}blockAt(e,t,n,i){let{firstLine:s,lastLine:a,perLine:o,perChar:l}=this.heightMetrics(t,i);if(t.lineWrapping){let c=i+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),u=t.doc.lineAt(c),d=o+u.length*l,h=Math.max(n,e-d/2);return new Ya(u.from,u.length,h,d,0)}else{let c=Math.max(0,Math.min(a-s,Math.floor((e-n)/o))),{from:u,length:d}=t.doc.line(s+c);return new Ya(u,d,n+o*c,o,0)}}lineAt(e,t,n,i,s){if(t==pr.ByHeight)return this.blockAt(e,n,i,s);if(t==pr.ByPosNoHeight){let{from:f,to:m}=n.doc.lineAt(e);return new Ya(f,m-f,0,0,0)}let{firstLine:a,perLine:o,perChar:l}=this.heightMetrics(n,s),c=n.doc.lineAt(e),u=o+c.length*l,d=c.number-a,h=i+o*d+l*(c.from-s-d);return new Ya(c.from,c.length,Math.max(i,Math.min(h,i+this.height-u)),u,0)}forEachLine(e,t,n,i,s,a){e=Math.max(e,s),t=Math.min(t,s+this.length);let{firstLine:o,perLine:l,perChar:c}=this.heightMetrics(n,s);for(let u=e,d=i;u<=t;){let h=n.doc.lineAt(u);if(u==e){let m=h.number-o;d+=l*m+c*(e-s-m)}let f=l+c*h.length;a(new Ya(h.from,h.length,d,f,0)),d+=f,u=h.to+1}}replace(e,t,n){let i=this.length-t;if(i>0){let s=n[n.length-1];s instanceof Wn?n[n.length-1]=new Wn(s.length+i):n.push(null,new Wn(i-1))}if(e>0){let s=n[0];s instanceof Wn?n[0]=new Wn(e+s.length):n.unshift(new Wn(e-1),null)}return pi.of(n)}decomposeLeft(e,t){t.push(new Wn(e-1),null)}decomposeRight(e,t){t.push(null,new Wn(this.length-e-1))}updateHeight(e,t=0,n=!1,i){let s=t+this.length;if(i&&i.from<=t+this.length&&i.more){let a=[],o=Math.max(t,i.from),l=-1;for(i.from>t&&a.push(new Wn(i.from-t-1).updateHeight(e,t));o<=s&&i.more;){let u=e.doc.lineAt(o).length;a.length&&a.push(null);let d=i.heights[i.index++];l==-1?l=d:Math.abs(d-l)>=C1&&(l=-2);let h=new Ji(u,d);h.outdated=!1,a.push(h),o+=u+1}o<=s&&a.push(null,new Wn(s-o).updateHeight(e,o));let c=pi.of(a);return(l<0||Math.abs(c.height-this.height)>=C1||Math.abs(l-this.heightMetrics(e,t).perLine)>=C1)&&(ap=!0),wx(this,c)}else(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class z1e extends pi{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return this.flags&1}blockAt(e,t,n,i){let s=n+this.left.height;return e<s?this.left.blockAt(e,t,n,i):this.right.blockAt(e,t,s,i+this.left.length+this.break)}lineAt(e,t,n,i,s){let a=i+this.left.height,o=s+this.left.length+this.break,l=t==pr.ByHeight?e<a:e<o,c=l?this.left.lineAt(e,t,n,i,s):this.right.lineAt(e,t,n,a,o);if(this.break||(l?c.to<o:c.from>o))return c;let u=t==pr.ByPosNoHeight?pr.ByPosNoHeight:pr.ByPos;return l?c.join(this.right.lineAt(o,u,n,a,o)):this.left.lineAt(o,u,n,i,s).join(c)}forEachLine(e,t,n,i,s,a){let o=i+this.left.height,l=s+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,n,i,s,a),t>=l&&this.right.forEachLine(e,t,n,o,l,a);else{let c=this.lineAt(l,pr.ByPos,n,i,s);e<c.from&&this.left.forEachLine(e,c.from-1,n,i,s,a),c.to>=e&&c.from<=t&&a(c),t>c.to&&this.right.forEachLine(c.to+1,t,n,o,l,a)}}replace(e,t,n){let i=this.left.length+this.break;if(t<i)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-i,t-i,n));let s=[];e>0&&this.decomposeLeft(e,s);let a=s.length;for(let o of n)s.push(o);if(e>0&&e4(s,a-1),t<this.length){let o=s.length;this.decomposeRight(t,s),e4(s,o)}return pi.of(s)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,i=n+this.break;if(e>=i)return this.right.decomposeRight(e-i,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<i&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?pi.of(this.break?[e,null,t]:[e,t]):(this.left=wx(this.left,e),this.right=wx(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,i){let{left:s,right:a}=this,o=t+s.length+this.break,l=null;return i&&i.from<=t+s.length&&i.more?l=s=s.updateHeight(e,t,n,i):s.updateHeight(e,t,n),i&&i.from<=o+a.length&&i.more?l=a=a.updateHeight(e,o,n,i):a.updateHeight(e,o,n),l?this.balanced(s,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function e4(r,e){let t,n;r[e]==null&&(t=r[e-1])instanceof Wn&&(n=r[e+1])instanceof Wn&&r.splice(e-1,3,new Wn(t.length+1+n.length))}const Y1e=5;class HL{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let n=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof Ji?i.length+=n-this.pos:(n>this.pos||!this.isCovered)&&this.nodes.push(new Ji(n-this.pos,-1)),this.writtenTo=n,t>n&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let i=n.widget?n.widget.estimatedHeight:0,s=n.widget?n.widget.lineBreaks:0;i<0&&(i=this.oracle.lineHeight);let a=t-e;n.block?this.addBlock(new Xq(a,i,n)):(a||s||i>=Y1e)&&this.addLineDeco(i,s,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Ji(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Wn(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Ji)return e;let t=new Ji(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let i=this.ensureLine();i.length+=n,i.collapsed+=n,i.widgetHeight=Math.max(i.widgetHeight,e),i.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof Ji)&&!this.isCovered?this.nodes.push(new Ji(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let n=e;for(let i of this.nodes)i instanceof Ji&&i.updateHeight(this.oracle,n),n+=i?i.length:1;return this.nodes}static build(e,t,n,i){let s=new HL(n,e);return Pt.spans(t,n,i,s,0),s.finish(n)}}function Q1e(r,e,t){let n=new X1e;return Pt.compare(r,e,t,n,0),n.changes}class X1e{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,i){(e<t||n&&n.heightRelevant||i&&i.heightRelevant)&&A1(e,t,this.changes,5)}}function Z1e(r,e){let t=r.getBoundingClientRect(),n=r.ownerDocument,i=n.defaultView||window,s=Math.max(0,t.left),a=Math.min(i.innerWidth,t.right),o=Math.max(0,t.top),l=Math.min(i.innerHeight,t.bottom);for(let c=r.parentNode;c&&c!=n.body;)if(c.nodeType==1){let u=c,d=window.getComputedStyle(u);if((u.scrollHeight>u.clientHeight||u.scrollWidth>u.clientWidth)&&d.overflow!="visible"){let h=u.getBoundingClientRect();s=Math.max(s,h.left),a=Math.min(a,h.right),o=Math.max(o,h.top),l=Math.min(c==r.parentNode?i.innerHeight:l,h.bottom)}c=d.position=="absolute"||d.position=="fixed"?u.offsetParent:u.parentNode}else if(c.nodeType==11)c=c.host;else break;return{left:s-t.left,right:Math.max(s,a)-t.left,top:o-(t.top+e),bottom:Math.max(o,l)-(t.top+e)}}function J1e(r){let e=r.getBoundingClientRect(),t=r.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function eEe(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class w_{constructor(e,t,n,i){this.from=e,this.to=t,this.size=n,this.displaySize=i}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let i=e[n],s=t[n];if(i.from!=s.from||i.to!=s.to||i.size!=s.size)return!1}return!0}draw(e,t){return Ye.replace({widget:new tEe(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class tEe extends Al{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class t4{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=r4,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=gr.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(FL).some(n=>typeof n!="function"&&n.class=="cm-lineWrapping");this.heightOracle=new j1e(t),this.stateDeco=e.facet(g0).filter(n=>typeof n!="function"),this.heightMap=pi.empty().applyChanges(this.stateDeco,Bt.empty,this.heightOracle.setDoc(e.doc),[new Is(0,0,0,e.doc.length)]);for(let n=0;n<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());n++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ye.set(this.lineGaps.map(n=>n.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let i=n?t.head:t.anchor;if(!e.some(({from:s,to:a})=>i>=s&&i<=a)){let{from:s,to:a}=this.lineBlockAt(i);e.push(new fb(s,a))}}return this.viewports=e.sort((n,i)=>n.from-i.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?r4:new VL(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Jm(e,this.scaler))})}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(g0).filter(u=>typeof u!="function");let i=e.changedRanges,s=Is.extendWithRanges(i,Q1e(n,this.stateDeco,e?e.changes:un.empty(this.state.doc.length))),a=this.heightMap.height,o=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);JF(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=a||ap)&&(e.flags|=2),o?(this.scrollAnchorPos=e.changes.mapPos(o.from,-1),this.scrollAnchorHeight=o.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let l=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<l.from||t.range.head>l.to)||!this.viewportIsAppropriate(l))&&(l=this.getViewport(0,t));let c=l.from!=this.viewport.from||l.to!=this.viewport.to;this.viewport=l,e.flags|=this.updateForViewport(),(c||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Lq)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),i=this.heightOracle,s=n.whiteSpace;this.defaultTextDirection=n.direction=="rtl"?gr.RTL:gr.LTR;let a=this.heightOracle.mustRefreshForWrapping(s),o=t.getBoundingClientRect(),l=a||this.mustMeasureContent||this.contentDOMHeight!=o.height;this.contentDOMHeight=o.height,this.mustMeasureContent=!1;let c=0,u=0;if(o.width&&o.height){let{scaleX:A,scaleY:S}=aq(t,o);(A>.005&&Math.abs(this.scaleX-A)>.005||S>.005&&Math.abs(this.scaleY-S)>.005)&&(this.scaleX=A,this.scaleY=S,c|=16,a=l=!0)}let d=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;(this.paddingTop!=d||this.paddingBottom!=h)&&(this.paddingTop=d,this.paddingBottom=h,c|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(i.lineWrapping&&(l=!0),this.editorWidth=e.scrollDOM.clientWidth,c|=16);let f=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=f&&(this.scrollAnchorHeight=-1,this.scrollTop=f),this.scrolledToBottom=cq(e.scrollDOM);let m=(this.printing?eEe:Z1e)(t,this.paddingTop),g=m.top-this.pixelViewport.top,y=m.bottom-this.pixelViewport.bottom;this.pixelViewport=m;let b=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(b!=this.inView&&(this.inView=b,b&&(l=!0)),!this.inView&&!this.scrollTarget&&!J1e(e.dom))return 0;let E=o.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=o.width,this.editorHeight=e.scrollDOM.clientHeight,c|=16),l){let A=e.docView.measureVisibleLineHeights(this.viewport);if(i.mustRefreshForHeights(A)&&(a=!0),a||i.lineWrapping&&Math.abs(E-this.contentDOMWidth)>i.charWidth){let{lineHeight:S,charWidth:_,textHeight:C}=e.docView.measureTextSize();a=S>0&&i.refresh(s,S,_,C,E/_,A),a&&(e.docView.minWidth=0,c|=16)}g>0&&y>0?u=Math.max(g,y):g<0&&y<0&&(u=Math.min(g,y)),JF();for(let S of this.viewports){let _=S.from==this.viewport.from?A:e.docView.measureVisibleLineHeights(S);this.heightMap=(a?pi.empty().applyChanges(this.stateDeco,Bt.empty,this.heightOracle,[new Is(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(i,0,a,new K1e(S.from,_))}ap&&(c|=2)}let w=!this.viewportIsAppropriate(this.viewport,u)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return w&&(c&2&&(c|=this.updateScaler()),this.viewport=this.getViewport(u,this.scrollTarget),c|=this.updateForViewport()),(c&2||w)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),c|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),c}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),i=this.heightMap,s=this.heightOracle,{visibleTop:a,visibleBottom:o}=this,l=new fb(i.lineAt(a-n*1e3,pr.ByHeight,s,0,0).from,i.lineAt(o+(1-n)*1e3,pr.ByHeight,s,0,0).to);if(t){let{head:c}=t.range;if(c<l.from||c>l.to){let u=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),d=i.lineAt(c,pr.ByPos,s,0,0),h;t.y=="center"?h=(d.top+d.bottom)/2-u/2:t.y=="start"||t.y=="nearest"&&c<l.from?h=d.top:h=d.bottom-u,l=new fb(i.lineAt(h-1e3/2,pr.ByHeight,s,0,0).from,i.lineAt(h+u+1e3/2,pr.ByHeight,s,0,0).to)}}return l}mapViewport(e,t){let n=t.mapPos(e.from,-1),i=t.mapPos(e.to,1);return new fb(this.heightMap.lineAt(n,pr.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(i,pr.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:i}=this.heightMap.lineAt(e,pr.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(t,pr.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:o}=this;return(e==0||i<=a-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||s>=o+Math.max(10,Math.min(n,250)))&&i>a-2*1e3&&s<o+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let i of e)t.touchesRange(i.from,i.to)||n.push(new w_(t.mapPos(i.from),t.mapPos(i.to),i.size,i.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,i=n?1e4:2e3,s=i>>1,a=i<<1;if(this.defaultTextDirection!=gr.LTR&&!n)return[];let o=[],l=(u,d,h,f)=>{if(d-u<s)return;let m=this.state.selection.main,g=[m.from];m.empty||g.push(m.to);for(let b of g)if(b>u&&b<d){l(u,b-10,h,f),l(b+10,d,h,f);return}let y=nEe(e,b=>b.from>=h.from&&b.to<=h.to&&Math.abs(b.from-u)<s&&Math.abs(b.to-d)<s&&!g.some(E=>b.from<E&&b.to>E));if(!y){if(d<h.to&&t&&n&&t.visibleRanges.some(w=>w.from<=d&&w.to>=d)){let w=t.moveToLineBoundary(Ee.cursor(d),!1,!0).head;w>u&&(d=w)}let b=this.gapSize(h,u,d,f),E=n||b<2e6?b:2e6;y=new w_(u,d,b,E)}o.push(y)},c=u=>{if(u.length<a||u.type!=fi.Text)return;let d=rEe(u.from,u.to,this.stateDeco);if(d.total<a)return;let h=this.scrollTarget?this.scrollTarget.range.head:null,f,m;if(n){let g=i/this.heightOracle.lineLength*this.heightOracle.lineHeight,y,b;if(h!=null){let E=mb(d,h),w=((this.visibleBottom-this.visibleTop)/2+g)/u.height;y=E-w,b=E+w}else y=(this.visibleTop-u.top-g)/u.height,b=(this.visibleBottom-u.top+g)/u.height;f=pb(d,y),m=pb(d,b)}else{let g=d.total*this.heightOracle.charWidth,y=i*this.heightOracle.charWidth,b=0;if(g>2e6)for(let _ of e)_.from>=u.from&&_.from<u.to&&_.size!=_.displaySize&&_.from*this.heightOracle.charWidth+b<this.pixelViewport.left&&(b=_.size-_.displaySize);let E=this.pixelViewport.left+b,w=this.pixelViewport.right+b,A,S;if(h!=null){let _=mb(d,h),C=((w-E)/2+y)/g;A=_-C,S=_+C}else A=(E-y)/g,S=(w+y)/g;f=pb(d,A),m=pb(d,S)}f>u.from&&l(u.from,f,u,d),m<u.to&&l(m,u.to,u,d)};for(let u of this.viewportLines)Array.isArray(u.type)?u.type.forEach(c):c(u);return o}gapSize(e,t,n,i){let s=mb(i,n)-mb(i,t);return this.heightOracle.lineWrapping?e.height*s:i.total*this.heightOracle.charWidth*s}updateLineGaps(e){w_.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ye.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let n=[];Pt.spans(t,this.viewport.from,this.viewport.to,{span(s,a){n.push({from:s,to:a})},point(){}},20);let i=0;if(n.length!=this.visibleRanges.length)i=12;else for(let s=0;s<n.length&&!(i&8);s++){let a=this.visibleRanges[s],o=n[s];(a.from!=o.from||a.to!=o.to)&&(i|=4,e&&e.mapPos(a.from,-1)==o.from&&e.mapPos(a.to,1)==o.to||(i|=8))}return this.visibleRanges=n,i}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Jm(this.heightMap.lineAt(e,pr.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Jm(this.heightMap.lineAt(this.scaler.fromDOM(e),pr.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Jm(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}let fb=class{constructor(e,t){this.from=e,this.to=t}};function rEe(r,e,t){let n=[],i=r,s=0;return Pt.spans(t,r,e,{span(){},point(a,o){a>i&&(n.push({from:i,to:a}),s+=a-i),i=o}},20),i<e&&(n.push({from:i,to:e}),s+=e-i),{total:s,ranges:n}}function pb({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let n=Math.floor(r*t);for(let i=0;;i++){let{from:s,to:a}=e[i],o=a-s;if(n<=o)return s+n;n-=o}}function mb(r,e){let t=0;for(let{from:n,to:i}of r.ranges){if(e<=i){t+=e-n;break}t+=i-n}return t/r.total}function nEe(r,e){for(let t of r)if(e(t))return t}const r4={toDOM(r){return r},fromDOM(r){return r},scale:1,eq(r){return r==this}};class VL{constructor(e,t,n){let i=0,s=0,a=0;this.viewports=n.map(({from:o,to:l})=>{let c=t.lineAt(o,pr.ByPos,e,0,0).top,u=t.lineAt(l,pr.ByPos,e,0,0).bottom;return i+=u-c,{from:o,to:l,top:c,bottom:u,domTop:0,domBottom:0}}),this.scale=(7e6-i)/(t.height-i);for(let o of this.viewports)o.domTop=a+(o.top-s)*this.scale,a=o.domBottom=o.domTop+(o.bottom-o.top),s=o.bottom}toDOM(e){for(let t=0,n=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.top)return i+(e-n)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);n=s.bottom,i=s.domBottom}}fromDOM(e){for(let t=0,n=0,i=0;;t++){let s=t<this.viewports.length?this.viewports[t]:null;if(!s||e<s.domTop)return n+(e-i)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);n=s.bottom,i=s.domBottom}}eq(e){return e instanceof VL?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to):!1}}function Jm(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),n=e.toDOM(r.bottom);return new Ya(r.from,r.length,t,n-t,Array.isArray(r._content)?r._content.map(i=>Jm(i,e)):r._content)}const gb=Be.define({combine:r=>r.join(" ")}),tI=Be.define({combine:r=>r.indexOf(!0)>-1}),rI=Nc.newName(),Zq=Nc.newName(),Jq=Nc.newName(),ej={"&light":"."+Zq,"&dark":"."+Jq};function nI(r,e,t){return new Nc(e,{finish(n){return/&/.test(n)?n.replace(/&\w*/,i=>{if(i=="&")return r;if(!t||!t[i])throw new RangeError(`Unsupported selector: ${i}`);return t[i]}):r+" "+n}})}const iEe=nI("."+rI,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ej),sEe={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},T_=Me.ie&&Me.ie_version<=11;class aEe{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Vbe,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let n of t)this.queue.push(n);(Me.ie&&Me.ie_version<=11||Me.ios&&e.composing)&&t.some(n=>n.type=="childList"&&n.removedNodes.length||n.type=="characterData"&&n.oldValue.length>n.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&e.constructor.EDIT_CONTEXT!==!1&&!(Me.chrome&&Me.chrome_version<126)&&(this.editContext=new lEe(e),e.state.facet(ll)&&(e.contentDOM.editContext=this.editContext.editContext)),T_&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,n)=>t!=e[n]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,i=this.selectionRange;if(n.state.facet(ll)?n.root.activeElement!=this.dom:!S1(this.dom,i))return;let s=i.anchorNode&&n.docView.nearest(i.anchorNode);if(s&&s.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(Me.ie&&Me.ie_version<=11||Me.android&&Me.chrome)&&!n.state.selection.main.empty&&i.focusNode&&Lg(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=m0(e.root);if(!t)return!1;let n=Me.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&oEe(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let i=S1(this.dom,n);return i&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&qbe(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),i&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(n.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else if(n.nodeType==11)n=n.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);for(let n of this.scrollTargets=t)n.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,sEe),T_&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),T_&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let i=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&If(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(i)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((n=this.delayedAndroidKey)===null||n===void 0)&&n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,i=!1;for(let s of e){let a=this.readMutation(s);a&&(a.typeOver&&(i=!0),t==-1?{from:t,to:n}=a:(t=Math.min(a.from,t),n=Math.max(a.to,n)))}return{from:t,to:n,typeOver:i}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),i=this.selectionChanged&&S1(this.dom,this.selectionRange);if(e<0&&!i)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new S1e(this.view,e,t,n);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,i=Hq(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),i}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let n=n4(t,e.previousSibling||e.target.previousSibling,-1),i=n4(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:i?t.posBefore(i):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(ll)!=e.state.facet(ll)&&(e.view.contentDOM.editContext=e.state.facet(ll)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(n=this.resizeScroll)===null||n===void 0||n.disconnect();for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function n4(r,e,t){for(;e;){let n=ir.get(e);if(n&&n.parent==r)return n;let i=e.parentNode;e=i!=r.dom?i:t>0?e.nextSibling:e.previousSibling}return null}function i4(r,e){let t=e.startContainer,n=e.startOffset,i=e.endContainer,s=e.endOffset,a=r.docView.domAtPos(r.state.selection.main.anchor);return Lg(a.node,a.offset,i,s)&&([t,n,i,s]=[i,s,t,n]),{anchorNode:t,anchorOffset:n,focusNode:i,focusOffset:s}}function oEe(r,e){if(e.getComposedRanges){let i=e.getComposedRanges(r.root)[0];if(i)return i4(r,i)}let t=null;function n(i){i.preventDefault(),i.stopImmediatePropagation(),t=i.getTargetRanges()[0]}return r.contentDOM.addEventListener("beforeinput",n,!0),r.dom.ownerDocument.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",n,!0),t?i4(r,t):null}class lEe{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=n=>{let i=e.state.selection.main,{anchor:s,head:a}=i,o=this.toEditorPos(n.updateRangeStart),l=this.toEditorPos(n.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:n.updateRangeStart,editorBase:o,drifted:!1});let c={from:o,to:l,insert:Bt.of(n.text.split(`
`))};if(c.from==this.from&&s<this.from?c.from=s:c.to==this.to&&s>this.to&&(c.to=s),c.from==c.to&&!c.insert.length){let u=Ee.single(this.toEditorPos(n.selectionStart),this.toEditorPos(n.selectionEnd));u.main.eq(i)||e.dispatch({selection:u,userEvent:"select"});return}if((Me.mac||Me.android)&&c.from==a-1&&/^\. ?$/.test(n.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(c={from:o,to:l,insert:Bt.of([n.text.replace("."," ")])}),this.pendingContextChange=c,!e.state.readOnly){let u=this.to-this.from+(c.to-c.from+c.insert.length);WL(e,c,Ee.single(this.toEditorPos(n.selectionStart,u),this.toEditorPos(n.selectionEnd,u)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=n=>{let i=[],s=null;for(let a=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);a<o;a++){let l=e.coordsForChar(a);s=l&&new DOMRect(l.left,l.top,l.right-l.left,l.bottom-l.top)||s||new DOMRect,i.push(s)}t.updateCharacterBounds(n.rangeStart,i)},this.handlers.textformatupdate=n=>{let i=[];for(let s of n.getTextFormats()){let a=s.underlineStyle,o=s.underlineThickness;if(a!="None"&&o!="None"){let l=this.toEditorPos(s.rangeStart),c=this.toEditorPos(s.rangeEnd);if(l<c){let u=`text-decoration: underline ${a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${o=="Thin"?1:2}px`;i.push(Ye.mark({attributes:{style:u}}).range(l,c))}}}e.dispatch({effects:Pq.of(Ye.set(i))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:n}=this.composing;this.composing=null,n&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:n=>{this.editContext.updateControlBounds(n.contentDOM.getBoundingClientRect());let i=m0(n.root);i&&i.rangeCount&&this.editContext.updateSelectionBounds(i.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,i=this.pendingContextChange;return e.changes.iterChanges((s,a,o,l,c)=>{if(n)return;let u=c.length-(a-s);if(i&&a>=i.to)if(i.from==s&&i.to==a&&i.insert.eq(c)){i=this.pendingContextChange=null,t+=u,this.to+=u;return}else i=null,this.revertPending(e.state);if(s+=t,a+=t,a<=this.from)this.from+=u,this.to+=u;else if(s<this.to){if(s<this.from||a>this.to||this.to-this.from+c.length>3e4){n=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(a),c.toString()),this.to+=u}t+=u}),i&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange,n=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(n.from,n.to)&&e.transactions.some(i=>!i.isUserEvent("input.type")&&i.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),i=this.toContextPos(t.head);(this.editContext.selectionStart!=n||this.editContext.selectionEnd!=i)&&this.editContext.updateSelection(n,i)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let n=this.composing;return n&&n.drifted?n.editorBase+(e-n.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(i=>i.forEach(s=>n(s,this)))||(i=>this.update(i)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Gbe(e.parent)||document,this.viewState=new t4(e.state||$t.create(e)),e.scrollTo&&e.scrollTo.is(ub)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Qm).map(i=>new b_(i));for(let i of this.plugins)i.update(this);this.observer=new aEe(this),this.inputState=new k1e(this),this.inputState.ensureHandlers(this.plugins),this.docView=new MF(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof dn?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,n=!1,i,s=this.state;for(let h of e){if(h.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=h.state}if(this.destroyed){this.viewState.state=s;return}let a=this.hasFocus,o=0,l=null;e.some(h=>h.annotation(zq))?(this.inputState.notifiedFocused=a,o=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,l=Yq(s,a),l||(o=1));let c=this.observer.delayedAndroidKey,u=null;if(c?(this.observer.clearDelayedAndroidKey(),u=this.observer.readChange(),(u&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(u=null)):this.observer.clear(),s.facet($t.phrases)!=this.state.facet($t.phrases))return this.setState(s);i=xx.create(this,s,e),i.flags|=o;let d=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(d&&(d=d.map(h.changes)),h.scrollIntoView){let{main:f}=h.state.selection;d=new $f(f.empty?f:Ee.cursor(f.head,f.head>f.anchor?-1:1))}for(let f of h.effects)f.is(ub)&&(d=f.value.clip(this.state))}this.viewState.update(i,d),this.bidiCache=Tx.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(Xm)!=this.styleModules&&this.mountStyles(),n=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(gb)!=i.state.facet(gb)&&(this.viewState.mustMeasureContent=!0),(t||n||d||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!i.empty)for(let h of this.state.facet(Xk))try{h(i)}catch(f){Li(this.state,f,"update listener")}(l||u)&&Promise.resolve().then(()=>{l&&this.state==l.startState&&this.dispatch(l),u&&!Hq(this,u)&&c.force&&If(this.contentDOM,c.key,c.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let n of this.plugins)n.destroy(this);this.viewState=new t4(e),this.plugins=e.facet(Qm).map(n=>new b_(n)),this.pluginMap.clear();for(let n of this.plugins)n.update(this);this.docView.destroy(),this.docView=new MF(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Qm),n=e.state.facet(Qm);if(t!=n){let i=[];for(let s of n){let a=t.indexOf(s);if(a<0)i.push(new b_(s));else{let o=this.plugins[a];o.mustUpdate=e,i.push(o)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=i,this.pluginMap.clear()}else for(let i of this.plugins)i.mustUpdate=e;for(let i=0;i<this.plugins.length;i++)this.plugins[i].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(n){Li(this.state,n,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,i=n.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:a}=this.viewState;Math.abs(i-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let o=0;;o++){if(a<0)if(cq(n))s=-1,a=this.viewState.heightMap.height;else{let f=this.viewState.scrollAnchorAt(i);s=f.from,a=f.top}this.updateState=1;let l=this.viewState.measure(this);if(!l&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(o>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let c=[];l&4||([this.measureRequests,c]=[c,this.measureRequests]);let u=c.map(f=>{try{return f.read(this)}catch(m){return Li(this.state,m),s4}}),d=xx.create(this,this.state,[]),h=!1;d.flags|=l,t?t.flags|=l:t=d,this.updateState=2,d.empty||(this.updatePlugins(d),this.inputState.update(d),this.updateAttrs(),h=this.docView.update(d),h&&this.docViewUpdate());for(let f=0;f<c.length;f++)if(u[f]!=s4)try{let m=c[f];m.write&&m.write(u[f],this)}catch(m){Li(this.state,m)}if(h&&this.docView.updateSelection(!0),!d.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let m=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-a;if(m>1||m<-1){i=i+m,n.scrollTop=i/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let o of this.state.facet(Xk))o(t)}get themeClasses(){return rI+" "+(this.state.facet(tI)?Jq:Zq)+" "+this.state.facet(gb)}updateAttrs(){let e=a4(this,Mq,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(ll)?"true":"false",class:"cm-content",style:`${Me.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),a4(this,FL,t);let n=this.observer.ignore(()=>{let i=jk(this.contentDOM,this.contentAttrs,t),s=jk(this.dom,this.editorAttrs,e);return i||s});return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let i of n.effects)if(i.is(Pe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=i.value}}mountStyles(){this.styleModules=this.state.facet(Xm);let e=this.state.facet(Pe.cspNonce);Nc.mount(this.root,this.styleModules.concat(iEe).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(n=>n.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return x_(this,e,WF(this,e,t,n))}moveByGroup(e,t){return x_(this,e,WF(this,e,t,n=>E1e(this,e.head,n)))}visualLineSide(e,t){let n=this.bidiSpans(e),i=this.textDirectionAt(e.from),s=n[t?n.length-1:0];return Ee.cursor(s.side(t,i)+e.from,s.forward(!t,i)?1:-1)}moveToLineBoundary(e,t,n=!0){return b1e(this,e,t,n)}moveVertically(e,t,n){return x_(this,e,x1e(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),Wq(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let i=this.state.doc.lineAt(e),s=this.bidiSpans(i),a=s[yc.find(s,e-i.from,-1,t)];return wv(n,a.dir==gr.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Dq)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>cEe)return Sq(e.length);let t=this.textDirectionAt(e.from),n;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==t&&(s.fresh||Tq(s.isolates,n=PF(this,e))))return s.order;n||(n=PF(this,e));let i=n1e(e.text,t,n);return this.bidiCache.push(new Tx(e.from,e.to,t,n,!0,i)),i}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||Me.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{oq(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return ub.of(new $f(typeof e=="number"?Ee.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return ub.of(new $f(Ee.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Wr.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Wr.define(()=>({}),{eventObservers:e})}static theme(e,t){let n=Nc.newName(),i=[gb.of(n),Xm.of(nI(`.${n}`,e))];return t&&t.dark&&i.push(tI.of(!0)),i}static baseTheme(e){return qd.lowest(Xm.of(nI("."+rI,e,ej)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),i=n&&ir.get(n)||ir.get(e);return((t=i?.rootView)===null||t===void 0?void 0:t.view)||null}}Pe.styleModule=Xm;Pe.inputHandler=Iq;Pe.clipboardInputFilter=ML;Pe.clipboardOutputFilter=NL;Pe.scrollHandler=Oq;Pe.focusChangeEffect=$q;Pe.perLineTextDirection=Dq;Pe.exceptionSink=kq;Pe.updateListener=Xk;Pe.editable=ll;Pe.mouseSelectionStyle=Rq;Pe.dragMovesSelection=Cq;Pe.clickAddsSelectionRange=_q;Pe.decorations=g0;Pe.outerDecorations=Nq;Pe.atomicRanges=BL;Pe.bidiIsolatedRanges=Fq;Pe.scrollMargins=Bq;Pe.darkTheme=tI;Pe.cspNonce=Be.define({combine:r=>r.length?r[0]:""});Pe.contentAttributes=FL;Pe.editorAttributes=Mq;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=pt.define();const cEe=4096,s4={};class Tx{constructor(e,t,n,i,s,a){this.from=e,this.to=t,this.dir=n,this.isolates=i,this.fresh=s,this.order=a}static update(e,t){if(t.empty&&!e.some(s=>s.fresh))return e;let n=[],i=e.length?e[e.length-1].dir:gr.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let a=e[s];a.dir==i&&!t.touchesRange(a.from,a.to)&&n.push(new Tx(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return n}}function a4(r,e,t){for(let n=r.state.facet(e),i=n.length-1;i>=0;i--){let s=n[i],a=typeof s=="function"?s(r):s;a&&qk(a,t)}return t}const uEe=Me.mac?"mac":Me.windows?"win":Me.linux?"linux":"key";function dEe(r,e){const t=r.split(/-(?!$)/);let n=t[t.length-1];n=="Space"&&(n=" ");let i,s,a,o;for(let l=0;l<t.length-1;++l){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))i=!0;else if(/^(c|ctrl|control)$/i.test(c))s=!0;else if(/^s(hift)?$/i.test(c))a=!0;else if(/^mod$/i.test(c))e=="mac"?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+c)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),o&&(n="Meta-"+n),a&&(n="Shift-"+n),n}function vb(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const hEe=qd.default(Pe.domEventHandlers({keydown(r,e){return rj(tj(e.state),r,e,"editor")}})),TT=Be.define({enables:hEe}),o4=new WeakMap;function tj(r){let e=r.facet(TT),t=o4.get(e);return t||o4.set(e,t=mEe(e.reduce((n,i)=>n.concat(i),[]))),t}function fEe(r,e,t){return rj(tj(r.state),e,r,t)}let cc=null;const pEe=4e3;function mEe(r,e=uEe){let t=Object.create(null),n=Object.create(null),i=(a,o)=>{let l=n[a];if(l==null)n[a]=o;else if(l!=o)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},s=(a,o,l,c,u)=>{var d,h;let f=t[a]||(t[a]=Object.create(null)),m=o.split(/ (?!$)/).map(b=>dEe(b,e));for(let b=1;b<m.length;b++){let E=m.slice(0,b).join(" ");i(E,!0),f[E]||(f[E]={preventDefault:!0,stopPropagation:!1,run:[w=>{let A=cc={view:w,prefix:E,scope:a};return setTimeout(()=>{cc==A&&(cc=null)},pEe),!0}]})}let g=m.join(" ");i(g,!1);let y=f[g]||(f[g]={preventDefault:!1,stopPropagation:!1,run:((h=(d=f._any)===null||d===void 0?void 0:d.run)===null||h===void 0?void 0:h.slice())||[]});l&&y.run.push(l),c&&(y.preventDefault=!0),u&&(y.stopPropagation=!0)};for(let a of r){let o=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let c of o){let u=t[c]||(t[c]=Object.create(null));u._any||(u._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:d}=a;for(let h in u)u[h].run.push(f=>d(f,iI))}let l=a[e]||a.key;if(l)for(let c of o)s(c,l,a.run,a.preventDefault,a.stopPropagation),a.shift&&s(c,"Shift-"+l,a.shift,a.preventDefault,a.stopPropagation)}return t}let iI=null;function rj(r,e,t,n){iI=e;let i=Bbe(e),s=ki(i,0),a=za(s)==i.length&&i!=" ",o="",l=!1,c=!1,u=!1;cc&&cc.view==t&&cc.scope==n&&(o=cc.prefix+" ",Gq.indexOf(e.keyCode)<0&&(c=!0,cc=null));let d=new Set,h=y=>{if(y){for(let b of y.run)if(!d.has(b)&&(d.add(b),b(t)))return y.stopPropagation&&(u=!0),!0;y.preventDefault&&(y.stopPropagation&&(u=!0),c=!0)}return!1},f=r[n],m,g;return f&&(h(f[o+vb(i,e,!a)])?l=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(Me.windows&&e.ctrlKey&&e.altKey)&&(m=Fc[e.keyCode])&&m!=i?(h(f[o+vb(m,e,!0)])||e.shiftKey&&(g=p0[e.keyCode])!=i&&g!=m&&h(f[o+vb(g,e,!1)]))&&(l=!0):a&&e.shiftKey&&h(f[o+vb(i,e,!0)])&&(l=!0),!l&&h(f._any)&&(l=!0)),c&&(l=!0),l&&u&&e.stopPropagation(),iI=null,l}class Av{constructor(e,t,n,i,s){this.className=e,this.left=t,this.top=n,this.width=i,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,n){if(n.empty){let i=e.coordsAtPos(n.head,n.assoc||1);if(!i)return[];let s=nj(e);return[new Av(t,i.left-s.left,i.top-s.top,null,i.bottom-i.top)]}else return gEe(e,t,n)}}function nj(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==gr.LTR?e.left:e.right-r.scrollDOM.clientWidth*r.scaleX)-r.scrollDOM.scrollLeft*r.scaleX,top:e.top-r.scrollDOM.scrollTop*r.scaleY}}function l4(r,e,t,n){let i=r.coordsAtPos(e,t*2);if(!i)return n;let s=r.dom.getBoundingClientRect(),a=(i.top+i.bottom)/2,o=r.posAtCoords({x:s.left+1,y:a}),l=r.posAtCoords({x:s.right-1,y:a});return o==null||l==null?n:{from:Math.max(n.from,Math.min(o,l)),to:Math.min(n.to,Math.max(o,l))}}function gEe(r,e,t){if(t.to<=r.viewport.from||t.from>=r.viewport.to)return[];let n=Math.max(t.from,r.viewport.from),i=Math.min(t.to,r.viewport.to),s=r.textDirection==gr.LTR,a=r.contentDOM,o=a.getBoundingClientRect(),l=nj(r),c=a.querySelector(".cm-line"),u=c&&window.getComputedStyle(c),d=o.left+(u?parseInt(u.paddingLeft)+Math.min(0,parseInt(u.textIndent)):0),h=o.right-(u?parseInt(u.paddingRight):0),f=Jk(r,n),m=Jk(r,i),g=f.type==fi.Text?f:null,y=m.type==fi.Text?m:null;if(g&&(r.lineWrapping||f.widgetLineBreaks)&&(g=l4(r,n,1,g)),y&&(r.lineWrapping||m.widgetLineBreaks)&&(y=l4(r,i,-1,y)),g&&y&&g.from==y.from&&g.to==y.to)return E(w(t.from,t.to,g));{let S=g?w(t.from,null,g):A(f,!1),_=y?w(null,t.to,y):A(m,!0),C=[];return(g||f).to<(y||m).from-(g&&y?1:0)||f.widgetLineBreaks>1&&S.bottom+r.defaultLineHeight/2<_.top?C.push(b(d,S.bottom,h,_.top)):S.bottom<_.top&&r.elementAtHeight((S.bottom+_.top)/2).type==fi.Text&&(S.bottom=_.top=(S.bottom+_.top)/2),E(S).concat(C).concat(E(_))}function b(S,_,C,k){return new Av(e,S-l.left,_-l.top,C-S,k-_)}function E({top:S,bottom:_,horizontal:C}){let k=[];for(let D=0;D<C.length;D+=2)k.push(b(C[D],S,C[D+1],_));return k}function w(S,_,C){let k=1e9,D=-1e9,I=[];function L(U,W,j,z,Q){let V=r.coordsAtPos(U,U==C.to?-2:2),Y=r.coordsAtPos(j,j==C.from?2:-2);!V||!Y||(k=Math.min(V.top,Y.top,k),D=Math.max(V.bottom,Y.bottom,D),Q==gr.LTR?I.push(s&&W?d:V.left,s&&z?h:Y.right):I.push(!s&&z?d:Y.left,!s&&W?h:V.right))}let M=S??C.from,F=_??C.to;for(let U of r.visibleRanges)if(U.to>M&&U.from<F)for(let W=Math.max(U.from,M),j=Math.min(U.to,F);;){let z=r.state.doc.lineAt(W);for(let Q of r.bidiSpans(z)){let V=Q.from+z.from,Y=Q.to+z.from;if(V>=j)break;Y>W&&L(Math.max(V,W),S==null&&V<=M,Math.min(Y,j),_==null&&Y>=F,Q.dir)}if(W=z.to+1,W>=j)break}return I.length==0&&L(M,S==null,F,_==null,r.textDirection),{top:k,bottom:D,horizontal:I}}function A(S,_){let C=o.top+(_?S.top:S.bottom);return{top:C,bottom:C,horizontal:[]}}}function vEe(r,e){return r.constructor==e.constructor&&r.eq(e)}class yEe{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(R1)!=e.state.facet(R1)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,n=e.facet(R1);for(;t<n.length&&n[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,n)=>!vEe(t,this.drawn[n]))){let t=this.dom.firstChild,n=0;for(let i of e)i.update&&t&&i.constructor&&this.drawn[n].constructor&&i.update(t,this.drawn[n])?(t=t.nextSibling,n++):this.dom.insertBefore(i.draw(),t);for(;t;){let i=t.nextSibling;t.remove(),t=i}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const R1=Be.define();function ij(r){return[Wr.define(e=>new yEe(e,r)),R1.of(r)]}const sj=!(Me.ios&&Me.webkit&&Me.webkit_version<534),v0=Be.define({combine(r){return Ao(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function bEe(r={}){return[v0.of(r),EEe,xEe,wEe,Lq.of(!0)]}function aj(r){return r.startState.facet(v0)!=r.state.facet(v0)}const EEe=ij({above:!0,markers(r){let{state:e}=r,t=e.facet(v0),n=[];for(let i of e.selection.ranges){let s=i==e.selection.main;if(i.empty?!s||sj:t.drawRangeCursor){let a=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",o=i.empty?i:Ee.cursor(i.head,i.head>i.anchor?-1:1);for(let l of Av.forRange(r,a,o))n.push(l)}}return n},update(r,e){r.transactions.some(n=>n.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=aj(r);return t&&c4(r.state,e),r.docChanged||r.selectionSet||t},mount(r,e){c4(e.state,r)},class:"cm-cursorLayer"});function c4(r,e){e.style.animationDuration=r.facet(v0).cursorBlinkRate+"ms"}const xEe=ij({above:!1,markers(r){return r.state.selection.ranges.map(e=>e.empty?[]:Av.forRange(r,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(r,e){return r.docChanged||r.selectionSet||r.viewportChanged||aj(r)},class:"cm-selectionLayer"}),sI={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};sj&&(sI[".cm-line"].caretColor=sI[".cm-content"].caretColor="transparent !important");const wEe=qd.highest(Pe.theme(sI)),oj=pt.define({map(r,e){return r==null?null:e.mapPos(r)}}),eg=On.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,n)=>n.is(oj)?n.value:t,r)}}),TEe=Wr.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(eg);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(eg)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:r}=this,e=r.state.field(eg),t=e!=null&&r.coordsAtPos(e);if(!t)return null;let n=r.scrollDOM.getBoundingClientRect();return{left:t.left-n.left+r.scrollDOM.scrollLeft*r.scaleX,top:t.top-n.top+r.scrollDOM.scrollTop*r.scaleY,height:t.bottom-t.top}}drawCursor(r){if(this.cursor){let{scaleX:e,scaleY:t}=this.view;r?(this.cursor.style.left=r.left/e+"px",this.cursor.style.top=r.top/t+"px",this.cursor.style.height=r.height/t+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(eg)!=r&&this.view.dispatch({effects:oj.of(r)})}},{eventObservers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function SEe(){return[eg,TEe]}function u4(r,e,t,n,i){e.lastIndex=0;for(let s=r.iterRange(t,n),a=t,o;!s.next().done;a+=s.value.length)if(!s.lineBreak)for(;o=e.exec(s.value);)i(a+o.index,o)}function AEe(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let n=[];for(let{from:i,to:s}of t)i=Math.max(r.state.doc.lineAt(i).from,i-e),s=Math.min(r.state.doc.lineAt(s).to,s+e),n.length&&n[n.length-1].to>=i?n[n.length-1].to=s:n.push({from:i,to:s});return n}class _Ee{constructor(e){const{regexp:t,decoration:n,decorate:i,boundary:s,maxLength:a=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=t,i)this.addMatch=(o,l,c,u)=>i(u,c,c+o[0].length,o,l);else if(typeof n=="function")this.addMatch=(o,l,c,u)=>{let d=n(o,l,c);d&&u(c,c+o[0].length,d)};else if(n)this.addMatch=(o,l,c,u)=>u(c,c+o[0].length,n);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=a}createDeco(e){let t=new yl,n=t.add.bind(t);for(let{from:i,to:s}of AEe(e,this.maxLength))u4(e.state.doc,this.regexp,i,s,(a,o)=>this.addMatch(o,e,a,n));return t.finish()}updateDeco(e,t){let n=1e9,i=-1;return e.docChanged&&e.changes.iterChanges((s,a,o,l)=>{l>=e.view.viewport.from&&o<=e.view.viewport.to&&(n=Math.min(o,n),i=Math.max(l,i))}),e.viewportMoved||i-n>1e3?this.createDeco(e.view):i>-1?this.updateRange(e.view,t.map(e.changes),n,i):t}updateRange(e,t,n,i){for(let s of e.visibleRanges){let a=Math.max(s.from,n),o=Math.min(s.to,i);if(o>a){let l=e.state.doc.lineAt(a),c=l.to<o?e.state.doc.lineAt(o):l,u=Math.max(s.from,l.from),d=Math.min(s.to,c.to);if(this.boundary){for(;a>l.from;a--)if(this.boundary.test(l.text[a-1-l.from])){u=a;break}for(;o<c.to;o++)if(this.boundary.test(c.text[o-c.from])){d=o;break}}let h=[],f,m=(g,y,b)=>h.push(b.range(g,y));if(l==c)for(this.regexp.lastIndex=u-l.from;(f=this.regexp.exec(l.text))&&f.index<d-l.from;)this.addMatch(f,e,f.index+l.from,m);else u4(e.state.doc,this.regexp,u,d,(g,y)=>this.addMatch(y,e,g,m));t=t.update({filterFrom:u,filterTo:d,filter:(g,y)=>g<u||y>d,add:h})}}return t}}const aI=/x/.unicode!=null?"gu":"g",CEe=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,aI),REe={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let S_=null;function kEe(){var r;if(S_==null&&typeof document<"u"&&document.body){let e=document.body.style;S_=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return S_||!1}const k1=Be.define({combine(r){let e=Ao(r,{render:null,specialChars:CEe,addSpecialChars:null});return(e.replaceTabs=!kEe())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,aI)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,aI)),e}});function IEe(r={}){return[k1.of(r),$Ee()]}let d4=null;function $Ee(){return d4||(d4=Wr.fromClass(class{constructor(r){this.view=r,this.decorations=Ye.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(k1)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new _Ee({regexp:r.specialChars,decoration:(e,t,n)=>{let{doc:i}=t.state,s=ki(e[0],0);if(s==9){let a=i.lineAt(n),o=t.state.tabSize,l=Op(a.text,o,n-a.from);return Ye.replace({widget:new PEe((o-l%o)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=Ye.replace({widget:new OEe(r,s)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(k1);r.startState.facet(k1)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const DEe="•";function LEe(r){return r>=32?DEe:r==10?"␤":String.fromCharCode(9216+r)}class OEe extends Al{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=LEe(this.code),n=e.state.phrase("Control character")+" "+(REe[this.code]||"0x"+this.code.toString(16)),i=this.options.render&&this.options.render(this.code,n,t);if(i)return i;let s=document.createElement("span");return s.textContent=t,s.title=n,s.setAttribute("aria-label",n),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class PEe extends Al{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function MEe(){return FEe}const NEe=Ye.line({class:"cm-activeLine"}),FEe=Wr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let n of r.state.selection.ranges){let i=r.lineBlockAt(n.head);i.from>e&&(t.push(NEe.range(i.from)),e=i.from)}return Ye.set(t)}},{decorations:r=>r.decorations});class BEe extends Al{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),typeof this.content=="string"?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?np(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),i=wv(t[0],n.direction!="rtl"),s=parseInt(n.lineHeight);return i.bottom-i.top>s*1.5?{left:i.left,right:i.right,top:i.top,bottom:i.top+s}:i}ignoreEvent(){return!1}}function UEe(r){return Wr.fromClass(class{constructor(e){this.view=e,this.placeholder=r?Ye.set([Ye.widget({widget:new BEe(r),side:1}).range(0)]):Ye.none}get decorations(){return this.view.state.doc.length?Ye.none:this.placeholder}},{decorations:e=>e.decorations})}const oI=2e3;function WEe(r,e,t){let n=Math.min(e.line,t.line),i=Math.max(e.line,t.line),s=[];if(e.off>oI||t.off>oI||e.col<0||t.col<0){let a=Math.min(e.off,t.off),o=Math.max(e.off,t.off);for(let l=n;l<=i;l++){let c=r.doc.line(l);c.length<=o&&s.push(Ee.range(c.from+a,c.to+o))}}else{let a=Math.min(e.col,t.col),o=Math.max(e.col,t.col);for(let l=n;l<=i;l++){let c=r.doc.line(l),u=Fk(c.text,a,r.tabSize,!0);if(u<0)s.push(Ee.cursor(c.to));else{let d=Fk(c.text,o,r.tabSize);s.push(Ee.range(c.from+u,c.from+d))}}}return s}function HEe(r,e){let t=r.coordsAtPos(r.viewport.from);return t?Math.round(Math.abs((t.left-e)/r.defaultCharacterWidth)):-1}function h4(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1),n=r.state.doc.lineAt(t),i=t-n.from,s=i>oI?-1:i==n.length?HEe(r,e.clientX):Op(n.text,r.state.tabSize,t-n.from);return{line:n.number,col:s,off:i}}function VEe(r,e){let t=h4(r,e),n=r.state.selection;return t?{update(i){if(i.docChanged){let s=i.changes.mapPos(i.startState.doc.line(t.line).from),a=i.state.doc.lineAt(s);t={line:a.number,col:t.col,off:Math.min(t.off,a.length)},n=n.map(i.changes)}},get(i,s,a){let o=h4(r,i);if(!o)return n;let l=WEe(r.state,t,o);return l.length?a?Ee.create(l.concat(n.ranges)):Ee.create(l):n}}:null}function GEe(r){let e=t=>t.altKey&&t.button==0;return Pe.mouseSelectionStyle.of((t,n)=>e(n)?VEe(t,n):null)}const qEe={Alt:[18,r=>!!r.altKey],Control:[17,r=>!!r.ctrlKey],Shift:[16,r=>!!r.shiftKey],Meta:[91,r=>!!r.metaKey]},jEe={style:"cursor: crosshair"};function KEe(r={}){let[e,t]=qEe[r.key||"Alt"],n=Wr.fromClass(class{constructor(i){this.view=i,this.isDown=!1}set(i){this.isDown!=i&&(this.isDown=i,this.view.update([]))}},{eventObservers:{keydown(i){this.set(i.keyCode==e||t(i))},keyup(i){(i.keyCode==e||!t(i))&&this.set(!1)},mousemove(i){this.set(t(i))}}});return[n,Pe.contentAttributes.of(i=>{var s;return!((s=i.plugin(n))===null||s===void 0)&&s.isDown?jEe:null})]}const bm="-10000px";class lj{constructor(e,t,n,i){this.facet=t,this.createTooltipView=n,this.removeTooltipView=i,this.input=e.state.facet(t),this.tooltips=this.input.filter(a=>a);let s=null;this.tooltipViews=this.tooltips.map(a=>s=n(a,s))}update(e,t){var n;let i=e.state.facet(this.facet),s=i.filter(l=>l);if(i===this.input){for(let l of this.tooltipViews)l.update&&l.update(e);return!1}let a=[],o=t?[]:null;for(let l=0;l<s.length;l++){let c=s[l],u=-1;if(c){for(let d=0;d<this.tooltips.length;d++){let h=this.tooltips[d];h&&h.create==c.create&&(u=d)}if(u<0)a[l]=this.createTooltipView(c,l?a[l-1]:null),o&&(o[l]=!!c.above);else{let d=a[l]=this.tooltipViews[u];o&&(o[l]=t[u]),d.update&&d.update(e)}}}for(let l of this.tooltipViews)a.indexOf(l)<0&&(this.removeTooltipView(l),(n=l.destroy)===null||n===void 0||n.call(l));return t&&(o.forEach((l,c)=>t[c]=l),t.length=o.length),this.input=i,this.tooltips=s,this.tooltipViews=a,!0}}function zEe(r){let e=r.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const A_=Be.define({combine:r=>{var e,t,n;return{position:Me.ios?"absolute":((e=r.find(i=>i.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((t=r.find(i=>i.parent))===null||t===void 0?void 0:t.parent)||null,tooltipSpace:((n=r.find(i=>i.tooltipSpace))===null||n===void 0?void 0:n.tooltipSpace)||zEe}}}),f4=new WeakMap,GL=Wr.fromClass(class{constructor(r){this.view=r,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=r.state.facet(A_);this.position=e.position,this.parent=e.parent,this.classes=r.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new lj(r,qL,(t,n)=>this.createTooltip(t,n),t=>{this.resizeObserver&&this.resizeObserver.unobserve(t.dom),t.dom.remove()}),this.above=this.manager.tooltips.map(t=>!!t.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(t=>{Date.now()>this.lastTransaction-50&&t.length>0&&t[t.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),r.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let r of this.manager.tooltipViews)this.intersectionObserver.observe(r.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(r){r.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(r,this.above);e&&this.observeIntersection();let t=e||r.geometryChanged,n=r.state.facet(A_);if(n.position!=this.position&&!this.madeAbsolute){this.position=n.position;for(let i of this.manager.tooltipViews)i.dom.style.position=this.position;t=!0}if(n.parent!=this.parent){this.parent&&this.container.remove(),this.parent=n.parent,this.createContainer();for(let i of this.manager.tooltipViews)this.container.appendChild(i.dom);t=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);t&&this.maybeMeasure()}createTooltip(r,e){let t=r.create(this.view),n=e?e.dom:null;if(t.dom.classList.add("cm-tooltip"),r.arrow&&!t.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let i=document.createElement("div");i.className="cm-tooltip-arrow",t.dom.appendChild(i)}return t.dom.style.position=this.position,t.dom.style.top=bm,t.dom.style.left="0px",this.container.insertBefore(t.dom,n),t.mount&&t.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(t.dom),t}destroy(){var r,e,t;this.view.win.removeEventListener("resize",this.measureSoon);for(let n of this.manager.tooltipViews)n.dom.remove(),(r=n.destroy)===null||r===void 0||r.call(n);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.intersectionObserver)===null||t===void 0||t.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let r=1,e=1,t=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(Me.gecko)t=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==bm&&s.style.left=="0px"){let a=s.getBoundingClientRect();t=Math.abs(a.top+1e4)>1||Math.abs(a.left)>1}}if(t||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(r=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:r,scaleY:e}=this.view.viewState);let n=this.view.scrollDOM.getBoundingClientRect(),i=UL(this.view);return{visible:{left:n.left+i.left,top:n.top+i.top,right:n.right-i.right,bottom:n.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,a)=>{let o=this.manager.tooltipViews[a];return o.getCoords?o.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(A_).tooltipSpace(this.view),scaleX:r,scaleY:e,makeAbsolute:t}}writeMeasure(r){var e;if(r.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let o of this.manager.tooltipViews)o.dom.style.position="absolute"}let{visible:t,space:n,scaleX:i,scaleY:s}=r,a=[];for(let o=0;o<this.manager.tooltips.length;o++){let l=this.manager.tooltips[o],c=this.manager.tooltipViews[o],{dom:u}=c,d=r.pos[o],h=r.size[o];if(!d||l.clip!==!1&&(d.bottom<=Math.max(t.top,n.top)||d.top>=Math.min(t.bottom,n.bottom)||d.right<Math.max(t.left,n.left)-.1||d.left>Math.min(t.right,n.right)+.1)){u.style.top=bm;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,m=f?7:0,g=h.right-h.left,y=(e=f4.get(c))!==null&&e!==void 0?e:h.bottom-h.top,b=c.offset||QEe,E=this.view.textDirection==gr.LTR,w=h.width>n.right-n.left?E?n.left:n.right-h.width:E?Math.max(n.left,Math.min(d.left-(f?14:0)+b.x,n.right-g)):Math.min(Math.max(n.left,d.left-g+(f?14:0)-b.x),n.right-g),A=this.above[o];!l.strictSide&&(A?d.top-y-m-b.y<n.top:d.bottom+y+m+b.y>n.bottom)&&A==n.bottom-d.bottom>d.top-n.top&&(A=this.above[o]=!A);let S=(A?d.top-n.top:n.bottom-d.bottom)-m;if(S<y&&c.resize!==!1){if(S<this.view.defaultLineHeight){u.style.top=bm;continue}f4.set(c,y),u.style.height=(y=S)/s+"px"}else u.style.height&&(u.style.height="");let _=A?d.top-y-m-b.y:d.bottom+m+b.y,C=w+g;if(c.overlap!==!0)for(let k of a)k.left<C&&k.right>w&&k.top<_+y&&k.bottom>_&&(_=A?k.top-y-2-m:k.bottom+m+2);if(this.position=="absolute"?(u.style.top=(_-r.parent.top)/s+"px",p4(u,(w-r.parent.left)/i)):(u.style.top=_/s+"px",p4(u,w/i)),f){let k=d.left+(E?b.x:-b.x)-(w+14-7);f.style.left=k/i+"px"}c.overlap!==!0&&a.push({left:w,top:_,right:C,bottom:_+y}),u.classList.toggle("cm-tooltip-above",A),u.classList.toggle("cm-tooltip-below",!A),c.positioned&&c.positioned(r.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let r of this.manager.tooltipViews)r.dom.style.top=bm}},{eventObservers:{scroll(){this.maybeMeasure()}}});function p4(r,e){let t=parseInt(r.style.left,10);(isNaN(t)||Math.abs(e-t)>1)&&(r.style.left=e+"px")}const YEe=Pe.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),QEe={x:0,y:0},qL=Be.define({enables:[GL,YEe]}),Sx=Be.define({combine:r=>r.reduce((e,t)=>e.concat(t),[])});class ST{static create(e){return new ST(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new lj(e,Sx,(t,n)=>this.createHostedView(t,n),t=>t.dom.remove())}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)(e=t.destroy)===null||e===void 0||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let i=n[e];if(i!==void 0){if(t===void 0)t=i;else if(t!==i)return}}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const XEe=qL.compute([Sx],r=>{let e=r.facet(Sx);return e.length===0?null:{pos:Math.min(...e.map(t=>t.pos)),end:Math.max(...e.map(t=>{var n;return(n=t.end)!==null&&n!==void 0?n:t.pos})),create:ST.create,above:e[0].above,arrow:e.some(t=>t.arrow)}});class ZEe{constructor(e,t,n,i,s){this.view=e,this.source=t,this.field=n,this.setHover=i,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let i,s=1;if(n instanceof vc)i=n.posAtStart;else{if(i=e.posAtCoords(t),i==null)return;let o=e.coordsAtPos(i);if(!o||t.y<o.top||t.y>o.bottom||t.x<o.left-e.defaultCharacterWidth||t.x>o.right+e.defaultCharacterWidth)return;let l=e.bidiSpans(e.state.doc.lineAt(i)).find(u=>u.from<=i&&u.to>=i),c=l&&l.dir==gr.RTL?-1:1;s=t.x<o.left?-c:c}let a=this.source(e,i,s);if(a?.then){let o=this.pending={pos:i};a.then(l=>{this.pending==o&&(this.pending=null,l&&!(Array.isArray(l)&&!l.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(l)?l:[l])}))},l=>Li(e.state,l,"hover tooltip"))}else a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])})}get tooltip(){let e=this.view.plugin(GL),t=e?e.manager.tooltips.findIndex(n=>n.create==ST.create):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:i,tooltip:s}=this;if(i.length&&s&&!JEe(s.dom,e)||this.pending){let{pos:a}=i[0]||this.pending,o=(n=(t=i[0])===null||t===void 0?void 0:t.end)!==null&&n!==void 0?n:a;(a==o?this.view.posAtCoords(this.lastMove)!=a:!exe(this.view,a,o,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:n}=this;n&&n.dom.contains(e.relatedTarget)?this.watchTooltipLeave(n.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const yb=4;function JEe(r,e){let{left:t,right:n,top:i,bottom:s}=r.getBoundingClientRect(),a;if(a=r.querySelector(".cm-tooltip-arrow")){let o=a.getBoundingClientRect();i=Math.min(o.top,i),s=Math.max(o.bottom,s)}return e.clientX>=t-yb&&e.clientX<=n+yb&&e.clientY>=i-yb&&e.clientY<=s+yb}function exe(r,e,t,n,i,s){let a=r.scrollDOM.getBoundingClientRect(),o=r.documentTop+r.documentPadding.top+r.contentHeight;if(a.left>n||a.right<n||a.top>i||Math.min(a.bottom,o)<i)return!1;let l=r.posAtCoords({x:n,y:i},!1);return l>=e&&l<=t}function txe(r,e={}){let t=pt.define(),n=On.define({create(){return[]},update(i,s){if(i.length&&(e.hideOnChange&&(s.docChanged||s.selection)?i=[]:e.hideOn&&(i=i.filter(a=>!e.hideOn(s,a))),s.docChanged)){let a=[];for(let o of i){let l=s.changes.mapPos(o.pos,-1,hi.TrackDel);if(l!=null){let c=Object.assign(Object.create(null),o);c.pos=l,c.end!=null&&(c.end=s.changes.mapPos(c.end)),a.push(c)}}i=a}for(let a of s.effects)a.is(t)&&(i=a.value),a.is(rxe)&&(i=[]);return i},provide:i=>Sx.from(i)});return{active:n,extension:[n,Wr.define(i=>new ZEe(i,r,n,t,e.hoverTime||300)),XEe]}}function cj(r,e){let t=r.plugin(GL);if(!t)return null;let n=t.manager.tooltips.indexOf(e);return n<0?null:t.manager.tooltipViews[n]}const rxe=pt.define(),m4=Be.define({combine(r){let e,t;for(let n of r)e=e||n.topContainer,t=t||n.bottomContainer;return{topContainer:e,bottomContainer:t}}});function y0(r,e){let t=r.plugin(uj),n=t?t.specs.indexOf(e):-1;return n>-1?t.panels[n]:null}const uj=Wr.fromClass(class{constructor(r){this.input=r.state.facet(b0),this.specs=this.input.filter(t=>t),this.panels=this.specs.map(t=>t(r));let e=r.state.facet(m4);this.top=new bb(r,!0,e.topContainer),this.bottom=new bb(r,!1,e.bottomContainer),this.top.sync(this.panels.filter(t=>t.top)),this.bottom.sync(this.panels.filter(t=>!t.top));for(let t of this.panels)t.dom.classList.add("cm-panel"),t.mount&&t.mount()}update(r){let e=r.state.facet(m4);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new bb(r.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new bb(r.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let t=r.state.facet(b0);if(t!=this.input){let n=t.filter(l=>l),i=[],s=[],a=[],o=[];for(let l of n){let c=this.specs.indexOf(l),u;c<0?(u=l(r.view),o.push(u)):(u=this.panels[c],u.update&&u.update(r)),i.push(u),(u.top?s:a).push(u)}this.specs=n,this.panels=i,this.top.sync(s),this.bottom.sync(a);for(let l of o)l.dom.classList.add("cm-panel"),l.mount&&l.mount()}else for(let n of this.panels)n.update&&n.update(r)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:r=>Pe.scrollMargins.of(e=>{let t=e.plugin(r);return t&&{top:t.top.scrollMargin(),bottom:t.bottom.scrollMargin()}})});class bb{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let t=this.container||this.view.dom;t.insertBefore(this.dom,this.top?t.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=g4(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=g4(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function g4(r){let e=r.nextSibling;return r.remove(),e}const b0=Be.define({enables:uj});class El extends Id{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}El.prototype.elementClass="";El.prototype.toDOM=void 0;El.prototype.mapMode=hi.TrackBefore;El.prototype.startSide=El.prototype.endSide=-1;El.prototype.point=!0;const I1=Be.define(),nxe=Be.define(),ixe={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Pt.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},Pg=Be.define();function sxe(r){return[dj(),Pg.of(Object.assign(Object.assign({},ixe),r))]}const v4=Be.define({combine:r=>r.some(e=>e)});function dj(r){return[axe]}const axe=Wr.fromClass(class{constructor(r){this.view=r,this.prevViewport=r.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=r.state.facet(Pg).map(e=>new b4(r,e));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!r.state.facet(v4),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),r.scrollDOM.insertBefore(this.dom,r.contentDOM)}update(r){if(this.updateGutters(r)){let e=this.prevViewport,t=r.view.viewport,n=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(n<(t.to-t.from)*.8)}r.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(v4)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=r.view.viewport}syncGutters(r){let e=this.dom.nextSibling;r&&this.dom.remove();let t=Pt.iter(this.view.state.facet(I1),this.view.viewport.from),n=[],i=this.gutters.map(s=>new oxe(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(n.length&&(n=[]),Array.isArray(s.type)){let a=!0;for(let o of s.type)if(o.type==fi.Text&&a){lI(t,n,o.from);for(let l of i)l.line(this.view,o,n);a=!1}else if(o.widget)for(let l of i)l.widget(this.view,o)}else if(s.type==fi.Text){lI(t,n,s.from);for(let a of i)a.line(this.view,s,n)}else if(s.widget)for(let a of i)a.widget(this.view,s);for(let s of i)s.finish();r&&this.view.scrollDOM.insertBefore(this.dom,e)}updateGutters(r){let e=r.startState.facet(Pg),t=r.state.facet(Pg),n=r.docChanged||r.heightChanged||r.viewportChanged||!Pt.eq(r.startState.facet(I1),r.state.facet(I1),r.view.viewport.from,r.view.viewport.to);if(e==t)for(let i of this.gutters)i.update(r)&&(n=!0);else{n=!0;let i=[];for(let s of t){let a=e.indexOf(s);a<0?i.push(new b4(this.view,s)):(this.gutters[a].update(r),i.push(this.gutters[a]))}for(let s of this.gutters)s.dom.remove(),i.indexOf(s)<0&&s.destroy();for(let s of i)this.dom.appendChild(s.dom);this.gutters=i}return n}destroy(){for(let r of this.gutters)r.destroy();this.dom.remove()}},{provide:r=>Pe.scrollMargins.of(e=>{let t=e.plugin(r);return!t||t.gutters.length==0||!t.fixed?null:e.textDirection==gr.LTR?{left:t.dom.offsetWidth*e.scaleX}:{right:t.dom.offsetWidth*e.scaleX}})});function y4(r){return Array.isArray(r)?r:[r]}function lI(r,e,t){for(;r.value&&r.from<=t;)r.from==t&&e.push(r.value),r.next()}class oxe{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Pt.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:i}=this,s=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==i.elements.length){let o=new hj(e,a,s,n);i.elements.push(o),i.dom.appendChild(o.dom)}else i.elements[this.i].update(e,a,s,n);this.height=t.bottom,this.i++}line(e,t,n){let i=[];lI(this.cursor,i,t.from),n.length&&(i=i.concat(n));let s=this.gutter.config.lineMarker(e,t,i);s&&i.unshift(s);let a=this.gutter;i.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,i)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),i=n?[n]:null;for(let s of e.state.facet(nxe)){let a=s(e,t.widget,t);a&&(i||(i=[])).push(a)}i&&this.addElement(e,t,i)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class b4{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,i=>{let s=i.target,a;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let l=s.getBoundingClientRect();a=(l.top+l.bottom)/2}else a=i.clientY;let o=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[n](e,o,i)&&i.preventDefault()});this.markers=y4(t.markers(e)),t.initialSpacer&&(this.spacer=new hj(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=y4(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let i=this.config.updateSpacer(this.spacer.markers[0],e);i!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[i])}let n=e.view.viewport;return!Pt.eq(this.markers,t,n.from,n.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class hj{constructor(e,t,n,i){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,i)}update(e,t,n,i){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),lxe(this.markers,i)||this.setMarkers(e,i)}setMarkers(e,t){let n="cm-gutterElement",i=this.dom.firstChild;for(let s=0,a=0;;){let o=a,l=s<t.length?t[s++]:null,c=!1;if(l){let u=l.elementClass;u&&(n+=" "+u);for(let d=a;d<this.markers.length;d++)if(this.markers[d].compare(l)){o=d,c=!0;break}}else o=this.markers.length;for(;a<o;){let u=this.markers[a++];if(u.toDOM){u.destroy(i);let d=i.nextSibling;i.remove(),i=d}}if(!l)break;l.toDOM&&(c?i=i.nextSibling:this.dom.insertBefore(l.toDOM(e),i)),c&&a++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function lxe(r,e){if(r.length!=e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].compare(e[t]))return!1;return!0}const cxe=Be.define(),uxe=Be.define(),mf=Be.define({combine(r){return Ao(r,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let i in t){let s=n[i],a=t[i];n[i]=s?(o,l,c)=>s(o,l,c)||a(o,l,c):a}return n}})}});class __ extends El{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function C_(r,e){return r.state.facet(mf).formatNumber(e,r.state)}const dxe=Pg.compute([mf],r=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(cxe)},lineMarker(e,t,n){return n.some(i=>i.toDOM)?null:new __(C_(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let i of e.state.facet(uxe)){let s=i(e,t,n);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(mf)!=e.state.facet(mf),initialSpacer(e){return new __(C_(e,E4(e.state.doc.lines)))},updateSpacer(e,t){let n=C_(t.view,E4(t.view.state.doc.lines));return n==e.number?e:new __(n)},domEventHandlers:r.facet(mf).domEventHandlers}));function hxe(r={}){return[mf.of(r),dj(),dxe]}function E4(r){let e=9;for(;e<r;)e=e*10+9;return e}const fxe=new class extends El{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},pxe=I1.compute(["selection"],r=>{let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.head).from;i>t&&(t=i,e.push(fxe.range(i)))}return Pt.of(e)});function mxe(){return pxe}var R_;const gf=new Tt;function gxe(r){return Be.define({combine:r?e=>e.concat(r):void 0})}const vxe=new Tt;class ia{constructor(e,t,n=[],i=""){this.data=e,this.name=i,$t.prototype.hasOwnProperty("tree")||Object.defineProperty($t.prototype,"tree",{get(){return si(this)}}),this.parser=t,this.extension=[Uc.of(this),$t.languageData.of((s,a,o)=>{let l=x4(s,a,o),c=l.type.prop(gf);if(!c)return[];let u=s.facet(c),d=l.type.prop(vxe);if(d){let h=l.resolve(a-l.from,o);for(let f of d)if(f.test(h,s)){let m=s.facet(f.facet);return f.type=="replace"?m:m.concat(u)}}return u})].concat(n)}isActiveAt(e,t,n=-1){return x4(e,t,n).type.prop(gf)==this.data}findRegions(e){let t=e.facet(Uc);if(t?.data==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],i=(s,a)=>{if(s.prop(gf)==this.data){n.push({from:a,to:a+s.length});return}let o=s.prop(Tt.mounted);if(o){if(o.tree.prop(gf)==this.data){if(o.overlay)for(let l of o.overlay)n.push({from:l.from+a,to:l.to+a});else n.push({from:a,to:a+s.length});return}else if(o.overlay){let l=n.length;if(i(o.tree,o.overlay[0].from+a),n.length>l)return}}for(let l=0;l<s.children.length;l++){let c=s.children[l];c instanceof Jr&&i(c,s.positions[l]+a)}};return i(si(e),0),n}get allowsNesting(){return!0}}ia.setState=pt.define();function x4(r,e,t){let n=r.facet(Uc),i=si(r).topNode;if(!n||n.allowsNesting)for(let s=i;s;s=s.enter(e,t,Cn.ExcludeBuffers))s.type.isTop&&(i=s);return i}class Ax extends ia{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=gxe(e.languageData);return new Ax(t,e.parser.configure({props:[gf.add(n=>n.isTop?t:void 0)]}),e.name)}configure(e,t){return new Ax(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function si(r){let e=r.field(ia.state,!1);return e?e.tree:Jr.empty}class yxe{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Em=null;class _x{constructor(e,t,n=[],i,s,a,o,l){this.parser=e,this.state=t,this.fragments=n,this.tree=i,this.treeLen=s,this.viewport=a,this.skipped=o,this.scheduleOn=l,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new _x(e,t,[],Jr.empty,0,n,[],null)}startParse(){return this.parser.startParse(new yxe(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=Jr.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var n;if(typeof e=="number"){let i=Date.now()+e;e=()=>Date.now()>i}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let i=this.parse.advance();if(i)if(this.fragments=this.withoutTempSkipped(hd.addTree(i,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(n=this.parse.stoppedAt)!==null&&n!==void 0?n:this.state.doc.length,this.tree=i,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(hd.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Em;Em=this;try{return e()}finally{Em=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=w4(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:i,treeLen:s,viewport:a,skipped:o}=this;if(this.takeTree(),!e.empty){let l=[];if(e.iterChangedRanges((c,u,d,h)=>l.push({fromA:c,toA:u,fromB:d,toB:h})),n=hd.applyChanges(n,l),i=Jr.empty,s=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){o=[];for(let c of this.skipped){let u=e.mapPos(c.from,1),d=e.mapPos(c.to,-1);u<d&&o.push({from:u,to:d})}}}return new _x(this.parser,t,n,i,s,a,o,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:i,to:s}=this.skipped[n];i<e.to&&s>e.from&&(this.fragments=w4(this.fragments,i,s),this.skipped.splice(n--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends NG{createParse(t,n,i){let s=i[0].from,a=i[i.length-1].to;return{parsedPos:s,advance(){let l=Em;if(l){for(let c of i)l.tempSkipped.push(c);e&&(l.scheduleOn=l.scheduleOn?Promise.all([l.scheduleOn,e]):e)}return this.parsedPos=a,new Jr(Mi.none,[],[],a-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Em}}function w4(r,e,t){return hd.applyChanges(r,[{fromA:e,toA:t,fromB:e,toB:t}])}class op{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new op(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=_x.create(e.facet(Uc).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new op(n)}}ia.state=On.define({create:op.init,update(r,e){for(let t of e.effects)if(t.is(ia.setState))return t.value;return e.startState.facet(Uc)!=e.state.facet(Uc)?op.init(e.state):r.apply(e)}});let fj=r=>{let e=setTimeout(()=>r(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(fj=r=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(r,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const k_=typeof navigator<"u"&&(!((R_=navigator.scheduling)===null||R_===void 0)&&R_.isInputPending)?()=>navigator.scheduling.isInputPending():null,bxe=Wr.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(ia.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(ia.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=fj(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:i}}=this.view,s=n.field(ia.state);if(s.tree==s.context.tree&&s.context.isDone(i+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!k_?Math.max(25,e.timeRemaining()-5):1e9),o=s.context.treeLen<i&&n.doc.length>i+1e3,l=s.context.work(()=>k_&&k_()||Date.now()>a,i+(o?0:1e5));this.chunkBudget-=Date.now()-t,(l||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:ia.setState.of(new op(s.context))})),this.chunkBudget>0&&!(l&&!o)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Li(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Uc=Be.define({combine(r){return r.length?r[0]:null},enables:r=>[ia.state,bxe,Pe.contentAttributes.compute([r],e=>{let t=e.facet(r);return t&&t.name?{"data-language":t.name}:{}})]});class Exe{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const xxe=Be.define(),AT=Be.define({combine:r=>{if(!r.length)return"  ";let e=r[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(r[0]));return e}});function Cx(r){let e=r.facet(AT);return e.charCodeAt(0)==9?r.tabSize*e.length:e.length}function E0(r,e){let t="",n=r.tabSize,i=r.facet(AT)[0];if(i=="	"){for(;e>=n;)t+="	",e-=n;i=" "}for(let s=0;s<e;s++)t+=i;return t}function jL(r,e){r instanceof $t&&(r=new _T(r));for(let n of r.state.facet(xxe)){let i=n(r,e);if(i!==void 0)return i}let t=si(r.state);return t.length>=e?wxe(r,t,e):null}class _T{constructor(e,t={}){this.state=e,this.options=t,this.unit=Cx(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:i,simulateDoubleBreak:s}=this.options;return i!=null&&i>=n.from&&i<=n.to?s&&i==e?{text:"",from:e}:(t<0?i<e:i<=e)?{text:n.text.slice(i-n.from),from:i}:{text:n.text.slice(0,i-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:i}=this.lineAt(e,t);return n.slice(e-i,Math.min(n.length,e+100-i))}column(e,t=1){let{text:n,from:i}=this.lineAt(e,t),s=this.countColumn(n,e-i),a=this.options.overrideIndentation?this.options.overrideIndentation(i):-1;return a>-1&&(s+=a-this.countColumn(n,n.search(/\S|$/))),s}countColumn(e,t=e.length){return Op(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:i}=this.lineAt(e,t),s=this.options.overrideIndentation;if(s){let a=s(i);if(a>-1)return a}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const pj=new Tt;function wxe(r,e,t){let n=e.resolveStack(t),i=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(i!=n.node){let s=[];for(let a=i;a&&!(a.from==n.node.from&&a.type==n.node.type);a=a.parent)s.push(a);for(let a=s.length-1;a>=0;a--)n={node:s[a],next:n}}return mj(n,r,t)}function mj(r,e,t){for(let n=r;n;n=n.next){let i=Sxe(n.node);if(i)return i(KL.create(e,t,n))}return 0}function Txe(r){return r.pos==r.options.simulateBreak&&r.options.simulateDoubleBreak}function Sxe(r){let e=r.type.prop(pj);if(e)return e;let t=r.firstChild,n;if(t&&(n=t.type.prop(Tt.closedBy))){let i=r.lastChild,s=i&&n.indexOf(i.name)>-1;return a=>Rxe(a,!0,1,void 0,s&&!Txe(a)?i.from:void 0)}return r.parent==null?Axe:null}function Axe(){return 0}class KL extends _T{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new KL(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);for(;n.parent&&n.parent.from==n.from;)n=n.parent;if(_xe(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return mj(this.context.next,this.base,this.pos)}}function _xe(r,e){for(let t=e;t;t=t.parent)if(r==t)return!0;return!1}function Cxe(r){let e=r.node,t=e.childAfter(e.from),n=e.lastChild;if(!t)return null;let i=r.options.simulateBreak,s=r.state.doc.lineAt(t.from),a=i==null||i<=s.from?s.to:Math.min(s.to,i);for(let o=t.to;;){let l=e.childAfter(o);if(!l||l==n)return null;if(!l.type.isSkipped){if(l.from>=a)return null;let c=/^ */.exec(s.text.slice(t.to-s.from))[0].length;return{from:t.from,to:t.to+c}}o=l.to}}function Rxe(r,e,t,n,i){let s=r.textAfter,a=s.match(/^\s*/)[0].length,o=n&&s.slice(a,a+n.length)==n||i==r.pos+a,l=Cxe(r);return l?o?r.column(l.from):r.column(l.to):r.baseIndent+(o?0:r.unit*t)}function T4({except:r,units:e=1}={}){return t=>{let n=r&&r.test(t.textAfter);return t.baseIndent+(n?0:e*t.unit)}}const kxe=200;function Ixe(){return $t.transactionFilter.of(r=>{if(!r.docChanged||!r.isUserEvent("input.type")&&!r.isUserEvent("input.complete"))return r;let e=r.startState.languageDataAt("indentOnInput",r.startState.selection.main.head);if(!e.length)return r;let t=r.newDoc,{head:n}=r.newSelection.main,i=t.lineAt(n);if(n>i.from+kxe)return r;let s=t.sliceString(i.from,n);if(!e.some(c=>c.test(s)))return r;let{state:a}=r,o=-1,l=[];for(let{head:c}of a.selection.ranges){let u=a.doc.lineAt(c);if(u.from==o)continue;o=u.from;let d=jL(a,u.from);if(d==null)continue;let h=/^\s*/.exec(u.text)[0],f=E0(a,d);h!=f&&l.push({from:u.from,to:u.from+h.length,insert:f})}return l.length?[r,{changes:l,sequential:!0}]:r})}const $xe=Be.define(),gj=new Tt;function Dxe(r){let e=r.firstChild,t=r.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?r.to:t.from}:null}function Lxe(r,e,t){let n=si(r);if(n.length<t)return null;let i=n.resolveStack(t,1),s=null;for(let a=i;a;a=a.next){let o=a.node;if(o.to<=t||o.from>t)continue;if(s&&o.from<e)break;let l=o.type.prop(gj);if(l&&(o.to<n.length-50||n.length==r.doc.length||!Oxe(o))){let c=l(o,r);c&&c.from<=t&&c.from>=e&&c.to>t&&(s=c)}}return s}function Oxe(r){let e=r.lastChild;return e&&e.to==r.to&&e.type.isError}function Rx(r,e,t){for(let n of r.facet($xe)){let i=n(r,e,t);if(i)return i}return Lxe(r,e,t)}function vj(r,e){let t=e.mapPos(r.from,1),n=e.mapPos(r.to,-1);return t>=n?void 0:{from:t,to:n}}const CT=pt.define({map:vj}),_v=pt.define({map:vj});function yj(r){let e=[];for(let{head:t}of r.state.selection.ranges)e.some(n=>n.from<=t&&n.to>=t)||e.push(r.lineBlockAt(t));return e}const Od=On.define({create(){return Ye.none},update(r,e){r=r.map(e.changes);for(let t of e.effects)if(t.is(CT)&&!Pxe(r,t.value.from,t.value.to)){let{preparePlaceholder:n}=e.state.facet(xj),i=n?Ye.replace({widget:new Hxe(n(e.state,t.value))}):S4;r=r.update({add:[i.range(t.value.from,t.value.to)]})}else t.is(_v)&&(r=r.update({filter:(n,i)=>t.value.from!=n||t.value.to!=i,filterFrom:t.value.from,filterTo:t.value.to}));if(e.selection){let t=!1,{head:n}=e.selection.main;r.between(n,n,(i,s)=>{i<n&&s>n&&(t=!0)}),t&&(r=r.update({filterFrom:n,filterTo:n,filter:(i,s)=>s<=n||i>=n}))}return r},provide:r=>Pe.decorations.from(r),toJSON(r,e){let t=[];return r.between(0,e.doc.length,(n,i)=>{t.push(n,i)}),t},fromJSON(r){if(!Array.isArray(r)||r.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let t=0;t<r.length;){let n=r[t++],i=r[t++];if(typeof n!="number"||typeof i!="number")throw new RangeError("Invalid JSON for fold state");e.push(S4.range(n,i))}return Ye.set(e,!0)}});function kx(r,e,t){var n;let i=null;return(n=r.field(Od,!1))===null||n===void 0||n.between(e,t,(s,a)=>{(!i||i.from>s)&&(i={from:s,to:a})}),i}function Pxe(r,e,t){let n=!1;return r.between(e,e,(i,s)=>{i==e&&s==t&&(n=!0)}),n}function bj(r,e){return r.field(Od,!1)?e:e.concat(pt.appendConfig.of(wj()))}const Mxe=r=>{for(let e of yj(r)){let t=Rx(r.state,e.from,e.to);if(t)return r.dispatch({effects:bj(r.state,[CT.of(t),Ej(r,t)])}),!0}return!1},Nxe=r=>{if(!r.state.field(Od,!1))return!1;let e=[];for(let t of yj(r)){let n=kx(r.state,t.from,t.to);n&&e.push(_v.of(n),Ej(r,n,!1))}return e.length&&r.dispatch({effects:e}),e.length>0};function Ej(r,e,t=!0){let n=r.state.doc.lineAt(e.from).number,i=r.state.doc.lineAt(e.to).number;return Pe.announce.of(`${r.state.phrase(t?"Folded lines":"Unfolded lines")} ${n} ${r.state.phrase("to")} ${i}.`)}const Fxe=r=>{let{state:e}=r,t=[];for(let n=0;n<e.doc.length;){let i=r.lineBlockAt(n),s=Rx(e,i.from,i.to);s&&t.push(CT.of(s)),n=(s?r.lineBlockAt(s.to):i).to+1}return t.length&&r.dispatch({effects:bj(r.state,t)}),!!t.length},Bxe=r=>{let e=r.state.field(Od,!1);if(!e||!e.size)return!1;let t=[];return e.between(0,r.state.doc.length,(n,i)=>{t.push(_v.of({from:n,to:i}))}),r.dispatch({effects:t}),!0},Uxe=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:Mxe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:Nxe},{key:"Ctrl-Alt-[",run:Fxe},{key:"Ctrl-Alt-]",run:Bxe}],Wxe={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},xj=Be.define({combine(r){return Ao(r,Wxe)}});function wj(r){return[Od,qxe]}function Tj(r,e){let{state:t}=r,n=t.facet(xj),i=a=>{let o=r.lineBlockAt(r.posAtDOM(a.target)),l=kx(r.state,o.from,o.to);l&&r.dispatch({effects:_v.of(l)}),a.preventDefault()};if(n.placeholderDOM)return n.placeholderDOM(r,i,e);let s=document.createElement("span");return s.textContent=n.placeholderText,s.setAttribute("aria-label",t.phrase("folded code")),s.title=t.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=i,s}const S4=Ye.replace({widget:new class extends Al{toDOM(r){return Tj(r,null)}}});class Hxe extends Al{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return Tj(e,this.value)}}const Vxe={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class I_ extends El{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}function Gxe(r={}){let e=Object.assign(Object.assign({},Vxe),r),t=new I_(e,!0),n=new I_(e,!1),i=Wr.fromClass(class{constructor(a){this.from=a.viewport.from,this.markers=this.buildMarkers(a)}update(a){(a.docChanged||a.viewportChanged||a.startState.facet(Uc)!=a.state.facet(Uc)||a.startState.field(Od,!1)!=a.state.field(Od,!1)||si(a.startState)!=si(a.state)||e.foldingChanged(a))&&(this.markers=this.buildMarkers(a.view))}buildMarkers(a){let o=new yl;for(let l of a.viewportLineBlocks){let c=kx(a.state,l.from,l.to)?n:Rx(a.state,l.from,l.to)?t:null;c&&o.add(l.from,l.from,c)}return o.finish()}}),{domEventHandlers:s}=e;return[i,sxe({class:"cm-foldGutter",markers(a){var o;return((o=a.plugin(i))===null||o===void 0?void 0:o.markers)||Pt.empty},initialSpacer(){return new I_(e,!1)},domEventHandlers:Object.assign(Object.assign({},s),{click:(a,o,l)=>{if(s.click&&s.click(a,o,l))return!0;let c=kx(a.state,o.from,o.to);if(c)return a.dispatch({effects:_v.of(c)}),!0;let u=Rx(a.state,o.from,o.to);return u?(a.dispatch({effects:CT.of(u)}),!0):!1}})}),wj()]}const qxe=Pe.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class Cv{constructor(e,t){this.specs=e;let n;function i(o){let l=Nc.newName();return(n||(n=Object.create(null)))["."+l]=o,l}const s=typeof t.all=="string"?t.all:t.all?i(t.all):void 0,a=t.scope;this.scope=a instanceof ia?o=>o.prop(gf)==a.data:a?o=>o==a:void 0,this.style=UG(e.map(o=>({tag:o.tag,class:o.class||i(Object.assign({},o,{tag:null}))})),{all:s}).style,this.module=n?new Nc(n):null,this.themeType=t.themeType}static define(e,t){return new Cv(e,t||{})}}const cI=Be.define(),Sj=Be.define({combine(r){return r.length?[r[0]]:null}});function $_(r){let e=r.facet(cI);return e.length?e:r.facet(Sj)}function Aj(r,e){let t=[Kxe],n;return r instanceof Cv&&(r.module&&t.push(Pe.styleModule.of(r.module)),n=r.themeType),e?.fallback?t.push(Sj.of(r)):n?t.push(cI.computeN([Pe.darkTheme],i=>i.facet(Pe.darkTheme)==(n=="dark")?[r]:[])):t.push(cI.of(r)),t}class jxe{constructor(e){this.markCache=Object.create(null),this.tree=si(e.state),this.decorations=this.buildDeco(e,$_(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=si(e.state),n=$_(e.state),i=n!=$_(e.startState),{viewport:s}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<s.to&&!i&&t.type==this.tree.type&&a>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||i)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=s.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ye.none;let n=new yl;for(let{from:i,to:s}of e.visibleRanges)hbe(this.tree,t,(a,o,l)=>{n.add(a,o,this.markCache[l]||(this.markCache[l]=Ye.mark({class:l})))},i,s);return n.finish()}}const Kxe=qd.high(Wr.fromClass(jxe,{decorations:r=>r.decorations})),zxe=Cv.define([{tag:fe.meta,color:"#404740"},{tag:fe.link,textDecoration:"underline"},{tag:fe.heading,textDecoration:"underline",fontWeight:"bold"},{tag:fe.emphasis,fontStyle:"italic"},{tag:fe.strong,fontWeight:"bold"},{tag:fe.strikethrough,textDecoration:"line-through"},{tag:fe.keyword,color:"#708"},{tag:[fe.atom,fe.bool,fe.url,fe.contentSeparator,fe.labelName],color:"#219"},{tag:[fe.literal,fe.inserted],color:"#164"},{tag:[fe.string,fe.deleted],color:"#a11"},{tag:[fe.regexp,fe.escape,fe.special(fe.string)],color:"#e40"},{tag:fe.definition(fe.variableName),color:"#00f"},{tag:fe.local(fe.variableName),color:"#30a"},{tag:[fe.typeName,fe.namespace],color:"#085"},{tag:fe.className,color:"#167"},{tag:[fe.special(fe.variableName),fe.macroName],color:"#256"},{tag:fe.definition(fe.propertyName),color:"#00c"},{tag:fe.comment,color:"#940"},{tag:fe.invalid,color:"#f00"}]),Yxe=Pe.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),_j=1e4,Cj="()[]{}",Rj=Be.define({combine(r){return Ao(r,{afterCursor:!0,brackets:Cj,maxScanDistance:_j,renderMatch:Zxe})}}),Qxe=Ye.mark({class:"cm-matchingBracket"}),Xxe=Ye.mark({class:"cm-nonmatchingBracket"});function Zxe(r){let e=[],t=r.matched?Qxe:Xxe;return e.push(t.range(r.start.from,r.start.to)),r.end&&e.push(t.range(r.end.from,r.end.to)),e}const Jxe=On.define({create(){return Ye.none},update(r,e){if(!e.docChanged&&!e.selection)return r;let t=[],n=e.state.facet(Rj);for(let i of e.state.selection.ranges){if(!i.empty)continue;let s=Za(e.state,i.head,-1,n)||i.head>0&&Za(e.state,i.head-1,1,n)||n.afterCursor&&(Za(e.state,i.head,1,n)||i.head<e.state.doc.length&&Za(e.state,i.head+1,-1,n));s&&(t=t.concat(n.renderMatch(s,e.state)))}return Ye.set(t,!0)},provide:r=>Pe.decorations.from(r)}),ewe=[Jxe,Yxe];function twe(r={}){return[Rj.of(r),ewe]}const rwe=new Tt;function uI(r,e,t){let n=r.prop(e<0?Tt.openedBy:Tt.closedBy);if(n)return n;if(r.name.length==1){let i=t.indexOf(r.name);if(i>-1&&i%2==(e<0?1:0))return[t[i+e]]}return null}function dI(r){let e=r.type.prop(rwe);return e?e(r.node):r}function Za(r,e,t,n={}){let i=n.maxScanDistance||_j,s=n.brackets||Cj,a=si(r),o=a.resolveInner(e,t);for(let l=o;l;l=l.parent){let c=uI(l.type,t,s);if(c&&l.from<l.to){let u=dI(l);if(u&&(t>0?e>=u.from&&e<u.to:e>u.from&&e<=u.to))return nwe(r,e,t,l,u,c,s)}}return iwe(r,e,t,a,o.type,i,s)}function nwe(r,e,t,n,i,s,a){let o=n.parent,l={from:i.from,to:i.to},c=0,u=o?.cursor();if(u&&(t<0?u.childBefore(n.from):u.childAfter(n.to)))do if(t<0?u.to<=n.from:u.from>=n.to){if(c==0&&s.indexOf(u.type.name)>-1&&u.from<u.to){let d=dI(u);return{start:l,end:d?{from:d.from,to:d.to}:void 0,matched:!0}}else if(uI(u.type,t,a))c++;else if(uI(u.type,-t,a)){if(c==0){let d=dI(u);return{start:l,end:d&&d.from<d.to?{from:d.from,to:d.to}:void 0,matched:!1}}c--}}while(t<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function iwe(r,e,t,n,i,s,a){let o=t<0?r.sliceDoc(e-1,e):r.sliceDoc(e,e+1),l=a.indexOf(o);if(l<0||l%2==0!=t>0)return null;let c={from:t<0?e-1:e,to:t>0?e+1:e},u=r.doc.iterRange(e,t>0?r.doc.length:0),d=0;for(let h=0;!u.next().done&&h<=s;){let f=u.value;t<0&&(h+=f.length);let m=e+h*t;for(let g=t>0?0:f.length-1,y=t>0?f.length:-1;g!=y;g+=t){let b=a.indexOf(f[g]);if(!(b<0||n.resolveInner(m+g,1).type!=i))if(b%2==0==t>0)d++;else{if(d==1)return{start:c,end:{from:m+g,to:m+g+1},matched:b>>1==l>>1};d--}}t>0&&(h+=f.length)}return u.done?{start:c,matched:!1}:null}const swe=Object.create(null),A4=[Mi.none],_4=[],C4=Object.create(null),awe=Object.create(null);for(let[r,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])awe[r]=owe(swe,e);function D_(r,e){_4.indexOf(r)>-1||(_4.push(r),console.warn(e))}function owe(r,e){let t=[];for(let o of e.split(" ")){let l=[];for(let c of o.split(".")){let u=r[c]||fe[c];u?typeof u=="function"?l.length?l=l.map(u):D_(c,`Modifier ${c} used at start of tag`):l.length?D_(c,`Tag ${c} used as modifier`):l=Array.isArray(u)?u:[u]:D_(c,`Unknown highlighting tag ${c}`)}for(let c of l)t.push(c)}if(!t.length)return 0;let n=e.replace(/ /g,"_"),i=n+" "+t.map(o=>o.id),s=C4[i];if(s)return s.id;let a=C4[i]=Mi.define({id:A4.length,name:n,props:[FG({[n]:t})]});return A4.push(a),a.id}gr.RTL,gr.LTR;const lwe=()=>r=>{try{JSON.parse(r.state.doc.toString())}catch(e){if(!(e instanceof SyntaxError))throw e;const t=cwe(e,r.state.doc);return[{from:t,message:e.message,severity:"error",to:t}]}return[]};function cwe(r,e){let t;return(t=r.message.match(/at position (\d+)/))?Math.min(+t[1],e.length):(t=r.message.match(/at line (\d+) column (\d+)/))?Math.min(e.line(+t[1]).from+ +t[2]-1,e.length):0}const uwe=Ax.define({name:"json",parser:gbe.configure({props:[pj.add({Object:T4({except:/^\s*\}/}),Array:T4({except:/^\s*\]/})}),gj.add({"Object Array":Dxe})]}),languageData:{closeBrackets:{brackets:["[","{",'"']},indentOnInput:/^\s*[\}\]]$/}});function dwe(){return new Exe(uwe)}function hwe(r,e){if(r==null)return{};var t={};for(var n in r)if({}.hasOwnProperty.call(r,n)){if(e.indexOf(n)!==-1)continue;t[n]=r[n]}return t}const fwe=r=>{let{state:e}=r,t=e.doc.lineAt(e.selection.main.from),n=YL(r.state,t.from);return n.line?pwe(r):n.block?gwe(r):!1};function zL(r,e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let i=r(e,t);return i?(n(t.update(i)),!0):!1}}const pwe=zL(bwe,0),mwe=zL(kj,0),gwe=zL((r,e)=>kj(r,e,ywe(e)),0);function YL(r,e){let t=r.languageDataAt("commentTokens",e);return t.length?t[0]:{}}const xm=50;function vwe(r,{open:e,close:t},n,i){let s=r.sliceDoc(n-xm,n),a=r.sliceDoc(i,i+xm),o=/\s*$/.exec(s)[0].length,l=/^\s*/.exec(a)[0].length,c=s.length-o;if(s.slice(c-e.length,c)==e&&a.slice(l,l+t.length)==t)return{open:{pos:n-o,margin:o&&1},close:{pos:i+l,margin:l&&1}};let u,d;i-n<=2*xm?u=d=r.sliceDoc(n,i):(u=r.sliceDoc(n,n+xm),d=r.sliceDoc(i-xm,i));let h=/^\s*/.exec(u)[0].length,f=/\s*$/.exec(d)[0].length,m=d.length-f-t.length;return u.slice(h,h+e.length)==e&&d.slice(m,m+t.length)==t?{open:{pos:n+h+e.length,margin:/\s/.test(u.charAt(h+e.length))?1:0},close:{pos:i-f-t.length,margin:/\s/.test(d.charAt(m-1))?1:0}}:null}function ywe(r){let e=[];for(let t of r.selection.ranges){let n=r.doc.lineAt(t.from),i=t.to<=n.to?n:r.doc.lineAt(t.to);i.from>n.from&&i.from==t.to&&(i=t.to==n.to+1?n:r.doc.lineAt(t.to-1));let s=e.length-1;s>=0&&e[s].to>n.from?e[s].to=i.to:e.push({from:n.from+/^\s*/.exec(n.text)[0].length,to:i.to})}return e}function kj(r,e,t=e.selection.ranges){let n=t.map(s=>YL(e,s.from).block);if(!n.every(s=>s))return null;let i=t.map((s,a)=>vwe(e,n[a],s.from,s.to));if(r!=2&&!i.every(s=>s))return{changes:e.changes(t.map((s,a)=>i[a]?[]:[{from:s.from,insert:n[a].open+" "},{from:s.to,insert:" "+n[a].close}]))};if(r!=1&&i.some(s=>s)){let s=[];for(let a=0,o;a<i.length;a++)if(o=i[a]){let l=n[a],{open:c,close:u}=o;s.push({from:c.pos-l.open.length,to:c.pos+c.margin},{from:u.pos-u.margin,to:u.pos+l.close.length})}return{changes:s}}return null}function bwe(r,e,t=e.selection.ranges){let n=[],i=-1;for(let{from:s,to:a}of t){let o=n.length,l=1e9,c=YL(e,s).line;if(c){for(let u=s;u<=a;){let d=e.doc.lineAt(u);if(d.from>i&&(s==a||a>d.from)){i=d.from;let h=/^\s*/.exec(d.text)[0].length,f=h==d.length,m=d.text.slice(h,h+c.length)==c?h:-1;h<d.text.length&&h<l&&(l=h),n.push({line:d,comment:m,token:c,indent:h,empty:f,single:!1})}u=d.to+1}if(l<1e9)for(let u=o;u<n.length;u++)n[u].indent<n[u].line.text.length&&(n[u].indent=l);n.length==o+1&&(n[o].single=!0)}}if(r!=2&&n.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:o,token:l,indent:c,empty:u,single:d}of n)(d||!u)&&s.push({from:o.from+c,insert:l+" "});let a=e.changes(s);return{changes:a,selection:e.selection.map(a,1)}}else if(r!=1&&n.some(s=>s.comment>=0)){let s=[];for(let{line:a,comment:o,token:l}of n)if(o>=0){let c=a.from+o,u=c+l.length;a.text[u-a.from]==" "&&u++,s.push({from:c,to:u})}return{changes:s}}return null}const hI=So.define(),Ewe=So.define(),xwe=Be.define(),Ij=Be.define({combine(r){return Ao(r,{minDepth:100,newGroupDelay:500,joinToEvent:(e,t)=>t},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,t)=>(n,i)=>e(n,i)||t(n,i)})}}),$j=On.define({create(){return Ja.empty},update(r,e){let t=e.state.facet(Ij),n=e.annotation(hI);if(n){let l=Oi.fromTransaction(e,n.selection),c=n.side,u=c==0?r.undone:r.done;return l?u=Ix(u,u.length,t.minDepth,l):u=Oj(u,e.startState.selection),new Ja(c==0?n.rest:u,c==0?u:n.rest)}let i=e.annotation(Ewe);if((i=="full"||i=="before")&&(r=r.isolate()),e.annotation(dn.addToHistory)===!1)return e.changes.empty?r:r.addMapping(e.changes.desc);let s=Oi.fromTransaction(e),a=e.annotation(dn.time),o=e.annotation(dn.userEvent);return s?r=r.addChanges(s,a,o,t,e):e.selection&&(r=r.addSelection(e.startState.selection,a,o,t.newGroupDelay)),(i=="full"||i=="after")&&(r=r.isolate()),r},toJSON(r){return{done:r.done.map(e=>e.toJSON()),undone:r.undone.map(e=>e.toJSON())}},fromJSON(r){return new Ja(r.done.map(Oi.fromJSON),r.undone.map(Oi.fromJSON))}});function wwe(r={}){return[$j,Ij.of(r),Pe.domEventHandlers({beforeinput(e,t){let n=e.inputType=="historyUndo"?Dj:e.inputType=="historyRedo"?fI:null;return n?(e.preventDefault(),n(t)):!1}})]}function RT(r,e){return function({state:t,dispatch:n}){if(!e&&t.readOnly)return!1;let i=t.field($j,!1);if(!i)return!1;let s=i.pop(r,t,e);return s?(n(s),!0):!1}}const Dj=RT(0,!1),fI=RT(1,!1),Twe=RT(0,!0),Swe=RT(1,!0);class Oi{constructor(e,t,n,i,s){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=i,this.selectionsAfter=s}setSelAfter(e){return new Oi(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(t=this.mapped)===null||t===void 0?void 0:t.toJSON(),startSelection:(n=this.startSelection)===null||n===void 0?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map(i=>i.toJSON())}}static fromJSON(e){return new Oi(e.changes&&un.fromJSON(e.changes),[],e.mapped&&ao.fromJSON(e.mapped),e.startSelection&&Ee.fromJSON(e.startSelection),e.selectionsAfter.map(Ee.fromJSON))}static fromTransaction(e,t){let n=Cs;for(let i of e.startState.facet(xwe)){let s=i(e);s.length&&(n=n.concat(s))}return!n.length&&e.changes.empty?null:new Oi(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,Cs)}static selection(e){return new Oi(void 0,Cs,void 0,void 0,e)}}function Ix(r,e,t,n){let i=e+1>t+20?e-t-1:0,s=r.slice(i,e);return s.push(n),s}function Awe(r,e){let t=[],n=!1;return r.iterChangedRanges((i,s)=>t.push(i,s)),e.iterChangedRanges((i,s,a,o)=>{for(let l=0;l<t.length;){let c=t[l++],u=t[l++];o>=c&&a<=u&&(n=!0)}}),n}function _we(r,e){return r.ranges.length==e.ranges.length&&r.ranges.filter((t,n)=>t.empty!=e.ranges[n].empty).length===0}function Lj(r,e){return r.length?e.length?r.concat(e):r:e}const Cs=[],Cwe=200;function Oj(r,e){if(r.length){let t=r[r.length-1],n=t.selectionsAfter.slice(Math.max(0,t.selectionsAfter.length-Cwe));return n.length&&n[n.length-1].eq(e)?r:(n.push(e),Ix(r,r.length-1,1e9,t.setSelAfter(n)))}else return[Oi.selection([e])]}function Rwe(r){let e=r[r.length-1],t=r.slice();return t[r.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),t}function L_(r,e){if(!r.length)return r;let t=r.length,n=Cs;for(;t;){let i=kwe(r[t-1],e,n);if(i.changes&&!i.changes.empty||i.effects.length){let s=r.slice(0,t);return s[t-1]=i,s}else e=i.mapped,t--,n=i.selectionsAfter}return n.length?[Oi.selection(n)]:Cs}function kwe(r,e,t){let n=Lj(r.selectionsAfter.length?r.selectionsAfter.map(o=>o.map(e)):Cs,t);if(!r.changes)return Oi.selection(n);let i=r.changes.map(e),s=e.mapDesc(r.changes,!0),a=r.mapped?r.mapped.composeDesc(s):s;return new Oi(i,pt.mapEffects(r.effects,e),a,r.startSelection.map(s),n)}const Iwe=/^(input\.type|delete)($|\.)/;class Ja{constructor(e,t,n=0,i=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=i}isolate(){return this.prevTime?new Ja(this.done,this.undone):this}addChanges(e,t,n,i,s){let a=this.done,o=a[a.length-1];return o&&o.changes&&!o.changes.empty&&e.changes&&(!n||Iwe.test(n))&&(!o.selectionsAfter.length&&t-this.prevTime<i.newGroupDelay&&i.joinToEvent(s,Awe(o.changes,e.changes))||n=="input.type.compose")?a=Ix(a,a.length-1,i.minDepth,new Oi(e.changes.compose(o.changes),Lj(pt.mapEffects(e.effects,o.changes),o.effects),o.mapped,o.startSelection,Cs)):a=Ix(a,a.length,i.minDepth,e),new Ja(a,Cs,t,n)}addSelection(e,t,n,i){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:Cs;return s.length>0&&t-this.prevTime<i&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&_we(s[s.length-1],e)?this:new Ja(Oj(this.done,e),this.undone,t,n)}addMapping(e){return new Ja(L_(this.done,e),L_(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let i=e==0?this.done:this.undone;if(i.length==0)return null;let s=i[i.length-1],a=s.selectionsAfter[0]||t.selection;if(n&&s.selectionsAfter.length)return t.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:hI.of({side:e,rest:Rwe(i),selection:a}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let o=i.length==1?Cs:i.slice(0,i.length-1);return s.mapped&&(o=L_(o,s.mapped)),t.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:hI.of({side:e,rest:o,selection:a}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}Ja.empty=new Ja(Cs,Cs);const $we=[{key:"Mod-z",run:Dj,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:fI,preventDefault:!0},{linux:"Ctrl-Shift-z",run:fI,preventDefault:!0},{key:"Mod-u",run:Twe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:Swe,preventDefault:!0}];function Pp(r,e){return Ee.create(r.ranges.map(e),r.mainIndex)}function _o(r,e){return r.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function ma({state:r,dispatch:e},t){let n=Pp(r.selection,t);return n.eq(r.selection,!0)?!1:(e(_o(r,n)),!0)}function kT(r,e){return Ee.cursor(e?r.to:r.from)}function Pj(r,e){return ma(r,t=>t.empty?r.moveByChar(t,e):kT(t,e))}function oi(r){return r.textDirectionAt(r.state.selection.main.head)==gr.LTR}const Mj=r=>Pj(r,!oi(r)),Nj=r=>Pj(r,oi(r));function Fj(r,e){return ma(r,t=>t.empty?r.moveByGroup(t,e):kT(t,e))}const Dwe=r=>Fj(r,!oi(r)),Lwe=r=>Fj(r,oi(r));function Owe(r,e,t){if(e.type.prop(t))return!0;let n=e.to-e.from;return n&&(n>2||/[^\s,.;:]/.test(r.sliceDoc(e.from,e.to)))||e.firstChild}function IT(r,e,t){let n=si(r).resolveInner(e.head),i=t?Tt.closedBy:Tt.openedBy;for(let l=e.head;;){let c=t?n.childAfter(l):n.childBefore(l);if(!c)break;Owe(r,c,i)?n=c:l=t?c.to:c.from}let s=n.type.prop(i),a,o;return s&&(a=t?Za(r,n.from,1):Za(r,n.to,-1))&&a.matched?o=t?a.end.to:a.end.from:o=t?n.to:n.from,Ee.cursor(o,t?-1:1)}const Pwe=r=>ma(r,e=>IT(r.state,e,!oi(r))),Mwe=r=>ma(r,e=>IT(r.state,e,oi(r)));function Bj(r,e){return ma(r,t=>{if(!t.empty)return kT(t,e);let n=r.moveVertically(t,e);return n.head!=t.head?n:r.moveToLineBoundary(t,e)})}const Uj=r=>Bj(r,!1),Wj=r=>Bj(r,!0);function Hj(r){let e=r.scrollDOM.clientHeight<r.scrollDOM.scrollHeight-2,t=0,n=0,i;if(e){for(let s of r.state.facet(Pe.scrollMargins)){let a=s(r);a?.top&&(t=Math.max(a?.top,t)),a?.bottom&&(n=Math.max(a?.bottom,n))}i=r.scrollDOM.clientHeight-t-n}else i=(r.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:n,selfScroll:e,height:Math.max(r.defaultLineHeight,i-5)}}function Vj(r,e){let t=Hj(r),{state:n}=r,i=Pp(n.selection,a=>a.empty?r.moveVertically(a,e,t.height):kT(a,e));if(i.eq(n.selection))return!1;let s;if(t.selfScroll){let a=r.coordsAtPos(n.selection.main.head),o=r.scrollDOM.getBoundingClientRect(),l=o.top+t.marginTop,c=o.bottom-t.marginBottom;a&&a.top>l&&a.bottom<c&&(s=Pe.scrollIntoView(i.main.head,{y:"start",yMargin:a.top-l}))}return r.dispatch(_o(n,i),{effects:s}),!0}const R4=r=>Vj(r,!1),pI=r=>Vj(r,!0);function Xc(r,e,t){let n=r.lineBlockAt(e.head),i=r.moveToLineBoundary(e,t);if(i.head==e.head&&i.head!=(t?n.to:n.from)&&(i=r.moveToLineBoundary(e,t,!1)),!t&&i.head==n.from&&n.length){let s=/^\s*/.exec(r.state.sliceDoc(n.from,Math.min(n.from+100,n.to)))[0].length;s&&e.head!=n.from+s&&(i=Ee.cursor(n.from+s))}return i}const Nwe=r=>ma(r,e=>Xc(r,e,!0)),Fwe=r=>ma(r,e=>Xc(r,e,!1)),Bwe=r=>ma(r,e=>Xc(r,e,!oi(r))),Uwe=r=>ma(r,e=>Xc(r,e,oi(r))),Wwe=r=>ma(r,e=>Ee.cursor(r.lineBlockAt(e.head).from,1)),Hwe=r=>ma(r,e=>Ee.cursor(r.lineBlockAt(e.head).to,-1));function Vwe(r,e,t){let n=!1,i=Pp(r.selection,s=>{let a=Za(r,s.head,-1)||Za(r,s.head,1)||s.head>0&&Za(r,s.head-1,1)||s.head<r.doc.length&&Za(r,s.head+1,-1);if(!a||!a.end)return s;n=!0;let o=a.start.from==s.head?a.end.to:a.end.from;return Ee.cursor(o)});return n?(e(_o(r,i)),!0):!1}const Gwe=({state:r,dispatch:e})=>Vwe(r,e);function Ps(r,e){let t=Pp(r.state.selection,n=>{let i=e(n);return Ee.range(n.anchor,i.head,i.goalColumn,i.bidiLevel||void 0)});return t.eq(r.state.selection)?!1:(r.dispatch(_o(r.state,t)),!0)}function Gj(r,e){return Ps(r,t=>r.moveByChar(t,e))}const qj=r=>Gj(r,!oi(r)),jj=r=>Gj(r,oi(r));function Kj(r,e){return Ps(r,t=>r.moveByGroup(t,e))}const qwe=r=>Kj(r,!oi(r)),jwe=r=>Kj(r,oi(r)),Kwe=r=>Ps(r,e=>IT(r.state,e,!oi(r))),zwe=r=>Ps(r,e=>IT(r.state,e,oi(r)));function zj(r,e){return Ps(r,t=>r.moveVertically(t,e))}const Yj=r=>zj(r,!1),Qj=r=>zj(r,!0);function Xj(r,e){return Ps(r,t=>r.moveVertically(t,e,Hj(r).height))}const k4=r=>Xj(r,!1),I4=r=>Xj(r,!0),Ywe=r=>Ps(r,e=>Xc(r,e,!0)),Qwe=r=>Ps(r,e=>Xc(r,e,!1)),Xwe=r=>Ps(r,e=>Xc(r,e,!oi(r))),Zwe=r=>Ps(r,e=>Xc(r,e,oi(r))),Jwe=r=>Ps(r,e=>Ee.cursor(r.lineBlockAt(e.head).from)),eTe=r=>Ps(r,e=>Ee.cursor(r.lineBlockAt(e.head).to)),$4=({state:r,dispatch:e})=>(e(_o(r,{anchor:0})),!0),D4=({state:r,dispatch:e})=>(e(_o(r,{anchor:r.doc.length})),!0),L4=({state:r,dispatch:e})=>(e(_o(r,{anchor:r.selection.main.anchor,head:0})),!0),O4=({state:r,dispatch:e})=>(e(_o(r,{anchor:r.selection.main.anchor,head:r.doc.length})),!0),tTe=({state:r,dispatch:e})=>(e(r.update({selection:{anchor:0,head:r.doc.length},userEvent:"select"})),!0),rTe=({state:r,dispatch:e})=>{let t=$T(r).map(({from:n,to:i})=>Ee.range(n,Math.min(i+1,r.doc.length)));return e(r.update({selection:Ee.create(t),userEvent:"select"})),!0},nTe=({state:r,dispatch:e})=>{let t=Pp(r.selection,n=>{let i=si(r),s=i.resolveStack(n.from,1);if(n.empty){let a=i.resolveStack(n.from,-1);a.node.from>=s.node.from&&a.node.to<=s.node.to&&(s=a)}for(let a=s;a;a=a.next){let{node:o}=a;if((o.from<n.from&&o.to>=n.to||o.to>n.to&&o.from<=n.from)&&a.next)return Ee.range(o.to,o.from)}return n});return t.eq(r.selection)?!1:(e(_o(r,t)),!0)},iTe=({state:r,dispatch:e})=>{let t=r.selection,n=null;return t.ranges.length>1?n=Ee.create([t.main]):t.main.empty||(n=Ee.create([Ee.cursor(t.main.head)])),n?(e(_o(r,n)),!0):!1};function Rv(r,e){if(r.state.readOnly)return!1;let t="delete.selection",{state:n}=r,i=n.changeByRange(s=>{let{from:a,to:o}=s;if(a==o){let l=e(s);l<a?(t="delete.backward",l=Eb(r,l,!1)):l>a&&(t="delete.forward",l=Eb(r,l,!0)),a=Math.min(a,l),o=Math.max(o,l)}else a=Eb(r,a,!1),o=Eb(r,o,!0);return a==o?{range:s}:{changes:{from:a,to:o},range:Ee.cursor(a,a<s.head?-1:1)}});return i.changes.empty?!1:(r.dispatch(n.update(i,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Pe.announce.of(n.phrase("Selection deleted")):void 0})),!0)}function Eb(r,e,t){if(r instanceof Pe)for(let n of r.state.facet(Pe.atomicRanges).map(i=>i(r)))n.between(e,e,(i,s)=>{i<e&&s>e&&(e=t?s:i)});return e}const Zj=(r,e,t)=>Rv(r,n=>{let i=n.from,{state:s}=r,a=s.doc.lineAt(i),o,l;if(t&&!e&&i>a.from&&i<a.from+200&&!/[^ \t]/.test(o=a.text.slice(0,i-a.from))){if(o[o.length-1]=="	")return i-1;let c=Op(o,s.tabSize),u=c%Cx(s)||Cx(s);for(let d=0;d<u&&o[o.length-1-d]==" ";d++)i--;l=i}else l=qn(a.text,i-a.from,e,e)+a.from,l==i&&a.number!=(e?s.doc.lines:1)?l+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(l-a.from,i-a.from))&&(l=qn(a.text,l-a.from,!1,!1)+a.from);return l}),mI=r=>Zj(r,!1,!0),Jj=r=>Zj(r,!0,!1),eK=(r,e)=>Rv(r,t=>{let n=t.head,{state:i}=r,s=i.doc.lineAt(n),a=i.charCategorizer(n);for(let o=null;;){if(n==(e?s.to:s.from)){n==t.head&&s.number!=(e?i.doc.lines:1)&&(n+=e?1:-1);break}let l=qn(s.text,n-s.from,e)+s.from,c=s.text.slice(Math.min(n,l)-s.from,Math.max(n,l)-s.from),u=a(c);if(o!=null&&u!=o)break;(c!=" "||n!=t.head)&&(o=u),n=l}return n}),tK=r=>eK(r,!1),sTe=r=>eK(r,!0),aTe=r=>Rv(r,e=>{let t=r.lineBlockAt(e.head).to;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),oTe=r=>Rv(r,e=>{let t=r.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),lTe=r=>Rv(r,e=>{let t=r.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(r.state.doc.length,e.head+1)}),cTe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:Bt.of(["",""])},range:Ee.cursor(n.from)}));return e(r.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},uTe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=r.changeByRange(n=>{if(!n.empty||n.from==0||n.from==r.doc.length)return{range:n};let i=n.from,s=r.doc.lineAt(i),a=i==s.from?i-1:qn(s.text,i-s.from,!1)+s.from,o=i==s.to?i+1:qn(s.text,i-s.from,!0)+s.from;return{changes:{from:a,to:o,insert:r.doc.slice(i,o).append(r.doc.slice(a,i))},range:Ee.cursor(o)}});return t.changes.empty?!1:(e(r.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function $T(r){let e=[],t=-1;for(let n of r.selection.ranges){let i=r.doc.lineAt(n.from),s=r.doc.lineAt(n.to);if(!n.empty&&n.to==s.from&&(s=r.doc.lineAt(n.to-1)),t>=i.number){let a=e[e.length-1];a.to=s.to,a.ranges.push(n)}else e.push({from:i.from,to:s.to,ranges:[n]});t=s.number+1}return e}function rK(r,e,t){if(r.readOnly)return!1;let n=[],i=[];for(let s of $T(r)){if(t?s.to==r.doc.length:s.from==0)continue;let a=r.doc.lineAt(t?s.to+1:s.from-1),o=a.length+1;if(t){n.push({from:s.to,to:a.to},{from:s.from,insert:a.text+r.lineBreak});for(let l of s.ranges)i.push(Ee.range(Math.min(r.doc.length,l.anchor+o),Math.min(r.doc.length,l.head+o)))}else{n.push({from:a.from,to:s.from},{from:s.to,insert:r.lineBreak+a.text});for(let l of s.ranges)i.push(Ee.range(l.anchor-o,l.head-o))}}return n.length?(e(r.update({changes:n,scrollIntoView:!0,selection:Ee.create(i,r.selection.mainIndex),userEvent:"move.line"})),!0):!1}const dTe=({state:r,dispatch:e})=>rK(r,e,!1),hTe=({state:r,dispatch:e})=>rK(r,e,!0);function nK(r,e,t){if(r.readOnly)return!1;let n=[];for(let i of $T(r))t?n.push({from:i.from,insert:r.doc.slice(i.from,i.to)+r.lineBreak}):n.push({from:i.to,insert:r.lineBreak+r.doc.slice(i.from,i.to)});return e(r.update({changes:n,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const fTe=({state:r,dispatch:e})=>nK(r,e,!1),pTe=({state:r,dispatch:e})=>nK(r,e,!0),mTe=r=>{if(r.state.readOnly)return!1;let{state:e}=r,t=e.changes($T(e).map(({from:i,to:s})=>(i>0?i--:s<e.doc.length&&s++,{from:i,to:s}))),n=Pp(e.selection,i=>{let s;if(r.lineWrapping){let a=r.lineBlockAt(i.head),o=r.coordsAtPos(i.head,i.assoc||1);o&&(s=a.bottom+r.documentTop-o.bottom+r.defaultLineHeight/2)}return r.moveVertically(i,!0,s)}).map(t);return r.dispatch({changes:t,selection:n,scrollIntoView:!0,userEvent:"delete.line"}),!0};function gTe(r,e){if(/\(\)|\[\]|\{\}/.test(r.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=si(r).resolveInner(e),n=t.childBefore(e),i=t.childAfter(e),s;return n&&i&&n.to<=e&&i.from>=e&&(s=n.type.prop(Tt.closedBy))&&s.indexOf(i.name)>-1&&r.doc.lineAt(n.to).from==r.doc.lineAt(i.from).from&&!/\S/.test(r.sliceDoc(n.to,i.from))?{from:n.to,to:i.from}:null}const P4=iK(!1),vTe=iK(!0);function iK(r){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange(i=>{let{from:s,to:a}=i,o=e.doc.lineAt(s),l=!r&&s==a&&gTe(e,s);r&&(s=a=(a<=o.to?o:e.doc.lineAt(a)).to);let c=new _T(e,{simulateBreak:s,simulateDoubleBreak:!!l}),u=jL(c,s);for(u==null&&(u=Op(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));a<o.to&&/\s/.test(o.text[a-o.from]);)a++;l?{from:s,to:a}=l:s>o.from&&s<o.from+100&&!/\S/.test(o.text.slice(0,s))&&(s=o.from);let d=["",E0(e,u)];return l&&d.push(E0(e,c.lineIndent(o.from,-1))),{changes:{from:s,to:a,insert:Bt.of(d)},range:Ee.cursor(s+1+d[1].length)}});return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0}}function QL(r,e){let t=-1;return r.changeByRange(n=>{let i=[];for(let a=n.from;a<=n.to;){let o=r.doc.lineAt(a);o.number>t&&(n.empty||n.to>o.from)&&(e(o,i,n),t=o.number),a=o.to+1}let s=r.changes(i);return{changes:i,range:Ee.range(s.mapPos(n.anchor,1),s.mapPos(n.head,1))}})}const yTe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let t=Object.create(null),n=new _T(r,{overrideIndentation:s=>{let a=t[s];return a??-1}}),i=QL(r,(s,a,o)=>{let l=jL(n,s.from);if(l==null)return;/\S/.test(s.text)||(l=0);let c=/^\s*/.exec(s.text)[0],u=E0(r,l);(c!=u||o.from<s.from+c.length)&&(t[s.from]=l,a.push({from:s.from,to:s.from+c.length,insert:u}))});return i.changes.empty||e(r.update(i,{userEvent:"indent"})),!0},sK=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(QL(r,(t,n)=>{n.push({from:t.from,insert:r.facet(AT)})}),{userEvent:"input.indent"})),!0),aK=({state:r,dispatch:e})=>r.readOnly?!1:(e(r.update(QL(r,(t,n)=>{let i=/^\s*/.exec(t.text)[0];if(!i)return;let s=Op(i,r.tabSize),a=0,o=E0(r,Math.max(0,s-Cx(r)));for(;a<i.length&&a<o.length&&i.charCodeAt(a)==o.charCodeAt(a);)a++;n.push({from:t.from+a,to:t.from+i.length,insert:o.slice(a)})}),{userEvent:"delete.dedent"})),!0),bTe=r=>(r.setTabFocusMode(),!0),ETe=[{key:"Ctrl-b",run:Mj,shift:qj,preventDefault:!0},{key:"Ctrl-f",run:Nj,shift:jj},{key:"Ctrl-p",run:Uj,shift:Yj},{key:"Ctrl-n",run:Wj,shift:Qj},{key:"Ctrl-a",run:Wwe,shift:Jwe},{key:"Ctrl-e",run:Hwe,shift:eTe},{key:"Ctrl-d",run:Jj},{key:"Ctrl-h",run:mI},{key:"Ctrl-k",run:aTe},{key:"Ctrl-Alt-h",run:tK},{key:"Ctrl-o",run:cTe},{key:"Ctrl-t",run:uTe},{key:"Ctrl-v",run:pI}],xTe=[{key:"ArrowLeft",run:Mj,shift:qj,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Dwe,shift:qwe,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:Bwe,shift:Xwe,preventDefault:!0},{key:"ArrowRight",run:Nj,shift:jj,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Lwe,shift:jwe,preventDefault:!0},{mac:"Cmd-ArrowRight",run:Uwe,shift:Zwe,preventDefault:!0},{key:"ArrowUp",run:Uj,shift:Yj,preventDefault:!0},{mac:"Cmd-ArrowUp",run:$4,shift:L4},{mac:"Ctrl-ArrowUp",run:R4,shift:k4},{key:"ArrowDown",run:Wj,shift:Qj,preventDefault:!0},{mac:"Cmd-ArrowDown",run:D4,shift:O4},{mac:"Ctrl-ArrowDown",run:pI,shift:I4},{key:"PageUp",run:R4,shift:k4},{key:"PageDown",run:pI,shift:I4},{key:"Home",run:Fwe,shift:Qwe,preventDefault:!0},{key:"Mod-Home",run:$4,shift:L4},{key:"End",run:Nwe,shift:Ywe,preventDefault:!0},{key:"Mod-End",run:D4,shift:O4},{key:"Enter",run:P4,shift:P4},{key:"Mod-a",run:tTe},{key:"Backspace",run:mI,shift:mI},{key:"Delete",run:Jj},{key:"Mod-Backspace",mac:"Alt-Backspace",run:tK},{key:"Mod-Delete",mac:"Alt-Delete",run:sTe},{mac:"Mod-Backspace",run:oTe},{mac:"Mod-Delete",run:lTe}].concat(ETe.map(r=>({mac:r.key,run:r.run,shift:r.shift}))),wTe=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:Pwe,shift:Kwe},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:Mwe,shift:zwe},{key:"Alt-ArrowUp",run:dTe},{key:"Shift-Alt-ArrowUp",run:fTe},{key:"Alt-ArrowDown",run:hTe},{key:"Shift-Alt-ArrowDown",run:pTe},{key:"Escape",run:iTe},{key:"Mod-Enter",run:vTe},{key:"Alt-l",mac:"Ctrl-l",run:rTe},{key:"Mod-i",run:nTe,preventDefault:!0},{key:"Mod-[",run:aK},{key:"Mod-]",run:sK},{key:"Mod-Alt-\\",run:yTe},{key:"Shift-Mod-k",run:mTe},{key:"Shift-Mod-\\",run:Gwe},{key:"Mod-/",run:fwe},{key:"Alt-A",run:mwe},{key:"Ctrl-m",mac:"Shift-Alt-m",run:bTe}].concat(xTe),TTe={key:"Tab",run:sK,shift:aK};function er(){var r=arguments[0];typeof r=="string"&&(r=document.createElement(r));var e=1,t=arguments[1];if(t&&typeof t=="object"&&t.nodeType==null&&!Array.isArray(t)){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=t[n];typeof i=="string"?r.setAttribute(n,i):i!=null&&(r[n]=i)}e++}for(;e<arguments.length;e++)oK(r,arguments[e]);return r}function oK(r,e){if(typeof e=="string")r.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)r.appendChild(e);else if(Array.isArray(e))for(var t=0;t<e.length;t++)oK(r,e[t]);else throw new RangeError("Unsupported child node: "+e)}const M4=typeof String.prototype.normalize=="function"?r=>r.normalize("NFKD"):r=>r;class lp{constructor(e,t,n=0,i=e.length,s,a){this.test=a,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(n,i),this.bufferStart=n,this.normalize=s?o=>s(M4(o)):M4,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ki(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=IL(e),n=this.bufferStart+this.bufferPos;this.bufferPos+=za(e);let i=this.normalize(t);if(i.length)for(let s=0,a=n;;s++){let o=i.charCodeAt(s),l=this.match(o,a,this.bufferPos+this.bufferStart);if(s==i.length-1){if(l)return this.value=l,this;break}a==n&&s<t.length&&t.charCodeAt(s)==o&&a++}}}match(e,t,n){let i=null;for(let s=0;s<this.matches.length;s+=2){let a=this.matches[s],o=!1;this.query.charCodeAt(a)==e&&(a==this.query.length-1?i={from:this.matches[s+1],to:n}:(this.matches[s]++,o=!0)),o||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?i={from:t,to:n}:this.matches.push(1,t)),i&&this.test&&!this.test(i.from,i.to,this.buffer,this.bufferStart)&&(i=null),i}}typeof Symbol<"u"&&(lp.prototype[Symbol.iterator]=function(){return this});const lK={from:-1,to:-1,match:/.*/.exec("")},XL="gm"+(/x/.unicode==null?"":"u");class cK{constructor(e,t,n,i=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=lK,/\\[sWDnr]|\n|\r|\[\^/.test(t))return new uK(e,t,n,i,s);this.re=new RegExp(t,XL+(n?.ignoreCase?"i":"")),this.test=n?.test,this.iter=e.iter();let a=e.lineAt(i);this.curLineStart=a.from,this.matchPos=$x(e,i),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let t=this.matchPos<=this.to&&this.re.exec(this.curLine);if(t){let n=this.curLineStart+t.index,i=n+t[0].length;if(this.matchPos=$x(this.text,i+(n==i?1:0)),n==this.curLineStart+this.curLine.length&&this.nextLine(),(n<i||n>this.value.to)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const O_=new WeakMap;class Df{constructor(e,t){this.from=e,this.text=t}get to(){return this.from+this.text.length}static get(e,t,n){let i=O_.get(e);if(!i||i.from>=n||i.to<=t){let o=new Df(t,e.sliceString(t,n));return O_.set(e,o),o}if(i.from==t&&i.to==n)return i;let{text:s,from:a}=i;return a>t&&(s=e.sliceString(t,a)+s,a=t),i.to<n&&(s+=e.sliceString(i.to,n)),O_.set(e,new Df(a,s)),new Df(t,s.slice(t-a,n-a))}}class uK{constructor(e,t,n,i,s){this.text=e,this.to=s,this.done=!1,this.value=lK,this.matchPos=$x(e,i),this.re=new RegExp(t,XL+(n?.ignoreCase?"i":"")),this.test=n?.test,this.flat=Df.get(e,i,this.chunkEnd(i+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,t=this.re.exec(this.flat.text);if(t&&!t[0]&&t.index==e&&(this.re.lastIndex=e+1,t=this.re.exec(this.flat.text)),t){let n=this.flat.from+t.index,i=n+t[0].length;if((this.flat.to>=this.to||t.index+t[0].length<=this.flat.text.length-10)&&(!this.test||this.test(n,i,t)))return this.value={from:n,to:i,match:t},this.matchPos=$x(this.text,i+(n==i?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=Df.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(cK.prototype[Symbol.iterator]=uK.prototype[Symbol.iterator]=function(){return this});function STe(r){try{return new RegExp(r,XL),!0}catch{return!1}}function $x(r,e){if(e>=r.length)return e;let t=r.lineAt(e),n;for(;e<t.to&&(n=t.text.charCodeAt(e-t.from))>=56320&&n<57344;)e++;return e}function gI(r){let e=String(r.state.doc.lineAt(r.state.selection.main.head).number),t=er("input",{class:"cm-textfield",name:"line",value:e}),n=er("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),r.dispatch({effects:Mg.of(!1)}),r.focus()):s.keyCode==13&&(s.preventDefault(),i())},onsubmit:s=>{s.preventDefault(),i()}},er("label",r.state.phrase("Go to line"),": ",t)," ",er("button",{class:"cm-button",type:"submit"},r.state.phrase("go")),er("button",{name:"close",onclick:()=>{r.dispatch({effects:Mg.of(!1)}),r.focus()},"aria-label":r.state.phrase("close"),type:"button"},["×"]));function i(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(t.value);if(!s)return;let{state:a}=r,o=a.doc.lineAt(a.selection.main.head),[,l,c,u,d]=s,h=u?+u.slice(1):0,f=c?+c:o.number;if(c&&d){let y=f/100;l&&(y=y*(l=="-"?-1:1)+o.number/a.doc.lines),f=Math.round(a.doc.lines*y)}else c&&l&&(f=f*(l=="-"?-1:1)+o.number);let m=a.doc.line(Math.max(1,Math.min(a.doc.lines,f))),g=Ee.cursor(m.from+Math.max(0,Math.min(h,m.length)));r.dispatch({effects:[Mg.of(!1),Pe.scrollIntoView(g.from,{y:"center"})],selection:g}),r.focus()}return{dom:n}}const Mg=pt.define(),N4=On.define({create(){return!0},update(r,e){for(let t of e.effects)t.is(Mg)&&(r=t.value);return r},provide:r=>b0.from(r,e=>e?gI:null)}),ATe=r=>{let e=y0(r,gI);if(!e){let t=[Mg.of(!0)];r.state.field(N4,!1)==null&&t.push(pt.appendConfig.of([N4,_Te])),r.dispatch({effects:t}),e=y0(r,gI)}return e&&e.dom.querySelector("input").select(),!0},_Te=Pe.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),CTe={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},RTe=Be.define({combine(r){return Ao(r,CTe,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})}});function kTe(r){return[OTe,LTe]}const ITe=Ye.mark({class:"cm-selectionMatch"}),$Te=Ye.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function F4(r,e,t,n){return(t==0||r(e.sliceDoc(t-1,t))!=_r.Word)&&(n==e.doc.length||r(e.sliceDoc(n,n+1))!=_r.Word)}function DTe(r,e,t,n){return r(e.sliceDoc(t,t+1))==_r.Word&&r(e.sliceDoc(n-1,n))==_r.Word}const LTe=Wr.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.selectionSet||r.docChanged||r.viewportChanged)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=r.state.facet(RTe),{state:t}=r,n=t.selection;if(n.ranges.length>1)return Ye.none;let i=n.main,s,a=null;if(i.empty){if(!e.highlightWordAroundCursor)return Ye.none;let l=t.wordAt(i.head);if(!l)return Ye.none;a=t.charCategorizer(i.head),s=t.sliceDoc(l.from,l.to)}else{let l=i.to-i.from;if(l<e.minSelectionLength||l>200)return Ye.none;if(e.wholeWords){if(s=t.sliceDoc(i.from,i.to),a=t.charCategorizer(i.head),!(F4(a,t,i.from,i.to)&&DTe(a,t,i.from,i.to)))return Ye.none}else if(s=t.sliceDoc(i.from,i.to),!s)return Ye.none}let o=[];for(let l of r.visibleRanges){let c=new lp(t.doc,s,l.from,l.to);for(;!c.next().done;){let{from:u,to:d}=c.value;if((!a||F4(a,t,u,d))&&(i.empty&&u<=i.from&&d>=i.to?o.push($Te.range(u,d)):(u>=i.to||d<=i.from)&&o.push(ITe.range(u,d)),o.length>e.maxMatches))return Ye.none}}return Ye.set(o)}},{decorations:r=>r.decorations}),OTe=Pe.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),PTe=({state:r,dispatch:e})=>{let{selection:t}=r,n=Ee.create(t.ranges.map(i=>r.wordAt(i.head)||Ee.cursor(i.head)),t.mainIndex);return n.eq(t)?!1:(e(r.update({selection:n})),!0)};function MTe(r,e){let{main:t,ranges:n}=r.selection,i=r.wordAt(t.head),s=i&&i.from==t.from&&i.to==t.to;for(let a=!1,o=new lp(r.doc,e,n[n.length-1].to);;)if(o.next(),o.done){if(a)return null;o=new lp(r.doc,e,0,Math.max(0,n[n.length-1].from-1)),a=!0}else{if(a&&n.some(l=>l.from==o.value.from))continue;if(s){let l=r.wordAt(o.value.from);if(!l||l.from!=o.value.from||l.to!=o.value.to)continue}return o.value}}const NTe=({state:r,dispatch:e})=>{let{ranges:t}=r.selection;if(t.some(s=>s.from===s.to))return PTe({state:r,dispatch:e});let n=r.sliceDoc(t[0].from,t[0].to);if(r.selection.ranges.some(s=>r.sliceDoc(s.from,s.to)!=n))return!1;let i=MTe(r,n);return i?(e(r.update({selection:r.selection.addRange(Ee.range(i.from,i.to),!1),effects:Pe.scrollIntoView(i.to)})),!0):!1},Mp=Be.define({combine(r){return Ao(r,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new YTe(e),scrollToMatch:e=>Pe.scrollIntoView(e)})}});class dK{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||STe(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(t,n)=>n=="n"?`
`:n=="r"?"\r":n=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new WTe(this):new BTe(this)}getCursor(e,t=0,n){let i=e.doc?e:$t.create({doc:e});return n==null&&(n=i.doc.length),this.regexp?Hh(this,i,t,n):Wh(this,i,t,n)}}class hK{constructor(e){this.spec=e}}function Wh(r,e,t,n){return new lp(e.doc,r.unquoted,t,n,r.caseSensitive?void 0:i=>i.toLowerCase(),r.wholeWord?FTe(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function FTe(r,e){return(t,n,i,s)=>((s>t||s+i.length<n)&&(s=Math.max(0,t-2),i=r.sliceString(s,Math.min(r.length,n+2))),(e(Dx(i,t-s))!=_r.Word||e(Lx(i,t-s))!=_r.Word)&&(e(Lx(i,n-s))!=_r.Word||e(Dx(i,n-s))!=_r.Word))}class BTe extends hK{constructor(e){super(e)}nextMatch(e,t,n){let i=Wh(this.spec,e,n,e.doc.length).nextOverlapping();if(i.done){let s=Math.min(e.doc.length,t+this.spec.unquoted.length);i=Wh(this.spec,e,0,s).nextOverlapping()}return i.done||i.value.from==t&&i.value.to==n?null:i.value}prevMatchInRange(e,t,n){for(let i=n;;){let s=Math.max(t,i-1e4-this.spec.unquoted.length),a=Wh(this.spec,e,s,i),o=null;for(;!a.nextOverlapping().done;)o=a.value;if(o)return o;if(s==t)return null;i-=1e4}}prevMatch(e,t,n){let i=this.prevMatchInRange(e,0,t);return i||(i=this.prevMatchInRange(e,Math.max(0,n-this.spec.unquoted.length),e.doc.length)),i&&(i.from!=t||i.to!=n)?i:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,t){let n=Wh(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let s=Wh(this.spec,e,Math.max(0,t-this.spec.unquoted.length),Math.min(n+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}function Hh(r,e,t,n){return new cK(e.doc,r.search,{ignoreCase:!r.caseSensitive,test:r.wholeWord?UTe(e.charCategorizer(e.selection.main.head)):void 0},t,n)}function Dx(r,e){return r.slice(qn(r,e,!1),e)}function Lx(r,e){return r.slice(e,qn(r,e))}function UTe(r){return(e,t,n)=>!n[0].length||(r(Dx(n.input,n.index))!=_r.Word||r(Lx(n.input,n.index))!=_r.Word)&&(r(Lx(n.input,n.index+n[0].length))!=_r.Word||r(Dx(n.input,n.index+n[0].length))!=_r.Word)}class WTe extends hK{nextMatch(e,t,n){let i=Hh(this.spec,e,n,e.doc.length).next();return i.done&&(i=Hh(this.spec,e,0,t).next()),i.done?null:i.value}prevMatchInRange(e,t,n){for(let i=1;;i++){let s=Math.max(t,n-i*1e4),a=Hh(this.spec,e,s,n),o=null;for(;!a.next().done;)o=a.value;if(o&&(s==t||o.from>s+10))return o;if(s==t)return null}}prevMatch(e,t,n){return this.prevMatchInRange(e,0,t)||this.prevMatchInRange(e,n,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(t,n)=>{if(n=="&")return e.match[0];if(n=="$")return"$";for(let i=n.length;i>0;i--){let s=+n.slice(0,i);if(s>0&&s<e.match.length)return e.match[s]+n.slice(i)}return t})}matchAll(e,t){let n=Hh(this.spec,e,0,e.doc.length),i=[];for(;!n.next().done;){if(i.length>=t)return null;i.push(n.value)}return i}highlight(e,t,n,i){let s=Hh(this.spec,e,Math.max(0,t-250),Math.min(n+250,e.doc.length));for(;!s.next().done;)i(s.value.from,s.value.to)}}const x0=pt.define(),ZL=pt.define(),Ac=On.define({create(r){return new P_(vI(r).create(),null)},update(r,e){for(let t of e.effects)t.is(x0)?r=new P_(t.value.create(),r.panel):t.is(ZL)&&(r=new P_(r.query,t.value?JL:null));return r},provide:r=>b0.from(r,e=>e.panel)});class P_{constructor(e,t){this.query=e,this.panel=t}}const HTe=Ye.mark({class:"cm-searchMatch"}),VTe=Ye.mark({class:"cm-searchMatch cm-searchMatch-selected"}),GTe=Wr.fromClass(class{constructor(r){this.view=r,this.decorations=this.highlight(r.state.field(Ac))}update(r){let e=r.state.field(Ac);(e!=r.startState.field(Ac)||r.docChanged||r.selectionSet||r.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:r,panel:e}){if(!e||!r.spec.valid)return Ye.none;let{view:t}=this,n=new yl;for(let i=0,s=t.visibleRanges,a=s.length;i<a;i++){let{from:o,to:l}=s[i];for(;i<a-1&&l>s[i+1].from-2*250;)l=s[++i].to;r.highlight(t.state,o,l,(c,u)=>{let d=t.state.selection.ranges.some(h=>h.from==c&&h.to==u);n.add(c,u,d?VTe:HTe)})}return n.finish()}},{decorations:r=>r.decorations});function kv(r){return e=>{let t=e.state.field(Ac,!1);return t&&t.query.spec.valid?r(e,t):mK(e)}}const Ox=kv((r,{query:e})=>{let{to:t}=r.state.selection.main,n=e.nextMatch(r.state,t,t);if(!n)return!1;let i=Ee.single(n.from,n.to),s=r.state.facet(Mp);return r.dispatch({selection:i,effects:[eO(r,n),s.scrollToMatch(i.main,r)],userEvent:"select.search"}),pK(r),!0}),Px=kv((r,{query:e})=>{let{state:t}=r,{from:n}=t.selection.main,i=e.prevMatch(t,n,n);if(!i)return!1;let s=Ee.single(i.from,i.to),a=r.state.facet(Mp);return r.dispatch({selection:s,effects:[eO(r,i),a.scrollToMatch(s.main,r)],userEvent:"select.search"}),pK(r),!0}),qTe=kv((r,{query:e})=>{let t=e.matchAll(r.state,1e3);return!t||!t.length?!1:(r.dispatch({selection:Ee.create(t.map(n=>Ee.range(n.from,n.to))),userEvent:"select.search.matches"}),!0)}),jTe=({state:r,dispatch:e})=>{let t=r.selection;if(t.ranges.length>1||t.main.empty)return!1;let{from:n,to:i}=t.main,s=[],a=0;for(let o=new lp(r.doc,r.sliceDoc(n,i));!o.next().done;){if(s.length>1e3)return!1;o.value.from==n&&(a=s.length),s.push(Ee.range(o.value.from,o.value.to))}return e(r.update({selection:Ee.create(s,a),userEvent:"select.search.matches"})),!0},B4=kv((r,{query:e})=>{let{state:t}=r,{from:n,to:i}=t.selection.main;if(t.readOnly)return!1;let s=e.nextMatch(t,n,n);if(!s)return!1;let a=s,o=[],l,c,u=[];if(a.from==n&&a.to==i&&(c=t.toText(e.getReplacement(a)),o.push({from:a.from,to:a.to,insert:c}),a=e.nextMatch(t,a.from,a.to),u.push(Pe.announce.of(t.phrase("replaced match on line $",t.doc.lineAt(n).number)+"."))),a){let d=o.length==0||o[0].from>=s.to?0:s.to-s.from-c.length;l=Ee.single(a.from-d,a.to-d),u.push(eO(r,a)),u.push(t.facet(Mp).scrollToMatch(l.main,r))}return r.dispatch({changes:o,selection:l,effects:u,userEvent:"input.replace"}),!0}),KTe=kv((r,{query:e})=>{if(r.state.readOnly)return!1;let t=e.matchAll(r.state,1e9).map(i=>{let{from:s,to:a}=i;return{from:s,to:a,insert:e.getReplacement(i)}});if(!t.length)return!1;let n=r.state.phrase("replaced $ matches",t.length)+".";return r.dispatch({changes:t,effects:Pe.announce.of(n),userEvent:"input.replace.all"}),!0});function JL(r){return r.state.facet(Mp).createPanel(r)}function vI(r,e){var t,n,i,s,a;let o=r.selection.main,l=o.empty||o.to>o.from+100?"":r.sliceDoc(o.from,o.to);if(e&&!l)return e;let c=r.facet(Mp);return new dK({search:((t=e?.literal)!==null&&t!==void 0?t:c.literal)?l:l.replace(/\n/g,"\\n"),caseSensitive:(n=e?.caseSensitive)!==null&&n!==void 0?n:c.caseSensitive,literal:(i=e?.literal)!==null&&i!==void 0?i:c.literal,regexp:(s=e?.regexp)!==null&&s!==void 0?s:c.regexp,wholeWord:(a=e?.wholeWord)!==null&&a!==void 0?a:c.wholeWord})}function fK(r){let e=y0(r,JL);return e&&e.dom.querySelector("[main-field]")}function pK(r){let e=fK(r);e&&e==r.root.activeElement&&e.select()}const mK=r=>{let e=r.state.field(Ac,!1);if(e&&e.panel){let t=fK(r);if(t&&t!=r.root.activeElement){let n=vI(r.state,e.query.spec);n.valid&&r.dispatch({effects:x0.of(n)}),t.focus(),t.select()}}else r.dispatch({effects:[ZL.of(!0),e?x0.of(vI(r.state,e.query.spec)):pt.appendConfig.of(XTe)]});return!0},gK=r=>{let e=r.state.field(Ac,!1);if(!e||!e.panel)return!1;let t=y0(r,JL);return t&&t.dom.contains(r.root.activeElement)&&r.focus(),r.dispatch({effects:ZL.of(!1)}),!0},zTe=[{key:"Mod-f",run:mK,scope:"editor search-panel"},{key:"F3",run:Ox,shift:Px,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Ox,shift:Px,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:gK,scope:"editor search-panel"},{key:"Mod-Shift-l",run:jTe},{key:"Mod-Alt-g",run:ATe},{key:"Mod-d",run:NTe,preventDefault:!0}];class YTe{constructor(e){this.view=e;let t=this.query=e.state.field(Ac).query.spec;this.commit=this.commit.bind(this),this.searchField=er("input",{value:t.search,placeholder:Xi(e,"Find"),"aria-label":Xi(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=er("input",{value:t.replace,placeholder:Xi(e,"Replace"),"aria-label":Xi(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=er("input",{type:"checkbox",name:"case",form:"",checked:t.caseSensitive,onchange:this.commit}),this.reField=er("input",{type:"checkbox",name:"re",form:"",checked:t.regexp,onchange:this.commit}),this.wordField=er("input",{type:"checkbox",name:"word",form:"",checked:t.wholeWord,onchange:this.commit});function n(i,s,a){return er("button",{class:"cm-button",name:i,onclick:s,type:"button"},a)}this.dom=er("div",{onkeydown:i=>this.keydown(i),class:"cm-search"},[this.searchField,n("next",()=>Ox(e),[Xi(e,"next")]),n("prev",()=>Px(e),[Xi(e,"previous")]),n("select",()=>qTe(e),[Xi(e,"all")]),er("label",null,[this.caseField,Xi(e,"match case")]),er("label",null,[this.reField,Xi(e,"regexp")]),er("label",null,[this.wordField,Xi(e,"by word")]),...e.state.readOnly?[]:[er("br"),this.replaceField,n("replace",()=>B4(e),[Xi(e,"replace")]),n("replaceAll",()=>KTe(e),[Xi(e,"replace all")])],er("button",{name:"close",onclick:()=>gK(e),"aria-label":Xi(e,"close"),type:"button"},["×"])])}commit(){let e=new dK({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:x0.of(e)}))}keydown(e){fEe(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Px:Ox)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),B4(this.view))}update(e){for(let t of e.transactions)for(let n of t.effects)n.is(x0)&&!n.value.eq(this.query)&&this.setQuery(n.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Mp).top}}function Xi(r,e){return r.state.phrase(e)}const xb=30,wb=/[\s\.,:;?!]/;function eO(r,{from:e,to:t}){let n=r.state.doc.lineAt(e),i=r.state.doc.lineAt(t).to,s=Math.max(n.from,e-xb),a=Math.min(i,t+xb),o=r.state.sliceDoc(s,a);if(s!=n.from){for(let l=0;l<xb;l++)if(!wb.test(o[l+1])&&wb.test(o[l])){o=o.slice(l);break}}if(a!=i){for(let l=o.length-1;l>o.length-xb;l--)if(!wb.test(o[l-1])&&wb.test(o[l])){o=o.slice(0,l);break}}return Pe.announce.of(`${r.state.phrase("current match")}. ${o} ${r.state.phrase("on line")} ${n.number}.`)}const QTe=Pe.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),XTe=[Ac,qd.low(GTe),QTe];class vK{constructor(e,t,n,i){this.state=e,this.pos=t,this.explicit=n,this.view=i,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=si(this.state).resolveInner(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),i=t.text.slice(n-t.from,this.pos-t.from),s=i.search(yK(e,!1));return s<0?null:{from:n+s,to:this.pos,text:i.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,t,n){e=="abort"&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function U4(r){let e=Object.keys(r).join(""),t=/\w/.test(e);return t&&(e=e.replace(/\w/g,"")),`[${t?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function ZTe(r){let e=Object.create(null),t=Object.create(null);for(let{label:i}of r){e[i[0]]=!0;for(let s=1;s<i.length;s++)t[i[s]]=!0}let n=U4(e)+U4(t)+"*$";return[new RegExp("^"+n),new RegExp(n)]}function JTe(r){let e=r.map(i=>typeof i=="string"?{label:i}:i),[t,n]=e.every(i=>/^\w+$/.test(i.label))?[/\w*$/,/\w+$/]:ZTe(e);return i=>{let s=i.matchBefore(n);return s||i.explicit?{from:s?s.from:i.pos,options:e,validFor:t}:null}}let W4=class{constructor(e,t,n,i){this.completion=e,this.source=t,this.match=n,this.score=i}};function fd(r){return r.selection.main.from}function yK(r,e){var t;let{source:n}=r,i=e&&n[0]!="^",s=n[n.length-1]!="$";return!i&&!s?r:new RegExp(`${i?"^":""}(?:${n})${s?"$":""}`,(t=r.flags)!==null&&t!==void 0?t:r.ignoreCase?"i":"")}const bK=So.define();function eSe(r,e,t,n){let{main:i}=r.selection,s=t-i.from,a=n-i.from;return Object.assign(Object.assign({},r.changeByRange(o=>{if(o!=i&&t!=n&&r.sliceDoc(o.from+s,o.from+a)!=r.sliceDoc(t,n))return{range:o};let l=r.toText(e);return{changes:{from:o.from+s,to:n==i.from?o.to:o.from+a,insert:l},range:Ee.cursor(o.from+s+l.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const H4=new WeakMap;function tSe(r){if(!Array.isArray(r))return r;let e=H4.get(r);return e||H4.set(r,e=JTe(r)),e}const Mx=pt.define(),w0=pt.define();class rSe{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=ki(e,t),i=za(n);this.chars.push(n);let s=e.slice(t,t+i),a=s.toUpperCase();this.folded.push(ki(a==s?s.toLowerCase():a,0)),t+=i}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:i,precise:s,byWord:a}=this;if(t.length==1){let E=ki(e,0),w=za(E),A=w==e.length?0:-100;if(E!=t[0])if(E==n[0])A+=-200;else return null;return this.ret(A,[0,w])}let o=e.indexOf(this.pattern);if(o==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let l=t.length,c=0;if(o<0){for(let E=0,w=Math.min(e.length,200);E<w&&c<l;){let A=ki(e,E);(A==t[c]||A==n[c])&&(i[c++]=E),E+=za(A)}if(c<l)return null}let u=0,d=0,h=!1,f=0,m=-1,g=-1,y=/[a-z]/.test(e),b=!0;for(let E=0,w=Math.min(e.length,200),A=0;E<w&&d<l;){let S=ki(e,E);o<0&&(u<l&&S==t[u]&&(s[u++]=E),f<l&&(S==t[f]||S==n[f]?(f==0&&(m=E),g=E+1,f++):f=0));let _,C=S<255?S>=48&&S<=57||S>=97&&S<=122?2:S>=65&&S<=90?1:0:(_=IL(S))!=_.toLowerCase()?1:_!=_.toUpperCase()?2:0;(!E||C==1&&y||A==0&&C!=0)&&(t[d]==S||n[d]==S&&(h=!0)?a[d++]=E:a.length&&(b=!1)),A=C,E+=za(S)}return d==l&&a[0]==0&&b?this.result(-100+(h?-200:0),a,e):f==l&&m==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):o>-1?this.ret(-700-e.length,[o,o+this.pattern.length]):f==l?this.ret(-900-e.length,[m,g]):d==l?this.result(-100+(h?-200:0)+-700+(b?0:-1100),a,e):t.length==2?null:this.result((i[0]?-700:0)+-200+-1100,i,e)}result(e,t,n){let i=[],s=0;for(let a of t){let o=a+(this.astral?za(ki(n,a)):1);s&&i[s-1]==a?i[s-1]=o:(i[s++]=a,i[s++]=o)}return this.ret(e-n.length,i)}}class nSe{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return n==null?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const kn=Be.define({combine(r){return Ao(r,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:iSe,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>V4(e(n),t(n)),optionClass:(e,t)=>n=>V4(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function V4(r,e){return r?e?r+" "+e:r:e}function iSe(r,e,t,n,i,s){let a=r.textDirection==gr.RTL,o=a,l=!1,c="top",u,d,h=e.left-i.left,f=i.right-e.right,m=n.right-n.left,g=n.bottom-n.top;if(o&&h<Math.min(m,f)?o=!1:!o&&f<Math.min(m,h)&&(o=!0),m<=(o?h:f))u=Math.max(i.top,Math.min(t.top,i.bottom-g))-e.top,d=Math.min(400,o?h:f);else{l=!0,d=Math.min(400,(a?e.right:i.right-e.left)-30);let E=i.bottom-e.bottom;E>=g||E>e.top?u=t.bottom-e.top:(c="bottom",u=e.bottom-t.top)}let y=(e.bottom-e.top)/s.offsetHeight,b=(e.right-e.left)/s.offsetWidth;return{style:`${c}: ${u/y}px; max-width: ${d/b}px`,class:"cm-completionInfo-"+(l?a?"left-narrow":"right-narrow":o?"left":"right")}}function sSe(r){let e=r.addToOptions.slice();return r.icons&&e.push({render(t){let n=document.createElement("div");return n.classList.add("cm-completionIcon"),t.type&&n.classList.add(...t.type.split(/\s+/g).map(i=>"cm-completionIcon-"+i)),n.setAttribute("aria-hidden","true"),n},position:20}),e.push({render(t,n,i,s){let a=document.createElement("span");a.className="cm-completionLabel";let o=t.displayLabel||t.label,l=0;for(let c=0;c<s.length;){let u=s[c++],d=s[c++];u>l&&a.appendChild(document.createTextNode(o.slice(l,u)));let h=a.appendChild(document.createElement("span"));h.appendChild(document.createTextNode(o.slice(u,d))),h.className="cm-completionMatchedText",l=d}return l<o.length&&a.appendChild(document.createTextNode(o.slice(l))),a},position:50},{render(t){if(!t.detail)return null;let n=document.createElement("span");return n.className="cm-completionDetail",n.textContent=t.detail,n},position:80}),e.sort((t,n)=>t.position-n.position).map(t=>t.render)}function M_(r,e,t){if(r<=t)return{from:0,to:r};if(e<0&&(e=0),e<=r>>1){let i=Math.floor(e/t);return{from:i*t,to:(i+1)*t}}let n=Math.floor((r-e)/t);return{from:r-(n+1)*t,to:r-n*t}}class aSe{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:l=>this.placeInfo(l),key:this},this.space=null,this.currentClass="";let i=e.state.field(t),{options:s,selected:a}=i.open,o=e.state.facet(kn);this.optionContent=sSe(o),this.optionClass=o.optionClass,this.tooltipClass=o.tooltipClass,this.range=M_(s.length,a,o.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",l=>{let{options:c}=e.state.field(t).open;for(let u=l.target,d;u&&u!=this.dom;u=u.parentNode)if(u.nodeName=="LI"&&(d=/-(\d+)$/.exec(u.id))&&+d[1]<c.length){this.applyCompletion(e,c[+d[1]]),l.preventDefault();return}}),this.dom.addEventListener("focusout",l=>{let c=e.state.field(this.stateField,!1);c&&c.tooltip&&e.state.facet(kn).closeOnBlur&&l.relatedTarget!=e.contentDOM&&e.dispatch({effects:w0.of(null)})}),this.showOptions(s,i.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var t;let n=e.state.field(this.stateField),i=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=i){let{options:s,selected:a,disabled:o}=n.open;(!i.open||i.open.options!=s)&&(this.range=M_(s.length,a,e.state.facet(kn).maxRenderedOptions),this.showOptions(s,n.id)),this.updateSel(),o!=((t=i.open)===null||t===void 0?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!o)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let n of this.currentClass.split(" "))n&&this.dom.classList.remove(n);for(let n of t.split(" "))n&&this.dom.classList.add(n);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=M_(t.options.length,t.selected,this.view.state.facet(kn).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:i}=n;if(!i)return;let s=typeof i=="string"?document.createTextNode(i):i(n);if(!s)return;"then"in s?s.then(a=>{a&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(a,n)}).catch(a=>Li(this.view.state,a,"completion info")):this.addInfoPane(s,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",e.nodeType!=null)n.appendChild(e),this.infoDestroy=null;else{let{dom:i,destroy:s}=e;n.appendChild(i),this.infoDestroy=s||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,i=this.range.from;n;n=n.nextSibling,i++)n.nodeName!="LI"||!n.id?i--:i==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected");return t&&lSe(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),i=e.getBoundingClientRect(),s=this.space;if(!s){let a=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:a.clientWidth,bottom:a.clientHeight}}return i.top>Math.min(s.bottom,t.bottom)-10||i.bottom<Math.max(s.top,t.top)+10?null:this.view.state.facet(kn).positionInfo(this.view,t,i,n,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const i=document.createElement("ul");i.id=t,i.setAttribute("role","listbox"),i.setAttribute("aria-expanded","true"),i.setAttribute("aria-label",this.view.state.phrase("Completions")),i.addEventListener("mousedown",a=>{a.target==i&&a.preventDefault()});let s=null;for(let a=n.from;a<n.to;a++){let{completion:o,match:l}=e[a],{section:c}=o;if(c){let h=typeof c=="string"?c:c.name;if(h!=s&&(a>n.from||n.from==0))if(s=h,typeof c!="string"&&c.header)i.appendChild(c.header(c));else{let f=i.appendChild(document.createElement("completion-section"));f.textContent=h}}const u=i.appendChild(document.createElement("li"));u.id=t+"-"+a,u.setAttribute("role","option");let d=this.optionClass(o);d&&(u.className=d);for(let h of this.optionContent){let f=h(o,this.view.state,this.view,l);f&&u.appendChild(f)}}return n.from&&i.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&i.classList.add("cm-completionListIncompleteBottom"),i}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function oSe(r,e){return t=>new aSe(t,r,e)}function lSe(r,e){let t=r.getBoundingClientRect(),n=e.getBoundingClientRect(),i=t.height/r.offsetHeight;n.top<t.top?r.scrollTop-=(t.top-n.top)/i:n.bottom>t.bottom&&(r.scrollTop+=(n.bottom-t.bottom)/i)}function G4(r){return(r.boost||0)*100+(r.apply?10:0)+(r.info?5:0)+(r.type?1:0)}function cSe(r,e){let t=[],n=null,i=c=>{t.push(c);let{section:u}=c.completion;if(u){n||(n=[]);let d=typeof u=="string"?u:u.name;n.some(h=>h.name==d)||n.push(typeof u=="string"?{name:d}:u)}},s=e.facet(kn);for(let c of r)if(c.hasResult()){let u=c.result.getMatch;if(c.result.filter===!1)for(let d of c.result.options)i(new W4(d,c.source,u?u(d):[],1e9-t.length));else{let d=e.sliceDoc(c.from,c.to),h,f=s.filterStrict?new nSe(d):new rSe(d);for(let m of c.result.options)if(h=f.match(m.label)){let g=m.displayLabel?u?u(m,h.matched):[]:h.matched;i(new W4(m,c.source,g,h.score+(m.boost||0)))}}}if(n){let c=Object.create(null),u=0,d=(h,f)=>{var m,g;return((m=h.rank)!==null&&m!==void 0?m:1e9)-((g=f.rank)!==null&&g!==void 0?g:1e9)||(h.name<f.name?-1:1)};for(let h of n.sort(d))u-=1e5,c[h.name]=u;for(let h of t){let{section:f}=h.completion;f&&(h.score+=c[typeof f=="string"?f:f.name])}}let a=[],o=null,l=s.compareCompletions;for(let c of t.sort((u,d)=>d.score-u.score||l(u.completion,d.completion))){let u=c.completion;!o||o.label!=u.label||o.detail!=u.detail||o.type!=null&&u.type!=null&&o.type!=u.type||o.apply!=u.apply||o.boost!=u.boost?a.push(c):G4(c.completion)>G4(o)&&(a[a.length-1]=c),o=c.completion}return a}class vf{constructor(e,t,n,i,s,a){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=i,this.selected=s,this.disabled=a}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new vf(this.options,q4(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,i,s,a){if(i&&!a&&e.some(c=>c.isPending))return i.setDisabled();let o=cSe(e,t);if(!o.length)return i&&e.some(c=>c.isPending)?i.setDisabled():null;let l=t.facet(kn).selectOnOpen?0:-1;if(i&&i.selected!=l&&i.selected!=-1){let c=i.options[i.selected].completion;for(let u=0;u<o.length;u++)if(o[u].completion==c){l=u;break}}return new vf(o,q4(n,l),{pos:e.reduce((c,u)=>u.hasResult()?Math.min(c,u.from):c,1e8),create:mSe,above:s.aboveCursor},i?i.timestamp:Date.now(),l,!1)}map(e){return new vf(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new vf(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Nx{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new Nx(fSe,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:t}=e,n=t.facet(kn),s=(n.override||t.languageDataAt("autocomplete",fd(t)).map(tSe)).map(l=>(this.active.find(u=>u.source==l)||new Rs(l,this.active.some(u=>u.state!=0)?1:0)).update(e,n));s.length==this.active.length&&s.every((l,c)=>l==this.active[c])&&(s=this.active);let a=this.open,o=e.effects.some(l=>l.is(tO));a&&e.docChanged&&(a=a.map(e.changes)),e.selection||s.some(l=>l.hasResult()&&e.changes.touchesRange(l.from,l.to))||!uSe(s,this.active)||o?a=vf.build(s,t,this.id,a,n,o):a&&a.disabled&&!s.some(l=>l.isPending)&&(a=null),!a&&s.every(l=>!l.isPending)&&s.some(l=>l.hasResult())&&(s=s.map(l=>l.hasResult()?new Rs(l.source,0):l));for(let l of e.effects)l.is(xK)&&(a=a&&a.setSelected(l.value,this.id));return s==this.active&&a==this.open?this:new Nx(s,this.id,a)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?dSe:hSe}}function uSe(r,e){if(r==e)return!0;for(let t=0,n=0;;){for(;t<r.length&&!r[t].hasResult();)t++;for(;n<e.length&&!e[n].hasResult();)n++;let i=t==r.length,s=n==e.length;if(i||s)return i==s;if(r[t++].result!=e[n++].result)return!1}}const dSe={"aria-autocomplete":"list"},hSe={};function q4(r,e){let t={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":r};return e>-1&&(t["aria-activedescendant"]=r+"-"+e),t}const fSe=[];function EK(r,e){if(r.isUserEvent("input.complete")){let n=r.annotation(bK);if(n&&e.activateOnCompletion(n))return 12}let t=r.isUserEvent("input.type");return t&&e.activateOnTyping?5:t?1:r.isUserEvent("delete.backward")?2:r.selection?8:r.docChanged?16:0}class Rs{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return this.state==1}update(e,t){let n=EK(e,t),i=this;(n&8||n&16&&this.touches(e))&&(i=new Rs(i.source,0)),n&4&&i.state==0&&(i=new Rs(this.source,1)),i=i.updateFor(e,n);for(let s of e.effects)if(s.is(Mx))i=new Rs(i.source,1,s.value);else if(s.is(w0))i=new Rs(i.source,0);else if(s.is(tO))for(let a of s.value)a.source==i.source&&(i=a);return i}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(fd(e.state))}}class Lf extends Rs{constructor(e,t,n,i,s,a){super(e,3,t),this.limit=n,this.result=i,this.from=s,this.to=a}hasResult(){return!0}updateFor(e,t){var n;if(!(t&3))return this.map(e.changes);let i=this.result;i.map&&!e.changes.empty&&(i=i.map(i,e.changes));let s=e.changes.mapPos(this.from),a=e.changes.mapPos(this.to,1),o=fd(e.state);if(o>a||!i||t&2&&(fd(e.startState)==this.from||o<this.limit))return new Rs(this.source,t&4?1:0);let l=e.changes.mapPos(this.limit);return pSe(i.validFor,e.state,s,a)?new Lf(this.source,this.explicit,l,i,s,a):i.update&&(i=i.update(i,s,a,new vK(e.state,o,!1)))?new Lf(this.source,this.explicit,l,i,i.from,(n=i.to)!==null&&n!==void 0?n:fd(e.state)):new Rs(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new Lf(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new Rs(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function pSe(r,e,t,n){if(!r)return!1;let i=e.sliceDoc(t,n);return typeof r=="function"?r(i,t,n,e):yK(r,!0).test(i)}const tO=pt.define({map(r,e){return r.map(t=>t.map(e))}}),xK=pt.define(),$i=On.define({create(){return Nx.start()},update(r,e){return r.update(e)},provide:r=>[qL.from(r,e=>e.tooltip),Pe.contentAttributes.from(r,e=>e.attrs)]});function rO(r,e){const t=e.completion.apply||e.completion.label;let n=r.state.field($i).active.find(i=>i.source==e.source);return n instanceof Lf?(typeof t=="string"?r.dispatch(Object.assign(Object.assign({},eSe(r.state,t,n.from,n.to)),{annotations:bK.of(e.completion)})):t(r,e.completion,n.from,n.to),!0):!1}const mSe=oSe($i,rO);function Tb(r,e="option"){return t=>{let n=t.state.field($i,!1);if(!n||!n.open||n.open.disabled||Date.now()-n.open.timestamp<t.state.facet(kn).interactionDelay)return!1;let i=1,s;e=="page"&&(s=cj(t,n.open.tooltip))&&(i=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:a}=n.open.options,o=n.open.selected>-1?n.open.selected+i*(r?1:-1):r?0:a-1;return o<0?o=e=="page"?0:a-1:o>=a&&(o=e=="page"?a-1:0),t.dispatch({effects:xK.of(o)}),!0}}const gSe=r=>{let e=r.state.field($i,!1);return r.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<r.state.facet(kn).interactionDelay?!1:rO(r,e.open.options[e.open.selected])},j4=r=>r.state.field($i,!1)?(r.dispatch({effects:Mx.of(!0)}),!0):!1,vSe=r=>{let e=r.state.field($i,!1);return!e||!e.active.some(t=>t.state!=0)?!1:(r.dispatch({effects:w0.of(null)}),!0)};class ySe{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const bSe=50,ESe=1e3,xSe=Wr.fromClass(class{constructor(r){this.view=r,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of r.state.field($i).active)e.isPending&&this.startQuery(e)}update(r){let e=r.state.field($i),t=r.state.facet(kn);if(!r.selectionSet&&!r.docChanged&&r.startState.field($i)==e)return;let n=r.transactions.some(s=>{let a=EK(s,t);return a&8||(s.selection||s.docChanged)&&!(a&3)});for(let s=0;s<this.running.length;s++){let a=this.running[s];if(n||a.context.abortOnDocChange&&r.docChanged||a.updates.length+r.transactions.length>bSe&&Date.now()-a.time>ESe){for(let o of a.context.abortListeners)try{o()}catch(l){Li(this.view.state,l)}a.context.abortListeners=null,this.running.splice(s--,1)}else a.updates.push(...r.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),r.transactions.some(s=>s.effects.some(a=>a.is(Mx)))&&(this.pendingStart=!0);let i=this.pendingStart?50:t.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(a=>a.active.source==s.source))?setTimeout(()=>this.startUpdate(),i):-1,this.composing!=0)for(let s of r.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:r}=this.view,e=r.field($i);for(let t of e.active)t.isPending&&!this.running.some(n=>n.active.source==t.source)&&this.startQuery(t);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(kn).updateSyncTime))}startQuery(r){let{state:e}=this.view,t=fd(e),n=new vK(e,t,r.explicit,this.view),i=new ySe(r,n);this.running.push(i),Promise.resolve(r.source(n)).then(s=>{i.context.aborted||(i.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:w0.of(null)}),Li(this.view.state,s)})}scheduleAccept(){this.running.every(r=>r.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(kn).updateSyncTime))}accept(){var r;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],t=this.view.state.facet(kn),n=this.view.state.field($i);for(let i=0;i<this.running.length;i++){let s=this.running[i];if(s.done===void 0)continue;if(this.running.splice(i--,1),s.done){let o=fd(s.updates.length?s.updates[0].startState:this.view.state),l=Math.min(o,s.done.from+(s.active.explicit?0:1)),c=new Lf(s.active.source,s.active.explicit,l,s.done,s.done.from,(r=s.done.to)!==null&&r!==void 0?r:o);for(let u of s.updates)c=c.update(u,t);if(c.hasResult()){e.push(c);continue}}let a=n.active.find(o=>o.source==s.active.source);if(a&&a.isPending)if(s.done==null){let o=new Rs(s.active.source,0);for(let l of s.updates)o=o.update(l,t);o.isPending||e.push(o)}else this.startQuery(a)}(e.length||n.open&&n.open.disabled)&&this.view.dispatch({effects:tO.of(e)})}},{eventHandlers:{blur(r){let e=this.view.state.field($i,!1);if(e&&e.tooltip&&this.view.state.facet(kn).closeOnBlur){let t=e.open&&cj(this.view,e.open.tooltip);(!t||!t.dom.contains(r.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:w0.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:Mx.of(!1)}),20),this.composing=0}}}),wSe=typeof navigator=="object"&&/Win/.test(navigator.platform),TSe=qd.highest(Pe.domEventHandlers({keydown(r,e){let t=e.state.field($i,!1);if(!t||!t.open||t.open.disabled||t.open.selected<0||r.key.length>1||r.ctrlKey&&!(wSe&&r.altKey)||r.metaKey)return!1;let n=t.open.options[t.open.selected],i=t.active.find(a=>a.source==n.source),s=n.completion.commitCharacters||i.result.commitCharacters;return s&&s.indexOf(r.key)>-1&&rO(e,n),!1}})),SSe=Pe.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),T0={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Ju=pt.define({map(r,e){let t=e.mapPos(r,-1,hi.TrackAfter);return t??void 0}}),nO=new class extends Id{};nO.startSide=1;nO.endSide=-1;const wK=On.define({create(){return Pt.empty},update(r,e){if(r=r.map(e.changes),e.selection){let t=e.state.doc.lineAt(e.selection.main.head);r=r.update({filter:n=>n>=t.from&&n<=t.to})}for(let t of e.effects)t.is(Ju)&&(r=r.update({add:[nO.range(t.value,t.value+1)]}));return r}});function ASe(){return[CSe,wK]}const N_="()[]{}<>«»»«［］｛｝";function TK(r){for(let e=0;e<N_.length;e+=2)if(N_.charCodeAt(e)==r)return N_.charAt(e+1);return IL(r<128?r:r+1)}function SK(r,e){return r.languageDataAt("closeBrackets",e)[0]||T0}const _Se=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),CSe=Pe.inputHandler.of((r,e,t,n)=>{if((_Se?r.composing:r.compositionStarted)||r.state.readOnly)return!1;let i=r.state.selection.main;if(n.length>2||n.length==2&&za(ki(n,0))==1||e!=i.from||t!=i.to)return!1;let s=ISe(r.state,n);return s?(r.dispatch(s),!0):!1}),RSe=({state:r,dispatch:e})=>{if(r.readOnly)return!1;let n=SK(r,r.selection.main.head).brackets||T0.brackets,i=null,s=r.changeByRange(a=>{if(a.empty){let o=$Se(r.doc,a.head);for(let l of n)if(l==o&&DT(r.doc,a.head)==TK(ki(l,0)))return{changes:{from:a.head-l.length,to:a.head+l.length},range:Ee.cursor(a.head-l.length)}}return{range:i=a}});return i||e(r.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!i},kSe=[{key:"Backspace",run:RSe}];function ISe(r,e){let t=SK(r,r.selection.main.head),n=t.brackets||T0.brackets;for(let i of n){let s=TK(ki(i,0));if(e==i)return s==i?OSe(r,i,n.indexOf(i+i+i)>-1,t):DSe(r,i,s,t.before||T0.before);if(e==s&&AK(r,r.selection.main.from))return LSe(r,i,s)}return null}function AK(r,e){let t=!1;return r.field(wK).between(0,r.doc.length,n=>{n==e&&(t=!0)}),t}function DT(r,e){let t=r.sliceString(e,e+2);return t.slice(0,za(ki(t,0)))}function $Se(r,e){let t=r.sliceString(e-2,e);return za(ki(t,0))==t.length?t:t.slice(1)}function DSe(r,e,t,n){let i=null,s=r.changeByRange(a=>{if(!a.empty)return{changes:[{insert:e,from:a.from},{insert:t,from:a.to}],effects:Ju.of(a.to+e.length),range:Ee.range(a.anchor+e.length,a.head+e.length)};let o=DT(r.doc,a.head);return!o||/\s/.test(o)||n.indexOf(o)>-1?{changes:{insert:e+t,from:a.head},effects:Ju.of(a.head+e.length),range:Ee.cursor(a.head+e.length)}:{range:i=a}});return i?null:r.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function LSe(r,e,t){let n=null,i=r.changeByRange(s=>s.empty&&DT(r.doc,s.head)==t?{changes:{from:s.head,to:s.head+t.length,insert:t},range:Ee.cursor(s.head+t.length)}:n={range:s});return n?null:r.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function OSe(r,e,t,n){let i=n.stringPrefixes||T0.stringPrefixes,s=null,a=r.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:e,from:o.to}],effects:Ju.of(o.to+e.length),range:Ee.range(o.anchor+e.length,o.head+e.length)};let l=o.head,c=DT(r.doc,l),u;if(c==e){if(K4(r,l))return{changes:{insert:e+e,from:l},effects:Ju.of(l+e.length),range:Ee.cursor(l+e.length)};if(AK(r,l)){let h=t&&r.sliceDoc(l,l+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:l,to:l+h.length,insert:h},range:Ee.cursor(l+h.length)}}}else{if(t&&r.sliceDoc(l-2*e.length,l)==e+e&&(u=z4(r,l-2*e.length,i))>-1&&K4(r,u))return{changes:{insert:e+e+e+e,from:l},effects:Ju.of(l+e.length),range:Ee.cursor(l+e.length)};if(r.charCategorizer(l)(c)!=_r.Word&&z4(r,l,i)>-1&&!PSe(r,l,e,i))return{changes:{insert:e+e,from:l},effects:Ju.of(l+e.length),range:Ee.cursor(l+e.length)}}return{range:s=o}});return s?null:r.update(a,{scrollIntoView:!0,userEvent:"input.type"})}function K4(r,e){let t=si(r).resolveInner(e+1);return t.parent&&t.from==e}function PSe(r,e,t,n){let i=si(r).resolveInner(e,-1),s=n.reduce((a,o)=>Math.max(a,o.length),0);for(let a=0;a<5;a++){let o=r.sliceDoc(i.from,Math.min(i.to,i.from+t.length+s)),l=o.indexOf(t);if(!l||l>-1&&n.indexOf(o.slice(0,l))>-1){let u=i.firstChild;for(;u&&u.from==i.from&&u.to-u.from>t.length+l;){if(r.sliceDoc(u.to-t.length,u.to)==t)return!1;u=u.firstChild}return!0}let c=i.to==e&&i.parent;if(!c)break;i=c}return!1}function z4(r,e,t){let n=r.charCategorizer(e);if(n(r.sliceDoc(e-1,e))!=_r.Word)return e;for(let i of t){let s=e-i.length;if(r.sliceDoc(s,e)==i&&n(r.sliceDoc(s-1,s))!=_r.Word)return s}return-1}function MSe(r={}){return[TSe,$i,kn.of(r),xSe,NSe,SSe]}const _K=[{key:"Ctrl-Space",run:j4},{mac:"Alt-`",run:j4},{key:"Escape",run:vSe},{key:"ArrowDown",run:Tb(!0)},{key:"ArrowUp",run:Tb(!1)},{key:"PageDown",run:Tb(!0,"page")},{key:"PageUp",run:Tb(!1,"page")},{key:"Enter",run:gSe}],NSe=qd.highest(TT.computeN([kn],r=>r.facet(kn).defaultKeymap?[_K]:[]));class Y4{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class zu{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let i=e,s=n.facet(S0).markerFilter;s&&(i=s(i,n));let a=e.slice().sort((d,h)=>d.from-h.from||d.to-h.to),o=new yl,l=[],c=0;for(let d=0;;){let h=d==a.length?null:a[d];if(!h&&!l.length)break;let f,m;for(l.length?(f=c,m=l.reduce((y,b)=>Math.min(y,b.to),h&&h.from>f?h.from:1e8)):(f=h.from,m=h.to,l.push(h),d++);d<a.length;){let y=a[d];if(y.from==f&&(y.to>y.from||y.to==f))l.push(y),d++,m=Math.min(y.to,m);else{m=Math.min(y.from,m);break}}let g=QSe(l);if(l.some(y=>y.from==y.to||y.from==y.to-1&&n.doc.lineAt(y.from).to==y.from))o.add(f,f,Ye.widget({widget:new jSe(g),diagnostics:l.slice()}));else{let y=l.reduce((b,E)=>E.markClass?b+" "+E.markClass:b,"");o.add(f,m,Ye.mark({class:"cm-lintRange cm-lintRange-"+g+y,diagnostics:l.slice(),inclusiveEnd:l.some(b=>b.to>m)}))}c=m;for(let y=0;y<l.length;y++)l[y].to<=c&&l.splice(y--,1)}let u=o.finish();return new zu(u,t,cp(u))}}function cp(r,e=null,t=0){let n=null;return r.between(t,1e9,(i,s,{spec:a})=>{if(!(e&&a.diagnostics.indexOf(e)<0))if(!n)n=new Y4(i,s,e||a.diagnostics[0]);else{if(a.diagnostics.indexOf(n.diagnostic)<0)return!1;n=new Y4(n.from,s,n.diagnostic)}}),n}function FSe(r,e){let t=e.pos,n=e.end||t,i=r.state.facet(S0).hideOn(r,t,n);if(i!=null)return i;let s=r.startState.doc.lineAt(e.pos);return!!(r.effects.some(a=>a.is(CK))||r.changes.touchesRange(s.from,Math.max(s.to,n)))}function BSe(r,e){return r.field(ts,!1)?e:e.concat(pt.appendConfig.of(XSe))}const CK=pt.define(),iO=pt.define(),RK=pt.define(),ts=On.define({create(){return new zu(Ye.none,null,null)},update(r,e){if(e.docChanged&&r.diagnostics.size){let t=r.diagnostics.map(e.changes),n=null,i=r.panel;if(r.selected){let s=e.changes.mapPos(r.selected.from,1);n=cp(t,r.selected.diagnostic,s)||cp(t,null,s)}!t.size&&i&&e.state.facet(S0).autoPanel&&(i=null),r=new zu(t,i,n)}for(let t of e.effects)if(t.is(CK)){let n=e.state.facet(S0).autoPanel?t.value.length?A0.open:null:r.panel;r=zu.init(t.value,n,e.state)}else t.is(iO)?r=new zu(r.diagnostics,t.value?A0.open:null,r.selected):t.is(RK)&&(r=new zu(r.diagnostics,r.panel,t.value));return r},provide:r=>[b0.from(r,e=>e.panel),Pe.decorations.from(r,e=>e.diagnostics)]}),USe=Ye.mark({class:"cm-lintRange cm-lintRange-active"});function WSe(r,e,t){let{diagnostics:n}=r.state.field(ts),i,s=-1,a=-1;n.between(e-(t<0?1:0),e+(t>0?1:0),(l,c,{spec:u})=>{if(e>=l&&e<=c&&(l==c||(e>l||t>0)&&(e<c||t<0)))return i=u.diagnostics,s=l,a=c,!1});let o=r.state.facet(S0).tooltipFilter;return i&&o&&(i=o(i,r.state)),i?{pos:s,end:a,above:r.state.doc.lineAt(s).to<a,create(){return{dom:HSe(r,i)}}}:null}function HSe(r,e){return er("ul",{class:"cm-tooltip-lint"},e.map(t=>IK(r,t,!1)))}const VSe=r=>{let e=r.state.field(ts,!1);(!e||!e.panel)&&r.dispatch({effects:BSe(r.state,[iO.of(!0)])});let t=y0(r,A0.open);return t&&t.dom.querySelector(".cm-panel-lint ul").focus(),!0},Q4=r=>{let e=r.state.field(ts,!1);return!e||!e.panel?!1:(r.dispatch({effects:iO.of(!1)}),!0)},GSe=r=>{let e=r.state.field(ts,!1);if(!e)return!1;let t=r.state.selection.main,n=e.diagnostics.iter(t.to+1);return!n.value&&(n=e.diagnostics.iter(0),!n.value||n.from==t.from&&n.to==t.to)?!1:(r.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),!0)},qSe=[{key:"Mod-Shift-m",run:VSe,preventDefault:!0},{key:"F8",run:GSe}],S0=Be.define({combine(r){return Object.assign({sources:r.map(e=>e.source).filter(e=>e!=null)},Ao(r.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function kK(r){let e=[];if(r)e:for(let{name:t}of r){for(let n=0;n<t.length;n++){let i=t[n];if(/[a-zA-Z]/.test(i)&&!e.some(s=>s.toLowerCase()==i.toLowerCase())){e.push(i);continue e}}e.push("")}return e}function IK(r,e,t){var n;let i=t?kK(e.actions):[];return er("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},er("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(r):e.message),(n=e.actions)===null||n===void 0?void 0:n.map((s,a)=>{let o=!1,l=h=>{if(h.preventDefault(),o)return;o=!0;let f=cp(r.state.field(ts).diagnostics,e);f&&s.apply(r,f.from,f.to)},{name:c}=s,u=i[a]?c.indexOf(i[a]):-1,d=u<0?c:[c.slice(0,u),er("u",c.slice(u,u+1)),c.slice(u+1)];return er("button",{type:"button",class:"cm-diagnosticAction",onclick:l,onmousedown:l,"aria-label":` Action: ${c}${u<0?"":` (access key "${i[a]})"`}.`},d)}),e.source&&er("div",{class:"cm-diagnosticSource"},e.source))}class jSe extends Al{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return er("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class X4{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=IK(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class A0{constructor(e){this.view=e,this.items=[];let t=i=>{if(i.keyCode==27)Q4(this.view),this.view.focus();else if(i.keyCode==38||i.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(i.keyCode==40||i.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(i.keyCode==36)this.moveSelection(0);else if(i.keyCode==35)this.moveSelection(this.items.length-1);else if(i.keyCode==13)this.view.focus();else if(i.keyCode>=65&&i.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],a=kK(s.actions);for(let o=0;o<a.length;o++)if(a[o].toUpperCase().charCodeAt(0)==i.keyCode){let l=cp(this.view.state.field(ts).diagnostics,s);l&&s.actions[o].apply(e,l.from,l.to)}}else return;i.preventDefault()},n=i=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(i.target)&&this.moveSelection(s)};this.list=er("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=er("div",{class:"cm-panel-lint"},this.list,er("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Q4(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(ts).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(ts),n=0,i=!1,s=null,a=new Set;for(e.between(0,this.view.state.doc.length,(o,l,{spec:c})=>{for(let u of c.diagnostics){if(a.has(u))continue;a.add(u);let d=-1,h;for(let f=n;f<this.items.length;f++)if(this.items[f].diagnostic==u){d=f;break}d<0?(h=new X4(this.view,u),this.items.splice(n,0,h),i=!0):(h=this.items[d],d>n&&(this.items.splice(n,d-n),i=!0)),t&&h.diagnostic==t.diagnostic?h.dom.hasAttribute("aria-selected")||(h.dom.setAttribute("aria-selected","true"),s=h):h.dom.hasAttribute("aria-selected")&&h.dom.removeAttribute("aria-selected"),n++}});n<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();this.items.length==0&&(this.items.push(new X4(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:o,panel:l})=>{let c=l.height/this.list.offsetHeight;o.top<l.top?this.list.scrollTop-=(l.top-o.top)/c:o.bottom>l.bottom&&(this.list.scrollTop+=(o.bottom-l.bottom)/c)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let n=e;e=n.nextSibling,n.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){for(;e!=n.dom;)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(ts),n=cp(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:RK.of(n)})}static open(e){return new A0(e)}}function KSe(r,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(r)}</svg>')`}function Sb(r){return KSe(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${r}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const zSe=Pe.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Sb("#d11")},".cm-lintRange-warning":{backgroundImage:Sb("orange")},".cm-lintRange-info":{backgroundImage:Sb("#999")},".cm-lintRange-hint":{backgroundImage:Sb("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function YSe(r){return r=="error"?4:r=="warning"?3:r=="info"?2:1}function QSe(r){let e="hint",t=1;for(let n of r){let i=YSe(n.severity);i>t&&(t=i,e=n.severity)}return e}const XSe=[ts,Pe.decorations.compute([ts],r=>{let{selected:e,panel:t}=r.field(ts);return!e||!t||e.from==e.to?Ye.none:Ye.set([USe.range(e.from,e.to)])}),txe(WSe,{hideOn:FSe}),zSe];var Z4=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,n=[];e.closeBracketsKeymap!==!1&&(n=n.concat(kSe)),e.defaultKeymap!==!1&&(n=n.concat(wTe)),e.searchKeymap!==!1&&(n=n.concat(zTe)),e.historyKeymap!==!1&&(n=n.concat($we)),e.foldKeymap!==!1&&(n=n.concat(Uxe)),e.completionKeymap!==!1&&(n=n.concat(_K)),e.lintKeymap!==!1&&(n=n.concat(qSe));var i=[];return e.lineNumbers!==!1&&i.push(hxe()),e.highlightActiveLineGutter!==!1&&i.push(mxe()),e.highlightSpecialChars!==!1&&i.push(IEe()),e.history!==!1&&i.push(wwe()),e.foldGutter!==!1&&i.push(Gxe()),e.drawSelection!==!1&&i.push(bEe()),e.dropCursor!==!1&&i.push(SEe()),e.allowMultipleSelections!==!1&&i.push($t.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&i.push(Ixe()),e.syntaxHighlighting!==!1&&i.push(Aj(zxe,{fallback:!0})),e.bracketMatching!==!1&&i.push(twe()),e.closeBrackets!==!1&&i.push(ASe()),e.autocompletion!==!1&&i.push(MSe()),e.rectangularSelection!==!1&&i.push(GEe()),t!==!1&&i.push(KEe()),e.highlightActiveLine!==!1&&i.push(MEe()),e.highlightSelectionMatches!==!1&&i.push(kTe()),e.tabSize&&typeof e.tabSize=="number"&&i.push(AT.of(" ".repeat(e.tabSize))),i.concat([TT.of(n.flat())]).filter(Boolean)};const ZSe="#e5c07b",J4="#e06c75",JSe="#56b6c2",eAe="#ffffff",$1="#abb2bf",yI="#7d8799",tAe="#61afef",rAe="#98c379",e8="#d19a66",nAe="#c678dd",iAe="#21252b",t8="#2c313a",r8="#282c34",F_="#353a42",sAe="#3E4451",n8="#528bff",aAe=Pe.theme({"&":{color:$1,backgroundColor:r8},".cm-content":{caretColor:n8},".cm-cursor, .cm-dropCursor":{borderLeftColor:n8},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:sAe},".cm-panels":{backgroundColor:iAe,color:$1},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:r8,color:yI,border:"none"},".cm-activeLineGutter":{backgroundColor:t8},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:F_},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:F_,borderBottomColor:F_},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:t8,color:$1}}},{dark:!0}),oAe=Cv.define([{tag:fe.keyword,color:nAe},{tag:[fe.name,fe.deleted,fe.character,fe.propertyName,fe.macroName],color:J4},{tag:[fe.function(fe.variableName),fe.labelName],color:tAe},{tag:[fe.color,fe.constant(fe.name),fe.standard(fe.name)],color:e8},{tag:[fe.definition(fe.name),fe.separator],color:$1},{tag:[fe.typeName,fe.className,fe.number,fe.changed,fe.annotation,fe.modifier,fe.self,fe.namespace],color:ZSe},{tag:[fe.operator,fe.operatorKeyword,fe.url,fe.escape,fe.regexp,fe.link,fe.special(fe.string)],color:JSe},{tag:[fe.meta,fe.comment],color:yI},{tag:fe.strong,fontWeight:"bold"},{tag:fe.emphasis,fontStyle:"italic"},{tag:fe.strikethrough,textDecoration:"line-through"},{tag:fe.link,color:yI,textDecoration:"underline"},{tag:fe.heading,fontWeight:"bold",color:J4},{tag:[fe.atom,fe.bool,fe.special(fe.variableName)],color:e8},{tag:[fe.processingInstruction,fe.string,fe.inserted],color:rAe},{tag:fe.invalid,color:eAe}]),lAe=[aAe,Aj(oAe)];var cAe=Pe.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),uAe=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:n=!0,readOnly:i=!1,theme:s="light",placeholder:a="",basicSetup:o=!0}=e,l=[];switch(t&&l.unshift(TT.of([TTe])),o&&(typeof o=="boolean"?l.unshift(Z4()):l.unshift(Z4(o))),a&&l.unshift(UEe(a)),s){case"light":l.push(cAe);break;case"dark":l.push(lAe);break;case"none":break;default:l.push(s);break}return n===!1&&l.push(Pe.editable.of(!1)),i&&l.push($t.readOnly.of(!0)),[...l]},dAe=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(e=>r.state.sliceDoc(e.from,e.to)),selectedText:r.state.selection.ranges.some(e=>!e.empty)}),i8=So.define(),hAe=[];function $K(r){var{value:e,selection:t,onChange:n,onStatistics:i,onCreateEditor:s,onUpdate:a,extensions:o=hAe,autoFocus:l,theme:c="light",height:u=null,minHeight:d=null,maxHeight:h=null,width:f=null,minWidth:m=null,maxWidth:g=null,placeholder:y="",editable:b=!0,readOnly:E=!1,indentWithTab:w=!0,basicSetup:A=!0,root:S,initialState:_}=r,[C,k]=x.useState(),[D,I]=x.useState(),[L,M]=x.useState(),F=Pe.theme({"&":{height:u,minHeight:d,maxHeight:h,width:f,minWidth:m,maxWidth:g},"& .cm-scroller":{height:"100% !important"}}),U=Pe.updateListener.of(z=>{if(z.docChanged&&typeof n=="function"&&!z.transactions.some(Y=>Y.annotation(i8))){var Q=z.state.doc,V=Q.toString();n(V,z)}i&&i(dAe(z))}),W=uAe({theme:c,editable:b,readOnly:E,placeholder:y,indentWithTab:w,basicSetup:A}),j=[U,F,...W];return a&&typeof a=="function"&&j.push(Pe.updateListener.of(a)),j=j.concat(o),x.useEffect(()=>{if(C&&!L){var z={doc:e,selection:t,extensions:j},Q=_?$t.fromJSON(_.json,z,_.fields):$t.create(z);if(M(Q),!D){var V=new Pe({state:Q,parent:C,root:S});I(V),s&&s(V,Q)}}return()=>{D&&(M(void 0),I(void 0))}},[C,L]),x.useEffect(()=>k(r.container),[r.container]),x.useEffect(()=>()=>{D&&(D.destroy(),I(void 0))},[D]),x.useEffect(()=>{l&&D&&D.focus()},[l,D]),x.useEffect(()=>{D&&D.dispatch({effects:pt.reconfigure.of(j)})},[c,o,u,d,h,f,m,g,y,b,E,w,A,n,a]),x.useEffect(()=>{if(e!==void 0){var z=D?D.state.doc.toString():"";D&&e!==z&&D.dispatch({changes:{from:0,to:z.length,insert:e||""},annotations:[i8.of(!0)]})}},[e,D]),{state:L,setState:M,view:D,setView:I,container:C,setContainer:k}}var fAe=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],pAe=x.forwardRef((r,e)=>{var{className:t,value:n="",selection:i,extensions:s=[],onChange:a,onStatistics:o,onCreateEditor:l,onUpdate:c,autoFocus:u,theme:d="light",height:h,minHeight:f,maxHeight:m,width:g,minWidth:y,maxWidth:b,basicSetup:E,placeholder:w,indentWithTab:A,editable:S,readOnly:_,root:C,initialState:k}=r,D=hwe(r,fAe),I=x.useRef(null),{state:L,view:M,container:F}=$K({container:I.current,root:C,value:n,autoFocus:u,theme:d,height:h,minHeight:f,maxHeight:m,width:g,minWidth:y,maxWidth:b,basicSetup:E,placeholder:w,indentWithTab:A,editable:S,readOnly:_,selection:i,onChange:a,onStatistics:o,onCreateEditor:l,onUpdate:c,extensions:s,initialState:k});if(x.useImperativeHandle(e,()=>({editor:I.current,state:L,view:M}),[I,F,L,M]),typeof n!="string")throw new Error("value must be typeof string but got "+typeof n);var U=typeof d=="string"?"cm-theme-"+d:"cm-theme";return $.jsx("div",le({ref:I,className:""+U+(t?" "+t:"")},D))});pAe.displayName="CodeMirror";let B_=new Map,bI=!1;try{bI=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let Fx=!1;try{Fx=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const DK={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class LK{format(e){let t="";if(!bI&&this.options.signDisplay!=null?t=gAe(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!Fx){var n;let{unit:i,unitDisplay:s="short",locale:a}=this.resolvedOptions();if(!i)return t;let o=(n=DK[i])===null||n===void 0?void 0:n[s];t+=o[a]||o.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)} – ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let n=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(t);return[...n.map(s=>({...s,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(s=>({...s,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!bI&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!Fx&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=mAe(e,t),this.options=t}}function mAe(r,e={}){let{numberingSystem:t}=e;if(t&&r.includes("-nu-")&&(r.includes("-u-")||(r+="-u-"),r+=`-nu-${t}`),e.style==="unit"&&!Fx){var n;let{unit:a,unitDisplay:o="short"}=e;if(!a)throw new Error('unit option must be provided with style: "unit"');if(!(!((n=DK[a])===null||n===void 0)&&n[o]))throw new Error(`Unsupported unit ${a} with unitDisplay = ${o}`);e={...e,style:"decimal"}}let i=r+(e?Object.entries(e).sort((a,o)=>a[0]<o[0]?-1:1).join():"");if(B_.has(i))return B_.get(i);let s=new Intl.NumberFormat(r,e);return B_.set(i,s),s}function gAe(r,e,t){if(e==="auto")return r.format(t);if(e==="never")return r.format(Math.abs(t));{let n=!1;if(e==="always"?n=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):n=t>0),n){let i=r.format(-t),s=r.format(t),a=i.replace(s,"").replace(/\u200e|\u061C/,"");return[...a].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(s,"!!!").replace(a,"+").replace("!!!",s)}else return r.format(t)}}const vAe=new RegExp("^.*\\(.*\\).*$"),yAe=["latn","arab","hanidec"];class OK{parse(e){return U_(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,t,n){return U_(this.locale,this.options,e).isValidPartialNumber(e,t,n)}getNumberingSystem(e){return U_(this.locale,this.options,e).options.numberingSystem}constructor(e,t={}){this.locale=e,this.options=t}}const s8=new Map;function U_(r,e,t){let n=a8(r,e);if(!r.includes("-nu-")&&!n.isValidPartialNumber(t)){for(let i of yAe)if(i!==n.options.numberingSystem){let s=a8(r+(r.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(s.isValidPartialNumber(t))return s}}return n}function a8(r,e){let t=r+(e?Object.entries(e).sort((i,s)=>i[0]<s[0]?-1:1).join():""),n=s8.get(t);return n||(n=new bAe(r,e),s8.set(t,n)),n}class bAe{parse(e){let t=this.sanitize(e);if(this.symbols.group&&(t=Ab(t,this.symbols.group,"")),this.symbols.decimal&&(t=t.replace(this.symbols.decimal,".")),this.symbols.minusSign&&(t=t.replace(this.symbols.minusSign,"-")),t=t.replace(this.symbols.numeral,this.symbols.index),this.options.style==="percent"){let a=t.indexOf("-");t=t.replace("-","");let o=t.indexOf(".");o===-1&&(o=t.length),t=t.replace(".",""),o-2===0?t=`0.${t}`:o-2===-1?t=`0.0${t}`:o-2===-2?t="0.00":t=`${t.slice(0,o-2)}.${t.slice(o-2)}`,a>-1&&(t=`-${t}`)}let n=t?+t:NaN;if(isNaN(n))return NaN;if(this.options.style==="percent"){var i,s;let a={...this.options,style:"decimal",minimumFractionDigits:Math.min(((i=this.options.minimumFractionDigits)!==null&&i!==void 0?i:0)+2,20),maximumFractionDigits:Math.min(((s=this.options.maximumFractionDigits)!==null&&s!==void 0?s:0)+2,20)};return new OK(this.locale,a).parse(new LK(this.locale,a).format(n))}return this.options.currencySign==="accounting"&&vAe.test(e)&&(n=-1*n),n}sanitize(e){return e=e.replace(this.symbols.literals,""),this.symbols.minusSign&&(e=e.replace("-",this.symbols.minusSign)),this.options.numberingSystem==="arab"&&(this.symbols.decimal&&(e=e.replace(",",this.symbols.decimal),e=e.replace("،",this.symbols.decimal)),this.symbols.group&&(e=Ab(e,".",this.symbols.group))),this.options.locale==="fr-FR"&&(e=Ab(e,"."," ")),e}isValidPartialNumber(e,t=-1/0,n=1/0){return e=this.sanitize(e),this.symbols.minusSign&&e.startsWith(this.symbols.minusSign)&&t<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&n>0&&(e=e.slice(this.symbols.plusSign.length)),this.symbols.group&&e.startsWith(this.symbols.group)||this.symbols.decimal&&e.indexOf(this.symbols.decimal)>-1&&this.options.maximumFractionDigits===0?!1:(this.symbols.group&&(e=Ab(e,this.symbols.group,"")),e=e.replace(this.symbols.numeral,""),this.symbols.decimal&&(e=e.replace(this.symbols.decimal,"")),e.length===0)}constructor(e,t={}){this.locale=e,this.formatter=new Intl.NumberFormat(e,t),this.options=this.formatter.resolvedOptions(),this.symbols=xAe(e,this.formatter,this.options,t);var n,i;this.options.style==="percent"&&(((n=this.options.minimumFractionDigits)!==null&&n!==void 0?n:0)>18||((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)>18)&&console.warn("NumberParser cannot handle percentages with greater than 18 decimal places, please reduce the number in your options.")}}const o8=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]),EAe=[0,4,2,1,11,20,3,7,100,21,.1,1.1];function xAe(r,e,t,n){var i,s,a,o;let l=new Intl.NumberFormat(r,{...t,minimumSignificantDigits:1,maximumSignificantDigits:21}),c=l.formatToParts(-10000.111),u=l.formatToParts(10000.111),d=EAe.map(I=>l.formatToParts(I));var h;let f=(h=(i=c.find(I=>I.type==="minusSign"))===null||i===void 0?void 0:i.value)!==null&&h!==void 0?h:"-",m=(s=u.find(I=>I.type==="plusSign"))===null||s===void 0?void 0:s.value;!m&&(n?.signDisplay==="exceptZero"||n?.signDisplay==="always")&&(m="+");let y=(a=new Intl.NumberFormat(r,{...t,minimumFractionDigits:2,maximumFractionDigits:2}).formatToParts(.001).find(I=>I.type==="decimal"))===null||a===void 0?void 0:a.value,b=(o=c.find(I=>I.type==="group"))===null||o===void 0?void 0:o.value,E=c.filter(I=>!o8.has(I.type)).map(I=>l8(I.value)),w=d.flatMap(I=>I.filter(L=>!o8.has(L.type)).map(L=>l8(L.value))),A=[...new Set([...E,...w])].sort((I,L)=>L.length-I.length),S=A.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${A.join("|")}|[\\p{White_Space}]`,"gu"),_=[...new Intl.NumberFormat(t.locale,{useGrouping:!1}).format(9876543210)].reverse(),C=new Map(_.map((I,L)=>[I,L])),k=new RegExp(`[${_.join("")}]`,"g");return{minusSign:f,plusSign:m,decimal:y,group:b,literals:S,numeral:k,index:I=>String(C.get(I))}}function Ab(r,e,t){return r.replaceAll?r.replaceAll(e,t):r.split(e).join(t)}function l8(r){return r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var PK=mv(),W_=function(){},LT=x.forwardRef(function(r,e){var t=x.useRef(null),n=x.useState({onScrollCapture:W_,onWheelCapture:W_,onTouchMoveCapture:W_}),i=n[0],s=n[1],a=r.forwardProps,o=r.children,l=r.className,c=r.removeScrollBar,u=r.enabled,d=r.shards,h=r.sideCar,f=r.noIsolation,m=r.inert,g=r.allowPinchZoom,y=r.as,b=y===void 0?"div":y,E=Os(r,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),w=h,A=pv([t,e]),S=Et(Et({},E),i);return x.createElement(x.Fragment,null,u&&x.createElement(w,{sideCar:PK,removeScrollBar:c,shards:d,noIsolation:f,inert:m,setCallbacks:s,allowPinchZoom:!!g,lockRef:t}),a?x.cloneElement(x.Children.only(o),Et(Et({},S),{ref:A})):x.createElement(b,Et({},S,{className:l,ref:A}),o))});LT.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};LT.classNames={fullWidth:Sc,zeroRight:Tc};var EI=!1;if(typeof window<"u")try{var _b=Object.defineProperty({},"passive",{get:function(){return EI=!0,!0}});window.addEventListener("test",_b,_b),window.removeEventListener("test",_b,_b)}catch{EI=!1}var _h=EI?{passive:!1}:!1,wAe=function(r){return r.tagName==="TEXTAREA"},MK=function(r,e){var t=window.getComputedStyle(r);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!wAe(r)&&t[e]==="visible")},TAe=function(r){return MK(r,"overflowY")},SAe=function(r){return MK(r,"overflowX")},c8=function(r,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var n=NK(r,t);if(n){var i=FK(r,t),s=i[1],a=i[2];if(s>a)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},AAe=function(r){var e=r.scrollTop,t=r.scrollHeight,n=r.clientHeight;return[e,t,n]},_Ae=function(r){var e=r.scrollLeft,t=r.scrollWidth,n=r.clientWidth;return[e,t,n]},NK=function(r,e){return r==="v"?TAe(e):SAe(e)},FK=function(r,e){return r==="v"?AAe(e):_Ae(e)},CAe=function(r,e){return r==="h"&&e==="rtl"?-1:1},RAe=function(r,e,t,n,i){var s=CAe(r,window.getComputedStyle(e).direction),a=s*n,o=t.target,l=e.contains(o),c=!1,u=a>0,d=0,h=0;do{var f=FK(r,o),m=f[0],g=f[1],y=f[2],b=g-y-s*m;(m||b)&&NK(r,o)&&(d+=b,h+=m),o=o.parentNode}while(!l&&o!==document.body||l&&(e.contains(o)||e===o));return(u&&d===0||!u&&h===0)&&(c=!0),c},Cb=function(r){return"changedTouches"in r?[r.changedTouches[0].clientX,r.changedTouches[0].clientY]:[0,0]},u8=function(r){return[r.deltaX,r.deltaY]},d8=function(r){return r&&"current"in r?r.current:r},kAe=function(r,e){return r[0]===e[0]&&r[1]===e[1]},IAe=function(r){return`
  .block-interactivity-`.concat(r,` {pointer-events: none;}
  .allow-interactivity-`).concat(r,` {pointer-events: all;}
`)},$Ae=0,Ch=[];function DAe(r){var e=x.useRef([]),t=x.useRef([0,0]),n=x.useRef(),i=x.useState($Ae++)[0],s=x.useState(function(){return $p()})[0],a=x.useRef(r);x.useEffect(function(){a.current=r},[r]),x.useEffect(function(){if(r.inert){document.body.classList.add("block-interactivity-".concat(i));var g=fv([r.lockRef.current],(r.shards||[]).map(d8),!0).filter(Boolean);return g.forEach(function(y){return y.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),g.forEach(function(y){return y.classList.remove("allow-interactivity-".concat(i))})}}},[r.inert,r.lockRef.current,r.shards]);var o=x.useCallback(function(g,y){if("touches"in g&&g.touches.length===2)return!a.current.allowPinchZoom;var b=Cb(g),E=t.current,w="deltaX"in g?g.deltaX:E[0]-b[0],A="deltaY"in g?g.deltaY:E[1]-b[1],S,_=g.target,C=Math.abs(w)>Math.abs(A)?"h":"v";if("touches"in g&&C==="h"&&_.type==="range")return!1;var k=c8(C,_);if(!k)return!0;if(k?S=C:(S=C==="v"?"h":"v",k=c8(C,_)),!k)return!1;if(!n.current&&"changedTouches"in g&&(w||A)&&(n.current=S),!S)return!0;var D=n.current||S;return RAe(D,y,g,D==="h"?w:A)},[]),l=x.useCallback(function(g){var y=g;if(!(!Ch.length||Ch[Ch.length-1]!==s)){var b="deltaY"in y?u8(y):Cb(y),E=e.current.filter(function(S){return S.name===y.type&&S.target===y.target&&kAe(S.delta,b)})[0];if(E&&E.should){y.cancelable&&y.preventDefault();return}if(!E){var w=(a.current.shards||[]).map(d8).filter(Boolean).filter(function(S){return S.contains(y.target)}),A=w.length>0?o(y,w[0]):!a.current.noIsolation;A&&y.cancelable&&y.preventDefault()}}},[]),c=x.useCallback(function(g,y,b,E){var w={name:g,delta:y,target:b,should:E};e.current.push(w),setTimeout(function(){e.current=e.current.filter(function(A){return A!==w})},1)},[]),u=x.useCallback(function(g){t.current=Cb(g),n.current=void 0},[]),d=x.useCallback(function(g){c(g.type,u8(g),g.target,o(g,r.lockRef.current))},[]),h=x.useCallback(function(g){c(g.type,Cb(g),g.target,o(g,r.lockRef.current))},[]);x.useEffect(function(){return Ch.push(s),r.setCallbacks({onScrollCapture:d,onWheelCapture:d,onTouchMoveCapture:h}),document.addEventListener("wheel",l,_h),document.addEventListener("touchmove",l,_h),document.addEventListener("touchstart",u,_h),function(){Ch=Ch.filter(function(g){return g!==s}),document.removeEventListener("wheel",l,_h),document.removeEventListener("touchmove",l,_h),document.removeEventListener("touchstart",u,_h)}},[]);var f=r.removeScrollBar,m=r.inert;return x.createElement(x.Fragment,null,m?x.createElement(s,{styles:IAe(i)}):null,f?x.createElement(vv,{gapMode:"margin"}):null)}const LAe=gv(PK,DAe);var BK=x.forwardRef(function(r,e){return x.createElement(LT,Et({},r,{ref:e,sideCar:LAe}))});BK.classNames=LT.classNames;const UK="Popover",[WK,hdt]=Hr(UK,[jc]),HK=jc(),[fdt,Np]=WK(UK),OAe="PopoverTrigger",PAe=x.forwardRef((r,e)=>{const{__scopePopover:t,...n}=r,i=Np(OAe,t),s=HK(t),a=it(e,i.triggerRef),o=x.createElement(Ge.button,le({type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":qK(i.open)},n,{ref:a,onClick:_e(r.onClick,i.onOpenToggle)}));return i.hasCustomAnchor?o:x.createElement(cv,le({asChild:!0},s),o)}),VK="PopoverPortal",[MAe,NAe]=WK(VK,{forceMount:void 0}),FAe=r=>{const{__scopePopover:e,forceMount:t,children:n,container:i}=r,s=Np(VK,e);return x.createElement(MAe,{scope:e,forceMount:t},x.createElement(mn,{present:t||s.open},x.createElement(Rp,{asChild:!0,container:i},n)))},_0="PopoverContent",BAe=x.forwardRef((r,e)=>{const t=NAe(_0,r.__scopePopover),{forceMount:n=t.forceMount,...i}=r,s=Np(_0,r.__scopePopover);return x.createElement(mn,{present:n||s.open},s.modal?x.createElement(UAe,le({},i,{ref:e})):x.createElement(WAe,le({},i,{ref:e})))}),UAe=x.forwardRef((r,e)=>{const t=Np(_0,r.__scopePopover),n=x.useRef(null),i=it(e,n),s=x.useRef(!1);return x.useEffect(()=>{const a=n.current;if(a)return hv(a)},[]),x.createElement(BK,{as:fo,allowPinchZoom:!0},x.createElement(GK,le({},r,{ref:i,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:_e(r.onCloseAutoFocus,a=>{var o;a.preventDefault(),s.current||(o=t.triggerRef.current)===null||o===void 0||o.focus()}),onPointerDownOutside:_e(r.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0,c=o.button===2||l;s.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:_e(r.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})))}),WAe=x.forwardRef((r,e)=>{const t=Np(_0,r.__scopePopover),n=x.useRef(!1),i=x.useRef(!1);return x.createElement(GK,le({},r,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var a;if((a=r.onCloseAutoFocus)===null||a===void 0||a.call(r,s),!s.defaultPrevented){var o;n.current||(o=t.triggerRef.current)===null||o===void 0||o.focus(),s.preventDefault()}n.current=!1,i.current=!1},onInteractOutside:s=>{var a,o;(a=r.onInteractOutside)===null||a===void 0||a.call(r,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const l=s.target;((o=t.triggerRef.current)===null||o===void 0?void 0:o.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&i.current&&s.preventDefault()}}))}),GK=x.forwardRef((r,e)=>{const{__scopePopover:t,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:s,disableOutsidePointerEvents:a,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onInteractOutside:u,...d}=r,h=Np(_0,t),f=HK(t);return kp(),x.createElement(Ip,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:s},x.createElement(Hd,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:c,onDismiss:()=>h.onOpenChange(!1)},x.createElement(uv,le({"data-state":qK(h.open),role:"dialog",id:h.contentId},f,d,{ref:e,style:{...d.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}}))))});function qK(r){return r?"open":"closed"}const HAe=PAe,VAe=FAe,GAe=BAe,jK="Progress",OT=100,[qAe,pdt]=Hr(jK),[jAe,KAe]=qAe(jK),KK=x.forwardRef((r,e)=>{const{__scopeProgress:t,value:n,max:i,getValueLabel:s=QAe,...a}=r,o=xI(i)?i:OT,l=YK(n,o)?n:null,c=Bx(l)?s(l,o):void 0;return x.createElement(jAe,{scope:t,value:l,max:o},x.createElement(Ge.div,le({"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Bx(l)?l:void 0,"aria-valuetext":c,role:"progressbar","data-state":zK(l,o),"data-value":l??void 0,"data-max":o},a,{ref:e})))});KK.propTypes={max(r,e,t){const n=r[e],i=String(n);return n&&!xI(n)?new Error(XAe(i,t)):null},value(r,e,t){const n=r[e],i=String(n),s=xI(r.max)?r.max:OT;return n!=null&&!YK(n,s)?new Error(ZAe(i,t)):null}};const zAe="ProgressIndicator",YAe=x.forwardRef((r,e)=>{var t;const{__scopeProgress:n,...i}=r,s=KAe(zAe,n);return x.createElement(Ge.div,le({"data-state":zK(s.value,s.max),"data-value":(t=s.value)!==null&&t!==void 0?t:void 0,"data-max":s.max},i,{ref:e}))});function QAe(r,e){return`${Math.round(r/e*100)}%`}function zK(r,e){return r==null?"indeterminate":r===e?"complete":"loading"}function Bx(r){return typeof r=="number"}function xI(r){return Bx(r)&&!isNaN(r)&&r>0}function YK(r,e){return Bx(r)&&!isNaN(r)&&r<=e&&r>=0}function XAe(r,e){return`Invalid prop \`max\` of value \`${r}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${OT}\`.`}function ZAe(r,e){return`Invalid prop \`value\` of value \`${r}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${OT} if no \`max\` prop is set)
  - \`null\` if the progress is indeterminate.

Defaulting to \`null\`.`}const JAe=KK,e_e=YAe,QK="Radio",[t_e,XK]=Hr(QK),[r_e,n_e]=t_e(QK),i_e=x.forwardRef((r,e)=>{const{__scopeRadio:t,name:n,checked:i=!1,required:s,disabled:a,value:o="on",onCheck:l,...c}=r,[u,d]=x.useState(null),h=it(e,g=>d(g)),f=x.useRef(!1),m=u?!!u.closest("form"):!0;return x.createElement(r_e,{scope:t,checked:i,disabled:a},x.createElement(Ge.button,le({type:"button",role:"radio","aria-checked":i,"data-state":ZK(i),"data-disabled":a?"":void 0,disabled:a,value:o},c,{ref:h,onClick:_e(r.onClick,g=>{i||l?.(),m&&(f.current=g.isPropagationStopped(),f.current||g.stopPropagation())})})),m&&x.createElement(o_e,{control:u,bubbles:!f.current,name:n,value:o,checked:i,required:s,disabled:a,style:{transform:"translateX(-100%)"}}))}),s_e="RadioIndicator",a_e=x.forwardRef((r,e)=>{const{__scopeRadio:t,forceMount:n,...i}=r,s=n_e(s_e,t);return x.createElement(mn,{present:n||s.checked},x.createElement(Ge.span,le({"data-state":ZK(s.checked),"data-disabled":s.disabled?"":void 0},i,{ref:e})))}),o_e=r=>{const{control:e,checked:t,bubbles:n=!0,...i}=r,s=x.useRef(null),a=oT(t),o=nT(e);return x.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(a!==t&&d){const h=new Event("click",{bubbles:n});d.call(l,t),l.dispatchEvent(h)}},[a,t,n]),x.createElement("input",le({type:"radio","aria-hidden":!0,defaultChecked:t},i,{tabIndex:-1,ref:s,style:{...r.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function ZK(r){return r?"checked":"unchecked"}const l_e=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],JK="RadioGroup",[c_e,mdt]=Hr(JK,[Lp,XK]),ez=Lp(),tz=XK(),[u_e,d_e]=c_e(JK),h_e=x.forwardRef((r,e)=>{const{__scopeRadioGroup:t,name:n,defaultValue:i,value:s,required:a=!1,disabled:o=!1,orientation:l,dir:c,loop:u=!0,onValueChange:d,...h}=r,f=ez(t),m=Vd(c),[g,y]=Gn({prop:s,defaultProp:i,onChange:d});return x.createElement(u_e,{scope:t,name:n,required:a,disabled:o,value:g,onValueChange:y},x.createElement(bL,le({asChild:!0},f,{orientation:l,dir:m,loop:u}),x.createElement(Ge.div,le({role:"radiogroup","aria-required":a,"aria-orientation":l,"data-disabled":o?"":void 0,dir:m},h,{ref:e}))))}),f_e="RadioGroupItem",p_e=x.forwardRef((r,e)=>{const{__scopeRadioGroup:t,disabled:n,...i}=r,s=d_e(f_e,t),a=s.disabled||n,o=ez(t),l=tz(t),c=x.useRef(null),u=it(e,c),d=s.value===i.value,h=x.useRef(!1);return x.useEffect(()=>{const f=g=>{l_e.includes(g.key)&&(h.current=!0)},m=()=>h.current=!1;return document.addEventListener("keydown",f),document.addEventListener("keyup",m),()=>{document.removeEventListener("keydown",f),document.removeEventListener("keyup",m)}},[]),x.createElement(EL,le({asChild:!0},o,{focusable:!a,active:d}),x.createElement(i_e,le({disabled:a,required:s.required,checked:d},l,i,{name:s.name,ref:u,onCheck:()=>s.onValueChange(i.value),onKeyDown:_e(f=>{f.key==="Enter"&&f.preventDefault()}),onFocus:_e(i.onFocus,()=>{var f;h.current&&((f=c.current)===null||f===void 0||f.click())})})))}),m_e=x.forwardRef((r,e)=>{const{__scopeRadioGroup:t,...n}=r,i=tz(t);return x.createElement(a_e,le({},i,n,{ref:e}))}),g_e=h_e,v_e=p_e,y_e=m_e,rz="Switch",[b_e,gdt]=Hr(rz),[E_e,x_e]=b_e(rz),w_e=x.forwardRef((r,e)=>{const{__scopeSwitch:t,name:n,checked:i,defaultChecked:s,required:a,disabled:o,value:l="on",onCheckedChange:c,...u}=r,[d,h]=x.useState(null),f=it(e,E=>h(E)),m=x.useRef(!1),g=d?!!d.closest("form"):!0,[y=!1,b]=Gn({prop:i,defaultProp:s,onChange:c});return x.createElement(E_e,{scope:t,checked:y,disabled:o},x.createElement(Ge.button,le({type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":nz(y),"data-disabled":o?"":void 0,disabled:o,value:l},u,{ref:f,onClick:_e(r.onClick,E=>{b(w=>!w),g&&(m.current=E.isPropagationStopped(),m.current||E.stopPropagation())})})),g&&x.createElement(A_e,{control:d,bubbles:!m.current,name:n,value:l,checked:y,required:a,disabled:o,style:{transform:"translateX(-100%)"}}))}),T_e="SwitchThumb",S_e=x.forwardRef((r,e)=>{const{__scopeSwitch:t,...n}=r,i=x_e(T_e,t);return x.createElement(Ge.span,le({"data-state":nz(i.checked),"data-disabled":i.disabled?"":void 0},n,{ref:e}))}),A_e=r=>{const{control:e,checked:t,bubbles:n=!0,...i}=r,s=x.useRef(null),a=oT(t),o=nT(e);return x.useEffect(()=>{const l=s.current,c=window.HTMLInputElement.prototype,d=Object.getOwnPropertyDescriptor(c,"checked").set;if(a!==t&&d){const h=new Event("click",{bubbles:n});d.call(l,t),l.dispatchEvent(h)}},[a,t,n]),x.createElement("input",le({type:"checkbox","aria-hidden":!0,defaultChecked:t},i,{tabIndex:-1,ref:s,style:{...r.style,...o,position:"absolute",pointerEvents:"none",opacity:0,margin:0}}))};function nz(r){return r?"checked":"unchecked"}const __e=w_e,C_e=S_e,iz="Tabs",[R_e,vdt]=Hr(iz,[Lp]),sz=Lp(),[k_e,sO]=R_e(iz),I_e=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,onValueChange:i,defaultValue:s,orientation:a="horizontal",dir:o,activationMode:l="automatic",...c}=r,u=Vd(o),[d,h]=Gn({prop:n,onChange:i,defaultProp:s});return x.createElement(k_e,{scope:t,baseId:ii(),value:d,onValueChange:h,orientation:a,dir:u,activationMode:l},x.createElement(Ge.div,le({dir:u,"data-orientation":a},c,{ref:e})))}),$_e="TabsList",D_e=x.forwardRef((r,e)=>{const{__scopeTabs:t,loop:n=!0,...i}=r,s=sO($_e,t),a=sz(t);return x.createElement(bL,le({asChild:!0},a,{orientation:s.orientation,dir:s.dir,loop:n}),x.createElement(Ge.div,le({role:"tablist","aria-orientation":s.orientation},i,{ref:e})))}),L_e="TabsTrigger",O_e=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,disabled:i=!1,...s}=r,a=sO(L_e,t),o=sz(t),l=az(a.baseId,n),c=oz(a.baseId,n),u=n===a.value;return x.createElement(EL,le({asChild:!0},o,{focusable:!i,active:u}),x.createElement(Ge.button,le({type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:l},s,{ref:e,onMouseDown:_e(r.onMouseDown,d=>{!i&&d.button===0&&d.ctrlKey===!1?a.onValueChange(n):d.preventDefault()}),onKeyDown:_e(r.onKeyDown,d=>{[" ","Enter"].includes(d.key)&&a.onValueChange(n)}),onFocus:_e(r.onFocus,()=>{const d=a.activationMode!=="manual";!u&&!i&&d&&a.onValueChange(n)})})))}),P_e="TabsContent",M_e=x.forwardRef((r,e)=>{const{__scopeTabs:t,value:n,forceMount:i,children:s,...a}=r,o=sO(P_e,t),l=az(o.baseId,n),c=oz(o.baseId,n),u=n===o.value,d=x.useRef(u);return x.useEffect(()=>{const h=requestAnimationFrame(()=>d.current=!1);return()=>cancelAnimationFrame(h)},[]),x.createElement(mn,{present:i||u},({present:h})=>x.createElement(Ge.div,le({"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":l,hidden:!h,id:c,tabIndex:0},a,{ref:e,style:{...r.style,animationDuration:d.current?"0s":void 0}}),h&&s))});function az(r,e){return`${r}-trigger-${e}`}function oz(r,e){return`${r}-content-${e}`}const N_e=I_e,F_e=D_e,B_e=O_e,U_e=M_e;var Ux={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */Ux.exports;(function(r,e){(function(){var t,n="4.17.21",i=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",c=500,u="__lodash_placeholder__",d=1,h=2,f=4,m=1,g=2,y=1,b=2,E=4,w=8,A=16,S=32,_=64,C=128,k=256,D=512,I=30,L="...",M=800,F=16,U=1,W=2,j=3,z=1/0,Q=9007199254740991,V=17976931348623157e292,Y=NaN,J=4294967295,ue=J-1,ne=J>>>1,ge=[["ary",C],["bind",y],["bindKey",b],["curry",w],["curryRight",A],["flip",D],["partial",S],["partialRight",_],["rearg",k]],ae="[object Arguments]",ie="[object Array]",ee="[object AsyncFunction]",be="[object Boolean]",we="[object Date]",Re="[object DOMException]",Oe="[object Error]",me="[object Function]",Ue="[object GeneratorFunction]",Se="[object Map]",et="[object Number]",Qt="[object Null]",Ut="[object Object]",Wi="[object Promise]",ya="[object Proxy]",Hi="[object RegExp]",tt="[object Set]",Lr="[object String]",Fs="[object Symbol]",ko="[object Undefined]",Vi="[object WeakMap]",Io="[object WeakSet]",bi="[object ArrayBuffer]",vr="[object DataView]",eu="[object Float32Array]",Ce="[object Float64Array]",Ne="[object Int8Array]",vt="[object Int16Array]",ct="[object Int32Array]",_t="[object Uint8Array]",Xt="[object Uint8ClampedArray]",gn="[object Uint16Array]",ba="[object Uint32Array]",Kn=/\b__p \+= '';/g,th=/\b(__p \+=) '' \+/g,Ine=/(__e\(.*?\)|\b__t\)) \+\n'';/g,GM=/&(?:amp|lt|gt|quot|#39);/g,qM=/[&<>"']/g,$ne=RegExp(GM.source),Dne=RegExp(qM.source),Lne=/<%-([\s\S]+?)%>/g,One=/<%([\s\S]+?)%>/g,jM=/<%=([\s\S]+?)%>/g,Pne=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Mne=/^\w*$/,Nne=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,MS=/[\\^$.*+?()[\]{}|]/g,Fne=RegExp(MS.source),NS=/^\s+/,Bne=/\s/,Une=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Wne=/\{\n\/\* \[wrapped with (.+)\] \*/,Hne=/,? & /,Vne=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gne=/[()=,{}\[\]\/\s]/,qne=/\\(\\)?/g,jne=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,KM=/\w*$/,Kne=/^[-+]0x[0-9a-f]+$/i,zne=/^0b[01]+$/i,Yne=/^\[object .+?Constructor\]$/,Qne=/^0o[0-7]+$/i,Xne=/^(?:0|[1-9]\d*)$/,Zne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Zv=/($^)/,Jne=/['\n\r\u2028\u2029\\]/g,Jv="\\ud800-\\udfff",eie="\\u0300-\\u036f",tie="\\ufe20-\\ufe2f",rie="\\u20d0-\\u20ff",zM=eie+tie+rie,YM="\\u2700-\\u27bf",QM="a-z\\xdf-\\xf6\\xf8-\\xff",nie="\\xac\\xb1\\xd7\\xf7",iie="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",sie="\\u2000-\\u206f",aie=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",XM="A-Z\\xc0-\\xd6\\xd8-\\xde",ZM="\\ufe0e\\ufe0f",JM=nie+iie+sie+aie,FS="['’]",oie="["+Jv+"]",e3="["+JM+"]",ey="["+zM+"]",t3="\\d+",lie="["+YM+"]",r3="["+QM+"]",n3="[^"+Jv+JM+t3+YM+QM+XM+"]",BS="\\ud83c[\\udffb-\\udfff]",cie="(?:"+ey+"|"+BS+")",i3="[^"+Jv+"]",US="(?:\\ud83c[\\udde6-\\uddff]){2}",WS="[\\ud800-\\udbff][\\udc00-\\udfff]",rh="["+XM+"]",s3="\\u200d",a3="(?:"+r3+"|"+n3+")",uie="(?:"+rh+"|"+n3+")",o3="(?:"+FS+"(?:d|ll|m|re|s|t|ve))?",l3="(?:"+FS+"(?:D|LL|M|RE|S|T|VE))?",c3=cie+"?",u3="["+ZM+"]?",die="(?:"+s3+"(?:"+[i3,US,WS].join("|")+")"+u3+c3+")*",hie="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fie="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",d3=u3+c3+die,pie="(?:"+[lie,US,WS].join("|")+")"+d3,mie="(?:"+[i3+ey+"?",ey,US,WS,oie].join("|")+")",gie=RegExp(FS,"g"),vie=RegExp(ey,"g"),HS=RegExp(BS+"(?="+BS+")|"+mie+d3,"g"),yie=RegExp([rh+"?"+r3+"+"+o3+"(?="+[e3,rh,"$"].join("|")+")",uie+"+"+l3+"(?="+[e3,rh+a3,"$"].join("|")+")",rh+"?"+a3+"+"+o3,rh+"+"+l3,fie,hie,t3,pie].join("|"),"g"),bie=RegExp("["+s3+Jv+zM+ZM+"]"),Eie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],wie=-1,dr={};dr[eu]=dr[Ce]=dr[Ne]=dr[vt]=dr[ct]=dr[_t]=dr[Xt]=dr[gn]=dr[ba]=!0,dr[ae]=dr[ie]=dr[bi]=dr[be]=dr[vr]=dr[we]=dr[Oe]=dr[me]=dr[Se]=dr[et]=dr[Ut]=dr[Hi]=dr[tt]=dr[Lr]=dr[Vi]=!1;var sr={};sr[ae]=sr[ie]=sr[bi]=sr[vr]=sr[be]=sr[we]=sr[eu]=sr[Ce]=sr[Ne]=sr[vt]=sr[ct]=sr[Se]=sr[et]=sr[Ut]=sr[Hi]=sr[tt]=sr[Lr]=sr[Fs]=sr[_t]=sr[Xt]=sr[gn]=sr[ba]=!0,sr[Oe]=sr[me]=sr[Vi]=!1;var Tie={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Sie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Aie={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},_ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cie=parseFloat,Rie=parseInt,h3=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn,kie=typeof self=="object"&&self&&self.Object===Object&&self,Mn=h3||kie||Function("return this")(),VS=e&&!e.nodeType&&e,tu=VS&&!0&&r&&!r.nodeType&&r,f3=tu&&tu.exports===VS,GS=f3&&h3.process,us=function(){try{var X=tu&&tu.require&&tu.require("util").types;return X||GS&&GS.binding&&GS.binding("util")}catch{}}(),p3=us&&us.isArrayBuffer,m3=us&&us.isDate,g3=us&&us.isMap,v3=us&&us.isRegExp,y3=us&&us.isSet,b3=us&&us.isTypedArray;function Gi(X,pe,he){switch(he.length){case 0:return X.call(pe);case 1:return X.call(pe,he[0]);case 2:return X.call(pe,he[0],he[1]);case 3:return X.call(pe,he[0],he[1],he[2])}return X.apply(pe,he)}function Iie(X,pe,he,He){for(var ht=-1,Nt=X==null?0:X.length;++ht<Nt;){var rn=X[ht];pe(He,rn,he(rn),X)}return He}function ds(X,pe){for(var he=-1,He=X==null?0:X.length;++he<He&&pe(X[he],he,X)!==!1;);return X}function $ie(X,pe){for(var he=X==null?0:X.length;he--&&pe(X[he],he,X)!==!1;);return X}function E3(X,pe){for(var he=-1,He=X==null?0:X.length;++he<He;)if(!pe(X[he],he,X))return!1;return!0}function Il(X,pe){for(var he=-1,He=X==null?0:X.length,ht=0,Nt=[];++he<He;){var rn=X[he];pe(rn,he,X)&&(Nt[ht++]=rn)}return Nt}function ty(X,pe){var he=X==null?0:X.length;return!!he&&nh(X,pe,0)>-1}function qS(X,pe,he){for(var He=-1,ht=X==null?0:X.length;++He<ht;)if(he(pe,X[He]))return!0;return!1}function yr(X,pe){for(var he=-1,He=X==null?0:X.length,ht=Array(He);++he<He;)ht[he]=pe(X[he],he,X);return ht}function $l(X,pe){for(var he=-1,He=pe.length,ht=X.length;++he<He;)X[ht+he]=pe[he];return X}function jS(X,pe,he,He){var ht=-1,Nt=X==null?0:X.length;for(He&&Nt&&(he=X[++ht]);++ht<Nt;)he=pe(he,X[ht],ht,X);return he}function Die(X,pe,he,He){var ht=X==null?0:X.length;for(He&&ht&&(he=X[--ht]);ht--;)he=pe(he,X[ht],ht,X);return he}function KS(X,pe){for(var he=-1,He=X==null?0:X.length;++he<He;)if(pe(X[he],he,X))return!0;return!1}var Lie=zS("length");function Oie(X){return X.split("")}function Pie(X){return X.match(Vne)||[]}function x3(X,pe,he){var He;return he(X,function(ht,Nt,rn){if(pe(ht,Nt,rn))return He=Nt,!1}),He}function ry(X,pe,he,He){for(var ht=X.length,Nt=he+(He?1:-1);He?Nt--:++Nt<ht;)if(pe(X[Nt],Nt,X))return Nt;return-1}function nh(X,pe,he){return pe===pe?Kie(X,pe,he):ry(X,w3,he)}function Mie(X,pe,he,He){for(var ht=he-1,Nt=X.length;++ht<Nt;)if(He(X[ht],pe))return ht;return-1}function w3(X){return X!==X}function T3(X,pe){var he=X==null?0:X.length;return he?QS(X,pe)/he:Y}function zS(X){return function(pe){return pe==null?t:pe[X]}}function YS(X){return function(pe){return X==null?t:X[pe]}}function S3(X,pe,he,He,ht){return ht(X,function(Nt,rn,Zt){he=He?(He=!1,Nt):pe(he,Nt,rn,Zt)}),he}function Nie(X,pe){var he=X.length;for(X.sort(pe);he--;)X[he]=X[he].value;return X}function QS(X,pe){for(var he,He=-1,ht=X.length;++He<ht;){var Nt=pe(X[He]);Nt!==t&&(he=he===t?Nt:he+Nt)}return he}function XS(X,pe){for(var he=-1,He=Array(X);++he<X;)He[he]=pe(he);return He}function Fie(X,pe){return yr(pe,function(he){return[he,X[he]]})}function A3(X){return X&&X.slice(0,k3(X)+1).replace(NS,"")}function qi(X){return function(pe){return X(pe)}}function ZS(X,pe){return yr(pe,function(he){return X[he]})}function em(X,pe){return X.has(pe)}function _3(X,pe){for(var he=-1,He=X.length;++he<He&&nh(pe,X[he],0)>-1;);return he}function C3(X,pe){for(var he=X.length;he--&&nh(pe,X[he],0)>-1;);return he}function Bie(X,pe){for(var he=X.length,He=0;he--;)X[he]===pe&&++He;return He}var Uie=YS(Tie),Wie=YS(Sie);function Hie(X){return"\\"+_ie[X]}function Vie(X,pe){return X==null?t:X[pe]}function ih(X){return bie.test(X)}function Gie(X){return Eie.test(X)}function qie(X){for(var pe,he=[];!(pe=X.next()).done;)he.push(pe.value);return he}function JS(X){var pe=-1,he=Array(X.size);return X.forEach(function(He,ht){he[++pe]=[ht,He]}),he}function R3(X,pe){return function(he){return X(pe(he))}}function Dl(X,pe){for(var he=-1,He=X.length,ht=0,Nt=[];++he<He;){var rn=X[he];(rn===pe||rn===u)&&(X[he]=u,Nt[ht++]=he)}return Nt}function ny(X){var pe=-1,he=Array(X.size);return X.forEach(function(He){he[++pe]=He}),he}function jie(X){var pe=-1,he=Array(X.size);return X.forEach(function(He){he[++pe]=[He,He]}),he}function Kie(X,pe,he){for(var He=he-1,ht=X.length;++He<ht;)if(X[He]===pe)return He;return-1}function zie(X,pe,he){for(var He=he+1;He--;)if(X[He]===pe)return He;return He}function sh(X){return ih(X)?Qie(X):Lie(X)}function Bs(X){return ih(X)?Xie(X):Oie(X)}function k3(X){for(var pe=X.length;pe--&&Bne.test(X.charAt(pe)););return pe}var Yie=YS(Aie);function Qie(X){for(var pe=HS.lastIndex=0;HS.test(X);)++pe;return pe}function Xie(X){return X.match(HS)||[]}function Zie(X){return X.match(yie)||[]}var Jie=function X(pe){pe=pe==null?Mn:ah.defaults(Mn.Object(),pe,ah.pick(Mn,xie));var he=pe.Array,He=pe.Date,ht=pe.Error,Nt=pe.Function,rn=pe.Math,Zt=pe.Object,eA=pe.RegExp,ese=pe.String,hs=pe.TypeError,iy=he.prototype,tse=Nt.prototype,oh=Zt.prototype,sy=pe["__core-js_shared__"],ay=tse.toString,Gt=oh.hasOwnProperty,rse=0,I3=function(){var p=/[^.]+$/.exec(sy&&sy.keys&&sy.keys.IE_PROTO||"");return p?"Symbol(src)_1."+p:""}(),oy=oh.toString,nse=ay.call(Zt),ise=Mn._,sse=eA("^"+ay.call(Gt).replace(MS,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ly=f3?pe.Buffer:t,Ll=pe.Symbol,cy=pe.Uint8Array,$3=ly?ly.allocUnsafe:t,uy=R3(Zt.getPrototypeOf,Zt),D3=Zt.create,L3=oh.propertyIsEnumerable,dy=iy.splice,O3=Ll?Ll.isConcatSpreadable:t,tm=Ll?Ll.iterator:t,ru=Ll?Ll.toStringTag:t,hy=function(){try{var p=ou(Zt,"defineProperty");return p({},"",{}),p}catch{}}(),ase=pe.clearTimeout!==Mn.clearTimeout&&pe.clearTimeout,ose=He&&He.now!==Mn.Date.now&&He.now,lse=pe.setTimeout!==Mn.setTimeout&&pe.setTimeout,fy=rn.ceil,py=rn.floor,tA=Zt.getOwnPropertySymbols,cse=ly?ly.isBuffer:t,P3=pe.isFinite,use=iy.join,dse=R3(Zt.keys,Zt),nn=rn.max,zn=rn.min,hse=He.now,fse=pe.parseInt,M3=rn.random,pse=iy.reverse,rA=ou(pe,"DataView"),rm=ou(pe,"Map"),nA=ou(pe,"Promise"),lh=ou(pe,"Set"),nm=ou(pe,"WeakMap"),im=ou(Zt,"create"),my=nm&&new nm,ch={},mse=lu(rA),gse=lu(rm),vse=lu(nA),yse=lu(lh),bse=lu(nm),gy=Ll?Ll.prototype:t,sm=gy?gy.valueOf:t,N3=gy?gy.toString:t;function N(p){if(Or(p)&&!mt(p)&&!(p instanceof Ct)){if(p instanceof fs)return p;if(Gt.call(p,"__wrapped__"))return FN(p)}return new fs(p)}var uh=function(){function p(){}return function(v){if(!Cr(v))return{};if(D3)return D3(v);p.prototype=v;var T=new p;return p.prototype=t,T}}();function vy(){}function fs(p,v){this.__wrapped__=p,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=t}N.templateSettings={escape:Lne,evaluate:One,interpolate:jM,variable:"",imports:{_:N}},N.prototype=vy.prototype,N.prototype.constructor=N,fs.prototype=uh(vy.prototype),fs.prototype.constructor=fs;function Ct(p){this.__wrapped__=p,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=J,this.__views__=[]}function Ese(){var p=new Ct(this.__wrapped__);return p.__actions__=Ei(this.__actions__),p.__dir__=this.__dir__,p.__filtered__=this.__filtered__,p.__iteratees__=Ei(this.__iteratees__),p.__takeCount__=this.__takeCount__,p.__views__=Ei(this.__views__),p}function xse(){if(this.__filtered__){var p=new Ct(this);p.__dir__=-1,p.__filtered__=!0}else p=this.clone(),p.__dir__*=-1;return p}function wse(){var p=this.__wrapped__.value(),v=this.__dir__,T=mt(p),R=v<0,O=T?p.length:0,B=Oae(0,O,this.__views__),G=B.start,K=B.end,Z=K-G,ve=R?K:G-1,ye=this.__iteratees__,Te=ye.length,Le=0,je=zn(Z,this.__takeCount__);if(!T||!R&&O==Z&&je==Z)return oN(p,this.__actions__);var ot=[];e:for(;Z--&&Le<je;){ve+=v;for(var bt=-1,lt=p[ve];++bt<Te;){var St=ye[bt],It=St.iteratee,zi=St.type,ui=It(lt);if(zi==W)lt=ui;else if(!ui){if(zi==U)continue e;break e}}ot[Le++]=lt}return ot}Ct.prototype=uh(vy.prototype),Ct.prototype.constructor=Ct;function nu(p){var v=-1,T=p==null?0:p.length;for(this.clear();++v<T;){var R=p[v];this.set(R[0],R[1])}}function Tse(){this.__data__=im?im(null):{},this.size=0}function Sse(p){var v=this.has(p)&&delete this.__data__[p];return this.size-=v?1:0,v}function Ase(p){var v=this.__data__;if(im){var T=v[p];return T===l?t:T}return Gt.call(v,p)?v[p]:t}function _se(p){var v=this.__data__;return im?v[p]!==t:Gt.call(v,p)}function Cse(p,v){var T=this.__data__;return this.size+=this.has(p)?0:1,T[p]=im&&v===t?l:v,this}nu.prototype.clear=Tse,nu.prototype.delete=Sse,nu.prototype.get=Ase,nu.prototype.has=_se,nu.prototype.set=Cse;function $o(p){var v=-1,T=p==null?0:p.length;for(this.clear();++v<T;){var R=p[v];this.set(R[0],R[1])}}function Rse(){this.__data__=[],this.size=0}function kse(p){var v=this.__data__,T=yy(v,p);if(T<0)return!1;var R=v.length-1;return T==R?v.pop():dy.call(v,T,1),--this.size,!0}function Ise(p){var v=this.__data__,T=yy(v,p);return T<0?t:v[T][1]}function $se(p){return yy(this.__data__,p)>-1}function Dse(p,v){var T=this.__data__,R=yy(T,p);return R<0?(++this.size,T.push([p,v])):T[R][1]=v,this}$o.prototype.clear=Rse,$o.prototype.delete=kse,$o.prototype.get=Ise,$o.prototype.has=$se,$o.prototype.set=Dse;function Do(p){var v=-1,T=p==null?0:p.length;for(this.clear();++v<T;){var R=p[v];this.set(R[0],R[1])}}function Lse(){this.size=0,this.__data__={hash:new nu,map:new(rm||$o),string:new nu}}function Ose(p){var v=Iy(this,p).delete(p);return this.size-=v?1:0,v}function Pse(p){return Iy(this,p).get(p)}function Mse(p){return Iy(this,p).has(p)}function Nse(p,v){var T=Iy(this,p),R=T.size;return T.set(p,v),this.size+=T.size==R?0:1,this}Do.prototype.clear=Lse,Do.prototype.delete=Ose,Do.prototype.get=Pse,Do.prototype.has=Mse,Do.prototype.set=Nse;function iu(p){var v=-1,T=p==null?0:p.length;for(this.__data__=new Do;++v<T;)this.add(p[v])}function Fse(p){return this.__data__.set(p,l),this}function Bse(p){return this.__data__.has(p)}iu.prototype.add=iu.prototype.push=Fse,iu.prototype.has=Bse;function Us(p){var v=this.__data__=new $o(p);this.size=v.size}function Use(){this.__data__=new $o,this.size=0}function Wse(p){var v=this.__data__,T=v.delete(p);return this.size=v.size,T}function Hse(p){return this.__data__.get(p)}function Vse(p){return this.__data__.has(p)}function Gse(p,v){var T=this.__data__;if(T instanceof $o){var R=T.__data__;if(!rm||R.length<i-1)return R.push([p,v]),this.size=++T.size,this;T=this.__data__=new Do(R)}return T.set(p,v),this.size=T.size,this}Us.prototype.clear=Use,Us.prototype.delete=Wse,Us.prototype.get=Hse,Us.prototype.has=Vse,Us.prototype.set=Gse;function F3(p,v){var T=mt(p),R=!T&&cu(p),O=!T&&!R&&Fl(p),B=!T&&!R&&!O&&ph(p),G=T||R||O||B,K=G?XS(p.length,ese):[],Z=K.length;for(var ve in p)(v||Gt.call(p,ve))&&!(G&&(ve=="length"||O&&(ve=="offset"||ve=="parent")||B&&(ve=="buffer"||ve=="byteLength"||ve=="byteOffset")||Mo(ve,Z)))&&K.push(ve);return K}function B3(p){var v=p.length;return v?p[pA(0,v-1)]:t}function qse(p,v){return $y(Ei(p),su(v,0,p.length))}function jse(p){return $y(Ei(p))}function iA(p,v,T){(T!==t&&!Ws(p[v],T)||T===t&&!(v in p))&&Lo(p,v,T)}function am(p,v,T){var R=p[v];(!(Gt.call(p,v)&&Ws(R,T))||T===t&&!(v in p))&&Lo(p,v,T)}function yy(p,v){for(var T=p.length;T--;)if(Ws(p[T][0],v))return T;return-1}function Kse(p,v,T,R){return Ol(p,function(O,B,G){v(R,O,T(O),G)}),R}function U3(p,v){return p&&xa(v,vn(v),p)}function zse(p,v){return p&&xa(v,wi(v),p)}function Lo(p,v,T){v=="__proto__"&&hy?hy(p,v,{configurable:!0,enumerable:!0,value:T,writable:!0}):p[v]=T}function sA(p,v){for(var T=-1,R=v.length,O=he(R),B=p==null;++T<R;)O[T]=B?t:BA(p,v[T]);return O}function su(p,v,T){return p===p&&(T!==t&&(p=p<=T?p:T),v!==t&&(p=p>=v?p:v)),p}function ps(p,v,T,R,O,B){var G,K=v&d,Z=v&h,ve=v&f;if(T&&(G=O?T(p,R,O,B):T(p)),G!==t)return G;if(!Cr(p))return p;var ye=mt(p);if(ye){if(G=Mae(p),!K)return Ei(p,G)}else{var Te=Yn(p),Le=Te==me||Te==Ue;if(Fl(p))return uN(p,K);if(Te==Ut||Te==ae||Le&&!O){if(G=Z||Le?{}:kN(p),!K)return Z?Aae(p,zse(G,p)):Sae(p,U3(G,p))}else{if(!sr[Te])return O?p:{};G=Nae(p,Te,K)}}B||(B=new Us);var je=B.get(p);if(je)return je;B.set(p,G),i5(p)?p.forEach(function(lt){G.add(ps(lt,v,T,lt,p,B))}):r5(p)&&p.forEach(function(lt,St){G.set(St,ps(lt,v,T,St,p,B))});var ot=ve?Z?AA:SA:Z?wi:vn,bt=ye?t:ot(p);return ds(bt||p,function(lt,St){bt&&(St=lt,lt=p[St]),am(G,St,ps(lt,v,T,St,p,B))}),G}function Yse(p){var v=vn(p);return function(T){return W3(T,p,v)}}function W3(p,v,T){var R=T.length;if(p==null)return!R;for(p=Zt(p);R--;){var O=T[R],B=v[O],G=p[O];if(G===t&&!(O in p)||!B(G))return!1}return!0}function H3(p,v,T){if(typeof p!="function")throw new hs(a);return fm(function(){p.apply(t,T)},v)}function om(p,v,T,R){var O=-1,B=ty,G=!0,K=p.length,Z=[],ve=v.length;if(!K)return Z;T&&(v=yr(v,qi(T))),R?(B=qS,G=!1):v.length>=i&&(B=em,G=!1,v=new iu(v));e:for(;++O<K;){var ye=p[O],Te=T==null?ye:T(ye);if(ye=R||ye!==0?ye:0,G&&Te===Te){for(var Le=ve;Le--;)if(v[Le]===Te)continue e;Z.push(ye)}else B(v,Te,R)||Z.push(ye)}return Z}var Ol=mN(Ea),V3=mN(oA,!0);function Qse(p,v){var T=!0;return Ol(p,function(R,O,B){return T=!!v(R,O,B),T}),T}function by(p,v,T){for(var R=-1,O=p.length;++R<O;){var B=p[R],G=v(B);if(G!=null&&(K===t?G===G&&!Ki(G):T(G,K)))var K=G,Z=B}return Z}function Xse(p,v,T,R){var O=p.length;for(T=yt(T),T<0&&(T=-T>O?0:O+T),R=R===t||R>O?O:yt(R),R<0&&(R+=O),R=T>R?0:a5(R);T<R;)p[T++]=v;return p}function G3(p,v){var T=[];return Ol(p,function(R,O,B){v(R,O,B)&&T.push(R)}),T}function Nn(p,v,T,R,O){var B=-1,G=p.length;for(T||(T=Bae),O||(O=[]);++B<G;){var K=p[B];v>0&&T(K)?v>1?Nn(K,v-1,T,R,O):$l(O,K):R||(O[O.length]=K)}return O}var aA=gN(),q3=gN(!0);function Ea(p,v){return p&&aA(p,v,vn)}function oA(p,v){return p&&q3(p,v,vn)}function Ey(p,v){return Il(v,function(T){return No(p[T])})}function au(p,v){v=Ml(v,p);for(var T=0,R=v.length;p!=null&&T<R;)p=p[wa(v[T++])];return T&&T==R?p:t}function j3(p,v,T){var R=v(p);return mt(p)?R:$l(R,T(p))}function li(p){return p==null?p===t?ko:Qt:ru&&ru in Zt(p)?Lae(p):jae(p)}function lA(p,v){return p>v}function Zse(p,v){return p!=null&&Gt.call(p,v)}function Jse(p,v){return p!=null&&v in Zt(p)}function eae(p,v,T){return p>=zn(v,T)&&p<nn(v,T)}function cA(p,v,T){for(var R=T?qS:ty,O=p[0].length,B=p.length,G=B,K=he(B),Z=1/0,ve=[];G--;){var ye=p[G];G&&v&&(ye=yr(ye,qi(v))),Z=zn(ye.length,Z),K[G]=!T&&(v||O>=120&&ye.length>=120)?new iu(G&&ye):t}ye=p[0];var Te=-1,Le=K[0];e:for(;++Te<O&&ve.length<Z;){var je=ye[Te],ot=v?v(je):je;if(je=T||je!==0?je:0,!(Le?em(Le,ot):R(ve,ot,T))){for(G=B;--G;){var bt=K[G];if(!(bt?em(bt,ot):R(p[G],ot,T)))continue e}Le&&Le.push(ot),ve.push(je)}}return ve}function tae(p,v,T,R){return Ea(p,function(O,B,G){v(R,T(O),B,G)}),R}function lm(p,v,T){v=Ml(v,p),p=LN(p,v);var R=p==null?p:p[wa(gs(v))];return R==null?t:Gi(R,p,T)}function K3(p){return Or(p)&&li(p)==ae}function rae(p){return Or(p)&&li(p)==bi}function nae(p){return Or(p)&&li(p)==we}function cm(p,v,T,R,O){return p===v?!0:p==null||v==null||!Or(p)&&!Or(v)?p!==p&&v!==v:iae(p,v,T,R,cm,O)}function iae(p,v,T,R,O,B){var G=mt(p),K=mt(v),Z=G?ie:Yn(p),ve=K?ie:Yn(v);Z=Z==ae?Ut:Z,ve=ve==ae?Ut:ve;var ye=Z==Ut,Te=ve==Ut,Le=Z==ve;if(Le&&Fl(p)){if(!Fl(v))return!1;G=!0,ye=!1}if(Le&&!ye)return B||(B=new Us),G||ph(p)?_N(p,v,T,R,O,B):$ae(p,v,Z,T,R,O,B);if(!(T&m)){var je=ye&&Gt.call(p,"__wrapped__"),ot=Te&&Gt.call(v,"__wrapped__");if(je||ot){var bt=je?p.value():p,lt=ot?v.value():v;return B||(B=new Us),O(bt,lt,T,R,B)}}return Le?(B||(B=new Us),Dae(p,v,T,R,O,B)):!1}function sae(p){return Or(p)&&Yn(p)==Se}function uA(p,v,T,R){var O=T.length,B=O,G=!R;if(p==null)return!B;for(p=Zt(p);O--;){var K=T[O];if(G&&K[2]?K[1]!==p[K[0]]:!(K[0]in p))return!1}for(;++O<B;){K=T[O];var Z=K[0],ve=p[Z],ye=K[1];if(G&&K[2]){if(ve===t&&!(Z in p))return!1}else{var Te=new Us;if(R)var Le=R(ve,ye,Z,p,v,Te);if(!(Le===t?cm(ye,ve,m|g,R,Te):Le))return!1}}return!0}function z3(p){if(!Cr(p)||Wae(p))return!1;var v=No(p)?sse:Yne;return v.test(lu(p))}function aae(p){return Or(p)&&li(p)==Hi}function oae(p){return Or(p)&&Yn(p)==tt}function lae(p){return Or(p)&&Ny(p.length)&&!!dr[li(p)]}function Y3(p){return typeof p=="function"?p:p==null?Ti:typeof p=="object"?mt(p)?Z3(p[0],p[1]):X3(p):v5(p)}function dA(p){if(!hm(p))return dse(p);var v=[];for(var T in Zt(p))Gt.call(p,T)&&T!="constructor"&&v.push(T);return v}function cae(p){if(!Cr(p))return qae(p);var v=hm(p),T=[];for(var R in p)R=="constructor"&&(v||!Gt.call(p,R))||T.push(R);return T}function hA(p,v){return p<v}function Q3(p,v){var T=-1,R=xi(p)?he(p.length):[];return Ol(p,function(O,B,G){R[++T]=v(O,B,G)}),R}function X3(p){var v=CA(p);return v.length==1&&v[0][2]?$N(v[0][0],v[0][1]):function(T){return T===p||uA(T,p,v)}}function Z3(p,v){return kA(p)&&IN(v)?$N(wa(p),v):function(T){var R=BA(T,p);return R===t&&R===v?UA(T,p):cm(v,R,m|g)}}function xy(p,v,T,R,O){p!==v&&aA(v,function(B,G){if(O||(O=new Us),Cr(B))uae(p,v,G,T,xy,R,O);else{var K=R?R($A(p,G),B,G+"",p,v,O):t;K===t&&(K=B),iA(p,G,K)}},wi)}function uae(p,v,T,R,O,B,G){var K=$A(p,T),Z=$A(v,T),ve=G.get(Z);if(ve){iA(p,T,ve);return}var ye=B?B(K,Z,T+"",p,v,G):t,Te=ye===t;if(Te){var Le=mt(Z),je=!Le&&Fl(Z),ot=!Le&&!je&&ph(Z);ye=Z,Le||je||ot?mt(K)?ye=K:Mr(K)?ye=Ei(K):je?(Te=!1,ye=uN(Z,!0)):ot?(Te=!1,ye=dN(Z,!0)):ye=[]:pm(Z)||cu(Z)?(ye=K,cu(K)?ye=o5(K):(!Cr(K)||No(K))&&(ye=kN(Z))):Te=!1}Te&&(G.set(Z,ye),O(ye,Z,R,B,G),G.delete(Z)),iA(p,T,ye)}function J3(p,v){var T=p.length;if(T)return v+=v<0?T:0,Mo(v,T)?p[v]:t}function eN(p,v,T){v.length?v=yr(v,function(B){return mt(B)?function(G){return au(G,B.length===1?B[0]:B)}:B}):v=[Ti];var R=-1;v=yr(v,qi(st()));var O=Q3(p,function(B,G,K){var Z=yr(v,function(ve){return ve(B)});return{criteria:Z,index:++R,value:B}});return Nie(O,function(B,G){return Tae(B,G,T)})}function dae(p,v){return tN(p,v,function(T,R){return UA(p,R)})}function tN(p,v,T){for(var R=-1,O=v.length,B={};++R<O;){var G=v[R],K=au(p,G);T(K,G)&&um(B,Ml(G,p),K)}return B}function hae(p){return function(v){return au(v,p)}}function fA(p,v,T,R){var O=R?Mie:nh,B=-1,G=v.length,K=p;for(p===v&&(v=Ei(v)),T&&(K=yr(p,qi(T)));++B<G;)for(var Z=0,ve=v[B],ye=T?T(ve):ve;(Z=O(K,ye,Z,R))>-1;)K!==p&&dy.call(K,Z,1),dy.call(p,Z,1);return p}function rN(p,v){for(var T=p?v.length:0,R=T-1;T--;){var O=v[T];if(T==R||O!==B){var B=O;Mo(O)?dy.call(p,O,1):vA(p,O)}}return p}function pA(p,v){return p+py(M3()*(v-p+1))}function fae(p,v,T,R){for(var O=-1,B=nn(fy((v-p)/(T||1)),0),G=he(B);B--;)G[R?B:++O]=p,p+=T;return G}function mA(p,v){var T="";if(!p||v<1||v>Q)return T;do v%2&&(T+=p),v=py(v/2),v&&(p+=p);while(v);return T}function xt(p,v){return DA(DN(p,v,Ti),p+"")}function pae(p){return B3(mh(p))}function mae(p,v){var T=mh(p);return $y(T,su(v,0,T.length))}function um(p,v,T,R){if(!Cr(p))return p;v=Ml(v,p);for(var O=-1,B=v.length,G=B-1,K=p;K!=null&&++O<B;){var Z=wa(v[O]),ve=T;if(Z==="__proto__"||Z==="constructor"||Z==="prototype")return p;if(O!=G){var ye=K[Z];ve=R?R(ye,Z,K):t,ve===t&&(ve=Cr(ye)?ye:Mo(v[O+1])?[]:{})}am(K,Z,ve),K=K[Z]}return p}var nN=my?function(p,v){return my.set(p,v),p}:Ti,gae=hy?function(p,v){return hy(p,"toString",{configurable:!0,enumerable:!1,value:HA(v),writable:!0})}:Ti;function vae(p){return $y(mh(p))}function ms(p,v,T){var R=-1,O=p.length;v<0&&(v=-v>O?0:O+v),T=T>O?O:T,T<0&&(T+=O),O=v>T?0:T-v>>>0,v>>>=0;for(var B=he(O);++R<O;)B[R]=p[R+v];return B}function yae(p,v){var T;return Ol(p,function(R,O,B){return T=v(R,O,B),!T}),!!T}function wy(p,v,T){var R=0,O=p==null?R:p.length;if(typeof v=="number"&&v===v&&O<=ne){for(;R<O;){var B=R+O>>>1,G=p[B];G!==null&&!Ki(G)&&(T?G<=v:G<v)?R=B+1:O=B}return O}return gA(p,v,Ti,T)}function gA(p,v,T,R){var O=0,B=p==null?0:p.length;if(B===0)return 0;v=T(v);for(var G=v!==v,K=v===null,Z=Ki(v),ve=v===t;O<B;){var ye=py((O+B)/2),Te=T(p[ye]),Le=Te!==t,je=Te===null,ot=Te===Te,bt=Ki(Te);if(G)var lt=R||ot;else ve?lt=ot&&(R||Le):K?lt=ot&&Le&&(R||!je):Z?lt=ot&&Le&&!je&&(R||!bt):je||bt?lt=!1:lt=R?Te<=v:Te<v;lt?O=ye+1:B=ye}return zn(B,ue)}function iN(p,v){for(var T=-1,R=p.length,O=0,B=[];++T<R;){var G=p[T],K=v?v(G):G;if(!T||!Ws(K,Z)){var Z=K;B[O++]=G===0?0:G}}return B}function sN(p){return typeof p=="number"?p:Ki(p)?Y:+p}function ji(p){if(typeof p=="string")return p;if(mt(p))return yr(p,ji)+"";if(Ki(p))return N3?N3.call(p):"";var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}function Pl(p,v,T){var R=-1,O=ty,B=p.length,G=!0,K=[],Z=K;if(T)G=!1,O=qS;else if(B>=i){var ve=v?null:kae(p);if(ve)return ny(ve);G=!1,O=em,Z=new iu}else Z=v?[]:K;e:for(;++R<B;){var ye=p[R],Te=v?v(ye):ye;if(ye=T||ye!==0?ye:0,G&&Te===Te){for(var Le=Z.length;Le--;)if(Z[Le]===Te)continue e;v&&Z.push(Te),K.push(ye)}else O(Z,Te,T)||(Z!==K&&Z.push(Te),K.push(ye))}return K}function vA(p,v){return v=Ml(v,p),p=LN(p,v),p==null||delete p[wa(gs(v))]}function aN(p,v,T,R){return um(p,v,T(au(p,v)),R)}function Ty(p,v,T,R){for(var O=p.length,B=R?O:-1;(R?B--:++B<O)&&v(p[B],B,p););return T?ms(p,R?0:B,R?B+1:O):ms(p,R?B+1:0,R?O:B)}function oN(p,v){var T=p;return T instanceof Ct&&(T=T.value()),jS(v,function(R,O){return O.func.apply(O.thisArg,$l([R],O.args))},T)}function yA(p,v,T){var R=p.length;if(R<2)return R?Pl(p[0]):[];for(var O=-1,B=he(R);++O<R;)for(var G=p[O],K=-1;++K<R;)K!=O&&(B[O]=om(B[O]||G,p[K],v,T));return Pl(Nn(B,1),v,T)}function lN(p,v,T){for(var R=-1,O=p.length,B=v.length,G={};++R<O;){var K=R<B?v[R]:t;T(G,p[R],K)}return G}function bA(p){return Mr(p)?p:[]}function EA(p){return typeof p=="function"?p:Ti}function Ml(p,v){return mt(p)?p:kA(p,v)?[p]:NN(Wt(p))}var bae=xt;function Nl(p,v,T){var R=p.length;return T=T===t?R:T,!v&&T>=R?p:ms(p,v,T)}var cN=ase||function(p){return Mn.clearTimeout(p)};function uN(p,v){if(v)return p.slice();var T=p.length,R=$3?$3(T):new p.constructor(T);return p.copy(R),R}function xA(p){var v=new p.constructor(p.byteLength);return new cy(v).set(new cy(p)),v}function Eae(p,v){var T=v?xA(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.byteLength)}function xae(p){var v=new p.constructor(p.source,KM.exec(p));return v.lastIndex=p.lastIndex,v}function wae(p){return sm?Zt(sm.call(p)):{}}function dN(p,v){var T=v?xA(p.buffer):p.buffer;return new p.constructor(T,p.byteOffset,p.length)}function hN(p,v){if(p!==v){var T=p!==t,R=p===null,O=p===p,B=Ki(p),G=v!==t,K=v===null,Z=v===v,ve=Ki(v);if(!K&&!ve&&!B&&p>v||B&&G&&Z&&!K&&!ve||R&&G&&Z||!T&&Z||!O)return 1;if(!R&&!B&&!ve&&p<v||ve&&T&&O&&!R&&!B||K&&T&&O||!G&&O||!Z)return-1}return 0}function Tae(p,v,T){for(var R=-1,O=p.criteria,B=v.criteria,G=O.length,K=T.length;++R<G;){var Z=hN(O[R],B[R]);if(Z){if(R>=K)return Z;var ve=T[R];return Z*(ve=="desc"?-1:1)}}return p.index-v.index}function fN(p,v,T,R){for(var O=-1,B=p.length,G=T.length,K=-1,Z=v.length,ve=nn(B-G,0),ye=he(Z+ve),Te=!R;++K<Z;)ye[K]=v[K];for(;++O<G;)(Te||O<B)&&(ye[T[O]]=p[O]);for(;ve--;)ye[K++]=p[O++];return ye}function pN(p,v,T,R){for(var O=-1,B=p.length,G=-1,K=T.length,Z=-1,ve=v.length,ye=nn(B-K,0),Te=he(ye+ve),Le=!R;++O<ye;)Te[O]=p[O];for(var je=O;++Z<ve;)Te[je+Z]=v[Z];for(;++G<K;)(Le||O<B)&&(Te[je+T[G]]=p[O++]);return Te}function Ei(p,v){var T=-1,R=p.length;for(v||(v=he(R));++T<R;)v[T]=p[T];return v}function xa(p,v,T,R){var O=!T;T||(T={});for(var B=-1,G=v.length;++B<G;){var K=v[B],Z=R?R(T[K],p[K],K,T,p):t;Z===t&&(Z=p[K]),O?Lo(T,K,Z):am(T,K,Z)}return T}function Sae(p,v){return xa(p,RA(p),v)}function Aae(p,v){return xa(p,CN(p),v)}function Sy(p,v){return function(T,R){var O=mt(T)?Iie:Kse,B=v?v():{};return O(T,p,st(R,2),B)}}function dh(p){return xt(function(v,T){var R=-1,O=T.length,B=O>1?T[O-1]:t,G=O>2?T[2]:t;for(B=p.length>3&&typeof B=="function"?(O--,B):t,G&&ci(T[0],T[1],G)&&(B=O<3?t:B,O=1),v=Zt(v);++R<O;){var K=T[R];K&&p(v,K,R,B)}return v})}function mN(p,v){return function(T,R){if(T==null)return T;if(!xi(T))return p(T,R);for(var O=T.length,B=v?O:-1,G=Zt(T);(v?B--:++B<O)&&R(G[B],B,G)!==!1;);return T}}function gN(p){return function(v,T,R){for(var O=-1,B=Zt(v),G=R(v),K=G.length;K--;){var Z=G[p?K:++O];if(T(B[Z],Z,B)===!1)break}return v}}function _ae(p,v,T){var R=v&y,O=dm(p);function B(){var G=this&&this!==Mn&&this instanceof B?O:p;return G.apply(R?T:this,arguments)}return B}function vN(p){return function(v){v=Wt(v);var T=ih(v)?Bs(v):t,R=T?T[0]:v.charAt(0),O=T?Nl(T,1).join(""):v.slice(1);return R[p]()+O}}function hh(p){return function(v){return jS(m5(p5(v).replace(gie,"")),p,"")}}function dm(p){return function(){var v=arguments;switch(v.length){case 0:return new p;case 1:return new p(v[0]);case 2:return new p(v[0],v[1]);case 3:return new p(v[0],v[1],v[2]);case 4:return new p(v[0],v[1],v[2],v[3]);case 5:return new p(v[0],v[1],v[2],v[3],v[4]);case 6:return new p(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new p(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var T=uh(p.prototype),R=p.apply(T,v);return Cr(R)?R:T}}function Cae(p,v,T){var R=dm(p);function O(){for(var B=arguments.length,G=he(B),K=B,Z=fh(O);K--;)G[K]=arguments[K];var ve=B<3&&G[0]!==Z&&G[B-1]!==Z?[]:Dl(G,Z);if(B-=ve.length,B<T)return wN(p,v,Ay,O.placeholder,t,G,ve,t,t,T-B);var ye=this&&this!==Mn&&this instanceof O?R:p;return Gi(ye,this,G)}return O}function yN(p){return function(v,T,R){var O=Zt(v);if(!xi(v)){var B=st(T,3);v=vn(v),T=function(K){return B(O[K],K,O)}}var G=p(v,T,R);return G>-1?O[B?v[G]:G]:t}}function bN(p){return Po(function(v){var T=v.length,R=T,O=fs.prototype.thru;for(p&&v.reverse();R--;){var B=v[R];if(typeof B!="function")throw new hs(a);if(O&&!G&&ky(B)=="wrapper")var G=new fs([],!0)}for(R=G?R:T;++R<T;){B=v[R];var K=ky(B),Z=K=="wrapper"?_A(B):t;Z&&IA(Z[0])&&Z[1]==(C|w|S|k)&&!Z[4].length&&Z[9]==1?G=G[ky(Z[0])].apply(G,Z[3]):G=B.length==1&&IA(B)?G[K]():G.thru(B)}return function(){var ve=arguments,ye=ve[0];if(G&&ve.length==1&&mt(ye))return G.plant(ye).value();for(var Te=0,Le=T?v[Te].apply(this,ve):ye;++Te<T;)Le=v[Te].call(this,Le);return Le}})}function Ay(p,v,T,R,O,B,G,K,Z,ve){var ye=v&C,Te=v&y,Le=v&b,je=v&(w|A),ot=v&D,bt=Le?t:dm(p);function lt(){for(var St=arguments.length,It=he(St),zi=St;zi--;)It[zi]=arguments[zi];if(je)var ui=fh(lt),Yi=Bie(It,ui);if(R&&(It=fN(It,R,O,je)),B&&(It=pN(It,B,G,je)),St-=Yi,je&&St<ve){var Nr=Dl(It,ui);return wN(p,v,Ay,lt.placeholder,T,It,Nr,K,Z,ve-St)}var Hs=Te?T:this,Bo=Le?Hs[p]:p;return St=It.length,K?It=Kae(It,K):ot&&St>1&&It.reverse(),ye&&Z<St&&(It.length=Z),this&&this!==Mn&&this instanceof lt&&(Bo=bt||dm(Bo)),Bo.apply(Hs,It)}return lt}function EN(p,v){return function(T,R){return tae(T,p,v(R),{})}}function _y(p,v){return function(T,R){var O;if(T===t&&R===t)return v;if(T!==t&&(O=T),R!==t){if(O===t)return R;typeof T=="string"||typeof R=="string"?(T=ji(T),R=ji(R)):(T=sN(T),R=sN(R)),O=p(T,R)}return O}}function wA(p){return Po(function(v){return v=yr(v,qi(st())),xt(function(T){var R=this;return p(v,function(O){return Gi(O,R,T)})})})}function Cy(p,v){v=v===t?" ":ji(v);var T=v.length;if(T<2)return T?mA(v,p):v;var R=mA(v,fy(p/sh(v)));return ih(v)?Nl(Bs(R),0,p).join(""):R.slice(0,p)}function Rae(p,v,T,R){var O=v&y,B=dm(p);function G(){for(var K=-1,Z=arguments.length,ve=-1,ye=R.length,Te=he(ye+Z),Le=this&&this!==Mn&&this instanceof G?B:p;++ve<ye;)Te[ve]=R[ve];for(;Z--;)Te[ve++]=arguments[++K];return Gi(Le,O?T:this,Te)}return G}function xN(p){return function(v,T,R){return R&&typeof R!="number"&&ci(v,T,R)&&(T=R=t),v=Fo(v),T===t?(T=v,v=0):T=Fo(T),R=R===t?v<T?1:-1:Fo(R),fae(v,T,R,p)}}function Ry(p){return function(v,T){return typeof v=="string"&&typeof T=="string"||(v=vs(v),T=vs(T)),p(v,T)}}function wN(p,v,T,R,O,B,G,K,Z,ve){var ye=v&w,Te=ye?G:t,Le=ye?t:G,je=ye?B:t,ot=ye?t:B;v|=ye?S:_,v&=~(ye?_:S),v&E||(v&=-4);var bt=[p,v,O,je,Te,ot,Le,K,Z,ve],lt=T.apply(t,bt);return IA(p)&&ON(lt,bt),lt.placeholder=R,PN(lt,p,v)}function TA(p){var v=rn[p];return function(T,R){if(T=vs(T),R=R==null?0:zn(yt(R),292),R&&P3(T)){var O=(Wt(T)+"e").split("e"),B=v(O[0]+"e"+(+O[1]+R));return O=(Wt(B)+"e").split("e"),+(O[0]+"e"+(+O[1]-R))}return v(T)}}var kae=lh&&1/ny(new lh([,-0]))[1]==z?function(p){return new lh(p)}:qA;function TN(p){return function(v){var T=Yn(v);return T==Se?JS(v):T==tt?jie(v):Fie(v,p(v))}}function Oo(p,v,T,R,O,B,G,K){var Z=v&b;if(!Z&&typeof p!="function")throw new hs(a);var ve=R?R.length:0;if(ve||(v&=-97,R=O=t),G=G===t?G:nn(yt(G),0),K=K===t?K:yt(K),ve-=O?O.length:0,v&_){var ye=R,Te=O;R=O=t}var Le=Z?t:_A(p),je=[p,v,T,R,O,ye,Te,B,G,K];if(Le&&Gae(je,Le),p=je[0],v=je[1],T=je[2],R=je[3],O=je[4],K=je[9]=je[9]===t?Z?0:p.length:nn(je[9]-ve,0),!K&&v&(w|A)&&(v&=-25),!v||v==y)var ot=_ae(p,v,T);else v==w||v==A?ot=Cae(p,v,K):(v==S||v==(y|S))&&!O.length?ot=Rae(p,v,T,R):ot=Ay.apply(t,je);var bt=Le?nN:ON;return PN(bt(ot,je),p,v)}function SN(p,v,T,R){return p===t||Ws(p,oh[T])&&!Gt.call(R,T)?v:p}function AN(p,v,T,R,O,B){return Cr(p)&&Cr(v)&&(B.set(v,p),xy(p,v,t,AN,B),B.delete(v)),p}function Iae(p){return pm(p)?t:p}function _N(p,v,T,R,O,B){var G=T&m,K=p.length,Z=v.length;if(K!=Z&&!(G&&Z>K))return!1;var ve=B.get(p),ye=B.get(v);if(ve&&ye)return ve==v&&ye==p;var Te=-1,Le=!0,je=T&g?new iu:t;for(B.set(p,v),B.set(v,p);++Te<K;){var ot=p[Te],bt=v[Te];if(R)var lt=G?R(bt,ot,Te,v,p,B):R(ot,bt,Te,p,v,B);if(lt!==t){if(lt)continue;Le=!1;break}if(je){if(!KS(v,function(St,It){if(!em(je,It)&&(ot===St||O(ot,St,T,R,B)))return je.push(It)})){Le=!1;break}}else if(!(ot===bt||O(ot,bt,T,R,B))){Le=!1;break}}return B.delete(p),B.delete(v),Le}function $ae(p,v,T,R,O,B,G){switch(T){case vr:if(p.byteLength!=v.byteLength||p.byteOffset!=v.byteOffset)return!1;p=p.buffer,v=v.buffer;case bi:return!(p.byteLength!=v.byteLength||!B(new cy(p),new cy(v)));case be:case we:case et:return Ws(+p,+v);case Oe:return p.name==v.name&&p.message==v.message;case Hi:case Lr:return p==v+"";case Se:var K=JS;case tt:var Z=R&m;if(K||(K=ny),p.size!=v.size&&!Z)return!1;var ve=G.get(p);if(ve)return ve==v;R|=g,G.set(p,v);var ye=_N(K(p),K(v),R,O,B,G);return G.delete(p),ye;case Fs:if(sm)return sm.call(p)==sm.call(v)}return!1}function Dae(p,v,T,R,O,B){var G=T&m,K=SA(p),Z=K.length,ve=SA(v),ye=ve.length;if(Z!=ye&&!G)return!1;for(var Te=Z;Te--;){var Le=K[Te];if(!(G?Le in v:Gt.call(v,Le)))return!1}var je=B.get(p),ot=B.get(v);if(je&&ot)return je==v&&ot==p;var bt=!0;B.set(p,v),B.set(v,p);for(var lt=G;++Te<Z;){Le=K[Te];var St=p[Le],It=v[Le];if(R)var zi=G?R(It,St,Le,v,p,B):R(St,It,Le,p,v,B);if(!(zi===t?St===It||O(St,It,T,R,B):zi)){bt=!1;break}lt||(lt=Le=="constructor")}if(bt&&!lt){var ui=p.constructor,Yi=v.constructor;ui!=Yi&&"constructor"in p&&"constructor"in v&&!(typeof ui=="function"&&ui instanceof ui&&typeof Yi=="function"&&Yi instanceof Yi)&&(bt=!1)}return B.delete(p),B.delete(v),bt}function Po(p){return DA(DN(p,t,WN),p+"")}function SA(p){return j3(p,vn,RA)}function AA(p){return j3(p,wi,CN)}var _A=my?function(p){return my.get(p)}:qA;function ky(p){for(var v=p.name+"",T=ch[v],R=Gt.call(ch,v)?T.length:0;R--;){var O=T[R],B=O.func;if(B==null||B==p)return O.name}return v}function fh(p){var v=Gt.call(N,"placeholder")?N:p;return v.placeholder}function st(){var p=N.iteratee||VA;return p=p===VA?Y3:p,arguments.length?p(arguments[0],arguments[1]):p}function Iy(p,v){var T=p.__data__;return Uae(v)?T[typeof v=="string"?"string":"hash"]:T.map}function CA(p){for(var v=vn(p),T=v.length;T--;){var R=v[T],O=p[R];v[T]=[R,O,IN(O)]}return v}function ou(p,v){var T=Vie(p,v);return z3(T)?T:t}function Lae(p){var v=Gt.call(p,ru),T=p[ru];try{p[ru]=t;var R=!0}catch{}var O=oy.call(p);return R&&(v?p[ru]=T:delete p[ru]),O}var RA=tA?function(p){return p==null?[]:(p=Zt(p),Il(tA(p),function(v){return L3.call(p,v)}))}:jA,CN=tA?function(p){for(var v=[];p;)$l(v,RA(p)),p=uy(p);return v}:jA,Yn=li;(rA&&Yn(new rA(new ArrayBuffer(1)))!=vr||rm&&Yn(new rm)!=Se||nA&&Yn(nA.resolve())!=Wi||lh&&Yn(new lh)!=tt||nm&&Yn(new nm)!=Vi)&&(Yn=function(p){var v=li(p),T=v==Ut?p.constructor:t,R=T?lu(T):"";if(R)switch(R){case mse:return vr;case gse:return Se;case vse:return Wi;case yse:return tt;case bse:return Vi}return v});function Oae(p,v,T){for(var R=-1,O=T.length;++R<O;){var B=T[R],G=B.size;switch(B.type){case"drop":p+=G;break;case"dropRight":v-=G;break;case"take":v=zn(v,p+G);break;case"takeRight":p=nn(p,v-G);break}}return{start:p,end:v}}function Pae(p){var v=p.match(Wne);return v?v[1].split(Hne):[]}function RN(p,v,T){v=Ml(v,p);for(var R=-1,O=v.length,B=!1;++R<O;){var G=wa(v[R]);if(!(B=p!=null&&T(p,G)))break;p=p[G]}return B||++R!=O?B:(O=p==null?0:p.length,!!O&&Ny(O)&&Mo(G,O)&&(mt(p)||cu(p)))}function Mae(p){var v=p.length,T=new p.constructor(v);return v&&typeof p[0]=="string"&&Gt.call(p,"index")&&(T.index=p.index,T.input=p.input),T}function kN(p){return typeof p.constructor=="function"&&!hm(p)?uh(uy(p)):{}}function Nae(p,v,T){var R=p.constructor;switch(v){case bi:return xA(p);case be:case we:return new R(+p);case vr:return Eae(p,T);case eu:case Ce:case Ne:case vt:case ct:case _t:case Xt:case gn:case ba:return dN(p,T);case Se:return new R;case et:case Lr:return new R(p);case Hi:return xae(p);case tt:return new R;case Fs:return wae(p)}}function Fae(p,v){var T=v.length;if(!T)return p;var R=T-1;return v[R]=(T>1?"& ":"")+v[R],v=v.join(T>2?", ":" "),p.replace(Une,`{
/* [wrapped with `+v+`] */
`)}function Bae(p){return mt(p)||cu(p)||!!(O3&&p&&p[O3])}function Mo(p,v){var T=typeof p;return v=v??Q,!!v&&(T=="number"||T!="symbol"&&Xne.test(p))&&p>-1&&p%1==0&&p<v}function ci(p,v,T){if(!Cr(T))return!1;var R=typeof v;return(R=="number"?xi(T)&&Mo(v,T.length):R=="string"&&v in T)?Ws(T[v],p):!1}function kA(p,v){if(mt(p))return!1;var T=typeof p;return T=="number"||T=="symbol"||T=="boolean"||p==null||Ki(p)?!0:Mne.test(p)||!Pne.test(p)||v!=null&&p in Zt(v)}function Uae(p){var v=typeof p;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?p!=="__proto__":p===null}function IA(p){var v=ky(p),T=N[v];if(typeof T!="function"||!(v in Ct.prototype))return!1;if(p===T)return!0;var R=_A(T);return!!R&&p===R[0]}function Wae(p){return!!I3&&I3 in p}var Hae=sy?No:KA;function hm(p){var v=p&&p.constructor,T=typeof v=="function"&&v.prototype||oh;return p===T}function IN(p){return p===p&&!Cr(p)}function $N(p,v){return function(T){return T==null?!1:T[p]===v&&(v!==t||p in Zt(T))}}function Vae(p){var v=Py(p,function(R){return T.size===c&&T.clear(),R}),T=v.cache;return v}function Gae(p,v){var T=p[1],R=v[1],O=T|R,B=O<(y|b|C),G=R==C&&T==w||R==C&&T==k&&p[7].length<=v[8]||R==(C|k)&&v[7].length<=v[8]&&T==w;if(!(B||G))return p;R&y&&(p[2]=v[2],O|=T&y?0:E);var K=v[3];if(K){var Z=p[3];p[3]=Z?fN(Z,K,v[4]):K,p[4]=Z?Dl(p[3],u):v[4]}return K=v[5],K&&(Z=p[5],p[5]=Z?pN(Z,K,v[6]):K,p[6]=Z?Dl(p[5],u):v[6]),K=v[7],K&&(p[7]=K),R&C&&(p[8]=p[8]==null?v[8]:zn(p[8],v[8])),p[9]==null&&(p[9]=v[9]),p[0]=v[0],p[1]=O,p}function qae(p){var v=[];if(p!=null)for(var T in Zt(p))v.push(T);return v}function jae(p){return oy.call(p)}function DN(p,v,T){return v=nn(v===t?p.length-1:v,0),function(){for(var R=arguments,O=-1,B=nn(R.length-v,0),G=he(B);++O<B;)G[O]=R[v+O];O=-1;for(var K=he(v+1);++O<v;)K[O]=R[O];return K[v]=T(G),Gi(p,this,K)}}function LN(p,v){return v.length<2?p:au(p,ms(v,0,-1))}function Kae(p,v){for(var T=p.length,R=zn(v.length,T),O=Ei(p);R--;){var B=v[R];p[R]=Mo(B,T)?O[B]:t}return p}function $A(p,v){if(!(v==="constructor"&&typeof p[v]=="function")&&v!="__proto__")return p[v]}var ON=MN(nN),fm=lse||function(p,v){return Mn.setTimeout(p,v)},DA=MN(gae);function PN(p,v,T){var R=v+"";return DA(p,Fae(R,zae(Pae(R),T)))}function MN(p){var v=0,T=0;return function(){var R=hse(),O=F-(R-T);if(T=R,O>0){if(++v>=M)return arguments[0]}else v=0;return p.apply(t,arguments)}}function $y(p,v){var T=-1,R=p.length,O=R-1;for(v=v===t?R:v;++T<v;){var B=pA(T,O),G=p[B];p[B]=p[T],p[T]=G}return p.length=v,p}var NN=Vae(function(p){var v=[];return p.charCodeAt(0)===46&&v.push(""),p.replace(Nne,function(T,R,O,B){v.push(O?B.replace(qne,"$1"):R||T)}),v});function wa(p){if(typeof p=="string"||Ki(p))return p;var v=p+"";return v=="0"&&1/p==-1/0?"-0":v}function lu(p){if(p!=null){try{return ay.call(p)}catch{}try{return p+""}catch{}}return""}function zae(p,v){return ds(ge,function(T){var R="_."+T[0];v&T[1]&&!ty(p,R)&&p.push(R)}),p.sort()}function FN(p){if(p instanceof Ct)return p.clone();var v=new fs(p.__wrapped__,p.__chain__);return v.__actions__=Ei(p.__actions__),v.__index__=p.__index__,v.__values__=p.__values__,v}function Yae(p,v,T){(T?ci(p,v,T):v===t)?v=1:v=nn(yt(v),0);var R=p==null?0:p.length;if(!R||v<1)return[];for(var O=0,B=0,G=he(fy(R/v));O<R;)G[B++]=ms(p,O,O+=v);return G}function Qae(p){for(var v=-1,T=p==null?0:p.length,R=0,O=[];++v<T;){var B=p[v];B&&(O[R++]=B)}return O}function Xae(){var p=arguments.length;if(!p)return[];for(var v=he(p-1),T=arguments[0],R=p;R--;)v[R-1]=arguments[R];return $l(mt(T)?Ei(T):[T],Nn(v,1))}var Zae=xt(function(p,v){return Mr(p)?om(p,Nn(v,1,Mr,!0)):[]}),Jae=xt(function(p,v){var T=gs(v);return Mr(T)&&(T=t),Mr(p)?om(p,Nn(v,1,Mr,!0),st(T,2)):[]}),eoe=xt(function(p,v){var T=gs(v);return Mr(T)&&(T=t),Mr(p)?om(p,Nn(v,1,Mr,!0),t,T):[]});function toe(p,v,T){var R=p==null?0:p.length;return R?(v=T||v===t?1:yt(v),ms(p,v<0?0:v,R)):[]}function roe(p,v,T){var R=p==null?0:p.length;return R?(v=T||v===t?1:yt(v),v=R-v,ms(p,0,v<0?0:v)):[]}function noe(p,v){return p&&p.length?Ty(p,st(v,3),!0,!0):[]}function ioe(p,v){return p&&p.length?Ty(p,st(v,3),!0):[]}function soe(p,v,T,R){var O=p==null?0:p.length;return O?(T&&typeof T!="number"&&ci(p,v,T)&&(T=0,R=O),Xse(p,v,T,R)):[]}function BN(p,v,T){var R=p==null?0:p.length;if(!R)return-1;var O=T==null?0:yt(T);return O<0&&(O=nn(R+O,0)),ry(p,st(v,3),O)}function UN(p,v,T){var R=p==null?0:p.length;if(!R)return-1;var O=R-1;return T!==t&&(O=yt(T),O=T<0?nn(R+O,0):zn(O,R-1)),ry(p,st(v,3),O,!0)}function WN(p){var v=p==null?0:p.length;return v?Nn(p,1):[]}function aoe(p){var v=p==null?0:p.length;return v?Nn(p,z):[]}function ooe(p,v){var T=p==null?0:p.length;return T?(v=v===t?1:yt(v),Nn(p,v)):[]}function loe(p){for(var v=-1,T=p==null?0:p.length,R={};++v<T;){var O=p[v];R[O[0]]=O[1]}return R}function HN(p){return p&&p.length?p[0]:t}function coe(p,v,T){var R=p==null?0:p.length;if(!R)return-1;var O=T==null?0:yt(T);return O<0&&(O=nn(R+O,0)),nh(p,v,O)}function uoe(p){var v=p==null?0:p.length;return v?ms(p,0,-1):[]}var doe=xt(function(p){var v=yr(p,bA);return v.length&&v[0]===p[0]?cA(v):[]}),hoe=xt(function(p){var v=gs(p),T=yr(p,bA);return v===gs(T)?v=t:T.pop(),T.length&&T[0]===p[0]?cA(T,st(v,2)):[]}),foe=xt(function(p){var v=gs(p),T=yr(p,bA);return v=typeof v=="function"?v:t,v&&T.pop(),T.length&&T[0]===p[0]?cA(T,t,v):[]});function poe(p,v){return p==null?"":use.call(p,v)}function gs(p){var v=p==null?0:p.length;return v?p[v-1]:t}function moe(p,v,T){var R=p==null?0:p.length;if(!R)return-1;var O=R;return T!==t&&(O=yt(T),O=O<0?nn(R+O,0):zn(O,R-1)),v===v?zie(p,v,O):ry(p,w3,O,!0)}function goe(p,v){return p&&p.length?J3(p,yt(v)):t}var voe=xt(VN);function VN(p,v){return p&&p.length&&v&&v.length?fA(p,v):p}function yoe(p,v,T){return p&&p.length&&v&&v.length?fA(p,v,st(T,2)):p}function boe(p,v,T){return p&&p.length&&v&&v.length?fA(p,v,t,T):p}var Eoe=Po(function(p,v){var T=p==null?0:p.length,R=sA(p,v);return rN(p,yr(v,function(O){return Mo(O,T)?+O:O}).sort(hN)),R});function xoe(p,v){var T=[];if(!(p&&p.length))return T;var R=-1,O=[],B=p.length;for(v=st(v,3);++R<B;){var G=p[R];v(G,R,p)&&(T.push(G),O.push(R))}return rN(p,O),T}function LA(p){return p==null?p:pse.call(p)}function woe(p,v,T){var R=p==null?0:p.length;return R?(T&&typeof T!="number"&&ci(p,v,T)?(v=0,T=R):(v=v==null?0:yt(v),T=T===t?R:yt(T)),ms(p,v,T)):[]}function Toe(p,v){return wy(p,v)}function Soe(p,v,T){return gA(p,v,st(T,2))}function Aoe(p,v){var T=p==null?0:p.length;if(T){var R=wy(p,v);if(R<T&&Ws(p[R],v))return R}return-1}function _oe(p,v){return wy(p,v,!0)}function Coe(p,v,T){return gA(p,v,st(T,2),!0)}function Roe(p,v){var T=p==null?0:p.length;if(T){var R=wy(p,v,!0)-1;if(Ws(p[R],v))return R}return-1}function koe(p){return p&&p.length?iN(p):[]}function Ioe(p,v){return p&&p.length?iN(p,st(v,2)):[]}function $oe(p){var v=p==null?0:p.length;return v?ms(p,1,v):[]}function Doe(p,v,T){return p&&p.length?(v=T||v===t?1:yt(v),ms(p,0,v<0?0:v)):[]}function Loe(p,v,T){var R=p==null?0:p.length;return R?(v=T||v===t?1:yt(v),v=R-v,ms(p,v<0?0:v,R)):[]}function Ooe(p,v){return p&&p.length?Ty(p,st(v,3),!1,!0):[]}function Poe(p,v){return p&&p.length?Ty(p,st(v,3)):[]}var Moe=xt(function(p){return Pl(Nn(p,1,Mr,!0))}),Noe=xt(function(p){var v=gs(p);return Mr(v)&&(v=t),Pl(Nn(p,1,Mr,!0),st(v,2))}),Foe=xt(function(p){var v=gs(p);return v=typeof v=="function"?v:t,Pl(Nn(p,1,Mr,!0),t,v)});function Boe(p){return p&&p.length?Pl(p):[]}function Uoe(p,v){return p&&p.length?Pl(p,st(v,2)):[]}function Woe(p,v){return v=typeof v=="function"?v:t,p&&p.length?Pl(p,t,v):[]}function OA(p){if(!(p&&p.length))return[];var v=0;return p=Il(p,function(T){if(Mr(T))return v=nn(T.length,v),!0}),XS(v,function(T){return yr(p,zS(T))})}function GN(p,v){if(!(p&&p.length))return[];var T=OA(p);return v==null?T:yr(T,function(R){return Gi(v,t,R)})}var Hoe=xt(function(p,v){return Mr(p)?om(p,v):[]}),Voe=xt(function(p){return yA(Il(p,Mr))}),Goe=xt(function(p){var v=gs(p);return Mr(v)&&(v=t),yA(Il(p,Mr),st(v,2))}),qoe=xt(function(p){var v=gs(p);return v=typeof v=="function"?v:t,yA(Il(p,Mr),t,v)}),joe=xt(OA);function Koe(p,v){return lN(p||[],v||[],am)}function zoe(p,v){return lN(p||[],v||[],um)}var Yoe=xt(function(p){var v=p.length,T=v>1?p[v-1]:t;return T=typeof T=="function"?(p.pop(),T):t,GN(p,T)});function qN(p){var v=N(p);return v.__chain__=!0,v}function Qoe(p,v){return v(p),p}function Dy(p,v){return v(p)}var Xoe=Po(function(p){var v=p.length,T=v?p[0]:0,R=this.__wrapped__,O=function(B){return sA(B,p)};return v>1||this.__actions__.length||!(R instanceof Ct)||!Mo(T)?this.thru(O):(R=R.slice(T,+T+(v?1:0)),R.__actions__.push({func:Dy,args:[O],thisArg:t}),new fs(R,this.__chain__).thru(function(B){return v&&!B.length&&B.push(t),B}))});function Zoe(){return qN(this)}function Joe(){return new fs(this.value(),this.__chain__)}function ele(){this.__values__===t&&(this.__values__=s5(this.value()));var p=this.__index__>=this.__values__.length,v=p?t:this.__values__[this.__index__++];return{done:p,value:v}}function tle(){return this}function rle(p){for(var v,T=this;T instanceof vy;){var R=FN(T);R.__index__=0,R.__values__=t,v?O.__wrapped__=R:v=R;var O=R;T=T.__wrapped__}return O.__wrapped__=p,v}function nle(){var p=this.__wrapped__;if(p instanceof Ct){var v=p;return this.__actions__.length&&(v=new Ct(this)),v=v.reverse(),v.__actions__.push({func:Dy,args:[LA],thisArg:t}),new fs(v,this.__chain__)}return this.thru(LA)}function ile(){return oN(this.__wrapped__,this.__actions__)}var sle=Sy(function(p,v,T){Gt.call(p,T)?++p[T]:Lo(p,T,1)});function ale(p,v,T){var R=mt(p)?E3:Qse;return T&&ci(p,v,T)&&(v=t),R(p,st(v,3))}function ole(p,v){var T=mt(p)?Il:G3;return T(p,st(v,3))}var lle=yN(BN),cle=yN(UN);function ule(p,v){return Nn(Ly(p,v),1)}function dle(p,v){return Nn(Ly(p,v),z)}function hle(p,v,T){return T=T===t?1:yt(T),Nn(Ly(p,v),T)}function jN(p,v){var T=mt(p)?ds:Ol;return T(p,st(v,3))}function KN(p,v){var T=mt(p)?$ie:V3;return T(p,st(v,3))}var fle=Sy(function(p,v,T){Gt.call(p,T)?p[T].push(v):Lo(p,T,[v])});function ple(p,v,T,R){p=xi(p)?p:mh(p),T=T&&!R?yt(T):0;var O=p.length;return T<0&&(T=nn(O+T,0)),Fy(p)?T<=O&&p.indexOf(v,T)>-1:!!O&&nh(p,v,T)>-1}var mle=xt(function(p,v,T){var R=-1,O=typeof v=="function",B=xi(p)?he(p.length):[];return Ol(p,function(G){B[++R]=O?Gi(v,G,T):lm(G,v,T)}),B}),gle=Sy(function(p,v,T){Lo(p,T,v)});function Ly(p,v){var T=mt(p)?yr:Q3;return T(p,st(v,3))}function vle(p,v,T,R){return p==null?[]:(mt(v)||(v=v==null?[]:[v]),T=R?t:T,mt(T)||(T=T==null?[]:[T]),eN(p,v,T))}var yle=Sy(function(p,v,T){p[T?0:1].push(v)},function(){return[[],[]]});function ble(p,v,T){var R=mt(p)?jS:S3,O=arguments.length<3;return R(p,st(v,4),T,O,Ol)}function Ele(p,v,T){var R=mt(p)?Die:S3,O=arguments.length<3;return R(p,st(v,4),T,O,V3)}function xle(p,v){var T=mt(p)?Il:G3;return T(p,My(st(v,3)))}function wle(p){var v=mt(p)?B3:pae;return v(p)}function Tle(p,v,T){(T?ci(p,v,T):v===t)?v=1:v=yt(v);var R=mt(p)?qse:mae;return R(p,v)}function Sle(p){var v=mt(p)?jse:vae;return v(p)}function Ale(p){if(p==null)return 0;if(xi(p))return Fy(p)?sh(p):p.length;var v=Yn(p);return v==Se||v==tt?p.size:dA(p).length}function _le(p,v,T){var R=mt(p)?KS:yae;return T&&ci(p,v,T)&&(v=t),R(p,st(v,3))}var Cle=xt(function(p,v){if(p==null)return[];var T=v.length;return T>1&&ci(p,v[0],v[1])?v=[]:T>2&&ci(v[0],v[1],v[2])&&(v=[v[0]]),eN(p,Nn(v,1),[])}),Oy=ose||function(){return Mn.Date.now()};function Rle(p,v){if(typeof v!="function")throw new hs(a);return p=yt(p),function(){if(--p<1)return v.apply(this,arguments)}}function zN(p,v,T){return v=T?t:v,v=p&&v==null?p.length:v,Oo(p,C,t,t,t,t,v)}function YN(p,v){var T;if(typeof v!="function")throw new hs(a);return p=yt(p),function(){return--p>0&&(T=v.apply(this,arguments)),p<=1&&(v=t),T}}var PA=xt(function(p,v,T){var R=y;if(T.length){var O=Dl(T,fh(PA));R|=S}return Oo(p,R,v,T,O)}),QN=xt(function(p,v,T){var R=y|b;if(T.length){var O=Dl(T,fh(QN));R|=S}return Oo(v,R,p,T,O)});function XN(p,v,T){v=T?t:v;var R=Oo(p,w,t,t,t,t,t,v);return R.placeholder=XN.placeholder,R}function ZN(p,v,T){v=T?t:v;var R=Oo(p,A,t,t,t,t,t,v);return R.placeholder=ZN.placeholder,R}function JN(p,v,T){var R,O,B,G,K,Z,ve=0,ye=!1,Te=!1,Le=!0;if(typeof p!="function")throw new hs(a);v=vs(v)||0,Cr(T)&&(ye=!!T.leading,Te="maxWait"in T,B=Te?nn(vs(T.maxWait)||0,v):B,Le="trailing"in T?!!T.trailing:Le);function je(Nr){var Hs=R,Bo=O;return R=O=t,ve=Nr,G=p.apply(Bo,Hs),G}function ot(Nr){return ve=Nr,K=fm(St,v),ye?je(Nr):G}function bt(Nr){var Hs=Nr-Z,Bo=Nr-ve,y5=v-Hs;return Te?zn(y5,B-Bo):y5}function lt(Nr){var Hs=Nr-Z,Bo=Nr-ve;return Z===t||Hs>=v||Hs<0||Te&&Bo>=B}function St(){var Nr=Oy();if(lt(Nr))return It(Nr);K=fm(St,bt(Nr))}function It(Nr){return K=t,Le&&R?je(Nr):(R=O=t,G)}function zi(){K!==t&&cN(K),ve=0,R=Z=O=K=t}function ui(){return K===t?G:It(Oy())}function Yi(){var Nr=Oy(),Hs=lt(Nr);if(R=arguments,O=this,Z=Nr,Hs){if(K===t)return ot(Z);if(Te)return cN(K),K=fm(St,v),je(Z)}return K===t&&(K=fm(St,v)),G}return Yi.cancel=zi,Yi.flush=ui,Yi}var kle=xt(function(p,v){return H3(p,1,v)}),Ile=xt(function(p,v,T){return H3(p,vs(v)||0,T)});function $le(p){return Oo(p,D)}function Py(p,v){if(typeof p!="function"||v!=null&&typeof v!="function")throw new hs(a);var T=function(){var R=arguments,O=v?v.apply(this,R):R[0],B=T.cache;if(B.has(O))return B.get(O);var G=p.apply(this,R);return T.cache=B.set(O,G)||B,G};return T.cache=new(Py.Cache||Do),T}Py.Cache=Do;function My(p){if(typeof p!="function")throw new hs(a);return function(){var v=arguments;switch(v.length){case 0:return!p.call(this);case 1:return!p.call(this,v[0]);case 2:return!p.call(this,v[0],v[1]);case 3:return!p.call(this,v[0],v[1],v[2])}return!p.apply(this,v)}}function Dle(p){return YN(2,p)}var Lle=bae(function(p,v){v=v.length==1&&mt(v[0])?yr(v[0],qi(st())):yr(Nn(v,1),qi(st()));var T=v.length;return xt(function(R){for(var O=-1,B=zn(R.length,T);++O<B;)R[O]=v[O].call(this,R[O]);return Gi(p,this,R)})}),MA=xt(function(p,v){var T=Dl(v,fh(MA));return Oo(p,S,t,v,T)}),e5=xt(function(p,v){var T=Dl(v,fh(e5));return Oo(p,_,t,v,T)}),Ole=Po(function(p,v){return Oo(p,k,t,t,t,v)});function Ple(p,v){if(typeof p!="function")throw new hs(a);return v=v===t?v:yt(v),xt(p,v)}function Mle(p,v){if(typeof p!="function")throw new hs(a);return v=v==null?0:nn(yt(v),0),xt(function(T){var R=T[v],O=Nl(T,0,v);return R&&$l(O,R),Gi(p,this,O)})}function Nle(p,v,T){var R=!0,O=!0;if(typeof p!="function")throw new hs(a);return Cr(T)&&(R="leading"in T?!!T.leading:R,O="trailing"in T?!!T.trailing:O),JN(p,v,{leading:R,maxWait:v,trailing:O})}function Fle(p){return zN(p,1)}function Ble(p,v){return MA(EA(v),p)}function Ule(){if(!arguments.length)return[];var p=arguments[0];return mt(p)?p:[p]}function Wle(p){return ps(p,f)}function Hle(p,v){return v=typeof v=="function"?v:t,ps(p,f,v)}function Vle(p){return ps(p,d|f)}function Gle(p,v){return v=typeof v=="function"?v:t,ps(p,d|f,v)}function qle(p,v){return v==null||W3(p,v,vn(v))}function Ws(p,v){return p===v||p!==p&&v!==v}var jle=Ry(lA),Kle=Ry(function(p,v){return p>=v}),cu=K3(function(){return arguments}())?K3:function(p){return Or(p)&&Gt.call(p,"callee")&&!L3.call(p,"callee")},mt=he.isArray,zle=p3?qi(p3):rae;function xi(p){return p!=null&&Ny(p.length)&&!No(p)}function Mr(p){return Or(p)&&xi(p)}function Yle(p){return p===!0||p===!1||Or(p)&&li(p)==be}var Fl=cse||KA,Qle=m3?qi(m3):nae;function Xle(p){return Or(p)&&p.nodeType===1&&!pm(p)}function Zle(p){if(p==null)return!0;if(xi(p)&&(mt(p)||typeof p=="string"||typeof p.splice=="function"||Fl(p)||ph(p)||cu(p)))return!p.length;var v=Yn(p);if(v==Se||v==tt)return!p.size;if(hm(p))return!dA(p).length;for(var T in p)if(Gt.call(p,T))return!1;return!0}function Jle(p,v){return cm(p,v)}function ece(p,v,T){T=typeof T=="function"?T:t;var R=T?T(p,v):t;return R===t?cm(p,v,t,T):!!R}function NA(p){if(!Or(p))return!1;var v=li(p);return v==Oe||v==Re||typeof p.message=="string"&&typeof p.name=="string"&&!pm(p)}function tce(p){return typeof p=="number"&&P3(p)}function No(p){if(!Cr(p))return!1;var v=li(p);return v==me||v==Ue||v==ee||v==ya}function t5(p){return typeof p=="number"&&p==yt(p)}function Ny(p){return typeof p=="number"&&p>-1&&p%1==0&&p<=Q}function Cr(p){var v=typeof p;return p!=null&&(v=="object"||v=="function")}function Or(p){return p!=null&&typeof p=="object"}var r5=g3?qi(g3):sae;function rce(p,v){return p===v||uA(p,v,CA(v))}function nce(p,v,T){return T=typeof T=="function"?T:t,uA(p,v,CA(v),T)}function ice(p){return n5(p)&&p!=+p}function sce(p){if(Hae(p))throw new ht(s);return z3(p)}function ace(p){return p===null}function oce(p){return p==null}function n5(p){return typeof p=="number"||Or(p)&&li(p)==et}function pm(p){if(!Or(p)||li(p)!=Ut)return!1;var v=uy(p);if(v===null)return!0;var T=Gt.call(v,"constructor")&&v.constructor;return typeof T=="function"&&T instanceof T&&ay.call(T)==nse}var FA=v3?qi(v3):aae;function lce(p){return t5(p)&&p>=-9007199254740991&&p<=Q}var i5=y3?qi(y3):oae;function Fy(p){return typeof p=="string"||!mt(p)&&Or(p)&&li(p)==Lr}function Ki(p){return typeof p=="symbol"||Or(p)&&li(p)==Fs}var ph=b3?qi(b3):lae;function cce(p){return p===t}function uce(p){return Or(p)&&Yn(p)==Vi}function dce(p){return Or(p)&&li(p)==Io}var hce=Ry(hA),fce=Ry(function(p,v){return p<=v});function s5(p){if(!p)return[];if(xi(p))return Fy(p)?Bs(p):Ei(p);if(tm&&p[tm])return qie(p[tm]());var v=Yn(p),T=v==Se?JS:v==tt?ny:mh;return T(p)}function Fo(p){if(!p)return p===0?p:0;if(p=vs(p),p===z||p===-1/0){var v=p<0?-1:1;return v*V}return p===p?p:0}function yt(p){var v=Fo(p),T=v%1;return v===v?T?v-T:v:0}function a5(p){return p?su(yt(p),0,J):0}function vs(p){if(typeof p=="number")return p;if(Ki(p))return Y;if(Cr(p)){var v=typeof p.valueOf=="function"?p.valueOf():p;p=Cr(v)?v+"":v}if(typeof p!="string")return p===0?p:+p;p=A3(p);var T=zne.test(p);return T||Qne.test(p)?Rie(p.slice(2),T?2:8):Kne.test(p)?Y:+p}function o5(p){return xa(p,wi(p))}function pce(p){return p?su(yt(p),-9007199254740991,Q):p===0?p:0}function Wt(p){return p==null?"":ji(p)}var mce=dh(function(p,v){if(hm(v)||xi(v)){xa(v,vn(v),p);return}for(var T in v)Gt.call(v,T)&&am(p,T,v[T])}),l5=dh(function(p,v){xa(v,wi(v),p)}),By=dh(function(p,v,T,R){xa(v,wi(v),p,R)}),gce=dh(function(p,v,T,R){xa(v,vn(v),p,R)}),vce=Po(sA);function yce(p,v){var T=uh(p);return v==null?T:U3(T,v)}var bce=xt(function(p,v){p=Zt(p);var T=-1,R=v.length,O=R>2?v[2]:t;for(O&&ci(v[0],v[1],O)&&(R=1);++T<R;)for(var B=v[T],G=wi(B),K=-1,Z=G.length;++K<Z;){var ve=G[K],ye=p[ve];(ye===t||Ws(ye,oh[ve])&&!Gt.call(p,ve))&&(p[ve]=B[ve])}return p}),Ece=xt(function(p){return p.push(t,AN),Gi(c5,t,p)});function xce(p,v){return x3(p,st(v,3),Ea)}function wce(p,v){return x3(p,st(v,3),oA)}function Tce(p,v){return p==null?p:aA(p,st(v,3),wi)}function Sce(p,v){return p==null?p:q3(p,st(v,3),wi)}function Ace(p,v){return p&&Ea(p,st(v,3))}function _ce(p,v){return p&&oA(p,st(v,3))}function Cce(p){return p==null?[]:Ey(p,vn(p))}function Rce(p){return p==null?[]:Ey(p,wi(p))}function BA(p,v,T){var R=p==null?t:au(p,v);return R===t?T:R}function kce(p,v){return p!=null&&RN(p,v,Zse)}function UA(p,v){return p!=null&&RN(p,v,Jse)}var Ice=EN(function(p,v,T){v!=null&&typeof v.toString!="function"&&(v=oy.call(v)),p[v]=T},HA(Ti)),$ce=EN(function(p,v,T){v!=null&&typeof v.toString!="function"&&(v=oy.call(v)),Gt.call(p,v)?p[v].push(T):p[v]=[T]},st),Dce=xt(lm);function vn(p){return xi(p)?F3(p):dA(p)}function wi(p){return xi(p)?F3(p,!0):cae(p)}function Lce(p,v){var T={};return v=st(v,3),Ea(p,function(R,O,B){Lo(T,v(R,O,B),R)}),T}function Oce(p,v){var T={};return v=st(v,3),Ea(p,function(R,O,B){Lo(T,O,v(R,O,B))}),T}var Pce=dh(function(p,v,T){xy(p,v,T)}),c5=dh(function(p,v,T,R){xy(p,v,T,R)}),Mce=Po(function(p,v){var T={};if(p==null)return T;var R=!1;v=yr(v,function(B){return B=Ml(B,p),R||(R=B.length>1),B}),xa(p,AA(p),T),R&&(T=ps(T,d|h|f,Iae));for(var O=v.length;O--;)vA(T,v[O]);return T});function Nce(p,v){return u5(p,My(st(v)))}var Fce=Po(function(p,v){return p==null?{}:dae(p,v)});function u5(p,v){if(p==null)return{};var T=yr(AA(p),function(R){return[R]});return v=st(v),tN(p,T,function(R,O){return v(R,O[0])})}function Bce(p,v,T){v=Ml(v,p);var R=-1,O=v.length;for(O||(O=1,p=t);++R<O;){var B=p==null?t:p[wa(v[R])];B===t&&(R=O,B=T),p=No(B)?B.call(p):B}return p}function Uce(p,v,T){return p==null?p:um(p,v,T)}function Wce(p,v,T,R){return R=typeof R=="function"?R:t,p==null?p:um(p,v,T,R)}var d5=TN(vn),h5=TN(wi);function Hce(p,v,T){var R=mt(p),O=R||Fl(p)||ph(p);if(v=st(v,4),T==null){var B=p&&p.constructor;O?T=R?new B:[]:Cr(p)?T=No(B)?uh(uy(p)):{}:T={}}return(O?ds:Ea)(p,function(G,K,Z){return v(T,G,K,Z)}),T}function Vce(p,v){return p==null?!0:vA(p,v)}function Gce(p,v,T){return p==null?p:aN(p,v,EA(T))}function qce(p,v,T,R){return R=typeof R=="function"?R:t,p==null?p:aN(p,v,EA(T),R)}function mh(p){return p==null?[]:ZS(p,vn(p))}function jce(p){return p==null?[]:ZS(p,wi(p))}function Kce(p,v,T){return T===t&&(T=v,v=t),T!==t&&(T=vs(T),T=T===T?T:0),v!==t&&(v=vs(v),v=v===v?v:0),su(vs(p),v,T)}function zce(p,v,T){return v=Fo(v),T===t?(T=v,v=0):T=Fo(T),p=vs(p),eae(p,v,T)}function Yce(p,v,T){if(T&&typeof T!="boolean"&&ci(p,v,T)&&(v=T=t),T===t&&(typeof v=="boolean"?(T=v,v=t):typeof p=="boolean"&&(T=p,p=t)),p===t&&v===t?(p=0,v=1):(p=Fo(p),v===t?(v=p,p=0):v=Fo(v)),p>v){var R=p;p=v,v=R}if(T||p%1||v%1){var O=M3();return zn(p+O*(v-p+Cie("1e-"+((O+"").length-1))),v)}return pA(p,v)}var Qce=hh(function(p,v,T){return v=v.toLowerCase(),p+(T?f5(v):v)});function f5(p){return WA(Wt(p).toLowerCase())}function p5(p){return p=Wt(p),p&&p.replace(Zne,Uie).replace(vie,"")}function Xce(p,v,T){p=Wt(p),v=ji(v);var R=p.length;T=T===t?R:su(yt(T),0,R);var O=T;return T-=v.length,T>=0&&p.slice(T,O)==v}function Zce(p){return p=Wt(p),p&&Dne.test(p)?p.replace(qM,Wie):p}function Jce(p){return p=Wt(p),p&&Fne.test(p)?p.replace(MS,"\\$&"):p}var eue=hh(function(p,v,T){return p+(T?"-":"")+v.toLowerCase()}),tue=hh(function(p,v,T){return p+(T?" ":"")+v.toLowerCase()}),rue=vN("toLowerCase");function nue(p,v,T){p=Wt(p),v=yt(v);var R=v?sh(p):0;if(!v||R>=v)return p;var O=(v-R)/2;return Cy(py(O),T)+p+Cy(fy(O),T)}function iue(p,v,T){p=Wt(p),v=yt(v);var R=v?sh(p):0;return v&&R<v?p+Cy(v-R,T):p}function sue(p,v,T){p=Wt(p),v=yt(v);var R=v?sh(p):0;return v&&R<v?Cy(v-R,T)+p:p}function aue(p,v,T){return T||v==null?v=0:v&&(v=+v),fse(Wt(p).replace(NS,""),v||0)}function oue(p,v,T){return(T?ci(p,v,T):v===t)?v=1:v=yt(v),mA(Wt(p),v)}function lue(){var p=arguments,v=Wt(p[0]);return p.length<3?v:v.replace(p[1],p[2])}var cue=hh(function(p,v,T){return p+(T?"_":"")+v.toLowerCase()});function uue(p,v,T){return T&&typeof T!="number"&&ci(p,v,T)&&(v=T=t),T=T===t?J:T>>>0,T?(p=Wt(p),p&&(typeof v=="string"||v!=null&&!FA(v))&&(v=ji(v),!v&&ih(p))?Nl(Bs(p),0,T):p.split(v,T)):[]}var due=hh(function(p,v,T){return p+(T?" ":"")+WA(v)});function hue(p,v,T){return p=Wt(p),T=T==null?0:su(yt(T),0,p.length),v=ji(v),p.slice(T,T+v.length)==v}function fue(p,v,T){var R=N.templateSettings;T&&ci(p,v,T)&&(v=t),p=Wt(p),v=By({},v,R,SN);var O=By({},v.imports,R.imports,SN),B=vn(O),G=ZS(O,B),K,Z,ve=0,ye=v.interpolate||Zv,Te="__p += '",Le=eA((v.escape||Zv).source+"|"+ye.source+"|"+(ye===jM?jne:Zv).source+"|"+(v.evaluate||Zv).source+"|$","g"),je="//# sourceURL="+(Gt.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++wie+"]")+`
`;p.replace(Le,function(lt,St,It,zi,ui,Yi){return It||(It=zi),Te+=p.slice(ve,Yi).replace(Jne,Hie),St&&(K=!0,Te+=`' +
__e(`+St+`) +
'`),ui&&(Z=!0,Te+=`';
`+ui+`;
__p += '`),It&&(Te+=`' +
((__t = (`+It+`)) == null ? '' : __t) +
'`),ve=Yi+lt.length,lt}),Te+=`';
`;var ot=Gt.call(v,"variable")&&v.variable;if(!ot)Te=`with (obj) {
`+Te+`
}
`;else if(Gne.test(ot))throw new ht(o);Te=(Z?Te.replace(Kn,""):Te).replace(th,"$1").replace(Ine,"$1;"),Te="function("+(ot||"obj")+`) {
`+(ot?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(K?", __e = _.escape":"")+(Z?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Te+`return __p
}`;var bt=g5(function(){return Nt(B,je+"return "+Te).apply(t,G)});if(bt.source=Te,NA(bt))throw bt;return bt}function pue(p){return Wt(p).toLowerCase()}function mue(p){return Wt(p).toUpperCase()}function gue(p,v,T){if(p=Wt(p),p&&(T||v===t))return A3(p);if(!p||!(v=ji(v)))return p;var R=Bs(p),O=Bs(v),B=_3(R,O),G=C3(R,O)+1;return Nl(R,B,G).join("")}function vue(p,v,T){if(p=Wt(p),p&&(T||v===t))return p.slice(0,k3(p)+1);if(!p||!(v=ji(v)))return p;var R=Bs(p),O=C3(R,Bs(v))+1;return Nl(R,0,O).join("")}function yue(p,v,T){if(p=Wt(p),p&&(T||v===t))return p.replace(NS,"");if(!p||!(v=ji(v)))return p;var R=Bs(p),O=_3(R,Bs(v));return Nl(R,O).join("")}function bue(p,v){var T=I,R=L;if(Cr(v)){var O="separator"in v?v.separator:O;T="length"in v?yt(v.length):T,R="omission"in v?ji(v.omission):R}p=Wt(p);var B=p.length;if(ih(p)){var G=Bs(p);B=G.length}if(T>=B)return p;var K=T-sh(R);if(K<1)return R;var Z=G?Nl(G,0,K).join(""):p.slice(0,K);if(O===t)return Z+R;if(G&&(K+=Z.length-K),FA(O)){if(p.slice(K).search(O)){var ve,ye=Z;for(O.global||(O=eA(O.source,Wt(KM.exec(O))+"g")),O.lastIndex=0;ve=O.exec(ye);)var Te=ve.index;Z=Z.slice(0,Te===t?K:Te)}}else if(p.indexOf(ji(O),K)!=K){var Le=Z.lastIndexOf(O);Le>-1&&(Z=Z.slice(0,Le))}return Z+R}function Eue(p){return p=Wt(p),p&&$ne.test(p)?p.replace(GM,Yie):p}var xue=hh(function(p,v,T){return p+(T?" ":"")+v.toUpperCase()}),WA=vN("toUpperCase");function m5(p,v,T){return p=Wt(p),v=T?t:v,v===t?Gie(p)?Zie(p):Pie(p):p.match(v)||[]}var g5=xt(function(p,v){try{return Gi(p,t,v)}catch(T){return NA(T)?T:new ht(T)}}),wue=Po(function(p,v){return ds(v,function(T){T=wa(T),Lo(p,T,PA(p[T],p))}),p});function Tue(p){var v=p==null?0:p.length,T=st();return p=v?yr(p,function(R){if(typeof R[1]!="function")throw new hs(a);return[T(R[0]),R[1]]}):[],xt(function(R){for(var O=-1;++O<v;){var B=p[O];if(Gi(B[0],this,R))return Gi(B[1],this,R)}})}function Sue(p){return Yse(ps(p,d))}function HA(p){return function(){return p}}function Aue(p,v){return p==null||p!==p?v:p}var _ue=bN(),Cue=bN(!0);function Ti(p){return p}function VA(p){return Y3(typeof p=="function"?p:ps(p,d))}function Rue(p){return X3(ps(p,d))}function kue(p,v){return Z3(p,ps(v,d))}var Iue=xt(function(p,v){return function(T){return lm(T,p,v)}}),$ue=xt(function(p,v){return function(T){return lm(p,T,v)}});function GA(p,v,T){var R=vn(v),O=Ey(v,R);T==null&&!(Cr(v)&&(O.length||!R.length))&&(T=v,v=p,p=this,O=Ey(v,vn(v)));var B=!(Cr(T)&&"chain"in T)||!!T.chain,G=No(p);return ds(O,function(K){var Z=v[K];p[K]=Z,G&&(p.prototype[K]=function(){var ve=this.__chain__;if(B||ve){var ye=p(this.__wrapped__),Te=ye.__actions__=Ei(this.__actions__);return Te.push({func:Z,args:arguments,thisArg:p}),ye.__chain__=ve,ye}return Z.apply(p,$l([this.value()],arguments))})}),p}function Due(){return Mn._===this&&(Mn._=ise),this}function qA(){}function Lue(p){return p=yt(p),xt(function(v){return J3(v,p)})}var Oue=wA(yr),Pue=wA(E3),Mue=wA(KS);function v5(p){return kA(p)?zS(wa(p)):hae(p)}function Nue(p){return function(v){return p==null?t:au(p,v)}}var Fue=xN(),Bue=xN(!0);function jA(){return[]}function KA(){return!1}function Uue(){return{}}function Wue(){return""}function Hue(){return!0}function Vue(p,v){if(p=yt(p),p<1||p>Q)return[];var T=J,R=zn(p,J);v=st(v),p-=J;for(var O=XS(R,v);++T<p;)v(T);return O}function Gue(p){return mt(p)?yr(p,wa):Ki(p)?[p]:Ei(NN(Wt(p)))}function que(p){var v=++rse;return Wt(p)+v}var jue=_y(function(p,v){return p+v},0),Kue=TA("ceil"),zue=_y(function(p,v){return p/v},1),Yue=TA("floor");function Que(p){return p&&p.length?by(p,Ti,lA):t}function Xue(p,v){return p&&p.length?by(p,st(v,2),lA):t}function Zue(p){return T3(p,Ti)}function Jue(p,v){return T3(p,st(v,2))}function ede(p){return p&&p.length?by(p,Ti,hA):t}function tde(p,v){return p&&p.length?by(p,st(v,2),hA):t}var rde=_y(function(p,v){return p*v},1),nde=TA("round"),ide=_y(function(p,v){return p-v},0);function sde(p){return p&&p.length?QS(p,Ti):0}function ade(p,v){return p&&p.length?QS(p,st(v,2)):0}return N.after=Rle,N.ary=zN,N.assign=mce,N.assignIn=l5,N.assignInWith=By,N.assignWith=gce,N.at=vce,N.before=YN,N.bind=PA,N.bindAll=wue,N.bindKey=QN,N.castArray=Ule,N.chain=qN,N.chunk=Yae,N.compact=Qae,N.concat=Xae,N.cond=Tue,N.conforms=Sue,N.constant=HA,N.countBy=sle,N.create=yce,N.curry=XN,N.curryRight=ZN,N.debounce=JN,N.defaults=bce,N.defaultsDeep=Ece,N.defer=kle,N.delay=Ile,N.difference=Zae,N.differenceBy=Jae,N.differenceWith=eoe,N.drop=toe,N.dropRight=roe,N.dropRightWhile=noe,N.dropWhile=ioe,N.fill=soe,N.filter=ole,N.flatMap=ule,N.flatMapDeep=dle,N.flatMapDepth=hle,N.flatten=WN,N.flattenDeep=aoe,N.flattenDepth=ooe,N.flip=$le,N.flow=_ue,N.flowRight=Cue,N.fromPairs=loe,N.functions=Cce,N.functionsIn=Rce,N.groupBy=fle,N.initial=uoe,N.intersection=doe,N.intersectionBy=hoe,N.intersectionWith=foe,N.invert=Ice,N.invertBy=$ce,N.invokeMap=mle,N.iteratee=VA,N.keyBy=gle,N.keys=vn,N.keysIn=wi,N.map=Ly,N.mapKeys=Lce,N.mapValues=Oce,N.matches=Rue,N.matchesProperty=kue,N.memoize=Py,N.merge=Pce,N.mergeWith=c5,N.method=Iue,N.methodOf=$ue,N.mixin=GA,N.negate=My,N.nthArg=Lue,N.omit=Mce,N.omitBy=Nce,N.once=Dle,N.orderBy=vle,N.over=Oue,N.overArgs=Lle,N.overEvery=Pue,N.overSome=Mue,N.partial=MA,N.partialRight=e5,N.partition=yle,N.pick=Fce,N.pickBy=u5,N.property=v5,N.propertyOf=Nue,N.pull=voe,N.pullAll=VN,N.pullAllBy=yoe,N.pullAllWith=boe,N.pullAt=Eoe,N.range=Fue,N.rangeRight=Bue,N.rearg=Ole,N.reject=xle,N.remove=xoe,N.rest=Ple,N.reverse=LA,N.sampleSize=Tle,N.set=Uce,N.setWith=Wce,N.shuffle=Sle,N.slice=woe,N.sortBy=Cle,N.sortedUniq=koe,N.sortedUniqBy=Ioe,N.split=uue,N.spread=Mle,N.tail=$oe,N.take=Doe,N.takeRight=Loe,N.takeRightWhile=Ooe,N.takeWhile=Poe,N.tap=Qoe,N.throttle=Nle,N.thru=Dy,N.toArray=s5,N.toPairs=d5,N.toPairsIn=h5,N.toPath=Gue,N.toPlainObject=o5,N.transform=Hce,N.unary=Fle,N.union=Moe,N.unionBy=Noe,N.unionWith=Foe,N.uniq=Boe,N.uniqBy=Uoe,N.uniqWith=Woe,N.unset=Vce,N.unzip=OA,N.unzipWith=GN,N.update=Gce,N.updateWith=qce,N.values=mh,N.valuesIn=jce,N.without=Hoe,N.words=m5,N.wrap=Ble,N.xor=Voe,N.xorBy=Goe,N.xorWith=qoe,N.zip=joe,N.zipObject=Koe,N.zipObjectDeep=zoe,N.zipWith=Yoe,N.entries=d5,N.entriesIn=h5,N.extend=l5,N.extendWith=By,GA(N,N),N.add=jue,N.attempt=g5,N.camelCase=Qce,N.capitalize=f5,N.ceil=Kue,N.clamp=Kce,N.clone=Wle,N.cloneDeep=Vle,N.cloneDeepWith=Gle,N.cloneWith=Hle,N.conformsTo=qle,N.deburr=p5,N.defaultTo=Aue,N.divide=zue,N.endsWith=Xce,N.eq=Ws,N.escape=Zce,N.escapeRegExp=Jce,N.every=ale,N.find=lle,N.findIndex=BN,N.findKey=xce,N.findLast=cle,N.findLastIndex=UN,N.findLastKey=wce,N.floor=Yue,N.forEach=jN,N.forEachRight=KN,N.forIn=Tce,N.forInRight=Sce,N.forOwn=Ace,N.forOwnRight=_ce,N.get=BA,N.gt=jle,N.gte=Kle,N.has=kce,N.hasIn=UA,N.head=HN,N.identity=Ti,N.includes=ple,N.indexOf=coe,N.inRange=zce,N.invoke=Dce,N.isArguments=cu,N.isArray=mt,N.isArrayBuffer=zle,N.isArrayLike=xi,N.isArrayLikeObject=Mr,N.isBoolean=Yle,N.isBuffer=Fl,N.isDate=Qle,N.isElement=Xle,N.isEmpty=Zle,N.isEqual=Jle,N.isEqualWith=ece,N.isError=NA,N.isFinite=tce,N.isFunction=No,N.isInteger=t5,N.isLength=Ny,N.isMap=r5,N.isMatch=rce,N.isMatchWith=nce,N.isNaN=ice,N.isNative=sce,N.isNil=oce,N.isNull=ace,N.isNumber=n5,N.isObject=Cr,N.isObjectLike=Or,N.isPlainObject=pm,N.isRegExp=FA,N.isSafeInteger=lce,N.isSet=i5,N.isString=Fy,N.isSymbol=Ki,N.isTypedArray=ph,N.isUndefined=cce,N.isWeakMap=uce,N.isWeakSet=dce,N.join=poe,N.kebabCase=eue,N.last=gs,N.lastIndexOf=moe,N.lowerCase=tue,N.lowerFirst=rue,N.lt=hce,N.lte=fce,N.max=Que,N.maxBy=Xue,N.mean=Zue,N.meanBy=Jue,N.min=ede,N.minBy=tde,N.stubArray=jA,N.stubFalse=KA,N.stubObject=Uue,N.stubString=Wue,N.stubTrue=Hue,N.multiply=rde,N.nth=goe,N.noConflict=Due,N.noop=qA,N.now=Oy,N.pad=nue,N.padEnd=iue,N.padStart=sue,N.parseInt=aue,N.random=Yce,N.reduce=ble,N.reduceRight=Ele,N.repeat=oue,N.replace=lue,N.result=Bce,N.round=nde,N.runInContext=X,N.sample=wle,N.size=Ale,N.snakeCase=cue,N.some=_le,N.sortedIndex=Toe,N.sortedIndexBy=Soe,N.sortedIndexOf=Aoe,N.sortedLastIndex=_oe,N.sortedLastIndexBy=Coe,N.sortedLastIndexOf=Roe,N.startCase=due,N.startsWith=hue,N.subtract=ide,N.sum=sde,N.sumBy=ade,N.template=fue,N.times=Vue,N.toFinite=Fo,N.toInteger=yt,N.toLength=a5,N.toLower=pue,N.toNumber=vs,N.toSafeInteger=pce,N.toString=Wt,N.toUpper=mue,N.trim=gue,N.trimEnd=vue,N.trimStart=yue,N.truncate=bue,N.unescape=Eue,N.uniqueId=que,N.upperCase=xue,N.upperFirst=WA,N.each=jN,N.eachRight=KN,N.first=HN,GA(N,function(){var p={};return Ea(N,function(v,T){Gt.call(N.prototype,T)||(p[T]=v)}),p}(),{chain:!1}),N.VERSION=n,ds(["bind","bindKey","curry","curryRight","partial","partialRight"],function(p){N[p].placeholder=N}),ds(["drop","take"],function(p,v){Ct.prototype[p]=function(T){T=T===t?1:nn(yt(T),0);var R=this.__filtered__&&!v?new Ct(this):this.clone();return R.__filtered__?R.__takeCount__=zn(T,R.__takeCount__):R.__views__.push({size:zn(T,J),type:p+(R.__dir__<0?"Right":"")}),R},Ct.prototype[p+"Right"]=function(T){return this.reverse()[p](T).reverse()}}),ds(["filter","map","takeWhile"],function(p,v){var T=v+1,R=T==U||T==j;Ct.prototype[p]=function(O){var B=this.clone();return B.__iteratees__.push({iteratee:st(O,3),type:T}),B.__filtered__=B.__filtered__||R,B}}),ds(["head","last"],function(p,v){var T="take"+(v?"Right":"");Ct.prototype[p]=function(){return this[T](1).value()[0]}}),ds(["initial","tail"],function(p,v){var T="drop"+(v?"":"Right");Ct.prototype[p]=function(){return this.__filtered__?new Ct(this):this[T](1)}}),Ct.prototype.compact=function(){return this.filter(Ti)},Ct.prototype.find=function(p){return this.filter(p).head()},Ct.prototype.findLast=function(p){return this.reverse().find(p)},Ct.prototype.invokeMap=xt(function(p,v){return typeof p=="function"?new Ct(this):this.map(function(T){return lm(T,p,v)})}),Ct.prototype.reject=function(p){return this.filter(My(st(p)))},Ct.prototype.slice=function(p,v){p=yt(p);var T=this;return T.__filtered__&&(p>0||v<0)?new Ct(T):(p<0?T=T.takeRight(-p):p&&(T=T.drop(p)),v!==t&&(v=yt(v),T=v<0?T.dropRight(-v):T.take(v-p)),T)},Ct.prototype.takeRightWhile=function(p){return this.reverse().takeWhile(p).reverse()},Ct.prototype.toArray=function(){return this.take(J)},Ea(Ct.prototype,function(p,v){var T=/^(?:filter|find|map|reject)|While$/.test(v),R=/^(?:head|last)$/.test(v),O=N[R?"take"+(v=="last"?"Right":""):v],B=R||/^find/.test(v);O&&(N.prototype[v]=function(){var G=this.__wrapped__,K=R?[1]:arguments,Z=G instanceof Ct,ve=K[0],ye=Z||mt(G),Te=function(St){var It=O.apply(N,$l([St],K));return R&&Le?It[0]:It};ye&&T&&typeof ve=="function"&&ve.length!=1&&(Z=ye=!1);var Le=this.__chain__,je=!!this.__actions__.length,ot=B&&!Le,bt=Z&&!je;if(!B&&ye){G=bt?G:new Ct(this);var lt=p.apply(G,K);return lt.__actions__.push({func:Dy,args:[Te],thisArg:t}),new fs(lt,Le)}return ot&&bt?p.apply(this,K):(lt=this.thru(Te),ot?R?lt.value()[0]:lt.value():lt)})}),ds(["pop","push","shift","sort","splice","unshift"],function(p){var v=iy[p],T=/^(?:push|sort|unshift)$/.test(p)?"tap":"thru",R=/^(?:pop|shift)$/.test(p);N.prototype[p]=function(){var O=arguments;if(R&&!this.__chain__){var B=this.value();return v.apply(mt(B)?B:[],O)}return this[T](function(G){return v.apply(mt(G)?G:[],O)})}}),Ea(Ct.prototype,function(p,v){var T=N[v];if(T){var R=T.name+"";Gt.call(ch,R)||(ch[R]=[]),ch[R].push({name:v,func:T})}}),ch[Ay(t,b).name]=[{name:"wrapper",func:t}],Ct.prototype.clone=Ese,Ct.prototype.reverse=xse,Ct.prototype.value=wse,N.prototype.at=Xoe,N.prototype.chain=Zoe,N.prototype.commit=Joe,N.prototype.next=ele,N.prototype.plant=rle,N.prototype.reverse=nle,N.prototype.toJSON=N.prototype.valueOf=N.prototype.value=ile,N.prototype.first=N.prototype.head,tm&&(N.prototype[tm]=tle),N},ah=Jie();tu?((tu.exports=ah)._=ah,VS._=ah):Mn._=ah}).call(Rn)})(Ux,Ux.exports);Ux.exports;const Iv=(r,e)=>{const t=x.createContext(e),n=s=>{const{children:a,...o}=s,l=x.useMemo(()=>o,Object.values(o));return $.jsx(t.Provider,{value:l,children:a})};function i(s){const a=x.useContext(t);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${s}\` must be used within \`${r}\``)}return n.displayName=`${r}Provider`,[n,i]};function W_e(r,e){return typeof r=="string"?!1:e in r}function D1(r,e,t){return r&&e&&W_e(r,e)?r[e]:t}const h8={padding:["padding-block-start","padding-inline-end","padding-block-end","padding-inline-start"],paddingTop:"padding-block-start",paddingRight:"padding-inline-end",paddingBottom:"padding-block-end",paddingLeft:"padding-inline-start",margin:["margin-block-start","margin-inline-end","margin-block-end","margin-inline-start"],marginLeft:"margin-inline-start",marginRight:"margin-inline-end",marginTop:"margin-block-start",marginBottom:"margin-block-end",borderRadius:"border-radius",borderStyle:"border-style",borderWidth:"border-width",borderColor:"border-color",fontSize:"font-size",fontWeight:"font-weight",lineHeight:"line-height",zIndex:"z-index",boxShadow:"box-shadow",pointerEvents:"pointer-events",textAlign:"text-align",textTransform:"text-transform",textDecoration:"text-decoration",flexGrow:"flex-grow",flexShrink:"flex-shrink",flexBasis:"flex-basis",minWidth:"min-width",maxWidth:"max-width",minHeight:"min-height",maxHeight:"max-height",flexDirection:"flex-direction",flexWrap:"flex-wrap",justifyContent:"justify-content",alignItems:"align-items"},H_e=r=>{const[e,t,n,i]=r,s=t??e;return[e,s,n??e,i??s]};function V_e(r,e){switch(r){case"gap":case"padding":case"margin":case"paddingTop":case"paddingLeft":case"paddingRight":case"paddingBottom":case"marginTop":case"marginLeft":case"marginRight":case"marginBottom":case"left":case"right":case"top":case"bottom":case"width":case"maxWidth":case"minWidth":case"height":case"maxHeight":case"minHeight":case"borderRadius":case"borderWidth":return e.spaces;case"color":case"background":case"borderColor":return e.colors;case"fontSize":return e.fontSizes;case"fontWeight":return e.fontWeights;case"lineHeight":return e.lineHeights;case"zIndex":return e.zIndices;case"boxShadow":return e.shadows;default:return null}}const PT=(r,e)=>{const t=Object.entries(r).reduce((n,i)=>{const[s,a]=i,o=V_e(s,e),l=Object.prototype.hasOwnProperty.call(h8,s)?h8[s]:s;return l&&(a||a===0)&&(typeof a=="object"&&!Array.isArray(a)?Object.entries(a).forEach(([c,u])=>{n[c]={...n[c],...f8(l,u,o)}}):n.initial={...n.initial,...f8(l,a,o)}),n},{initial:{},small:{},medium:{},large:{}});return Object.entries(t).reduce((n,[i,s])=>{if(s&&Object.keys(s).length>0){const a=Object.entries(s).reduce((o,[l,c])=>(o.push(`${l}: ${c};`),o),[]).join(`
`);i==="initial"?n.push(a):n.push(`${e.breakpoints[i]}{ ${a} }`)}return n},[]).join(`
`)},f8=(r,e,t)=>{if(Array.isArray(r)&&Array.isArray(e)){const n=H_e(e);return r.reduce((i,s,a)=>(i[s]=D1(t,n[a],n[a]),i),{})}else return Array.isArray(r)&&!Array.isArray(e)?r.reduce((n,i)=>(n[i]=D1(t,e,e),n),{}):!Array.isArray(r)&&!Array.isArray(e)?{[r]:D1(t,e,e)}:(console.warn("You've passed an array of values to a property that does not support it. Please check the property and value you're passing."),{})},vi=x.forwardRef,De=vi((r,e)=>{const{background:t,basis:n,borderColor:i,color:s,flex:a,fontSize:o,grow:l,hasRadius:c,padding:u,paddingBottom:d,paddingLeft:h,paddingRight:f,paddingTop:m,margin:g,marginLeft:y,marginBottom:b,marginRight:E,marginTop:w,shadow:A,shrink:S,lineHeight:_,fontWeight:C,width:k,minWidth:D,maxWidth:I,height:L,minHeight:M,maxHeight:F,top:U,left:W,bottom:j,right:z,borderRadius:Q,borderStyle:V,borderWidth:Y,tag:J,pointerEvents:ue,display:ne,position:ge,zIndex:ae,overflow:ie,cursor:ee,transition:be,transform:we,animation:Re,textAlign:Oe,textTransform:me,...Ue}=r,Se=J||"div",et={$background:t,$basis:n,$borderColor:i,$color:s,$flex:a,$fontSize:o,$grow:l,$hasRadius:c,$padding:u,$paddingBottom:d,$paddingLeft:h,$paddingRight:f,$paddingTop:m,$margin:g,$marginLeft:y,$marginBottom:b,$marginRight:E,$marginTop:w,$shadow:A,$shrink:S,$lineHeight:_,$fontWeight:C,$width:k,$minWidth:D,$maxWidth:I,$height:L,$minHeight:M,$maxHeight:F,$top:U,$left:W,$bottom:j,$right:z,$borderRadius:Q,$borderStyle:V,$borderWidth:Y,$pointerEvents:ue,$display:ne,$position:ge,$zIndex:ae,$overflow:ie,$cursor:ee,$transition:be,$transform:we,$animation:Re,$textAlign:Oe,$textTransform:me};return $.jsx(G_e,{as:Se,ref:e,...et,...Ue})}),G_e=q.div`
  ${({theme:r,...e})=>PT({padding:e.$padding,paddingTop:e.$paddingTop,paddingBottom:e.$paddingBottom,paddingLeft:e.$paddingLeft,paddingRight:e.$paddingRight,margin:e.$margin,marginTop:e.$marginTop,marginBottom:e.$marginBottom,marginLeft:e.$marginLeft,marginRight:e.$marginRight,top:e.$top,left:e.$left,bottom:e.$bottom,right:e.$right,width:e.$width,minWidth:e.$minWidth,maxWidth:e.$maxWidth,height:e.$height,minHeight:e.$minHeight,maxHeight:e.$maxHeight,color:e.$color,background:e.$background,fontSize:e.$fontSize,fontWeight:e.$fontWeight,lineHeight:e.$lineHeight,borderRadius:e.$hasRadius?r.borderRadius:e.$borderRadius,borderStyle:e.$borderColor&&!e.$borderStyle?"solid":e.$borderStyle,borderWidth:e.$borderColor&&!e.$borderWidth?"1px":e.$borderWidth,borderColor:e.$borderColor,zIndex:e.$zIndex,boxShadow:e.$shadow,display:e.$display,pointerEvents:e.$pointerEvents,cursor:e.$cursor,textAlign:e.$textAlign,textTransform:e.$textTransform,transition:e.$transition,transform:e.$transform,animation:e.$animation,position:e.$position,overflow:e.$overflow,flex:e.$flex,flexShrink:e.$shrink,flexGrow:e.$grow,flexBasis:e.$basis},r)};
`,Ie=vi((r,e)=>{const{className:t,alignItems:n,direction:i,inline:s,gap:a,justifyContent:o,wrap:l,...c}=r,u={$alignItems:n,$direction:i,$gap:a,$justifyContent:o,$wrap:l,$inline:s};return $.jsx(q_e,{className:t,ref:e,...u,...c})}),q_e=q(De)`
  ${({theme:r,$display:e="flex",$alignItems:t="center",$direction:n="row",...i})=>PT({gap:i.$gap,alignItems:t,justifyContent:i.$justifyContent,flexWrap:i.$wrap,flexDirection:n,display:i.$inline?"inline-flex":e},r)};
`,j_e="alpha",K_e="beta",z_e="delta",Y_e="epsilon",p8="omega",Q_e="pi",X_e="sigma",lz=dt`
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`,Z_e=({$variant:r=p8,theme:e})=>{switch(r){case j_e:return`
        font-weight: ${e.fontWeights.bold};
        font-size: ${e.fontSizes[5]};
        line-height: ${e.lineHeights[2]};
      `;case K_e:return`
        font-weight: ${e.fontWeights.bold};
        font-size: ${e.fontSizes[4]};
        line-height: ${e.lineHeights[1]};
      `;case z_e:return`
        font-weight: ${e.fontWeights.semiBold};
        font-size: ${e.fontSizes[3]};
        line-height: ${e.lineHeights[2]};
      `;case Y_e:return`
        font-size: ${e.fontSizes[3]};
        line-height: ${e.lineHeights[6]};
      `;case p8:return`
        font-size: ${e.fontSizes[2]};
        line-height: ${e.lineHeights[4]};
      `;case Q_e:return`
        font-size: ${e.fontSizes[1]};
        line-height: ${e.lineHeights[3]};
      `;case X_e:return`
        font-weight: ${e.fontWeights.bold};
        font-size: ${e.fontSizes[0]};
        line-height: ${e.lineHeights[5]};
        text-transform: uppercase;
      `;default:return`
        font-size: ${e.fontSizes[2]};
      `}},Je=vi((r,e)=>{const{ellipsis:t,textColor:n="currentcolor",textDecoration:i,textTransform:s,variant:a,lineHeight:o,fontWeight:l,fontSize:c,...u}=r,d={$ellipsis:t,$textColor:n,$textDecoration:i,$textTransform:s,$variant:a,$lineHeight:o,$fontWeight:l,$fontSize:c};return $.jsx(J_e,{ref:e,tag:"span",...d,...u})}),J_e=q(De)`
  ${Z_e}
  ${({$ellipsis:r})=>r?lz:""}

  ${({theme:r,...e})=>PT({color:e.$textColor,textDecoration:e.$textDecoration,textTransform:e.$textTransform,lineHeight:e.$lineHeight,fontWeight:e.$fontWeight,fontSize:e.$fontSize},r)}
`,[eCe,aO]=Iv("Accordion");x.forwardRef(({children:r,size:e="S",...t},n)=>$.jsx(tCe,{ref:n,$size:e,collapsible:!0,...t,type:"single",children:$.jsx(eCe,{size:e,children:r})}));const tCe=q(dge)`
  background-color: ${r=>r.theme.colors.neutral0};

  ${r=>r.$size==="S"?dt`
        border-radius: ${e=>e.theme.borderRadius};
        border: solid 1px ${e=>e.theme.colors.neutral200};
      `:dt``}
`;x.forwardRef((r,e)=>{const{size:t}=aO("Item");return $.jsx(rCe,{$size:t,"data-size":t,ref:e,...r})});const rCe=q(hge)`
  overflow: hidden;
  margin: 1px 0;

  &:first-child {
    border-top-left-radius: 0.3rem;
    border-top-right-radius: 0.3rem;
    margin-top: 0;
  }

  &:last-child {
    border-bottom-left-radius: 0.3rem;
    border-bottom-right-radius: 0.3rem;
    margin-bottom: 0;
  }

  &[data-size='S'] {
    & + & {
      border-top: solid 1px ${r=>r.theme.colors.neutral200};
    }
  }

  &[data-state='open'] {
    box-shadow: 0 0 0 1px ${r=>r.theme.colors.primary600};
  }

  &:not([data-disabled]):hover {
    box-shadow: 0 0 0 1px ${r=>r.theme.colors.primary600};
  }

  /* This applies our desired focus effect correctly. */
  &:focus-within {
    position: relative;
    z-index: 1;
    box-shadow: 0 0 0 1px ${r=>r.theme.colors.primary600};
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: box-shadow ${r=>r.theme.motion.timings[120]}
      ${r=>r.theme.motion.easings.easeOutQuad};
  }
`;x.forwardRef(({caretPosition:r="left",description:e,icon:t,iconProps:n,children:i,...s},a)=>{const{size:o}=aO("Trigger");return $.jsxs(uz,{$caretPosition:r,$size:o,ref:a,...s,children:[r==="left"?$.jsx(Wx,{$size:o,children:$.jsx(Dc,{width:o==="S"?"1.2rem":"1.6rem",height:o==="S"?"1.2rem":"1.6rem"})}):null,$.jsxs(Ie,{tag:"span",gap:2,children:[t&&o==="S"?$.jsx(cz,{children:$.jsx(t,{...n})}):null,$.jsxs(Ie,{alignItems:"flex-start",direction:"column",tag:"span",ref:a,children:[$.jsx(Je,{fontWeight:o==="S"?"bold":void 0,ellipsis:!0,variant:o==="M"?"delta":void 0,textAlign:"left",children:i}),e&&o==="M"?$.jsx(Je,{textAlign:"left",children:e}):null]})]}),r==="right"?$.jsx(Wx,{$size:o,children:$.jsx(Dc,{width:o==="S"?"1.2rem":"1.6rem",height:o==="S"?"1.2rem":"1.6rem"})}):null]})});const cz=q(De)`
  color: ${r=>r.theme.colors.neutral500};
  display: flex;

  @media (prefers-reduced-motion: no-preference) {
    transition: ${r=>r.theme.transitions.color};
  }
`,Wx=q(Ie).attrs(r=>({...r,tag:"span"}))`
  background-color: ${r=>r.theme.colors.neutral200};
  width: ${r=>r.$size==="S"?"2.4rem":"3.2rem"};
  height: ${r=>r.$size==="S"?"2.4rem":"3.2rem"};
  flex: ${r=>r.$size==="S"?"0 0 2.4rem":"0 0 3.2rem"};
  border-radius: 50%;
  justify-content: center;

  @media (prefers-reduced-motion: no-preference) {
    transition:
      transform ${r=>r.theme.motion.timings[200]} ${r=>r.theme.motion.easings.authenticMotion},
      ${r=>r.theme.transitions.backgroundColor};
  }
`,uz=q(pge)`
  display: flex;
  align-items: center;
  justify-content: ${r=>r.$caretPosition==="left"?"flex-start":"space-between"};
  width: 100%;
  gap: ${r=>r.theme.spaces[4]};
  padding-inline: ${r=>r.$size==="S"?r.theme.spaces[4]:r.theme.spaces[6]};
  padding-block: ${r=>r.$size==="S"?r.theme.spaces[3]:r.theme.spaces[6]};
  cursor: pointer;
  color: ${r=>r.theme.colors.neutral800};

  &[data-disabled] {
    cursor: default;
    color: ${r=>r.theme.colors.neutral600};
  }

  &[data-state='open'] > ${Wx} {
    transform: rotate(180deg);
  }

  /* we remove the default focus because the entire item should have the focus style and the default would be hidden. */
  &:focus-visible {
    outline: none;
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${r=>r.theme.transitions.color};
  }
`;x.forwardRef((r,e)=>{const{size:t}=aO("Trigger");return $.jsx(dz,{$size:t,...r,ref:e})});const dz=q(Ie).attrs(r=>({...r,tag:"span"}))`
  padding-inline: ${r=>r.$size==="S"?r.theme.spaces[2]:r.theme.spaces[6]};
  padding-block: ${r=>r.$size==="S"?r.theme.spaces[2]:r.theme.spaces[6]};

  // Remove default IconButton styles so there are no backgrounds or borders.
  & > button {
    border: none;
    background: none;
    color: ${r=>r.theme.colors.neutral600};

    @media (prefers-reduced-motion: no-preference) {
      transition: ${r=>r.theme.transitions.color};
    }
  }
`;x.forwardRef(({variant:r="primary",...e},t)=>$.jsx(nCe,{$variant:r,ref:t,...e}));const nCe=q(fge)`
  display: flex;
  align-items: center;
  background-color: ${r=>r.$variant==="primary"?r.theme.colors.neutral0:r.theme.colors.neutral100};

  &[data-disabled] {
    background-color: ${r=>r.theme.colors.neutral150};
  }

  &:not([data-disabled]) {
    &:hover,
    &[data-state='open'] {
      background-color: ${r=>r.theme.colors.primary100};

      & > ${uz} {
        color: ${r=>r.theme.colors.primary600};

        & ${cz} {
          color: ${r=>r.theme.colors.primary600};
        }

        & ${Wx} {
          background-color: ${r=>r.theme.colors.primary200};
        }
      }

      & > ${dz} > button {
        color: ${r=>r.theme.colors.primary600};
      }
    }
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${r=>r.theme.transitions.backgroundColor};
  }
`;x.forwardRef((r,e)=>$.jsx(aCe,{ref:e,...r}));const iCe=Bn`
  from {
    height: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
  }
`,sCe=Bn`
  from {
    height: var(--radix-accordion-content-height);
  }
  to {
    height: 0;
  }
`,aCe=q(mge)`
  overflow: hidden;

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation: ${iCe} ${r=>r.theme.motion.timings[320]}
        ${r=>r.theme.motion.easings.authenticMotion};
    }

    &[data-state='closed'] {
      animation: ${sCe} ${r=>r.theme.motion.timings[320]}
        ${r=>r.theme.motion.easings.authenticMotion};
    }
  }
`,MT=dt`
  position: relative;
  outline: none;

  &:after {
    transition-property: all;
    transition-duration: 0.2s;
    border-radius: 8px;
    content: '';
    position: absolute;
    top: -4px;
    bottom: -4px;
    left: -4px;
    right: -4px;
    border: 2px solid transparent;
  }

  &:focus-visible {
    outline: none;

    &:after {
      border-radius: 8px;
      content: '';
      position: absolute;
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      border: 2px solid ${r=>r.theme.colors.primary600};
    }
  }
`,Fp=({tag:r,...e})=>{const t=r||"span";return $.jsx(oCe,{...e,as:t})},oCe=q.span`
  border: 0;
  clip: rect(0 0 0 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
`,up=({children:r,label:e})=>{const t=x.Children.only(r);return $.jsxs($.Fragment,{children:[x.cloneElement(t,{"aria-hidden":"true",focusable:"false"}),$.jsx(Fp,{children:e})]})};up.displayName="AccessibleIcon";const hz=r=>{switch(r){case"danger":return"danger100";case"success":return"success100";case"warning":return"warning100";default:return"primary100"}},lCe=r=>hz(r).replace("100","200"),wI=({theme:r,$variant:e})=>e==="danger"?r.colors.danger700:e==="success"?r.colors.success700:e==="warning"?r.colors.warning700:r.colors.primary700,cCe=q(De)`
  ${MT};
`,uCe=q(Ie)`
  svg {
    height: 100%;
    width: 100%;

    path {
      fill: ${wI};
    }
  }
`,dCe=({variant:r,...e})=>r==="success"?$.jsx(hde,{...e}):r==="danger"||r==="warning"?$.jsx(S2,{...e}):$.jsx(fde,{...e}),hCe=q(De)`
  & a > span {
    color: ${wI};
  }

  svg path {
    fill: ${wI};
  }
`,fCe=({title:r,children:e,variant:t="default",onClose:n,closeLabel:i,titleAs:s="p",action:a,...o})=>$.jsxs(Ie,{alignItems:"flex-start",background:hz(t),borderColor:lCe(t),shadow:"filterShadow",gap:3,hasRadius:!0,padding:5,paddingRight:6,...o,children:[$.jsx(uCe,{height:"2rem",shrink:0,$variant:t,width:"2rem",children:$.jsx(dCe,{"aria-hidden":!0,variant:t})}),$.jsxs(Ie,{alignItems:"start",gap:a?2:1,wrap:"wrap",role:t==="danger"?"alert":"status",width:"100%",children:[r&&$.jsx(Je,{fontWeight:"bold",textColor:"neutral800",tag:s,children:r}),$.jsx(Je,{tag:"p",textColor:"neutral800",children:e}),a&&$.jsx(hCe,{$variant:t,children:a})]}),$.jsx(cCe,{tag:"button",background:"transparent",borderColor:void 0,height:"1.6rem",width:"1.6rem",marginTop:1,onClick:n,color:"neutral700",children:$.jsx(up,{label:i,children:$.jsx(Wd,{})})})]});function oo({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=fz({defaultProp:e,onChange:t}),s=r!==void 0,a=s?r:n,o=Br(t),l=x.useCallback(c=>{if(s){const d=typeof c=="function"?c(r):c;d!==r&&o(d)}else i(c)},[s,r,i,o]);return[a,l]}function fz({defaultProp:r,onChange:e}){const t=x.useState(r),[n]=t,i=x.useRef(n),s=Br(e);return x.useEffect(()=>{i.current!==n&&(s(n),i.current=n)},[n,i,s]),t}const TI={easeInSine:"cubic-bezier(0.47, 0, 0.745, 0.715)",easeOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInOutSine:"cubic-bezier(0.39, 0.575, 0.565, 1)",easeInQuad:"cubic-bezier(0.55, 0.085, 0.68, 0.53)",easeOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInOutQuad:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",easeInCubic:"cubic-bezier(0.55, 0.055, 0.675, 0.19)",easeOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInOutCubic:"cubic-bezier(0.215, 0.61, 0.355, 1)",easeInQuart:"cubic-bezier(0.895, 0.03, 0.685, 0.22)",easeOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInOutQuart:"cubic-bezier(0.165, 0.84, 0.44, 1)",easeInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",easeOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",easeInExpo:"cubic-bezier(0.95, 0.05, 0.795, 0.035)",easeOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInOutExpo:"cubic-bezier(0.19, 1, 0.22, 1)",easeInCirc:"cubic-bezier(0.6, 0.04, 0.98, 0.335)",easeOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInOutCirc:"cubic-bezier(0.075, 0.82, 0.165, 1)",easeInBack:"cubic-bezier(0.6, -0.28, 0.735, 0.045)",easeOutBack:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",easeInOutBack:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",easeInOutFast:"cubic-bezier(1,0,0,1)",authenticMotion:"cubic-bezier(.4,0,.2,1)"},SI={320:"320ms",200:"200ms",120:"120ms"},pCe={color:`color ${SI[120]} ${TI.easeOutQuad}`,backgroundColor:`background-color ${SI[120]} ${TI.easeOutQuad}`},Ur={overlayFadeIn:Bn`
    from {
      opacity: 0;
    }
    to {
      opacity: 0.2;
    }
  `,modalPopIn:Bn`
    from {
      transform:translate(-50%, -50%)  scale(0.8);
      opacity: 0;
    }
    to {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
  `,modalPopOut:Bn`
    from {
      transform: translate(-50%, -50%) scale(1);
      opacity: 1;
    }
    to {
      transform:translate(-50%, -50%)  scale(0.8);
      opacity: 0;
    }
  `,popIn:Bn`
    from {
      transform: scale(0.8);
      opacity: 0;
    }
    to {
      transform: scale(1);
      opacity: 1;
    }
  `,popOut:Bn`
    from {
      transform: scale(1);
      opacity: 1;
    }
    to {
      transform: scale(0.8);
      opacity: 0;
    }
  `,slideDownIn:Bn`
    from {
      opacity: 0;
      transform: translateY(-10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  `,slideDownOut:Bn`
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(-10px);
    }
  `,slideUpIn:Bn`
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  `,slideUpOut:Bn`
    from {
      opacity: 1;
      transform: translateY(0);
    }
    to {
      opacity: 0;
      transform: translateY(10px);
    }
  `,fadeIn:Bn`
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  `,fadeOut:Bn`
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  `},C0=32,m8=2;x.forwardRef(({onLoadingStatusChange:r,delayMs:e=600,src:t,alt:n,fallback:i,preview:s=!1,...a},o)=>{const[l,c]=oo({onChange:r}),[u,d]=x.useState(!1),h=s&&l==="loaded",f=m=>{h&&d(m)};return $.jsxs(PH,{onOpenChange:f,children:[$.jsx(MH,{asChild:!0,children:$.jsxs(AI,{ref:o,...a,children:[h?$.jsx(mCe,{width:"100%",height:"100%",position:"absolute",background:"neutral0",zIndex:"overlay",style:{opacity:u?.4:0}}):null,$.jsx(gCe,{src:t,alt:n,onLoadingStatusChange:c}),$.jsx(_ge,{delayMs:e,children:$.jsx(Je,{fontWeight:"bold",textTransform:"uppercase",children:i})})]})}),h?$.jsx(NH,{children:$.jsx(vCe,{side:"top",sideOffset:4,children:$.jsx(yCe,{src:t,alt:n})})}):null]})});const pz=dt`
  display: inline-flex;
  align-items: center;
  justify-content: center;
  vertical-align: middle;
  overflow: hidden;
  user-select: none;
  overflow: hidden;
  border-radius: 50%;
`,mz=dt`
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: inherit;
`,AI=q(Sge)`
  position: relative;
  z-index: 0;
  ${pz}
  width: ${C0/10}rem;
  height: ${C0/10}rem;
  /* TODO: we should get the user email & hash it to turn it into a hex-value so different emails can consistently get a different background */
  background-color: ${r=>r.theme.colors.primary600};
  color: ${r=>r.theme.colors.neutral0};
`,mCe=q(De)`
  @media (prefers-reduced-motion: no-preference) {
    transition: opacity ${r=>r.theme.motion.timings[200]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,gCe=q(Age)`
  ${mz}
`,vCe=q(FH)`
  ${pz}
  width: ${C0*m8/10}rem;
  height: ${C0*m8/10}rem;

  @media (prefers-reduced-motion: no-preference) {
    animation: ${Ur.fadeIn} ${r=>r.theme.motion.timings[200]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,yCe=q.img`
  ${mz}
`;x.forwardRef((r,e)=>$.jsx(bCe,{...r,ref:e,tag:"div"}));const bCe=q(Ie)`
  & > ${AI} + ${AI} {
    margin-left: -${C0/10/2}rem;
  }
`,gz=({active:r=!1,size:e="M",textColor:t="neutral600",backgroundColor:n="neutral150",children:i,minWidth:s=5,...a})=>{const o=e==="S"?1:2;return $.jsx(ECe,{inline:!0,alignItems:"center",justifyContent:"center",minWidth:s,paddingLeft:o,paddingRight:o,background:r?"primary200":n,$size:e,...a,children:$.jsx(Je,{variant:"sigma",textColor:r?"primary600":t,lineHeight:"1rem",children:i})})},ECe=q(Ie)`
  border-radius: ${({theme:r,$size:e})=>e==="S"?"2px":r.borderRadius};
  ${({$size:r,theme:e})=>r==="S"?dt`
        padding-block: 0.3rem;
        padding-inline ${e.spaces[1]}
      `:dt`
      padding-block: 0.7rem;
      padding-inline ${e.spaces[2]}
    `};
`,$v=vi(({href:r,disabled:e=!1,isExternal:t=!1,...n},i)=>$.jsx(xCe,{tag:"a",ref:i,target:t?"_blank":void 0,rel:t?"noreferrer noopener":void 0,href:r,tabIndex:e?-1:void 0,"aria-disabled":e,pointerEvents:e?"none":void 0,cursor:e?void 0:"pointer",...n})),xCe=q(De)`
  text-decoration: none;

  &:visited {
    color: inherit;
  }
`,vz=()=>$.jsx(De,{"aria-hidden":!0,paddingLeft:1,paddingRight:1,children:$.jsx(Je,{variant:"pi",textColor:"neutral500",children:"/"})});vz.displayName="Divider";const wCe=q(Ie)`
  // CrumbLinks do have padding-x, because they need to have a
  // interaction effect, which mis-aligns the breadcrumbs on the left.
  // This normalizes the behavior by moving the first item to left by
  // the same amount it has inner padding
  & > *:first-child {
    margin-left: ${({theme:r})=>`calc(-1*${r.spaces[2]})`};
  }
`,TCe=x.forwardRef(({label:r,children:e,...t},n)=>{const i=x.Children.toArray(e);return $.jsx(De,{"aria-label":r,tag:"nav",...t,ref:n,children:$.jsx(wCe,{tag:"ol",children:x.Children.map(i,(s,a)=>{const o=i.length>1&&a+1<i.length;return $.jsxs(Ie,{inline:!0,tag:"li",children:[s,o&&$.jsx(vz,{})]})})})})});TCe.displayName="Breadcrumbs";const SCe=x.forwardRef(({children:r,isCurrent:e=!1,...t},n)=>$.jsx(De,{paddingLeft:2,paddingRight:2,paddingTop:1,paddingBottom:1,ref:n,children:$.jsx(Je,{variant:"pi",textColor:"neutral800",fontWeight:e?"bold":"regular","aria-current":e,...t,children:r})}));SCe.displayName="Crumb";const ACe=q($v)`
  border-radius: ${({theme:r})=>r.borderRadius};
  color: ${({theme:r})=>r.colors.neutral600};
  font-size: ${({theme:r})=>r.fontSizes[1]};
  line-height: ${({theme:r})=>r.lineHeights[4]};
  padding: ${({theme:r})=>`${r.spaces[1]} ${r.spaces[2]}`};
  text-decoration: none;

  :hover,
  :focus {
    background-color: ${({theme:r})=>r.colors.neutral200};
    color: ${({theme:r})=>r.colors.neutral700};
  }
`,_Ce=x.forwardRef(({children:r,...e},t)=>$.jsx(ACe,{ref:t,...e,children:r}));_Ce.displayName="CrumbLink";const dp=r=>r.replaceAll(":","");function CCe(r,e){typeof r=="function"?r(e):r!=null&&(r.current=e)}function yz(...r){return e=>r.forEach(t=>CCe(t,e))}function Ni(...r){return x.useCallback(yz(...r),r)}const RCe=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),hp=RCe()?x.useEffect:x.useLayoutEffect,kCe=BW.useId||(()=>{});let ICe=0;const ga=r=>{const[e,t]=x.useState(kCe());return hp(()=>{r||t(n=>n??String(ICe++))},[r]),r?.toString()??(e||"")},Dv=(r,e,{selectorToWatch:t,skipWhen:n=!1})=>{const i=z2(e);x.useEffect(()=>{if(n||!r.current)return;const s={root:r.current,rootMargin:"0px"},a=c=>{c.forEach(u=>{u.isIntersecting&&r.current&&r.current.scrollHeight>r.current.clientHeight&&i(u)})},o=new IntersectionObserver(a,s),l=r.current.querySelector(t);return l&&o.observe(l),()=>{o.disconnect()}},[n,i,t,r])},oO="success-light",lO="danger-light",NT="default",Lv="tertiary",Ov="secondary",bz="danger",Ez="success",FT="ghost",cO=[oO,lO],$Ce=[NT,Lv,Ov,bz,Ez,FT,...cO],DCe=["XS","S","M","L"],ta=r=>r===oO||r===lO?`${r.substring(0,r.lastIndexOf("-"))}`:r===Lv?"neutral":r===NT||r===Ov||$Ce.every(e=>e!==r)?"primary":`${r}`,xz=({theme:r})=>dt`
    border: 1px solid ${r.colors.neutral200};
    background: ${r.colors.neutral150};
    color: ${r.colors.neutral600};
    cursor: default;
  `,wz=({theme:r,$variant:e})=>[...cO,Ov].includes(e)?dt`
      background-color: ${r.colors.neutral0};
    `:e===Lv?dt`
      background-color: ${r.colors.neutral100};
    `:e===FT?dt`
      background-color: ${r.colors.neutral100};
    `:e===NT?dt`
      border: 1px solid ${r.colors.buttonPrimary500};
      background: ${r.colors.buttonPrimary500};
    `:dt`
    border: 1px solid ${r.colors[`${ta(e)}500`]};
    background: ${r.colors[`${ta(e)}500`]};
  `,Tz=({theme:r,$variant:e})=>[...cO,Ov].includes(e)?dt`
      background-color: ${r.colors.neutral0};
      border: 1px solid ${r.colors[`${ta(e)}600`]};
      color: ${r.colors[`${ta(e)}600`]};
    `:e===Lv||e===FT?dt`
      background-color: ${r.colors.neutral150};
    `:dt`
    border: 1px solid ${r.colors[`${ta(e)}600`]};
    background: ${r.colors[`${ta(e)}600`]};
  `,Sz=({theme:r,$variant:e})=>{switch(e){case lO:case oO:case Ov:return dt`
        border: 1px solid ${r.colors[`${ta(e)}200`]};
        background: ${r.colors[`${ta(e)}100`]};
        color: ${r.colors[`${ta(e)}700`]};
      `;case Lv:return dt`
        border: 1px solid ${r.colors.neutral200};
        background: ${r.colors.neutral0};
        color: ${r.colors.neutral800};
      `;case FT:return dt`
        border: 1px solid transparent;
        background: transparent;
        color: ${r.colors.neutral800};

        svg {
          fill: ${r.colors.neutral500};
        }
      `;case Ez:case bz:return dt`
        border: 1px solid ${r.colors[`${ta(e)}600`]};
        background: ${r.colors[`${ta(e)}600`]};
        color: ${r.colors.neutral0};
      `;default:return dt`
        border: 1px solid ${r.colors.buttonPrimary600};
        background: ${r.colors.buttonPrimary600};
        color: ${r.colors.buttonNeutral0};
      `}},Hx=vi(({variant:r=NT,startIcon:e,endIcon:t,disabled:n=!1,children:i,onClick:s,size:a=DCe[1],loading:o=!1,fullWidth:l=!1,...c},u)=>{const d=n||o,h=f=>{!d&&s&&s(f)};return $.jsxs(PCe,{ref:u,"aria-disabled":d,disabled:d,$size:a,$variant:r,tag:"button",onClick:h,hasRadius:!0,gap:2,inline:!0,alignItems:"center",justifyContent:"center",width:l?"100%":void 0,paddingLeft:4,paddingRight:4,cursor:"pointer",...c,children:[(e||o)&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:o?$.jsx(OCe,{}):e}),$.jsx(Je,{variant:a==="S"?"pi":void 0,fontWeight:"bold",children:i}),t&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:t})]})}),LCe=Bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,OCe=q(WW)`
  animation: ${LCe} 2s infinite linear;
  will-change: transform;
`,PCe=q(Ie)`
  height: ${({theme:r,$size:e})=>r.sizes.button[e]};
  text-decoration: none;
  ${Sz}

  &:hover {
    ${wz}
  }

  &:active {
    ${Tz}
  }

  &[aria-disabled='true'] {
    ${xz}
  }

  @media (prefers-reduced-motion: no-preference) {
    transition:
      ${r=>r.theme.transitions.backgroundColor},
      ${r=>r.theme.transitions.color},
      border-color ${r=>r.theme.motion.timings[200]} ${r=>r.theme.motion.easings.easeOutQuad};
  }
`,Az=x.forwardRef(({children:r,description:e,label:t,defaultOpen:n,open:i,onOpenChange:s,delayDuration:a=500,disableHoverableContent:o,...l},c)=>!t&&!e?r:$.jsxs(PH,{defaultOpen:n,open:i,onOpenChange:s,delayDuration:a,disableHoverableContent:o,children:[$.jsx(MH,{asChild:!0,children:r}),$.jsx(NH,{children:$.jsx(MCe,{ref:c,sideOffset:8,...l,children:$.jsx(Je,{variant:"pi",fontWeight:"bold",children:t||e})})})]})),MCe=q(FH)`
  background-color: ${r=>r.theme.colors.neutral900};
  color: ${r=>r.theme.colors.neutral0};
  padding-inline: ${r=>r.theme.spaces[2]};
  padding-block: ${r=>r.theme.spaces[2]};
  border-radius: ${r=>r.theme.borderRadius};
  z-index: ${r=>r.theme.zIndices.tooltip};
  will-change: opacity;
  transform-origin: var(--radix-tooltip-content-transform-origin);

  @media (prefers-reduced-motion: no-preference) {
    animation: ${Ur.fadeIn} ${r=>r.theme.motion.timings[200]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,_I=vi(({label:r,background:e,children:t,disabled:n=!1,onClick:i,size:s="S",variant:a="tertiary",withTooltip:o=!0,...l},c)=>{const u=h=>{!n&&i&&i(h)},d=$.jsx(tg,{"aria-disabled":n,background:n?"neutral150":e,tag:"button",display:"inline-flex",justifyContent:"center",hasRadius:!0,cursor:"pointer",...l,ref:c,$size:s,onClick:u,$variant:a,children:$.jsx(up,{label:r,children:t})});return o?$.jsx(Az,{label:r,children:d}):d}),tg=q(Ie)`
  text-decoration: none;

  ${r=>{switch(r.$size){case"XS":return dt`
          padding-block: 0.25rem;
          padding-inline: 0.25rem;
        `;case"S":return dt`
          padding-block: 0.7rem;
          padding-inline: 0.7rem;
        `;case"M":return dt`
          padding-block: 0.9rem;
          padding-inline: 0.9rem;
        `;case"L":return dt`
          padding-block: 1.1rem;
          padding-inline: 1.1rem;
        `}}}
  ${Sz}
  ${r=>r.$variant==="tertiary"?dt`
          color: ${r.theme.colors.neutral500};
        `:""}

  &:hover {
    ${wz}
    ${r=>r.$variant==="tertiary"?dt`
            color: ${r.theme.colors.neutral600};
          `:""}
  }

  &:active {
    ${Tz}
  }

  &[aria-disabled='true'] {
    ${xz}
  }

  @media (prefers-reduced-motion: no-preference) {
    transition:
      ${r=>r.theme.transitions.backgroundColor},
      ${r=>r.theme.transitions.color},
      border-color ${r=>r.theme.motion.timings[200]} ${r=>r.theme.motion.easings.easeOutQuad};
  }
`;q(Ie)`
  & ${tg}:first-child {
    border-radius: ${({theme:r})=>`${r.borderRadius} 0 0 ${r.borderRadius}`};
  }

  & ${tg}:last-child {
    border-radius: ${({theme:r})=>`0 ${r.borderRadius} ${r.borderRadius} 0`};
  }

  & ${tg} {
    border-radius: 0;

    & + ${tg} {
      border-left: none;
    }
  }
`;const NCe=vi(({children:r,href:e,disabled:t=!1,startIcon:n,endIcon:i,isExternal:s=!1,...a},o)=>$.jsxs(FCe,{ref:o,href:e,disabled:t,isExternal:s,...a,children:[n,$.jsx(Je,{textColor:t?"neutral600":"primary600",children:r}),i,e&&!i&&s&&$.jsx(ode,{})]})),FCe=q($v)`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  gap: ${({theme:r})=>r.spaces[2]};
  pointer-events: ${({disabled:r})=>r?"none":void 0};

  svg {
    font-size: 1rem;

    path {
      fill: ${({disabled:r,theme:e})=>r?e.colors.neutral600:e.colors.primary600};
    }
  }

  &:hover {
    & > span {
      color: ${({theme:r})=>r.colors.primary500};
    }

    svg path {
      fill: ${({theme:r})=>r.colors.primary500};
    }
  }

  &:active {
    color: ${({theme:r})=>r.colors.primary700};
  }

  ${MT};
`,BCe=X0e,UCe=x.forwardRef(({label:r,endIcon:e=$.jsx(Dc,{width:"1.2rem",height:"1.2rem","aria-hidden":!0}),tag:t=Hx,icon:n,...i},s)=>{const a={...i,ref:s,type:"button"};return $.jsx(Z0e,{asChild:!0,disabled:a.disabled,children:t===_I?$.jsx(_I,{label:r,variant:"tertiary",...a,children:n}):$.jsx(Hx,{endIcon:e,variant:"ghost",...a})})}),WCe=x.forwardRef(({children:r,intersectionId:e,onCloseAutoFocus:t,popoverPlacement:n="bottom-start",...i},s)=>{const[a,o]=n.split("-");return $.jsx(JV,{children:$.jsx(HCe,{align:o,side:a,loop:!0,onCloseAutoFocus:t,asChild:!0,children:$.jsxs(_z,{ref:s,direction:"column",borderColor:"neutral150",hasRadius:!0,background:"neutral0",shadow:"filterShadow",maxHeight:"15rem",padding:1,marginTop:1,marginBottom:1,alignItems:"flex-start",position:"relative",overflow:"auto",...i,children:[r,$.jsx(De,{id:e,width:"100%",height:"1px"})]})})})}),_z=q(Ie)`
  scrollbar-width: none;
  -ms-overflow-style: none;
  -webkit-overflow-scrolling: touch;

  &::-webkit-scrollbar {
    display: none;
  }
`,HCe=q(J0e)`
  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${r=>r.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownIn};
      }
    }
  }
`,VCe=({onSelect:r,disabled:e=!1,isLink:t,startIcon:n,endIcon:i,isExternal:s,...a})=>$.jsx(tve,{asChild:!0,onSelect:r,disabled:e,children:t||s?$.jsx(GCe,{color:"neutral800",startIcon:n,endIcon:i,...a,isExternal:s??!1,children:$.jsx(Je,{children:a.children})}):$.jsxs(Rz,{cursor:"pointer",color:"neutral800",background:"transparent",borderStyle:"none",gap:2,...a,children:[n&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:n}),$.jsx(Je,{grow:1,children:a.children}),i&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:i})]})}),Cz=({theme:r})=>dt`
  text-align: left;
  width: 100%;
  border-radius: ${r.borderRadius};
  padding: ${r.spaces[2]} ${r.spaces[4]};

  &[aria-disabled='true'] {
    cursor: not-allowed;
    color: ${r.colors.neutral500};
  }

  &[data-highlighted] {
    background-color: ${r.colors.primary100};
  }

  &:focus-visible {
    outline: none;

    &:after {
      content: none;
    }
  }
`,Rz=q(Ie)`
  ${Cz}
`,GCe=q(NCe)`
  /* We include this here again because typically when people use OptionLink they provide an as prop which cancels the Box props */
  color: ${({theme:r,color:e})=>D1(r.colors,e,void 0)};
  text-decoration: none;

  &:hover {
    color: unset;
  }

  /* TODO: do we need this? */
  svg > path,
  &:focus-visible svg > path {
    fill: currentColor;
  }

  ${Cz}
`,qCe=q(De)`
  /* Negative horizontal margin to compensate Menu.Content's padding */
  margin: ${({theme:r})=>r.spaces[1]} -${({theme:r})=>r.spaces[1]};
  width: calc(100% + ${({theme:r})=>r.spaces[2]});
  /* Hide separator if there's nothing above in the menu */
  &:first-child {
    display: none;
  }
`,jCe=x.forwardRef((r,e)=>$.jsx(rve,{...r,asChild:!0,children:$.jsx(qCe,{height:"1px",shrink:0,background:"neutral150",ref:e})})),KCe=x.forwardRef((r,e)=>$.jsx(eve,{asChild:!0,children:$.jsx(zCe,{ref:e,variant:"sigma",textColor:"neutral600",...r})})),zCe=q(Je)`
  padding: ${({theme:r})=>r.spaces[2]} ${({theme:r})=>r.spaces[4]};
`,YCe=nve,QCe=x.forwardRef(({disabled:r=!1,...e},t)=>$.jsx(ive,{asChild:!0,disabled:r,children:$.jsxs(XCe,{ref:t,color:"neutral800",tag:"button",type:"button",background:"transparent",borderStyle:"none",gap:5,...e,children:[$.jsx(Je,{children:e.children}),$.jsx(T2,{fill:"neutral500",height:"1.2rem",width:"1.2rem"})]})})),XCe=q(Rz)`
  &[data-state='open'] {
    background-color: ${({theme:r})=>r.colors.primary100};
  }
`,ZCe=x.forwardRef((r,e)=>$.jsx(JV,{children:$.jsx(sve,{sideOffset:8,asChild:!0,children:$.jsx(_z,{ref:e,direction:"column",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral150",hasRadius:!0,background:"neutral0",shadow:"filterShadow",maxHeight:"15rem",padding:1,alignItems:"flex-start",overflow:"auto",...r})})})),kz=BCe,Iz=UCe,$z=WCe,JCe=VCe,eRe=jCe,tRe=KCe,rRe=YCe,nRe=QCe,iRe=ZCe,BT=Object.freeze(Object.defineProperty({__proto__:null,Content:$z,Item:JCe,Label:tRe,Root:kz,Separator:eRe,SubContent:iRe,SubRoot:rRe,SubTrigger:nRe,Trigger:Iz},Symbol.toStringTag,{value:"Module"})),sRe=x.forwardRef(({children:r,onOpen:e,onClose:t,popoverPlacement:n,onReachEnd:i,...s},a)=>{const o=x.useRef(null),l=Ni(a,o),c=x.useRef(null),[u,d]=x.useState(!1),h=y=>{i&&i(y)},f=y=>{y&&typeof e=="function"?e():!y&&typeof t=="function"&&t(),d(y)},m=ga(),g=`intersection-${dp(m)}`;return Dv(c,h,{selectorToWatch:`#${g}`,skipWhen:!u}),$.jsxs(kz,{onOpenChange:f,children:[$.jsx(Iz,{ref:l,...s,children:s.label}),$.jsx($z,{ref:c,intersectionId:g,popoverPlacement:n,children:r})]})}),aRe=q(sRe)`
  padding: ${({theme:r})=>`${r.spaces[1]} ${r.spaces[2]}`};
  height: unset;

  :hover,
  :focus {
    background-color: ${({theme:r})=>r.colors.neutral200};
  }
`,oRe=x.forwardRef(({children:r,...e},t)=>$.jsx(aRe,{ref:t,endIcon:null,size:"S",...e,children:r}));oRe.displayName="CrumbSimpleMenu";const Dz=x.createContext({id:""}),lRe=()=>x.useContext(Dz),cRe=x.forwardRef(({id:r,...e},t)=>{const n=ga(r),i=x.useMemo(()=>({id:n}),[n]);return $.jsx(Dz.Provider,{value:i,children:$.jsx(De,{ref:t,id:r,tabIndex:0,hasRadius:!0,background:"neutral0",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral150",shadow:"tableShadow",tag:"article","aria-labelledby":`${n}-title`,...e})})}),Lz=x.forwardRef(({position:r,...e},t)=>$.jsx(uRe,{ref:t,$position:r,...e,direction:"row",gap:2})),uRe=q(Ie)`
  position: absolute;
  top: ${({theme:r})=>r.spaces[3]};
  right: ${({$position:r,theme:e})=>{if(r==="end")return e.spaces[3]}};
  left: ${({$position:r,theme:e})=>{if(r==="start")return e.spaces[3]}};
`;q.img`
  // inline flows is based on typography and displays an extra white space below the image
  // switch to block is required in order to make the img stick the bottom of the container
  // addition infos: https://stackoverflow.com/questions/5804256/image-inside-div-has-extra-space-below-the-image
  margin: 0;
  padding: 0;
  max-height: 100%;
  max-width: 100%;
  object-fit: contain;
`;q.div`
  display: flex;
  justify-content: center;
  height: ${({$size:r})=>r==="S"?"8.8rem":"16.4rem"};
  width: 100%;
  background: repeating-conic-gradient(${({theme:r})=>r.colors.neutral100} 0% 25%, transparent 0% 50%) 50% / 20px
    20px;
  border-top-left-radius: ${({theme:r})=>r.borderRadius};
  border-top-right-radius: ${({theme:r})=>r.borderRadius};
`;q.div`
  margin-left: auto;
  flex-shrink: 0;
`;q(gz)`
  margin-left: ${({theme:r})=>r.spaces[1]};
`;const dRe=({fill:r,...e})=>{const{colors:t}=GW();return $.jsx(De,{tag:"svg",viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:r?t[r]:void 0,...e,children:$.jsx("path",{d:"M29.0613 10.0613L13.0613 26.0613C12.9219 26.2011 12.7563 26.3121 12.574 26.3878C12.3917 26.4635 12.1962 26.5024 11.9988 26.5024C11.8013 26.5024 11.6059 26.4635 11.4235 26.3878C11.2412 26.3121 11.0756 26.2011 10.9363 26.0613L3.93626 19.0613C3.79673 18.9217 3.68605 18.7561 3.61053 18.5738C3.53502 18.3915 3.49615 18.1961 3.49615 17.9988C3.49615 17.8014 3.53502 17.606 3.61053 17.4237C3.68605 17.2414 3.79673 17.0758 3.93626 16.9363C4.07579 16.7967 4.24143 16.686 4.42374 16.6105C4.60604 16.535 4.80143 16.4962 4.99876 16.4962C5.19608 16.4962 5.39147 16.535 5.57378 16.6105C5.75608 16.686 5.92173 16.7967 6.06126 16.9363L12 22.875L26.9388 7.93876C27.2205 7.65697 27.6027 7.49866 28.0013 7.49866C28.3998 7.49866 28.782 7.65697 29.0638 7.93876C29.3455 8.22055 29.5039 8.60274 29.5039 9.00126C29.5039 9.39977 29.3455 9.78197 29.0638 10.0638L29.0613 10.0613Z"})})},g8=x.forwardRef(({defaultChecked:r,checked:e,onCheckedChange:t,...n},i)=>{const s=x.useRef(null),[a,o]=oo({defaultProp:r,prop:e,onChange:t}),l=Ni(s,i);return $.jsx(hRe,{ref:l,checked:a,onCheckedChange:o,...n,children:$.jsxs(fRe,{forceMount:!0,children:[a===!0?$.jsx(dRe,{width:"1.6rem",fill:"neutral0"}):null,a==="indeterminate"?$.jsx(lde,{fill:"neutral0"}):null]})})}),hRe=q(fve)`
  background: ${r=>r.theme.colors.neutral0};
  width: 2rem;
  height: 2rem;
  border-radius: ${r=>r.theme.borderRadius};
  border: 1px solid ${r=>r.theme.colors.neutral300};
  position: relative;
  z-index: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  // this ensures the checkbox is always a square even in flex-containers.
  flex: 0 0 2rem;

  &[data-state='checked'],
  &[data-state='indeterminate'] {
    border: 1px solid ${r=>r.theme.colors.primary600};
    background-color: ${r=>r.theme.colors.primary600};
  }

  &[data-disabled] {
    background-color: ${r=>r.theme.colors.neutral200};
  }

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    z-index: -1;
    min-width: 44px;
    min-height: 44px;
  }
`,fRe=q(pve)`
  display: inline-flex;
  pointer-events: auto !important;
  width: 100%;
  height: 100%;
  cursor: pointer;
  justify-content: center;
  align-items: center;
`,uO=x.forwardRef(({children:r,...e},t)=>{const n=ga(e.id);return r?$.jsxs(Ie,{gap:2,children:[$.jsx(g8,{id:n,...e}),$.jsx(Je,{tag:"label",textColor:"neutral800",htmlFor:n,children:r})]}):$.jsx(g8,{ref:t,...e})});x.forwardRef((r,e)=>{const{id:t}=lRe();return $.jsx(Lz,{position:"start",children:$.jsx(uO,{"aria-labelledby":`${t}-title`,...r,ref:e})})});q(De)`
  word-break: break-all;
`;q(Ie)`
  border-bottom: 1px solid ${({theme:r})=>r.colors.neutral150};
`;const ti={DOWN:"ArrowDown",UP:"ArrowUp",RIGHT:"ArrowRight",LEFT:"ArrowLeft",ESCAPE:"Escape",ENTER:"Enter",END:"End",HOME:"Home",PAGE_UP:"PageUp",PAGE_DOWN:"PageDown"},pRe=q(De)`
  grid-template-columns: auto 1fr auto;
  grid-template-areas: 'startAction slides endAction';
`,mRe=q(Ie)`
  grid-area: slides;
`,v8=q(De)`
  grid-area: ${({$area:r})=>r};

  &:focus svg path,
  &:hover svg path {
    fill: ${({theme:r})=>r.colors.neutral900};
  }
`,gRe=x.forwardRef(({actions:r,children:e,label:t,nextLabel:n,onNext:i,onPrevious:s,previousLabel:a,secondaryLabel:o,selectedSlide:l,...c},u)=>{const d=x.useRef(null),h=x.useRef(null),f=x.Children.map(e,(g,y)=>x.cloneElement(g,{selected:y===l})),m=g=>{switch(g.key){case ti.RIGHT:{g.preventDefault(),h?.current&&h.current.focus(),i&&i();break}case ti.LEFT:{g.preventDefault(),d?.current&&d.current.focus(),s&&s();break}}};return $.jsx(De,{ref:u,...c,onKeyDown:m,children:$.jsxs(De,{padding:2,borderColor:"neutral200",hasRadius:!0,background:"neutral100",children:[$.jsxs(pRe,{tag:"section","aria-roledescription":"carousel","aria-label":t,display:"grid",position:"relative",children:[f&&f.length>1&&$.jsxs($.Fragment,{children:[$.jsx(v8,{tag:"button",onClick:s,$area:"startAction",ref:d,type:"button",children:$.jsx(up,{label:a,children:$.jsx(HW,{width:"1.6rem",height:"1.6rem",fill:"neutral600"})})}),$.jsx(v8,{tag:"button",onClick:i,$area:"endAction",ref:h,type:"button",children:$.jsx(up,{label:n,children:$.jsx(T2,{width:"1.6rem",height:"1.6rem",fill:"neutral600"})})})]}),$.jsx(mRe,{"aria-live":"polite",paddingLeft:2,paddingRight:2,width:"100%",overflow:"hidden",children:f}),r]}),o&&$.jsx(De,{paddingTop:2,paddingLeft:4,paddingRight:4,children:$.jsx(Az,{label:o,children:$.jsx(Ie,{justifyContent:"center",children:$.jsx(Je,{variant:"pi",textColor:"neutral600",ellipsis:!0,children:o})})})})]})})}),vRe={accordions:{S:"4.8rem",M:"8.8rem"},button:{S:"3.2rem",M:"3.6rem",L:"4rem"}},yRe={sizes:vRe,zIndices:{navigation:100,overlay:300,modal:310,dialog:320,popover:500,notification:700,tooltip:1e3},spaces:["0px","4px","8px","12px","16px","20px","24px","32px","40px","48px","56px","64px"],borderRadius:"4px",breakpoints:{initial:"@media(min-width: 0px)",small:"@media(min-width: 520px)",medium:"@media(min-width: 768px)",large:"@media(min-width: 1080px)"},fontSizes:["1.1rem","1.2rem","1.4rem","1.6rem","1.8rem","3.2rem"],lineHeights:[1.14,1.22,1.25,1.33,1.43,1.45,1.5],fontWeights:{regular:400,semiBold:500,bold:600},transitions:pCe,motion:{easings:TI,timings:SI}},bRe={color:{alternative100:"#f6ecfc",alternative200:"#e0c1f4",alternative500:"#ac73e6",alternative600:"#9736e8",alternative700:"#8312d1",buttonNeutral0:"#ffffff",buttonPrimary500:"#7b79ff",buttonPrimary600:"#4945ff",danger100:"#fcecea",danger200:"#f5c0b8",danger500:"#ee5e52",danger600:"#d02b20",danger700:"#b72b1a",neutral0:"#ffffff",neutral100:"#f6f6f9",neutral1000:"#181826",neutral150:"#eaeaef",neutral200:"#dcdce4",neutral300:"#c0c0cf",neutral400:"#a5a5ba",neutral500:"#8e8ea9",neutral600:"#666687",neutral700:"#4a4a6a",neutral800:"#32324d",neutral900:"#212134",primary100:"#f0f0ff",primary200:"#d9d8ff",primary500:"#7b79ff",primary600:"#4945ff",primary700:"#271fe0",secondary100:"#eaf5ff",secondary200:"#b8e1ff",secondary500:"#66b7f1",secondary600:"#0c75af",secondary700:"#006096",success100:"#eafbe7",success200:"#c6f0c2",success500:"#5cb176",success600:"#328048",success700:"#2f6846",warning100:"#fdf4dc",warning200:"#fae7b9",warning500:"#f29d41",warning600:"#d9822f",warning700:"#be5d01"}},Oz={colors:bRe.color,...yRe},Zc=(r="&")=>({theme:e,$hasError:t=!1})=>dt`
    outline: none;
    box-shadow: none;
    transition-property: border-color, box-shadow, fill;
    transition-duration: 0.2s;

    ${r}:focus-within {
      border: 1px solid ${t?e.colors.danger600:e.colors.primary600};
      box-shadow: ${t?e.colors.danger600:e.colors.primary600} 0px 0px 0px 2px;
    }
  `,[ERe,Fi]=Iv("Field",{}),Pd=x.forwardRef(({children:r,name:e,error:t=!1,hint:n,id:i,required:s=!1,...a},o)=>{const l=ga(i),[c,u]=x.useState();return $.jsx(ERe,{name:e,id:l,error:t,hint:n,required:s,labelNode:c,setLabelNode:u,children:$.jsx(Ie,{direction:"column",alignItems:"stretch",gap:1,ref:o,...a,children:r})})}),dO=x.forwardRef(({children:r,action:e,...t},n)=>{const{id:i,required:s,setLabelNode:a}=Fi("Label"),o=Ni(n,a);return r?$.jsxs(xRe,{ref:o,variant:"pi",textColor:"neutral800",fontWeight:"bold",...t,id:`${i}-label`,htmlFor:i,tag:"label",ellipsis:!0,children:[r,s&&$.jsx(Je,{"aria-hidden":!0,lineHeight:"1em",textColor:"danger600",children:"*"}),e&&$.jsx(wRe,{marginLeft:1,children:e})]}):null}),xRe=q(Je)`
  display: flex;
`,wRe=q(Ie)`
  line-height: 0;
  color: ${({theme:r})=>r.colors.neutral500};
`,UT=x.forwardRef(({endAction:r,startAction:e,disabled:t=!1,onChange:n,hasError:i,required:s,className:a,size:o="M",...l},c)=>{const{id:u,error:d,hint:h,name:f,required:m}=Fi("Input");let g;d?g=`${u}-error`:h&&(g=`${u}-hint`);const y=!!d,b=x.useRef(null),E=x.useRef(null),w=Ni(E,c),A=S=>{!t&&n&&n(S)};return x.useLayoutEffect(()=>{if(b.current&&E.current){const S=b.current.offsetWidth,_=E.current;if(_){const C=S+8+16;_.style.paddingRight=`${C}px`}}},[r]),$.jsxs(ARe,{gap:2,justifyContent:"space-between",$hasError:y||i,$disabled:t,$size:o,$hasLeftAction:!!e,$hasRightAction:!!r,className:a,children:[e,$.jsx(TRe,{id:u,name:f,ref:w,$size:o,"aria-describedby":g,"aria-invalid":y||i,"aria-disabled":t,disabled:t,"data-disabled":t?"":void 0,onChange:A,"aria-required":m||s,$hasLeftAction:!!e,$hasRightAction:!!r,...l}),r&&$.jsx(SRe,{ref:b,children:r})]})}),TRe=q.input`
  border: none;
  border-radius: ${({theme:r})=>r.borderRadius};
  cursor: ${r=>r["aria-disabled"]?"not-allowed":void 0};

  color: ${({theme:r})=>r.colors.neutral800};
  font-weight: 400;
  font-size: ${r=>r.theme.fontSizes[2]};
  line-height: 2.2rem;
  display: block;
  width: 100%;
  background: inherit;

  ::placeholder {
    color: ${({theme:r})=>r.colors.neutral500};
    opacity: 1;
  }

  &[aria-disabled='true'] {
    color: inherit;
  }

  //focus managed by InputWrapper
  &:focus {
    outline: none;
    box-shadow: none;
  }

  ${r=>{switch(r.$size){case"S":return dt`
          padding-inline-start: ${r.$hasLeftAction?0:r.theme.spaces[4]};
          padding-inline-end: ${r.$hasRightAction?0:r.theme.spaces[4]};
          padding-block: ${r.theme.spaces[1]};
        `;default:return dt`
          padding-inline-start: ${r.$hasLeftAction?0:r.theme.spaces[4]};
          padding-inline-end: ${r.$hasRightAction?0:r.theme.spaces[4]};
          padding-block: ${r.theme.spaces[2]};
        `}}}
`,SRe=q(Ie)`
  position: absolute;
  right: ${({theme:r})=>r.spaces[4]};
  top: 50%;
  transform: translateY(-50%);
`,ARe=q(Ie)`
  border: 1px solid ${({theme:r,$hasError:e})=>e?r.colors.danger600:r.colors.neutral200};
  border-radius: ${({theme:r})=>r.borderRadius};
  background: ${({theme:r})=>r.colors.neutral0};
  padding-inline-start: ${({$hasLeftAction:r,theme:e})=>r?e.spaces[4]:0};
  position: relative;

  ${Zc()}
  ${({theme:r,$disabled:e})=>e?dt`
          color: ${r.colors.neutral600};
          background: ${r.colors.neutral150};
        `:void 0};
`,Pz=()=>{const{id:r,hint:e,error:t}=Fi("Hint");return!e||t?null:$.jsx(Je,{variant:"pi",tag:"p",id:`${r}-hint`,textColor:"neutral600",children:e})},Mz=()=>{const{id:r,error:e}=Fi("Error");return!e||typeof e!="string"?null:$.jsx(Je,{variant:"pi",tag:"p",id:`${r}-error`,textColor:"danger600","data-strapi-field-error":!0,children:e})},Nz=x.forwardRef(({label:r,children:e,...t},n)=>$.jsx(_Re,{justifyContent:"unset",background:"transparent",borderStyle:"none",...t,type:"button",tag:"button",ref:n,children:$.jsx(up,{label:r,children:e})})),_Re=q(Ie)`
  font-size: 1.6rem;
  padding: 0;
`,Fz=Object.freeze(Object.defineProperty({__proto__:null,Action:Nz,Error:Mz,Hint:Pz,Input:UT,Label:dO,Root:Pd,useField:Fi},Symbol.toStringTag,{value:"Module"}));x.forwardRef(({actions:r,children:e,error:t,hint:n,label:i,labelAction:s,nextLabel:a,onNext:o,onPrevious:l,previousLabel:c,required:u,secondaryLabel:d,selectedSlide:h,id:f,...m},g)=>{const y=ga(f);return $.jsx(Pd,{hint:n,error:t,id:y,required:u,children:$.jsxs(Ie,{direction:"column",alignItems:"stretch",gap:1,children:[i&&$.jsx(dO,{action:s,children:i}),$.jsx(gRe,{ref:g,actions:r,label:i,nextLabel:a,onNext:o,onPrevious:l,previousLabel:c,secondaryLabel:d,selectedSlide:h,id:y,...m,children:e}),$.jsx(Pz,{}),$.jsx(Mz,{})]})})});q(De)`
  ${lz}
`;const CRe="data:image/svg+xml,%3csvg%20width='63'%20height='63'%20viewBox='0%200%2063%2063'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M42.5563%2011.9816C39.484%2010.3071%2035.8575%209.29097%2032.3354%209.13521C28.6443%208.92888%2024.8295%209.72318%2021.3336%2011.4129C20.9123%2011.5901%2020.5376%2011.8101%2020.1722%2012.0249L20.0108%2012.1179C19.8774%2012.1951%2019.7441%2012.2724%2019.608%2012.3536C19.3253%2012.5146%2019.0492%2012.6744%2018.7544%2012.8792C18.5463%2013.0329%2018.3395%2013.1759%2018.1301%2013.323C17.5658%2013.7208%2016.9868%2014.1317%2016.4983%2014.5979C14.8476%2015.9524%2013.5571%2017.6075%2012.6071%2018.9214C10.4365%2022.1566%209.08622%2025.9567%208.80702%2029.6143L8.7764%2030.1588C8.73328%2030.9196%208.68476%2031.7057%208.75353%2032.4555C8.76648%2032.6084%208.7661%2032.7638%208.77506%2032.914C8.78895%2033.229%208.80152%2033.5373%208.846%2033.8672L9.07396%2035.4221C9.09756%2035.5764%209.1198%2035.7413%209.1633%2035.9263L9.65919%2037.9272L10.138%2039.2823C10.2729%2039.6673%2010.4158%2040.0751%2010.6%2040.43C12.0292%2043.637%2014.1425%2046.4578%2016.7063%2048.585C19.0508%2050.5296%2021.824%2052.0023%2024.7491%2052.8452L26.2371%2053.2376C26.3781%2053.2693%2026.4926%2053.2889%2026.6031%2053.3058L26.7775%2053.3311C27.0052%2053.3636%2027.2195%2053.3986%2027.4445%2053.435C27.8598%2053.5076%2028.2672%2053.5748%2028.7079%2053.6183L30.5641%2053.7229C30.9516%2053.7249%2031.3352%2053.7068%2031.7081%2053.6874C31.9039%2053.681%2032.0984%2053.6681%2032.3288%2053.662C34.5253%2053.4772%2036.5106%2053.0634%2038.0516%2052.4652C38.1769%2052.4171%2038.3008%2052.3796%2038.4234%2052.3355C38.6727%2052.2499%2038.9259%2052.167%2039.1432%2052.0599L40.8591%2051.2626L42.5702%2050.266C42.9009%2050.0682%2043.0205%2049.6414%2042.8282%2049.2984C42.632%2048.9526%2042.2034%2048.8308%2041.8634%2049.0166L40.1792%2049.9218L38.4995%2050.6224C38.3169%2050.6953%2038.121%2050.7534%2037.9224%2050.8155C37.7838%2050.8489%2037.6518%2050.8983%2037.5012%2050.9408C36.0711%2051.435%2034.2445%2051.7425%2032.244%2051.8346C32.0442%2051.8383%2031.8471%2051.8379%2031.654%2051.8403C31.3051%2051.8414%2030.9602%2051.8451%2030.6392%2051.8305L28.9177%2051.6725C28.5476%2051.619%2028.1695%2051.5427%2027.7848%2051.4678C27.5639%2051.4167%2027.3376%2051.3737%2027.1299%2051.3374L26.9529%2051.2987C26.8704%2051.2834%2026.7772%2051.2667%2026.7333%2051.2543L25.3466%2050.8322C22.7651%2049.9789%2020.33%2048.5729%2018.2942%2046.7557C16.1056%2044.7951%2014.3339%2042.2335%2013.1742%2039.3582C12.0276%2036.6013%2011.5988%2033.2792%2011.9716%2030.0076C12.3145%2027.0213%2013.3948%2024.1635%2015.1858%2021.5083C15.3034%2021.3339%2015.421%2021.1596%2015.5212%2021.0196C16.4309%2019.8688%2017.5408%2018.5589%2018.9483%2017.496C19.3367%2017.1525%2019.7862%2016.856%2020.2611%2016.5478C20.4878%2016.4009%2020.7079%2016.2553%2020.8907%2016.1306C21.0974%2016.0048%2021.3188%2015.8831%2021.5348%2015.7694C21.6761%2015.6975%2021.8162%2015.619%2021.9388%2015.5576L22.1002%2015.4646C22.4002%2015.3037%2022.6749%2015.1546%2022.9908%2015.039L24.1186%2014.5715C24.3399%2014.4844%2024.5718%2014.4159%2024.7997%2014.3447C24.953%2014.2982%2025.0982%2014.2635%2025.2635%2014.2078C25.786%2014.0182%2026.3283%2013.9112%2026.9105%2013.7965C27.117%2013.7571%2027.3302%2013.7163%2027.5608%2013.6585C27.7553%2013.611%2027.9737%2013.5969%2028.2082%2013.5762C28.364%2013.5603%2028.5172%2013.5483%2028.6318%2013.5333C28.7876%2013.5173%2028.9342%2013.5066%2029.0927%2013.4867C29.3285%2013.4555%2029.5456%2013.4347%2029.7494%2013.4337C30.0237%2013.44%2030.2994%2013.4357%2030.5777%2013.4274C31.0811%2013.421%2031.5579%2013.4197%2032.0318%2013.4914C34.9664%2013.7352%2037.7144%2014.6085%2040.2052%2016.0868C42.3489%2017.3655%2044.2716%2019.1525%2045.7607%2021.264C47.0255%2023.0628%2047.9756%2025.0528%2048.4928%2027.0393C48.572%2027.3176%2048.6299%2027.5931%2048.6839%2027.8659C48.7154%2028.0428%2048.7563%2028.2145%2048.7892%2028.3636C48.8037%2028.4541%2048.8208%2028.5406%2048.8445%2028.6258C48.8749%2028.7443%2048.8986%2028.864%2048.9116%2028.9651L48.9793%2029.6047C48.9922%2029.7748%2049.0132%2029.9331%2049.0301%2030.0887C49.0668%2030.3268%2049.0889%2030.5608%2049.0964%2030.7561L49.1083%2031.9001C49.1312%2032.3307%2049.089%2032.7116%2049.0522%2033.0673C49.0384%2033.2598%2049.0126%2033.4443%2049.0123%2033.5824C48.9961%2033.6926%2048.9918%2033.7935%2048.9836%2033.8917C48.9753%2034.0072%2048.9724%2034.1148%2048.9414%2034.2554L48.5449%2036.3059C48.3134%2037.8623%2049.3793%2039.3365%2050.9488%2039.5822C52.0417%2039.7601%2053.1536%2039.2819%2053.7711%2038.3664C54.0063%2038.0176%2054.1604%2037.6257%2054.2227%2037.2064L54.5217%2035.2574C54.5514%2035.0756%2054.572%2034.83%2054.5846%2034.5791L54.6028%2034.2338C54.6098%2034.0598%2054.6223%2033.8779%2054.6347%2033.6788C54.6734%2033.1052%2054.7163%2032.4479%2054.6619%2031.8058L54.5867%2030.4289C54.5622%2030.0952%2054.5097%2029.76%2054.4559%2029.4181C54.431%2029.2572%2054.4048%2029.0896%2054.3826%2028.9074L54.2687%2028.104C54.2332%2027.9244%2054.1804%2027.7273%2054.1329%2027.5396L54.0643%2027.2454C54.0195%2027.071%2053.9773%2026.8927%2053.9338%2026.7076C53.8455%2026.3309%2053.7479%2025.9422%2053.613%2025.5571C52.84%2023.0292%2051.5383%2020.5194%2049.8338%2018.2799C47.8544%2015.682%2045.3333%2013.5087%2042.5563%2011.9816Z'%20fill='%234945FF'/%3e%3c/svg%3e",RRe=x.forwardRef(({children:r,small:e=!1,...t},n)=>$.jsxs("div",{role:"alert","aria-live":"assertive",ref:n,...t,children:[$.jsx(Fp,{children:r}),$.jsx(IRe,{src:CRe,"aria-hidden":!0,$small:e})]})),kRe=Bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,IRe=q.img`
  animation: ${kRe} 1s infinite linear;
  will-change: transform;
  ${({$small:r,theme:e})=>r&&`width: ${e.spaces[6]}; height: ${e.spaces[6]};`}
`,$Re=x.forwardRef(({allowCustomValue:r,autocomplete:e,children:t,className:n,clearLabel:i="clear",creatable:s=!1,createMessage:a=J=>`Create "${J}"`,defaultFilterValue:o,defaultTextValue:l,defaultOpen:c=!1,open:u,onOpenChange:d,disabled:h=!1,hasError:f,id:m,filterValue:g,hasMoreItems:y=!1,isPrintableCharacter:b,loading:E=!1,loadingMessage:w="Loading content...",name:A,noOptionsMessage:S=()=>"No results found",onChange:_,onClear:C,onCreateOption:k,onFilterValueChange:D,onInputChange:I,onTextValueChange:L,onLoadMore:M,placeholder:F="Select or enter a value",required:U=!1,size:W="M",startIcon:j,textValue:z,value:Q,...V},Y)=>{const[J,ue]=oo({prop:u,defaultProp:c,onChange:d}),[ne,ge]=oo({prop:z,defaultProp:r&&!l?Q:l,onChange:L}),[ae,ie]=oo({prop:g,defaultProp:o,onChange:D}),ee=x.useRef(null),be=x.useRef(null),we=Ni(be,Y),Re=x.useRef(null),Oe=vr=>{C&&!h&&(ge(""),ie(""),C(vr),be.current.focus())},me=vr=>{ue(vr)},Ue=vr=>{ge(vr)},Se=vr=>{ie(vr)},et=vr=>{I&&I(vr)},Qt=vr=>{_&&_(vr)},Ut=vr=>{M&&y&&!E&&M(vr)},Wi=()=>{k&&ne&&k(ne)},ya=ga(),Hi=`intersection-${dp(ya)}`;Dv(ee,Ut,{selectorToWatch:`#${Hi}`,skipWhen:!J});const{error:tt,...Lr}=Fi("Combobox"),Fs=!!tt||f,ko=Lr.id??m,Vi=Lr.name??A,Io=Lr.required||U;let bi;return tt?bi=`${ko}-error`:Lr.hint&&(bi=`${ko}-hint`),$.jsxs(na.Root,{autocomplete:e||(s?"list":"both"),onOpenChange:me,open:J,onTextValueChange:Ue,textValue:ne,allowCustomValue:s||r,disabled:h,required:Io,value:Q,onValueChange:Qt,filterValue:ae,onFilterValueChange:Se,isPrintableCharacter:b,children:[$.jsxs(LRe,{$hasError:Fs,$size:W,className:n,children:[$.jsxs(Ie,{flex:"1",tag:"span",gap:3,children:[j?$.jsx(Ie,{flex:"0 0 1.6rem",tag:"span","aria-hidden":!0,children:j}):null,$.jsx(ORe,{placeholder:F,id:ko,"aria-invalid":!!tt,onChange:et,ref:we,name:Vi,"aria-describedby":bi,...V})]}),$.jsxs(Ie,{tag:"span",gap:3,children:[ne&&C?$.jsx(DRe,{tag:"button",hasRadius:!0,background:"transparent",type:"button",padding:0,color:"neutral600",borderStyle:"none",onClick:Oe,"aria-disabled":h,"aria-label":i,title:i,ref:Re,children:$.jsx(Wd,{})}):null,$.jsx(PRe,{children:$.jsx(Dc,{fill:"neutral500"})})]})]}),$.jsx(na.Portal,{children:$.jsx(MRe,{sideOffset:4,children:$.jsxs(NRe,{ref:ee,children:[t,s?$.jsx(na.CreateItem,{onPointerUp:Wi,onClick:Wi,asChild:!0,children:$.jsx(CI,{children:$.jsx(Je,{children:a(ne??"")})})}):null,!s&&!E?$.jsx(na.NoValueFound,{asChild:!0,children:$.jsx(CI,{$hasHover:!1,children:$.jsx(Je,{children:S(ne??"")})})}):null,E?$.jsx(Ie,{justifyContent:"center",alignItems:"center",paddingTop:2,paddingBottom:2,children:$.jsx(RRe,{small:!0,children:w})}):null,$.jsx(De,{id:Hi,width:"100%",height:"1px"})]})})})]})}),DRe=q(De)`
  padding: 0;
`,LRe=q(na.Trigger)`
  position: relative;
  border: 1px solid ${({theme:r,$hasError:e})=>e?r.colors.danger600:r.colors.neutral200};
  border-radius: ${({theme:r})=>r.borderRadius};
  background: ${({theme:r})=>r.colors.neutral0};
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: ${({theme:r})=>r.spaces[4]};

  ${r=>{switch(r.$size){case"S":return dt`
          padding-inline-start: ${({theme:e})=>e.spaces[4]};
          padding-inline-end: ${({theme:e})=>e.spaces[3]};
          padding-block: ${({theme:e})=>e.spaces[1]};
        `;default:return dt`
          padding-inline-start: ${({theme:e})=>e.spaces[4]};
          padding-inline-end: ${({theme:e})=>e.spaces[3]};
          padding-block: ${({theme:e})=>e.spaces[2]};
        `}}}

  &[data-disabled] {
    color: ${({theme:r})=>r.colors.neutral600};
    background: ${({theme:r})=>r.colors.neutral150};
    cursor: not-allowed;
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:r,$hasError:e})=>Zc()({theme:r,$hasError:e})};
`,ORe=q(na.TextInput)`
  width: 100%;
  font-size: 1.4rem;
  line-height: 2.2rem;
  color: ${({theme:r})=>r.colors.neutral800};
  padding: 0;
  border: none;
  background-color: transparent;

  &:focus-visible {
    outline: none;
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,PRe=q(na.Icon)`
  border: none;
  background: transparent;
  padding: 0;
  color: ${({theme:r})=>r.colors.neutral600};
  display: flex;

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,MRe=q(na.Content)`
  background: ${({theme:r})=>r.colors.neutral0};
  box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  border: 1px solid ${({theme:r})=>r.colors.neutral150};
  border-radius: ${({theme:r})=>r.borderRadius};
  width: var(--radix-combobox-trigger-width);
  /* This is from the design-system figma file. */
  max-height: 15rem;
  z-index: ${({theme:r})=>r.zIndices.popover};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${r=>r.theme.motion.timings[200]};

    /* The select can't animate out yet, watch https://github.com/radix-ui/primitives/issues/1893, or take a look and solve it yourself. */
    &[data-state='open'] {
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownIn};
      }
    }
  }
`,NRe=q(na.Viewport)`
  padding: ${({theme:r})=>r.spaces[1]};
`,FRe=x.forwardRef(({children:r,value:e,disabled:t,textValue:n,...i},s)=>$.jsx(na.ComboboxItem,{asChild:!0,value:e,disabled:t,textValue:n,children:$.jsx(CI,{ref:s,...i,children:$.jsx(na.ItemText,{asChild:!0,children:$.jsx(Je,{children:r})})})})),CI=q.div`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  padding: ${({theme:r})=>r.spaces[2]} ${({theme:r})=>r.spaces[4]};
  background-color: ${({theme:r})=>r.colors.neutral0};
  border-radius: ${({theme:r})=>r.borderRadius};
  user-select: none;

  &[data-state='checked'] {
    background-color: ${({theme:r})=>r.colors.primary100};
    color: ${({theme:r})=>r.colors.primary600};
    font-weight: bold;
  }

  &:hover,
  &[data-highlighted] {
    outline: none;
    background-color: ${({theme:r,$hasHover:e=!0})=>e?r.colors.primary100:r.colors.neutral0};
  }

  &[data-highlighted] {
    color: ${({theme:r})=>r.colors.primary600};
    font-weight: bold;
  }
`;x.forwardRef((r,e)=>$.jsx(iye,{...r,asChild:!0,ref:e}));x.forwardRef((r,e)=>$.jsxs(sye,{children:[$.jsx(BRe,{}),$.jsx(URe,{ref:e,...r})]}));const BRe=q(aye)`
  background-color: ${r=>r.theme.colors.neutral800};
  position: fixed;
  inset: 0;
  z-index: ${r=>r.theme.zIndices.overlay};
  opacity: 0.2;

  @media (prefers-reduced-motion: no-preference) {
    animation: ${Ur.overlayFadeIn} ${r=>r.theme.motion.timings[200]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,URe=q(oye)`
  max-width: 42rem;
  height: min-content;
  width: 100%;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  flex-direction: column;

  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  border-radius: ${r=>r.theme.borderRadius};
  background-color: ${r=>r.theme.colors.neutral0};
  box-shadow: ${r=>r.theme.shadows.popupShadow};
  z-index: ${r=>r.theme.zIndices.modal};

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation-duration: ${r=>r.theme.motion.timings[200]};
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};
      animation-name: ${Ur.modalPopIn};
    }

    &[data-state='closed'] {
      animation-duration: ${r=>r.theme.motion.timings[120]};
      animation-timing-function: ${r=>r.theme.motion.easings.easeOutQuad};
      animation-name: ${Ur.modalPopOut};
    }
  }
`;x.forwardRef(({children:r,...e},t)=>$.jsx(uye,{asChild:!0,children:$.jsx(WRe,{tag:"h2",variant:"beta",ref:t,padding:6,fontWeight:"bold",...e,children:r})}));const WRe=q(Je)`
  display: flex;
  justify-content: center;
  border-bottom: solid 1px ${r=>r.theme.colors.neutral150};
`;x.forwardRef(({children:r,icon:e,...t},n)=>$.jsx(Ie,{ref:n,gap:2,direction:"column",paddingTop:8,paddingBottom:8,paddingLeft:6,paddingRight:6,...t,children:typeof r=="string"?$.jsxs($.Fragment,{children:[e?x.cloneElement(e,{width:24,height:24}):null,$.jsx(HRe,{children:r})]}):r}));const HRe=x.forwardRef((r,e)=>$.jsx(dye,{asChild:!0,children:$.jsx(Je,{ref:e,variant:"omega",...r,tag:"p"})}));x.forwardRef((r,e)=>$.jsx(VRe,{ref:e,gap:2,padding:4,justifyContent:"space-between",...r,tag:"footer"}));const VRe=q(Ie)`
  border-top: solid 1px ${r=>r.theme.colors.neutral150};
  flex: 1;
`;x.forwardRef((r,e)=>$.jsx(cye,{...r,asChild:!0,ref:e}));x.forwardRef((r,e)=>$.jsx(lye,{...r,asChild:!0,ref:e}));function pl(r,e){const t=x.useRef(null);return e&&t.current&&GRe(e,t.current)&&(e=t.current),t.current=e??null,x.useMemo(()=>new ehe(r,e),[r,e])}function GRe(r,e){if(r===e)return!0;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(const i of t)if(e[i]!==r[i])return!1;return!0}VW`
${dt`
  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  * {
    margin: 0;
  }

  html {
    /* Sets 1rem === 10px */
    font-size: 62.5%;
  }

  body {
    height: 100%;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans',
      'Helvetica Neue', sans-serif;
    color: ${({theme:r})=>r.colors.neutral800};
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
  }

  img,
  picture,
  video,
  canvas {
    display: block;
    max-width: 100%;
  }

  input,
  button,
  textarea,
  select {
    padding: 0;
    font: inherit;
  }

  button {
    border: unset;
    background: unset;
    padding: unset;
    margin: unset;
  }

  p,
  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    overflow-wrap: break-word;
    font: unset;
  }

  #root {
    isolation: isolate;
  }

  ol,
  ul {
    list-style: none;
    padding: unset;
    margin: unset;
  }

  table {
    border-collapse: collapse;
    border-spacing: 0;
  }

  *:focus-visible {
    outline: 2px solid ${({theme:r})=>r.colors.primary600};
    outline-offset: 2px;
  }

  /* Focusing the button with a mouse, touch, or stylus will show a subtle drop shadow. */
  *:focus:not(:focus-visible) {
    outline: none;
  }

  .lock-body-scroll {
    height: 100vh;
    overflow-y: hidden;
  }
`}
`;const y8="en-EN",qRe=()=>typeof navigator>"u"?y8:navigator.language?navigator.language:y8,[ydt,WT]=Iv("StrapiDesignSystem",{locale:qRe()}),jRe=ghe,Bz=x.forwardRef(({container:r=globalThis?.document?.body,...e},t)=>r?ha.createPortal($.jsx(De,{ref:t,...e}),r):null);Bz.displayName="Portal";const hO=x.forwardRef(({children:r,viewportRef:e,...t},n)=>$.jsxs(KRe,{ref:n,...t,children:[$.jsx(zRe,{ref:e,children:r}),$.jsx(b8,{orientation:"vertical",children:$.jsx(E8,{})}),$.jsx(b8,{orientation:"horizontal",children:$.jsx(E8,{})})]})),KRe=q(Uye)`
  width: 100%;
  height: 100%;
  overflow: hidden;
  display: flex;
`,zRe=q(Wye)`
  min-width: 100%;
  padding-inline: 4px;
`,b8=q(Hye)`
  display: flex;
  /* ensures no selection */
  user-select: none;
  /* disable browser handling of all panning and zooming gestures on touch devices */
  touch-action: none;

  &[data-orientation='vertical'] {
    width: 0.4rem;
  }

  &[data-orientation='horizontal'] {
    flex-direction: column;
    height: 0.4rem;
  }
`,E8=q(Vye)`
  position: relative;
  flex: 1;
  background-color: ${r=>r.theme.colors.neutral150};
  border-radius: var(--scrollbar-size);

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    min-width: 44px;
    min-height: 44px;
  }
`,YRe=x.forwardRef(({onClear:r,clearLabel:e="Clear",startIcon:t,disabled:n,hasError:i,children:s,id:a,size:o="M",withTags:l,...c},u)=>{const d=x.useRef(null),h=g=>{r&&!n&&(r(g),d.current.focus())},{labelNode:f}=Fi("SelectTrigger"),m=Ni(d,u);return $.jsx(fa.Trigger,{asChild:!0,children:$.jsxs(XRe,{"aria-disabled":n,$hasError:i,ref:m,alignItems:"center",justifyContent:"space-between",position:"relative",overflow:"hidden",hasRadius:!0,background:n?"neutral150":"neutral0",gap:4,cursor:"default","aria-labelledby":f?`${a}-label`:void 0,$size:o,$withTags:l,...c,children:[$.jsxs(Ie,{flex:"1",tag:"span",gap:3,children:[t&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:t}),s]}),$.jsxs(Ie,{tag:"span",gap:3,children:[r?$.jsx(QRe,{tag:"button",hasRadius:!0,background:"transparent",role:"button",tabIndex:0,onClick:h,"aria-disabled":n,"aria-label":e,title:e,cursor:"pointer",children:$.jsx(Wd,{})}):null,$.jsx(ZRe,{children:$.jsx(Dc,{})})]})]})})}),QRe=q(De)`
  border: none;
  display: flex;

  svg {
    height: 1.1rem;
    width: 1.1rem;
  }

  svg path {
    fill: ${({theme:r})=>r.colors.neutral500};
  }
`,XRe=q(Ie)`
  border: 1px solid ${({theme:r,$hasError:e})=>e?r.colors.danger600:r.colors.neutral200};
  ${r=>{switch(r.$size){case"S":return dt`
          padding-block: ${r.theme.spaces[1]};
          padding-inline-start: ${r.$withTags?r.theme.spaces[1]:r.theme.spaces[4]};
          padding-inline-end: ${r.theme.spaces[3]};
        `;default:return dt`
          padding-block: ${r.$withTags?"0.3rem":r.theme.spaces[2]};
          padding-inline-start: ${r.$withTags?r.theme.spaces[1]:r.theme.spaces[4]};
          padding-inline-end: ${r.theme.spaces[3]};
        `}}}
  cursor: pointer;

  &[aria-disabled='true'] {
    color: ${r=>r.theme.colors.neutral500};
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:r,$hasError:e})=>Zc()({theme:r,$hasError:e})};
`,ZRe=q(fa.Icon)`
  display: flex;
  & > svg {
    fill: ${({theme:r})=>r.colors.neutral500};
  }
`,JRe=x.forwardRef(({children:r,placeholder:e,...t},n)=>$.jsx(eke,{ref:n,ellipsis:!0,...t,children:$.jsx(tke,{placeholder:e,children:r})})),eke=q(Je)`
  flex: 1;
  font-size: 1.4rem;
  line-height: 2.2rem;
`,tke=q(fa.Value)`
  display: flex;
  gap: ${({theme:r})=>r.spaces[1]};
  flex-wrap: wrap;
`,rke=x.forwardRef((r,e)=>$.jsx(nke,{ref:e,...r,children:$.jsx(hO,{children:r.children})})),nke=q(fa.Content)`
  background: ${({theme:r})=>r.colors.neutral0};
  box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  border: 1px solid ${({theme:r})=>r.colors.neutral150};
  border-radius: ${({theme:r})=>r.borderRadius};
  min-width: var(--radix-select-trigger-width);
  max-height: 15.6rem;
  z-index: ${({theme:r})=>r.zIndices.popover};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${r=>r.theme.motion.timings[200]};

    /* The select can't animate out yet, watch https://github.com/radix-ui/primitives/issues/1893, or take a look and solve it yourself. */
    &[data-state='open'] {
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownIn};
      }
    }
  }
`,ike=q(fa.Viewport)`
  padding: ${({theme:r})=>r.spaces[1]};
`,ske=x.forwardRef((r,e)=>$.jsx(oke,{ref:e,...r})),ake=dt`
  width: 100%;
  border: none;
  text-align: left;
  outline-offset: -3px;
  border-radius: ${r=>r.theme.borderRadius};
  padding: ${r=>`${r.theme.spaces[2]} ${r.theme.spaces[4]}`};
  padding-left: ${({theme:r})=>r.spaces[4]};
  background-color: ${({theme:r})=>r.colors.neutral0};
  display: flex;
  align-items: center;
  gap: ${({theme:r})=>r.spaces[2]};
  white-space: nowrap;
  user-select: none;
  color: ${({theme:r})=>r.colors.neutral800};

  &:focus-visible {
    outline: none;
    background-color: ${({theme:r})=>r.colors.primary100};
    cursor: pointer;
  }
`,oke=q(fa.Item)`
  ${ake}

  &:hover {
    background-color: ${({theme:r})=>r.colors.primary100};
  }

  &[data-state='checked'] {
    font-weight: bold;
    background-color: ${({theme:r})=>r.colors.primary100};
    color: ${({theme:r})=>r.colors.primary600};
    font-weight: bold;
  }
`,Uz=fa.Root,Wz=YRe,Hz=JRe,Vz=fa.Portal,Gz=rke,qz=ike,fO=ske,jz=fa.ItemIndicator,Kz=fa.ItemText,lke=fa.Group,x8=x.forwardRef(({children:r,clearLabel:e="Clear",customizeContent:t,disabled:n,hasError:i,id:s,name:a,onChange:o,onClear:l,onCloseAutoFocus:c,onReachEnd:u,placeholder:d,required:h,size:f,startIcon:m,value:g,...y},b)=>{const[E,w]=x.useState(),[A,S]=x.useState(!1),_=J=>{S(J)},C=J=>{l&&l(J),o||w("")},k=J=>{o?o(typeof g=="number"?Number(J):J):w(J)},D=x.useRef(null),I=ga(),L=`intersection-${dp(I)}`;Dv(D,J=>{u&&u(J)},{selectorToWatch:`#${L}`,skipWhen:!A});const{error:F,required:U,...W}=Fi("SingleSelect"),j=!!F||i,z=W.id??s,Q=W.name??a;let V;F?V=`${z}-error`:W.hint&&(V=`${z}-hint`);const Y=(typeof g<"u"&&g!==null?g.toString():E)??"";return $.jsxs(Uz,{onOpenChange:_,disabled:n,required:U??h,onValueChange:k,value:Y,...y,children:[$.jsx(Wz,{ref:b,id:z,name:Q,startIcon:m,hasError:j,disabled:n,clearLabel:e,onClear:Y&&l?C:void 0,"aria-label":y["aria-label"],"aria-describedby":V??y["aria-describedby"],size:f,children:$.jsx(Hz,{placeholder:d,textColor:Y?"neutral800":"neutral600",children:Y&&t?t(Y):void 0})}),$.jsx(Vz,{children:$.jsx(Gz,{position:"popper",sideOffset:4,onCloseAutoFocus:c,children:$.jsxs(qz,{ref:D,children:[r,$.jsx(De,{id:L,width:"100%",height:"1px"})]})})})]})}),w8=x.forwardRef(({value:r,startIcon:e,children:t,...n},i)=>$.jsxs(fO,{ref:i,value:r.toString(),...n,children:[e&&$.jsx(Ie,{tag:"span","aria-hidden":!0,children:e}),$.jsx(Je,{lineHeight:"20px",width:"100%",children:$.jsx(Kz,{children:t})})]})),cke=200,T8=15,[uke,Bp]=Iv("DatePicker"),dke=x.forwardRef(({calendarLabel:r,className:e,initialDate:t,locale:n,maxDate:i,minDate:s,monthSelectLabel:a="Month",onChange:o,value:l,yearSelectLabel:c="Year",hasError:u,id:d,name:h,disabled:f=!1,required:m=!1,onClear:g,clearLabel:y="Clear",size:b="M",...E},w)=>{const A=Qf(),S=WT("DatePicker"),_=n??S.locale,C=pl(_,{day:"2-digit",month:"2-digit",year:"numeric"}),[k,D]=x.useState(!1),[I,L]=x.useState(null),[M,F]=x.useState(null),[U,W]=x.useState(null),[j,z]=x.useState(),[Q,V]=oo({defaultProp:t?du(t):void 0,prop:l?du(l):void 0,onChange(et){o&&o(et?.toDate(A))}}),[Y,J]=x.useMemo(()=>{const et=t?du(t):_2("UTC"),Qt=s?du(s):et.set({day:1,month:1,year:et.year-cke});let Ut=i?du(i):et.set({day:31,month:12,year:et.year+T8});return Ut.compare(Qt)<0&&(Ut=Qt.set({day:31,month:12,year:Qt.year+T8})),[Qt,Ut]},[s,i,t]),[ue,ne]=x.useState(hke({currentValue:Q,minDate:Y,maxDate:J})),ge=ga(),ae=x.useRef(null),ie=et=>{g&&!f&&(z(""),V(void 0),g(et),M?.focus())},ee=x.useCallback(et=>{et&&Q&&ne(Q),D(et)},[Q]);hp(()=>{if(l){const et=du(l);z(C.format(et.toDate(A))),ne(et)}else z("")},[l,C,A]),hp(()=>{if(t&&j===void 0){const et=du(t);z(C.format(et.toDate(A)))}},[t,j,C,A]);const{error:be,...we}=Fi("Combobox"),Re=!!be||u,Oe=we.id??d,me=we.name??h,Ue=we.required||m;let Se;return be?Se=`${Oe}-error`:we.hint&&(Se=`${Oe}-hint`),$.jsxs(uke,{calendarDate:ue,content:U,contentId:ge,disabled:f,locale:_,minDate:Y,maxDate:J,open:k,onCalendarDateChange:ne,onContentChange:W,onOpenChange:ee,onTextInputChange:F,onTextValueChange:z,onTriggerChange:L,onValueChange:V,required:Ue,textInput:M,textValue:j,timeZone:A,trigger:I,value:Q,children:[$.jsxs(pke,{className:e,hasError:Re,size:b,children:[$.jsx(cde,{fill:"neutral500","aria-hidden":!0}),$.jsx(yke,{ref:w,"aria-describedby":Se,id:Oe,name:me,...E}),j&&g?$.jsx(gke,{tag:"button",hasRadius:!0,background:"transparent",type:"button",onClick:ie,"aria-disabled":f,"aria-label":y,title:y,ref:ae,children:$.jsx(Wd,{})}):null]}),$.jsx(Bz,{children:$.jsx(wke,{label:r,children:$.jsx(Cke,{monthSelectLabel:a,yearSelectLabel:c})})})]})}),S8=r=>!!r.match(/^[^a-zA-Z]*$/),hke=({currentValue:r,minDate:e,maxDate:t})=>{const n=_2("UTC");return r||(zR(e,n)===e&&YR(t,n)===t?n:zR(e,n)===n?e:YR(t,n)===n?t:n)},fke="DatePickerTrigger",pke=x.forwardRef(({hasError:r,size:e,...t},n)=>{const i=Bp(fke),s=Ni(n,o=>i.onTriggerChange(o)),a=()=>{i.disabled||i.onOpenChange(!0)};return $.jsx(Ip,{asChild:!0,trapped:i.open,onMountAutoFocus:o=>{o.preventDefault()},onUnmountAutoFocus:o=>{document.getSelection()?.empty(),o.preventDefault()},children:$.jsx(mke,{ref:s,$hasError:r,$size:e,...t,hasRadius:!0,gap:3,overflow:"hidden",background:i.disabled?"neutral150":"neutral0",onClick:ud(t.onClick,()=>{i.textInput?.focus()}),onPointerDown:ud(t.onPointerDown,o=>{const l=o.target;l.hasPointerCapture(o.pointerId)&&l.releasePointerCapture(o.pointerId),(l.closest("button")??l.closest("div"))===o.currentTarget&&o.button===0&&o.ctrlKey===!1&&(a(),i.textInput?.focus())})})})}),mke=q(Ie)`
  border: 1px solid ${({theme:r,$hasError:e})=>e?r.colors.danger600:r.colors.neutral200};
  ${r=>{switch(r.$size){case"S":return dt`
          padding-block: ${r.theme.spaces[1]};
          padding-inline: ${r.theme.spaces[3]};
        `;default:return dt`
          padding-block: ${r.theme.spaces[2]};
          padding-inline: ${r.theme.spaces[3]};
        `}}}

  & > svg {
    flex: 1 0 auto;
  }

  &[data-disabled] {
    color: ${({theme:r})=>r.colors.neutral600};
    background: ${({theme:r})=>r.colors.neutral150};
    cursor: not-allowed;
  }

  /* Required to ensure the below inputFocusStyles are adhered too */
  &:focus-visible {
    outline: none;
  }

  ${({theme:r,$hasError:e})=>Zc()({theme:r,$hasError:e})};
`,gke=q(De)`
  border: none;
  color: ${({theme:r})=>r.colors.neutral600};
  padding: 0;
  cursor: pointer;
`,vke="DatePickerTextInput",yke=x.forwardRef(({placeholder:r,...e},t)=>{const n=Bp(vke),{onTextValueChange:i,textValue:s,onTextInputChange:a,onOpenChange:o,disabled:l,locale:c}=n,u=Ni(t,b=>a(b)),d=()=>{l||o(!0)},h=pl(c,{year:"numeric",month:"2-digit",day:"2-digit"}),[f,m,g]=x.useMemo(()=>{const b=h.formatToParts(new Date),E=b.filter(S=>S.type==="year"||S.type==="month"||S.type==="day"),w=E.map(S=>{switch(S.type){case"day":return"DD";case"month":return"MM";case"year":return"YYYY";default:return""}}),A=b.find(S=>S.type==="literal")?.value??"";return[w,A,E]},[h]),y=f.map(b=>`\\d{${b.length}}`).join(`\\${m}`);return $.jsx(Eke,{role:"combobox",type:"text",inputMode:"numeric",ref:u,"aria-autocomplete":"none","aria-controls":n.contentId,"aria-disabled":n.disabled,"aria-expanded":n.open,"aria-required":n.required,"aria-haspopup":"dialog","data-state":n.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,pattern:y,placeholder:r??f.join(m),...e,value:s??"",onBlur:ud(e.onBlur,()=>{if(!n.textValue){n.onValueChange(void 0);return}n.onTextValueChange(h.format(n.calendarDate.toDate(n.timeZone))),n.onValueChange(n.calendarDate)}),onChange:ud(e.onChange,b=>{if(S8(b.target.value)){const E=b.target.value.split(m),[w,A,S]=g.map((F,U)=>{const W=E[U];return{...F,value:W}}).sort((F,U)=>F.type==="year"?1:U.type==="year"?-1:F.type==="month"?1:U.type==="month"?-1:0).map(F=>F.value),_=n.calendarDate.year;let C=n.calendarDate.year;if(S){const F=S.length===1?`0${S}`:S;C=S.length<3?Number(`${_}`.slice(0,4-F.length)+F):Number(F)}S&&S.length<3&&C>n.maxDate.year&&(C-=100);const k=n.calendarDate.set({year:C}),D=k.calendar.getMonthsInYear(k),I=k.set({month:A&&Number(A)<=D?Number(A):void 0}),L=I.calendar.getDaysInMonth(I),M=I.set({day:w&&Number(w)<=L?Number(w):void 0});n.onCalendarDateChange(bke(M,n.minDate,n.maxDate)),n.onTextValueChange(b.target.value)}}),onKeyDown:ud(e.onKeyDown,b=>{if(!n.open&&(S8(b.key)||["ArrowDown","Backspace"].includes(b.key)))d();else if(["Tab"].includes(b.key)&&n.open)b.preventDefault();else if(["Escape"].includes(b.key))n.open?n.onOpenChange(!1):(n.onValueChange(void 0),n.onTextValueChange("")),b.preventDefault();else if(n.open&&["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(b.key))switch(b.preventDefault(),b.key){case"ArrowDown":{const E=n.calendarDate.add({weeks:1});if(n.maxDate&&E.compare(n.maxDate)>0)return;n.onCalendarDateChange(E);return}case"ArrowRight":{const E=n.calendarDate.add({days:1});if(n.maxDate&&E.compare(n.maxDate)>0)return;n.onCalendarDateChange(E);return}case"ArrowUp":{const E=n.calendarDate.subtract({weeks:1});if(n.minDate&&E.compare(n.minDate)<0)return;n.onCalendarDateChange(E);return}case"ArrowLeft":{const E=n.calendarDate.subtract({days:1});if(n.minDate&&E.compare(n.minDate)<0)return;n.onCalendarDateChange(E)}}else n.open&&["Enter"].includes(b.key)&&(b.preventDefault(),i(h.format(n.calendarDate.toDate(n.timeZone))),n.onValueChange(n.calendarDate),n.onOpenChange(!1))})})});function bke(r,e,t){return e&&(r=YR(r,e)),t&&(r=zR(r,t)),r}const Eke=q.input`
  width: 100%;
  font-size: 1.4rem;
  line-height: 2.2rem;
  color: ${({theme:r})=>r.colors.neutral800};
  border: none;
  background-color: transparent;

  &:focus-visible {
    outline: none;
  }

  &[aria-disabled='true'] {
    cursor: inherit;
  }
`,xke="DatePickerContent",wke=x.forwardRef((r,e)=>{const[t,n]=x.useState(),i=Bp(xke);if(hp(()=>{n(new DocumentFragment)},[]),!i.open){const s=t;return s?ha.createPortal($.jsx("div",{children:r.children}),s):null}return $.jsx(Ske,{...r,ref:e})}),Tke="DatePickerContent",Ske=x.forwardRef((r,e)=>{const{label:t="Choose date",...n}=r,{onOpenChange:i,...s}=Bp(Tke),{x:a,y:o,refs:l,strategy:c,placement:u}=TH({strategy:"fixed",placement:"bottom-start",middleware:[SH({mainAxis:4}),AH(),_H()],elements:{reference:s.trigger},whileElementsMounted:xH});x.useEffect(()=>{const h=()=>{i(!1)};return window.addEventListener("blur",h),window.addEventListener("resize",h),()=>{window.removeEventListener("blur",h),window.removeEventListener("resize",h)}},[i]);const d=Ni(e,h=>s.onContentChange(h),l.setFloating);return kp(),$.jsx(SG,{allowPinchZoom:!0,children:$.jsx(jRe,{asChild:!0,onFocusOutside:h=>{h.preventDefault()},onDismiss:()=>{i(!1)},children:$.jsx(Ake,{ref:d,"data-state":s.open?"open":"closed","data-side":u.includes("top")?"top":"bottom",onContextMenu:h=>h.preventDefault(),id:s.contentId,role:"dialog","aria-modal":"true","aria-label":t,style:{left:a,top:o,position:c},hasRadius:!0,background:"neutral0",padding:1,...n})})})}),Ake=q(De)`
  box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  z-index: ${({theme:r})=>r.zIndices.popover};
  border: 1px solid ${({theme:r})=>r.colors.neutral150};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${r=>r.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownIn};
      }
    }
  }
`,_ke="DatePickerCalendar",Cke=x.forwardRef(({monthSelectLabel:r,yearSelectLabel:e,...t},n)=>{const{locale:i,timeZone:s,minDate:a,maxDate:o,calendarDate:l,onCalendarDateChange:c}=Bp(_ke),u=Ide(l),d=x.useMemo(()=>{const w=a.year,A=o.year;return[...Array(A-w+1).keys()].map(S=>(w+S).toString())},[a,o]),h=pl(i,{month:"long"}),f=x.useMemo(()=>[...Array(l.calendar.getMonthsInYear(l)).keys()].map(w=>h.format(l.set({month:w+1}).toDate(s))),[l,h,s]),m=pl(i,{weekday:"short"}),g=x.useMemo(()=>{const w=YW(_2(s),i);return[...new Array(7).keys()].map(A=>{const _=w.add({days:A}).toDate(s);return m.format(_)})},[s,i,m]),y=w=>{if(typeof w=="number")return;const A=l.set({month:f.indexOf(w)+1});c(A)},b=w=>{if(typeof w=="number")return;const A=l.set({year:parseInt(w,10)});c(A)},E=Rke(u,i);return $.jsxs(Ie,{ref:n,direction:"column",alignItems:"stretch",padding:4,...t,children:[$.jsxs(kke,{justifyContent:"flex-start",paddingBottom:4,paddingLeft:2,paddingRight:2,gap:2,children:[$.jsx(Pd,{children:$.jsx(x8,{"aria-label":r,value:f[l.month-1],onChange:y,children:f.map(w=>$.jsx(w8,{value:w,children:w},w))})}),$.jsx(Pd,{children:$.jsx(x8,{value:l.year.toString(),"aria-label":e,onChange:b,children:d.map(w=>$.jsx(w8,{value:w,children:w},w))})})]}),$.jsxs("table",{role:"grid",children:[$.jsx("thead",{"aria-hidden":!0,children:$.jsx("tr",{"aria-rowindex":0,children:g.map((w,A)=>$.jsx(Ike,{"aria-colindex":A,children:w},w))})}),$.jsx("tbody",{children:[...new Array(6).keys()].map(w=>$.jsx("tr",{"aria-rowindex":w+2,children:E(w).map((A,S)=>A?$.jsx(Lke,{"aria-colindex":S+1,date:A,startDate:u,disabled:a.compare(A)>0||A.compare(o)>0},A.toString()):$.jsx(zz,{"aria-colindex":S+1},S+1))},w))})]})]})}),Rke=(r,e)=>t=>{let n=r.add({weeks:t});const i=[];n=YW(n,e);const s=KW(n,e);for(let a=0;a<s;a++)i.push(null);for(;i.length<7;){i.push(n);const a=n.add({days:1});if(jW(n,a))break;n=a}for(;i.length<7;)i.push(null);return i},kke=q(Ie)`
  div[role='combobox'] {
    border: 1px solid transparent;
    background: transparent;
    font-weight: ${r=>r.theme.fontWeights.bold};

    svg {
      fill: ${({theme:r})=>r.colors.neutral500};
    }

    &:hover {
      background-color: ${({theme:r})=>r.colors.neutral100};
    }
  }
`,Ike=x.forwardRef(({children:r,...e},t)=>$.jsx($ke,{tag:"th",role:"gridcell",ref:t,...e,height:"2.4rem",width:"3.2rem",children:$.jsx(Je,{variant:"pi",fontWeight:"bold",color:"neutral800",children:r.slice(0,2)})})),$ke=q(De)`
  border-radius: ${({theme:r})=>r.borderRadius};
  text-transform: capitalize;
`,Dke="DatePickerCalendarCell",Lke=x.forwardRef(({date:r,startDate:e,disabled:t,...n},i)=>{const{timeZone:s,locale:a,calendarDate:o,onValueChange:l,onOpenChange:c,onTextValueChange:u,onCalendarDateChange:d}=Bp(Dke),h=jW(o,r),f=pl(a,{weekday:"long",day:"numeric",month:"long",year:"numeric"}),m=x.useMemo(()=>f.format(r.toDate(s)),[f,r,s]),g=pl(a,{day:"numeric",calendar:r.calendar.identifier}),y=x.useMemo(()=>g.formatToParts(r.toDate(s)).find(S=>S.type==="day").value,[g,r,s]),b=pl(a,{day:"2-digit",month:"2-digit",year:"numeric"}),E=$de(e),w=r.compare(e)<0||r.compare(E)>0;let A="neutral900";return h?A="primary600":w&&(A="neutral600"),$.jsx(zz,{tag:"td",role:"gridcell",ref:i,"aria-selected":h,...n,hasRadius:!0,"aria-label":m,tabIndex:h?0:-1,background:h?"primary100":"neutral0",cursor:"pointer",onPointerDown:ud(n.onPointerDown,S=>{S.preventDefault(),d(r),l(r),u(b.format(r.toDate(s))),c(!1)}),"aria-disabled":t,children:$.jsx(Je,{variant:"pi",textColor:A,children:y})})}),zz=q(De)`
  text-align: center;
  padding: 0.7rem;
  // Trick to prevent the outline from overflowing because of the general outline-offset
  outline-offset: -2px !important;
  &[aria-disabled='true'] {
    pointer-events: none;
    opacity: 0.5;
  }

  &[aria-disabled='false'] {
    &:hover {
      background: ${({theme:r})=>r.colors.primary100};
      color: ${({theme:r})=>r.colors.primary600};
    }
  }
`,du=r=>{const e=r.toISOString(),t=aH(e,"UTC");return JW(t)},H_=r=>!!r.match(/^[^a-zA-Z]*$/),Oke=x.forwardRef(({step:r=15,value:e,defaultValue:t,onChange:n,...i},s)=>{const a=WT("TimePicker"),[o,l]=x.useState(""),[c,u]=oo({prop:e,defaultProp:t,onChange:n}),d=pl(a.locale,{hour:"2-digit",minute:"2-digit",hour12:!1}),h=x.useMemo(()=>{const E=d.formatToParts(new Date),{value:w}=E.find(A=>A.type==="literal");return w},[d]),f=x.useMemo(()=>{const E=60/r;return[...Array(24).keys()].flatMap(w=>[...Array(E).keys()].map(A=>d.format(new Date(0,0,0,w,A*r))))},[r,d]),m=E=>{(!E||H_(E))&&l(E)},g=E=>{const[w,A]=E.split(h);if(!w&&!A)return;const S=Number(w??"0"),_=Number(A??"0");if(!(S>23||_>59))return d.format(new Date(0,0,0,S,_))},y=E=>{const w=g(E.target.value);w?(l(w),u(w)):l(c)},b=E=>{if(typeof E<"u"){const w=g(E);u(w)}else u(E)};return x.useEffect(()=>{const E=typeof e>"u"?"":e;H_(E)&&l(E)},[e,l]),$.jsx($Re,{...i,ref:s,value:c,onChange:b,isPrintableCharacter:H_,allowCustomValue:!0,placeholder:`--${h}--`,autocomplete:"none",startIcon:$.jsx(ude,{fill:"neutral500"}),inputMode:"numeric",pattern:`\\d{2}\\${h}\\d{2}`,textValue:o,onTextValueChange:m,onBlur:y,children:f.map(E=>$.jsx(FRe,{value:E,children:E},E))})}),Pke=q(dke)`
  flex: 1 1 70%;
  min-width: 120px;
`,Mke=q(Oke)`
  flex: 1 1 30%;
  min-width: 140px;
`;x.forwardRef(({clearLabel:r="clear",dateLabel:e="Choose date",timeLabel:t="Choose time",disabled:n=!1,hasError:i,onChange:s,onClear:a,required:o=!1,step:l,value:c,initialDate:u,size:d,...h},f)=>{const m=x.useRef(null),[g,y]=oo({defaultProp:u?wm(u,!1):void 0,prop:c?wm(c,!1):c??void 0,onChange(F){s&&s(F?.toDate(Qf()))}}),b=WT("DateTimePicker"),E=pl(b.locale,{hour:"2-digit",minute:"2-digit",hour12:!1}),w=g?E.format(g.toDate(Qf())):"",A=F=>{let U=F?wm(F):void 0;if(!(U&&g&&U.compare(g)===0)){if(w&&U){const[W,j]=w.split(":");U=U.set({hour:parseInt(W,10),minute:parseInt(j,10)})}y(U)}},S=F=>{if(!F)return;const[U,W]=F.split(":"),j=g?g.set({hour:parseInt(U,10),minute:parseInt(W,10)}):wm(new Date).set({hour:parseInt(U,10),minute:parseInt(W,10)});y(j)},_=F=>{y(void 0),a&&a(F)},C=()=>{const F=g?g.set({hour:0,minute:0}):wm(new Date);y(F)},k=Ni(m,f),{error:D,id:I,labelNode:L}=Fi("DateTimePicker"),M=!!D||i;return $.jsxs(Ie,{"aria-labelledby":L?`${I}-label`:void 0,role:"group",flex:"1",gap:1,children:[$.jsx(Pd,{children:$.jsx(Pke,{...h,size:d,value:g?.toDate("UTC"),onChange:A,required:o,onClear:a?_:void 0,clearLabel:`${r} date`,disabled:n,ref:k,"aria-label":e})}),$.jsx(Pd,{children:$.jsx(Mke,{size:d,hasError:M,value:w,onChange:S,onClear:a&&w!==void 0&&w!=="00:00"?C:void 0,clearLabel:`${r} time`,required:o,disabled:n,step:l,"aria-label":t})})]})});const wm=(r,e=!0)=>{const t=r.toISOString();let n=jde(t);return e&&(n=n.set({hour:0,minute:0})),_d(n)},Nke=x.forwardRef((r,e)=>$.jsx(Fke,{ref:e,background:"neutral150",...r,"data-orientation":"horizontal",role:"separator",tag:"div"})),Fke=q(De)`
  height: 1px;
  border: none;
  /* If contained in a Flex parent we want to prevent the Divider to shink */
  flex-shrink: 0;
`,Bke=q(De)`
  svg {
    height: 8.8rem;
  }
`,Uke=x.forwardRef(({icon:r,content:e,action:t,hasRadius:n=!0,shadow:i="tableShadow"},s)=>$.jsxs(Ie,{ref:s,alignItems:"center",direction:"column",padding:11,background:"neutral0",hasRadius:n,shadow:i,children:[r?$.jsx(Bke,{paddingBottom:6,"aria-hidden":!0,children:r}):null,$.jsx(De,{paddingBottom:4,children:$.jsx(Je,{variant:"delta",tag:"p",textAlign:"center",textColor:"neutral600",children:e})}),t]})),Yz=pt.define(),Qz=pt.define(),Wke=Ye.mark({attributes:{style:"background-color: yellow; color: black"}}),Hke=On.define({create(){return Ye.none},update(r,e){return r=r.map(e.changes),e.effects.forEach(t=>{t.is(Yz)?r=r.update({add:t.value,sort:!0}):t.is(Qz)&&(r=r.update({filter:t.value}))}),r},provide:r=>Pe.decorations.from(r)});x.forwardRef(({hasError:r,required:e,id:t,value:n="",disabled:i=!1,onChange:s=()=>null,...a},o)=>{const l=x.useRef(),c=x.useRef(),u=x.useRef(),{error:d,...h}=Fi("JsonInput"),f=!!d||r,m=h.id??t,g=h.required||e;let y;d?y=`${m}-error`:h.hint&&(y=`${m}-hint`);const b=D=>{const I=c.current?.doc;if(I){const{text:L,to:M}=I.line(D),F=M-L.trimStart().length;M>F&&u.current?.dispatch({effects:Yz.of([Wke.range(F,M)])})}},E=()=>{const D=c.current?.doc;if(D){const I=D.length||0;u.current?.dispatch({effects:Qz.of((L,M)=>M<=0||L>=I)})}},w=({state:D,view:I})=>{u.current=I,c.current=D,E();const M=lwe()(I);M.length&&b(D.doc.lineAt(M[0].from).number)},A=(D,I)=>{w(I),s(D)},S=(D,I)=>{u.current=D,c.current=I,w({view:D,state:I})},{setContainer:_,view:C}=$K({value:n,onCreateEditor:S,container:l.current,editable:!i,extensions:[dwe(),Hke],onChange:A,theme:"dark",basicSetup:{lineNumbers:!0,bracketMatching:!0,closeBrackets:!0,indentOnInput:!0,syntaxHighlighting:!0,highlightSelectionMatches:!0,tabSize:2}}),k=Ni(l,_);return x.useImperativeHandle(o,()=>({...C?.dom,focus(){C&&C.focus()},scrollIntoView(D){C&&C.dom.scrollIntoView(D)}}),[C]),$.jsx(Vke,{ref:k,$hasError:f,alignItems:"stretch",fontSize:2,hasRadius:!0,"aria-required":g,id:m,"aria-describedby":y,...a})});const Vke=q(Ie)`
  line-height: ${({theme:r})=>r.lineHeights[2]};

  .cm-editor {
    /** 
     * Hard coded since the color is the same between themes,
     * theme.colors.neutral800 changes between themes 
     */
    background-color: #32324d;
    width: 100%;
    outline: none;
  }

  .cm-scroller {
    border: 1px solid ${({theme:r,$hasError:e})=>e?r.colors.danger600:r.colors.neutral200};
    /* inputFocusStyle will receive hasError prop */
    ${Zc()}
  }

  .cm-editor,
  .cm-scroller {
    border-radius: ${({theme:r})=>r.borderRadius};
  }

  .cm-gutters,
  .cm-activeLineGutter {
    /** 
     * Hard coded since the color is the same between themes,
     * theme.colors.neutral700 changes between themes 
     */
    background-color: #4a4a6a;
  }
`;vi(({disabled:r,...e},t)=>$.jsx(Hx,{ref:t,tag:$v,tabIndex:r?-1:void 0,disabled:r,...e}));const Gke=q(De)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,Xz=({labelledBy:r="main-content-title",...e})=>$.jsx(Gke,{"aria-labelledby":r,tag:"main",id:"main-content",tabIndex:-1,...e});q(De)`
  text-decoration: none;

  &:focus {
    left: ${({theme:r})=>r.spaces[3]};
    top: ${({theme:r})=>r.spaces[3]};
  }
`;const qke=(r,e)=>`${r}${Math.floor(e*255).toString(16).padStart(2,"0")}`;x.forwardRef((r,e)=>$.jsx(pG,{...r,asChild:!0,ref:e}));x.forwardRef((r,e)=>$.jsx(mG,{children:$.jsx(jke,{children:$.jsx(Kke,{ref:e,...r})})}));const jke=q(gG)`
  background: ${r=>qke(r.theme.colors.neutral800,.2)};
  position: fixed;
  inset: 0;
  z-index: ${r=>r.theme.zIndices.overlay};

  @media (prefers-reduced-motion: no-preference) {
    animation: ${Ur.overlayFadeIn} ${r=>r.theme.motion.timings[200]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,Kke=q(vG)`
  max-width: 83rem;
  max-height: 90vh;
  height: auto;
  width: 60%;
  overflow: hidden;
  margin: 0 auto;
  display: flex;
  flex-direction: column;

  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);

  border-radius: ${r=>r.theme.borderRadius};
  background-color: ${r=>r.theme.colors.neutral0};
  box-shadow: ${r=>r.theme.shadows.popupShadow};
  z-index: ${r=>r.theme.zIndices.modal};

  @media (prefers-reduced-motion: no-preference) {
    &[data-state='open'] {
      animation-duration: ${r=>r.theme.motion.timings[200]};
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};
      animation-name: ${Ur.modalPopIn};
    }

    &[data-state='closed'] {
      animation-duration: ${r=>r.theme.motion.timings[120]};
      animation-timing-function: ${r=>r.theme.motion.easings.easeOutQuad};
      animation-name: ${Ur.modalPopOut};
    }
  }
`,zke=x.forwardRef((r,e)=>$.jsx(SL,{...r,asChild:!0,ref:e}));x.forwardRef(({children:r,closeLabel:e="Close modal",...t},n)=>$.jsxs(Yke,{ref:n,padding:4,paddingLeft:5,paddingRight:5,background:"neutral100",justifyContent:"space-between",...t,tag:"header",children:[r,$.jsx(zke,{children:$.jsx(_I,{withTooltip:!1,label:e,children:$.jsx(Wd,{})})})]}));const Yke=q(Ie)`
  border-bottom: solid 1px ${r=>r.theme.colors.neutral150};
`;x.forwardRef((r,e)=>$.jsx(yG,{asChild:!0,children:$.jsx(Je,{tag:"h2",variant:"omega",fontWeight:"bold",ref:e,...r})}));x.forwardRef(({children:r,...e},t)=>$.jsx(Qke,{ref:t,...e,children:r}));const Qke=q(hO)`
  padding-inline: ${r=>r.theme.spaces[8]};

  & > div {
    padding-block: ${r=>r.theme.spaces[8]};

    & > div {
      // the scroll area component applies a display: table to the child, which we don't want.
      display: block !important;
    }
  }
`;x.forwardRef((r,e)=>$.jsx(Xke,{ref:e,padding:4,paddingLeft:5,paddingRight:5,background:"neutral100",justifyContent:"space-between",...r,tag:"footer"}));const Xke=q(Ie)`
  border-top: solid 1px ${r=>r.theme.colors.neutral150};
  flex: 1;
`,Zke="";x.forwardRef(({startAction:r,locale:e,onValueChange:t,value:n,step:i=1,disabled:s=!1,...a},o)=>{const l=WT("NumberInput"),c=e||l.locale,u=x.useRef(new OK(c,{style:"decimal"})),d=x.useRef(new LK(c,{maximumFractionDigits:20})),[h,f]=Jke({prop(_){const C=String(n);return isNaN(Number(C))||C!==_&&_!==""?_:d.current.format(Number(n))},defaultProp:Zke,onChange(_){const C=u.current.parse(_??"");t(isNaN(C)?void 0:C)}}),m=_=>{f(String(_))},g=({target:{value:_}})=>{u.current.isValidPartialNumber(_)&&m(_)},b=(_=>{const C=_.toString();return C.includes(".")?C.split(".")[1].length:0})(i),E=()=>{if(!h){m(i);return}const _=u.current.parse(h),C=isNaN(_)?i:_+i,k=parseFloat(C.toFixed(b));m(d.current.format(k))},w=()=>{if(!h){m(-i);return}const _=u.current.parse(h),C=isNaN(_)?-i:_-i,k=parseFloat(C.toFixed(b));m(d.current.format(k))},A=_=>{if(!s)switch(_.key){case ti.DOWN:{_.preventDefault(),w();break}case ti.UP:{_.preventDefault(),E();break}}},S=()=>{if(h){const _=u.current.parse(h),C=isNaN(_)?"":d.current.format(_);m(C)}};return $.jsx(UT,{ref:o,startAction:r,disabled:s,type:"text",inputMode:"decimal",onChange:g,onKeyDown:A,onBlur:S,value:h,endAction:$.jsxs(Ie,{direction:"column",children:[$.jsx(A8,{disabled:s,"aria-hidden":!0,$reverse:!0,onClick:E,tabIndex:-1,type:"button","data-testid":"ArrowUp",children:$.jsx(Dc,{fill:"neutral500"})}),$.jsx(A8,{disabled:s,"aria-hidden":!0,onClick:w,tabIndex:-1,type:"button","data-testid":"ArrowDown",children:$.jsx(Dc,{fill:"neutral500"})})]}),...a})});const A8=q.button`
  display: flex;
  justify-content: center;
  align-items: center;
  transform: translateY(${({$reverse:r})=>r?"-2px":"2px"});
  cursor: ${({disabled:r})=>r?"not-allowed":void 0};
  height: 1.1rem;

  svg {
    width: 1.2rem;
    transform: ${({$reverse:r})=>r?"rotateX(180deg)":void 0};
  }
`;function Jke({prop:r,defaultProp:e,onChange:t=()=>{}}){const[n,i]=fz({defaultProp:e,onChange:t}),s=r!==void 0,a=r instanceof Function?r(n):r,o=s?a:n,l=z2(t),c=x.useCallback(u=>{if(s){const h=typeof u=="function"?u(a):u;h!==a&&(l(h),i(u))}else i(u)},[s,a,i,l]);return[o,c]}const eIe=x.createContext({activePage:1,pageCount:1}),pO=()=>x.useContext(eIe);vi(({children:r,...e},t)=>{const{activePage:n}=pO(),i=n===1;return $.jsxs(Jz,{ref:t,"aria-disabled":i,tabIndex:i?-1:void 0,...e,children:[$.jsx(Fp,{children:r}),$.jsx(HW,{"aria-hidden":!0})]})});vi(({children:r,...e},t)=>{const{activePage:n,pageCount:i}=pO(),s=n===i;return $.jsxs(Jz,{ref:t,"aria-disabled":s,tabIndex:s?-1:void 0,...e,children:[$.jsx(Fp,{children:r}),$.jsx(T2,{"aria-hidden":!0})]})});const Zz=q($v)`
  padding: ${({theme:r})=>r.spaces[3]};
  border-radius: ${({theme:r})=>r.borderRadius};
  box-shadow: ${({$active:r,theme:e})=>r?e.shadows.filterShadow:void 0};
  text-decoration: none;
  display: flex;

  ${MT}
`,Jz=q(Zz)`
  font-size: 1.1rem;

  svg path {
    fill: ${r=>r["aria-disabled"]?r.theme.colors.neutral300:r.theme.colors.neutral600};
  }

  &:focus,
  &:hover {
    svg path {
      fill: ${r=>r["aria-disabled"]?r.theme.colors.neutral300:r.theme.colors.neutral700};
    }
  }

  ${r=>r["aria-disabled"]?`
  pointer-events: none;
    `:void 0}
`;vi(({number:r,children:e,...t},n)=>{const{activePage:i}=pO(),s=i===r;return $.jsxs(tIe,{ref:n,...t,"aria-current":s,$active:s,children:[$.jsx(Fp,{children:e}),$.jsx(Je,{"aria-hidden":!0,fontWeight:s?"bold":void 0,lineHeight:"revert",variant:"pi",children:r})]})});const tIe=q(Zz)`
  color: ${({theme:r,$active:e})=>e?r.colors.primary700:r.colors.neutral800};
  background: ${({theme:r,$active:e})=>e?r.colors.neutral0:void 0};

  &:hover {
    box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  }
`;x.forwardRef((r,e)=>$.jsx(HAe,{...r,asChild:!0,ref:e}));x.forwardRef((r,e)=>$.jsx(VAe,{children:$.jsx(rIe,{sideOffset:4,side:"bottom",align:"start",...r,ref:e})}));const rIe=q(GAe)`
  box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  z-index: ${({theme:r})=>r.zIndices.popover};
  background-color: ${r=>r.theme.colors.neutral0};
  border: 1px solid ${({theme:r})=>r.colors.neutral150};
  border-radius: ${({theme:r})=>r.borderRadius};

  @media (prefers-reduced-motion: no-preference) {
    animation-duration: ${r=>r.theme.motion.timings[200]};

    &[data-state='open'] {
      animation-timing-function: ${r=>r.theme.motion.easings.authenticMotion};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpIn};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownIn};
      }
    }

    &[data-state='closed'] {
      animation-timing-function: ${r=>r.theme.motion.easings.easeOutQuad};

      &[data-side='top'] {
        animation-name: ${Ur.slideUpOut};
      }

      &[data-side='bottom'] {
        animation-name: ${Ur.slideDownOut};
      }
    }
  }
`;x.forwardRef(({children:r,intersectionId:e,onReachEnd:t,...n},i)=>{const s=x.useRef(null),a=Ni(s,i),o=ga();return Dv(s,t??(()=>{}),{selectorToWatch:`#${dp(o)}`,skipWhen:!e||!t}),$.jsxs(nIe,{ref:a,...n,children:[r,e&&t&&$.jsx(De,{id:dp(o),width:"100%",height:"1px"})]})});const nIe=q(hO)`
  height: 20rem;
`;x.forwardRef(({size:r="M",value:e,...t},n)=>$.jsx(iIe,{ref:n,$size:r,...t,children:$.jsx(sIe,{style:{transform:`translate3D(-${100-(e??0)}%, 0, 0)`}})}));const iIe=q(JAe)`
  position: relative;
  overflow: hidden;
  width: ${r=>r.$size==="S"?"7.8rem":"10.2rem"};
  height: ${r=>r.$size==="S"?"0.4rem":"0.8rem"};
  background-color: ${r=>r.theme.colors.neutral600};
  border-radius: ${r=>r.theme.borderRadius};

  /* Fix overflow clipping in Safari */
  /* https://gist.github.com/domske/b66047671c780a238b51c51ffde8d3a0 */
  transform: translateZ(0);
`,sIe=q(e_e)`
  background-color: ${({theme:r})=>r.colors.neutral0};
  border-radius: ${({theme:r})=>r.borderRadius};
  width: 100%;
  height: 100%;

  @media (prefers-reduced-motion: no-preference) {
    transition: transform ${r=>r.theme.motion.timings[320]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`;x.forwardRef((r,e)=>$.jsx(aIe,{ref:e,...r}));const aIe=q(g_e)`
  display: flex;
  flex-direction: column;
  gap: ${r=>r.theme.spaces[3]};
`;x.forwardRef(({children:r,id:e,...t},n)=>{const i=ga(e);return $.jsxs(Ie,{gap:2,children:[$.jsx(oIe,{id:i,ref:n,...t,children:$.jsx(lIe,{})}),$.jsx(Je,{tag:"label",htmlFor:i,children:r})]})});const oIe=q(v_e)`
  background: ${r=>r.theme.colors.neutral0};
  width: 2rem;
  height: 2rem;
  flex: 0 0 2rem;
  border-radius: 50%;
  border: 1px solid ${r=>r.theme.colors.neutral300};
  position: relative;
  z-index: 0;

  @media (prefers-reduced-motion: no-preference) {
    transition: border-color ${r=>r.theme.motion.timings[120]}
      ${r=>r.theme.motion.easings.easeOutQuad};
  }

  &[data-state='checked'] {
    border: 1px solid ${r=>r.theme.colors.primary600};
  }

  &[data-disabled] {
    background-color: ${r=>r.theme.colors.neutral200};
  }

  /* increase target size for touch devices https://www.w3.org/WAI/WCAG21/Understanding/target-size.html */
  &::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 100%;
    height: 100%;
    min-width: 44px;
    min-height: 44px;
  }
`,lIe=q(y_e)`
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  position: relative;

  &[data-state='checked'] {
    @media (prefers-reduced-motion: no-preference) {
      animation: ${Ur.popIn} ${r=>r.theme.motion.timings[200]};
    }
  }

  &::after {
    content: '';
    display: block;
    width: 1rem;
    height: 1rem;
    border-radius: 50%;
    background: ${r=>r.theme.colors.primary600};
  }
`,cIe=r=>{const e=r.querySelector('[tabindex="0"]');e&&e.focus()},eY=x.createContext({rowIndex:0,colIndex:0,setTableValues(){throw new Error("setTableValues must be initialized via the RawTableContext.Provider")}}),uIe=()=>x.useContext(eY),tY=x.forwardRef(({colCount:r,rowCount:e,jumpStep:t=3,initialCol:n=0,initialRow:i=0,...s},a)=>{const o=x.useRef(null),l=x.useRef(!1),c=Ni(o,a),[u,d]=x.useState(i),[h,f]=x.useState(n),m=x.useCallback(({colIndex:b,rowIndex:E})=>{f(b),d(E)},[]);x.useEffect(()=>{l.current&&cIe(o.current),l.current||(l.current=!0)},[h,u]);const g=b=>{switch(b.key){case ti.RIGHT:{b.preventDefault(),f(E=>E<r-1?E+1:E);break}case ti.LEFT:{b.preventDefault(),f(E=>E>0?E-1:E);break}case ti.UP:{b.preventDefault(),d(E=>E>0?E-1:E);break}case ti.DOWN:{b.preventDefault(),d(E=>E<e-1?E+1:E);break}case ti.HOME:{b.preventDefault(),b.ctrlKey&&d(0),f(0);break}case ti.END:{b.preventDefault(),b.ctrlKey&&d(e-1),f(r-1);break}case ti.PAGE_DOWN:{b.preventDefault(),d(E=>E+t<e?E+t:e-1);break}case ti.PAGE_UP:{b.preventDefault(),d(E=>E-t>0?E-t:0);break}}},y=x.useMemo(()=>({rowIndex:u,colIndex:h,setTableValues:m}),[h,u,m]);return $.jsx(eY.Provider,{value:y,children:$.jsx("table",{role:"grid",ref:c,"aria-rowcount":e,"aria-colcount":r,onKeyDown:g,...s})})}),Tm=(r,e)=>[...r.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')].filter(i=>!i.hasAttribute("disabled")),V_=r=>r.filter(e=>e.tagName==="INPUT"?e.type!=="checkbox"&&e.type!=="radio":!1),rY=x.forwardRef(({coords:r={col:0,row:0},tag:e="td",...t},n)=>{const i=x.useRef(null),s=Ni(n,i),{rowIndex:a,colIndex:o,setTableValues:l}=uIe(),[c,u]=x.useState(!1),d=m=>{const g=Tm(i.current);if(g.length===0||g.length===1&&V_(g).length===0)return;if(g.length>1&&!g.find(b=>b.tagName!=="BUTTON")){m.preventDefault();const b=g.findIndex(E=>E===document.activeElement);if(m.key===ti.RIGHT){const E=g[b+1];E&&(m.stopPropagation(),E.focus())}else if(m.key===ti.LEFT){const E=g[b-1];E&&(m.stopPropagation(),E.focus())}return}const y=m.key===ti.ENTER;if(y&&!c)u(!0);else if((m.key===ti.ESCAPE||y)&&c){if(y&&document.activeElement?.tagName==="A")return;u(!1),i.current.focus()}else c&&m.stopPropagation()},h=a===r.row-1&&o===r.col-1;hp(()=>{const m=Tm(i.current);m.length===0||m.length===1&&V_(m).length!==0||m.length>1&&m.find(g=>g.tagName!=="BUTTON")?(i.current.setAttribute("tabIndex",!c&&h?"0":"-1"),m.forEach((g,y)=>{g.setAttribute("tabIndex",c?"0":"-1"),c&&y===0&&g.focus()})):m.forEach(g=>{g.setAttribute("tabIndex",h?"0":"-1")})},[c,h]);const f=x.useCallback(()=>{const m=Tm(i.current);m.length>=1&&(V_(m).length!==0||!m.find(g=>g.tagName!=="BUTTON"))&&u(!0),l({rowIndex:r.row-1,colIndex:r.col-1})},[r,l]);return hp(()=>{const m=i.current;return Tm(m).forEach(y=>{y.addEventListener("focus",f)}),()=>{Tm(m).forEach(b=>{b.removeEventListener("focus",f)})}},[f]),$.jsx(De,{role:"gridcell",tag:e,ref:s,onKeyDown:d,...t})}),dIe=r=>$.jsx(rY,{...r,tag:"th"}),hIe=({children:r,...e})=>{const t=x.Children.toArray(r).map(n=>x.isValidElement(n)?x.cloneElement(n,{"aria-rowindex":1}):n);return $.jsx("thead",{...e,children:t})},fIe=({children:r,...e})=>{const t=x.Children.toArray(r).map((n,i)=>x.isValidElement(n)?x.cloneElement(n,{"aria-rowindex":i+2}):n);return $.jsx("tbody",{...e,children:t})},pIe=({children:r,...e})=>{const t=x.Children.toArray(r).map((n,i)=>x.isValidElement(n)?x.cloneElement(n,{"aria-colindex":i+1,coords:{col:i+1,row:e["aria-rowindex"]}}):n);return $.jsx(De,{tag:"tr",...e,children:t})},mIe=q(Wd)`
  font-size: 0.5rem;
  path {
    fill: ${({theme:r})=>r.colors.neutral500};
  }
`,nY=q(dde)`
  font-size: 1rem;
  path {
    fill: ${({theme:r})=>r.colors.neutral500};
  }
`,gIe=q.div`
  border-radius: ${({theme:r})=>r.borderRadius};
  border: 1px solid ${({theme:r})=>r.colors.neutral150}

  &:focus-within {
    ${nY} {
      fill: ${({theme:r})=>r.colors.primary600};
    }
  }
`,vIe=q(UT)`
  border: 1px solid ${({theme:r})=>r.colors.neutral150}
  height: 16px;
  padding: 0 0 0 8px;
  color: ${({theme:r})=>r.colors.neutral800};

  &::placeholder {
    color: ${({theme:r})=>r.colors.neutral500};
  }

  &:hover {
    button {
      cursor: pointer;
    }
  }

  ${Zc()}
`;x.forwardRef(({name:r,children:e,value:t="",onClear:n,clearLabel:i,...s},a)=>{const o=x.useRef(null),l=t.length>0,c=d=>{n(d),o.current.focus()},u=yz(a,o);return $.jsx(gIe,{children:$.jsxs(Pd,{name:r,children:[$.jsx(Fp,{children:$.jsx(dO,{children:e})}),$.jsx(vIe,{size:"S",ref:u,value:t,startAction:$.jsx(nY,{"aria-hidden":!0}),endAction:l?$.jsx(Nz,{label:i,onClick:c,onMouseDown:d=>{d.preventDefault()},children:$.jsx(mIe,{})}):void 0,...s})]})})});const yIe=q(De)`
  display: inline-flex;
  border: none;

  & > svg {
    height: 1.2rem;
    width: 1.2rem;
  }

  & > svg path {
    fill: ${({theme:r,...e})=>e["aria-disabled"]?r.colors.neutral600:r.colors.primary600};
  }

  &:hover {
    cursor: ${({$iconAction:r})=>r?"pointer":"initial"};
  }
`,bIe=({children:r,icon:e,label:t,disabled:n=!1,onClick:i,...s})=>{const a=o=>{n||!i||i(o)};return $.jsxs(Ie,{inline:!0,background:n?"neutral200":"primary100",color:n?"neutral700":"primary600",paddingLeft:3,paddingRight:1,borderColor:n?"neutral300":"primary200",hasRadius:!0,height:"3.2rem",...s,children:[$.jsx(EIe,{$disabled:n,variant:"pi",fontWeight:"bold",children:r}),$.jsx(yIe,{tag:"button",disabled:n,"aria-disabled":n,"aria-label":t,padding:2,onClick:a,$iconAction:!!i,children:e})]})},EIe=q(Je)`
  color: inherit;
  border-right: 1px solid ${({theme:r,$disabled:e})=>e?r.colors.neutral300:r.colors.primary200};
  padding-right: ${({theme:r})=>r.spaces[2]};
`;x.forwardRef(({children:r,clearLabel:e="Clear",customizeContent:t,disabled:n,hasError:i,id:s,name:a,onChange:o,onClear:l,onCloseAutoFocus:c,onReachEnd:u,placeholder:d,required:h,size:f,startIcon:m,value:g,withTags:y,...b},E)=>{const w=x.useRef(null),[A,S]=x.useState(),[_,C]=x.useState(!1),k=ne=>{o?o(ne):S(ne)},D=ne=>()=>{const ge=Array.isArray(g)?g.filter(ae=>ae!==ne):(A??[]).filter(ae=>ae!==ne);o?o(ge):S(ge)},I=ne=>{C(ne)},L=ga(),M=`intersection-${dp(L)}`;Dv(w,ne=>{u&&u(ne)},{selectorToWatch:`#${M}`,skipWhen:!_});const U=typeof g<"u"&&g!==null?g:A,W=ne=>ne&&typeof ne=="object"&&ne.value?$.jsx(bIe,{tabIndex:-1,disabled:n,icon:$.jsx(Wd,{width:`${14/16}rem`,height:`${14/16}rem`}),onClick:D(ne.value),children:ne.textValue},ne.value):null,{error:j,...z}=Fi("MultiSelect"),Q=!!j||i,V=z.id??s,Y=z.name??a,J=z.required??h;let ue;return j?ue=`${V}-error`:z.hint&&(ue=`${V}-hint`),$.jsxs(Uz,{onOpenChange:I,disabled:n,required:J,onValueChange:k,value:U,...b,multi:!0,children:[$.jsx(Wz,{ref:E,id:V,name:Y,"aria-label":b["aria-label"],"aria-describedby":ue??b["aria-describedby"],startIcon:m,hasError:Q,disabled:n,clearLabel:e,onClear:U?.length?l:void 0,withTags:!!(y&&(U?.length??!1)),size:f,children:$.jsx(Hz,{placeholder:d,textColor:U?.length?"neutral800":"neutral600",children:U?.length?y?W:t?t(U):void 0:void 0})}),$.jsx(Vz,{children:$.jsx(Gz,{position:"popper",sideOffset:4,onCloseAutoFocus:c,children:$.jsxs(qz,{ref:w,children:[r,$.jsx(De,{id:M,width:"100%",height:"1px"})]})})})]})});const xIe=x.forwardRef(({value:r,children:e,startIcon:t,...n},i)=>$.jsxs(fO,{ref:i,value:r.toString(),...n,children:[t&&$.jsx(De,{tag:"span","aria-hidden":!0,children:t}),$.jsx(jz,{children:({isSelected:s,isIntermediate:a})=>$.jsx(uO,{checked:a?"indeterminate":s})}),$.jsx(Je,{children:$.jsx(Kz,{children:e})})]}));x.forwardRef(({children:r,label:e,startIcon:t,values:n=[],...i},s)=>$.jsxs(lke,{ref:s,children:[$.jsxs(fO,{value:n,...i,children:[t&&$.jsx(De,{tag:"span","aria-hidden":!0,children:t}),$.jsx(jz,{children:({isSelected:a,isIntermediate:o})=>$.jsx(uO,{checked:o?"indeterminate":a})}),$.jsx(Je,{children:e})]}),r]}));q(xIe)`
  padding-left: ${({theme:r})=>r.spaces[7]};
`;const wIe="23.2rem";x.forwardRef(({...r},e)=>$.jsx(TIe,{ref:e,...r,tag:"nav"}));const TIe=q(De)`
  width: ${wIe};
  background: ${({theme:r})=>r.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:r})=>r.colors.neutral200};
  z-index: 1;
`;q(Nke)`
  width: 2.4rem;
  background-color: ${({theme:r})=>r.colors.neutral200};
`;vi(({active:r,children:e,icon:t=null,withBullet:n=!1,isSubSectionChild:i=!1,...s},a)=>$.jsxs(SIe,{background:"neutral100",paddingLeft:i?9:7,paddingBottom:2,paddingTop:2,ref:a,...s,children:[$.jsxs(Ie,{children:[t?$.jsx(AIe,{children:t}):$.jsx(RI,{$active:r}),$.jsx(Je,{paddingLeft:2,children:e})]}),n&&$.jsx(Ie,{paddingRight:4,children:$.jsx(RI,{$active:!0})})]}));const RI=q.span`
  width: 0.4rem;
  height: 0.4rem;
  background-color: ${({theme:r,$active:e})=>e?r.colors.primary600:r.colors.neutral600};
  border-radius: 50%;
`,SIe=q($v)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:r})=>r.colors.neutral800};
  svg > * {
    fill: ${({theme:r})=>r.colors.neutral600};
  }

  &.active {
    ${({theme:r})=>dt`
        background-color: ${r.colors.primary100};
        border-right: 2px solid ${r.colors.primary600};
        color: ${r.colors.primary700};
        font-weight: 500;
      `}

    ${RI} {
      background-color: ${({theme:r})=>r.colors.primary600};
    }
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,AIe=q.div`
  svg {
    height: 1.6rem;
    width: 1.6rem;
  }
`;q.button`
  border: none;
  padding: 0;
  background: transparent;
  display: flex;
  align-items: center;
`;q(De)`
  & > svg {
    height: 0.4rem;
    fill: ${({theme:r})=>r.colors.neutral500};
  }
`;x.forwardRef(({visibleLabels:r,onLabel:e="On",offLabel:t="Off",onCheckedChange:n,checked:i,defaultChecked:s,disabled:a,...o},l)=>{const[c,u]=oo({prop:i,defaultProp:s}),d=h=>{u(h)};return $.jsxs(Ie,{gap:3,children:[$.jsx(_Ie,{ref:l,onCheckedChange:ud(n,d),checked:c,disabled:a,...o,children:$.jsx(CIe,{})}),r?$.jsx(RIe,{"aria-hidden":!0,"data-disabled":a,"data-state":c?"checked":"unchecked",children:c?e:t}):null]})});const _Ie=q(__e)`
  width: 4rem;
  height: 2.4rem;
  border-radius: 1.2rem;
  background-color: ${({theme:r})=>r.colors.danger500};

  &[data-state='checked'] {
    background-color: ${({theme:r})=>r.colors.success500};
  }

  &[data-disabled] {
    background-color: ${({theme:r})=>r.colors.neutral300};
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: ${r=>r.theme.transitions.backgroundColor};
  }
`,CIe=q(C_e)`
  display: block;
  height: 1.6rem;
  width: 1.6rem;
  border-radius: 50%;
  background-color: ${({theme:r})=>r.colors.neutral0};
  transform: translateX(4px);

  &[data-state='checked'] {
    transform: translateX(20px);
  }

  @media (prefers-reduced-motion: no-preference) {
    transition: transform ${r=>r.theme.motion.timings[120]}
      ${r=>r.theme.motion.easings.authenticMotion};
  }
`,RIe=q(Je)`
  color: ${r=>r.theme.colors.danger600};

  &[data-state='checked'] {
    color: ${r=>r.theme.colors.success600};
  }

  &[data-disabled='true'] {
    color: ${({theme:r})=>r.colors.neutral500};
  }
`,[kIe,mO]=Iv("Tabs"),IIe=x.forwardRef(({disabled:r=!1,variant:e="regular",hasError:t,...n},i)=>$.jsx(kIe,{disabled:r,hasError:t,variant:e,children:$.jsx($Ie,{ref:i,...n})})),$Ie=q(N_e)`
  width: 100%;
  position: relative;
`,DIe=x.forwardRef((r,e)=>{const{variant:t}=mO("List");return $.jsx(LIe,{ref:e,...r,$variant:t})}),LIe=q(F_e)`
  display: flex;
  align-items: ${r=>r.$variant==="regular"?"flex-end":"unset"};
  position: relative;
  z-index: 0;
`,OIe=x.forwardRef(({children:r,disabled:e,...t},n)=>{const{disabled:i,variant:s,hasError:a}=mO("Trigger"),o=i===!0||i===t.value||e,l=a===t.value;return $.jsxs(PIe,{ref:n,...t,$hasError:l,$variant:s,disabled:o,children:[$.jsx(sY,{fontWeight:"bold",variant:s==="simple"?"sigma":void 0,children:r}),s==="simple"?$.jsx(iY,{}):null]})}),iY=q.span`
  display: block;
  width: 100%;
  background-color: currentColor;
  position: absolute;
  bottom: 0;
  left: 0;
  opacity: 0;
  height: 0.2rem;
`,sY=q(Je)``,PIe=q(B_e)`
  position: relative;
  color: ${r=>r.$hasError?r.theme.colors.danger600:r.theme.colors.neutral600};
  cursor: pointer;
  z-index: 0;

  ${r=>r.$variant==="simple"?dt`
        padding-block: ${e=>e.theme.spaces[4]};
        padding-inline: ${e=>e.theme.spaces[4]};

        & > ${sY} {
          line-height: 1.2rem;
        }

        &[data-state='active'] {
          color: ${r.$hasError?r.theme.colors.danger600:r.theme.colors.primary700};

          & > ${iY} {
            opacity: 1;
          }
        }
      `:dt`
        padding-block: ${e=>e.theme.spaces[3]};
        padding-inline: ${e=>e.theme.spaces[3]};
        flex: 1;
        background-color: ${e=>e.theme.colors.neutral100};
        border-bottom: solid 1px ${e=>e.theme.colors.neutral150};

        &:not([data-state='active']) + &:not([data-state='active']) {
          border-left: solid 1px ${e=>e.theme.colors.neutral150};
        }

        &[data-state='active'] {
          padding-block: ${e=>e.theme.spaces[4]};
          padding-inline: ${e=>e.theme.spaces[4]};
          color: ${r.$hasError?r.theme.colors.danger600:r.theme.colors.primary700};
          border-top-right-radius: ${e=>e.theme.borderRadius};
          border-top-left-radius: ${e=>e.theme.borderRadius};
          background-color: ${e=>e.theme.colors.neutral0};
          border-bottom: solid 1px ${e=>e.theme.colors.neutral0};
          box-shadow: ${r.theme.shadows.tableShadow};
          z-index: 1;
        }
      `}

  &[data-disabled] {
    cursor: not-allowed;
    color: ${r=>r.theme.colors.neutral400};
  }
`,MIe=x.forwardRef((r,e)=>{const{variant:t}=mO("Content");return $.jsx(NIe,{$variant:t,ref:e,...r})}),NIe=q(U_e)`
  ${r=>r.$variant==="simple"?dt``:dt`
        position: relative;
        z-index: 1;
        background-color: ${e=>e.theme.colors.neutral0};
      `}
`,FIe=Object.freeze(Object.defineProperty({__proto__:null,Content:MIe,List:DIe,Root:IIe,Trigger:OIe},Symbol.toStringTag,{value:"Module"})),BIe=q(De)`
  overflow: hidden;
  border: 1px solid ${({theme:r})=>r.colors.neutral150};
`,UIe=q(tY)`
  width: 100%;
  white-space: nowrap;
`,WIe=q(De)`
  &:before {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(90deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({$overflowing:r})=>r==="both"||r==="left"?"''":void 0};
    box-shadow: ${({theme:r})=>r.shadows.tableShadow};
    width: ${({theme:r})=>r.spaces[2]};
    left: 0;
  }

  &:after {
    // TODO: make sure to add a token for this weird stuff
    background: linear-gradient(270deg, #c0c0cf 0%, rgba(0, 0, 0, 0) 100%);
    opacity: 0.2;
    position: absolute;
    height: 100%;
    content: ${({$overflowing:r})=>r==="both"||r==="right"?"''":void 0};
    box-shadow: ${({theme:r})=>r.shadows.tableShadow};
    width: ${({theme:r})=>r.spaces[2]};
    right: 0;
    top: 0;
  }
`,HIe=q(De)`
  overflow-x: auto;
`;x.forwardRef(({footer:r,...e},t)=>{const n=x.useRef(null),[i,s]=x.useState(),a=o=>{const l=o.target.scrollWidth-o.target.clientWidth;if(o.target.scrollLeft===0){s("right");return}if(o.target.scrollLeft===l){s("left");return}o.target.scrollLeft>0&&s("both")};return x.useEffect(()=>{n.current.scrollWidth>n.current.clientWidth&&s("right")},[]),$.jsxs(BIe,{shadow:"tableShadow",hasRadius:!0,background:"neutral0",children:[$.jsx(WIe,{$overflowing:i,position:"relative",children:$.jsx(HIe,{ref:n,onScroll:a,paddingLeft:6,paddingRight:6,children:$.jsx(UIe,{ref:t,...e})})}),r]})});q(fIe)`
  & tr:last-of-type {
    border-bottom: none;
  }
`;q(hIe)`
  border-bottom: 1px solid ${({theme:r})=>r.colors.neutral150};
`;q(pIe)`
  border-bottom: 1px solid ${({theme:r})=>r.colors.neutral150};

  & td,
  & th {
    padding: ${({theme:r})=>r.spaces[4]};
  }

  & td:first-of-type,
  & th:first-of-type {
    padding: 0 ${({theme:r})=>r.spaces[1]};
  }

  // Resetting padding values and fixing a height
  th {
    padding-top: 0;
    padding-bottom: 0;
    height: 5.6rem;
  }
`;const aY=q(rY)`
  vertical-align: middle;
  text-align: left;
  outline-offset: -4px;

  /**
  * Hack to make sure the checkbox looks aligned
  */
  input {
    vertical-align: sub;
  }
`;x.forwardRef(({children:r,action:e,...t},n)=>$.jsx(aY,{color:"neutral600",as:dIe,ref:n,...t,children:$.jsxs(Ie,{children:[r,e]})}));x.forwardRef(({children:r,...e},t)=>$.jsx(aY,{color:"neutral800",ref:t,...e,children:r}));q(De)`
  height: 2.4rem;
  width: 2.4rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: 1rem;
    width: 1rem;
  }

  svg path {
    fill: ${({theme:r})=>r.colors.primary600};
  }
`;q(De)`
  border-radius: 0 0 ${({theme:r})=>r.borderRadius} ${({theme:r})=>r.borderRadius};
  display: block;
  width: 100%;
  border: none;
`;vi(({children:r,startIcon:e,endIcon:t,disabled:n=!1,loading:i=!1,...s},a)=>{const o=n||i;return $.jsxs(qIe,{ref:a,disabled:o,"aria-disabled":o,tag:"button",type:"button",gap:2,...s,children:[i?$.jsx(GIe,{"aria-hidden":!0,children:$.jsx(WW,{})}):e,$.jsx(Je,{variant:"pi",children:r}),t]})});const VIe=Bn`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,GIe=q.span`
  display: flex;
  animation: ${VIe} 2s infinite linear;
  will-change: transform;
`,qIe=q(Ie)`
  border: none;
  background-color: transparent;
  color: ${r=>r.theme.colors.primary600};
  cursor: pointer;

  &[aria-disabled='true'] {
    pointer-events: none;
    color: ${r=>r.theme.colors.neutral600};
  }

  ${MT}
`,jIe=x.forwardRef((r,e)=>$.jsx(UT,{ref:e,...r}));jIe.displayName="TextInput";x.forwardRef(({disabled:r,hasError:e,id:t,name:n,required:i,...s},a)=>{const{error:o,...l}=Fi("Textarea"),c=!!o||e,u=l.id??t,d=l.name??n,h=l.required||i;let f;return o?f=`${u}-error`:l.hint&&(f=`${u}-hint`),$.jsx(KIe,{borderColor:c?"danger600":"neutral200",$hasError:c,hasRadius:!0,children:$.jsx(zIe,{"aria-invalid":c,"aria-required":h,tag:"textarea",background:r?"neutral150":"neutral0",color:r?"neutral600":"neutral800",disabled:r,fontSize:2,hasRadius:!0,ref:a,lineHeight:4,padding:4,width:"100%",height:"100%",id:u,name:d,"aria-describedby":f,...s})})});const KIe=q(De)`
  height: 10.5rem;
  ${Zc()}
`,zIe=q(De)`
  border: none;
  resize: none;

  ::placeholder {
    color: ${({theme:r})=>r.colors.neutral500};
    font-size: ${({theme:r})=>r.fontSizes[2]};
    color: ${({theme:r})=>r.colors.neutral500};
    opacity: 1;
  }

  &:focus-within {
    outline: none;
  }
`;x.forwardRef(({offLabel:r,onLabel:e,disabled:t,hasError:n,required:i,id:s,name:a,checked:o,onChange:l,...c},u)=>{const[d=!1,h]=oo({prop:o}),f=d!==null&&!d,{error:m,...g}=Fi("Toggle"),y=!!m||n,b=g.id??s,E=g.name??a,w=g.required||i;let A;return m?A=`${b}-error`:g.hint&&(A=`${b}-hint`),$.jsxs(YIe,{position:"relative",hasRadius:!0,padding:1,background:t?"neutral150":"neutral100",borderStyle:"solid",borderWidth:"1px",borderColor:"neutral200",wrap:"wrap",cursor:t?"not-allowed":"pointer",$hasError:y,children:[$.jsx(_8,{hasRadius:!0,flex:"1 1 50%",paddingTop:2,paddingBottom:2,paddingLeft:3,paddingRight:3,justifyContent:"center",background:t&&f?"neutral200":f?"neutral0":"transparent",borderColor:t&&f?"neutral300":f?"neutral200":t?"neutral150":"neutral100",children:$.jsx(Je,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:t?"neutral700":f?"danger700":"neutral600",children:r})}),$.jsx(_8,{hasRadius:!0,flex:"1 1 50%",paddingLeft:3,paddingRight:3,justifyContent:"center",background:t&&d?"neutral200":d?"neutral0":"transparent",borderColor:t&&d?"neutral300":d?"neutral200":t?"neutral150":"neutral100",children:$.jsx(Je,{variant:"pi",fontWeight:"bold",textTransform:"uppercase",textColor:t?"neutral700":d?"primary600":"neutral600",children:e})}),$.jsx(QIe,{...c,id:b,name:E,ref:u,onChange:S=>{h(S.currentTarget.checked),l?.(S)},type:"checkbox","aria-required":w,disabled:t,"aria-disabled":t,checked:!!d,"aria-describedby":A})]})});const YIe=q(Ie)`
  ${Zc()}
`,_8=q(Ie)`
  padding-block: 0.6rem;
`,QIe=q.input`
  height: 100%;
  left: 0;
  opacity: 0;
  position: absolute;
  top: 0;
  z-index: 0;
  width: 100%;
`;vi((r,e)=>{const{gap:t=0,gridCols:n=12,...i}=r;return $.jsx(XIe,{ref:e,$gap:t,$gridCols:n,...i})});const XIe=q(De)`
  display: grid;
  grid-template-columns: repeat(${({$gridCols:r})=>r}, 1fr);
  ${({theme:r,$gap:e})=>PT({gap:e},r)}
`;vi(({col:r,s:e,xs:t,m:n,...i},s)=>$.jsx(ZIe,{ref:s,$col:r,$s:e,$xs:t,$m:n,...i}));const ZIe=q(Ie)`
  grid-column: span ${({$xs:r})=>r??12};
  max-width: 100%;

  ${({theme:r})=>r.breakpoints.small} {
    grid-column: span ${({$s:r,$xs:e})=>r??e??12};
  }

  ${({theme:r})=>r.breakpoints.medium} {
    grid-column: span ${({$m:r,$s:e,$xs:t})=>r??e??t??12};
  }

  ${({theme:r})=>r.breakpoints.large} {
    grid-column: span ${({$col:r,$m:e,$s:t,$xs:n})=>r??e??t??n??12};
  }
`;var JIe=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn,oY=JIe,e$e=oY,t$e=typeof self=="object"&&self&&self.Object===Object&&self,r$e=e$e||t$e||Function("return this")(),Bi=r$e,n$e=Bi,i$e=n$e.Symbol,Up=i$e,C8=Up,lY=Object.prototype,s$e=lY.hasOwnProperty,a$e=lY.toString,Sm=C8?C8.toStringTag:void 0;function o$e(r){var e=s$e.call(r,Sm),t=r[Sm];try{r[Sm]=void 0;var n=!0}catch{}var i=a$e.call(r);return n&&(e?r[Sm]=t:delete r[Sm]),i}var l$e=o$e,c$e=Object.prototype,u$e=c$e.toString;function d$e(r){return u$e.call(r)}var h$e=d$e,R8=Up,f$e=l$e,p$e=h$e,m$e="[object Null]",g$e="[object Undefined]",k8=R8?R8.toStringTag:void 0;function v$e(r){return r==null?r===void 0?g$e:m$e:k8&&k8 in Object(r)?f$e(r):p$e(r)}var jd=v$e;function y$e(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var os=y$e,b$e=jd,E$e=os,x$e="[object AsyncFunction]",w$e="[object Function]",T$e="[object GeneratorFunction]",S$e="[object Proxy]";function A$e(r){if(!E$e(r))return!1;var e=b$e(r);return e==w$e||e==T$e||e==x$e||e==S$e}var HT=A$e;function _$e(){this.__data__=[],this.size=0}var C$e=_$e;function R$e(r,e){return r===e||r!==r&&e!==e}var Pv=R$e,k$e=Pv;function I$e(r,e){for(var t=r.length;t--;)if(k$e(r[t][0],e))return t;return-1}var VT=I$e,$$e=VT,D$e=Array.prototype,L$e=D$e.splice;function O$e(r){var e=this.__data__,t=$$e(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():L$e.call(e,t,1),--this.size,!0}var P$e=O$e,M$e=VT;function N$e(r){var e=this.__data__,t=M$e(e,r);return t<0?void 0:e[t][1]}var F$e=N$e,B$e=VT;function U$e(r){return B$e(this.__data__,r)>-1}var W$e=U$e,H$e=VT;function V$e(r,e){var t=this.__data__,n=H$e(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var G$e=V$e,q$e=C$e,j$e=P$e,K$e=F$e,z$e=W$e,Y$e=G$e;function Wp(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Wp.prototype.clear=q$e;Wp.prototype.delete=j$e;Wp.prototype.get=K$e;Wp.prototype.has=z$e;Wp.prototype.set=Y$e;var GT=Wp,Q$e=GT;function X$e(){this.__data__=new Q$e,this.size=0}var Z$e=X$e;function J$e(r){var e=this.__data__,t=e.delete(r);return this.size=e.size,t}var eDe=J$e;function tDe(r){return this.__data__.get(r)}var rDe=tDe;function nDe(r){return this.__data__.has(r)}var iDe=nDe,sDe=Bi,aDe=sDe["__core-js_shared__"],oDe=aDe,G_=oDe,I8=function(){var r=/[^.]+$/.exec(G_&&G_.keys&&G_.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function lDe(r){return!!I8&&I8 in r}var cDe=lDe,uDe=Function.prototype,dDe=uDe.toString;function hDe(r){if(r!=null){try{return dDe.call(r)}catch{}try{return r+""}catch{}}return""}var cY=hDe,fDe=HT,pDe=cDe,mDe=os,gDe=cY,vDe=/[\\^$.*+?()[\]{}|]/g,yDe=/^\[object .+?Constructor\]$/,bDe=Function.prototype,EDe=Object.prototype,xDe=bDe.toString,wDe=EDe.hasOwnProperty,TDe=RegExp("^"+xDe.call(wDe).replace(vDe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function SDe(r){if(!mDe(r)||pDe(r))return!1;var e=fDe(r)?TDe:yDe;return e.test(gDe(r))}var ADe=SDe;function _De(r,e){return r?.[e]}var CDe=_De,RDe=ADe,kDe=CDe;function IDe(r,e){var t=kDe(r,e);return RDe(t)?t:void 0}var Kd=IDe,$De=Kd,DDe=Bi,LDe=$De(DDe,"Map"),gO=LDe,ODe=Kd,PDe=ODe(Object,"create"),qT=PDe,$8=qT;function MDe(){this.__data__=$8?$8(null):{},this.size=0}var NDe=MDe;function FDe(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var BDe=FDe,UDe=qT,WDe="__lodash_hash_undefined__",HDe=Object.prototype,VDe=HDe.hasOwnProperty;function GDe(r){var e=this.__data__;if(UDe){var t=e[r];return t===WDe?void 0:t}return VDe.call(e,r)?e[r]:void 0}var qDe=GDe,jDe=qT,KDe=Object.prototype,zDe=KDe.hasOwnProperty;function YDe(r){var e=this.__data__;return jDe?e[r]!==void 0:zDe.call(e,r)}var QDe=YDe,XDe=qT,ZDe="__lodash_hash_undefined__";function JDe(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=XDe&&e===void 0?ZDe:e,this}var e2e=JDe,t2e=NDe,r2e=BDe,n2e=qDe,i2e=QDe,s2e=e2e;function Hp(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Hp.prototype.clear=t2e;Hp.prototype.delete=r2e;Hp.prototype.get=n2e;Hp.prototype.has=i2e;Hp.prototype.set=s2e;var a2e=Hp,D8=a2e,o2e=GT,l2e=gO;function c2e(){this.size=0,this.__data__={hash:new D8,map:new(l2e||o2e),string:new D8}}var u2e=c2e;function d2e(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var h2e=d2e,f2e=h2e;function p2e(r,e){var t=r.__data__;return f2e(e)?t[typeof e=="string"?"string":"hash"]:t.map}var jT=p2e,m2e=jT;function g2e(r){var e=m2e(this,r).delete(r);return this.size-=e?1:0,e}var v2e=g2e,y2e=jT;function b2e(r){return y2e(this,r).get(r)}var E2e=b2e,x2e=jT;function w2e(r){return x2e(this,r).has(r)}var T2e=w2e,S2e=jT;function A2e(r,e){var t=S2e(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var _2e=A2e,C2e=u2e,R2e=v2e,k2e=E2e,I2e=T2e,$2e=_2e;function Vp(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Vp.prototype.clear=C2e;Vp.prototype.delete=R2e;Vp.prototype.get=k2e;Vp.prototype.has=I2e;Vp.prototype.set=$2e;var vO=Vp,D2e=GT,L2e=gO,O2e=vO,P2e=200;function M2e(r,e){var t=this.__data__;if(t instanceof D2e){var n=t.__data__;if(!L2e||n.length<P2e-1)return n.push([r,e]),this.size=++t.size,this;t=this.__data__=new O2e(n)}return t.set(r,e),this.size=t.size,this}var N2e=M2e,F2e=GT,B2e=Z$e,U2e=eDe,W2e=rDe,H2e=iDe,V2e=N2e;function Gp(r){var e=this.__data__=new F2e(r);this.size=e.size}Gp.prototype.clear=B2e;Gp.prototype.delete=U2e;Gp.prototype.get=W2e;Gp.prototype.has=H2e;Gp.prototype.set=V2e;var KT=Gp,G2e=Kd,q2e=function(){try{var r=G2e(Object,"defineProperty");return r({},"",{}),r}catch{}}(),uY=q2e,L8=uY;function j2e(r,e,t){e=="__proto__"&&L8?L8(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Mv=j2e,K2e=Mv,z2e=Pv;function Y2e(r,e,t){(t!==void 0&&!z2e(r[e],t)||t===void 0&&!(e in r))&&K2e(r,e,t)}var dY=Y2e;function Q2e(r){return function(e,t,n){for(var i=-1,s=Object(e),a=n(e),o=a.length;o--;){var l=a[r?o:++i];if(t(s[l],l,s)===!1)break}return e}}var X2e=Q2e,Z2e=X2e,J2e=Z2e(),hY=J2e,Vx={exports:{}};Vx.exports;(function(r,e){var t=Bi,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s?t.Buffer:void 0,o=a?a.allocUnsafe:void 0;function l(c,u){if(u)return c.slice();var d=c.length,h=o?o(d):new c.constructor(d);return c.copy(h),h}r.exports=l})(Vx,Vx.exports);var fY=Vx.exports,eLe=Bi,tLe=eLe.Uint8Array,pY=tLe,O8=pY;function rLe(r){var e=new r.constructor(r.byteLength);return new O8(e).set(new O8(r)),e}var yO=rLe,nLe=yO;function iLe(r,e){var t=e?nLe(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.length)}var mY=iLe;function sLe(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Nv=sLe,aLe=os,P8=Object.create,oLe=function(){function r(){}return function(e){if(!aLe(e))return{};if(P8)return P8(e);r.prototype=e;var t=new r;return r.prototype=void 0,t}}(),zT=oLe;function lLe(r,e){return function(t){return r(e(t))}}var gY=lLe,cLe=gY,uLe=cLe(Object.getPrototypeOf,Object),bO=uLe,dLe=Object.prototype;function hLe(r){var e=r&&r.constructor,t=typeof e=="function"&&e.prototype||dLe;return r===t}var EO=hLe,fLe=zT,pLe=bO,mLe=EO;function gLe(r){return typeof r.constructor=="function"&&!mLe(r)?fLe(pLe(r)):{}}var vY=gLe;function vLe(r){return r!=null&&typeof r=="object"}var Ms=vLe,yLe=jd,bLe=Ms,ELe="[object Arguments]";function xLe(r){return bLe(r)&&yLe(r)==ELe}var wLe=xLe,M8=wLe,TLe=Ms,yY=Object.prototype,SLe=yY.hasOwnProperty,ALe=yY.propertyIsEnumerable,_Le=M8(function(){return arguments}())?M8:function(r){return TLe(r)&&SLe.call(r,"callee")&&!ALe.call(r,"callee")},YT=_Le,CLe=Array.isArray,yi=CLe,RLe=9007199254740991;function kLe(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=RLe}var xO=kLe,ILe=HT,$Le=xO;function DLe(r){return r!=null&&$Le(r.length)&&!ILe(r)}var QT=DLe,LLe=QT,OLe=Ms;function PLe(r){return OLe(r)&&LLe(r)}var MLe=PLe,Gx={exports:{}};function NLe(){return!1}var FLe=NLe;Gx.exports;(function(r,e){var t=Bi,n=FLe,i=e&&!e.nodeType&&e,s=i&&!0&&r&&!r.nodeType&&r,a=s&&s.exports===i,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,c=l||n;r.exports=c})(Gx,Gx.exports);var XT=Gx.exports,BLe=jd,ULe=bO,WLe=Ms,HLe="[object Object]",VLe=Function.prototype,GLe=Object.prototype,bY=VLe.toString,qLe=GLe.hasOwnProperty,jLe=bY.call(Object);function KLe(r){if(!WLe(r)||BLe(r)!=HLe)return!1;var e=ULe(r);if(e===null)return!0;var t=qLe.call(e,"constructor")&&e.constructor;return typeof t=="function"&&t instanceof t&&bY.call(t)==jLe}var wO=KLe,zLe=jd,YLe=xO,QLe=Ms,XLe="[object Arguments]",ZLe="[object Array]",JLe="[object Boolean]",eOe="[object Date]",tOe="[object Error]",rOe="[object Function]",nOe="[object Map]",iOe="[object Number]",sOe="[object Object]",aOe="[object RegExp]",oOe="[object Set]",lOe="[object String]",cOe="[object WeakMap]",uOe="[object ArrayBuffer]",dOe="[object DataView]",hOe="[object Float32Array]",fOe="[object Float64Array]",pOe="[object Int8Array]",mOe="[object Int16Array]",gOe="[object Int32Array]",vOe="[object Uint8Array]",yOe="[object Uint8ClampedArray]",bOe="[object Uint16Array]",EOe="[object Uint32Array]",fr={};fr[hOe]=fr[fOe]=fr[pOe]=fr[mOe]=fr[gOe]=fr[vOe]=fr[yOe]=fr[bOe]=fr[EOe]=!0;fr[XLe]=fr[ZLe]=fr[uOe]=fr[JLe]=fr[dOe]=fr[eOe]=fr[tOe]=fr[rOe]=fr[nOe]=fr[iOe]=fr[sOe]=fr[aOe]=fr[oOe]=fr[lOe]=fr[cOe]=!1;function xOe(r){return QLe(r)&&YLe(r.length)&&!!fr[zLe(r)]}var wOe=xOe;function TOe(r){return function(e){return r(e)}}var TO=TOe,qx={exports:{}};qx.exports;(function(r,e){var t=oY,n=e&&!e.nodeType&&e,i=n&&!0&&r&&!r.nodeType&&r,s=i&&i.exports===n,a=s&&t.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();r.exports=o})(qx,qx.exports);var SO=qx.exports,SOe=wOe,AOe=TO,N8=SO,F8=N8&&N8.isTypedArray,_Oe=F8?AOe(F8):SOe,AO=_Oe;function COe(r,e){if(!(e==="constructor"&&typeof r[e]=="function")&&e!="__proto__")return r[e]}var EY=COe,ROe=Mv,kOe=Pv,IOe=Object.prototype,$Oe=IOe.hasOwnProperty;function DOe(r,e,t){var n=r[e];(!($Oe.call(r,e)&&kOe(n,t))||t===void 0&&!(e in r))&&ROe(r,e,t)}var _O=DOe,LOe=_O,OOe=Mv;function POe(r,e,t,n){var i=!t;t||(t={});for(var s=-1,a=e.length;++s<a;){var o=e[s],l=n?n(t[o],r[o],o,t,r):void 0;l===void 0&&(l=r[o]),i?OOe(t,o,l):LOe(t,o,l)}return t}var qp=POe;function MOe(r,e){for(var t=-1,n=Array(r);++t<r;)n[t]=e(t);return n}var NOe=MOe,FOe=9007199254740991,BOe=/^(?:0|[1-9]\d*)$/;function UOe(r,e){var t=typeof r;return e=e??FOe,!!e&&(t=="number"||t!="symbol"&&BOe.test(r))&&r>-1&&r%1==0&&r<e}var Fv=UOe,WOe=NOe,HOe=YT,VOe=yi,GOe=XT,qOe=Fv,jOe=AO,KOe=Object.prototype,zOe=KOe.hasOwnProperty;function YOe(r,e){var t=VOe(r),n=!t&&HOe(r),i=!t&&!n&&GOe(r),s=!t&&!n&&!i&&jOe(r),a=t||n||i||s,o=a?WOe(r.length,String):[],l=o.length;for(var c in r)(e||zOe.call(r,c))&&!(a&&(c=="length"||i&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||qOe(c,l)))&&o.push(c);return o}var xY=YOe;function QOe(r){var e=[];if(r!=null)for(var t in Object(r))e.push(t);return e}var XOe=QOe,ZOe=os,JOe=EO,ePe=XOe,tPe=Object.prototype,rPe=tPe.hasOwnProperty;function nPe(r){if(!ZOe(r))return ePe(r);var e=JOe(r),t=[];for(var n in r)n=="constructor"&&(e||!rPe.call(r,n))||t.push(n);return t}var iPe=nPe,sPe=xY,aPe=iPe,oPe=QT;function lPe(r){return oPe(r)?sPe(r,!0):aPe(r)}var Bv=lPe,cPe=qp,uPe=Bv;function dPe(r){return cPe(r,uPe(r))}var hPe=dPe,B8=dY,fPe=fY,pPe=mY,mPe=Nv,gPe=vY,U8=YT,W8=yi,vPe=MLe,yPe=XT,bPe=HT,EPe=os,xPe=wO,wPe=AO,H8=EY,TPe=hPe;function SPe(r,e,t,n,i,s,a){var o=H8(r,t),l=H8(e,t),c=a.get(l);if(c){B8(r,t,c);return}var u=s?s(o,l,t+"",r,e,a):void 0,d=u===void 0;if(d){var h=W8(l),f=!h&&yPe(l),m=!h&&!f&&wPe(l);u=l,h||f||m?W8(o)?u=o:vPe(o)?u=mPe(o):f?(d=!1,u=fPe(l,!0)):m?(d=!1,u=pPe(l,!0)):u=[]:xPe(l)||U8(l)?(u=o,U8(o)?u=TPe(o):(!EPe(o)||bPe(o))&&(u=gPe(l))):d=!1}d&&(a.set(l,u),i(u,l,n,s,a),a.delete(l)),B8(r,t,u)}var APe=SPe,_Pe=KT,CPe=dY,RPe=hY,kPe=APe,IPe=os,$Pe=Bv,DPe=EY;function wY(r,e,t,n,i){r!==e&&RPe(e,function(s,a){if(i||(i=new _Pe),IPe(s))kPe(r,e,a,t,wY,n,i);else{var o=n?n(DPe(r,a),s,a+"",r,e,i):void 0;o===void 0&&(o=s),CPe(r,a,o)}},$Pe)}var CO=wY;function LPe(r){return r}var ZT=LPe;function OPe(r,e,t){switch(t.length){case 0:return r.call(e);case 1:return r.call(e,t[0]);case 2:return r.call(e,t[0],t[1]);case 3:return r.call(e,t[0],t[1],t[2])}return r.apply(e,t)}var JT=OPe,PPe=JT,V8=Math.max;function MPe(r,e,t){return e=V8(e===void 0?r.length-1:e,0),function(){for(var n=arguments,i=-1,s=V8(n.length-e,0),a=Array(s);++i<s;)a[i]=n[e+i];i=-1;for(var o=Array(e+1);++i<e;)o[i]=n[i];return o[e]=t(a),PPe(r,this,o)}}var TY=MPe;function NPe(r){return function(){return r}}var FPe=NPe,BPe=FPe,G8=uY,UPe=ZT,WPe=G8?function(r,e){return G8(r,"toString",{configurable:!0,enumerable:!1,value:BPe(e),writable:!0})}:UPe,HPe=WPe,VPe=800,GPe=16,qPe=Date.now;function jPe(r){var e=0,t=0;return function(){var n=qPe(),i=GPe-(n-t);if(t=n,i>0){if(++e>=VPe)return arguments[0]}else e=0;return r.apply(void 0,arguments)}}var SY=jPe,KPe=HPe,zPe=SY,YPe=zPe(KPe),RO=YPe,QPe=ZT,XPe=TY,ZPe=RO;function JPe(r,e){return ZPe(XPe(r,e,QPe),r+"")}var AY=JPe,eMe=Pv,tMe=QT,rMe=Fv,nMe=os;function iMe(r,e,t){if(!nMe(t))return!1;var n=typeof e;return(n=="number"?tMe(t)&&rMe(e,t.length):n=="string"&&e in t)?eMe(t[e],r):!1}var sMe=iMe,aMe=AY,oMe=sMe;function lMe(r){return aMe(function(e,t){var n=-1,i=t.length,s=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(s=r.length>3&&typeof s=="function"?(i--,s):void 0,a&&oMe(t[0],t[1],a)&&(s=i<3?void 0:s,i=1),e=Object(e);++n<i;){var o=t[n];o&&r(e,o,n,s)}return e})}var _Y=lMe,cMe=CO,uMe=_Y;uMe(function(r,e,t){cMe(r,e,t)});var dMe=jd,hMe=Ms,fMe="[object Symbol]";function pMe(r){return typeof r=="symbol"||hMe(r)&&dMe(r)==fMe}var Uv=pMe,mMe=yi,gMe=Uv,vMe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,yMe=/^\w*$/;function bMe(r,e){if(mMe(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||gMe(r)?!0:yMe.test(r)||!vMe.test(r)||e!=null&&r in Object(e)}var kO=bMe,CY=vO,EMe="Expected a function";function IO(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(EMe);var t=function(){var n=arguments,i=e?e.apply(this,n):n[0],s=t.cache;if(s.has(i))return s.get(i);var a=r.apply(this,n);return t.cache=s.set(i,a)||s,a};return t.cache=new(IO.Cache||CY),t}IO.Cache=CY;var xMe=IO,wMe=xMe,TMe=500;function SMe(r){var e=wMe(r,function(n){return t.size===TMe&&t.clear(),n}),t=e.cache;return e}var AMe=SMe,_Me=AMe,CMe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,RMe=/\\(\\)?/g,kMe=_Me(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(CMe,function(t,n,i,s){e.push(i?s.replace(RMe,"$1"):n||t)}),e}),RY=kMe;function IMe(r,e){for(var t=-1,n=r==null?0:r.length,i=Array(n);++t<n;)i[t]=e(r[t],t,r);return i}var $O=IMe,q8=Up,$Me=$O,DMe=yi,LMe=Uv,j8=q8?q8.prototype:void 0,K8=j8?j8.toString:void 0;function kY(r){if(typeof r=="string")return r;if(DMe(r))return $Me(r,kY)+"";if(LMe(r))return K8?K8.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var OMe=kY,PMe=OMe;function MMe(r){return r==null?"":PMe(r)}var jp=MMe,NMe=yi,FMe=kO,BMe=RY,UMe=jp;function WMe(r,e){return NMe(r)?r:FMe(r,e)?[r]:BMe(UMe(r))}var Kp=WMe,HMe=Uv;function VMe(r){if(typeof r=="string"||HMe(r))return r;var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}var zd=VMe,GMe=Kp,qMe=zd;function jMe(r,e){e=GMe(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[qMe(e[t++])];return t&&t==n?r:void 0}var eS=jMe,KMe=_O,zMe=Kp,YMe=Fv,z8=os,QMe=zd;function XMe(r,e,t,n){if(!z8(r))return r;e=zMe(e,r);for(var i=-1,s=e.length,a=s-1,o=r;o!=null&&++i<s;){var l=QMe(e[i]),c=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(i!=a){var u=o[l];c=n?n(u,l,o):void 0,c===void 0&&(c=z8(u)?u:YMe(e[i+1])?[]:{})}KMe(o,l,c),o=o[l]}return r}var IY=XMe,ZMe=eS,JMe=IY,e3e=Kp;function t3e(r,e,t){for(var n=-1,i=e.length,s={};++n<i;){var a=e[n],o=ZMe(r,a);t(o,a)&&JMe(s,e3e(a,r),o)}return s}var r3e=t3e;function n3e(r,e){return r!=null&&e in Object(r)}var i3e=n3e,s3e=Kp,a3e=YT,o3e=yi,l3e=Fv,c3e=xO,u3e=zd;function d3e(r,e,t){e=s3e(e,r);for(var n=-1,i=e.length,s=!1;++n<i;){var a=u3e(e[n]);if(!(s=r!=null&&t(r,a)))break;r=r[a]}return s||++n!=i?s:(i=r==null?0:r.length,!!i&&c3e(i)&&l3e(a,i)&&(o3e(r)||a3e(r)))}var $Y=d3e,h3e=i3e,f3e=$Y;function p3e(r,e){return r!=null&&f3e(r,e,h3e)}var DY=p3e,m3e=r3e,g3e=DY;function v3e(r,e){return m3e(r,e,function(t,n){return g3e(r,n)})}var y3e=v3e;function b3e(r,e){for(var t=-1,n=e.length,i=r.length;++t<n;)r[i+t]=e[t];return r}var DO=b3e,Y8=Up,E3e=YT,x3e=yi,Q8=Y8?Y8.isConcatSpreadable:void 0;function w3e(r){return x3e(r)||E3e(r)||!!(Q8&&r&&r[Q8])}var T3e=w3e,S3e=DO,A3e=T3e;function LY(r,e,t,n,i){var s=-1,a=r.length;for(t||(t=A3e),i||(i=[]);++s<a;){var o=r[s];e>0&&t(o)?e>1?LY(o,e-1,t,n,i):S3e(i,o):n||(i[i.length]=o)}return i}var _3e=LY,C3e=_3e;function R3e(r){var e=r==null?0:r.length;return e?C3e(r,1):[]}var k3e=R3e,I3e=k3e,$3e=TY,D3e=RO;function L3e(r){return D3e($3e(r,void 0,I3e),r+"")}var tS=L3e,O3e=y3e,P3e=tS;P3e(function(r,e){return r==null?{}:O3e(r,e)});function Tr(r){for(var e=arguments.length,t=Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];{var i=H3e[r],s=i?typeof i=="function"?i.apply(null,t):i:"unknown error nr: "+r;throw Error("[Immer] "+s)}}function is(r){return!!r&&!!r[mr]}function gi(r){var e;return!!r&&(function(t){if(!t||typeof t!="object")return!1;var n=Object.getPrototypeOf(t);if(n===null)return!0;var i=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===V3e}(r)||Array.isArray(r)||!!r[Ng]||!!(!((e=r.constructor)===null||e===void 0)&&e[Ng])||rS(r)||nS(r))}function M3e(r){return is(r)||Tr(23,r),r[mr].t}function Wc(r,e,t){t===void 0&&(t=!1),Hc(r)===0?(t?Object.keys:Of)(r).forEach(function(n){t&&typeof n=="symbol"||e(n,r[n],r)}):r.forEach(function(n,i){return e(i,n,r)})}function Hc(r){var e=r[mr];return e?e.i>3?e.i-4:e.i:Array.isArray(r)?1:rS(r)?2:nS(r)?3:0}function _c(r,e){return Hc(r)===2?r.has(e):Object.prototype.hasOwnProperty.call(r,e)}function L1(r,e){return Hc(r)===2?r.get(e):r[e]}function OY(r,e,t){var n=Hc(r);n===2?r.set(e,t):n===3?r.add(t):r[e]=t}function PY(r,e){return r===e?r!==0||1/r==1/e:r!=r&&e!=e}function rS(r){return U3e&&r instanceof Map}function nS(r){return W3e&&r instanceof Set}function nc(r){return r.o||r.t}function LO(r){if(Array.isArray(r))return Array.prototype.slice.call(r);var e=NY(r);delete e[mr];for(var t=Of(e),n=0;n<t.length;n++){var i=t[n],s=e[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(e[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:r[i]})}return Object.create(Object.getPrototypeOf(r),e)}function OO(r,e){return e===void 0&&(e=!1),PO(r)||is(r)||!gi(r)||(Hc(r)>1&&(r.set=r.add=r.clear=r.delete=N3e),Object.freeze(r),e&&Wc(r,function(t,n){return OO(n,!0)},!0)),r}function N3e(){Tr(2)}function PO(r){return r==null||typeof r!="object"||Object.isFrozen(r)}function lo(r){var e=LI[r];return e||Tr(18,r),e}function MY(r,e){LI[r]||(LI[r]=e)}function kI(){return fp||Tr(0),fp}function q_(r,e){e&&(lo("Patches"),r.u=[],r.s=[],r.v=e)}function jx(r){II(r),r.p.forEach(F3e),r.p=null}function II(r){r===fp&&(fp=r.l)}function X8(r){return fp={p:[],l:fp,h:r,m:!0,_:0}}function F3e(r){var e=r[mr];e.i===0||e.i===1?e.j():e.g=!0}function j_(r,e){e._=e.p.length;var t=e.p[0],n=r!==void 0&&r!==t;return e.h.O||lo("ES5").S(e,r,n),n?(t[mr].P&&(jx(e),Tr(4)),gi(r)&&(r=Kx(e,r),e.l||zx(e,r)),e.u&&lo("Patches").M(t[mr].t,r,e.u,e.s)):r=Kx(e,t,[]),jx(e),e.u&&e.v(e.u,e.s),r!==FO?r:void 0}function Kx(r,e,t){if(PO(e))return e;var n=e[mr];if(!n)return Wc(e,function(o,l){return Z8(r,n,e,o,l,t)},!0),e;if(n.A!==r)return e;if(!n.P)return zx(r,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var i=n.i===4||n.i===5?n.o=LO(n.k):n.o,s=i,a=!1;n.i===3&&(s=new Set(i),i.clear(),a=!0),Wc(s,function(o,l){return Z8(r,n,i,o,l,t,a)}),zx(r,i,!1),t&&r.u&&lo("Patches").N(n,t,r.u,r.s)}return n.o}function Z8(r,e,t,n,i,s,a){if(i===t&&Tr(5),is(i)){var o=Kx(r,i,s&&e&&e.i!==3&&!_c(e.R,n)?s.concat(n):void 0);if(OY(t,n,o),!is(o))return;r.m=!1}else a&&t.add(i);if(gi(i)&&!PO(i)){if(!r.h.D&&r._<1)return;Kx(r,i),e&&e.A.l||zx(r,i)}}function zx(r,e,t){t===void 0&&(t=!1),!r.l&&r.h.D&&r.m&&OO(e,t)}function K_(r,e){var t=r[mr];return(t?nc(t):r)[e]}function J8(r,e){if(e in r)for(var t=Object.getPrototypeOf(r);t;){var n=Object.getOwnPropertyDescriptor(t,e);if(n)return n;t=Object.getPrototypeOf(t)}}function uc(r){r.P||(r.P=!0,r.l&&uc(r.l))}function z_(r){r.o||(r.o=LO(r.t))}function $I(r,e,t){var n=rS(e)?lo("MapSet").F(e,t):nS(e)?lo("MapSet").T(e,t):r.O?function(i,s){var a=Array.isArray(i),o={i:a?1:0,A:s?s.A:kI(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},l=o,c=R0;a&&(l=[o],c=rg);var u=Proxy.revocable(l,c),d=u.revoke,h=u.proxy;return o.k=h,o.j=d,h}(e,t):lo("ES5").J(e,t);return(t?t.A:kI()).p.push(n),n}function DI(r){return is(r)||Tr(22,r),function e(t){if(!gi(t))return t;var n,i=t[mr],s=Hc(t);if(i){if(!i.P&&(i.i<4||!lo("ES5").K(i)))return i.t;i.I=!0,n=e6(t,s),i.I=!1}else n=e6(t,s);return Wc(n,function(a,o){i&&L1(i.t,a)===o||OY(n,a,e(o))}),s===3?new Set(n):n}(r)}function e6(r,e){switch(e){case 2:return new Map(r);case 3:return Array.from(r)}return LO(r)}function MO(){function r(a,o){var l=s[a];return l?l.enumerable=o:s[a]=l={configurable:!0,enumerable:o,get:function(){var c=this[mr];return i(c),R0.get(c,a)},set:function(c){var u=this[mr];i(u),R0.set(u,a,c)}},l}function e(a){for(var o=a.length-1;o>=0;o--){var l=a[o][mr];if(!l.P)switch(l.i){case 5:n(l)&&uc(l);break;case 4:t(l)&&uc(l)}}}function t(a){for(var o=a.t,l=a.k,c=Of(l),u=c.length-1;u>=0;u--){var d=c[u];if(d!==mr){var h=o[d];if(h===void 0&&!_c(o,d))return!0;var f=l[d],m=f&&f[mr];if(m?m.t!==h:!PY(f,h))return!0}}var g=!!o[mr];return c.length!==Of(o).length+(g?0:1)}function n(a){var o=a.k;if(o.length!==a.t.length)return!0;var l=Object.getOwnPropertyDescriptor(o,o.length-1);if(l&&!l.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}function i(a){a.g&&Tr(3,JSON.stringify(nc(a)))}var s={};MY("ES5",{J:function(a,o){var l=Array.isArray(a),c=function(d,h){if(d){for(var f=Array(h.length),m=0;m<h.length;m++)Object.defineProperty(f,""+m,r(m,!0));return f}var g=NY(h);delete g[mr];for(var y=Of(g),b=0;b<y.length;b++){var E=y[b];g[E]=r(E,d||!!g[E].enumerable)}return Object.create(Object.getPrototypeOf(h),g)}(l,a),u={i:l?5:4,A:o?o.A:kI(),P:!1,I:!1,R:{},l:o,t:a,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,mr,{value:u,writable:!0}),c},S:function(a,o,l){l?is(o)&&o[mr].A===a&&e(a.p):(a.u&&function c(u){if(u&&typeof u=="object"){var d=u[mr];if(d){var h=d.t,f=d.k,m=d.R,g=d.i;if(g===4)Wc(f,function(A){A!==mr&&(h[A]!==void 0||_c(h,A)?m[A]||c(f[A]):(m[A]=!0,uc(d)))}),Wc(h,function(A){f[A]!==void 0||_c(f,A)||(m[A]=!1,uc(d))});else if(g===5){if(n(d)&&(uc(d),m.length=!0),f.length<h.length)for(var y=f.length;y<h.length;y++)m[y]=!1;else for(var b=h.length;b<f.length;b++)m[b]=!0;for(var E=Math.min(f.length,h.length),w=0;w<E;w++)f.hasOwnProperty(w)||(m[w]=!0),m[w]===void 0&&c(f[w])}}}}(a.p[0]),e(a.p))},K:function(a){return a.i===4?t(a):n(a)}})}function B3e(){function r(n){if(!gi(n))return n;if(Array.isArray(n))return n.map(r);if(rS(n))return new Map(Array.from(n.entries()).map(function(a){return[a[0],r(a[1])]}));if(nS(n))return new Set(Array.from(n).map(r));var i=Object.create(Object.getPrototypeOf(n));for(var s in n)i[s]=r(n[s]);return _c(n,Ng)&&(i[Ng]=n[Ng]),i}function e(n){return is(n)?r(n):n}var t="add";MY("Patches",{$:function(n,i){return i.forEach(function(s){for(var a=s.path,o=s.op,l=n,c=0;c<a.length-1;c++){var u=Hc(l),d=a[c];typeof d!="string"&&typeof d!="number"&&(d=""+d),u!==0&&u!==1||d!=="__proto__"&&d!=="constructor"||Tr(24),typeof l=="function"&&d==="prototype"&&Tr(24),typeof(l=L1(l,d))!="object"&&Tr(15,a.join("/"))}var h=Hc(l),f=r(s.value),m=a[a.length-1];switch(o){case"replace":switch(h){case 2:return l.set(m,f);case 3:Tr(16);default:return l[m]=f}case t:switch(h){case 1:return m==="-"?l.push(f):l.splice(m,0,f);case 2:return l.set(m,f);case 3:return l.add(f);default:return l[m]=f}case"remove":switch(h){case 1:return l.splice(m,1);case 2:return l.delete(m);case 3:return l.delete(s.value);default:return delete l[m]}default:Tr(17,o)}}),n},N:function(n,i,s,a){switch(n.i){case 0:case 4:case 2:return function(o,l,c,u){var d=o.t,h=o.o;Wc(o.R,function(f,m){var g=L1(d,f),y=L1(h,f),b=m?_c(d,f)?"replace":t:"remove";if(g!==y||b!=="replace"){var E=l.concat(f);c.push(b==="remove"?{op:b,path:E}:{op:b,path:E,value:y}),u.push(b===t?{op:"remove",path:E}:b==="remove"?{op:t,path:E,value:e(g)}:{op:"replace",path:E,value:e(g)})}})}(n,i,s,a);case 5:case 1:return function(o,l,c,u){var d=o.t,h=o.R,f=o.o;if(f.length<d.length){var m=[f,d];d=m[0],f=m[1];var g=[u,c];c=g[0],u=g[1]}for(var y=0;y<d.length;y++)if(h[y]&&f[y]!==d[y]){var b=l.concat([y]);c.push({op:"replace",path:b,value:e(f[y])}),u.push({op:"replace",path:b,value:e(d[y])})}for(var E=d.length;E<f.length;E++){var w=l.concat([E]);c.push({op:t,path:w,value:e(f[E])})}d.length<f.length&&u.push({op:"replace",path:l.concat(["length"]),value:d.length})}(n,i,s,a);case 3:return function(o,l,c,u){var d=o.t,h=o.o,f=0;d.forEach(function(m){if(!h.has(m)){var g=l.concat([f]);c.push({op:"remove",path:g,value:m}),u.unshift({op:t,path:g,value:m})}f++}),f=0,h.forEach(function(m){if(!d.has(m)){var g=l.concat([f]);c.push({op:t,path:g,value:m}),u.unshift({op:"remove",path:g,value:m})}f++})}(n,i,s,a)}},M:function(n,i,s,a){s.push({op:"replace",path:[],value:i===FO?void 0:i}),a.push({op:"replace",path:[],value:n})}})}var t6,fp,NO=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",U3e=typeof Map<"u",W3e=typeof Set<"u",r6=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",FO=NO?Symbol.for("immer-nothing"):((t6={})["immer-nothing"]=!0,t6),Ng=NO?Symbol.for("immer-draftable"):"__$immer_draftable",mr=NO?Symbol.for("immer-state"):"__$immer_state",H3e={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(r){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+r},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(r){return"Cannot apply patch, path doesn't resolve: "+r},16:'Sets cannot have "replace" patches.',17:function(r){return"Unsupported patch operation: "+r},18:function(r){return"The plugin for '"+r+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+r+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(r){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+r+"'"},22:function(r){return"'current' expects a draft, got: "+r},23:function(r){return"'original' expects a draft, got: "+r},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},V3e=""+Object.prototype.constructor,Of=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(r){return Object.getOwnPropertyNames(r).concat(Object.getOwnPropertySymbols(r))}:Object.getOwnPropertyNames,NY=Object.getOwnPropertyDescriptors||function(r){var e={};return Of(r).forEach(function(t){e[t]=Object.getOwnPropertyDescriptor(r,t)}),e},LI={},R0={get:function(r,e){if(e===mr)return r;var t=nc(r);if(!_c(t,e))return function(i,s,a){var o,l=J8(s,a);return l?"value"in l?l.value:(o=l.get)===null||o===void 0?void 0:o.call(i.k):void 0}(r,t,e);var n=t[e];return r.I||!gi(n)?n:n===K_(r.t,e)?(z_(r),r.o[e]=$I(r.A.h,n,r)):n},has:function(r,e){return e in nc(r)},ownKeys:function(r){return Reflect.ownKeys(nc(r))},set:function(r,e,t){var n=J8(nc(r),e);if(n?.set)return n.set.call(r.k,t),!0;if(!r.P){var i=K_(nc(r),e),s=i?.[mr];if(s&&s.t===t)return r.o[e]=t,r.R[e]=!1,!0;if(PY(t,i)&&(t!==void 0||_c(r.t,e)))return!0;z_(r),uc(r)}return r.o[e]===t&&(t!==void 0||e in r.o)||Number.isNaN(t)&&Number.isNaN(r.o[e])||(r.o[e]=t,r.R[e]=!0),!0},deleteProperty:function(r,e){return K_(r.t,e)!==void 0||e in r.t?(r.R[e]=!1,z_(r),uc(r)):delete r.R[e],r.o&&delete r.o[e],!0},getOwnPropertyDescriptor:function(r,e){var t=nc(r),n=Reflect.getOwnPropertyDescriptor(t,e);return n&&{writable:!0,configurable:r.i!==1||e!=="length",enumerable:n.enumerable,value:t[e]}},defineProperty:function(){Tr(11)},getPrototypeOf:function(r){return Object.getPrototypeOf(r.t)},setPrototypeOf:function(){Tr(12)}},rg={};Wc(R0,function(r,e){rg[r]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),rg.deleteProperty=function(r,e){return isNaN(parseInt(e))&&Tr(13),rg.set.call(this,r,e,void 0)},rg.set=function(r,e,t){return e!=="length"&&isNaN(parseInt(e))&&Tr(14),R0.set.call(this,r[0],e,t,r[0])};var G3e=function(){function r(t){var n=this;this.O=r6,this.D=!0,this.produce=function(i,s,a){if(typeof i=="function"&&typeof s!="function"){var o=s;s=i;var l=n;return function(g){var y=this;g===void 0&&(g=o);for(var b=arguments.length,E=Array(b>1?b-1:0),w=1;w<b;w++)E[w-1]=arguments[w];return l.produce(g,function(A){var S;return(S=s).call.apply(S,[y,A].concat(E))})}}var c;if(typeof s!="function"&&Tr(6),a!==void 0&&typeof a!="function"&&Tr(7),gi(i)){var u=X8(n),d=$I(n,i,void 0),h=!0;try{c=s(d),h=!1}finally{h?jx(u):II(u)}return typeof Promise<"u"&&c instanceof Promise?c.then(function(g){return q_(u,a),j_(g,u)},function(g){throw jx(u),g}):(q_(u,a),j_(c,u))}if(!i||typeof i!="object"){if((c=s(i))===void 0&&(c=i),c===FO&&(c=void 0),n.D&&OO(c,!0),a){var f=[],m=[];lo("Patches").M(i,c,f,m),a(f,m)}return c}Tr(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(c){for(var u=arguments.length,d=Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];return n.produceWithPatches(c,function(f){return i.apply(void 0,[f].concat(d))})};var a,o,l=n.produce(i,s,function(c,u){a=c,o=u});return typeof Promise<"u"&&l instanceof Promise?l.then(function(c){return[c,a,o]}):[l,a,o]},typeof t?.useProxies=="boolean"&&this.setUseProxies(t.useProxies),typeof t?.autoFreeze=="boolean"&&this.setAutoFreeze(t.autoFreeze)}var e=r.prototype;return e.createDraft=function(t){gi(t)||Tr(8),is(t)&&(t=DI(t));var n=X8(this),i=$I(this,t,void 0);return i[mr].C=!0,II(n),i},e.finishDraft=function(t,n){var i=t&&t[mr];i&&i.C||Tr(9),i.I&&Tr(10);var s=i.A;return q_(s,n),j_(void 0,s)},e.setAutoFreeze=function(t){this.D=t},e.setUseProxies=function(t){t&&!r6&&Tr(20),this.O=t},e.applyPatches=function(t,n){var i;for(i=n.length-1;i>=0;i--){var s=n[i];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}i>-1&&(n=n.slice(i+1));var a=lo("Patches").$;return is(t)?a(t,n):this.produce(t,function(o){return a(o,n)})},r}(),ss=new G3e,_l=ss.produce,FY=ss.produceWithPatches.bind(ss);ss.setAutoFreeze.bind(ss);ss.setUseProxies.bind(ss);var n6=ss.applyPatches.bind(ss);ss.createDraft.bind(ss);ss.finishDraft.bind(ss);var BY={exports:{}},qt={};/** @license React v16.13.1
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var r=typeof Symbol=="function"&&Symbol.for,e=r?Symbol.for("react.element"):60103,t=r?Symbol.for("react.portal"):60106,n=r?Symbol.for("react.fragment"):60107,i=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,a=r?Symbol.for("react.provider"):60109,o=r?Symbol.for("react.context"):60110,l=r?Symbol.for("react.async_mode"):60111,c=r?Symbol.for("react.concurrent_mode"):60111,u=r?Symbol.for("react.forward_ref"):60112,d=r?Symbol.for("react.suspense"):60113,h=r?Symbol.for("react.suspense_list"):60120,f=r?Symbol.for("react.memo"):60115,m=r?Symbol.for("react.lazy"):60116,g=r?Symbol.for("react.block"):60121,y=r?Symbol.for("react.fundamental"):60117,b=r?Symbol.for("react.responder"):60118,E=r?Symbol.for("react.scope"):60119;function w(me){return typeof me=="string"||typeof me=="function"||me===n||me===c||me===s||me===i||me===d||me===h||typeof me=="object"&&me!==null&&(me.$$typeof===m||me.$$typeof===f||me.$$typeof===a||me.$$typeof===o||me.$$typeof===u||me.$$typeof===y||me.$$typeof===b||me.$$typeof===E||me.$$typeof===g)}function A(me){if(typeof me=="object"&&me!==null){var Ue=me.$$typeof;switch(Ue){case e:var Se=me.type;switch(Se){case l:case c:case n:case s:case i:case d:return Se;default:var et=Se&&Se.$$typeof;switch(et){case o:case u:case m:case f:case a:return et;default:return Ue}}case t:return Ue}}}var S=l,_=c,C=o,k=a,D=e,I=u,L=n,M=m,F=f,U=t,W=s,j=i,z=d,Q=!1;function V(me){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 17+. Update your code to use ReactIs.isConcurrentMode() instead. It has the exact same API.")),Y(me)||A(me)===l}function Y(me){return A(me)===c}function J(me){return A(me)===o}function ue(me){return A(me)===a}function ne(me){return typeof me=="object"&&me!==null&&me.$$typeof===e}function ge(me){return A(me)===u}function ae(me){return A(me)===n}function ie(me){return A(me)===m}function ee(me){return A(me)===f}function be(me){return A(me)===t}function we(me){return A(me)===s}function Re(me){return A(me)===i}function Oe(me){return A(me)===d}qt.AsyncMode=S,qt.ConcurrentMode=_,qt.ContextConsumer=C,qt.ContextProvider=k,qt.Element=D,qt.ForwardRef=I,qt.Fragment=L,qt.Lazy=M,qt.Memo=F,qt.Portal=U,qt.Profiler=W,qt.StrictMode=j,qt.Suspense=z,qt.isAsyncMode=V,qt.isConcurrentMode=Y,qt.isContextConsumer=J,qt.isContextProvider=ue,qt.isElement=ne,qt.isForwardRef=ge,qt.isFragment=ae,qt.isLazy=ie,qt.isMemo=ee,qt.isPortal=be,qt.isProfiler=we,qt.isStrictMode=Re,qt.isSuspense=Oe,qt.isValidElementType=w,qt.typeOf=A})();BY.exports=qt;var q3e=BY.exports,UY=q3e,j3e={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},K3e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},WY={};WY[UY.ForwardRef]=j3e;WY[UY.Memo]=K3e;function z3e(r,e,t){if(t===void 0&&(t=Error),!r)throw new t(e)}var Y3e=function(r){console.error(r)},Q3e=function(r){console.warn(r)},X3e={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Y3e,onWarn:Q3e};function Z3e(r){z3e(r,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}Et(Et({},X3e),{textComponent:x.Fragment});var BO=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=x.createContext(null)):x.createContext(null);BO.Consumer;BO.Provider;var J3e=BO;function UO(){var r=x.useContext(J3e);return Z3e(r),r}var OI;(function(r){r.formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName"})(OI||(OI={}));var PI;(function(r){r.formatDate="FormattedDateParts",r.formatTime="FormattedTimeParts",r.formatNumber="FormattedNumberParts",r.formatList="FormattedListParts"})(PI||(PI={}));function HY(r){var e=function(t){var n=UO(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=typeof i=="string"?new Date(i||0):i,l=r==="formatDate"?n.formatDateToParts(o,a):n.formatTimeToParts(o,a);return s(l)};return e.displayName=PI[r],e}function Wv(r){var e=function(t){var n=UO(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=n[r](i,a);if(typeof s=="function")return s(o);var l=n.textComponent||x.Fragment;return x.createElement(l,null,o)};return e.displayName=OI[r],e}Wv("formatDate");Wv("formatTime");Wv("formatNumber");Wv("formatList");Wv("formatDisplayName");HY("formatDate");HY("formatTime");var zp=TypeError,WO=typeof Map=="function"&&Map.prototype,Y_=Object.getOwnPropertyDescriptor&&WO?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Yx=WO&&Y_&&typeof Y_.get=="function"?Y_.get:null,i6=WO&&Map.prototype.forEach,HO=typeof Set=="function"&&Set.prototype,Q_=Object.getOwnPropertyDescriptor&&HO?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Qx=HO&&Q_&&typeof Q_.get=="function"?Q_.get:null,s6=HO&&Set.prototype.forEach,eNe=typeof WeakMap=="function"&&WeakMap.prototype,Fg=eNe?WeakMap.prototype.has:null,tNe=typeof WeakSet=="function"&&WeakSet.prototype,Bg=tNe?WeakSet.prototype.has:null,rNe=typeof WeakRef=="function"&&WeakRef.prototype,a6=rNe?WeakRef.prototype.deref:null,nNe=Boolean.prototype.valueOf,iNe=Object.prototype.toString,sNe=Function.prototype.toString,aNe=String.prototype.match,VO=String.prototype.slice,bc=String.prototype.replace,oNe=String.prototype.toUpperCase,o6=String.prototype.toLowerCase,VY=RegExp.prototype.test,l6=Array.prototype.concat,qa=Array.prototype.join,lNe=Array.prototype.slice,c6=Math.floor,MI=typeof BigInt=="function"?BigInt.prototype.valueOf:null,X_=Object.getOwnPropertySymbols,NI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,pp=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Ug=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===pp||!0)?Symbol.toStringTag:null,GY=Object.prototype.propertyIsEnumerable,u6=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(r){return r.__proto__}:null);function d6(r,e){if(r===1/0||r===-1/0||r!==r||r&&r>-1e3&&r<1e3||VY.call(/e/,e))return e;var t=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof r=="number"){var n=r<0?-c6(-r):c6(r);if(n!==r){var i=String(n),s=VO.call(e,i.length+1);return bc.call(i,t,"$&_")+"."+bc.call(bc.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return bc.call(e,t,"$&_")}var FI=pde,h6=FI.custom,f6=KY(h6)?h6:null,qY={__proto__:null,double:'"',single:"'"},cNe={__proto__:null,double:/(["\\])/g,single:/(['\\])/g},iS=function r(e,t,n,i){var s=t||{};if(Jo(s,"quoteStyle")&&!Jo(qY,s.quoteStyle))throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Jo(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var a=Jo(s,"customInspect")?s.customInspect:!0;if(typeof a!="boolean"&&a!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Jo(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Jo(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var o=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return YY(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return o?d6(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return o?d6(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=u&&u>0&&typeof e=="object")return BI(e)?"[Array]":"[Object]";var d=CNe(s,n);if(typeof i>"u")i=[];else if(zY(i,e)>=0)return"[Circular]";function h(F,U,W){if(U&&(i=lNe.call(i),i.push(U)),W){var j={depth:s.depth};return Jo(s,"quoteStyle")&&(j.quoteStyle=s.quoteStyle),r(F,j,n+1,i)}return r(F,s,n+1,i)}if(typeof e=="function"&&!p6(e)){var f=yNe(e),m=Rb(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(m.length>0?" { "+qa.call(m,", ")+" }":"")}if(KY(e)){var g=pp?bc.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):NI.call(e);return typeof e=="object"&&!pp?Am(g):g}if(SNe(e)){for(var y="<"+o6.call(String(e.nodeName)),b=e.attributes||[],E=0;E<b.length;E++)y+=" "+b[E].name+"="+jY(uNe(b[E].value),"double",s);return y+=">",e.childNodes&&e.childNodes.length&&(y+="..."),y+="</"+o6.call(String(e.nodeName))+">",y}if(BI(e)){if(e.length===0)return"[]";var w=Rb(e,h);return d&&!_Ne(w)?"["+UI(w,d)+"]":"[ "+qa.call(w,", ")+" ]"}if(hNe(e)){var A=Rb(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!GY.call(e,"cause")?"{ ["+String(e)+"] "+qa.call(l6.call("[cause]: "+h(e.cause),A),", ")+" }":A.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+qa.call(A,", ")+" }"}if(typeof e=="object"&&a){if(f6&&typeof e[f6]=="function"&&FI)return FI(e,{depth:u-n});if(a!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(bNe(e)){var S=[];return i6&&i6.call(e,function(F,U){S.push(h(U,e,!0)+" => "+h(F,e))}),m6("Map",Yx.call(e),S,d)}if(wNe(e)){var _=[];return s6&&s6.call(e,function(F){_.push(h(F,e))}),m6("Set",Qx.call(e),_,d)}if(ENe(e))return Z_("WeakMap");if(TNe(e))return Z_("WeakSet");if(xNe(e))return Z_("WeakRef");if(pNe(e))return Am(h(Number(e)));if(gNe(e))return Am(h(MI.call(e)));if(mNe(e))return Am(nNe.call(e));if(fNe(e))return Am(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(typeof globalThis<"u"&&e===globalThis||typeof Rn<"u"&&e===Rn)return"{ [object globalThis] }";if(!dNe(e)&&!p6(e)){var C=Rb(e,h),k=u6?u6(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",I=!k&&Ug&&Object(e)===e&&Ug in e?VO.call(Jc(e),8,-1):D?"Object":"",L=k||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",M=L+(I||D?"["+qa.call(l6.call([],I||[],D||[]),": ")+"] ":"");return C.length===0?M+"{}":d?M+"{"+UI(C,d)+"}":M+"{ "+qa.call(C,", ")+" }"}return String(e)};function jY(r,e,t){var n=t.quoteStyle||e,i=qY[n];return i+r+i}function uNe(r){return bc.call(String(r),/"/g,"&quot;")}function Yd(r){return!Ug||!(typeof r=="object"&&(Ug in r||typeof r[Ug]<"u"))}function BI(r){return Jc(r)==="[object Array]"&&Yd(r)}function dNe(r){return Jc(r)==="[object Date]"&&Yd(r)}function p6(r){return Jc(r)==="[object RegExp]"&&Yd(r)}function hNe(r){return Jc(r)==="[object Error]"&&Yd(r)}function fNe(r){return Jc(r)==="[object String]"&&Yd(r)}function pNe(r){return Jc(r)==="[object Number]"&&Yd(r)}function mNe(r){return Jc(r)==="[object Boolean]"&&Yd(r)}function KY(r){if(pp)return r&&typeof r=="object"&&r instanceof Symbol;if(typeof r=="symbol")return!0;if(!r||typeof r!="object"||!NI)return!1;try{return NI.call(r),!0}catch{}return!1}function gNe(r){if(!r||typeof r!="object"||!MI)return!1;try{return MI.call(r),!0}catch{}return!1}var vNe=Object.prototype.hasOwnProperty||function(r){return r in this};function Jo(r,e){return vNe.call(r,e)}function Jc(r){return iNe.call(r)}function yNe(r){if(r.name)return r.name;var e=aNe.call(sNe.call(r),/^function\s*([\w$]+)/);return e?e[1]:null}function zY(r,e){if(r.indexOf)return r.indexOf(e);for(var t=0,n=r.length;t<n;t++)if(r[t]===e)return t;return-1}function bNe(r){if(!Yx||!r||typeof r!="object")return!1;try{Yx.call(r);try{Qx.call(r)}catch{return!0}return r instanceof Map}catch{}return!1}function ENe(r){if(!Fg||!r||typeof r!="object")return!1;try{Fg.call(r,Fg);try{Bg.call(r,Bg)}catch{return!0}return r instanceof WeakMap}catch{}return!1}function xNe(r){if(!a6||!r||typeof r!="object")return!1;try{return a6.call(r),!0}catch{}return!1}function wNe(r){if(!Qx||!r||typeof r!="object")return!1;try{Qx.call(r);try{Yx.call(r)}catch{return!0}return r instanceof Set}catch{}return!1}function TNe(r){if(!Bg||!r||typeof r!="object")return!1;try{Bg.call(r,Bg);try{Fg.call(r,Fg)}catch{return!0}return r instanceof WeakSet}catch{}return!1}function SNe(r){return!r||typeof r!="object"?!1:typeof HTMLElement<"u"&&r instanceof HTMLElement?!0:typeof r.nodeName=="string"&&typeof r.getAttribute=="function"}function YY(r,e){if(r.length>e.maxStringLength){var t=r.length-e.maxStringLength,n="... "+t+" more character"+(t>1?"s":"");return YY(VO.call(r,0,e.maxStringLength),e)+n}var i=cNe[e.quoteStyle||"single"];i.lastIndex=0;var s=bc.call(bc.call(r,i,"\\$1"),/[\x00-\x1f]/g,ANe);return jY(s,"single",e)}function ANe(r){var e=r.charCodeAt(0),t={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return t?"\\"+t:"\\x"+(e<16?"0":"")+oNe.call(e.toString(16))}function Am(r){return"Object("+r+")"}function Z_(r){return r+" { ? }"}function m6(r,e,t,n){var i=n?UI(t,n):qa.call(t,", ");return r+" ("+e+") {"+i+"}"}function _Ne(r){for(var e=0;e<r.length;e++)if(zY(r[e],`
`)>=0)return!1;return!0}function CNe(r,e){var t;if(r.indent==="	")t="	";else if(typeof r.indent=="number"&&r.indent>0)t=qa.call(Array(r.indent+1)," ");else return null;return{base:t,prev:qa.call(Array(e+1),t)}}function UI(r,e){if(r.length===0)return"";var t=`
`+e.prev+e.base;return t+qa.call(r,","+t)+`
`+e.prev}function Rb(r,e){var t=BI(r),n=[];if(t){n.length=r.length;for(var i=0;i<r.length;i++)n[i]=Jo(r,i)?e(r[i],r):""}var s=typeof X_=="function"?X_(r):[],a;if(pp){a={};for(var o=0;o<s.length;o++)a["$"+s[o]]=s[o]}for(var l in r)Jo(r,l)&&(t&&String(Number(l))===l&&l<r.length||pp&&a["$"+l]instanceof Symbol||(VY.call(/[^\w$]/,l)?n.push(e(l,r)+": "+e(r[l],r)):n.push(l+": "+e(r[l],r))));if(typeof X_=="function")for(var c=0;c<s.length;c++)GY.call(r,s[c])&&n.push("["+e(s[c])+"]: "+e(r[s[c]],r));return n}var RNe=iS,kNe=zp,sS=function(r,e,t){for(var n=r,i;(i=n.next)!=null;n=i)if(i.key===e)return n.next=i.next,t||(i.next=r.next,r.next=i),i},INe=function(r,e){if(r){var t=sS(r,e);return t&&t.value}},$Ne=function(r,e,t){var n=sS(r,e);n?n.value=t:r.next={key:e,next:r.next,value:t}},DNe=function(r,e){return r?!!sS(r,e):!1},LNe=function(r,e){if(r)return sS(r,e,!0)},ONe=function(){var e,t={assert:function(n){if(!t.has(n))throw new kNe("Side channel does not contain "+RNe(n))},delete:function(n){var i=e&&e.next,s=LNe(e,n);return s&&i&&i===s&&(e=void 0),!!s},get:function(n){return INe(e,n)},has:function(n){return DNe(e,n)},set:function(n,i){e||(e={next:void 0}),$Ne(e,n,i)}};return t},QY=Object,PNe=Error,MNe=EvalError,NNe=RangeError,FNe=ReferenceError,BNe=SyntaxError,UNe=URIError,WNe=Math.abs,HNe=Math.floor,VNe=Math.max,GNe=Math.min,qNe=Math.pow,jNe=Math.round,KNe=Number.isNaN||function(e){return e!==e},zNe=KNe,YNe=function(e){return zNe(e)||e===0?e:e<0?-1:1},QNe=Object.getOwnPropertyDescriptor,O1=QNe;if(O1)try{O1([],"length")}catch{O1=null}var XY=O1,P1=Object.defineProperty||!1;if(P1)try{P1({},"a",{value:1})}catch{P1=!1}var XNe=P1,J_,g6;function ZNe(){return g6||(g6=1,J_=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[t]=i;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,t);if(o.value!==i||o.enumerable!==!0)return!1}return!0}),J_}var eC,v6;function JNe(){if(v6)return eC;v6=1;var r=typeof Symbol<"u"&&Symbol,e=ZNe();return eC=function(){return typeof r!="function"||typeof Symbol!="function"||typeof r("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:e()},eC}var tC,y6;function ZY(){return y6||(y6=1,tC=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),tC}var rC,b6;function JY(){if(b6)return rC;b6=1;var r=QY;return rC=r.getPrototypeOf||null,rC}var nC,E6;function e5e(){if(E6)return nC;E6=1;var r="Function.prototype.bind called on incompatible ",e=Object.prototype.toString,t=Math.max,n="[object Function]",i=function(l,c){for(var u=[],d=0;d<l.length;d+=1)u[d]=l[d];for(var h=0;h<c.length;h+=1)u[h+l.length]=c[h];return u},s=function(l,c){for(var u=[],d=c,h=0;d<l.length;d+=1,h+=1)u[h]=l[d];return u},a=function(o,l){for(var c="",u=0;u<o.length;u+=1)c+=o[u],u+1<o.length&&(c+=l);return c};return nC=function(l){var c=this;if(typeof c!="function"||e.apply(c)!==n)throw new TypeError(r+c);for(var u=s(arguments,1),d,h=function(){if(this instanceof d){var b=c.apply(this,i(u,arguments));return Object(b)===b?b:this}return c.apply(l,i(u,arguments))},f=t(0,c.length-u.length),m=[],g=0;g<f;g++)m[g]="$"+g;if(d=Function("binder","return function ("+a(m,",")+"){ return binder.apply(this,arguments); }")(h),c.prototype){var y=function(){};y.prototype=c.prototype,d.prototype=new y,y.prototype=null}return d},nC}var iC,x6;function aS(){if(x6)return iC;x6=1;var r=e5e();return iC=Function.prototype.bind||r,iC}var sC,w6;function GO(){return w6||(w6=1,sC=Function.prototype.call),sC}var aC,T6;function eQ(){return T6||(T6=1,aC=Function.prototype.apply),aC}var t5e=typeof Reflect<"u"&&Reflect&&Reflect.apply,r5e=aS(),n5e=eQ(),i5e=GO(),s5e=t5e,a5e=s5e||r5e.call(i5e,n5e),o5e=aS(),l5e=zp,c5e=GO(),u5e=a5e,tQ=function(e){if(e.length<1||typeof e[0]!="function")throw new l5e("a function is required");return u5e(o5e,c5e,e)},oC,S6;function d5e(){if(S6)return oC;S6=1;var r=tQ,e=XY,t;try{t=[].__proto__===Array.prototype}catch(a){if(!a||typeof a!="object"||!("code"in a)||a.code!=="ERR_PROTO_ACCESS")throw a}var n=!!t&&e&&e(Object.prototype,"__proto__"),i=Object,s=i.getPrototypeOf;return oC=n&&typeof n.get=="function"?r([n.get]):typeof s=="function"?function(o){return s(o==null?o:i(o))}:!1,oC}var lC,A6;function h5e(){if(A6)return lC;A6=1;var r=ZY(),e=JY(),t=d5e();return lC=r?function(i){return r(i)}:e?function(i){if(!i||typeof i!="object"&&typeof i!="function")throw new TypeError("getProto: not an object");return e(i)}:t?function(i){return t(i)}:null,lC}var cC,_6;function f5e(){if(_6)return cC;_6=1;var r=Function.prototype.call,e=Object.prototype.hasOwnProperty,t=aS();return cC=t.call(r,e),cC}var Rt,p5e=QY,m5e=PNe,g5e=MNe,v5e=NNe,y5e=FNe,mp=BNe,Pf=zp,b5e=UNe,E5e=WNe,x5e=HNe,w5e=VNe,T5e=GNe,S5e=qNe,A5e=jNe,_5e=YNe,rQ=Function,uC=function(r){try{return rQ('"use strict"; return ('+r+").constructor;")()}catch{}},k0=XY,C5e=XNe,dC=function(){throw new Pf},R5e=k0?function(){try{return arguments.callee,dC}catch{try{return k0(arguments,"callee").get}catch{return dC}}}():dC,Rh=JNe()(),Sn=h5e(),k5e=JY(),I5e=ZY(),nQ=eQ(),Hv=GO(),Vh={},$5e=typeof Uint8Array>"u"||!Sn?Rt:Sn(Uint8Array),pd={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Rt:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Rt:ArrayBuffer,"%ArrayIteratorPrototype%":Rh&&Sn?Sn([][Symbol.iterator]()):Rt,"%AsyncFromSyncIteratorPrototype%":Rt,"%AsyncFunction%":Vh,"%AsyncGenerator%":Vh,"%AsyncGeneratorFunction%":Vh,"%AsyncIteratorPrototype%":Vh,"%Atomics%":typeof Atomics>"u"?Rt:Atomics,"%BigInt%":typeof BigInt>"u"?Rt:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Rt:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Rt:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Rt:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":m5e,"%eval%":eval,"%EvalError%":g5e,"%Float16Array%":typeof Float16Array>"u"?Rt:Float16Array,"%Float32Array%":typeof Float32Array>"u"?Rt:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Rt:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Rt:FinalizationRegistry,"%Function%":rQ,"%GeneratorFunction%":Vh,"%Int8Array%":typeof Int8Array>"u"?Rt:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Rt:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Rt:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Rh&&Sn?Sn(Sn([][Symbol.iterator]())):Rt,"%JSON%":typeof JSON=="object"?JSON:Rt,"%Map%":typeof Map>"u"?Rt:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Rh||!Sn?Rt:Sn(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":p5e,"%Object.getOwnPropertyDescriptor%":k0,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Rt:Promise,"%Proxy%":typeof Proxy>"u"?Rt:Proxy,"%RangeError%":v5e,"%ReferenceError%":y5e,"%Reflect%":typeof Reflect>"u"?Rt:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Rt:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Rh||!Sn?Rt:Sn(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Rt:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Rh&&Sn?Sn(""[Symbol.iterator]()):Rt,"%Symbol%":Rh?Symbol:Rt,"%SyntaxError%":mp,"%ThrowTypeError%":R5e,"%TypedArray%":$5e,"%TypeError%":Pf,"%Uint8Array%":typeof Uint8Array>"u"?Rt:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Rt:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Rt:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Rt:Uint32Array,"%URIError%":b5e,"%WeakMap%":typeof WeakMap>"u"?Rt:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Rt:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Rt:WeakSet,"%Function.prototype.call%":Hv,"%Function.prototype.apply%":nQ,"%Object.defineProperty%":C5e,"%Object.getPrototypeOf%":k5e,"%Math.abs%":E5e,"%Math.floor%":x5e,"%Math.max%":w5e,"%Math.min%":T5e,"%Math.pow%":S5e,"%Math.round%":A5e,"%Math.sign%":_5e,"%Reflect.getPrototypeOf%":I5e};if(Sn)try{null.error}catch(r){var D5e=Sn(Sn(r));pd["%Error.prototype%"]=D5e}var L5e=function r(e){var t;if(e==="%AsyncFunction%")t=uC("async function () {}");else if(e==="%GeneratorFunction%")t=uC("function* () {}");else if(e==="%AsyncGeneratorFunction%")t=uC("async function* () {}");else if(e==="%AsyncGenerator%"){var n=r("%AsyncGeneratorFunction%");n&&(t=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=r("%AsyncGenerator%");i&&Sn&&(t=Sn(i.prototype))}return pd[e]=t,t},C6={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Vv=aS(),Xx=f5e(),O5e=Vv.call(Hv,Array.prototype.concat),P5e=Vv.call(nQ,Array.prototype.splice),R6=Vv.call(Hv,String.prototype.replace),Zx=Vv.call(Hv,String.prototype.slice),M5e=Vv.call(Hv,RegExp.prototype.exec),N5e=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,F5e=/\\(\\)?/g,B5e=function(e){var t=Zx(e,0,1),n=Zx(e,-1);if(t==="%"&&n!=="%")throw new mp("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new mp("invalid intrinsic syntax, expected opening `%`");var i=[];return R6(e,N5e,function(s,a,o,l){i[i.length]=o?R6(l,F5e,"$1"):a||s}),i},U5e=function(e,t){var n=e,i;if(Xx(C6,n)&&(i=C6[n],n="%"+i[0]+"%"),Xx(pd,n)){var s=pd[n];if(s===Vh&&(s=L5e(n)),typeof s>"u"&&!t)throw new Pf("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new mp("intrinsic "+e+" does not exist!")},qO=function(e,t){if(typeof e!="string"||e.length===0)throw new Pf("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new Pf('"allowMissing" argument must be a boolean');if(M5e(/^%?[^%]*%?$/,e)===null)throw new mp("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=B5e(e),i=n.length>0?n[0]:"",s=U5e("%"+i+"%",t),a=s.name,o=s.value,l=!1,c=s.alias;c&&(i=c[0],P5e(n,O5e([0,1],c)));for(var u=1,d=!0;u<n.length;u+=1){var h=n[u],f=Zx(h,0,1),m=Zx(h,-1);if((f==='"'||f==="'"||f==="`"||m==='"'||m==="'"||m==="`")&&f!==m)throw new mp("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,a="%"+i+"%",Xx(pd,a))o=pd[a];else if(o!=null){if(!(h in o)){if(!t)throw new Pf("base intrinsic for "+e+" exists, but the property is not available.");return}if(k0&&u+1>=n.length){var g=k0(o,h);d=!!g,d&&"get"in g&&!("originalValue"in g.get)?o=g.get:o=o[h]}else d=Xx(o,h),o=o[h];d&&!l&&(pd[a]=o)}}return o},iQ=qO,sQ=tQ,W5e=sQ([iQ("%String.prototype.indexOf%")]),aQ=function(e,t){var n=iQ(e,!!t);return typeof n=="function"&&W5e(e,".prototype.")>-1?sQ([n]):n},H5e=qO,Gv=aQ,V5e=iS,G5e=zp,k6=H5e("%Map%",!0),q5e=Gv("Map.prototype.get",!0),j5e=Gv("Map.prototype.set",!0),K5e=Gv("Map.prototype.has",!0),z5e=Gv("Map.prototype.delete",!0),Y5e=Gv("Map.prototype.size",!0),oQ=!!k6&&function(){var e,t={assert:function(n){if(!t.has(n))throw new G5e("Side channel does not contain "+V5e(n))},delete:function(n){if(e){var i=z5e(e,n);return Y5e(e)===0&&(e=void 0),i}return!1},get:function(n){if(e)return q5e(e,n)},has:function(n){return e?K5e(e,n):!1},set:function(n,i){e||(e=new k6),j5e(e,n,i)}};return t},Q5e=qO,oS=aQ,X5e=iS,kb=oQ,Z5e=zp,kh=Q5e("%WeakMap%",!0),J5e=oS("WeakMap.prototype.get",!0),eFe=oS("WeakMap.prototype.set",!0),tFe=oS("WeakMap.prototype.has",!0),rFe=oS("WeakMap.prototype.delete",!0),nFe=kh?function(){var e,t,n={assert:function(i){if(!n.has(i))throw new Z5e("Side channel does not contain "+X5e(i))},delete:function(i){if(kh&&i&&(typeof i=="object"||typeof i=="function")){if(e)return rFe(e,i)}else if(kb&&t)return t.delete(i);return!1},get:function(i){return kh&&i&&(typeof i=="object"||typeof i=="function")&&e?J5e(e,i):t&&t.get(i)},has:function(i){return kh&&i&&(typeof i=="object"||typeof i=="function")&&e?tFe(e,i):!!t&&t.has(i)},set:function(i,s){kh&&i&&(typeof i=="object"||typeof i=="function")?(e||(e=new kh),eFe(e,i,s)):kb&&(t||(t=kb()),t.set(i,s))}};return n}:kb,iFe=zp,sFe=iS,aFe=ONe,oFe=oQ,lFe=nFe,cFe=lFe||oFe||aFe,uFe=function(){var e,t={assert:function(n){if(!t.has(n))throw new iFe("Side channel does not contain "+sFe(n))},delete:function(n){return!!e&&e.delete(n)},get:function(n){return e&&e.get(n)},has:function(n){return!!e&&e.has(n)},set:function(n,i){e||(e=cFe()),e.set(n,i)}};return t},dFe=String.prototype.replace,hFe=/%20/g,hC={RFC1738:"RFC1738",RFC3986:"RFC3986"},jO={default:hC.RFC3986,formatters:{RFC1738:function(r){return dFe.call(r,hFe,"+")},RFC3986:function(r){return String(r)}},RFC1738:hC.RFC1738,RFC3986:hC.RFC3986},fFe=jO,fC=Object.prototype.hasOwnProperty,Yu=Array.isArray,_a=function(){for(var r=[],e=0;e<256;++e)r.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return r}(),pFe=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(Yu(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);t.obj[t.prop]=i}}},lQ=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},mFe=function r(e,t,n){if(!t)return e;if(typeof t!="object"){if(Yu(e))e.push(t);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!fC.call(Object.prototype,t))&&(e[t]=!0);else return[e,t];return e}if(!e||typeof e!="object")return[e].concat(t);var i=e;return Yu(e)&&!Yu(t)&&(i=lQ(e,n)),Yu(e)&&Yu(t)?(t.forEach(function(s,a){if(fC.call(e,a)){var o=e[a];o&&typeof o=="object"&&s&&typeof s=="object"?e[a]=r(o,s,n):e.push(s)}else e[a]=s}),e):Object.keys(t).reduce(function(s,a){var o=t[a];return fC.call(s,a)?s[a]=r(s[a],o,n):s[a]=o,s},i)},gFe=function(e,t){return Object.keys(t).reduce(function(n,i){return n[i]=t[i],n},e)},vFe=function(r,e,t){var n=r.replace(/\+/g," ");if(t==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},yFe=function(e,t,n,i,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var o="",l=0;l<a.length;++l){var c=a.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===fFe.RFC1738&&(c===40||c===41)){o+=a.charAt(l);continue}if(c<128){o=o+_a[c];continue}if(c<2048){o=o+(_a[192|c>>6]+_a[128|c&63]);continue}if(c<55296||c>=57344){o=o+(_a[224|c>>12]+_a[128|c>>6&63]+_a[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|a.charCodeAt(l)&1023),o+=_a[240|c>>18]+_a[128|c>>12&63]+_a[128|c>>6&63]+_a[128|c&63]}return o},bFe=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],i=0;i<t.length;++i)for(var s=t[i],a=s.obj[s.prop],o=Object.keys(a),l=0;l<o.length;++l){var c=o[l],u=a[c];typeof u=="object"&&u!==null&&n.indexOf(u)===-1&&(t.push({obj:a,prop:c}),n.push(u))}return pFe(t),e},EFe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},xFe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},wFe=function(e,t){return[].concat(e,t)},TFe=function(e,t){if(Yu(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(t(e[i]));return n}return t(e)},cQ={arrayToObject:lQ,assign:gFe,combine:wFe,compact:bFe,decode:vFe,encode:yFe,isBuffer:xFe,isRegExp:EFe,maybeMap:TFe,merge:mFe},uQ=uFe,M1=cQ,Wg=jO,SFe=Object.prototype.hasOwnProperty,I6={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},sl=Array.isArray,AFe=Array.prototype.push,dQ=function(r,e){AFe.apply(r,sl(e)?e:[e])},_Fe=Date.prototype.toISOString,$6=Wg.default,Jn={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:M1.encode,encodeValuesOnly:!1,format:$6,formatter:Wg.formatters[$6],indices:!1,serializeDate:function(e){return _Fe.call(e)},skipNulls:!1,strictNullHandling:!1},CFe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},pC={},RFe=function r(e,t,n,i,s,a,o,l,c,u,d,h,f,m,g,y){for(var b=e,E=y,w=0,A=!1;(E=E.get(pC))!==void 0&&!A;){var S=E.get(e);if(w+=1,typeof S<"u"){if(S===w)throw new RangeError("Cyclic object value");A=!0}typeof E.get(pC)>"u"&&(w=0)}if(typeof l=="function"?b=l(t,b):b instanceof Date?b=d(b):n==="comma"&&sl(b)&&(b=M1.maybeMap(b,function(j){return j instanceof Date?d(j):j})),b===null){if(s)return o&&!m?o(t,Jn.encoder,g,"key",h):t;b=""}if(CFe(b)||M1.isBuffer(b)){if(o){var _=m?t:o(t,Jn.encoder,g,"key",h);return[f(_)+"="+f(o(b,Jn.encoder,g,"value",h))]}return[f(t)+"="+f(String(b))]}var C=[];if(typeof b>"u")return C;var k;if(n==="comma"&&sl(b))m&&o&&(b=M1.maybeMap(b,o)),k=[{value:b.length>0?b.join(",")||null:void 0}];else if(sl(l))k=l;else{var D=Object.keys(b);k=c?D.sort(c):D}for(var I=i&&sl(b)&&b.length===1?t+"[]":t,L=0;L<k.length;++L){var M=k[L],F=typeof M=="object"&&typeof M.value<"u"?M.value:b[M];if(!(a&&F===null)){var U=sl(b)?typeof n=="function"?n(I,M):I:I+(u?"."+M:"["+M+"]");y.set(e,w);var W=uQ();W.set(pC,y),dQ(C,r(F,U,n,i,s,a,n==="comma"&&m&&sl(b)?null:o,l,c,u,d,h,f,m,g,W))}}return C},kFe=function(e){if(!e)return Jn;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var t=e.charset||Jn.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=Wg.default;if(typeof e.format<"u"){if(!SFe.call(Wg.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=Wg.formatters[n],s=Jn.filter;return(typeof e.filter=="function"||sl(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Jn.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Jn.allowDots:!!e.allowDots,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Jn.charsetSentinel,delimiter:typeof e.delimiter>"u"?Jn.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Jn.encode,encoder:typeof e.encoder=="function"?e.encoder:Jn.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Jn.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Jn.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Jn.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Jn.strictNullHandling}},IFe=function(r,e){var t=r,n=kFe(e),i,s;typeof n.filter=="function"?(s=n.filter,t=s("",t)):sl(n.filter)&&(s=n.filter,i=s);var a=[];if(typeof t!="object"||t===null)return"";var o;e&&e.arrayFormat in I6?o=e.arrayFormat:e&&"indices"in e?o=e.indices?"indices":"repeat":o="indices";var l=I6[o];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(t)),n.sort&&i.sort(n.sort);for(var u=uQ(),d=0;d<i.length;++d){var h=i[d];n.skipNulls&&t[h]===null||dQ(a,RFe(t[h],h,l,c,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,u))}var f=a.join(n.delimiter),m=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?m+="utf8=%26%2310003%3B&":m+="utf8=%E2%9C%93&"),f.length>0?m+f:""},gp=cQ,WI=Object.prototype.hasOwnProperty,$Fe=Array.isArray,xn={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:gp.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},DFe=function(r){return r.replace(/&#(\d+);/g,function(e,t){return String.fromCharCode(parseInt(t,10))})},hQ=function(r,e){return r&&typeof r=="string"&&e.comma&&r.indexOf(",")>-1?r.split(","):r},LFe="utf8=%26%2310003%3B",OFe="utf8=%E2%9C%93",PFe=function(e,t){var n={},i=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=t.parameterLimit===1/0?void 0:t.parameterLimit,a=i.split(t.delimiter,s),o=-1,l,c=t.charset;if(t.charsetSentinel)for(l=0;l<a.length;++l)a[l].indexOf("utf8=")===0&&(a[l]===OFe?c="utf-8":a[l]===LFe&&(c="iso-8859-1"),o=l,l=a.length);for(l=0;l<a.length;++l)if(l!==o){var u=a[l],d=u.indexOf("]="),h=d===-1?u.indexOf("="):d+1,f,m;h===-1?(f=t.decoder(u,xn.decoder,c,"key"),m=t.strictNullHandling?null:""):(f=t.decoder(u.slice(0,h),xn.decoder,c,"key"),m=gp.maybeMap(hQ(u.slice(h+1),t),function(g){return t.decoder(g,xn.decoder,c,"value")})),m&&t.interpretNumericEntities&&c==="iso-8859-1"&&(m=DFe(m)),u.indexOf("[]=")>-1&&(m=$Fe(m)?[m]:m),WI.call(n,f)?n[f]=gp.combine(n[f],m):n[f]=m}return n},MFe=function(r,e,t,n){for(var i=n?e:hQ(e,t),s=r.length-1;s>=0;--s){var a,o=r[s];if(o==="[]"&&t.parseArrays)a=[].concat(i);else{a=t.plainObjects?Object.create(null):{};var l=o.charAt(0)==="["&&o.charAt(o.length-1)==="]"?o.slice(1,-1):o,c=parseInt(l,10);!t.parseArrays&&l===""?a={0:i}:!isNaN(c)&&o!==l&&String(c)===l&&c>=0&&t.parseArrays&&c<=t.arrayLimit?(a=[],a[c]=i):l!=="__proto__"&&(a[l]=i)}i=a}return i},NFe=function(e,t,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/,o=/(\[[^[\]]*])/g,l=n.depth>0&&a.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!n.plainObjects&&WI.call(Object.prototype,c)&&!n.allowPrototypes)return;u.push(c)}for(var d=0;n.depth>0&&(l=o.exec(s))!==null&&d<n.depth;){if(d+=1,!n.plainObjects&&WI.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),MFe(u,t,n,i)}},FFe=function(e){if(!e)return xn;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var t=typeof e.charset>"u"?xn.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?xn.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:xn.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:xn.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:xn.arrayLimit,charset:t,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:xn.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:xn.comma,decoder:typeof e.decoder=="function"?e.decoder:xn.decoder,delimiter:typeof e.delimiter=="string"||gp.isRegExp(e.delimiter)?e.delimiter:xn.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:xn.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:xn.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:xn.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:xn.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:xn.strictNullHandling}},BFe=function(r,e){var t=FFe(e);if(r===""||r===null||typeof r>"u")return t.plainObjects?Object.create(null):{};for(var n=typeof r=="string"?PFe(r,t):r,i=t.plainObjects?Object.create(null):{},s=Object.keys(n),a=0;a<s.length;++a){var o=s[a],l=NFe(o,n[o],t,typeof r=="string");i=gp.merge(i,l,t)}return t.allowSparse===!0?i:gp.compact(i)},UFe=IFe,WFe=BFe,HFe=jO,fQ={formats:HFe,parse:WFe,stringify:UFe};const VFe=Ls(fQ);function GFe(r,e,t){var n=-1,i=r.length;e<0&&(e=-e>i?0:i+e),t=t>i?i:t,t<0&&(t+=i),i=e>t?0:t-e>>>0,e>>>=0;for(var s=Array(i);++n<i;)s[n]=r[n+e];return s}var pQ=GFe,qFe=pQ;function jFe(r,e,t){var n=r.length;return t=t===void 0?n:t,!e&&t>=n?r:qFe(r,e,t)}var KFe=jFe;function zFe(r,e,t,n){for(var i=r.length,s=t+(n?1:-1);n?s--:++s<i;)if(e(r[s],s,r))return s;return-1}var YFe=zFe;function QFe(r){return r!==r}var XFe=QFe;function ZFe(r,e,t){for(var n=t-1,i=r.length;++n<i;)if(r[n]===e)return n;return-1}var JFe=ZFe,e4e=YFe,t4e=XFe,r4e=JFe;function n4e(r,e,t){return e===e?r4e(r,e,t):e4e(r,t4e,t)}var i4e=n4e;function s4e(r){return r.split("")}var a4e=s4e,o4e="\\ud800-\\udfff",l4e="\\u0300-\\u036f",c4e="\\ufe20-\\ufe2f",u4e="\\u20d0-\\u20ff",d4e=l4e+c4e+u4e,h4e="\\ufe0e\\ufe0f",f4e="\\u200d",p4e=RegExp("["+f4e+o4e+d4e+h4e+"]");function m4e(r){return p4e.test(r)}var mQ=m4e,gQ="\\ud800-\\udfff",g4e="\\u0300-\\u036f",v4e="\\ufe20-\\ufe2f",y4e="\\u20d0-\\u20ff",b4e=g4e+v4e+y4e,E4e="\\ufe0e\\ufe0f",x4e="["+gQ+"]",HI="["+b4e+"]",VI="\\ud83c[\\udffb-\\udfff]",w4e="(?:"+HI+"|"+VI+")",vQ="[^"+gQ+"]",yQ="(?:\\ud83c[\\udde6-\\uddff]){2}",bQ="[\\ud800-\\udbff][\\udc00-\\udfff]",T4e="\\u200d",EQ=w4e+"?",xQ="["+E4e+"]?",S4e="(?:"+T4e+"(?:"+[vQ,yQ,bQ].join("|")+")"+xQ+EQ+")*",A4e=xQ+EQ+S4e,_4e="(?:"+[vQ+HI+"?",HI,yQ,bQ,x4e].join("|")+")",C4e=RegExp(VI+"(?="+VI+")|"+_4e+A4e,"g");function R4e(r){return r.match(C4e)||[]}var k4e=R4e,I4e=a4e,$4e=mQ,D4e=k4e;function L4e(r){return $4e(r)?D4e(r):I4e(r)}var O4e=L4e,P4e=/\s/;function M4e(r){for(var e=r.length;e--&&P4e.test(r.charAt(e)););return e}var N4e=M4e,mC=function(){return Math.random().toString(36).substring(7).split("").join(".")},Hg={INIT:"@@redux/INIT"+mC(),REPLACE:"@@redux/REPLACE"+mC(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+mC()}};function F4e(r){if(typeof r!="object"||r===null)return!1;for(var e=r;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(r)===e}function B4e(r){if(r===void 0)return"undefined";if(r===null)return"null";var e=typeof r;switch(e){case"boolean":case"string":case"number":case"symbol":case"function":return e}if(Array.isArray(r))return"array";if(H4e(r))return"date";if(W4e(r))return"error";var t=U4e(r);switch(t){case"Symbol":case"Promise":case"WeakMap":case"WeakSet":case"Map":case"Set":return t}return e.slice(8,-1).toLowerCase().replace(/\s/g,"")}function U4e(r){return typeof r.constructor=="function"?r.constructor.name:null}function W4e(r){return r instanceof Error||typeof r.message=="string"&&r.constructor&&typeof r.constructor.stackTraceLimit=="number"}function H4e(r){return r instanceof Date?!0:typeof r.toDateString=="function"&&typeof r.getDate=="function"&&typeof r.setDate=="function"}function V4e(r){var e=typeof r;return e=B4e(r),e}function D6(r){typeof console<"u"&&typeof console.error=="function"&&console.error(r);try{throw new Error(r)}catch{}}function G4e(r,e,t,n){var i=Object.keys(e),s=t&&t.type===Hg.INIT?"preloadedState argument passed to createStore":"previous state received by the reducer";if(i.length===0)return"Store does not have a valid reducer. Make sure the argument passed to combineReducers is an object whose values are reducers.";if(!F4e(r))return"The "+s+' has unexpected type of "'+V4e(r)+'". Expected argument to be an object with the following '+('keys: "'+i.join('", "')+'"');var a=Object.keys(r).filter(function(o){return!e.hasOwnProperty(o)&&!n[o]});if(a.forEach(function(o){n[o]=!0}),!(t&&t.type===Hg.REPLACE)&&a.length>0)return"Unexpected "+(a.length>1?"keys":"key")+" "+('"'+a.join('", "')+'" found in '+s+". ")+"Expected to find one of the known reducer keys instead: "+('"'+i.join('", "')+'". Unexpected keys will be ignored.')}function q4e(r){Object.keys(r).forEach(function(e){var t=r[e],n=t(void 0,{type:Hg.INIT});if(typeof n>"u")throw new Error('The slice reducer for key "'+e+`" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.`);if(typeof t(void 0,{type:Hg.PROBE_UNKNOWN_ACTION()})>"u")throw new Error('The slice reducer for key "'+e+'" returned undefined when probed with a random type. '+("Don't try to handle '"+Hg.INIT+`' or other actions in "redux/*" `)+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.")})}function wQ(r){for(var e=Object.keys(r),t={},n=0;n<e.length;n++){var i=e[n];typeof r[i]>"u"&&D6('No reducer provided for key "'+i+'"'),typeof r[i]=="function"&&(t[i]=r[i])}var s=Object.keys(t),a;a={};var o;try{q4e(t)}catch(l){o=l}return function(c,u){if(c===void 0&&(c={}),o)throw o;{var d=G4e(c,t,u,a);d&&D6(d)}for(var h=!1,f={},m=0;m<s.length;m++){var g=s[m],y=t[g],b=c[g],E=y(b,u);if(typeof E>"u"){var w=u&&u.type;throw new Error("When called with an action of type "+(w?'"'+String(w)+'"':"(unknown type)")+', the slice reducer for key "'+g+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.')}f[g]=E,h=h||E!==b}return h=h||s.length!==Object.keys(c).length,h?f:c}}var Jx="NOT_FOUND";function j4e(r){var e;return{get:function(n){return e&&r(e.key,n)?e.value:Jx},put:function(n,i){e={key:n,value:i}},getEntries:function(){return e?[e]:[]},clear:function(){e=void 0}}}function K4e(r,e){var t=[];function n(o){var l=t.findIndex(function(u){return e(o,u.key)});if(l>-1){var c=t[l];return l>0&&(t.splice(l,1),t.unshift(c)),c.value}return Jx}function i(o,l){n(o)===Jx&&(t.unshift({key:o,value:l}),t.length>r&&t.pop())}function s(){return t}function a(){t=[]}return{get:n,put:i,getEntries:s,clear:a}}var z4e=function(e,t){return e===t};function Y4e(r){return function(t,n){if(t===null||n===null||t.length!==n.length)return!1;for(var i=t.length,s=0;s<i;s++)if(!r(t[s],n[s]))return!1;return!0}}function GI(r,e){var t=typeof e=="object"?e:{equalityCheck:e},n=t.equalityCheck,i=n===void 0?z4e:n,s=t.maxSize,a=s===void 0?1:s,o=t.resultEqualityCheck,l=Y4e(i),c=a===1?j4e(l):K4e(a,l);function u(){var d=c.get(arguments);if(d===Jx){if(d=r.apply(null,arguments),o){var h=c.getEntries(),f=h.find(function(m){return o(m.value,d)});f&&(d=f.value)}c.put(arguments,d)}return d}return u.clearCache=function(){return c.clear()},u}function Q4e(r){var e=Array.isArray(r[0])?r[0]:r;if(!e.every(function(n){return typeof n=="function"})){var t=e.map(function(n){return typeof n=="function"?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+t+"]")}return e}function X4e(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];var i=function(){for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];var c=0,u,d={memoizeOptions:void 0},h=o.pop();if(typeof h=="object"&&(d=h,h=o.pop()),typeof h!="function")throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof h+"]");var f=d,m=f.memoizeOptions,g=m===void 0?t:m,y=Array.isArray(g)?g:[g],b=Q4e(o),E=r.apply(void 0,[function(){return c++,h.apply(null,arguments)}].concat(y)),w=r(function(){for(var S=[],_=b.length,C=0;C<_;C++)S.push(b[C].apply(null,arguments));return u=E.apply(null,S),u});return Object.assign(w,{resultFunc:h,memoizedResultFunc:E,dependencies:b,lastResult:function(){return u},recomputations:function(){return c},resetRecomputations:function(){return c=0}}),w};return i}var Vg=X4e(GI),TQ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Z4e=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},I0=function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r},J4e=Object.defineProperty,e8e=Object.defineProperties,t8e=Object.getOwnPropertyDescriptors,L6=Object.getOwnPropertySymbols,r8e=Object.prototype.hasOwnProperty,n8e=Object.prototype.propertyIsEnumerable,O6=function(r,e,t){return e in r?J4e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},md=function(r,e){for(var t in e||(e={}))r8e.call(e,t)&&O6(r,t,e[t]);if(L6)for(var n=0,i=L6(e);n<i.length;n++){var t=i[n];n8e.call(e,t)&&O6(r,t,e[t])}return r},gC=function(r,e){return e8e(r,t8e(e))},i8e=function(r,e,t){return new Promise(function(n,i){var s=function(l){try{o(t.next(l))}catch(c){i(c)}},a=function(l){try{o(t.throw(l))}catch(c){i(c)}},o=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(s,a)};o((t=t.apply(r,e)).next())})};function $0(r){if(typeof r!="object"||r===null)return!1;var e=Object.getPrototypeOf(r);if(e===null)return!0;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return e===t}var s8e=function(r){return r&&typeof r.match=="function"};function Pi(r,e){function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var s=e.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return md(md({type:r,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:r,payload:n[0]}}return t.toString=function(){return""+r},t.type=r,t.match=function(n){return n.type===r},t}(function(r){TQ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,I0([void 0],t[0].concat(this)))):new(e.bind.apply(e,I0([void 0],t.concat(this))))},e})(Array);(function(r){TQ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,I0([void 0],t[0].concat(this)))):new(e.bind.apply(e,I0([void 0],t.concat(this))))},e})(Array);function qI(r){return gi(r)?_l(r,function(){}):r}function SQ(r){var e={},t=[],n,i={addCase:function(s,a){{if(t.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(n)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}var o=typeof s=="string"?s:s.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[o]=a,i},addMatcher:function(s,a){if(n)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return t.push({matcher:s,reducer:a}),i},addDefaultCase:function(s){if(n)throw new Error("`builder.addDefaultCase` can only be called once");return n=s,i}};return r(i),[e,t,n]}function a8e(r){return typeof r=="function"}var P6=!1;function o8e(r,e,t,n){t===void 0&&(t=[]),typeof e=="object"&&(P6||(P6=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var i=typeof e=="function"?SQ(e):[e,t,n],s=i[0],a=i[1],o=i[2],l;if(a8e(r))l=function(){return qI(r())};else{var c=qI(r);l=function(){return c}}function u(d,h){d===void 0&&(d=l());var f=I0([s[h.type]],a.filter(function(m){var g=m.matcher;return g(h)}).map(function(m){var g=m.reducer;return g}));return f.filter(function(m){return!!m}).length===0&&(f=[o]),f.reduce(function(m,g){if(g)if(is(m)){var y=m,b=g(y,h);return b===void 0?m:b}else{if(gi(m))return _l(m,function(E){return g(E,h)});var b=g(m,h);if(b===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return m},d)}return u.getInitialState=l,u}var M6=!1;function l8e(r,e){return r+"/"+e}function wu(r){var e=r.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u"&&r.initialState===void 0&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var t=typeof r.initialState=="function"?r.initialState:qI(r.initialState),n=r.reducers||{},i=Object.keys(n),s={},a={},o={};i.forEach(function(u){var d=n[u],h=l8e(e,u),f,m;"reducer"in d?(f=d.reducer,m=d.prepare):f=d,s[u]=f,a[h]=f,o[u]=m?Pi(h,m):Pi(h)});function l(){typeof r.extraReducers=="object"&&(M6||(M6=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var u=typeof r.extraReducers=="function"?SQ(r.extraReducers):[r.extraReducers],d=u[0],h=d===void 0?{}:d,f=u[1],m=f===void 0?[]:f,g=u[2],y=g===void 0?void 0:g,b=md(md({},h),a);return o8e(t,function(E){for(var w in b)E.addCase(w,b[w]);for(var A=0,S=m;A<S.length;A++){var _=S[A];E.addMatcher(_.matcher,_.reducer)}y&&E.addDefaultCase(y)})}var c;return{name:e,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:o,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var c8e="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",AQ=function(r){r===void 0&&(r=21);for(var e="",t=r;t--;)e+=c8e[Math.random()*64|0];return e},u8e=["name","message","stack","code"],vC=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),N6=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),d8e=function(r){if(typeof r=="object"&&r!==null){for(var e={},t=0,n=u8e;t<n.length;t++){var i=n[t];typeof r[i]=="string"&&(e[i]=r[i])}return e}return{message:String(r)}},F6=function(){function r(e,t,n){var i=Pi(e+"/fulfilled",function(u,d,h,f){return{payload:u,meta:gC(md({},f||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Pi(e+"/pending",function(u,d,h){return{payload:void 0,meta:gC(md({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=Pi(e+"/rejected",function(u,d,h,f,m){return{payload:f,error:(n&&n.serializeError||d8e)(u||"Rejected"),meta:gC(md({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"})}}),o=!1,l=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},u}();function c(u){return function(d,h,f){var m=n?.idGenerator?n.idGenerator(u):AQ(),g=new l,y;function b(w){y=w,g.abort()}var E=function(){return i8e(this,null,function(){var w,A,S,_,C,k,D;return Z4e(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),_=(w=n?.condition)==null?void 0:w.call(n,u,{getState:h,extra:f}),f8e(_)?[4,_]:[3,2];case 1:_=I.sent(),I.label=2;case 2:if(_===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(L,M){return g.signal.addEventListener("abort",function(){return M({name:"AbortError",message:y||"Aborted"})})}),d(s(m,u,(A=n?.getPendingMeta)==null?void 0:A.call(n,{requestId:m,arg:u},{getState:h,extra:f}))),[4,Promise.race([C,Promise.resolve(t(u,{dispatch:d,getState:h,extra:f,requestId:m,signal:g.signal,abort:b,rejectWithValue:function(L,M){return new vC(L,M)},fulfillWithValue:function(L,M){return new N6(L,M)}})).then(function(L){if(L instanceof vC)throw L;return L instanceof N6?i(L.payload,m,u,L.meta):i(L,m,u)})])];case 3:return S=I.sent(),[3,5];case 4:return k=I.sent(),S=k instanceof vC?a(null,m,u,k.payload,k.meta):a(k,m,u),[3,5];case 5:return D=n&&!n.dispatchConditionRejection&&a.match(S)&&S.meta.condition,D||d(S),[2,S]}})})}();return Object.assign(E,{abort:b,requestId:m,arg:u,unwrap:function(){return E.then(h8e)}})}}return Object.assign(c,{pending:s,rejected:a,fulfilled:i,typePrefix:e})}return r.withTypes=function(){return r},r}();function h8e(r){if(r.meta&&r.meta.rejectedWithValue)throw r.payload;if(r.error)throw r.error;return r.payload}function f8e(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var _Q=function(r,e){return s8e(r)?r.match(e):r(e)};function Yp(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return r.some(function(n){return _Q(n,t)})}}function Gg(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(t){return r.every(function(n){return _Q(n,t)})}}function lS(r,e){if(!r||!r.meta)return!1;var t=typeof r.meta.requestId=="string",n=e.indexOf(r.meta.requestStatus)>-1;return t&&n}function qv(r){return typeof r[0]=="function"&&"pending"in r[0]&&"fulfilled"in r[0]&&"rejected"in r[0]}function KO(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length===0?function(t){return lS(t,["pending"])}:qv(r)?function(t){var n=r.map(function(s){return s.pending}),i=Yp.apply(void 0,n);return i(t)}:KO()(r[0])}function D0(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length===0?function(t){return lS(t,["rejected"])}:qv(r)?function(t){var n=r.map(function(s){return s.rejected}),i=Yp.apply(void 0,n);return i(t)}:D0()(r[0])}function cS(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var t=function(n){return n&&n.meta&&n.meta.rejectedWithValue};return r.length===0?function(n){var i=Gg(D0.apply(void 0,r),t);return i(n)}:qv(r)?function(n){var i=Gg(D0.apply(void 0,r),t);return i(n)}:cS()(r[0])}function Qd(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length===0?function(t){return lS(t,["fulfilled"])}:qv(r)?function(t){var n=r.map(function(s){return s.fulfilled}),i=Yp.apply(void 0,n);return i(t)}:Qd()(r[0])}function jI(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return r.length===0?function(t){return lS(t,["pending","fulfilled","rejected"])}:qv(r)?function(t){for(var n=[],i=0,s=r;i<s.length;i++){var a=s[i];n.push(a.pending,a.rejected,a.fulfilled)}var o=Yp.apply(void 0,n);return o(t)}:jI()(r[0])}var zO="listenerMiddleware";Pi(zO+"/add");Pi(zO+"/removeAll");Pi(zO+"/remove");var ng="RTK_autoBatch",_m=function(){return function(r){var e;return{payload:r,meta:(e={},e[ng]=!0,e)}}},B6;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);MO();var CQ=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},ew=function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r},p8e=Object.defineProperty,m8e=Object.defineProperties,g8e=Object.getOwnPropertyDescriptors,U6=Object.getOwnPropertySymbols,v8e=Object.prototype.hasOwnProperty,y8e=Object.prototype.propertyIsEnumerable,W6=function(r,e,t){return e in r?p8e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},ln=function(r,e){for(var t in e||(e={}))v8e.call(e,t)&&W6(r,t,e[t]);if(U6)for(var n=0,i=U6(e);n<i.length;n++){var t=i[n];y8e.call(e,t)&&W6(r,t,e[t])}return r},dl=function(r,e){return m8e(r,g8e(e))},RQ=function(r,e,t){return new Promise(function(n,i){var s=function(l){try{o(t.next(l))}catch(c){i(c)}},a=function(l){try{o(t.throw(l))}catch(c){i(c)}},o=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(s,a)};o((t=t.apply(r,e)).next())})},xr;(function(r){r.uninitialized="uninitialized",r.pending="pending",r.fulfilled="fulfilled",r.rejected="rejected"})(xr||(xr={}));function b8e(r){return{status:r,isUninitialized:r===xr.uninitialized,isLoading:r===xr.pending,isSuccess:r===xr.fulfilled,isError:r===xr.rejected}}var H6=function(r){return[].concat.apply([],r)};function E8e(){return typeof navigator>"u"||navigator.onLine===void 0?!0:navigator.onLine}function x8e(){return typeof document>"u"?!0:document.visibilityState!=="hidden"}var V6=$0;function kQ(r,e){if(r===e||!(V6(r)&&V6(e)||Array.isArray(r)&&Array.isArray(e)))return e;for(var t=Object.keys(e),n=Object.keys(r),i=t.length===n.length,s=Array.isArray(e)?[]:{},a=0,o=t;a<o.length;a++){var l=o[a];s[l]=kQ(r[l],e[l]),i&&(i=r[l]===s[l])}return i?r:s}var G6=function(){function r(e,t){t===void 0&&(t=void 0),this.value=e,this.meta=t}return r}(),YO=Pi("__rtkq/focused"),IQ=Pi("__rtkq/unfocused"),QO=Pi("__rtkq/online"),$Q=Pi("__rtkq/offline"),go;(function(r){r.query="query",r.mutation="mutation"})(go||(go={}));function DQ(r){return r.type===go.query}function w8e(r){return r.type===go.mutation}function XO(r,e,t,n,i,s){return T8e(r)?r(e,t,n,i).map(KI).map(s):Array.isArray(r)?r.map(KI).map(s):[]}function T8e(r){return typeof r=="function"}function KI(r){return typeof r=="string"?{type:r}:r}function yC(r){return r!=null}var L0=Symbol("forceQueryFn"),zI=function(r){return typeof r[L0]=="function"};function S8e(r){var e=r.serializeQueryArgs,t=r.queryThunk,n=r.mutationThunk,i=r.api,s=r.context,a=new Map,o=new Map,l=i.internalActions,c=l.unsubscribeQueryResult,u=l.removeMutationResult,d=l.updateSubscriptionOptions;return{buildInitiateQuery:w,buildInitiateMutation:A,getRunningQueryThunk:m,getRunningMutationThunk:g,getRunningQueriesThunk:y,getRunningMutationsThunk:b,getRunningOperationPromises:f,removalWarning:h};function h(){throw new Error(`This method had to be removed due to a conceptual bug in RTK.
       Please see https://github.com/reduxjs/redux-toolkit/pull/2481 for details.
       See https://redux-toolkit.js.org/rtk-query/usage/server-side-rendering for new guidance on SSR.`)}function f(){if(typeof process<"u")h();else{var S=function(_){return Array.from(_.values()).flatMap(function(C){return C?Object.values(C):[]})};return ew(ew([],S(a)),S(o)).filter(yC)}}function m(S,_){return function(C){var k,D=s.endpointDefinitions[S],I=e({queryArgs:_,endpointDefinition:D,endpointName:S});return(k=a.get(C))==null?void 0:k[I]}}function g(S,_){return function(C){var k;return(k=o.get(C))==null?void 0:k[_]}}function y(){return function(S){return Object.values(a.get(S)||{}).filter(yC)}}function b(){return function(S){return Object.values(o.get(S)||{}).filter(yC)}}function E(S){{if(E.triggered)return;var _=S(i.internalActions.internal_probeSubscription({queryCacheKey:"DOES_NOT_EXIST",requestId:"DUMMY_REQUEST_ID"}));if(E.triggered=!0,typeof _!="boolean")throw new Error('Warning: Middleware for RTK-Query API at reducerPath "'+i.reducerPath+`" has not been added to the store.
You must add the middleware for RTK-Query to function correctly!`)}}function w(S,_){var C=function(k,D){var I=D===void 0?{}:D,L=I.subscribe,M=L===void 0?!0:L,F=I.forceRefetch,U=I.subscriptionOptions,W=L0,j=I[W];return function(z,Q){var V,Y,J=e({queryArgs:k,endpointDefinition:_,endpointName:S}),ue=t((V={type:"query",subscribe:M,forceRefetch:F,subscriptionOptions:U,endpointName:S,originalArgs:k,queryCacheKey:J},V[L0]=j,V)),ne=i.endpoints[S].select(k),ge=z(ue),ae=ne(Q());E(z);var ie=ge.requestId,ee=ge.abort,be=ae.requestId!==ie,we=(Y=a.get(z))==null?void 0:Y[J],Re=function(){return ne(Q())},Oe=Object.assign(j?ge.then(Re):be&&!we?Promise.resolve(ae):Promise.all([we,ge]).then(Re),{arg:k,requestId:ie,subscriptionOptions:U,queryCacheKey:J,abort:ee,unwrap:function(){return RQ(this,null,function(){var Ue;return CQ(this,function(Se){switch(Se.label){case 0:return[4,Oe];case 1:if(Ue=Se.sent(),Ue.isError)throw Ue.error;return[2,Ue.data]}})})},refetch:function(){return z(C(k,{subscribe:!1,forceRefetch:!0}))},unsubscribe:function(){M&&z(c({queryCacheKey:J,requestId:ie}))},updateSubscriptionOptions:function(Ue){Oe.subscriptionOptions=Ue,z(d({endpointName:S,requestId:ie,queryCacheKey:J,options:Ue}))}});if(!we&&!be&&!j){var me=a.get(z)||{};me[J]=Oe,a.set(z,me),Oe.then(function(){delete me[J],Object.keys(me).length||a.delete(z)})}return Oe}};return C}function A(S){return function(_,C){var k=C===void 0?{}:C,D=k.track,I=D===void 0?!0:D,L=k.fixedCacheKey;return function(M,F){var U=n({type:"mutation",endpointName:S,originalArgs:_,track:I,fixedCacheKey:L}),W=M(U);E(M);var j=W.requestId,z=W.abort,Q=W.unwrap,V=W.unwrap().then(function(ne){return{data:ne}}).catch(function(ne){return{error:ne}}),Y=function(){M(u({requestId:j,fixedCacheKey:L}))},J=Object.assign(V,{arg:W.arg,requestId:j,abort:z,unwrap:Q,unsubscribe:Y,reset:Y}),ue=o.get(M)||{};return o.set(M,ue),ue[j]=J,J.then(function(){delete ue[j],Object.keys(ue).length||o.delete(M)}),L&&(ue[L]=J,J.then(function(){ue[L]===J&&(delete ue[L],Object.keys(ue).length||o.delete(M))})),J}}}}function q6(r){return r}function A8e(r){var e=this,t=r.reducerPath,n=r.baseQuery,i=r.context.endpointDefinitions,s=r.serializeQueryArgs,a=r.api,o=r.assertTagType,l=function(A,S,_,C){return function(k,D){var I=i[A],L=s({queryArgs:S,endpointDefinition:I,endpointName:A});if(k(a.internalActions.queryResultPatched({queryCacheKey:L,patches:_})),!!C){var M=a.endpoints[A].select(S)(D()),F=XO(I.providesTags,M.data,void 0,S,{},o);k(a.internalActions.updateProvidedBy({queryCacheKey:L,providedTags:F}))}}},c=function(A,S,_,C){return C===void 0&&(C=!0),function(k,D){var I,L,M=a.endpoints[A],F=M.select(S)(D()),U={patches:[],inversePatches:[],undo:function(){return k(a.util.patchQueryData(A,S,U.inversePatches,C))}};if(F.status===xr.uninitialized)return U;var W;if("data"in F)if(gi(F.data)){var j=FY(F.data,_),z=j[0],Q=j[1],V=j[2];(I=U.patches).push.apply(I,Q),(L=U.inversePatches).push.apply(L,V),W=z}else W=_(F.data),U.patches.push({op:"replace",path:[],value:W}),U.inversePatches.push({op:"replace",path:[],value:F.data});return k(a.util.patchQueryData(A,S,U.patches,C)),U}},u=function(A,S,_){return function(C){var k;return C(a.endpoints[A].initiate(S,(k={subscribe:!1,forceRefetch:!0},k[L0]=function(){return{data:_}},k)))}},d=function(A,S){return RQ(e,[A,S],function(_,C){var k,D,I,L,M,F,U,W,j,z,Q,V,Y,J,ue,ne,ge,ae,ie=C.signal,ee=C.abort,be=C.rejectWithValue,we=C.fulfillWithValue,Re=C.dispatch,Oe=C.getState,me=C.extra;return CQ(this,function(Ue){switch(Ue.label){case 0:k=i[_.endpointName],Ue.label=1;case 1:return Ue.trys.push([1,8,,13]),D=q6,I=void 0,L={signal:ie,abort:ee,dispatch:Re,getState:Oe,extra:me,endpoint:_.endpointName,type:_.type,forced:_.type==="query"?h(_,Oe()):void 0},M=_.type==="query"?_[L0]:void 0,M?(I=M(),[3,6]):[3,2];case 2:return k.query?[4,n(k.query(_.originalArgs),L,k.extraOptions)]:[3,4];case 3:return I=Ue.sent(),k.transformResponse&&(D=k.transformResponse),[3,6];case 4:return[4,k.queryFn(_.originalArgs,L,k.extraOptions,function(Se){return n(Se,L,k.extraOptions)})];case 5:I=Ue.sent(),Ue.label=6;case 6:if(typeof process<"u"){if(F=k.query?"`baseQuery`":"`queryFn`",U=void 0,!I)U=F+" did not return anything.";else if(typeof I!="object")U=F+" did not return an object.";else if(I.error&&I.data)U=F+" returned an object containing both `error` and `result`.";else if(I.error===void 0&&I.data===void 0)U=F+" returned an object containing neither a valid `error` and `result`. At least one of them should not be `undefined`";else for(W=0,j=Object.keys(I);W<j.length;W++)if(z=j[W],z!=="error"&&z!=="data"&&z!=="meta"){U="The object returned by "+F+" has the unknown property "+z+".";break}U&&console.error("Error encountered handling the endpoint "+_.endpointName+`.
              `+U+"\n              It needs to return an object with either the shape `{ data: <value> }` or `{ error: <value> }` that may contain an optional `meta` property.\n              Object returned was:",I)}if(I.error)throw new G6(I.error,I.meta);return Q=we,[4,D(I.data,I.meta,_.originalArgs)];case 7:return[2,Q.apply(void 0,[Ue.sent(),(ge={fulfilledTimeStamp:Date.now(),baseQueryMeta:I.meta},ge[ng]=!0,ge)])];case 8:if(V=Ue.sent(),Y=V,!(Y instanceof G6))return[3,12];J=q6,k.query&&k.transformErrorResponse&&(J=k.transformErrorResponse),Ue.label=9;case 9:return Ue.trys.push([9,11,,12]),ue=be,[4,J(Y.value,Y.meta,_.originalArgs)];case 10:return[2,ue.apply(void 0,[Ue.sent(),(ae={baseQueryMeta:Y.meta},ae[ng]=!0,ae)])];case 11:return ne=Ue.sent(),Y=ne,[3,12];case 12:throw typeof process<"u"?console.error('An unhandled error occurred processing a request for the endpoint "'+_.endpointName+`".
In the case of an unhandled error, no tags will be "provided" or "invalidated".`,Y):console.error(Y),Y;case 13:return[2]}})})};function h(A,S){var _,C,k,D,I=(C=(_=S[t])==null?void 0:_.queries)==null?void 0:C[A.queryCacheKey],L=(k=S[t])==null?void 0:k.config.refetchOnMountOrArgChange,M=I?.fulfilledTimeStamp,F=(D=A.forceRefetch)!=null?D:A.subscribe&&L;return F?F===!0||(Number(new Date)-Number(M))/1e3>=F:!1}var f=F6(t+"/executeQuery",d,{getPendingMeta:function(){var A;return A={startedTimeStamp:Date.now()},A[ng]=!0,A},condition:function(A,S){var _=S.getState,C,k,D,I=_(),L=(k=(C=I[t])==null?void 0:C.queries)==null?void 0:k[A.queryCacheKey],M=L?.fulfilledTimeStamp,F=A.originalArgs,U=L?.originalArgs,W=i[A.endpointName];return zI(A)?!0:L?.status==="pending"?!1:h(A,I)||DQ(W)&&((D=W?.forceRefetch)!=null&&D.call(W,{currentArg:F,previousArg:U,endpointState:L,state:I}))?!0:!M},dispatchConditionRejection:!0}),m=F6(t+"/executeMutation",d,{getPendingMeta:function(){var A;return A={startedTimeStamp:Date.now()},A[ng]=!0,A}}),g=function(A){return"force"in A},y=function(A){return"ifOlderThan"in A},b=function(A,S,_){return function(C,k){var D=g(_)&&_.force,I=y(_)&&_.ifOlderThan,L=function(W){return W===void 0&&(W=!0),a.endpoints[A].initiate(S,{forceRefetch:W})},M=a.endpoints[A].select(S)(k());if(D)C(L());else if(I){var F=M?.fulfilledTimeStamp;if(!F){C(L());return}var U=(Number(new Date)-Number(new Date(F)))/1e3>=I;U&&C(L())}else C(L(!1))}};function E(A){return function(S){var _,C;return((C=(_=S?.meta)==null?void 0:_.arg)==null?void 0:C.endpointName)===A}}function w(A,S){return{matchPending:Gg(KO(A),E(S)),matchFulfilled:Gg(Qd(A),E(S)),matchRejected:Gg(D0(A),E(S))}}return{queryThunk:f,mutationThunk:m,prefetch:b,updateQueryData:c,upsertQueryData:u,patchQueryData:l,buildMatchThunkActions:w}}function LQ(r,e,t,n){return XO(t[r.meta.arg.endpointName][e],Qd(r)?r.payload:void 0,cS(r)?r.payload:void 0,r.meta.arg.originalArgs,"baseQueryMeta"in r.meta?r.meta.baseQueryMeta:void 0,n)}function Ib(r,e,t){var n=r[e];n&&t(n)}function O0(r){var e;return(e="arg"in r?r.arg.fixedCacheKey:r.fixedCacheKey)!=null?e:r.requestId}function j6(r,e,t){var n=r[O0(e)];n&&t(n)}var Cm={};function _8e(r){var e=r.reducerPath,t=r.queryThunk,n=r.mutationThunk,i=r.context,s=i.endpointDefinitions,a=i.apiUid,o=i.extractRehydrationInfo,l=i.hasRehydrationInfo,c=r.assertTagType,u=r.config,d=Pi(e+"/resetApiState"),h=wu({name:e+"/queries",initialState:Cm,reducers:{removeQueryResult:{reducer:function(S,_){var C=_.payload.queryCacheKey;delete S[C]},prepare:_m()},queryResultPatched:{reducer:function(S,_){var C=_.payload,k=C.queryCacheKey,D=C.patches;Ib(S,k,function(I){I.data=n6(I.data,D.concat())})},prepare:_m()}},extraReducers:function(S){S.addCase(t.pending,function(_,C){var k=C.meta,D=C.meta.arg,I,L,M=zI(D);(D.subscribe||M)&&((L=_[I=D.queryCacheKey])!=null||(_[I]={status:xr.uninitialized,endpointName:D.endpointName})),Ib(_,D.queryCacheKey,function(F){F.status=xr.pending,F.requestId=M&&F.requestId?F.requestId:k.requestId,D.originalArgs!==void 0&&(F.originalArgs=D.originalArgs),F.startedTimeStamp=k.startedTimeStamp})}).addCase(t.fulfilled,function(_,C){var k=C.meta,D=C.payload;Ib(_,k.arg.queryCacheKey,function(I){var L;if(!(I.requestId!==k.requestId&&!zI(k.arg))){var M=s[k.arg.endpointName].merge;if(I.status=xr.fulfilled,M)if(I.data!==void 0){var F=k.fulfilledTimeStamp,U=k.arg,W=k.baseQueryMeta,j=k.requestId,z=_l(I.data,function(Q){return M(Q,D,{arg:U.originalArgs,baseQueryMeta:W,fulfilledTimeStamp:F,requestId:j})});I.data=z}else I.data=D;else I.data=(L=s[k.arg.endpointName].structuralSharing)==null||L?kQ(is(I.data)?M3e(I.data):I.data,D):D;delete I.error,I.fulfilledTimeStamp=k.fulfilledTimeStamp}})}).addCase(t.rejected,function(_,C){var k=C.meta,D=k.condition,I=k.arg,L=k.requestId,M=C.error,F=C.payload;Ib(_,I.queryCacheKey,function(U){if(!D){if(U.requestId!==L)return;U.status=xr.rejected,U.error=F??M}})}).addMatcher(l,function(_,C){for(var k=o(C).queries,D=0,I=Object.entries(k);D<I.length;D++){var L=I[D],M=L[0],F=L[1];(F?.status===xr.fulfilled||F?.status===xr.rejected)&&(_[M]=F)}})}}),f=wu({name:e+"/mutations",initialState:Cm,reducers:{removeMutationResult:{reducer:function(S,_){var C=_.payload,k=O0(C);k in S&&delete S[k]},prepare:_m()}},extraReducers:function(S){S.addCase(n.pending,function(_,C){var k=C.meta,D=C.meta,I=D.requestId,L=D.arg,M=D.startedTimeStamp;L.track&&(_[O0(k)]={requestId:I,status:xr.pending,endpointName:L.endpointName,startedTimeStamp:M})}).addCase(n.fulfilled,function(_,C){var k=C.payload,D=C.meta;D.arg.track&&j6(_,D,function(I){I.requestId===D.requestId&&(I.status=xr.fulfilled,I.data=k,I.fulfilledTimeStamp=D.fulfilledTimeStamp)})}).addCase(n.rejected,function(_,C){var k=C.payload,D=C.error,I=C.meta;I.arg.track&&j6(_,I,function(L){L.requestId===I.requestId&&(L.status=xr.rejected,L.error=k??D)})}).addMatcher(l,function(_,C){for(var k=o(C).mutations,D=0,I=Object.entries(k);D<I.length;D++){var L=I[D],M=L[0],F=L[1];(F?.status===xr.fulfilled||F?.status===xr.rejected)&&M!==F?.requestId&&(_[M]=F)}})}}),m=wu({name:e+"/invalidation",initialState:Cm,reducers:{updateProvidedBy:{reducer:function(S,_){for(var C,k,D,I,L=_.payload,M=L.queryCacheKey,F=L.providedTags,U=0,W=Object.values(S);U<W.length;U++)for(var j=W[U],z=0,Q=Object.values(j);z<Q.length;z++){var V=Q[z],Y=V.indexOf(M);Y!==-1&&V.splice(Y,1)}for(var J=0,ue=F;J<ue.length;J++){var ne=ue[J],ge=ne.type,ae=ne.id,ie=(I=(k=(C=S[ge])!=null?C:S[ge]={})[D=ae||"__internal_without_id"])!=null?I:k[D]=[],ee=ie.includes(M);ee||ie.push(M)}},prepare:_m()}},extraReducers:function(S){S.addCase(h.actions.removeQueryResult,function(_,C){for(var k=C.payload.queryCacheKey,D=0,I=Object.values(_);D<I.length;D++)for(var L=I[D],M=0,F=Object.values(L);M<F.length;M++){var U=F[M],W=U.indexOf(k);W!==-1&&U.splice(W,1)}}).addMatcher(l,function(_,C){for(var k,D,I,L,M=o(C).provided,F=0,U=Object.entries(M);F<U.length;F++)for(var W=U[F],j=W[0],z=W[1],Q=0,V=Object.entries(z);Q<V.length;Q++)for(var Y=V[Q],J=Y[0],ue=Y[1],ne=(L=(D=(k=_[j])!=null?k:_[j]={})[I=J||"__internal_without_id"])!=null?L:D[I]=[],ge=0,ae=ue;ge<ae.length;ge++){var ie=ae[ge],ee=ne.includes(ie);ee||ne.push(ie)}}).addMatcher(Yp(Qd(t),cS(t)),function(_,C){var k=LQ(C,"providesTags",s,c),D=C.meta.arg.queryCacheKey;m.caseReducers.updateProvidedBy(_,m.actions.updateProvidedBy({queryCacheKey:D,providedTags:k}))})}}),g=wu({name:e+"/subscriptions",initialState:Cm,reducers:{updateSubscriptionOptions:function(S,_){},unsubscribeQueryResult:function(S,_){},internal_probeSubscription:function(S,_){}}}),y=wu({name:e+"/internalSubscriptions",initialState:Cm,reducers:{subscriptionsUpdated:{reducer:function(S,_){return n6(S,_.payload)},prepare:_m()}}}),b=wu({name:e+"/config",initialState:ln({online:E8e(),focused:x8e(),middlewareRegistered:!1},u),reducers:{middlewareRegistered:function(S,_){var C=_.payload;S.middlewareRegistered=S.middlewareRegistered==="conflict"||a!==C?"conflict":!0}},extraReducers:function(S){S.addCase(QO,function(_){_.online=!0}).addCase($Q,function(_){_.online=!1}).addCase(YO,function(_){_.focused=!0}).addCase(IQ,function(_){_.focused=!1}).addMatcher(l,function(_){return ln({},_)})}}),E=wQ({queries:h.reducer,mutations:f.reducer,provided:m.reducer,subscriptions:y.reducer,config:b.reducer}),w=function(S,_){return E(d.match(_)?void 0:S,_)},A=dl(ln(ln(ln(ln(ln(ln({},b.actions),h.actions),g.actions),y.actions),f.actions),m.actions),{unsubscribeMutationResult:f.actions.removeMutationResult,resetApiState:d});return{reducer:w,actions:A}}var ed=Symbol.for("RTKQ/skipToken"),OQ={status:xr.uninitialized},K6=_l(OQ,function(){}),z6=_l(OQ,function(){});function C8e(r){var e=r.serializeQueryArgs,t=r.reducerPath,n=function(u){return K6},i=function(u){return z6};return{buildQuerySelector:o,buildMutationSelector:l,selectInvalidatedBy:c};function s(u){return ln(ln({},u),b8e(u.status))}function a(u){var d=u[t];if(!d){if(a.triggered)return d;a.triggered=!0,console.error("Error: No data found at `state."+t+"`. Did you forget to add the reducer to the store?")}return d}function o(u,d){return function(h){var f=e({queryArgs:h,endpointDefinition:d,endpointName:u}),m=function(y){var b,E,w;return(w=(E=(b=a(y))==null?void 0:b.queries)==null?void 0:E[f])!=null?w:K6},g=h===ed?n:m;return Vg(g,s)}}function l(){return function(u){var d,h;typeof u=="object"?h=(d=O0(u))!=null?d:ed:h=u;var f=function(g){var y,b,E;return(E=(b=(y=a(g))==null?void 0:y.mutations)==null?void 0:b[h])!=null?E:z6},m=h===ed?i:f;return Vg(m,s)}}function c(u,d){for(var h,f=u[t],m=new Set,g=0,y=d.map(KI);g<y.length;g++){var b=y[g],E=f.provided[b.type];if(E)for(var w=(h=b.id!==void 0?E[b.id]:H6(Object.values(E)))!=null?h:[],A=0,S=w;A<S.length;A++){var _=S[A];m.add(_)}}return H6(Array.from(m.values()).map(function(C){var k=f.queries[C];return k?[{queryCacheKey:C,endpointName:k.endpointName,originalArgs:k.originalArgs}]:[]}))}}var $b=WeakMap?new WeakMap:void 0,Y6=function(r){var e=r.endpointName,t=r.queryArgs,n="",i=$b?.get(t);if(typeof i=="string")n=i;else{var s=JSON.stringify(t,function(a,o){return $0(o)?Object.keys(o).sort().reduce(function(l,c){return l[c]=o[c],l},{}):o});$0(t)&&$b?.set(t,s),n=s}return e+"("+n+")"};function R8e(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];return function(n){var i=GI(function(u){var d,h;return(h=n.extractRehydrationInfo)==null?void 0:h.call(n,u,{reducerPath:(d=n.reducerPath)!=null?d:"api"})}),s=dl(ln({reducerPath:"api",keepUnusedDataFor:60,refetchOnMountOrArgChange:!1,refetchOnFocus:!1,refetchOnReconnect:!1},n),{extractRehydrationInfo:i,serializeQueryArgs:function(u){var d=Y6;if("serializeQueryArgs"in u.endpointDefinition){var h=u.endpointDefinition.serializeQueryArgs;d=function(f){var m=h(f);return typeof m=="string"?m:Y6(dl(ln({},f),{queryArgs:m}))}}else n.serializeQueryArgs&&(d=n.serializeQueryArgs);return d(u)},tagTypes:ew([],n.tagTypes||[])}),a={endpointDefinitions:{},batch:function(u){u()},apiUid:AQ(),extractRehydrationInfo:i,hasRehydrationInfo:GI(function(u){return i(u)!=null})},o={injectEndpoints:c,enhanceEndpoints:function(u){var d=u.addTagTypes,h=u.endpoints;if(d)for(var f=0,m=d;f<m.length;f++){var g=m[f];s.tagTypes.includes(g)||s.tagTypes.push(g)}if(h)for(var y=0,b=Object.entries(h);y<b.length;y++){var E=b[y],w=E[0],A=E[1];typeof A=="function"?A(a.endpointDefinitions[w]):Object.assign(a.endpointDefinitions[w]||{},A)}return o}},l=r.map(function(u){return u.init(o,s,a)});function c(u){for(var d=u.endpoints({query:function(A){return dl(ln({},A),{type:go.query})},mutation:function(A){return dl(ln({},A),{type:go.mutation})}}),h=0,f=Object.entries(d);h<f.length;h++){var m=f[h],g=m[0],y=m[1];if(!u.overrideExisting&&g in a.endpointDefinitions){typeof process<"u"&&console.error("called `injectEndpoints` to override already-existing endpointName "+g+" without specifying `overrideExisting: true`");continue}a.endpointDefinitions[g]=y;for(var b=0,E=l;b<E.length;b++){var w=E[b];w.injectEndpoint(g,y)}}return o}return o.injectEndpoints({endpoints:n.endpoints})}}function k8e(r){for(var e in r)return!1;return!0}var I8e=2147483647/1e3-1,$8e=function(r){var e=r.reducerPath,t=r.api,n=r.context,i=r.internalState,s=t.internalActions,a=s.removeQueryResult,o=s.unsubscribeQueryResult;function l(h){var f=i.currentSubscriptions[h];return!!f&&!k8e(f)}var c={},u=function(h,f,m){var g;if(o.match(h)){var y=f.getState()[e],b=h.payload.queryCacheKey;d(b,(g=y.queries[b])==null?void 0:g.endpointName,f,y.config)}if(t.util.resetApiState.match(h))for(var E=0,w=Object.entries(c);E<w.length;E++){var A=w[E],S=A[0],_=A[1];_&&clearTimeout(_),delete c[S]}if(n.hasRehydrationInfo(h))for(var y=f.getState()[e],C=n.extractRehydrationInfo(h).queries,k=0,D=Object.entries(C);k<D.length;k++){var I=D[k],b=I[0],L=I[1];d(b,L?.endpointName,f,y.config)}};function d(h,f,m,g){var y,b=n.endpointDefinitions[f],E=(y=b?.keepUnusedDataFor)!=null?y:g.keepUnusedDataFor;if(E!==1/0){var w=Math.max(0,Math.min(E,I8e));if(!l(h)){var A=c[h];A&&clearTimeout(A),c[h]=setTimeout(function(){l(h)||m.dispatch(a({queryCacheKey:h})),delete c[h]},w*1e3)}}}return u},D8e=function(r){var e=r.reducerPath,t=r.context,n=r.context.endpointDefinitions,i=r.mutationThunk,s=r.api,a=r.assertTagType,o=r.refetchQuery,l=s.internalActions.removeQueryResult,c=Yp(Qd(i),cS(i)),u=function(h,f){c(h)&&d(LQ(h,"invalidatesTags",n,a),f),s.util.invalidateTags.match(h)&&d(XO(h.payload,void 0,void 0,void 0,void 0,a),f)};function d(h,f){var m=f.getState(),g=m[e],y=s.util.selectInvalidatedBy(m,h);t.batch(function(){for(var b,E=Array.from(y.values()),w=0,A=E;w<A.length;w++){var S=A[w].queryCacheKey,_=g.queries[S],C=(b=g.subscriptions[S])!=null?b:{};_&&(Object.keys(C).length===0?f.dispatch(l({queryCacheKey:S})):_.status!==xr.uninitialized&&f.dispatch(o(_,S)))}})}return u},L8e=function(r){var e=r.reducerPath,t=r.queryThunk,n=r.api,i=r.refetchQuery,s=r.internalState,a={},o=function(f,m){(n.internalActions.updateSubscriptionOptions.match(f)||n.internalActions.unsubscribeQueryResult.match(f))&&c(f.payload,m),(t.pending.match(f)||t.rejected.match(f)&&f.meta.condition)&&c(f.meta.arg,m),(t.fulfilled.match(f)||t.rejected.match(f)&&!f.meta.condition)&&l(f.meta.arg,m),n.util.resetApiState.match(f)&&d()};function l(f,m){var g=f.queryCacheKey,y=m.getState()[e],b=y.queries[g],E=s.currentSubscriptions[g];if(!(!b||b.status===xr.uninitialized)){var w=h(E);if(Number.isFinite(w)){var A=a[g];A?.timeout&&(clearTimeout(A.timeout),A.timeout=void 0);var S=Date.now()+w,_=a[g]={nextPollTimestamp:S,pollingInterval:w,timeout:setTimeout(function(){_.timeout=void 0,m.dispatch(i(b,g))},w)}}}}function c(f,m){var g=f.queryCacheKey,y=m.getState()[e],b=y.queries[g],E=s.currentSubscriptions[g];if(!(!b||b.status===xr.uninitialized)){var w=h(E);if(!Number.isFinite(w)){u(g);return}var A=a[g],S=Date.now()+w;(!A||S<A.nextPollTimestamp)&&l({queryCacheKey:g},m)}}function u(f){var m=a[f];m?.timeout&&clearTimeout(m.timeout),delete a[f]}function d(){for(var f=0,m=Object.keys(a);f<m.length;f++){var g=m[f];u(g)}}function h(f){f===void 0&&(f={});var m=Number.POSITIVE_INFINITY;for(var g in f)f[g].pollingInterval&&(m=Math.min(f[g].pollingInterval,m));return m}return o},O8e=function(r){var e=r.reducerPath,t=r.context,n=r.api,i=r.refetchQuery,s=r.internalState,a=n.internalActions.removeQueryResult,o=function(c,u){YO.match(c)&&l(u,"refetchOnFocus"),QO.match(c)&&l(u,"refetchOnReconnect")};function l(c,u){var d=c.getState()[e],h=d.queries,f=s.currentSubscriptions;t.batch(function(){for(var m=0,g=Object.keys(f);m<g.length;m++){var y=g[m],b=h[y],E=f[y];if(!(!E||!b)){var w=Object.values(E).some(function(A){return A[u]===!0})||Object.values(E).every(function(A){return A[u]===void 0})&&d.config[u];w&&(Object.keys(E).length===0?c.dispatch(a({queryCacheKey:y})):b.status!==xr.uninitialized&&c.dispatch(i(b,y)))}}})}return o},Q6=new Error("Promise never resolved before cacheEntryRemoved."),P8e=function(r){var e=r.api,t=r.reducerPath,n=r.context,i=r.queryThunk,s=r.mutationThunk;r.internalState;var a=jI(i),o=jI(s),l=Qd(i,s),c={},u=function(f,m,g){var y=d(f);if(i.pending.match(f)){var b=g[t].queries[y],E=m.getState()[t].queries[y];!b&&E&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,y,m,f.meta.requestId)}else if(s.pending.match(f)){var E=m.getState()[t].mutations[y];E&&h(f.meta.arg.endpointName,f.meta.arg.originalArgs,y,m,f.meta.requestId)}else if(l(f)){var w=c[y];w?.valueResolved&&(w.valueResolved({data:f.payload,meta:f.meta.baseQueryMeta}),delete w.valueResolved)}else if(e.internalActions.removeQueryResult.match(f)||e.internalActions.removeMutationResult.match(f)){var w=c[y];w&&(delete c[y],w.cacheEntryRemoved())}else if(e.util.resetApiState.match(f))for(var A=0,S=Object.entries(c);A<S.length;A++){var _=S[A],C=_[0],w=_[1];delete c[C],w.cacheEntryRemoved()}};function d(f){return a(f)?f.meta.arg.queryCacheKey:o(f)?f.meta.requestId:e.internalActions.removeQueryResult.match(f)?f.payload.queryCacheKey:e.internalActions.removeMutationResult.match(f)?O0(f.payload):""}function h(f,m,g,y,b){var E=n.endpointDefinitions[f],w=E?.onCacheEntryAdded;if(w){var A={},S=new Promise(function(L){A.cacheEntryRemoved=L}),_=Promise.race([new Promise(function(L){A.valueResolved=L}),S.then(function(){throw Q6})]);_.catch(function(){}),c[g]=A;var C=e.endpoints[f].select(E.type===go.query?m:g),k=y.dispatch(function(L,M,F){return F}),D=dl(ln({},y),{getCacheEntry:function(){return C(y.getState())},requestId:b,extra:k,updateCachedData:E.type===go.query?function(L){return y.dispatch(e.util.updateQueryData(f,m,L))}:void 0,cacheDataLoaded:_,cacheEntryRemoved:S}),I=w(m,D);Promise.resolve(I).catch(function(L){if(L!==Q6)throw L})}}return u},M8e=function(r){var e=r.api,t=r.context,n=r.queryThunk,i=r.mutationThunk,s=KO(n,i),a=D0(n,i),o=Qd(n,i),l={},c=function(u,d){var h,f,m;if(s(u)){var g=u.meta,y=g.requestId,b=g.arg,E=b.endpointName,w=b.originalArgs,A=t.endpointDefinitions[E],S=A?.onQueryStarted;if(S){var _={},C=new Promise(function(W,j){_.resolve=W,_.reject=j});C.catch(function(){}),l[y]=_;var k=e.endpoints[E].select(A.type===go.query?w:y),D=d.dispatch(function(W,j,z){return z}),I=dl(ln({},d),{getCacheEntry:function(){return k(d.getState())},requestId:y,extra:D,updateCachedData:A.type===go.query?function(W){return d.dispatch(e.util.updateQueryData(E,w,W))}:void 0,queryFulfilled:C});S(w,I)}}else if(o(u)){var L=u.meta,y=L.requestId,M=L.baseQueryMeta;(h=l[y])==null||h.resolve({data:u.payload,meta:M}),delete l[y]}else if(a(u)){var F=u.meta,y=F.requestId,U=F.rejectedWithValue,M=F.baseQueryMeta;(m=l[y])==null||m.reject({error:(f=u.payload)!=null?f:u.error,isUnhandledError:!U,meta:M}),delete l[y]}};return c},N8e=function(r){var e=r.api,t=r.context.apiUid,n=r.reducerPath;return function(i,s){var a,o;e.util.resetApiState.match(i)&&s.dispatch(e.internalActions.middlewareRegistered(t)),typeof process<"u"&&e.internalActions.middlewareRegistered.match(i)&&i.payload===t&&((o=(a=s.getState()[n])==null?void 0:a.config)==null?void 0:o.middlewareRegistered)==="conflict"&&console.warn('There is a mismatch between slice and middleware for the reducerPath "'+n+`".
You can only have one api per reducer path, this will lead to crashes in various situations!`+(n==="api"?`
If you have multiple apis, you *have* to specify the reducerPath option when using createApi!`:""))}},X6,F8e=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis):function(r){return(X6||(X6=Promise.resolve())).then(r).catch(function(e){return setTimeout(function(){throw e},0)})},B8e=function(r){var e=r.api,t=r.queryThunk,n=r.internalState,i=e.reducerPath+"/subscriptions",s=null,a=!1,o=e.internalActions,l=o.updateSubscriptionOptions,c=o.unsubscribeQueryResult,u=function(d,h){var f,m,g,y,b,E,w,A,S;if(l.match(h)){var _=h.payload,C=_.queryCacheKey,k=_.requestId,D=_.options;return(f=d?.[C])!=null&&f[k]&&(d[C][k]=D),!0}if(c.match(h)){var I=h.payload,C=I.queryCacheKey,k=I.requestId;return d[C]&&delete d[C][k],!0}if(e.internalActions.removeQueryResult.match(h))return delete d[h.payload.queryCacheKey],!0;if(t.pending.match(h)){var L=h.meta,M=L.arg,k=L.requestId;if(M.subscribe){var F=(g=d[m=M.queryCacheKey])!=null?g:d[m]={};return F[k]=(b=(y=M.subscriptionOptions)!=null?y:F[k])!=null?b:{},!0}}if(t.rejected.match(h)){var U=h.meta,W=U.condition,M=U.arg,k=U.requestId;if(W&&M.subscribe){var F=(w=d[E=M.queryCacheKey])!=null?w:d[E]={};return F[k]=(S=(A=M.subscriptionOptions)!=null?A:F[k])!=null?S:{},!0}}return!1};return function(d,h){var f,m;if(s||(s=JSON.parse(JSON.stringify(n.currentSubscriptions))),e.util.resetApiState.match(d))return s=n.currentSubscriptions={},[!0,!1];if(e.internalActions.internal_probeSubscription.match(d)){var g=d.payload,y=g.queryCacheKey,b=g.requestId,E=!!((f=n.currentSubscriptions[y])!=null&&f[b]);return[!1,E]}var w=u(n.currentSubscriptions,d);if(w){a||(F8e(function(){var C=JSON.parse(JSON.stringify(n.currentSubscriptions)),k=FY(s,function(){return C}),D=k[1];h.next(e.internalActions.subscriptionsUpdated(D)),s=C,a=!1}),a=!0);var A=!!((m=d.type)!=null&&m.startsWith(i)),S=t.rejected.match(d)&&d.meta.condition&&!!d.meta.arg.subscribe,_=!A&&!S;return[_,!1]}return[!0,!1]}};function U8e(r){var e=r.reducerPath,t=r.queryThunk,n=r.api,i=r.context,s=i.apiUid,a={invalidateTags:Pi(e+"/invalidateTags")},o=function(d){return!!d&&typeof d.type=="string"&&d.type.startsWith(e+"/")},l=[N8e,$8e,D8e,L8e,P8e,M8e],c=function(d){var h=!1,f={currentSubscriptions:{}},m=dl(ln({},r),{internalState:f,refetchQuery:u}),g=l.map(function(E){return E(m)}),y=B8e(m),b=O8e(m);return function(E){return function(w){h||(h=!0,d.dispatch(n.internalActions.middlewareRegistered(s)));var A=dl(ln({},d),{next:E}),S=d.getState(),_=y(w,A,S),C=_[0],k=_[1],D;if(C?D=E(w):D=k,d.getState()[e]&&(b(w,A,S),o(w)||i.hasRehydrationInfo(w)))for(var I=0,L=g;I<L.length;I++){var M=L[I];M(w,A,S)}return D}}};return{middleware:c,actions:a};function u(d,h,f){return f===void 0&&(f={}),t(ln({type:"query",endpointName:d.endpointName,originalArgs:d.originalArgs,subscribe:!1,forceRefetch:!0,queryCacheKey:h},f))}}function Bl(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];Object.assign.apply(Object,ew([r],e))}var Z6=Symbol(),W8e=function(){return{name:Z6,init:function(r,e,t){var n=e.baseQuery,i=e.tagTypes,s=e.reducerPath,a=e.serializeQueryArgs,o=e.keepUnusedDataFor,l=e.refetchOnMountOrArgChange,c=e.refetchOnFocus,u=e.refetchOnReconnect;B3e();var d=function(ne){return typeof process<"u"&&(i.includes(ne.type)||console.error("Tag type '"+ne.type+"' was used, but not specified in `tagTypes`!")),ne};Object.assign(r,{reducerPath:s,endpoints:{},internalActions:{onOnline:QO,onOffline:$Q,onFocus:YO,onFocusLost:IQ},util:{}});var h=A8e({baseQuery:n,reducerPath:s,context:t,api:r,serializeQueryArgs:a,assertTagType:d}),f=h.queryThunk,m=h.mutationThunk,g=h.patchQueryData,y=h.updateQueryData,b=h.upsertQueryData,E=h.prefetch,w=h.buildMatchThunkActions,A=_8e({context:t,queryThunk:f,mutationThunk:m,reducerPath:s,assertTagType:d,config:{refetchOnFocus:c,refetchOnReconnect:u,refetchOnMountOrArgChange:l,keepUnusedDataFor:o,reducerPath:s}}),S=A.reducer,_=A.actions;Bl(r.util,{patchQueryData:g,updateQueryData:y,upsertQueryData:b,prefetch:E,resetApiState:_.resetApiState}),Bl(r.internalActions,_);var C=U8e({reducerPath:s,context:t,queryThunk:f,mutationThunk:m,api:r,assertTagType:d}),k=C.middleware,D=C.actions;Bl(r.util,D),Bl(r,{reducer:S,middleware:k});var I=C8e({serializeQueryArgs:a,reducerPath:s}),L=I.buildQuerySelector,M=I.buildMutationSelector,F=I.selectInvalidatedBy;Bl(r.util,{selectInvalidatedBy:F});var U=S8e({queryThunk:f,mutationThunk:m,api:r,serializeQueryArgs:a,context:t}),W=U.buildInitiateQuery,j=U.buildInitiateMutation,z=U.getRunningMutationThunk,Q=U.getRunningMutationsThunk,V=U.getRunningQueriesThunk,Y=U.getRunningQueryThunk,J=U.getRunningOperationPromises,ue=U.removalWarning;return Bl(r.util,{getRunningOperationPromises:J,getRunningOperationPromise:ue,getRunningMutationThunk:z,getRunningMutationsThunk:Q,getRunningQueryThunk:Y,getRunningQueriesThunk:V}),{name:Z6,injectEndpoint:function(ne,ge){var ae,ie,ee=r;(ie=(ae=ee.endpoints)[ne])!=null||(ae[ne]={}),DQ(ge)?Bl(ee.endpoints[ne],{name:ne,select:L(ne,ge),initiate:W(ne,ge)},w(f,ne)):w8e(ge)&&Bl(ee.endpoints[ne],{name:ne,select:M(),initiate:j(ne)},w(m,ne))}}}}},PQ={exports:{}},MQ={};/**
 * @license React
 * use-sync-external-store-shim.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function r(f,m){return f===m&&(f!==0||1/f===1/m)||f!==f&&m!==m}function e(f,m){u||i.startTransition===void 0||(u=!0,console.error("You are using an outdated, pre-release alpha of React 18 that does not support useSyncExternalStore. The use-sync-external-store shim will not work correctly. Upgrade to a newer pre-release."));var g=m();if(!d){var y=m();s(g,y)||(console.error("The result of getSnapshot should be cached to avoid an infinite loop"),d=!0)}y=a({inst:{value:g,getSnapshot:m}});var b=y[0].inst,E=y[1];return l(function(){b.value=g,b.getSnapshot=m,t(b)&&E({inst:b})},[f,g,m]),o(function(){return t(b)&&E({inst:b}),f(function(){t(b)&&E({inst:b})})},[f]),c(g),g}function t(f){var m=f.getSnapshot;f=f.value;try{var g=m();return!s(f,g)}catch{return!0}}function n(f,m){return m()}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var i=x,s=typeof Object.is=="function"?Object.is:r,a=i.useState,o=i.useEffect,l=i.useLayoutEffect,c=i.useDebugValue,u=!1,d=!1,h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?n:e;MQ.useSyncExternalStore=i.useSyncExternalStore!==void 0?i.useSyncExternalStore:h,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})();PQ.exports=MQ;var H8e=PQ.exports,NQ={exports:{}},FQ={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){function r(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(Error());var e=x,t=H8e,n=typeof Object.is=="function"?Object.is:r,i=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,o=e.useMemo,l=e.useDebugValue;FQ.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var m=s(null);if(m.current===null){var g={hasValue:!1,value:null};m.current=g}else g=m.current;m=o(function(){function b(_){if(!E){if(E=!0,w=_,_=h(_),f!==void 0&&g.hasValue){var C=g.value;if(f(C,_))return A=C}return A=_}if(C=A,n(w,_))return C;var k=h(_);return f!==void 0&&f(C,k)?(w=_,C):(w=_,A=k)}var E=!1,w,A,S=d===void 0?null:d;return[function(){return b(u())},S===null?void 0:function(){return b(S())}]},[u,d,h,f]);var y=i(c,m[0],m[1]);return a(function(){g.hasValue=!0,g.value=y},[y]),l(y),y},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(Error())})();NQ.exports=FQ;var V8e=NQ.exports;const J6=Symbol.for("react-redux-context"),e9=typeof globalThis<"u"?globalThis:{};function G8e(){var r;if(!x.createContext)return{};const e=(r=e9[J6])!=null?r:e9[J6]=new Map;let t=e.get(x.createContext);return t||(t=x.createContext(null),t.displayName="ReactRedux",e.set(x.createContext,t)),t}const Md=G8e();function ZO(r=Md){return function(){const t=x.useContext(r);if(!t)throw new Error("could not find react-redux context value; please ensure the component is wrapped in a <Provider>");return t}}const BQ=ZO(),q8e=()=>{throw new Error("uSES not initialized!")};let UQ=q8e;const j8e=r=>{UQ=r},K8e=(r,e)=>r===e;function z8e(r=Md){const e=r===Md?BQ:ZO(r);return function(n,i={}){const{equalityFn:s=K8e,stabilityCheck:a=void 0,noopCheck:o=void 0}=typeof i=="function"?{equalityFn:i}:i;{if(!n)throw new Error("You must pass a selector to useSelector");if(typeof n!="function")throw new Error("You must pass a function as a selector to useSelector");if(typeof s!="function")throw new Error("You must pass a function as an equality function to useSelector")}const{store:l,subscription:c,getServerState:u,stabilityCheck:d,noopCheck:h}=e(),f=x.useRef(!0),m=x.useCallback({[n.name](y){const b=n(y);{const E=typeof a>"u"?d:a;if(E==="always"||E==="once"&&f.current){const A=n(y);if(!s(b,A)){let S;try{throw new Error}catch(_){({stack:S}=_)}console.warn("Selector "+(n.name||"unknown")+` returned a different result when called with the same parameters. This can lead to unnecessary rerenders.
Selectors that return a new reference (such as an object or an array) should be memoized: https://redux.js.org/usage/deriving-data-selectors#optimizing-selectors-with-memoization`,{state:y,selected:b,selected2:A,stack:S})}}const w=typeof o>"u"?h:o;if((w==="always"||w==="once"&&f.current)&&b===y){let A;try{throw new Error}catch(S){({stack:A}=S)}console.warn("Selector "+(n.name||"unknown")+` returned the root state when called. This can lead to unnecessary rerenders.
Selectors that return the entire state are almost certainly a mistake, as they will cause a rerender whenever *anything* in state changes.`,{stack:A})}f.current&&(f.current=!1)}return b}}[n.name],[n,d,a]),g=UQ(c.addNestedSub,l.getState,u||l.getState,m,s);return x.useDebugValue(g),g}}const Y8e=z8e();var Kt={};/**
 * @license React
 * react-is.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){var r=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),o=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.offscreen"),m=!1,g=!1,y=!1,b=!1,E=!1,w;w=Symbol.for("react.module.reference");function A(Se){return!!(typeof Se=="string"||typeof Se=="function"||Se===t||Se===i||E||Se===n||Se===c||Se===u||b||Se===f||m||g||y||typeof Se=="object"&&Se!==null&&(Se.$$typeof===h||Se.$$typeof===d||Se.$$typeof===s||Se.$$typeof===a||Se.$$typeof===l||Se.$$typeof===w||Se.getModuleId!==void 0))}function S(Se){if(typeof Se=="object"&&Se!==null){var et=Se.$$typeof;switch(et){case r:var Qt=Se.type;switch(Qt){case t:case i:case n:case c:case u:return Qt;default:var Ut=Qt&&Qt.$$typeof;switch(Ut){case o:case a:case l:case h:case d:case s:return Ut;default:return et}}case e:return et}}}var _=a,C=s,k=r,D=l,I=t,L=h,M=d,F=e,U=i,W=n,j=c,z=u,Q=!1,V=!1;function Y(Se){return Q||(Q=!0,console.warn("The ReactIs.isAsyncMode() alias has been deprecated, and will be removed in React 18+.")),!1}function J(Se){return V||(V=!0,console.warn("The ReactIs.isConcurrentMode() alias has been deprecated, and will be removed in React 18+.")),!1}function ue(Se){return S(Se)===a}function ne(Se){return S(Se)===s}function ge(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===r}function ae(Se){return S(Se)===l}function ie(Se){return S(Se)===t}function ee(Se){return S(Se)===h}function be(Se){return S(Se)===d}function we(Se){return S(Se)===e}function Re(Se){return S(Se)===i}function Oe(Se){return S(Se)===n}function me(Se){return S(Se)===c}function Ue(Se){return S(Se)===u}Kt.ContextConsumer=_,Kt.ContextProvider=C,Kt.Element=k,Kt.ForwardRef=D,Kt.Fragment=I,Kt.Lazy=L,Kt.Memo=M,Kt.Portal=F,Kt.Profiler=U,Kt.StrictMode=W,Kt.Suspense=j,Kt.SuspenseList=z,Kt.isAsyncMode=Y,Kt.isConcurrentMode=J,Kt.isContextConsumer=ue,Kt.isContextProvider=ne,Kt.isElement=ge,Kt.isForwardRef=ae,Kt.isFragment=ie,Kt.isLazy=ee,Kt.isMemo=be,Kt.isPortal=we,Kt.isProfiler=Re,Kt.isStrictMode=Oe,Kt.isSuspense=me,Kt.isSuspenseList=Ue,Kt.isValidElementType=A,Kt.typeOf=S})();function t9(r,e){return r===e?r!==0||e!==0||1/r===1/e:r!==r&&e!==e}function tw(r,e){if(t9(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;const t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!Object.prototype.hasOwnProperty.call(e,t[i])||!t9(r[t[i]],e[t[i]]))return!1;return!0}function WQ(r=Md){const e=r===Md?BQ:ZO(r);return function(){const{store:n}=e();return n}}const HQ=WQ();function Q8e(r=Md){const e=r===Md?HQ:WQ(r);return function(){return e().dispatch}}const X8e=Q8e();j8e(V8e.useSyncExternalStoreWithSelector);var Z8e=function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r},J8e=Object.defineProperty,e6e=Object.defineProperties,t6e=Object.getOwnPropertyDescriptors,r9=Object.getOwnPropertySymbols,r6e=Object.prototype.hasOwnProperty,n6e=Object.prototype.propertyIsEnumerable,n9=function(r,e,t){return e in r?J8e(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},zo=function(r,e){for(var t in e||(e={}))r6e.call(e,t)&&n9(r,t,e[t]);if(r9)for(var n=0,i=r9(e);n<i.length;n++){var t=i[n];n6e.call(e,t)&&n9(r,t,e[t])}return r},N1=function(r,e){return e6e(r,t6e(e))};function i9(r,e,t,n){var i=x.useMemo(function(){return{queryArgs:r,serialized:typeof r=="object"?e({queryArgs:r,endpointDefinition:t,endpointName:n}):r}},[r,e,t,n]),s=x.useRef(i);return x.useEffect(function(){s.current.serialized!==i.serialized&&(s.current=i)},[i]),s.current.serialized===i.serialized?s.current.queryArgs:r}var bC=Symbol();function EC(r){var e=x.useRef(r);return x.useEffect(function(){tw(e.current,r)||(e.current=r)},[r]),tw(e.current,r)?e.current:r}var Db=WeakMap?new WeakMap:void 0,i6e=function(r){var e=r.endpointName,t=r.queryArgs,n="",i=Db?.get(t);if(typeof i=="string")n=i;else{var s=JSON.stringify(t,function(a,o){return $0(o)?Object.keys(o).sort().reduce(function(l,c){return l[c]=o[c],l},{}):o});$0(t)&&Db?.set(t,s),n=s}return e+"("+n+")"},s6e=typeof window<"u"&&window.document&&window.document.createElement?x.useLayoutEffect:x.useEffect,a6e=function(r){return r},o6e=function(r){return r.isUninitialized?N1(zo({},r),{isUninitialized:!1,isFetching:!0,isLoading:r.data===void 0,status:xr.pending}):r};function l6e(r){var e=r.api,t=r.moduleOptions,n=t.batch,i=t.useDispatch,s=t.useSelector,a=t.useStore,o=t.unstable__sideEffectsInRender,l=r.serializeQueryArgs,c=r.context,u=o?function(g){return g()}:x.useEffect;return{buildQueryHooks:f,buildMutationHook:m,usePrefetch:h};function d(g,y,b){if(y?.endpointName&&g.isUninitialized){var E=y.endpointName,w=c.endpointDefinitions[E];l({queryArgs:y.originalArgs,endpointDefinition:w,endpointName:E})===l({queryArgs:b,endpointDefinition:w,endpointName:E})&&(y=void 0)}var A=g.isSuccess?g.data:y?.data;A===void 0&&(A=g.data);var S=A!==void 0,_=g.isLoading,C=!S&&_,k=g.isSuccess||_&&S;return N1(zo({},g),{data:A,currentData:g.data,isFetching:_,isLoading:C,isSuccess:k})}function h(g,y){var b=i(),E=EC(y);return x.useCallback(function(w,A){return b(e.util.prefetch(g,w,zo(zo({},E),A)))},[g,b,E])}function f(g){var y=function(w,A){var S=A===void 0?{}:A,_=S.refetchOnReconnect,C=S.refetchOnFocus,k=S.refetchOnMountOrArgChange,D=S.skip,I=D===void 0?!1:D,L=S.pollingInterval,M=L===void 0?0:L,F=e.endpoints[g].initiate,U=i(),W=i9(I?ed:w,i6e,c.endpointDefinitions[g],g),j=EC({refetchOnReconnect:_,refetchOnFocus:C,pollingInterval:M}),z=x.useRef(!1),Q=x.useRef(),V=Q.current||{},Y=V.queryCacheKey,J=V.requestId,ue=!1;if(Y&&J){var ne=U(e.internalActions.internal_probeSubscription({queryCacheKey:Y,requestId:J}));if(typeof ne!="boolean")throw new Error('Warning: Middleware for RTK-Query API at reducerPath "'+e.reducerPath+`" has not been added to the store.
    You must add the middleware for RTK-Query to function correctly!`);ue=!!ne}var ge=!ue&&z.current;return u(function(){z.current=ue}),u(function(){ge&&(Q.current=void 0)},[ge]),u(function(){var ae,ie=Q.current;if(W===ed){ie?.unsubscribe(),Q.current=void 0;return}var ee=(ae=Q.current)==null?void 0:ae.subscriptionOptions;if(!ie||ie.arg!==W){ie?.unsubscribe();var be=U(F(W,{subscriptionOptions:j,forceRefetch:k}));Q.current=be}else j!==ee&&ie.updateSubscriptionOptions(j)},[U,F,k,W,j,ge]),x.useEffect(function(){return function(){var ae;(ae=Q.current)==null||ae.unsubscribe(),Q.current=void 0}},[]),x.useMemo(function(){return{refetch:function(){var ae;if(!Q.current)throw new Error("Cannot refetch a query that has not been started yet.");return(ae=Q.current)==null?void 0:ae.refetch()}}},[])},b=function(w){var A=w===void 0?{}:w,S=A.refetchOnReconnect,_=A.refetchOnFocus,C=A.pollingInterval,k=C===void 0?0:C,D=e.endpoints[g].initiate,I=i(),L=x.useState(bC),M=L[0],F=L[1],U=x.useRef(),W=EC({refetchOnReconnect:S,refetchOnFocus:_,pollingInterval:k});u(function(){var Q,V,Y=(Q=U.current)==null?void 0:Q.subscriptionOptions;W!==Y&&((V=U.current)==null||V.updateSubscriptionOptions(W))},[W]);var j=x.useRef(W);u(function(){j.current=W},[W]);var z=x.useCallback(function(Q,V){V===void 0&&(V=!1);var Y;return n(function(){var J;(J=U.current)==null||J.unsubscribe(),U.current=Y=I(D(Q,{subscriptionOptions:j.current,forceRefetch:!V})),F(Q)}),Y},[I,D]);return x.useEffect(function(){return function(){var Q;(Q=U?.current)==null||Q.unsubscribe()}},[]),x.useEffect(function(){M!==bC&&!U.current&&z(M,!0)},[M,z]),x.useMemo(function(){return[z,M]},[z,M])},E=function(w,A){var S=A===void 0?{}:A,_=S.skip,C=_===void 0?!1:_,k=S.selectFromResult,D=e.endpoints[g].select,I=i9(C?ed:w,l,c.endpointDefinitions[g],g),L=x.useRef(),M=x.useMemo(function(){return Vg([D(I),function(z,Q){return Q},function(z){return I}],d)},[D,I]),F=x.useMemo(function(){return k?Vg([M],k):M},[M,k]),U=s(function(z){return F(z,L.current)},tw),W=a(),j=M(W.getState(),L.current);return s6e(function(){L.current=j},[j]),U};return{useQueryState:E,useQuerySubscription:y,useLazyQuerySubscription:b,useLazyQuery:function(w){var A=b(w),S=A[0],_=A[1],C=E(_,N1(zo({},w),{skip:_===bC})),k=x.useMemo(function(){return{lastArg:_}},[_]);return x.useMemo(function(){return[S,C,k]},[S,C,k])},useQuery:function(w,A){var S=y(w,A),_=E(w,zo({selectFromResult:w===ed||A?.skip?void 0:o6e},A)),C=_.data,k=_.status,D=_.isLoading,I=_.isSuccess,L=_.isError,M=_.error;return x.useDebugValue({data:C,status:k,isLoading:D,isSuccess:I,isError:L,error:M}),x.useMemo(function(){return zo(zo({},_),S)},[_,S])}}}function m(g){return function(y){var b=y===void 0?{}:y,E=b.selectFromResult,w=E===void 0?a6e:E,A=b.fixedCacheKey,S=e.endpoints[g],_=S.select,C=S.initiate,k=i(),D=x.useState(),I=D[0],L=D[1];x.useEffect(function(){return function(){I?.arg.fixedCacheKey||I?.reset()}},[I]);var M=x.useCallback(function(ie){var ee=k(C(ie,{fixedCacheKey:A}));return L(ee),ee},[k,C,A]),F=(I||{}).requestId,U=x.useMemo(function(){return Vg([_({fixedCacheKey:A,requestId:I?.requestId})],w)},[_,I,w,A]),W=s(U,tw),j=A==null?I?.arg.originalArgs:void 0,z=x.useCallback(function(){n(function(){I&&L(void 0),A&&k(e.internalActions.removeMutationResult({requestId:F,fixedCacheKey:A}))})},[k,A,I,F]),Q=W.endpointName,V=W.data,Y=W.status,J=W.isLoading,ue=W.isSuccess,ne=W.isError,ge=W.error;x.useDebugValue({endpointName:Q,data:V,status:Y,isLoading:J,isSuccess:ue,isError:ne,error:ge});var ae=x.useMemo(function(){return N1(zo({},W),{originalArgs:j,reset:z})},[W,j,z]);return x.useMemo(function(){return[M,ae]},[M,ae])}}}var rw;(function(r){r.query="query",r.mutation="mutation"})(rw||(rw={}));function c6e(r){return r.type===rw.query}function u6e(r){return r.type===rw.mutation}function xC(r){return r.replace(r[0],r[0].toUpperCase())}function Lb(r){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];Object.assign.apply(Object,Z8e([r],e))}var d6e=Symbol(),h6e=function(r){var e={},t=e.batch,n=t===void 0?ha.unstable_batchedUpdates:t,i=e.useDispatch,s=i===void 0?X8e:i,a=e.useSelector,o=a===void 0?Y8e:a,l=e.useStore,c=l===void 0?HQ:l,u=e.unstable__sideEffectsInRender,d=u===void 0?!1:u;return{name:d6e,init:function(h,f,m){var g=f.serializeQueryArgs,y=h,b=l6e({api:h,moduleOptions:{batch:n,useDispatch:s,useSelector:o,useStore:c,unstable__sideEffectsInRender:d},serializeQueryArgs:g,context:m}),E=b.buildQueryHooks,w=b.buildMutationHook,A=b.usePrefetch;return Lb(y,{usePrefetch:A}),Lb(m,{batch:n}),{injectEndpoint:function(S,_){if(c6e(_)){var C=E(S),k=C.useQuery,D=C.useLazyQuery,I=C.useLazyQuerySubscription,L=C.useQueryState,M=C.useQuerySubscription;Lb(y.endpoints[S],{useQuery:k,useLazyQuery:D,useLazyQuerySubscription:I,useQueryState:L,useQuerySubscription:M}),h["use"+xC(S)+"Query"]=k,h["useLazy"+xC(S)+"Query"]=D}else if(u6e(_)){var F=w(S);Lb(y.endpoints[S],{useMutation:F}),h["use"+xC(S)+"Mutation"]=F}}}}}},f6e=R8e(W8e(),h6e()),VQ={};(function(r){r.aliasToReal={each:"forEach",eachRight:"forEachRight",entries:"toPairs",entriesIn:"toPairsIn",extend:"assignIn",extendAll:"assignInAll",extendAllWith:"assignInAllWith",extendWith:"assignInWith",first:"head",conforms:"conformsTo",matches:"isMatch",property:"get",__:"placeholder",F:"stubFalse",T:"stubTrue",all:"every",allPass:"overEvery",always:"constant",any:"some",anyPass:"overSome",apply:"spread",assoc:"set",assocPath:"set",complement:"negate",compose:"flowRight",contains:"includes",dissoc:"unset",dissocPath:"unset",dropLast:"dropRight",dropLastWhile:"dropRightWhile",equals:"isEqual",identical:"eq",indexBy:"keyBy",init:"initial",invertObj:"invert",juxt:"over",omitAll:"omit",nAry:"ary",path:"get",pathEq:"matchesProperty",pathOr:"getOr",paths:"at",pickAll:"pick",pipe:"flow",pluck:"map",prop:"get",propEq:"matchesProperty",propOr:"getOr",props:"at",symmetricDifference:"xor",symmetricDifferenceBy:"xorBy",symmetricDifferenceWith:"xorWith",takeLast:"takeRight",takeLastWhile:"takeRightWhile",unapply:"rest",unnest:"flatten",useWith:"overArgs",where:"conformsTo",whereEq:"isMatch",zipObj:"zipObject"},r.aryMethod={1:["assignAll","assignInAll","attempt","castArray","ceil","create","curry","curryRight","defaultsAll","defaultsDeepAll","floor","flow","flowRight","fromPairs","invert","iteratee","memoize","method","mergeAll","methodOf","mixin","nthArg","over","overEvery","overSome","rest","reverse","round","runInContext","spread","template","trim","trimEnd","trimStart","uniqueId","words","zipAll"],2:["add","after","ary","assign","assignAllWith","assignIn","assignInAllWith","at","before","bind","bindAll","bindKey","chunk","cloneDeepWith","cloneWith","concat","conformsTo","countBy","curryN","curryRightN","debounce","defaults","defaultsDeep","defaultTo","delay","difference","divide","drop","dropRight","dropRightWhile","dropWhile","endsWith","eq","every","filter","find","findIndex","findKey","findLast","findLastIndex","findLastKey","flatMap","flatMapDeep","flattenDepth","forEach","forEachRight","forIn","forInRight","forOwn","forOwnRight","get","groupBy","gt","gte","has","hasIn","includes","indexOf","intersection","invertBy","invoke","invokeMap","isEqual","isMatch","join","keyBy","lastIndexOf","lt","lte","map","mapKeys","mapValues","matchesProperty","maxBy","meanBy","merge","mergeAllWith","minBy","multiply","nth","omit","omitBy","overArgs","pad","padEnd","padStart","parseInt","partial","partialRight","partition","pick","pickBy","propertyOf","pull","pullAll","pullAt","random","range","rangeRight","rearg","reject","remove","repeat","restFrom","result","sampleSize","some","sortBy","sortedIndex","sortedIndexOf","sortedLastIndex","sortedLastIndexOf","sortedUniqBy","split","spreadFrom","startsWith","subtract","sumBy","take","takeRight","takeRightWhile","takeWhile","tap","throttle","thru","times","trimChars","trimCharsEnd","trimCharsStart","truncate","union","uniqBy","uniqWith","unset","unzipWith","without","wrap","xor","zip","zipObject","zipObjectDeep"],3:["assignInWith","assignWith","clamp","differenceBy","differenceWith","findFrom","findIndexFrom","findLastFrom","findLastIndexFrom","getOr","includesFrom","indexOfFrom","inRange","intersectionBy","intersectionWith","invokeArgs","invokeArgsMap","isEqualWith","isMatchWith","flatMapDepth","lastIndexOfFrom","mergeWith","orderBy","padChars","padCharsEnd","padCharsStart","pullAllBy","pullAllWith","rangeStep","rangeStepRight","reduce","reduceRight","replace","set","slice","sortedIndexBy","sortedLastIndexBy","transform","unionBy","unionWith","update","xorBy","xorWith","zipWith"],4:["fill","setWith","updateWith"]},r.aryRearg={2:[1,0],3:[2,0,1],4:[3,2,0,1]},r.iterateeAry={dropRightWhile:1,dropWhile:1,every:1,filter:1,find:1,findFrom:1,findIndex:1,findIndexFrom:1,findKey:1,findLast:1,findLastFrom:1,findLastIndex:1,findLastIndexFrom:1,findLastKey:1,flatMap:1,flatMapDeep:1,flatMapDepth:1,forEach:1,forEachRight:1,forIn:1,forInRight:1,forOwn:1,forOwnRight:1,map:1,mapKeys:1,mapValues:1,partition:1,reduce:2,reduceRight:2,reject:1,remove:1,some:1,takeRightWhile:1,takeWhile:1,times:1,transform:2},r.iterateeRearg={mapKeys:[1],reduceRight:[1,0]},r.methodRearg={assignInAllWith:[1,0],assignInWith:[1,2,0],assignAllWith:[1,0],assignWith:[1,2,0],differenceBy:[1,2,0],differenceWith:[1,2,0],getOr:[2,1,0],intersectionBy:[1,2,0],intersectionWith:[1,2,0],isEqualWith:[1,2,0],isMatchWith:[2,1,0],mergeAllWith:[1,0],mergeWith:[1,2,0],padChars:[2,1,0],padCharsEnd:[2,1,0],padCharsStart:[2,1,0],pullAllBy:[2,1,0],pullAllWith:[2,1,0],rangeStep:[1,2,0],rangeStepRight:[1,2,0],setWith:[3,1,2,0],sortedIndexBy:[2,1,0],sortedLastIndexBy:[2,1,0],unionBy:[1,2,0],unionWith:[1,2,0],updateWith:[3,1,2,0],xorBy:[1,2,0],xorWith:[1,2,0],zipWith:[1,2,0]},r.methodSpread={assignAll:{start:0},assignAllWith:{start:0},assignInAll:{start:0},assignInAllWith:{start:0},defaultsAll:{start:0},defaultsDeepAll:{start:0},invokeArgs:{start:2},invokeArgsMap:{start:2},mergeAll:{start:0},mergeAllWith:{start:0},partial:{start:1},partialRight:{start:1},without:{start:1},zipAll:{start:0}},r.mutate={array:{fill:!0,pull:!0,pullAll:!0,pullAllBy:!0,pullAllWith:!0,pullAt:!0,remove:!0,reverse:!0},object:{assign:!0,assignAll:!0,assignAllWith:!0,assignIn:!0,assignInAll:!0,assignInAllWith:!0,assignInWith:!0,assignWith:!0,defaults:!0,defaultsAll:!0,defaultsDeep:!0,defaultsDeepAll:!0,merge:!0,mergeAll:!0,mergeAllWith:!0,mergeWith:!0},set:{set:!0,setWith:!0,unset:!0,update:!0,updateWith:!0}},r.realToAlias=function(){var e=Object.prototype.hasOwnProperty,t=r.aliasToReal,n={};for(var i in t){var s=t[i];e.call(n,s)?n[s].push(i):n[s]=[i]}return n}(),r.remap={assignAll:"assign",assignAllWith:"assignWith",assignInAll:"assignIn",assignInAllWith:"assignInWith",curryN:"curry",curryRightN:"curryRight",defaultsAll:"defaults",defaultsDeepAll:"defaultsDeep",findFrom:"find",findIndexFrom:"findIndex",findLastFrom:"findLast",findLastIndexFrom:"findLastIndex",getOr:"get",includesFrom:"includes",indexOfFrom:"indexOf",invokeArgs:"invoke",invokeArgsMap:"invokeMap",lastIndexOfFrom:"lastIndexOf",mergeAll:"merge",mergeAllWith:"mergeWith",padChars:"pad",padCharsEnd:"padEnd",padCharsStart:"padStart",propertyOf:"get",rangeStep:"range",rangeStepRight:"rangeRight",restFrom:"rest",spreadFrom:"spread",trimChars:"trim",trimCharsEnd:"trimEnd",trimCharsStart:"trimStart",zipAll:"zip"},r.skipFixed={castArray:!0,flow:!0,flowRight:!0,iteratee:!0,mixin:!0,rearg:!0,runInContext:!0},r.skipRearg={add:!0,assign:!0,assignIn:!0,bind:!0,bindKey:!0,concat:!0,difference:!0,divide:!0,eq:!0,gt:!0,gte:!0,isEqual:!0,lt:!0,lte:!0,matchesProperty:!0,merge:!0,multiply:!0,overArgs:!0,partial:!0,partialRight:!0,propertyOf:!0,random:!0,range:!0,rangeRight:!0,subtract:!0,zip:!0,zipObject:!0,zipObjectDeep:!0}})(VQ);var wC,s9;function JO(){return s9||(s9=1,wC={}),wC}var sn=VQ,p6e=JO(),a9=Array.prototype.push;function m6e(r,e){return e==2?function(t,n){return r.apply(void 0,arguments)}:function(t){return r.apply(void 0,arguments)}}function TC(r,e){return e==2?function(t,n){return r(t,n)}:function(t){return r(t)}}function o9(r){for(var e=r?r.length:0,t=Array(e);e--;)t[e]=r[e];return t}function g6e(r){return function(e){return r({},e)}}function v6e(r,e){return function(){for(var t=arguments.length,n=t-1,i=Array(t);t--;)i[t]=arguments[t];var s=i[e],a=i.slice(0,e);return s&&a9.apply(a,s),e!=n&&a9.apply(a,i.slice(e+1)),r.apply(this,a)}}function SC(r,e){return function(){var t=arguments.length;if(t){for(var n=Array(t);t--;)n[t]=arguments[t];var i=n[0]=e.apply(void 0,n);return r.apply(void 0,n),i}}}function YI(r,e,t,n){var i=typeof e=="function",s=e===Object(e);if(s&&(n=t,t=e,e=void 0),t==null)throw new TypeError;n||(n={});var a={cap:"cap"in n?n.cap:!0,curry:"curry"in n?n.curry:!0,fixed:"fixed"in n?n.fixed:!0,immutable:"immutable"in n?n.immutable:!0,rearg:"rearg"in n?n.rearg:!0},o=i?t:p6e,l="curry"in n&&n.curry,c="fixed"in n&&n.fixed,u="rearg"in n&&n.rearg,d=i?t.runInContext():void 0,h=i?t:{ary:r.ary,assign:r.assign,clone:r.clone,curry:r.curry,forEach:r.forEach,isArray:r.isArray,isError:r.isError,isFunction:r.isFunction,isWeakMap:r.isWeakMap,iteratee:r.iteratee,keys:r.keys,rearg:r.rearg,toInteger:r.toInteger,toPath:r.toPath},f=h.ary,m=h.assign,g=h.clone,y=h.curry,b=h.forEach,E=h.isArray,w=h.isError,A=h.isFunction,S=h.isWeakMap,_=h.keys,C=h.rearg,k=h.toInteger,D=h.toPath,I=_(sn.aryMethod),L={castArray:function(ae){return function(){var ie=arguments[0];return E(ie)?ae(o9(ie)):ae.apply(void 0,arguments)}},iteratee:function(ae){return function(){var ie=arguments[0],ee=arguments[1],be=ae(ie,ee),we=be.length;return a.cap&&typeof ee=="number"?(ee=ee>2?ee-2:1,we&&we<=ee?be:TC(be,ee)):be}},mixin:function(ae){return function(ie){var ee=this;if(!A(ee))return ae(ee,Object(ie));var be=[];return b(_(ie),function(we){A(ie[we])&&be.push([we,ee.prototype[we]])}),ae(ee,Object(ie)),b(be,function(we){var Re=we[1];A(Re)?ee.prototype[we[0]]=Re:delete ee.prototype[we[0]]}),ee}},nthArg:function(ae){return function(ie){var ee=ie<0?1:k(ie)+1;return y(ae(ie),ee)}},rearg:function(ae){return function(ie,ee){var be=ee?ee.length:0;return y(ae(ie,ee),be)}},runInContext:function(ae){return function(ie){return YI(r,ae(ie),n)}}};function M(ae,ie){if(a.cap){var ee=sn.iterateeRearg[ae];if(ee)return Y(ie,ee);var be=!i&&sn.iterateeAry[ae];if(be)return V(ie,be)}return ie}function F(ae,ie,ee){return l||a.curry&&ee>1?y(ie,ee):ie}function U(ae,ie,ee){if(a.fixed&&(c||!sn.skipFixed[ae])){var be=sn.methodSpread[ae],we=be&&be.start;return we===void 0?f(ie,ee):v6e(ie,we)}return ie}function W(ae,ie,ee){return a.rearg&&ee>1&&(u||!sn.skipRearg[ae])?C(ie,sn.methodRearg[ae]||sn.aryRearg[ee]):ie}function j(ae,ie){ie=D(ie);for(var ee=-1,be=ie.length,we=be-1,Re=g(Object(ae)),Oe=Re;Oe!=null&&++ee<be;){var me=ie[ee],Ue=Oe[me];Ue!=null&&!(A(Ue)||w(Ue)||S(Ue))&&(Oe[me]=g(ee==we?Ue:Object(Ue))),Oe=Oe[me]}return Re}function z(ae){return ne.runInContext.convert(ae)(void 0)}function Q(ae,ie){var ee=sn.aliasToReal[ae]||ae,be=sn.remap[ee]||ee,we=n;return function(Re){var Oe=i?d:h,me=i?d[be]:ie,Ue=m(m({},we),Re);return YI(Oe,ee,me,Ue)}}function V(ae,ie){return J(ae,function(ee){return typeof ee=="function"?TC(ee,ie):ee})}function Y(ae,ie){return J(ae,function(ee){var be=ie.length;return m6e(C(TC(ee,be),ie),be)})}function J(ae,ie){return function(){var ee=arguments.length;if(!ee)return ae();for(var be=Array(ee);ee--;)be[ee]=arguments[ee];var we=a.rearg?0:ee-1;return be[we]=ie(be[we]),ae.apply(void 0,be)}}function ue(ae,ie,ee){var be,we=sn.aliasToReal[ae]||ae,Re=ie,Oe=L[we];return Oe?Re=Oe(ie):a.immutable&&(sn.mutate.array[we]?Re=SC(ie,o9):sn.mutate.object[we]?Re=SC(ie,g6e(ie)):sn.mutate.set[we]&&(Re=SC(ie,j))),b(I,function(me){return b(sn.aryMethod[me],function(Ue){if(we==Ue){var Se=sn.methodSpread[we],et=Se&&Se.afterRearg;return be=et?U(we,W(we,Re,me),me):W(we,U(we,Re,me),me),be=M(we,be),be=F(we,be,me),!1}}),!be}),be||(be=Re),be==ie&&(be=l?y(be,1):function(){return ie.apply(this,arguments)}),be.convert=Q(we,ie),be.placeholder=ie.placeholder=ee,be}if(!s)return ue(e,t,o);var ne=t,ge=[];return b(I,function(ae){b(sn.aryMethod[ae],function(ie){var ee=ne[sn.remap[ie]||ie];ee&&ge.push([ie,ue(ie,ee,ne)])})}),b(_(ne),function(ae){var ie=ne[ae];if(typeof ie=="function"){for(var ee=ge.length;ee--;)if(ge[ee][0]==ae)return;ie.convert=Q(ae,ie),ge.push([ae,ie])}}),b(ge,function(ae){ne[ae[0]]=ae[1]}),ne.convert=z,ne.placeholder=ne,b(_(ne),function(ae){b(sn.realToAlias[ae]||[],function(ie){ne[ie]=ne[ae]})}),ne}var y6e=YI,b6e=Kd,E6e=Bi,x6e=b6e(E6e,"WeakMap"),GQ=x6e,AC,l9;function qQ(){if(l9)return AC;l9=1;var r=GQ,e=r&&new r;return AC=e,AC}var w6e=ZT,c9=qQ(),T6e=c9?function(r,e){return c9.set(r,e),r}:w6e,jQ=T6e,S6e=zT,A6e=os;function _6e(r){return function(){var e=arguments;switch(e.length){case 0:return new r;case 1:return new r(e[0]);case 2:return new r(e[0],e[1]);case 3:return new r(e[0],e[1],e[2]);case 4:return new r(e[0],e[1],e[2],e[3]);case 5:return new r(e[0],e[1],e[2],e[3],e[4]);case 6:return new r(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new r(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var t=S6e(r.prototype),n=r.apply(t,e);return A6e(n)?n:t}}var uS=_6e,C6e=uS,R6e=Bi,k6e=1;function I6e(r,e,t){var n=e&k6e,i=C6e(r);function s(){var a=this&&this!==R6e&&this instanceof s?i:r;return a.apply(n?t:this,arguments)}return s}var $6e=I6e,D6e=Math.max;function L6e(r,e,t,n){for(var i=-1,s=r.length,a=t.length,o=-1,l=e.length,c=D6e(s-a,0),u=Array(l+c),d=!n;++o<l;)u[o]=e[o];for(;++i<a;)(d||i<s)&&(u[t[i]]=r[i]);for(;c--;)u[o++]=r[i++];return u}var KQ=L6e,O6e=Math.max;function P6e(r,e,t,n){for(var i=-1,s=r.length,a=-1,o=t.length,l=-1,c=e.length,u=O6e(s-o,0),d=Array(u+c),h=!n;++i<u;)d[i]=r[i];for(var f=i;++l<c;)d[f+l]=e[l];for(;++a<o;)(h||i<s)&&(d[f+t[a]]=r[i++]);return d}var zQ=P6e;function M6e(r,e){for(var t=r.length,n=0;t--;)r[t]===e&&++n;return n}var N6e=M6e,_C,u9;function eP(){if(u9)return _C;u9=1;function r(){}return _C=r,_C}var CC,d9;function tP(){if(d9)return CC;d9=1;var r=zT,e=eP(),t=4294967295;function n(i){this.__wrapped__=i,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=t,this.__views__=[]}return n.prototype=r(e.prototype),n.prototype.constructor=n,CC=n,CC}function F6e(){}var B6e=F6e,RC,h9;function rP(){if(h9)return RC;h9=1;var r=qQ(),e=B6e,t=r?function(n){return r.get(n)}:e;return RC=t,RC}var kC,f9;function U6e(){if(f9)return kC;f9=1;var r={};return kC=r,kC}var IC,p9;function YQ(){if(p9)return IC;p9=1;var r=U6e(),e=Object.prototype,t=e.hasOwnProperty;function n(i){for(var s=i.name+"",a=r[s],o=t.call(r,s)?a.length:0;o--;){var l=a[o],c=l.func;if(c==null||c==i)return l.name}return s}return IC=n,IC}var $C,m9;function nP(){if(m9)return $C;m9=1;var r=zT,e=eP();function t(n,i){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!i,this.__index__=0,this.__values__=void 0}return t.prototype=r(e.prototype),t.prototype.constructor=t,$C=t,$C}var DC,g9;function W6e(){if(g9)return DC;g9=1;var r=tP(),e=nP(),t=Nv;function n(i){if(i instanceof r)return i.clone();var s=new e(i.__wrapped__,i.__chain__);return s.__actions__=t(i.__actions__),s.__index__=i.__index__,s.__values__=i.__values__,s}return DC=n,DC}var LC,v9;function H6e(){if(v9)return LC;v9=1;var r=tP(),e=nP(),t=eP(),n=yi,i=Ms,s=W6e(),a=Object.prototype,o=a.hasOwnProperty;function l(c){if(i(c)&&!n(c)&&!(c instanceof r)){if(c instanceof e)return c;if(o.call(c,"__wrapped__"))return s(c)}return new e(c)}return l.prototype=t.prototype,l.prototype.constructor=l,LC=l,LC}var OC,y9;function QQ(){if(y9)return OC;y9=1;var r=tP(),e=rP(),t=YQ(),n=H6e();function i(s){var a=t(s),o=n[a];if(typeof o!="function"||!(a in r.prototype))return!1;if(s===o)return!0;var l=e(o);return!!l&&s===l[0]}return OC=i,OC}var V6e=jQ,G6e=SY,q6e=G6e(V6e),XQ=q6e,j6e=/\{\n\/\* \[wrapped with (.+)\] \*/,K6e=/,? & /;function z6e(r){var e=r.match(j6e);return e?e[1].split(K6e):[]}var Y6e=z6e,Q6e=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;function X6e(r,e){var t=e.length;if(!t)return r;var n=t-1;return e[n]=(t>1?"& ":"")+e[n],e=e.join(t>2?", ":" "),r.replace(Q6e,`{
/* [wrapped with `+e+`] */
`)}var Z6e=X6e;function J6e(r,e){for(var t=-1,n=r==null?0:r.length;++t<n&&e(r[t],t,r)!==!1;);return r}var iP=J6e,e9e=i4e;function t9e(r,e){var t=r==null?0:r.length;return!!t&&e9e(r,e,0)>-1}var r9e=t9e,n9e=iP,i9e=r9e,s9e=1,a9e=2,o9e=8,l9e=16,c9e=32,u9e=64,d9e=128,h9e=256,f9e=512,p9e=[["ary",d9e],["bind",s9e],["bindKey",a9e],["curry",o9e],["curryRight",l9e],["flip",f9e],["partial",c9e],["partialRight",u9e],["rearg",h9e]];function m9e(r,e){return n9e(p9e,function(t){var n="_."+t[0];e&t[1]&&!i9e(r,n)&&r.push(n)}),r.sort()}var g9e=m9e,v9e=Y6e,y9e=Z6e,b9e=RO,E9e=g9e;function x9e(r,e,t){var n=e+"";return b9e(r,y9e(n,E9e(v9e(n),t)))}var ZQ=x9e,w9e=QQ(),T9e=XQ,S9e=ZQ,A9e=4,_9e=8,b9=32,E9=64;function C9e(r,e,t,n,i,s,a,o,l,c){var u=e&_9e,d=u?a:void 0,h=u?void 0:a,f=u?s:void 0,m=u?void 0:s;e|=u?b9:E9,e&=~(u?E9:b9),e&A9e||(e&=-4);var g=[r,e,i,f,d,m,h,o,l,c],y=t.apply(void 0,g);return w9e(r)&&T9e(y,g),y.placeholder=n,S9e(y,r,e)}var JQ=C9e;function R9e(r){var e=r;return e.placeholder}var eX=R9e,k9e=Nv,I9e=Fv,$9e=Math.min;function D9e(r,e){for(var t=r.length,n=$9e(e.length,t),i=k9e(r);n--;){var s=e[n];r[n]=I9e(s,t)?i[s]:void 0}return r}var L9e=D9e,x9="__lodash_placeholder__";function O9e(r,e){for(var t=-1,n=r.length,i=0,s=[];++t<n;){var a=r[t];(a===e||a===x9)&&(r[t]=x9,s[i++]=t)}return s}var sP=O9e,P9e=KQ,M9e=zQ,N9e=N6e,w9=uS,F9e=JQ,B9e=eX,U9e=L9e,W9e=sP,H9e=Bi,V9e=1,G9e=2,q9e=8,j9e=16,K9e=128,z9e=512;function tX(r,e,t,n,i,s,a,o,l,c){var u=e&K9e,d=e&V9e,h=e&G9e,f=e&(q9e|j9e),m=e&z9e,g=h?void 0:w9(r);function y(){for(var b=arguments.length,E=Array(b),w=b;w--;)E[w]=arguments[w];if(f)var A=B9e(y),S=N9e(E,A);if(n&&(E=P9e(E,n,i,f)),s&&(E=M9e(E,s,a,f)),b-=S,f&&b<c){var _=W9e(E,A);return F9e(r,e,tX,y.placeholder,t,E,_,o,l,c-b)}var C=d?t:this,k=h?C[r]:r;return b=E.length,o?E=U9e(E,o):m&&b>1&&E.reverse(),u&&l<b&&(E.length=l),this&&this!==H9e&&this instanceof y&&(k=g||w9(k)),k.apply(C,E)}return y}var rX=tX,Y9e=JT,Q9e=uS,X9e=rX,Z9e=JQ,J9e=eX,e7e=sP,t7e=Bi;function r7e(r,e,t){var n=Q9e(r);function i(){for(var s=arguments.length,a=Array(s),o=s,l=J9e(i);o--;)a[o]=arguments[o];var c=s<3&&a[0]!==l&&a[s-1]!==l?[]:e7e(a,l);if(s-=c.length,s<t)return Z9e(r,e,X9e,i.placeholder,void 0,a,c,void 0,void 0,t-s);var u=this&&this!==t7e&&this instanceof i?n:r;return Y9e(u,this,a)}return i}var n7e=r7e,i7e=JT,s7e=uS,a7e=Bi,o7e=1;function l7e(r,e,t,n){var i=e&o7e,s=s7e(r);function a(){for(var o=-1,l=arguments.length,c=-1,u=n.length,d=Array(u+l),h=this&&this!==a7e&&this instanceof a?s:r;++c<u;)d[c]=n[c];for(;l--;)d[c++]=arguments[++o];return i7e(h,i?t:this,d)}return a}var c7e=l7e,u7e=KQ,d7e=zQ,T9=sP,S9="__lodash_placeholder__",PC=1,h7e=2,f7e=4,A9=8,Rm=128,_9=256,p7e=Math.min;function m7e(r,e){var t=r[1],n=e[1],i=t|n,s=i<(PC|h7e|Rm),a=n==Rm&&t==A9||n==Rm&&t==_9&&r[7].length<=e[8]||n==(Rm|_9)&&e[7].length<=e[8]&&t==A9;if(!(s||a))return r;n&PC&&(r[2]=e[2],i|=t&PC?0:f7e);var o=e[3];if(o){var l=r[3];r[3]=l?u7e(l,o,e[4]):o,r[4]=l?T9(r[3],S9):e[4]}return o=e[5],o&&(l=r[5],r[5]=l?d7e(l,o,e[6]):o,r[6]=l?T9(r[5],S9):e[6]),o=e[7],o&&(r[7]=o),n&Rm&&(r[8]=r[8]==null?e[8]:p7e(r[8],e[8])),r[9]==null&&(r[9]=e[9]),r[0]=e[0],r[1]=i,r}var g7e=m7e,v7e=N4e,y7e=/^\s+/;function b7e(r){return r&&r.slice(0,v7e(r)+1).replace(y7e,"")}var E7e=b7e,x7e=E7e,C9=os,w7e=Uv,R9=NaN,T7e=/^[-+]0x[0-9a-f]+$/i,S7e=/^0b[01]+$/i,A7e=/^0o[0-7]+$/i,_7e=parseInt;function C7e(r){if(typeof r=="number")return r;if(w7e(r))return R9;if(C9(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=C9(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=x7e(r);var t=S7e.test(r);return t||A7e.test(r)?_7e(r.slice(2),t?2:8):T7e.test(r)?R9:+r}var R7e=C7e,k7e=R7e,I7e=1/0,$7e=17976931348623157e292;function D7e(r){if(!r)return r===0?r:0;if(r=k7e(r),r===I7e||r===-1/0){var e=r<0?-1:1;return e*$7e}return r===r?r:0}var L7e=D7e,O7e=L7e;function P7e(r){var e=O7e(r),t=e%1;return e===e?t?e-t:e:0}var nX=P7e,M7e=jQ,N7e=$6e,F7e=n7e,B7e=rX,U7e=c7e,W7e=rP(),H7e=g7e,V7e=XQ,G7e=ZQ,k9=nX,q7e="Expected a function",I9=1,j7e=2,$9=8,D9=16,L9=32,K7e=64,O9=Math.max;function z7e(r,e,t,n,i,s,a,o){var l=e&j7e;if(!l&&typeof r!="function")throw new TypeError(q7e);var c=n?n.length:0;if(c||(e&=-97,n=i=void 0),a=a===void 0?a:O9(k9(a),0),o=o===void 0?o:k9(o),c-=i?i.length:0,e&K7e){var u=n,d=i;n=i=void 0}var h=l?void 0:W7e(r),f=[r,e,t,n,i,u,d,s,a,o];if(h&&H7e(f,h),r=f[0],e=f[1],t=f[2],n=f[3],i=f[4],o=f[9]=f[9]===void 0?l?0:r.length:O9(f[9]-c,0),!o&&e&($9|D9)&&(e&=-25),!e||e==I9)var m=N7e(r,e,t);else e==$9||e==D9?m=F7e(r,e,o):(e==L9||e==(I9|L9))&&!i.length?m=U7e(r,e,t,n):m=B7e.apply(void 0,f);var g=h?M7e:V7e;return G7e(g(m,f),r,e)}var aP=z7e,Y7e=aP,Q7e=128;function X7e(r,e,t){return e=t?void 0:e,e=r&&e==null?r.length:e,Y7e(r,Q7e,void 0,void 0,void 0,void 0,e)}var Z7e=X7e,J7e=gY,eBe=J7e(Object.keys,Object),tBe=eBe,rBe=EO,nBe=tBe,iBe=Object.prototype,sBe=iBe.hasOwnProperty;function aBe(r){if(!rBe(r))return nBe(r);var e=[];for(var t in Object(r))sBe.call(r,t)&&t!="constructor"&&e.push(t);return e}var iX=aBe,oBe=xY,lBe=iX,cBe=QT;function uBe(r){return cBe(r)?oBe(r):lBe(r)}var jv=uBe,dBe=qp,hBe=jv;function fBe(r,e){return r&&dBe(e,hBe(e),r)}var sX=fBe,pBe=qp,mBe=Bv;function gBe(r,e){return r&&pBe(e,mBe(e),r)}var vBe=gBe;function yBe(r,e){for(var t=-1,n=r==null?0:r.length,i=0,s=[];++t<n;){var a=r[t];e(a,t,r)&&(s[i++]=a)}return s}var bBe=yBe;function EBe(){return[]}var aX=EBe,xBe=bBe,wBe=aX,TBe=Object.prototype,SBe=TBe.propertyIsEnumerable,P9=Object.getOwnPropertySymbols,ABe=P9?function(r){return r==null?[]:(r=Object(r),xBe(P9(r),function(e){return SBe.call(r,e)}))}:wBe,oP=ABe,_Be=qp,CBe=oP;function RBe(r,e){return _Be(r,CBe(r),e)}var kBe=RBe,IBe=DO,$Be=bO,DBe=oP,LBe=aX,OBe=Object.getOwnPropertySymbols,PBe=OBe?function(r){for(var e=[];r;)IBe(e,DBe(r)),r=$Be(r);return e}:LBe,oX=PBe,MBe=qp,NBe=oX;function FBe(r,e){return MBe(r,NBe(r),e)}var BBe=FBe,UBe=DO,WBe=yi;function HBe(r,e,t){var n=e(r);return WBe(r)?n:UBe(n,t(r))}var lX=HBe,VBe=lX,GBe=oP,qBe=jv;function jBe(r){return VBe(r,qBe,GBe)}var cX=jBe,KBe=lX,zBe=oX,YBe=Bv;function QBe(r){return KBe(r,YBe,zBe)}var uX=QBe,XBe=Kd,ZBe=Bi,JBe=XBe(ZBe,"DataView"),eUe=JBe,tUe=Kd,rUe=Bi,nUe=tUe(rUe,"Promise"),iUe=nUe,sUe=Kd,aUe=Bi,oUe=sUe(aUe,"Set"),lUe=oUe,QI=eUe,XI=gO,ZI=iUe,JI=lUe,e$=GQ,dX=jd,Qp=cY,M9="[object Map]",cUe="[object Object]",N9="[object Promise]",F9="[object Set]",B9="[object WeakMap]",U9="[object DataView]",uUe=Qp(QI),dUe=Qp(XI),hUe=Qp(ZI),fUe=Qp(JI),pUe=Qp(e$),Tu=dX;(QI&&Tu(new QI(new ArrayBuffer(1)))!=U9||XI&&Tu(new XI)!=M9||ZI&&Tu(ZI.resolve())!=N9||JI&&Tu(new JI)!=F9||e$&&Tu(new e$)!=B9)&&(Tu=function(r){var e=dX(r),t=e==cUe?r.constructor:void 0,n=t?Qp(t):"";if(n)switch(n){case uUe:return U9;case dUe:return M9;case hUe:return N9;case fUe:return F9;case pUe:return B9}return e});var Kv=Tu,mUe=Object.prototype,gUe=mUe.hasOwnProperty;function vUe(r){var e=r.length,t=new r.constructor(e);return e&&typeof r[0]=="string"&&gUe.call(r,"index")&&(t.index=r.index,t.input=r.input),t}var yUe=vUe,bUe=yO;function EUe(r,e){var t=e?bUe(r.buffer):r.buffer;return new r.constructor(t,r.byteOffset,r.byteLength)}var xUe=EUe,wUe=/\w*$/;function TUe(r){var e=new r.constructor(r.source,wUe.exec(r));return e.lastIndex=r.lastIndex,e}var SUe=TUe,W9=Up,H9=W9?W9.prototype:void 0,V9=H9?H9.valueOf:void 0;function AUe(r){return V9?Object(V9.call(r)):{}}var _Ue=AUe,CUe=yO,RUe=xUe,kUe=SUe,IUe=_Ue,$Ue=mY,DUe="[object Boolean]",LUe="[object Date]",OUe="[object Map]",PUe="[object Number]",MUe="[object RegExp]",NUe="[object Set]",FUe="[object String]",BUe="[object Symbol]",UUe="[object ArrayBuffer]",WUe="[object DataView]",HUe="[object Float32Array]",VUe="[object Float64Array]",GUe="[object Int8Array]",qUe="[object Int16Array]",jUe="[object Int32Array]",KUe="[object Uint8Array]",zUe="[object Uint8ClampedArray]",YUe="[object Uint16Array]",QUe="[object Uint32Array]";function XUe(r,e,t){var n=r.constructor;switch(e){case UUe:return CUe(r);case DUe:case LUe:return new n(+r);case WUe:return RUe(r,t);case HUe:case VUe:case GUe:case qUe:case jUe:case KUe:case zUe:case YUe:case QUe:return $Ue(r,t);case OUe:return new n;case PUe:case FUe:return new n(r);case MUe:return kUe(r);case NUe:return new n;case BUe:return IUe(r)}}var ZUe=XUe,JUe=Kv,eWe=Ms,tWe="[object Map]";function rWe(r){return eWe(r)&&JUe(r)==tWe}var nWe=rWe,iWe=nWe,sWe=TO,G9=SO,q9=G9&&G9.isMap,aWe=q9?sWe(q9):iWe,oWe=aWe,lWe=Kv,cWe=Ms,uWe="[object Set]";function dWe(r){return cWe(r)&&lWe(r)==uWe}var hWe=dWe,fWe=hWe,pWe=TO,j9=SO,K9=j9&&j9.isSet,mWe=K9?pWe(K9):fWe,gWe=mWe,vWe=KT,yWe=iP,bWe=_O,EWe=sX,xWe=vBe,wWe=fY,TWe=Nv,SWe=kBe,AWe=BBe,_We=cX,CWe=uX,RWe=Kv,kWe=yUe,IWe=ZUe,$We=vY,DWe=yi,LWe=XT,OWe=oWe,PWe=os,MWe=gWe,NWe=jv,FWe=Bv,BWe=1,UWe=2,WWe=4,hX="[object Arguments]",HWe="[object Array]",VWe="[object Boolean]",GWe="[object Date]",qWe="[object Error]",fX="[object Function]",jWe="[object GeneratorFunction]",KWe="[object Map]",zWe="[object Number]",pX="[object Object]",YWe="[object RegExp]",QWe="[object Set]",XWe="[object String]",ZWe="[object Symbol]",JWe="[object WeakMap]",eHe="[object ArrayBuffer]",tHe="[object DataView]",rHe="[object Float32Array]",nHe="[object Float64Array]",iHe="[object Int8Array]",sHe="[object Int16Array]",aHe="[object Int32Array]",oHe="[object Uint8Array]",lHe="[object Uint8ClampedArray]",cHe="[object Uint16Array]",uHe="[object Uint32Array]",or={};or[hX]=or[HWe]=or[eHe]=or[tHe]=or[VWe]=or[GWe]=or[rHe]=or[nHe]=or[iHe]=or[sHe]=or[aHe]=or[KWe]=or[zWe]=or[pX]=or[YWe]=or[QWe]=or[XWe]=or[ZWe]=or[oHe]=or[lHe]=or[cHe]=or[uHe]=!0;or[qWe]=or[fX]=or[JWe]=!1;function F1(r,e,t,n,i,s){var a,o=e&BWe,l=e&UWe,c=e&WWe;if(t&&(a=i?t(r,n,i,s):t(r)),a!==void 0)return a;if(!PWe(r))return r;var u=DWe(r);if(u){if(a=kWe(r),!o)return TWe(r,a)}else{var d=RWe(r),h=d==fX||d==jWe;if(LWe(r))return wWe(r,o);if(d==pX||d==hX||h&&!i){if(a=l||h?{}:$We(r),!o)return l?AWe(r,xWe(a,r)):SWe(r,EWe(a,r))}else{if(!or[d])return i?r:{};a=IWe(r,d,o)}}s||(s=new vWe);var f=s.get(r);if(f)return f;s.set(r,a),MWe(r)?r.forEach(function(y){a.add(F1(y,e,t,y,r,s))}):OWe(r)&&r.forEach(function(y,b){a.set(b,F1(y,e,t,b,r,s))});var m=c?l?CWe:_We:l?FWe:NWe,g=u?void 0:m(r);return yWe(g||r,function(y,b){g&&(b=y,y=r[b]),bWe(a,b,F1(y,e,t,b,r,s))}),a}var lP=F1,dHe=lP,hHe=4;function fHe(r){return dHe(r,hHe)}var pHe=fHe,mHe=aP,gHe=8;function cP(r,e,t){e=t?void 0:e;var n=mHe(r,gHe,void 0,void 0,void 0,void 0,void 0,e);return n.placeholder=cP.placeholder,n}cP.placeholder={};var vHe=cP,yHe=jd,bHe=Ms,EHe=wO,xHe="[object DOMException]",wHe="[object Error]";function THe(r){if(!bHe(r))return!1;var e=yHe(r);return e==wHe||e==xHe||typeof r.message=="string"&&typeof r.name=="string"&&!EHe(r)}var SHe=THe,AHe=Kv,_He=Ms,CHe="[object WeakMap]";function RHe(r){return _He(r)&&AHe(r)==CHe}var kHe=RHe,IHe="__lodash_hash_undefined__";function $He(r){return this.__data__.set(r,IHe),this}var DHe=$He;function LHe(r){return this.__data__.has(r)}var OHe=LHe,PHe=vO,MHe=DHe,NHe=OHe;function nw(r){var e=-1,t=r==null?0:r.length;for(this.__data__=new PHe;++e<t;)this.add(r[e])}nw.prototype.add=nw.prototype.push=MHe;nw.prototype.has=NHe;var FHe=nw;function BHe(r,e){for(var t=-1,n=r==null?0:r.length;++t<n;)if(e(r[t],t,r))return!0;return!1}var UHe=BHe;function WHe(r,e){return r.has(e)}var HHe=WHe,VHe=FHe,GHe=UHe,qHe=HHe,jHe=1,KHe=2;function zHe(r,e,t,n,i,s){var a=t&jHe,o=r.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var c=s.get(r),u=s.get(e);if(c&&u)return c==e&&u==r;var d=-1,h=!0,f=t&KHe?new VHe:void 0;for(s.set(r,e),s.set(e,r);++d<o;){var m=r[d],g=e[d];if(n)var y=a?n(g,m,d,e,r,s):n(m,g,d,r,e,s);if(y!==void 0){if(y)continue;h=!1;break}if(f){if(!GHe(e,function(b,E){if(!qHe(f,E)&&(m===b||i(m,b,t,n,s)))return f.push(E)})){h=!1;break}}else if(!(m===g||i(m,g,t,n,s))){h=!1;break}}return s.delete(r),s.delete(e),h}var mX=zHe;function YHe(r){var e=-1,t=Array(r.size);return r.forEach(function(n,i){t[++e]=[i,n]}),t}var QHe=YHe;function XHe(r){var e=-1,t=Array(r.size);return r.forEach(function(n){t[++e]=n}),t}var ZHe=XHe,z9=Up,Y9=pY,JHe=Pv,eVe=mX,tVe=QHe,rVe=ZHe,nVe=1,iVe=2,sVe="[object Boolean]",aVe="[object Date]",oVe="[object Error]",lVe="[object Map]",cVe="[object Number]",uVe="[object RegExp]",dVe="[object Set]",hVe="[object String]",fVe="[object Symbol]",pVe="[object ArrayBuffer]",mVe="[object DataView]",Q9=z9?z9.prototype:void 0,MC=Q9?Q9.valueOf:void 0;function gVe(r,e,t,n,i,s,a){switch(t){case mVe:if(r.byteLength!=e.byteLength||r.byteOffset!=e.byteOffset)return!1;r=r.buffer,e=e.buffer;case pVe:return!(r.byteLength!=e.byteLength||!s(new Y9(r),new Y9(e)));case sVe:case aVe:case cVe:return JHe(+r,+e);case oVe:return r.name==e.name&&r.message==e.message;case uVe:case hVe:return r==e+"";case lVe:var o=tVe;case dVe:var l=n&nVe;if(o||(o=rVe),r.size!=e.size&&!l)return!1;var c=a.get(r);if(c)return c==e;n|=iVe,a.set(r,e);var u=eVe(o(r),o(e),n,i,s,a);return a.delete(r),u;case fVe:if(MC)return MC.call(r)==MC.call(e)}return!1}var vVe=gVe,X9=cX,yVe=1,bVe=Object.prototype,EVe=bVe.hasOwnProperty;function xVe(r,e,t,n,i,s){var a=t&yVe,o=X9(r),l=o.length,c=X9(e),u=c.length;if(l!=u&&!a)return!1;for(var d=l;d--;){var h=o[d];if(!(a?h in e:EVe.call(e,h)))return!1}var f=s.get(r),m=s.get(e);if(f&&m)return f==e&&m==r;var g=!0;s.set(r,e),s.set(e,r);for(var y=a;++d<l;){h=o[d];var b=r[h],E=e[h];if(n)var w=a?n(E,b,h,e,r,s):n(b,E,h,r,e,s);if(!(w===void 0?b===E||i(b,E,t,n,s):w)){g=!1;break}y||(y=h=="constructor")}if(g&&!y){var A=r.constructor,S=e.constructor;A!=S&&"constructor"in r&&"constructor"in e&&!(typeof A=="function"&&A instanceof A&&typeof S=="function"&&S instanceof S)&&(g=!1)}return s.delete(r),s.delete(e),g}var wVe=xVe,NC=KT,TVe=mX,SVe=vVe,AVe=wVe,Z9=Kv,J9=yi,e7=XT,_Ve=AO,CVe=1,t7="[object Arguments]",r7="[object Array]",Ob="[object Object]",RVe=Object.prototype,n7=RVe.hasOwnProperty;function kVe(r,e,t,n,i,s){var a=J9(r),o=J9(e),l=a?r7:Z9(r),c=o?r7:Z9(e);l=l==t7?Ob:l,c=c==t7?Ob:c;var u=l==Ob,d=c==Ob,h=l==c;if(h&&e7(r)){if(!e7(e))return!1;a=!0,u=!1}if(h&&!u)return s||(s=new NC),a||_Ve(r)?TVe(r,e,t,n,i,s):SVe(r,e,l,t,n,i,s);if(!(t&CVe)){var f=u&&n7.call(r,"__wrapped__"),m=d&&n7.call(e,"__wrapped__");if(f||m){var g=f?r.value():r,y=m?e.value():e;return s||(s=new NC),i(g,y,t,n,s)}}return h?(s||(s=new NC),AVe(r,e,t,n,i,s)):!1}var IVe=kVe,$Ve=IVe,i7=Ms;function gX(r,e,t,n,i){return r===e?!0:r==null||e==null||!i7(r)&&!i7(e)?r!==r&&e!==e:$Ve(r,e,t,n,gX,i)}var vX=gX,DVe=KT,LVe=vX,OVe=1,PVe=2;function MVe(r,e,t,n){var i=t.length,s=i,a=!n;if(r==null)return!s;for(r=Object(r);i--;){var o=t[i];if(a&&o[2]?o[1]!==r[o[0]]:!(o[0]in r))return!1}for(;++i<s;){o=t[i];var l=o[0],c=r[l],u=o[1];if(a&&o[2]){if(c===void 0&&!(l in r))return!1}else{var d=new DVe;if(n)var h=n(c,u,l,r,e,d);if(!(h===void 0?LVe(u,c,OVe|PVe,n,d):h))return!1}}return!0}var NVe=MVe,FVe=os;function BVe(r){return r===r&&!FVe(r)}var yX=BVe,UVe=yX,WVe=jv;function HVe(r){for(var e=WVe(r),t=e.length;t--;){var n=e[t],i=r[n];e[t]=[n,i,UVe(i)]}return e}var VVe=HVe;function GVe(r,e){return function(t){return t==null?!1:t[r]===e&&(e!==void 0||r in Object(t))}}var bX=GVe,qVe=NVe,jVe=VVe,KVe=bX;function zVe(r){var e=jVe(r);return e.length==1&&e[0][2]?KVe(e[0][0],e[0][1]):function(t){return t===r||qVe(t,r,e)}}var YVe=zVe,QVe=eS;function XVe(r,e,t){var n=r==null?void 0:QVe(r,e);return n===void 0?t:n}var EX=XVe;const Qn=Ls(EX);var ZVe=vX,JVe=EX,eGe=DY,tGe=kO,rGe=yX,nGe=bX,iGe=zd,sGe=1,aGe=2;function oGe(r,e){return tGe(r)&&rGe(e)?nGe(iGe(r),e):function(t){var n=JVe(t,r);return n===void 0&&n===e?eGe(t,r):ZVe(e,n,sGe|aGe)}}var lGe=oGe;function cGe(r){return function(e){return e?.[r]}}var uGe=cGe,dGe=eS;function hGe(r){return function(e){return dGe(e,r)}}var fGe=hGe,pGe=uGe,mGe=fGe,gGe=kO,vGe=zd;function yGe(r){return gGe(r)?pGe(vGe(r)):mGe(r)}var bGe=yGe,EGe=YVe,xGe=lGe,wGe=ZT,TGe=yi,SGe=bGe;function AGe(r){return typeof r=="function"?r:r==null?wGe:typeof r=="object"?TGe(r)?xGe(r[0],r[1]):EGe(r):SGe(r)}var uP=AGe,_Ge=lP,CGe=uP,RGe=1;function kGe(r){return CGe(typeof r=="function"?r:_Ge(r,RGe))}var IGe=kGe,$Ge=aP,DGe=tS,LGe=256,OGe=DGe(function(r,e){return $Ge(r,LGe,void 0,void 0,void 0,e)}),PGe=OGe,MGe=$O,NGe=Nv,FGe=yi,BGe=Uv,UGe=RY,WGe=zd,HGe=jp;function VGe(r){return FGe(r)?MGe(r,WGe):BGe(r)?[r]:NGe(UGe(HGe(r)))}var GGe=VGe,qGe={ary:Z7e,assign:sX,clone:pHe,curry:vHe,forEach:iP,isArray:yi,isError:SHe,isFunction:HT,isWeakMap:kHe,iteratee:IGe,keys:iX,rearg:PGe,toInteger:nX,toPath:GGe},jGe=y6e,KGe=qGe;function zGe(r,e,t){return jGe(KGe,r,e,t)}var xX=zGe,FC,s7;function YGe(){if(s7)return FC;s7=1;var r=nP(),e=tS,t=rP(),n=YQ(),i=yi,s=QQ(),a="Expected a function",o=8,l=32,c=128,u=256;function d(h){return e(function(f){var m=f.length,g=m,y=r.prototype.thru;for(h&&f.reverse();g--;){var b=f[g];if(typeof b!="function")throw new TypeError(a);if(y&&!E&&n(b)=="wrapper")var E=new r([],!0)}for(g=E?g:m;++g<m;){b=f[g];var w=n(b),A=w=="wrapper"?t(b):void 0;A&&s(A[0])&&A[1]==(c|o|l|u)&&!A[4].length&&A[9]==1?E=E[n(A[0])].apply(E,A[3]):E=b.length==1&&s(b)?E[w]():E.thru(b)}return function(){var S=arguments,_=S[0];if(E&&S.length==1&&i(_))return E.plant(_).value();for(var C=0,k=m?f[C].apply(this,S):_;++C<m;)k=f[C].call(this,k);return k}})}return FC=d,FC}var BC,a7;function QGe(){if(a7)return BC;a7=1;var r=YGe(),e=r();return BC=e,BC}var XGe=xX,wX=XGe("flow",QGe());wX.placeholder=JO();var ZGe=wX,JGe=ZGe;const eqe=Ls(JGe),o7={TOKEN:"jwtToken"};let t$=class TX extends Error{constructor(e,t){super(e),this.name="FetchError",this.message=e,this.response=t,this.code=t?.data?.error?.status,this.status=t?.data?.error?.status,Error.captureStackTrace&&Error.captureStackTrace(this,TX)}};const tqe=r=>r instanceof t$,rqe=()=>JSON.parse(localStorage.getItem(o7.TOKEN)??sessionStorage.getItem(o7.TOKEN)??'""'),nqe=(r={})=>{const e=window.strapi.backendURL,t={Accept:"application/json","Content-Type":"application/json",Authorization:`Bearer ${rqe()}`},n=h=>h instanceof FormData,i=h=>h.charAt(0)!=="/"?`/${h}`:h,s=h=>new RegExp("^(?:[a-z+]+:)?//","i").test(h),a=h=>s(h)?h:i(h),o=async(h,f)=>{try{const m=await h.json();if(!h.ok&&m.error&&!f?.(h.status))throw new t$(m.error.message,{data:m});if(!h.ok&&!f?.(h.status))throw new t$("Unknown Server Error");return{data:m}}catch(m){if(m instanceof SyntaxError&&h.ok)return{data:[],status:h.status};throw m}},l=h=>f=>{if(h){if(typeof h=="string")return`${f}?${h}`;const m=VFe.stringify(h,{encode:!1});return`${f}?${m}`}return f},c=h=>`${e}${h}`,u=h=>eqe(a,c,l(h?.params));return{get:async(h,f)=>{const m=new Headers({...t,...f?.headers}),g=u(f),y=await fetch(g(h),{signal:f?.signal??r.signal,method:"GET",headers:m});return o(y,f?.validateStatus)},post:async(h,f,m)=>{const g=new Headers({...t,...m?.headers}),y=u(m);n(f)&&g.delete("Content-Type");const b=await fetch(y(h),{signal:m?.signal??r.signal,method:"POST",headers:g,body:n(f)?f:JSON.stringify(f)});return o(b,m?.validateStatus)},put:async(h,f,m)=>{const g=new Headers({...t,...m?.headers}),y=u(m);n(f)&&g.delete("Content-Type");const b=await fetch(y(h),{signal:m?.signal??r.signal,method:"PUT",headers:g,body:n(f)?f:JSON.stringify(f)});return o(b,m?.validateStatus)},del:async(h,f)=>{const m=new Headers({...t,...f?.headers}),g=u(f),y=await fetch(g(h),{signal:f?.signal??r.signal,method:"DELETE",headers:m});return o(y,f?.validateStatus)}}},iqe=async(r,{signal:e})=>{try{const{get:t,post:n,del:i,put:s}=nqe();if(typeof r=="string")return{data:(await t(r,{signal:e})).data};{const{url:a,method:o="GET",data:l,config:c}=r;return o==="POST"?{data:(await n(a,l,{...c,signal:e})).data}:o==="DELETE"?{data:(await i(a,{...c,signal:e})).data}:o==="PUT"?{data:(await s(a,l,{...c,signal:e})).data}:{data:(await t(a,{...c,signal:e})).data}}}catch(t){if(tqe(t))return typeof t.response?.data=="object"&&t.response?.data!==null&&"error"in t.response?.data?{data:void 0,error:t.response?.data.error}:{data:void 0,error:{name:"UnknownError",message:t.message,details:t.response,status:t.status}};const n=t;return{data:void 0,error:{name:n.name,message:n.message,stack:n.stack}}}},sqe=()=>iqe,xl=f6e({reducerPath:"adminApi",baseQuery:sqe(),tagTypes:[],endpoints:()=>({})}),l7=r=>r&&r.startsWith("/")?`${window.strapi.backendURL}${r}`:r,aqe=xl.enhanceEndpoints({addTagTypes:["ProjectSettings","LicenseLimits"]}).injectEndpoints({endpoints:r=>({init:r.query({query:()=>({url:"/admin/init",method:"GET"}),transformResponse(e){return e.data}}),information:r.query({query:()=>({url:"/admin/information",method:"GET"}),transformResponse(e){return e.data}}),telemetryProperties:r.query({query:()=>({url:"/admin/telemetry-properties",method:"GET",config:{validateStatus:e=>e<500}}),transformResponse(e){return e.data}}),projectSettings:r.query({query:()=>({url:"/admin/project-settings",method:"GET"}),providesTags:["ProjectSettings"],transformResponse(e){return{authLogo:e.authLogo?{name:e.authLogo.name,url:l7(e.authLogo.url)}:void 0,menuLogo:e.menuLogo?{name:e.menuLogo.name,url:l7(e.menuLogo.url)}:void 0}}}),updateProjectSettings:r.mutation({query:e=>({url:"/admin/project-settings",method:"POST",data:e,config:{headers:{"Content-Type":"multipart/form-data"}}}),invalidatesTags:["ProjectSettings"]}),getPlugins:r.query({query:()=>({url:"/admin/plugins",method:"GET"})}),getLicenseLimits:r.query({query:()=>({url:"/admin/license-limit-information",method:"GET"}),providesTags:["LicenseLimits"]})}),overrideExisting:!1}),{useInitQuery:bdt,useTelemetryPropertiesQuery:Edt,useInformationQuery:xdt,useProjectSettingsQuery:wdt,useUpdateProjectSettingsMutation:Tdt,useGetPluginsQuery:Sdt,useGetLicenseLimitsQuery:Adt}=aqe;var oqe=IY;function lqe(r,e,t){return r==null?r:oqe(r,e,t)}var cqe=lqe;const br=Ls(cqe);var SX={exports:{}},AX={};(function(r){/**
 * @license React
 * scheduler.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(){typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var e=!1,t=5;function n(Ce,Ne){var vt=Ce.length;Ce.push(Ne),a(Ce,Ne,vt)}function i(Ce){return Ce.length===0?null:Ce[0]}function s(Ce){if(Ce.length===0)return null;var Ne=Ce[0],vt=Ce.pop();return vt!==Ne&&(Ce[0]=vt,o(Ce,vt,0)),Ne}function a(Ce,Ne,vt){for(var ct=vt;ct>0;){var _t=ct-1>>>1,Xt=Ce[_t];if(l(Xt,Ne)>0)Ce[_t]=Ne,Ce[ct]=Xt,ct=_t;else return}}function o(Ce,Ne,vt){for(var ct=vt,_t=Ce.length,Xt=_t>>>1;ct<Xt;){var gn=(ct+1)*2-1,ba=Ce[gn],Kn=gn+1,th=Ce[Kn];if(l(ba,Ne)<0)Kn<_t&&l(th,ba)<0?(Ce[ct]=th,Ce[Kn]=Ne,ct=Kn):(Ce[ct]=ba,Ce[gn]=Ne,ct=gn);else if(Kn<_t&&l(th,Ne)<0)Ce[ct]=th,Ce[Kn]=Ne,ct=Kn;else return}}function l(Ce,Ne){var vt=Ce.sortIndex-Ne.sortIndex;return vt!==0?vt:Ce.id-Ne.id}var c=1,u=2,d=3,h=4,f=5;function m(Ce,Ne){}var g=typeof performance=="object"&&typeof performance.now=="function";if(g){var y=performance;r.unstable_now=function(){return y.now()}}else{var b=Date,E=b.now();r.unstable_now=function(){return b.now()-E}}var w=1073741823,A=-1,S=250,_=5e3,C=1e4,k=w,D=[],I=[],L=1,M=null,F=d,U=!1,W=!1,j=!1,z=typeof setTimeout=="function"?setTimeout:null,Q=typeof clearTimeout=="function"?clearTimeout:null,V=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Ce){for(var Ne=i(I);Ne!==null;){if(Ne.callback===null)s(I);else if(Ne.startTime<=Ce)s(I),Ne.sortIndex=Ne.expirationTime,n(D,Ne);else return;Ne=i(I)}}function J(Ce){if(j=!1,Y(Ce),!W)if(i(D)!==null)W=!0,Vi(ue);else{var Ne=i(I);Ne!==null&&Io(J,Ne.startTime-Ce)}}function ue(Ce,Ne){W=!1,j&&(j=!1,bi()),U=!0;var vt=F;try{var ct;if(!e)return ne(Ce,Ne)}finally{M=null,F=vt,U=!1}}function ne(Ce,Ne){var vt=Ne;for(Y(vt),M=i(D);M!==null&&!(M.expirationTime>vt&&(!Ce||Wi()));){var ct=M.callback;if(typeof ct=="function"){M.callback=null,F=M.priorityLevel;var _t=M.expirationTime<=vt,Xt=ct(_t);vt=r.unstable_now(),typeof Xt=="function"?M.callback=Xt:M===i(D)&&s(D),Y(vt)}else s(D);M=i(D)}if(M!==null)return!0;var gn=i(I);return gn!==null&&Io(J,gn.startTime-vt),!1}function ge(Ce,Ne){switch(Ce){case c:case u:case d:case h:case f:break;default:Ce=d}var vt=F;F=Ce;try{return Ne()}finally{F=vt}}function ae(Ce){var Ne;switch(F){case c:case u:case d:Ne=d;break;default:Ne=F;break}var vt=F;F=Ne;try{return Ce()}finally{F=vt}}function ie(Ce){var Ne=F;return function(){var vt=F;F=Ne;try{return Ce.apply(this,arguments)}finally{F=vt}}}function ee(Ce,Ne,vt){var ct=r.unstable_now(),_t;if(typeof vt=="object"&&vt!==null){var Xt=vt.delay;typeof Xt=="number"&&Xt>0?_t=ct+Xt:_t=ct}else _t=ct;var gn;switch(Ce){case c:gn=A;break;case u:gn=S;break;case f:gn=k;break;case h:gn=C;break;case d:default:gn=_;break}var ba=_t+gn,Kn={id:L++,callback:Ne,priorityLevel:Ce,startTime:_t,expirationTime:ba,sortIndex:-1};return _t>ct?(Kn.sortIndex=_t,n(I,Kn),i(D)===null&&Kn===i(I)&&(j?bi():j=!0,Io(J,_t-ct))):(Kn.sortIndex=ba,n(D,Kn),!W&&!U&&(W=!0,Vi(ue))),Kn}function be(){}function we(){!W&&!U&&(W=!0,Vi(ue))}function Re(){return i(D)}function Oe(Ce){Ce.callback=null}function me(){return F}var Ue=!1,Se=null,et=-1,Qt=t,Ut=-1;function Wi(){var Ce=r.unstable_now()-Ut;return!(Ce<Qt)}function ya(){}function Hi(Ce){if(Ce<0||Ce>125){console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported");return}Ce>0?Qt=Math.floor(1e3/Ce):Qt=t}var tt=function(){if(Se!==null){var Ce=r.unstable_now();Ut=Ce;var Ne=!0,vt=!0;try{vt=Se(Ne,Ce)}finally{vt?Lr():(Ue=!1,Se=null)}}else Ue=!1},Lr;if(typeof V=="function")Lr=function(){V(tt)};else if(typeof MessageChannel<"u"){var Fs=new MessageChannel,ko=Fs.port2;Fs.port1.onmessage=tt,Lr=function(){ko.postMessage(null)}}else Lr=function(){z(tt,0)};function Vi(Ce){Se=Ce,Ue||(Ue=!0,Lr())}function Io(Ce,Ne){et=z(function(){Ce(r.unstable_now())},Ne)}function bi(){Q(et),et=-1}var vr=ya,eu=null;r.unstable_IdlePriority=f,r.unstable_ImmediatePriority=c,r.unstable_LowPriority=h,r.unstable_NormalPriority=d,r.unstable_Profiling=eu,r.unstable_UserBlockingPriority=u,r.unstable_cancelCallback=Oe,r.unstable_continueExecution=we,r.unstable_forceFrameRate=Hi,r.unstable_getCurrentPriorityLevel=me,r.unstable_getFirstCallbackNode=Re,r.unstable_next=ae,r.unstable_pauseExecution=be,r.unstable_requestPaint=vr,r.unstable_runWithPriority=ge,r.unstable_scheduleCallback=ee,r.unstable_shouldYield=Wi,r.unstable_wrapCallback=ie,typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"&&typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop=="function"&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)})()})(AX);SX.exports=AX;var UC=SX.exports;const B1=Symbol(),uqe=Symbol(),_X=typeof window>"u"||/ServerSideRendering/.test(window.navigator&&window.navigator.userAgent)?x.useEffect:x.useLayoutEffect,dqe=UC.unstable_runWithPriority?r=>UC.unstable_runWithPriority(UC.unstable_NormalPriority,r):r=>r();function hqe(r){const e=x.createContext({[B1]:{v:{current:r},n:{current:-1},l:new Set,u:n=>n()}});var t;return e[uqe]=e.Provider,e.Provider=(t=e.Provider,({value:n,children:i})=>{const s=x.useRef(n),a=x.useRef(0),[o,l]=x.useState(null);o&&(o(n),l(null));const c=x.useRef();if(!c.current){const u=new Set,d=(h,f)=>{ha.unstable_batchedUpdates(()=>{a.current+=1;const m={n:a.current};f!=null&&f.suspense&&(m.n*=-1,m.p=new Promise(g=>{l(()=>y=>{m.v=y,delete m.p,g(y)})})),u.forEach(g=>g(m)),h()})};c.current={[B1]:{v:s,n:a,l:u,u:d}}}return _X(()=>{s.current=n,a.current+=1,dqe(()=>{c.current[B1].l.forEach(u=>{u({n:a.current,v:n})})})},[n]),x.createElement(t,{value:c.current},i)}),delete e.Consumer,e}function fqe(r,e){const t=x.useContext(r)[B1];if(typeof process=="object"&&!t)throw new Error("useContextSelector requires special context");const{v:{current:n},n:{current:i},l:s}=t,a=e(n),[o,l]=x.useReducer((c,u)=>{if(!u)return[n,a];if("p"in u)throw u.p;if(u.n===i)return Object.is(c[1],a)?c:[n,a];try{if("v"in u){if(Object.is(c[0],u.v))return c;const d=e(u.v);return Object.is(c[1],d)?c:[u.v,d]}}catch{}return[...c]},[n,a]);return Object.is(o[1],a)||l(),_X(()=>(s.add(l),()=>{s.delete(l)}),[s]),o[1]}var pqe=CO,c7=os;function CX(r,e,t,n,i,s){return c7(r)&&c7(e)&&(s.set(e,r),pqe(r,e,void 0,CX,s),s.delete(e)),r}var mqe=CX,gqe=CO,vqe=_Y,yqe=vqe(function(r,e,t,n){gqe(r,e,t,n)}),bqe=yqe,Eqe=JT,xqe=AY,wqe=mqe,Tqe=bqe;xqe(function(r){return r.push(void 0,wqe),Eqe(Tqe,void 0,r)});function Co(r,e){const t=hqe(e),n=s=>{const{children:a,...o}=s,l=x.useMemo(()=>o,Object.values(o));return $.jsx(t.Provider,{value:l,children:a})};function i(s,a){return fqe(t,o=>{if(o)return a(o);throw new Error(`\`${s}\` must be used within \`${r}\``)})}return n.displayName=r+"Provider",[n,i]}Co("StrapiApp");const Ih={TOKEN:"jwtToken",USER:"userInfo"},u7="STRAPI_THEME",Sqe="strapi-admin-language",Aqe=wu({name:"admin",initialState:()=>({language:{locale:"en",localeNames:{en:"English"}},permissions:{},theme:{availableThemes:[],currentTheme:localStorage.getItem(u7)||"system"},token:null}),reducers:{setAppTheme(r,e){r.theme.currentTheme=e.payload,window.localStorage.setItem(u7,e.payload)},setAvailableThemes(r,e){r.theme.availableThemes=e.payload},setLocale(r,e){r.language.locale=e.payload,window.localStorage.setItem(Sqe,e.payload),document.documentElement.setAttribute("lang",e.payload)},setToken(r,e){r.token=e.payload},login(r,e){const{token:t,persist:n}=e.payload;n?window.localStorage.setItem(Ih.TOKEN,JSON.stringify(t)):window.sessionStorage.setItem(Ih.TOKEN,JSON.stringify(t)),r.token=t},logout(r){r.token=null,window.localStorage.removeItem(Ih.TOKEN),window.localStorage.removeItem(Ih.USER),window.sessionStorage.removeItem(Ih.TOKEN),window.sessionStorage.removeItem(Ih.USER)}}}),{setAppTheme:_dt,setAvailableThemes:Cdt,setLocale:Rdt,setToken:kdt,logout:Idt,login:$dt}=Aqe.actions,_qe=xl.enhanceEndpoints({addTagTypes:["User","Me","ProvidersOptions"]}).injectEndpoints({endpoints:r=>({getMe:r.query({query:()=>({method:"GET",url:"/admin/users/me"}),transformResponse(e){return e.data},providesTags:e=>e?["Me",{type:"User",id:e.id}]:["Me"]}),getMyPermissions:r.query({query:()=>({method:"GET",url:"/admin/users/me/permissions"}),transformResponse(e){return e.data}}),updateMe:r.mutation({query:e=>({method:"PUT",url:"/admin/users/me",data:e}),transformResponse(e){return e.data},invalidatesTags:["Me"]}),checkPermissions:r.query({query:e=>({method:"POST",url:"/admin/permissions/check",data:e})}),login:r.mutation({query:e=>({method:"POST",url:"/admin/login",data:e}),transformResponse(e){return e.data},invalidatesTags:["Me"]}),logout:r.mutation({query:()=>({method:"POST",url:"/admin/logout"})}),resetPassword:r.mutation({query:e=>({method:"POST",url:"/admin/reset-password",data:e}),transformResponse(e){return e.data}}),renewToken:r.mutation({query:e=>({method:"POST",url:"/admin/renew-token",data:e}),transformResponse(e){return e.data}}),getRegistrationInfo:r.query({query:e=>({url:"/admin/registration-info",method:"GET",config:{params:{registrationToken:e}}}),transformResponse(e){return e.data}}),registerAdmin:r.mutation({query:e=>({method:"POST",url:"/admin/register-admin",data:e}),transformResponse(e){return e.data}}),registerUser:r.mutation({query:e=>({method:"POST",url:"/admin/register",data:e}),transformResponse(e){return e.data}}),forgotPassword:r.mutation({query:e=>({url:"/admin/forgot-password",method:"POST",data:e})}),isSSOLocked:r.query({query:()=>({url:"/admin/providers/isSSOLocked",method:"GET"}),transformResponse(e){return e.data}}),getProviders:r.query({query:()=>({url:"/admin/providers",method:"GET"})}),getProviderOptions:r.query({query:()=>({url:"/admin/providers/options",method:"GET"}),transformResponse(e){return e.data},providesTags:["ProvidersOptions"]}),updateProviderOptions:r.mutation({query:e=>({url:"/admin/providers/options",method:"PUT",data:e}),transformResponse(e){return e.data},invalidatesTags:["ProvidersOptions"]})}),overrideExisting:!1}),{useCheckPermissionsQuery:Ddt,useLazyCheckPermissionsQuery:Ldt,useGetMeQuery:Odt,useLoginMutation:Pdt,useRenewTokenMutation:Mdt,useLogoutMutation:Ndt,useUpdateMeMutation:Fdt,useResetPasswordMutation:Bdt,useRegisterAdminMutation:Udt,useRegisterUserMutation:Wdt,useGetRegistrationInfoQuery:Hdt,useForgotPasswordMutation:Vdt,useGetMyPermissionsQuery:Gdt,useIsSSOLockedQuery:qdt,useGetProvidersQuery:jdt,useGetProviderOptionsQuery:Kdt,useUpdateProviderOptionsMutation:zdt}=_qe;Co("Auth");const Cqe=({children:r,...e})=>$.jsx(Xz,{...e,children:r}),Rqe=r=>{const{formatMessage:e}=UO();return $.jsx(Cqe,{height:"100%",children:$.jsx(Ie,{alignItems:"center",height:"100%",justifyContent:"center",children:$.jsx(Uke,{icon:$.jsx(S2,{width:"16rem"}),content:e({id:"anErrorOccurred",defaultMessage:"Whoops! Something went wrong. Please, try again."}),...r})})})},kqe={Error:Rqe};function RX(r){return new TextEncoder().encode(r).length}Co("AppInfo",{});Jw("ConfigurationContext");Co("GuidedTour");VW`
  body {
    background: ${({theme:r})=>r.colors.neutral100};
  }
`;function r$(r,e){return r$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},r$(r,e)}function dS(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r,r$(r,e)}var hS=function(){function r(){this.listeners=[]}var e=r.prototype;return e.subscribe=function(n){var i=this,s=n||function(){};return this.listeners.push(s),this.onSubscribe(),function(){i.listeners=i.listeners.filter(function(a){return a!==s}),i.onUnsubscribe()}},e.hasListeners=function(){return this.listeners.length>0},e.onSubscribe=function(){},e.onUnsubscribe=function(){},r}(),kX=typeof window>"u";function di(){}function Iqe(r,e){return typeof r=="function"?r(e):r}function $qe(r){return typeof r=="number"&&r>=0&&r!==1/0}function iw(r){return Array.isArray(r)?r:[r]}function Dqe(r,e){return Math.max(r+(e||0)-Date.now(),0)}function WC(r,e,t){return fS(r)?typeof e=="function"?le({},t,{queryKey:r,queryFn:e}):le({},e,{queryKey:r}):r}function ic(r,e,t){return fS(r)?[le({},e,{queryKey:r}),t]:[r||{},e]}function Lqe(r,e){if(r===!0&&e===!0||r==null&&e==null)return"all";if(r===!1&&e===!1)return"none";var t=r??!e;return t?"active":"inactive"}function d7(r,e){var t=r.active,n=r.exact,i=r.fetching,s=r.inactive,a=r.predicate,o=r.queryKey,l=r.stale;if(fS(o)){if(n){if(e.queryHash!==dP(o,e.options))return!1}else if(!sw(e.queryKey,o))return!1}var c=Lqe(t,s);if(c==="none")return!1;if(c!=="all"){var u=e.isActive();if(c==="active"&&!u||c==="inactive"&&u)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof i=="boolean"&&e.isFetching()!==i||a&&!a(e))}function h7(r,e){var t=r.exact,n=r.fetching,i=r.predicate,s=r.mutationKey;if(fS(s)){if(!e.options.mutationKey)return!1;if(t){if(td(e.options.mutationKey)!==td(s))return!1}else if(!sw(e.options.mutationKey,s))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||i&&!i(e))}function dP(r,e){var t=e?.queryKeyHashFn||td;return t(r)}function td(r){var e=iw(r);return Oqe(e)}function Oqe(r){return JSON.stringify(r,function(e,t){return n$(t)?Object.keys(t).sort().reduce(function(n,i){return n[i]=t[i],n},{}):t})}function sw(r,e){return IX(iw(r),iw(e))}function IX(r,e){return r===e?!0:typeof r!=typeof e?!1:r&&e&&typeof r=="object"&&typeof e=="object"?!Object.keys(e).some(function(t){return!IX(r[t],e[t])}):!1}function $X(r,e){if(r===e)return r;var t=Array.isArray(r)&&Array.isArray(e);if(t||n$(r)&&n$(e)){for(var n=t?r.length:Object.keys(r).length,i=t?e:Object.keys(e),s=i.length,a=t?[]:{},o=0,l=0;l<s;l++){var c=t?l:i[l];a[c]=$X(r[c],e[c]),a[c]===r[c]&&o++}return n===s&&o===n?r:a}return e}function n$(r){if(!f7(r))return!1;var e=r.constructor;if(typeof e>"u")return!0;var t=e.prototype;return!(!f7(t)||!t.hasOwnProperty("isPrototypeOf"))}function f7(r){return Object.prototype.toString.call(r)==="[object Object]"}function fS(r){return typeof r=="string"||Array.isArray(r)}function Pqe(r){return new Promise(function(e){setTimeout(e,r)})}function p7(r){Promise.resolve().then(r).catch(function(e){return setTimeout(function(){throw e})})}function DX(){if(typeof AbortController=="function")return new AbortController}var Mqe=function(r){dS(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(i){var s;if(!kX&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("visibilitychange",a,!1),window.addEventListener("focus",a,!1),function(){window.removeEventListener("visibilitychange",a),window.removeEventListener("focus",a)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setFocused(o):a.onFocus()})},t.setFocused=function(i){this.focused=i,i&&this.onFocus()},t.onFocus=function(){this.listeners.forEach(function(i){i()})},t.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},e}(hS),U1=new Mqe,Nqe=function(r){dS(e,r);function e(){var n;return n=r.call(this)||this,n.setup=function(i){var s;if(!kX&&((s=window)!=null&&s.addEventListener)){var a=function(){return i()};return window.addEventListener("online",a,!1),window.addEventListener("offline",a,!1),function(){window.removeEventListener("online",a),window.removeEventListener("offline",a)}}},n}var t=e.prototype;return t.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},t.onUnsubscribe=function(){if(!this.hasListeners()){var i;(i=this.cleanup)==null||i.call(this),this.cleanup=void 0}},t.setEventListener=function(i){var s,a=this;this.setup=i,(s=this.cleanup)==null||s.call(this),this.cleanup=i(function(o){typeof o=="boolean"?a.setOnline(o):a.onOnline()})},t.setOnline=function(i){this.online=i,i&&this.onOnline()},t.onOnline=function(){this.listeners.forEach(function(i){i()})},t.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},e}(hS),W1=new Nqe;function Fqe(r){return Math.min(1e3*Math.pow(2,r),3e4)}function aw(r){return typeof r?.cancel=="function"}var LX=function(e){this.revert=e?.revert,this.silent=e?.silent};function HC(r){return r instanceof LX}var OX=function(e){var t=this,n=!1,i,s,a,o;this.abort=e.abort,this.cancel=function(h){return i?.(h)},this.cancelRetry=function(){n=!0},this.continueRetry=function(){n=!1},this.continue=function(){return s?.()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(h,f){a=h,o=f});var l=function(f){t.isResolved||(t.isResolved=!0,e.onSuccess==null||e.onSuccess(f),s?.(),a(f))},c=function(f){t.isResolved||(t.isResolved=!0,e.onError==null||e.onError(f),s?.(),o(f))},u=function(){return new Promise(function(f){s=f,t.isPaused=!0,e.onPause==null||e.onPause()}).then(function(){s=void 0,t.isPaused=!1,e.onContinue==null||e.onContinue()})},d=function h(){if(!t.isResolved){var f;try{f=e.fn()}catch(m){f=Promise.reject(m)}i=function(g){if(!t.isResolved&&(c(new LX(g)),t.abort==null||t.abort(),aw(f)))try{f.cancel()}catch{}},t.isTransportCancelable=aw(f),Promise.resolve(f).then(l).catch(function(m){var g,y;if(!t.isResolved){var b=(g=e.retry)!=null?g:3,E=(y=e.retryDelay)!=null?y:Fqe,w=typeof E=="function"?E(t.failureCount,m):E,A=b===!0||typeof b=="number"&&t.failureCount<b||typeof b=="function"&&b(t.failureCount,m);if(n||!A){c(m);return}t.failureCount++,e.onFail==null||e.onFail(t.failureCount,m),Pqe(w).then(function(){if(!U1.isFocused()||!W1.isOnline())return u()}).then(function(){n?c(m):h()})}})}};d()},Bqe=function(){function r(){this.queue=[],this.transactions=0,this.notifyFn=function(t){t()},this.batchNotifyFn=function(t){t()}}var e=r.prototype;return e.batch=function(n){var i;this.transactions++;try{i=n()}finally{this.transactions--,this.transactions||this.flush()}return i},e.schedule=function(n){var i=this;this.transactions?this.queue.push(n):p7(function(){i.notifyFn(n)})},e.batchCalls=function(n){var i=this;return function(){for(var s=arguments.length,a=new Array(s),o=0;o<s;o++)a[o]=arguments[o];i.schedule(function(){n.apply(void 0,a)})}},e.flush=function(){var n=this,i=this.queue;this.queue=[],i.length&&p7(function(){n.batchNotifyFn(function(){i.forEach(function(s){n.notifyFn(s)})})})},e.setNotifyFunction=function(n){this.notifyFn=n},e.setBatchNotifyFunction=function(n){this.batchNotifyFn=n},r}(),Hn=new Bqe,PX=console;function MX(){return PX}function Uqe(r){PX=r}var Wqe=function(){function r(t){this.abortSignalConsumed=!1,this.hadObservers=!1,this.defaultOptions=t.defaultOptions,this.setOptions(t.options),this.observers=[],this.cache=t.cache,this.queryKey=t.queryKey,this.queryHash=t.queryHash,this.initialState=t.state||this.getDefaultState(this.options),this.state=this.initialState,this.meta=t.meta,this.scheduleGc()}var e=r.prototype;return e.setOptions=function(n){var i;this.options=le({},this.defaultOptions,n),this.meta=n?.meta,this.cacheTime=Math.max(this.cacheTime||0,(i=this.options.cacheTime)!=null?i:5*60*1e3)},e.setDefaultOptions=function(n){this.defaultOptions=n},e.scheduleGc=function(){var n=this;this.clearGcTimeout(),$qe(this.cacheTime)&&(this.gcTimeout=setTimeout(function(){n.optionalRemove()},this.cacheTime))},e.clearGcTimeout=function(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)},e.optionalRemove=function(){this.observers.length||(this.state.isFetching?this.hadObservers&&this.scheduleGc():this.cache.remove(this))},e.setData=function(n,i){var s,a,o=this.state.data,l=Iqe(n,o);return(s=(a=this.options).isDataEqual)!=null&&s.call(a,o,l)?l=o:this.options.structuralSharing!==!1&&(l=$X(o,l)),this.dispatch({data:l,type:"success",dataUpdatedAt:i?.updatedAt}),l},e.setState=function(n,i){this.dispatch({type:"setState",state:n,setStateOptions:i})},e.cancel=function(n){var i,s=this.promise;return(i=this.retryer)==null||i.cancel(n),s?s.then(di).catch(di):Promise.resolve()},e.destroy=function(){this.clearGcTimeout(),this.cancel({silent:!0})},e.reset=function(){this.destroy(),this.setState(this.initialState)},e.isActive=function(){return this.observers.some(function(n){return n.options.enabled!==!1})},e.isFetching=function(){return this.state.isFetching},e.isStale=function(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(function(n){return n.getCurrentResult().isStale})},e.isStaleByTime=function(n){return n===void 0&&(n=0),this.state.isInvalidated||!this.state.dataUpdatedAt||!Dqe(this.state.dataUpdatedAt,n)},e.onFocus=function(){var n,i=this.observers.find(function(s){return s.shouldFetchOnWindowFocus()});i&&i.refetch(),(n=this.retryer)==null||n.continue()},e.onOnline=function(){var n,i=this.observers.find(function(s){return s.shouldFetchOnReconnect()});i&&i.refetch(),(n=this.retryer)==null||n.continue()},e.addObserver=function(n){this.observers.indexOf(n)===-1&&(this.observers.push(n),this.hadObservers=!0,this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:n}))},e.removeObserver=function(n){this.observers.indexOf(n)!==-1&&(this.observers=this.observers.filter(function(i){return i!==n}),this.observers.length||(this.retryer&&(this.retryer.isTransportCancelable||this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.cacheTime?this.scheduleGc():this.cache.remove(this)),this.cache.notify({type:"observerRemoved",query:this,observer:n}))},e.getObserversCount=function(){return this.observers.length},e.invalidate=function(){this.state.isInvalidated||this.dispatch({type:"invalidate"})},e.fetch=function(n,i){var s=this,a,o,l;if(this.state.isFetching){if(this.state.dataUpdatedAt&&i?.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var c;return(c=this.retryer)==null||c.continueRetry(),this.promise}}if(n&&this.setOptions(n),!this.options.queryFn){var u=this.observers.find(function(E){return E.options.queryFn});u&&this.setOptions(u.options)}var d=iw(this.queryKey),h=DX(),f={queryKey:d,pageParam:void 0,meta:this.meta};Object.defineProperty(f,"signal",{enumerable:!0,get:function(){if(h)return s.abortSignalConsumed=!0,h.signal}});var m=function(){return s.options.queryFn?(s.abortSignalConsumed=!1,s.options.queryFn(f)):Promise.reject("Missing queryFn")},g={fetchOptions:i,options:this.options,queryKey:d,state:this.state,fetchFn:m,meta:this.meta};if((a=this.options.behavior)!=null&&a.onFetch){var y;(y=this.options.behavior)==null||y.onFetch(g)}if(this.revertState=this.state,!this.state.isFetching||this.state.fetchMeta!==((o=g.fetchOptions)==null?void 0:o.meta)){var b;this.dispatch({type:"fetch",meta:(b=g.fetchOptions)==null?void 0:b.meta})}return this.retryer=new OX({fn:g.fetchFn,abort:h==null||(l=h.abort)==null?void 0:l.bind(h),onSuccess:function(w){s.setData(w),s.cache.config.onSuccess==null||s.cache.config.onSuccess(w,s),s.cacheTime===0&&s.optionalRemove()},onError:function(w){HC(w)&&w.silent||s.dispatch({type:"error",error:w}),HC(w)||(s.cache.config.onError==null||s.cache.config.onError(w,s),MX().error(w)),s.cacheTime===0&&s.optionalRemove()},onFail:function(){s.dispatch({type:"failed"})},onPause:function(){s.dispatch({type:"pause"})},onContinue:function(){s.dispatch({type:"continue"})},retry:g.options.retry,retryDelay:g.options.retryDelay}),this.promise=this.retryer.promise,this.promise},e.dispatch=function(n){var i=this;this.state=this.reducer(this.state,n),Hn.batch(function(){i.observers.forEach(function(s){s.onQueryUpdate(n)}),i.cache.notify({query:i,type:"queryUpdated",action:n})})},e.getDefaultState=function(n){var i=typeof n.initialData=="function"?n.initialData():n.initialData,s=typeof n.initialData<"u",a=s?typeof n.initialDataUpdatedAt=="function"?n.initialDataUpdatedAt():n.initialDataUpdatedAt:0,o=typeof i<"u";return{data:i,dataUpdateCount:0,dataUpdatedAt:o?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchMeta:null,isFetching:!1,isInvalidated:!1,isPaused:!1,status:o?"success":"idle"}},e.reducer=function(n,i){var s,a;switch(i.type){case"failed":return le({},n,{fetchFailureCount:n.fetchFailureCount+1});case"pause":return le({},n,{isPaused:!0});case"continue":return le({},n,{isPaused:!1});case"fetch":return le({},n,{fetchFailureCount:0,fetchMeta:(s=i.meta)!=null?s:null,isFetching:!0,isPaused:!1},!n.dataUpdatedAt&&{error:null,status:"loading"});case"success":return le({},n,{data:i.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(a=i.dataUpdatedAt)!=null?a:Date.now(),error:null,fetchFailureCount:0,isFetching:!1,isInvalidated:!1,isPaused:!1,status:"success"});case"error":var o=i.error;return HC(o)&&o.revert&&this.revertState?le({},this.revertState):le({},n,{error:o,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,isFetching:!1,isPaused:!1,status:"error"});case"invalidate":return le({},n,{isInvalidated:!0});case"setState":return le({},n,i.state);default:return n}},r}(),Hqe=function(r){dS(e,r);function e(n){var i;return i=r.call(this)||this,i.config=n||{},i.queries=[],i.queriesMap={},i}var t=e.prototype;return t.build=function(i,s,a){var o,l=s.queryKey,c=(o=s.queryHash)!=null?o:dP(l,s),u=this.get(c);return u||(u=new Wqe({cache:this,queryKey:l,queryHash:c,options:i.defaultQueryOptions(s),state:a,defaultOptions:i.getQueryDefaults(l),meta:s.meta}),this.add(u)),u},t.add=function(i){this.queriesMap[i.queryHash]||(this.queriesMap[i.queryHash]=i,this.queries.push(i),this.notify({type:"queryAdded",query:i}))},t.remove=function(i){var s=this.queriesMap[i.queryHash];s&&(i.destroy(),this.queries=this.queries.filter(function(a){return a!==i}),s===i&&delete this.queriesMap[i.queryHash],this.notify({type:"queryRemoved",query:i}))},t.clear=function(){var i=this;Hn.batch(function(){i.queries.forEach(function(s){i.remove(s)})})},t.get=function(i){return this.queriesMap[i]},t.getAll=function(){return this.queries},t.find=function(i,s){var a=ic(i,s),o=a[0];return typeof o.exact>"u"&&(o.exact=!0),this.queries.find(function(l){return d7(o,l)})},t.findAll=function(i,s){var a=ic(i,s),o=a[0];return Object.keys(o).length>0?this.queries.filter(function(l){return d7(o,l)}):this.queries},t.notify=function(i){var s=this;Hn.batch(function(){s.listeners.forEach(function(a){a(i)})})},t.onFocus=function(){var i=this;Hn.batch(function(){i.queries.forEach(function(s){s.onFocus()})})},t.onOnline=function(){var i=this;Hn.batch(function(){i.queries.forEach(function(s){s.onOnline()})})},e}(hS),Vqe=function(){function r(t){this.options=le({},t.defaultOptions,t.options),this.mutationId=t.mutationId,this.mutationCache=t.mutationCache,this.observers=[],this.state=t.state||Gqe(),this.meta=t.meta}var e=r.prototype;return e.setState=function(n){this.dispatch({type:"setState",state:n})},e.addObserver=function(n){this.observers.indexOf(n)===-1&&this.observers.push(n)},e.removeObserver=function(n){this.observers=this.observers.filter(function(i){return i!==n})},e.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(di).catch(di)):Promise.resolve()},e.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},e.execute=function(){var n=this,i,s=this.state.status==="loading",a=Promise.resolve();return s||(this.dispatch({type:"loading",variables:this.options.variables}),a=a.then(function(){n.mutationCache.config.onMutate==null||n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return n.options.onMutate==null?void 0:n.options.onMutate(n.state.variables)}).then(function(o){o!==n.state.context&&n.dispatch({type:"loading",context:o,variables:n.state.variables})})),a.then(function(){return n.executeMutation()}).then(function(o){i=o,n.mutationCache.config.onSuccess==null||n.mutationCache.config.onSuccess(i,n.state.variables,n.state.context,n)}).then(function(){return n.options.onSuccess==null?void 0:n.options.onSuccess(i,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(i,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:i}),i}).catch(function(o){return n.mutationCache.config.onError==null||n.mutationCache.config.onError(o,n.state.variables,n.state.context,n),MX().error(o),Promise.resolve().then(function(){return n.options.onError==null?void 0:n.options.onError(o,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(void 0,o,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:o}),o})})},e.executeMutation=function(){var n=this,i;return this.retryer=new OX({fn:function(){return n.options.mutationFn?n.options.mutationFn(n.state.variables):Promise.reject("No mutationFn found")},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:(i=this.options.retry)!=null?i:0,retryDelay:this.options.retryDelay}),this.retryer.promise},e.dispatch=function(n){var i=this;this.state=qqe(this.state,n),Hn.batch(function(){i.observers.forEach(function(s){s.onMutationUpdate(n)}),i.mutationCache.notify(i)})},r}();function Gqe(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function qqe(r,e){switch(e.type){case"failed":return le({},r,{failureCount:r.failureCount+1});case"pause":return le({},r,{isPaused:!0});case"continue":return le({},r,{isPaused:!1});case"loading":return le({},r,{context:e.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:e.variables});case"success":return le({},r,{data:e.data,error:null,status:"success",isPaused:!1});case"error":return le({},r,{data:void 0,error:e.error,failureCount:r.failureCount+1,isPaused:!1,status:"error"});case"setState":return le({},r,e.state);default:return r}}var jqe=function(r){dS(e,r);function e(n){var i;return i=r.call(this)||this,i.config=n||{},i.mutations=[],i.mutationId=0,i}var t=e.prototype;return t.build=function(i,s,a){var o=new Vqe({mutationCache:this,mutationId:++this.mutationId,options:i.defaultMutationOptions(s),state:a,defaultOptions:s.mutationKey?i.getMutationDefaults(s.mutationKey):void 0,meta:s.meta});return this.add(o),o},t.add=function(i){this.mutations.push(i),this.notify(i)},t.remove=function(i){this.mutations=this.mutations.filter(function(s){return s!==i}),i.cancel(),this.notify(i)},t.clear=function(){var i=this;Hn.batch(function(){i.mutations.forEach(function(s){i.remove(s)})})},t.getAll=function(){return this.mutations},t.find=function(i){return typeof i.exact>"u"&&(i.exact=!0),this.mutations.find(function(s){return h7(i,s)})},t.findAll=function(i){return this.mutations.filter(function(s){return h7(i,s)})},t.notify=function(i){var s=this;Hn.batch(function(){s.listeners.forEach(function(a){a(i)})})},t.onFocus=function(){this.resumePausedMutations()},t.onOnline=function(){this.resumePausedMutations()},t.resumePausedMutations=function(){var i=this.mutations.filter(function(s){return s.state.isPaused});return Hn.batch(function(){return i.reduce(function(s,a){return s.then(function(){return a.continue().catch(di)})},Promise.resolve())})},e}(hS);function Kqe(){return{onFetch:function(e){e.fetchFn=function(){var t,n,i,s,a,o,l=(t=e.fetchOptions)==null||(n=t.meta)==null?void 0:n.refetchPage,c=(i=e.fetchOptions)==null||(s=i.meta)==null?void 0:s.fetchMore,u=c?.pageParam,d=c?.direction==="forward",h=c?.direction==="backward",f=((a=e.state.data)==null?void 0:a.pages)||[],m=((o=e.state.data)==null?void 0:o.pageParams)||[],g=DX(),y=g?.signal,b=m,E=!1,w=e.options.queryFn||function(){return Promise.reject("Missing queryFn")},A=function(U,W,j,z){return b=z?[W].concat(b):[].concat(b,[W]),z?[j].concat(U):[].concat(U,[j])},S=function(U,W,j,z){if(E)return Promise.reject("Cancelled");if(typeof j>"u"&&!W&&U.length)return Promise.resolve(U);var Q={queryKey:e.queryKey,signal:y,pageParam:j,meta:e.meta},V=w(Q),Y=Promise.resolve(V).then(function(ue){return A(U,j,ue,z)});if(aw(V)){var J=Y;J.cancel=V.cancel}return Y},_;if(!f.length)_=S([]);else if(d){var C=typeof u<"u",k=C?u:m7(e.options,f);_=S(f,C,k)}else if(h){var D=typeof u<"u",I=D?u:zqe(e.options,f);_=S(f,D,I,!0)}else(function(){b=[];var F=typeof e.options.getNextPageParam>"u",U=l&&f[0]?l(f[0],0,f):!0;_=U?S([],F,m[0]):Promise.resolve(A([],m[0],f[0]));for(var W=function(Q){_=_.then(function(V){var Y=l&&f[Q]?l(f[Q],Q,f):!0;if(Y){var J=F?m[Q]:m7(e.options,V);return S(V,F,J)}return Promise.resolve(A(V,m[Q],f[Q]))})},j=1;j<f.length;j++)W(j)})();var L=_.then(function(F){return{pages:F,pageParams:b}}),M=L;return M.cancel=function(){E=!0,g?.abort(),aw(_)&&_.cancel()},L}}}}function m7(r,e){return r.getNextPageParam==null?void 0:r.getNextPageParam(e[e.length-1],e)}function zqe(r,e){return r.getPreviousPageParam==null?void 0:r.getPreviousPageParam(e[0],e)}var Yqe=function(){function r(t){t===void 0&&(t={}),this.queryCache=t.queryCache||new Hqe,this.mutationCache=t.mutationCache||new jqe,this.defaultOptions=t.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[]}var e=r.prototype;return e.mount=function(){var n=this;this.unsubscribeFocus=U1.subscribe(function(){U1.isFocused()&&W1.isOnline()&&(n.mutationCache.onFocus(),n.queryCache.onFocus())}),this.unsubscribeOnline=W1.subscribe(function(){U1.isFocused()&&W1.isOnline()&&(n.mutationCache.onOnline(),n.queryCache.onOnline())})},e.unmount=function(){var n,i;(n=this.unsubscribeFocus)==null||n.call(this),(i=this.unsubscribeOnline)==null||i.call(this)},e.isFetching=function(n,i){var s=ic(n,i),a=s[0];return a.fetching=!0,this.queryCache.findAll(a).length},e.isMutating=function(n){return this.mutationCache.findAll(le({},n,{fetching:!0})).length},e.getQueryData=function(n,i){var s;return(s=this.queryCache.find(n,i))==null?void 0:s.state.data},e.getQueriesData=function(n){return this.getQueryCache().findAll(n).map(function(i){var s=i.queryKey,a=i.state,o=a.data;return[s,o]})},e.setQueryData=function(n,i,s){var a=WC(n),o=this.defaultQueryOptions(a);return this.queryCache.build(this,o).setData(i,s)},e.setQueriesData=function(n,i,s){var a=this;return Hn.batch(function(){return a.getQueryCache().findAll(n).map(function(o){var l=o.queryKey;return[l,a.setQueryData(l,i,s)]})})},e.getQueryState=function(n,i){var s;return(s=this.queryCache.find(n,i))==null?void 0:s.state},e.removeQueries=function(n,i){var s=ic(n,i),a=s[0],o=this.queryCache;Hn.batch(function(){o.findAll(a).forEach(function(l){o.remove(l)})})},e.resetQueries=function(n,i,s){var a=this,o=ic(n,i,s),l=o[0],c=o[1],u=this.queryCache,d=le({},l,{active:!0});return Hn.batch(function(){return u.findAll(l).forEach(function(h){h.reset()}),a.refetchQueries(d,c)})},e.cancelQueries=function(n,i,s){var a=this,o=ic(n,i,s),l=o[0],c=o[1],u=c===void 0?{}:c;typeof u.revert>"u"&&(u.revert=!0);var d=Hn.batch(function(){return a.queryCache.findAll(l).map(function(h){return h.cancel(u)})});return Promise.all(d).then(di).catch(di)},e.invalidateQueries=function(n,i,s){var a,o,l,c=this,u=ic(n,i,s),d=u[0],h=u[1],f=le({},d,{active:(a=(o=d.refetchActive)!=null?o:d.active)!=null?a:!0,inactive:(l=d.refetchInactive)!=null?l:!1});return Hn.batch(function(){return c.queryCache.findAll(d).forEach(function(m){m.invalidate()}),c.refetchQueries(f,h)})},e.refetchQueries=function(n,i,s){var a=this,o=ic(n,i,s),l=o[0],c=o[1],u=Hn.batch(function(){return a.queryCache.findAll(l).map(function(h){return h.fetch(void 0,le({},c,{meta:{refetchPage:l?.refetchPage}}))})}),d=Promise.all(u).then(di);return c?.throwOnError||(d=d.catch(di)),d},e.fetchQuery=function(n,i,s){var a=WC(n,i,s),o=this.defaultQueryOptions(a);typeof o.retry>"u"&&(o.retry=!1);var l=this.queryCache.build(this,o);return l.isStaleByTime(o.staleTime)?l.fetch(o):Promise.resolve(l.state.data)},e.prefetchQuery=function(n,i,s){return this.fetchQuery(n,i,s).then(di).catch(di)},e.fetchInfiniteQuery=function(n,i,s){var a=WC(n,i,s);return a.behavior=Kqe(),this.fetchQuery(a)},e.prefetchInfiniteQuery=function(n,i,s){return this.fetchInfiniteQuery(n,i,s).then(di).catch(di)},e.cancelMutations=function(){var n=this,i=Hn.batch(function(){return n.mutationCache.getAll().map(function(s){return s.cancel()})});return Promise.all(i).then(di).catch(di)},e.resumePausedMutations=function(){return this.getMutationCache().resumePausedMutations()},e.executeMutation=function(n){return this.mutationCache.build(this,n).execute()},e.getQueryCache=function(){return this.queryCache},e.getMutationCache=function(){return this.mutationCache},e.getDefaultOptions=function(){return this.defaultOptions},e.setDefaultOptions=function(n){this.defaultOptions=n},e.setQueryDefaults=function(n,i){var s=this.queryDefaults.find(function(a){return td(n)===td(a.queryKey)});s?s.defaultOptions=i:this.queryDefaults.push({queryKey:n,defaultOptions:i})},e.getQueryDefaults=function(n){var i;return n?(i=this.queryDefaults.find(function(s){return sw(n,s.queryKey)}))==null?void 0:i.defaultOptions:void 0},e.setMutationDefaults=function(n,i){var s=this.mutationDefaults.find(function(a){return td(n)===td(a.mutationKey)});s?s.defaultOptions=i:this.mutationDefaults.push({mutationKey:n,defaultOptions:i})},e.getMutationDefaults=function(n){var i;return n?(i=this.mutationDefaults.find(function(s){return sw(n,s.mutationKey)}))==null?void 0:i.defaultOptions:void 0},e.defaultQueryOptions=function(n){if(n?._defaulted)return n;var i=le({},this.defaultOptions.queries,this.getQueryDefaults(n?.queryKey),n,{_defaulted:!0});return!i.queryHash&&i.queryKey&&(i.queryHash=dP(i.queryKey,i)),i},e.defaultQueryObserverOptions=function(n){return this.defaultQueryOptions(n)},e.defaultMutationOptions=function(n){return n?._defaulted?n:le({},this.defaultOptions.mutations,this.getMutationDefaults(n?.mutationKey),n,{_defaulted:!0})},e.clear=function(){this.queryCache.clear(),this.mutationCache.clear()},r}(),Qqe=UW.unstable_batchedUpdates;Hn.setBatchNotifyFunction(Qqe);var Xqe=console;Uqe(Xqe);var Zqe=KFe,Jqe=mQ,eje=O4e,tje=jp;function rje(r){return function(e){e=tje(e);var t=Jqe(e)?eje(e):void 0,n=t?t[0]:e.charAt(0),i=t?Zqe(t,1).join(""):e.slice(1);return n[r]()+i}}var nje=rje,ije=nje,sje=ije("toUpperCase"),aje=sje,oje=jp,lje=aje;function cje(r){return lje(oje(r).toLowerCase())}var uje=cje;function dje(r,e,t,n){var i=-1,s=r==null?0:r.length;for(n&&s&&(t=r[++i]);++i<s;)t=e(t,r[i],i,r);return t}var hje=dje;function fje(r){return function(e){return r?.[e]}}var pje=fje,mje=pje,gje={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},vje=mje(gje),yje=vje,bje=yje,Eje=jp,xje=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wje="\\u0300-\\u036f",Tje="\\ufe20-\\ufe2f",Sje="\\u20d0-\\u20ff",Aje=wje+Tje+Sje,_je="["+Aje+"]",Cje=RegExp(_je,"g");function Rje(r){return r=Eje(r),r&&r.replace(xje,bje).replace(Cje,"")}var kje=Rje,Ije=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function $je(r){return r.match(Ije)||[]}var Dje=$je,Lje=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Oje(r){return Lje.test(r)}var Pje=Oje,NX="\\ud800-\\udfff",Mje="\\u0300-\\u036f",Nje="\\ufe20-\\ufe2f",Fje="\\u20d0-\\u20ff",Bje=Mje+Nje+Fje,FX="\\u2700-\\u27bf",BX="a-z\\xdf-\\xf6\\xf8-\\xff",Uje="\\xac\\xb1\\xd7\\xf7",Wje="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Hje="\\u2000-\\u206f",Vje=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",UX="A-Z\\xc0-\\xd6\\xd8-\\xde",Gje="\\ufe0e\\ufe0f",WX=Uje+Wje+Hje+Vje,HX="['’]",g7="["+WX+"]",qje="["+Bje+"]",VX="\\d+",jje="["+FX+"]",GX="["+BX+"]",qX="[^"+NX+WX+VX+FX+BX+UX+"]",Kje="\\ud83c[\\udffb-\\udfff]",zje="(?:"+qje+"|"+Kje+")",Yje="[^"+NX+"]",jX="(?:\\ud83c[\\udde6-\\uddff]){2}",KX="[\\ud800-\\udbff][\\udc00-\\udfff]",Gh="["+UX+"]",Qje="\\u200d",v7="(?:"+GX+"|"+qX+")",Xje="(?:"+Gh+"|"+qX+")",y7="(?:"+HX+"(?:d|ll|m|re|s|t|ve))?",b7="(?:"+HX+"(?:D|LL|M|RE|S|T|VE))?",zX=zje+"?",YX="["+Gje+"]?",Zje="(?:"+Qje+"(?:"+[Yje,jX,KX].join("|")+")"+YX+zX+")*",Jje="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",eKe="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",tKe=YX+zX+Zje,rKe="(?:"+[jje,jX,KX].join("|")+")"+tKe,nKe=RegExp([Gh+"?"+GX+"+"+y7+"(?="+[g7,Gh,"$"].join("|")+")",Xje+"+"+b7+"(?="+[g7,Gh+v7,"$"].join("|")+")",Gh+"?"+v7+"+"+y7,Gh+"+"+b7,eKe,Jje,VX,rKe].join("|"),"g");function iKe(r){return r.match(nKe)||[]}var sKe=iKe,aKe=Dje,oKe=Pje,lKe=jp,cKe=sKe;function uKe(r,e,t){return r=lKe(r),e=t?void 0:e,e===void 0?oKe(r)?cKe(r):aKe(r):r.match(e)||[]}var dKe=uKe,hKe=hje,fKe=kje,pKe=dKe,mKe="['’]",gKe=RegExp(mKe,"g");function vKe(r){return function(e){return hKe(pKe(fKe(e).replace(gKe,"")),r,"")}}var QX=vKe,yKe=uje,bKe=QX,EKe=bKe(function(r,e,t){return e=e.toLowerCase(),r+(t?yKe(e):e)}),xKe=EKe;const wKe=Ls(xKe);var i$;try{i$=Map}catch{}var s$;try{s$=Set}catch{}function XX(r,e,t){if(!r||typeof r!="object"||typeof r=="function")return r;if(r.nodeType&&"cloneNode"in r)return r.cloneNode(!0);if(r instanceof Date)return new Date(r.getTime());if(r instanceof RegExp)return new RegExp(r);if(Array.isArray(r))return r.map(a$);if(i$&&r instanceof i$)return new Map(Array.from(r.entries()));if(s$&&r instanceof s$)return new Set(Array.from(r.values()));if(r instanceof Object){e.push(r);var n=Object.create(r);t.push(n);for(var i in r){var s=e.findIndex(function(a){return a===r[i]});n[i]=s>-1?t[s]:XX(r[i],e,t)}return n}return r}function a$(r){return XX(r,[],[])}const TKe=Object.prototype.toString,SKe=Error.prototype.toString,AKe=RegExp.prototype.toString,_Ke=typeof Symbol<"u"?Symbol.prototype.toString:()=>"",CKe=/^Symbol\((.*)\)(.*)$/;function RKe(r){return r!=+r?"NaN":r===0&&1/r<0?"-0":""+r}function E7(r,e=!1){if(r==null||r===!0||r===!1)return""+r;const t=typeof r;if(t==="number")return RKe(r);if(t==="string")return e?`"${r}"`:r;if(t==="function")return"[Function "+(r.name||"anonymous")+"]";if(t==="symbol")return _Ke.call(r).replace(CKe,"Symbol($1)");const n=TKe.call(r).slice(8,-1);return n==="Date"?isNaN(r.getTime())?""+r:r.toISOString(r):n==="Error"||r instanceof Error?"["+SKe.call(r)+"]":n==="RegExp"?AKe.call(r):null}function P0(r,e){let t=E7(r,e);return t!==null?t:JSON.stringify(r,function(n,i){let s=E7(this[n],e);return s!==null?s:i},2)}let Su={default:"${path} is invalid",required:"${path} is a required field",oneOf:"${path} must be one of the following values: ${values}",notOneOf:"${path} must not be one of the following values: ${values}",notType:({path:r,type:e,value:t,originalValue:n})=>{let i=n!=null&&n!==t,s=`${r} must be a \`${e}\` type, but the final value was: \`${P0(t,!0)}\``+(i?` (cast from the value \`${P0(n,!0)}\`).`:".");return t===null&&(s+='\n If "null" is intended as an empty value be sure to mark the schema as `.nullable()`'),s},defined:"${path} must be defined"},Gs={length:"${path} must be exactly ${length} characters",min:"${path} must be at least ${min} characters",max:"${path} must be at most ${max} characters",matches:'${path} must match the following: "${regex}"',email:"${path} must be a valid email",url:"${path} must be a valid URL",uuid:"${path} must be a valid UUID",trim:"${path} must be a trimmed string",lowercase:"${path} must be a lowercase string",uppercase:"${path} must be a upper case string"},jl={min:"${path} must be greater than or equal to ${min}",max:"${path} must be less than or equal to ${max}",lessThan:"${path} must be less than ${less}",moreThan:"${path} must be greater than ${more}",positive:"${path} must be a positive number",negative:"${path} must be a negative number",integer:"${path} must be an integer"},o$={min:"${path} field must be later than ${min}",max:"${path} field must be at earlier than ${max}"},l$={isValue:"${path} field must be ${value}"},c$={noUnknown:"${path} field has unspecified keys: ${unknown}"},kKe={min:"${path} field must have at least ${min} items",max:"${path} field must have less than or equal to ${max} items",length:"${path} must be have ${length} items"};Object.assign(Object.create(null),{mixed:Su,string:Gs,number:jl,date:o$,object:c$,array:kKe,boolean:l$});var IKe=Object.prototype,$Ke=IKe.hasOwnProperty;function DKe(r,e){return r!=null&&$Ke.call(r,e)}var LKe=DKe,OKe=LKe,PKe=$Y;function MKe(r,e){return r!=null&&PKe(r,e,OKe)}var NKe=MKe;const ow=Ls(NKe),ZX=r=>r&&r.__isYupSchema__;class FKe{constructor(e,t){if(this.refs=e,this.refs=e,typeof t=="function"){this.fn=t;return}if(!ow(t,"is"))throw new TypeError("`is:` is required for `when()` conditions");if(!t.then&&!t.otherwise)throw new TypeError("either `then:` or `otherwise:` is required for `when()` conditions");let{is:n,then:i,otherwise:s}=t,a=typeof n=="function"?n:(...o)=>o.every(l=>l===n);this.fn=function(...o){let l=o.pop(),c=o.pop(),u=a(...o)?i:s;if(u)return typeof u=="function"?u(c):c.concat(u.resolve(l))}}resolve(e,t){let n=this.refs.map(s=>s.getValue(t?.value,t?.parent,t?.context)),i=this.fn.apply(e,n.concat(e,t));if(i===void 0||i===e)return e;if(!ZX(i))throw new TypeError("conditions must return a schema object");return i.resolve(t)}}function JX(r){return r==null?[]:[].concat(r)}function u$(){return u$=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},u$.apply(this,arguments)}let BKe=/\$\{\s*(\w+)\s*\}/g;class rs extends Error{static formatError(e,t){const n=t.label||t.path||"this";return n!==t.path&&(t=u$({},t,{path:n})),typeof e=="string"?e.replace(BKe,(i,s)=>P0(t[s])):typeof e=="function"?e(t):e}static isError(e){return e&&e.name==="ValidationError"}constructor(e,t,n,i){super(),this.name="ValidationError",this.value=t,this.path=n,this.type=i,this.errors=[],this.inner=[],JX(e).forEach(s=>{rs.isError(s)?(this.errors.push(...s.errors),this.inner=this.inner.concat(s.inner.length?s.inner:s)):this.errors.push(s)}),this.message=this.errors.length>1?`${this.errors.length} errors occurred`:this.errors[0],Error.captureStackTrace&&Error.captureStackTrace(this,rs)}}const UKe=r=>{let e=!1;return(...t)=>{e||(e=!0,r(...t))}};function d$(r,e){let{endEarly:t,tests:n,args:i,value:s,errors:a,sort:o,path:l}=r,c=UKe(e),u=n.length;const d=[];if(a=a||[],!u)return a.length?c(new rs(a,s,l)):c(null,s);for(let h=0;h<n.length;h++){const f=n[h];f(i,function(g){if(g){if(!rs.isError(g))return c(g,s);if(t)return g.value=s,c(g,s);d.push(g)}if(--u<=0){if(d.length&&(o&&d.sort(o),a.length&&d.push(...a),a=d),a.length){c(new rs(a,s,l),s);return}c(null,s)}})}}var WKe=hY,HKe=jv;function VKe(r,e){return r&&WKe(r,e,HKe)}var eZ=VKe,VC,x7;function tZ(){if(x7)return VC;x7=1;var r=Mv,e=eZ,t=uP;function n(i,s){var a={};return s=t(s),e(i,function(o,l,c){r(a,l,s(o,l,c))}),a}return VC=n,VC}var GKe=tZ();const rZ=Ls(GKe);function Xd(r){this._maxSize=r,this.clear()}Xd.prototype.clear=function(){this._size=0,this._values=Object.create(null)};Xd.prototype.get=function(r){return this._values[r]};Xd.prototype.set=function(r,e){return this._size>=this._maxSize&&this.clear(),r in this._values||this._size++,this._values[r]=e};var qKe=/[^.^\]^[]+|(?=\[\]|\.\.)/g,nZ=/^\d+$/,jKe=/^\d/,KKe=/[~`!#$%\^&*+=\-\[\]\\';,/{}|\\":<>\?]/g,zKe=/^\s*(['"]?)(.*?)(\1)\s*$/,hP=512,w7=new Xd(hP),T7=new Xd(hP),S7=new Xd(hP),pS={Cache:Xd,split:h$,normalizePath:GC,setter:function(r){var e=GC(r);return T7.get(r)||T7.set(r,function(n,i){for(var s=0,a=e.length,o=n;s<a-1;){var l=e[s];if(l==="__proto__"||l==="constructor"||l==="prototype")return n;o=o[e[s++]]}o[e[s]]=i})},getter:function(r,e){var t=GC(r);return S7.get(r)||S7.set(r,function(i){for(var s=0,a=t.length;s<a;)if(i!=null||!e)i=i[t[s++]];else return;return i})},join:function(r){return r.reduce(function(e,t){return e+(fP(t)||nZ.test(t)?"["+t+"]":(e?".":"")+t)},"")},forEach:function(r,e,t){YKe(Array.isArray(r)?r:h$(r),e,t)}};function GC(r){return w7.get(r)||w7.set(r,h$(r).map(function(e){return e.replace(zKe,"$2")}))}function h$(r){return r.match(qKe)||[""]}function YKe(r,e,t){var n=r.length,i,s,a,o;for(s=0;s<n;s++)i=r[s],i&&(ZKe(i)&&(i='"'+i+'"'),o=fP(i),a=!o&&/^\d+$/.test(i),e.call(t,i,o,a,s,r))}function fP(r){return typeof r=="string"&&r&&["'",'"'].indexOf(r.charAt(0))!==-1}function QKe(r){return r.match(jKe)&&!r.match(nZ)}function XKe(r){return KKe.test(r)}function ZKe(r){return!fP(r)&&(QKe(r)||XKe(r))}const Pb={context:"$",value:"."};function pP(r,e){return new Vc(r,e)}class Vc{constructor(e,t={}){if(typeof e!="string")throw new TypeError("ref must be a string, got: "+e);if(this.key=e.trim(),e==="")throw new TypeError("ref must be a non-empty string");this.isContext=this.key[0]===Pb.context,this.isValue=this.key[0]===Pb.value,this.isSibling=!this.isContext&&!this.isValue;let n=this.isContext?Pb.context:this.isValue?Pb.value:"";this.path=this.key.slice(n.length),this.getter=this.path&&pS.getter(this.path,!0),this.map=t.map}getValue(e,t,n){let i=this.isContext?n:this.isValue?e:t;return this.getter&&(i=this.getter(i||{})),this.map&&(i=this.map(i)),i}cast(e,t){return this.getValue(e,t?.parent,t?.context)}resolve(){return this}describe(){return{type:"ref",key:this.key}}toString(){return`Ref(${this.key})`}static isRef(e){return e&&e.__isYupRef}}Vc.prototype.__isYupRef=!0;function lw(){return lw=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},lw.apply(this,arguments)}function JKe(r,e){if(r==null)return{};var t={},n=Object.keys(r),i,s;for(s=0;s<n.length;s++)i=n[s],!(e.indexOf(i)>=0)&&(t[i]=r[i]);return t}function Mb(r){function e(t,n){let{value:i,path:s="",label:a,options:o,originalValue:l,sync:c}=t,u=JKe(t,["value","path","label","options","originalValue","sync"]);const{name:d,test:h,params:f,message:m}=r;let{parent:g,context:y}=o;function b(_){return Vc.isRef(_)?_.getValue(i,g,y):_}function E(_={}){const C=rZ(lw({value:i,originalValue:l,label:a,path:_.path||s},f,_.params),b),k=new rs(rs.formatError(_.message||m,C),i,C.path,_.type||d);return k.params=C,k}let w=lw({path:s,parent:g,type:d,createError:E,resolve:b,options:o,originalValue:l},u);if(!c){try{Promise.resolve(h.call(w,i,w)).then(_=>{rs.isError(_)?n(_):_?n(null,_):n(E())})}catch(_){n(_)}return}let A;try{var S;if(A=h.call(w,i,w),typeof((S=A)==null?void 0:S.then)=="function")throw new Error(`Validation test of type: "${w.type}" returned a Promise during a synchronous validate. This test will finish after the validate call has returned`)}catch(_){n(_);return}rs.isError(A)?n(A):A?n(null,A):n(E())}return e.OPTIONS=r,e}let eze=r=>r.substr(0,r.length-1).substr(1);function tze(r,e,t,n=t){let i,s,a;return e?(pS.forEach(e,(o,l,c)=>{let u=l?eze(o):o;if(r=r.resolve({context:n,parent:i,value:t}),r.innerType){let d=c?parseInt(u,10):0;if(t&&d>=t.length)throw new Error(`Yup.reach cannot resolve an array item at index: ${o}, in the path: ${e}. because there is no value at that index. `);i=t,t=t&&t[d],r=r.innerType}if(!c){if(!r.fields||!r.fields[u])throw new Error(`The schema does not contain the path: ${e}. (failed at: ${a} which is a type: "${r._type}")`);i=t,t=t&&t[u],r=r.fields[u]}s=u,a=l?"["+o+"]":"."+o}),{schema:r,parent:i,parentPath:s}):{parent:i,parentPath:e,schema:r}}class cw{constructor(){this.list=new Set,this.refs=new Map}get size(){return this.list.size+this.refs.size}describe(){const e=[];for(const t of this.list)e.push(t);for(const[,t]of this.refs)e.push(t.describe());return e}toArray(){return Array.from(this.list).concat(Array.from(this.refs.values()))}add(e){Vc.isRef(e)?this.refs.set(e.key,e):this.list.add(e)}delete(e){Vc.isRef(e)?this.refs.delete(e.key):this.list.delete(e)}has(e,t){if(this.list.has(e))return!0;let n,i=this.refs.values();for(;n=i.next(),!n.done;)if(t(n.value)===e)return!0;return!1}clone(){const e=new cw;return e.list=new Set(this.list),e.refs=new Map(this.refs),e}merge(e,t){const n=this.clone();return e.list.forEach(i=>n.add(i)),e.refs.forEach(i=>n.add(i)),t.list.forEach(i=>n.delete(i)),t.refs.forEach(i=>n.delete(i)),n}}function Ts(){return Ts=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},Ts.apply(this,arguments)}class mi{constructor(e){this.deps=[],this.conditions=[],this._whitelist=new cw,this._blacklist=new cw,this.exclusiveTests=Object.create(null),this.tests=[],this.transforms=[],this.withMutation(()=>{this.typeError(Su.notType)}),this.type=e?.type||"mixed",this.spec=Ts({strip:!1,strict:!1,abortEarly:!0,recursive:!0,nullable:!1,presence:"optional"},e?.spec)}get _type(){return this.type}_typeCheck(e){return!0}clone(e){if(this._mutate)return e&&Object.assign(this.spec,e),this;const t=Object.create(Object.getPrototypeOf(this));return t.type=this.type,t._typeError=this._typeError,t._whitelistError=this._whitelistError,t._blacklistError=this._blacklistError,t._whitelist=this._whitelist.clone(),t._blacklist=this._blacklist.clone(),t.exclusiveTests=Ts({},this.exclusiveTests),t.deps=[...this.deps],t.conditions=[...this.conditions],t.tests=[...this.tests],t.transforms=[...this.transforms],t.spec=a$(Ts({},this.spec,e)),t}label(e){var t=this.clone();return t.spec.label=e,t}meta(...e){if(e.length===0)return this.spec.meta;let t=this.clone();return t.spec.meta=Object.assign(t.spec.meta||{},e[0]),t}withMutation(e){let t=this._mutate;this._mutate=!0;let n=e(this);return this._mutate=t,n}concat(e){if(!e||e===this)return this;if(e.type!==this.type&&this.type!=="mixed")throw new TypeError(`You cannot \`concat()\` schema's of different types: ${this.type} and ${e.type}`);let t=this,n=e.clone();const i=Ts({},t.spec,n.spec);return n.spec=i,n._typeError||(n._typeError=t._typeError),n._whitelistError||(n._whitelistError=t._whitelistError),n._blacklistError||(n._blacklistError=t._blacklistError),n._whitelist=t._whitelist.merge(e._whitelist,e._blacklist),n._blacklist=t._blacklist.merge(e._blacklist,e._whitelist),n.tests=t.tests,n.exclusiveTests=t.exclusiveTests,n.withMutation(s=>{e.tests.forEach(a=>{s.test(a.OPTIONS)})}),n}isType(e){return this.spec.nullable&&e===null?!0:this._typeCheck(e)}resolve(e){let t=this;if(t.conditions.length){let n=t.conditions;t=t.clone(),t.conditions=[],t=n.reduce((i,s)=>s.resolve(i,e),t),t=t.resolve(e)}return t}cast(e,t={}){let n=this.resolve(Ts({value:e},t)),i=n._cast(e,t);if(e!==void 0&&t.assert!==!1&&n.isType(i)!==!0){let s=P0(e),a=P0(i);throw new TypeError(`The value of ${t.path||"field"} could not be cast to a value that satisfies the schema type: "${n._type}". 

attempted value: ${s} 
`+(a!==s?`result of cast: ${a}`:""))}return i}_cast(e,t){let n=e===void 0?e:this.transforms.reduce((i,s)=>s.call(this,i,e,this),e);return n===void 0&&(n=this.getDefault()),n}_validate(e,t={},n){let{sync:i,path:s,from:a=[],originalValue:o=e,strict:l=this.spec.strict,abortEarly:c=this.spec.abortEarly}=t,u=e;l||(u=this._cast(u,Ts({assert:!1},t)));let d={value:u,path:s,options:t,originalValue:o,schema:this,label:this.spec.label,sync:i,from:a},h=[];this._typeError&&h.push(this._typeError),this._whitelistError&&h.push(this._whitelistError),this._blacklistError&&h.push(this._blacklistError),d$({args:d,value:u,path:s,tests:h,endEarly:c},f=>{if(f)return void n(f,u);d$({tests:this.tests,args:d,path:s,sync:i,value:u,endEarly:c},n)})}validate(e,t,n){let i=this.resolve(Ts({},t,{value:e}));return typeof n=="function"?i._validate(e,t,n):new Promise((s,a)=>i._validate(e,t,(o,l)=>{o?a(o):s(l)}))}validateSync(e,t){let n=this.resolve(Ts({},t,{value:e})),i;return n._validate(e,Ts({},t,{sync:!0}),(s,a)=>{if(s)throw s;i=a}),i}isValid(e,t){return this.validate(e,t).then(()=>!0,n=>{if(rs.isError(n))return!1;throw n})}isValidSync(e,t){try{return this.validateSync(e,t),!0}catch(n){if(rs.isError(n))return!1;throw n}}_getDefault(){let e=this.spec.default;return e==null?e:typeof e=="function"?e.call(this):a$(e)}getDefault(e){return this.resolve(e||{})._getDefault()}default(e){return arguments.length===0?this._getDefault():this.clone({default:e})}strict(e=!0){var t=this.clone();return t.spec.strict=e,t}_isPresent(e){return e!=null}defined(e=Su.defined){return this.test({message:e,name:"defined",exclusive:!0,test(t){return t!==void 0}})}required(e=Su.required){return this.clone({presence:"required"}).withMutation(t=>t.test({message:e,name:"required",exclusive:!0,test(n){return this.schema._isPresent(n)}}))}notRequired(){var e=this.clone({presence:"optional"});return e.tests=e.tests.filter(t=>t.OPTIONS.name!=="required"),e}nullable(e=!0){var t=this.clone({nullable:e!==!1});return t}transform(e){var t=this.clone();return t.transforms.push(e),t}test(...e){let t;if(e.length===1?typeof e[0]=="function"?t={test:e[0]}:t=e[0]:e.length===2?t={name:e[0],test:e[1]}:t={name:e[0],message:e[1],test:e[2]},t.message===void 0&&(t.message=Su.default),typeof t.test!="function")throw new TypeError("`test` is a required parameters");let n=this.clone(),i=Mb(t),s=t.exclusive||t.name&&n.exclusiveTests[t.name]===!0;if(t.exclusive&&!t.name)throw new TypeError("Exclusive tests must provide a unique `name` identifying the test");return t.name&&(n.exclusiveTests[t.name]=!!t.exclusive),n.tests=n.tests.filter(a=>!(a.OPTIONS.name===t.name&&(s||a.OPTIONS.test===i.OPTIONS.test))),n.tests.push(i),n}when(e,t){!Array.isArray(e)&&typeof e!="string"&&(t=e,e=".");let n=this.clone(),i=JX(e).map(s=>new Vc(s));return i.forEach(s=>{s.isSibling&&n.deps.push(s.key)}),n.conditions.push(new FKe(i,t)),n}typeError(e){var t=this.clone();return t._typeError=Mb({message:e,name:"typeError",test(n){return n!==void 0&&!this.schema.isType(n)?this.createError({params:{type:this.schema._type}}):!0}}),t}oneOf(e,t=Su.oneOf){var n=this.clone();return e.forEach(i=>{n._whitelist.add(i),n._blacklist.delete(i)}),n._whitelistError=Mb({message:t,name:"oneOf",test(i){if(i===void 0)return!0;let s=this.schema._whitelist;return s.has(i,this.resolve)?!0:this.createError({params:{values:s.toArray().join(", ")}})}}),n}notOneOf(e,t=Su.notOneOf){var n=this.clone();return e.forEach(i=>{n._blacklist.add(i),n._whitelist.delete(i)}),n._blacklistError=Mb({message:t,name:"notOneOf",test(i){let s=this.schema._blacklist;return s.has(i,this.resolve)?this.createError({params:{values:s.toArray().join(", ")}}):!0}}),n}strip(e=!0){let t=this.clone();return t.spec.strip=e,t}describe(){const e=this.clone(),{label:t,meta:n}=e.spec;return{meta:n,label:t,type:e.type,oneOf:e._whitelist.describe(),notOneOf:e._blacklist.describe(),tests:e.tests.map(s=>({name:s.OPTIONS.name,params:s.OPTIONS.params})).filter((s,a,o)=>o.findIndex(l=>l.name===s.name)===a)}}}mi.prototype.__isYupSchema__=!0;for(const r of["validate","validateSync"])mi.prototype[`${r}At`]=function(e,t,n={}){const{parent:i,parentPath:s,schema:a}=tze(this,e,t,n.context);return a[r](i&&i[s],Ts({},n,{parent:i,path:e}))};for(const r of["equals","is"])mi.prototype[r]=mi.prototype.oneOf;for(const r of["not","nope"])mi.prototype[r]=mi.prototype.notOneOf;mi.prototype.optional=mi.prototype.notRequired;const zr=r=>r==null;function iZ(){return new sZ}class sZ extends mi{constructor(){super({type:"boolean"}),this.withMutation(()=>{this.transform(function(e){if(!this.isType(e)){if(/^(true|1)$/i.test(String(e)))return!0;if(/^(false|0)$/i.test(String(e)))return!1}return e})})}_typeCheck(e){return e instanceof Boolean&&(e=e.valueOf()),typeof e=="boolean"}isTrue(e=l$.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"true"},test(t){return zr(t)||t===!0}})}isFalse(e=l$.isValue){return this.test({message:e,name:"is-value",exclusive:!0,params:{value:"false"},test(t){return zr(t)||t===!1}})}}iZ.prototype=sZ.prototype;let rze=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,nze=/^((https?|ftp):)?\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,ize=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,sze=r=>zr(r)||r===r.trim(),aze={}.toString();function Ir(){return new aZ}class aZ extends mi{constructor(){super({type:"string"}),this.withMutation(()=>{this.transform(function(e){if(this.isType(e)||Array.isArray(e))return e;const t=e!=null&&e.toString?e.toString():e;return t===aze?e:t})})}_typeCheck(e){return e instanceof String&&(e=e.valueOf()),typeof e=="string"}_isPresent(e){return super._isPresent(e)&&!!e.length}length(e,t=Gs.length){return this.test({message:t,name:"length",exclusive:!0,params:{length:e},test(n){return zr(n)||n.length===this.resolve(e)}})}min(e,t=Gs.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(n){return zr(n)||n.length>=this.resolve(e)}})}max(e,t=Gs.max){return this.test({name:"max",exclusive:!0,message:t,params:{max:e},test(n){return zr(n)||n.length<=this.resolve(e)}})}matches(e,t){let n=!1,i,s;return t&&(typeof t=="object"?{excludeEmptyString:n=!1,message:i,name:s}=t:i=t),this.test({name:s||"matches",message:i||Gs.matches,params:{regex:e},test:a=>zr(a)||a===""&&n||a.search(e)!==-1})}email(e=Gs.email){return this.matches(rze,{name:"email",message:e,excludeEmptyString:!0})}url(e=Gs.url){return this.matches(nze,{name:"url",message:e,excludeEmptyString:!0})}uuid(e=Gs.uuid){return this.matches(ize,{name:"uuid",message:e,excludeEmptyString:!1})}ensure(){return this.default("").transform(e=>e===null?"":e)}trim(e=Gs.trim){return this.transform(t=>t!=null?t.trim():t).test({message:e,name:"trim",test:sze})}lowercase(e=Gs.lowercase){return this.transform(t=>zr(t)?t:t.toLowerCase()).test({message:e,name:"string_case",exclusive:!0,test:t=>zr(t)||t===t.toLowerCase()})}uppercase(e=Gs.uppercase){return this.transform(t=>zr(t)?t:t.toUpperCase()).test({message:e,name:"string_case",exclusive:!0,test:t=>zr(t)||t===t.toUpperCase()})}}Ir.prototype=aZ.prototype;let oze=r=>r!=+r;function mP(){return new oZ}class oZ extends mi{constructor(){super({type:"number"}),this.withMutation(()=>{this.transform(function(e){let t=e;if(typeof t=="string"){if(t=t.replace(/\s/g,""),t==="")return NaN;t=+t}return this.isType(t)?t:parseFloat(t)})})}_typeCheck(e){return e instanceof Number&&(e=e.valueOf()),typeof e=="number"&&!oze(e)}min(e,t=jl.min){return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(n){return zr(n)||n>=this.resolve(e)}})}max(e,t=jl.max){return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(n){return zr(n)||n<=this.resolve(e)}})}lessThan(e,t=jl.lessThan){return this.test({message:t,name:"max",exclusive:!0,params:{less:e},test(n){return zr(n)||n<this.resolve(e)}})}moreThan(e,t=jl.moreThan){return this.test({message:t,name:"min",exclusive:!0,params:{more:e},test(n){return zr(n)||n>this.resolve(e)}})}positive(e=jl.positive){return this.moreThan(0,e)}negative(e=jl.negative){return this.lessThan(0,e)}integer(e=jl.integer){return this.test({name:"integer",message:e,test:t=>zr(t)||Number.isInteger(t)})}truncate(){return this.transform(e=>zr(e)?e:e|0)}round(e){var t,n=["ceil","floor","round","trunc"];if(e=((t=e)==null?void 0:t.toLowerCase())||"round",e==="trunc")return this.truncate();if(n.indexOf(e.toLowerCase())===-1)throw new TypeError("Only valid options for round() are: "+n.join(", "));return this.transform(i=>zr(i)?i:Math[e](i))}}mP.prototype=oZ.prototype;var lze=/^(\d{4}|[+\-]\d{6})(?:-?(\d{2})(?:-?(\d{2}))?)?(?:[ T]?(\d{2}):?(\d{2})(?::?(\d{2})(?:[,\.](\d{1,}))?)?(?:(Z)|([+\-])(\d{2})(?::?(\d{2}))?)?)?$/;function cze(r){var e=[1,4,5,6,7,10,11],t=0,n,i;if(i=lze.exec(r)){for(var s=0,a;a=e[s];++s)i[a]=+i[a]||0;i[2]=(+i[2]||1)-1,i[3]=+i[3]||1,i[7]=i[7]?String(i[7]).substr(0,3):0,(i[8]===void 0||i[8]==="")&&(i[9]===void 0||i[9]==="")?n=+new Date(i[1],i[2],i[3],i[4],i[5],i[6],i[7]):(i[8]!=="Z"&&i[9]!==void 0&&(t=i[10]*60+i[11],i[9]==="+"&&(t=0-t)),n=Date.UTC(i[1],i[2],i[3],i[4],i[5]+t,i[6],i[7]))}else n=Date.parse?Date.parse(r):NaN;return n}let lZ=new Date(""),uze=r=>Object.prototype.toString.call(r)==="[object Date]";class dze extends mi{constructor(){super({type:"date"}),this.withMutation(()=>{this.transform(function(e){return this.isType(e)?e:(e=cze(e),isNaN(e)?lZ:new Date(e))})})}_typeCheck(e){return uze(e)&&!isNaN(e.getTime())}prepareParam(e,t){let n;if(Vc.isRef(e))n=e;else{let i=this.cast(e);if(!this._typeCheck(i))throw new TypeError(`\`${t}\` must be a Date or a value that can be \`cast()\` to a Date`);n=i}return n}min(e,t=o$.min){let n=this.prepareParam(e,"min");return this.test({message:t,name:"min",exclusive:!0,params:{min:e},test(i){return zr(i)||i>=this.resolve(n)}})}max(e,t=o$.max){var n=this.prepareParam(e,"max");return this.test({message:t,name:"max",exclusive:!0,params:{max:e},test(i){return zr(i)||i<=this.resolve(n)}})}}dze.INVALID_DATE=lZ;var hze=QX,fze=hze(function(r,e,t){return r+(t?"_":"")+e.toLowerCase()}),pze=fze;const Va=Ls(pze);var mze=Mv,gze=eZ,vze=uP;function yze(r,e){var t={};return e=vze(e),gze(r,function(n,i,s){mze(t,e(n,i,s),n)}),t}var bze=yze;const Eze=Ls(bze);var gP={exports:{}};gP.exports=function(r){return cZ(xze(r),r)};gP.exports.array=cZ;function cZ(r,e){var t=r.length,n=new Array(t),i={},s=t,a=wze(e),o=Tze(r);for(e.forEach(function(c){if(!o.has(c[0])||!o.has(c[1]))throw new Error("Unknown node. There is an unknown node in the supplied edges.")});s--;)i[s]||l(r[s],s,new Set);return n;function l(c,u,d){if(d.has(c)){var h;try{h=", node was:"+JSON.stringify(c)}catch{h=""}throw new Error("Cyclic dependency"+h)}if(!o.has(c))throw new Error("Found unknown node. Make sure to provided all involved nodes. Unknown node: "+JSON.stringify(c));if(!i[u]){i[u]=!0;var f=a.get(c)||new Set;if(f=Array.from(f),u=f.length){d.add(c);do{var m=f[--u];l(m,o.get(m),d)}while(u);d.delete(c)}n[--t]=c}}}function xze(r){for(var e=new Set,t=0,n=r.length;t<n;t++){var i=r[t];e.add(i[0]),e.add(i[1])}return Array.from(e)}function wze(r){for(var e=new Map,t=0,n=r.length;t<n;t++){var i=r[t];e.has(i[0])||e.set(i[0],new Set),e.has(i[1])||e.set(i[1],new Set),e.get(i[0]).add(i[1])}return e}function Tze(r){for(var e=new Map,t=0,n=r.length;t<n;t++)e.set(r[t],t);return e}var Sze=gP.exports;const Aze=Ls(Sze);function _ze(r,e=[]){let t=[],n=[];function i(s,a){var o=pS.split(s)[0];~n.indexOf(o)||n.push(o),~e.indexOf(`${a}-${o}`)||t.push([a,o])}for(const s in r)if(ow(r,s)){let a=r[s];~n.indexOf(s)||n.push(s),Vc.isRef(a)&&a.isSibling?i(a.path,s):ZX(a)&&"deps"in a&&a.deps.forEach(o=>i(o,s))}return Aze.array(n,t).reverse()}function A7(r,e){let t=1/0;return r.some((n,i)=>{var s;if(((s=e.path)==null?void 0:s.indexOf(n))!==-1)return t=i,!0}),t}function uZ(r){return(e,t)=>A7(r,e)-A7(r,t)}function yf(){return yf=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},yf.apply(this,arguments)}let _7=r=>Object.prototype.toString.call(r)==="[object Object]";function Cze(r,e){let t=Object.keys(r.fields);return Object.keys(e).filter(n=>t.indexOf(n)===-1)}const Rze=uZ([]);class dZ extends mi{constructor(e){super({type:"object"}),this.fields=Object.create(null),this._sortErrors=Rze,this._nodes=[],this._excludedEdges=[],this.withMutation(()=>{this.transform(function(n){if(typeof n=="string")try{n=JSON.parse(n)}catch{n=null}return this.isType(n)?n:null}),e&&this.shape(e)})}_typeCheck(e){return _7(e)||typeof e=="function"}_cast(e,t={}){var n;let i=super._cast(e,t);if(i===void 0)return this.getDefault();if(!this._typeCheck(i))return i;let s=this.fields,a=(n=t.stripUnknown)!=null?n:this.spec.noUnknown,o=this._nodes.concat(Object.keys(i).filter(d=>this._nodes.indexOf(d)===-1)),l={},c=yf({},t,{parent:l,__validating:t.__validating||!1}),u=!1;for(const d of o){let h=s[d],f=ow(i,d);if(h){let m,g=i[d];c.path=(t.path?`${t.path}.`:"")+d,h=h.resolve({value:g,context:t.context,parent:l});let y="spec"in h?h.spec:void 0,b=y?.strict;if(y?.strip){u=u||d in i;continue}m=!t.__validating||!b?h.cast(i[d],c):i[d],m!==void 0&&(l[d]=m)}else f&&!a&&(l[d]=i[d]);l[d]!==i[d]&&(u=!0)}return u?l:i}_validate(e,t={},n){let i=[],{sync:s,from:a=[],originalValue:o=e,abortEarly:l=this.spec.abortEarly,recursive:c=this.spec.recursive}=t;a=[{schema:this,value:o},...a],t.__validating=!0,t.originalValue=o,t.from=a,super._validate(e,t,(u,d)=>{if(u){if(!rs.isError(u)||l)return void n(u,d);i.push(u)}if(!c||!_7(d)){n(i[0]||null,d);return}o=o||d;let h=this._nodes.map(f=>(m,g)=>{let y=f.indexOf(".")===-1?(t.path?`${t.path}.`:"")+f:`${t.path||""}["${f}"]`,b=this.fields[f];if(b&&"validate"in b){b.validate(d[f],yf({},t,{path:y,from:a,strict:!0,parent:d,originalValue:o[f]}),g);return}g(null)});d$({tests:h,value:d,errors:i,endEarly:l,sort:this._sortErrors,path:t.path},n)})}clone(e){const t=super.clone(e);return t.fields=yf({},this.fields),t._nodes=this._nodes,t._excludedEdges=this._excludedEdges,t._sortErrors=this._sortErrors,t}concat(e){let t=super.concat(e),n=t.fields;for(let[i,s]of Object.entries(this.fields)){const a=n[i];a===void 0?n[i]=s:a instanceof mi&&s instanceof mi&&(n[i]=s.concat(a))}return t.withMutation(()=>t.shape(n))}getDefaultFromShape(){let e={};return this._nodes.forEach(t=>{const n=this.fields[t];e[t]="default"in n?n.getDefault():void 0}),e}_getDefault(){if("default"in this.spec)return super._getDefault();if(this._nodes.length)return this.getDefaultFromShape()}shape(e,t=[]){let n=this.clone(),i=Object.assign(n.fields,e);if(n.fields=i,n._sortErrors=uZ(Object.keys(i)),t.length){Array.isArray(t[0])||(t=[t]);let s=t.map(([a,o])=>`${a}-${o}`);n._excludedEdges=n._excludedEdges.concat(s)}return n._nodes=_ze(i,n._excludedEdges),n}pick(e){const t={};for(const n of e)this.fields[n]&&(t[n]=this.fields[n]);return this.clone().withMutation(n=>(n.fields={},n.shape(t)))}omit(e){const t=this.clone(),n=t.fields;t.fields={};for(const i of e)delete n[i];return t.withMutation(()=>t.shape(n))}from(e,t,n){let i=pS.getter(e,!0);return this.transform(s=>{if(s==null)return s;let a=s;return ow(s,e)&&(a=yf({},s),n||delete a[e],a[t]=i(s)),a})}noUnknown(e=!0,t=c$.noUnknown){typeof e=="string"&&(t=e,e=!0);let n=this.test({name:"noUnknown",exclusive:!0,message:t,test(i){if(i==null)return!0;const s=Cze(this.schema,i);return!e||s.length===0||this.createError({params:{unknown:s.join(", ")}})}});return n.spec.noUnknown=e,n}unknown(e=!0,t=c$.noUnknown){return this.noUnknown(!e,t)}transformKeys(e){return this.transform(t=>t&&Eze(t,(n,i)=>e(i)))}camelCase(){return this.transformKeys(wKe)}snakeCase(){return this.transformKeys(Va)}constantCase(){return this.transformKeys(e=>Va(e).toUpperCase())}describe(){let e=super.describe();return e.fields=rZ(this.fields,t=>t.describe()),e}}function vo(r){return new dZ(r)}vo.prototype=dZ.prototype;function kze(r){var e=r==null?0:r.length;return e?r[e-1]:void 0}var Ize=kze,$ze=eS,Dze=pQ;function Lze(r,e){return e.length<2?r:$ze(r,Dze(e,0,-1))}var Oze=Lze,Pze=Kp,Mze=Ize,Nze=Oze,Fze=zd;function Bze(r,e){return e=Pze(e,r),r=Nze(r,e),r==null||delete r[Fze(Mze(e))]}var Uze=Bze,Wze=wO;function Hze(r){return Wze(r)?void 0:r}var Vze=Hze,Gze=$O,qze=lP,jze=Uze,Kze=Kp,zze=qp,Yze=Vze,Qze=tS,Xze=uX,Zze=1,Jze=2,eYe=4;Qze(function(r,e){var t={};if(r==null)return t;var n=!1;e=Gze(e,function(s){return s=Kze(s,r),n||(n=s.length>1),s}),zze(r,Xze(r),t),n&&(t=qze(t,Zze|Jze|eYe,Yze));for(var i=e.length;i--;)jze(t,e[i]);return t});Co("History",{history:[],currentLocationIndex:0,currentLocation:"",canGoBack:!1,pushState:()=>{throw new Error("You must use the `HistoryProvider` to access the `pushState` function.")},goBack:()=>{throw new Error("You must use the `HistoryProvider` to access the `goBack` function.")}});new Yqe({defaultOptions:{queries:{refetchOnWindowFocus:!1}}});q(fCe)`
  & > div:first-child {
    display: none;
  }

  & > button {
    display: none;
  }
`;q(Je)`
  word-break: break-all;
  color: ${({theme:r})=>r.colors.danger600};
`;const tYe={S:180,M:250};q(De)`
  display: grid;
  grid-template-columns: repeat(
    auto-fit,
    minmax(${({$size:r})=>`${tYe[r]}px`}, 1fr)
  );
  grid-gap: ${({theme:r})=>r.spaces[4]};
`;q(De)`
  display: grid;
  grid-template-columns: ${({$hasSideNav:r})=>r?"auto 1fr":"1fr"};
`;q(De)`
  overflow-x: hidden;
`;const Wo="The Form Component has not been initialised, ensure you are using this hook within a Form component";Co("Form",{disabled:!1,errors:{},initialValues:{},isSubmitting:!1,modified:!1,addFieldRow:()=>{throw new Error(Wo)},moveFieldRow:()=>{throw new Error(Wo)},onChange:()=>{throw new Error(Wo)},removeFieldRow:()=>{throw new Error(Wo)},resetForm:()=>{throw new Error(Wo)},setErrors:()=>{throw new Error(Wo)},setValues:()=>{throw new Error(Wo)},setSubmitting:()=>{throw new Error(Wo)},validate:async()=>{throw new Error(Wo)},values:{}});q.img`
  height: 7.2rem;
`;q(De)`
  margin: 0 auto;
  width: 552px;
`;q(Ie)`
  flex-direction: column;
`;const Qr={email:{id:"components.Input.error.validation.email"},lowercase:{id:"components.Input.error.validation.lowercase"},max:{id:"components.Input.error.validation.max"},min:{id:"components.Input.error.validation.min"},minLength:{id:"components.Input.error.validation.minLength"},required:{id:"components.Input.error.validation.required",defaultMessage:"This value is required."}};vo().shape({email:Ir().nullable().email({id:Qr.email.id,defaultMessage:"Not a valid email"}).required(Qr.required),password:Ir().required(Qr.required).nullable(),rememberMe:iZ().nullable()});q(Fz.Root)`
  height: 3.2rem;
  width: 3.2rem;

  > label,
  ~ input {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }

  > label {
    color: inherit;
    cursor: pointer;
    padding: ${({theme:r})=>r.spaces[2]};
    text-align: center;
    vertical-align: middle;
  }

  &:hover,
  &:focus-within {
    background-color: ${({theme:r})=>r.colors.neutral0};
  }

  &:active,
  &.selected {
    color: ${({theme:r})=>r.colors.primary700};
    background-color: ${({theme:r})=>r.colors.neutral0};
    border-color: ${({theme:r})=>r.colors.primary700};
  }
`;[...Array(11).keys()];vo().shape({firstname:Ir().trim().required(Qr.required).nullable(),lastname:Ir().nullable(),password:Ir().min(8,{id:Qr.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).test("max-bytes",{id:"components.Input.error.contain.maxBytes",defaultMessage:"Password must be less than 73 bytes"},function(r){return!r||typeof r!="string"?!0:RX(r)<=72}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:Qr.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:Ir().required({id:Qr.required.id,defaultMessage:"Confirm password is required"}).oneOf([pP("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}).nullable(),registrationToken:Ir().required({id:Qr.required.id,defaultMessage:"Registration token is required"})});vo().shape({firstname:Ir().trim().required({id:Qr.required.id,defaultMessage:"Firstname is required"}).nullable(),lastname:Ir().nullable(),password:Ir().min(8,{id:Qr.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).test("max-bytes",{id:"components.Input.error.contain.maxBytes",defaultMessage:"Password must be less than 73 bytes"},function(r){return r?new TextEncoder().encode(r).length<=72:!0}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:Qr.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:Ir().required({id:Qr.required,defaultMessage:"Confirm password is required"}).nullable().oneOf([pP("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}),email:Ir().email({id:Qr.email.id,defaultMessage:"Not a valid email"}).strict().lowercase({id:Qr.lowercase.id,defaultMessage:"Email must be lowercase"}).required({id:Qr.required.id,defaultMessage:"Email is required"}).nullable()});q.a`
  color: ${({theme:r})=>r.colors.primary600};
`;vo().shape({password:Ir().min(8,{id:Qr.minLength.id,defaultMessage:"Password must be at least 8 characters",values:{min:8}}).test("required-byte-size",{id:"components.Input.error.contain.maxBytes",defaultMessage:"Password must be less than 73 bytes"},function(r){return!r||typeof r!="string"?!0:RX(r)<=72}).matches(/[a-z]/,{message:{id:"components.Input.error.contain.lowercase",defaultMessage:"Password must contain at least 1 lowercase letter"}}).matches(/[A-Z]/,{message:{id:"components.Input.error.contain.uppercase",defaultMessage:"Password must contain at least 1 uppercase letter"}}).matches(/\d/,{message:{id:"components.Input.error.contain.number",defaultMessage:"Password must contain at least 1 number"}}).required({id:Qr.required.id,defaultMessage:"Password is required"}).nullable(),confirmPassword:Ir().required({id:Qr.required.id,defaultMessage:"Confirm password is required"}).oneOf([pP("password"),null],{id:"components.Input.error.password.noMatch",defaultMessage:"Passwords must match"}).nullable()});xl.reducerPath+"",xl.reducer;q(S2)`
  width: 24px;
  height: 24px;

  path {
    fill: ${({theme:r})=>r.colors.danger600};
  }
`;Co("Filters");Co("Pagination");Co("Table");q(Dc)`
  transform: ${({$isUp:r})=>`rotate(${r?"180":"0"}deg)`};
`;q(Ie)`
  margin-right: ${({theme:r})=>r.spaces[6]};

  svg {
    width: 3.2rem;
    height: 3.2rem;
  }
`;q(Je)`
  color: ${({theme:r})=>r.colors.neutral800};
  word-break: break-all;
`;const rYe=xl.enhanceEndpoints({addTagTypes:["LicenseLimits","User","Role","RolePermissions"]}).injectEndpoints({endpoints:r=>({createUser:r.mutation({query:e=>({url:"/admin/users",method:"POST",data:e}),transformResponse:e=>e.data,invalidatesTags:["LicenseLimits",{type:"User",id:"LIST"}]}),updateUser:r.mutation({query:({id:e,...t})=>({url:`/admin/users/${e}`,method:"PUT",data:t}),invalidatesTags:(e,t,{id:n})=>[{type:"User",id:n},{type:"User",id:"LIST"}]}),getUsers:r.query({query:({id:e,...t}={})=>({url:`/admin/users/${e??""}`,method:"GET",config:{params:t}}),transformResponse:e=>{let t=[];return e.data&&("results"in e.data?Array.isArray(e.data.results)&&(t=e.data.results):t=[e.data]),{users:t,pagination:"pagination"in e.data?e.data.pagination:null}},providesTags:(e,t,n)=>typeof n=="object"&&"id"in n?[{type:"User",id:n.id}]:[...e?.users.map(({id:i})=>({type:"User",id:i}))??[],{type:"User",id:"LIST"}]}),deleteManyUsers:r.mutation({query:e=>({url:"/admin/users/batch-delete",method:"POST",data:e}),transformResponse:e=>e.data,invalidatesTags:["LicenseLimits",{type:"User",id:"LIST"}]}),createRole:r.mutation({query:e=>({url:"/admin/roles",method:"POST",data:e}),transformResponse:e=>e.data,invalidatesTags:[{type:"Role",id:"LIST"}]}),getRoles:r.query({query:({id:e,...t}={})=>({url:`/admin/roles/${e??""}`,method:"GET",config:{params:t}}),transformResponse:e=>{let t=[];return e.data&&(Array.isArray(e.data)?t=e.data:t=[e.data]),t},providesTags:(e,t,n)=>typeof n=="object"&&"id"in n?[{type:"Role",id:n.id}]:[...e?.map(({id:i})=>({type:"Role",id:i}))??[],{type:"Role",id:"LIST"}]}),updateRole:r.mutation({query:({id:e,...t})=>({url:`/admin/roles/${e}`,method:"PUT",data:t}),transformResponse:e=>e.data,invalidatesTags:(e,t,{id:n})=>[{type:"Role",id:n}]}),getRolePermissions:r.query({query:({id:e,...t})=>({url:`/admin/roles/${e}/permissions`,method:"GET",config:{params:t}}),transformResponse:e=>e.data,providesTags:(e,t,{id:n})=>[{type:"RolePermissions",id:n}]}),updateRolePermissions:r.mutation({query:({id:e,...t})=>({url:`/admin/roles/${e}/permissions`,method:"PUT",data:t}),transformResponse:e=>e.data,invalidatesTags:(e,t,{id:n})=>[{type:"RolePermissions",id:n}]}),getRolePermissionLayout:r.query({query:e=>({url:"/admin/permissions",method:"GET",config:{params:e}}),transformResponse:e=>e.data})}),overrideExisting:!1}),{useCreateUserMutation:Ydt,useGetUsersQuery:Qdt,useUpdateUserMutation:Xdt,useDeleteManyUsersMutation:Zdt,useGetRolesQuery:Jdt,useCreateRoleMutation:eht,useUpdateRoleMutation:tht,useGetRolePermissionsQuery:rht,useGetRolePermissionLayoutQuery:nht,useUpdateRolePermissionsMutation:iht}=rYe;var hZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),nYe=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},M0=function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r},iYe=Object.defineProperty,sYe=Object.defineProperties,aYe=Object.getOwnPropertyDescriptors,C7=Object.getOwnPropertySymbols,oYe=Object.prototype.hasOwnProperty,lYe=Object.prototype.propertyIsEnumerable,R7=function(r,e,t){return e in r?iYe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},gd=function(r,e){for(var t in e||(e={}))oYe.call(e,t)&&R7(r,t,e[t]);if(C7)for(var n=0,i=C7(e);n<i.length;n++){var t=i[n];lYe.call(e,t)&&R7(r,t,e[t])}return r},qC=function(r,e){return sYe(r,aYe(e))},cYe=function(r,e,t){return new Promise(function(n,i){var s=function(l){try{o(t.next(l))}catch(c){i(c)}},a=function(l){try{o(t.throw(l))}catch(c){i(c)}},o=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(s,a)};o((t=t.apply(r,e)).next())})};function Cc(r,e){function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var s=e.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return gd(gd({type:r,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:r,payload:n[0]}}return t.toString=function(){return""+r},t.type=r,t.match=function(n){return n.type===r},t}(function(r){hZ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,M0([void 0],t[0].concat(this)))):new(e.bind.apply(e,M0([void 0],t.concat(this))))},e})(Array);(function(r){hZ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,M0([void 0],t[0].concat(this)))):new(e.bind.apply(e,M0([void 0],t.concat(this))))},e})(Array);function f$(r){return gi(r)?_l(r,function(){}):r}function fZ(r){var e={},t=[],n,i={addCase:function(s,a){{if(t.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(n)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}var o=typeof s=="string"?s:s.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[o]=a,i},addMatcher:function(s,a){if(n)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return t.push({matcher:s,reducer:a}),i},addDefaultCase:function(s){if(n)throw new Error("`builder.addDefaultCase` can only be called once");return n=s,i}};return r(i),[e,t,n]}function uYe(r){return typeof r=="function"}var k7=!1;function dYe(r,e,t,n){t===void 0&&(t=[]),typeof e=="object"&&(k7||(k7=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var i=typeof e=="function"?fZ(e):[e,t,n],s=i[0],a=i[1],o=i[2],l;if(uYe(r))l=function(){return f$(r())};else{var c=f$(r);l=function(){return c}}function u(d,h){d===void 0&&(d=l());var f=M0([s[h.type]],a.filter(function(m){var g=m.matcher;return g(h)}).map(function(m){var g=m.reducer;return g}));return f.filter(function(m){return!!m}).length===0&&(f=[o]),f.reduce(function(m,g){if(g)if(is(m)){var y=m,b=g(y,h);return b===void 0?m:b}else{if(gi(m))return _l(m,function(E){return g(E,h)});var b=g(m,h);if(b===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return m},d)}return u.getInitialState=l,u}var I7=!1;function hYe(r,e){return r+"/"+e}function pZ(r){var e=r.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u"&&r.initialState===void 0&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var t=typeof r.initialState=="function"?r.initialState:f$(r.initialState),n=r.reducers||{},i=Object.keys(n),s={},a={},o={};i.forEach(function(u){var d=n[u],h=hYe(e,u),f,m;"reducer"in d?(f=d.reducer,m=d.prepare):f=d,s[u]=f,a[h]=f,o[u]=m?Cc(h,m):Cc(h)});function l(){typeof r.extraReducers=="object"&&(I7||(I7=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var u=typeof r.extraReducers=="function"?fZ(r.extraReducers):[r.extraReducers],d=u[0],h=d===void 0?{}:d,f=u[1],m=f===void 0?[]:f,g=u[2],y=g===void 0?void 0:g,b=gd(gd({},h),a);return dYe(t,function(E){for(var w in b)E.addCase(w,b[w]);for(var A=0,S=m;A<S.length;A++){var _=S[A];E.addMatcher(_.matcher,_.reducer)}y&&E.addDefaultCase(y)})}var c;return{name:e,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:o,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var fYe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",pYe=function(r){r===void 0&&(r=21);for(var e="",t=r;t--;)e+=fYe[Math.random()*64|0];return e},mYe=["name","message","stack","code"],jC=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),$7=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),gYe=function(r){if(typeof r=="object"&&r!==null){for(var e={},t=0,n=mYe;t<n.length;t++){var i=n[t];typeof r[i]=="string"&&(e[i]=r[i])}return e}return{message:String(r)}};(function(){function r(e,t,n){var i=Cc(e+"/fulfilled",function(u,d,h,f){return{payload:u,meta:qC(gd({},f||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Cc(e+"/pending",function(u,d,h){return{payload:void 0,meta:qC(gd({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=Cc(e+"/rejected",function(u,d,h,f,m){return{payload:f,error:(n&&n.serializeError||gYe)(u||"Rejected"),meta:qC(gd({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"})}}),o=!1,l=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},u}();function c(u){return function(d,h,f){var m=n?.idGenerator?n.idGenerator(u):pYe(),g=new l,y;function b(w){y=w,g.abort()}var E=function(){return cYe(this,null,function(){var w,A,S,_,C,k,D;return nYe(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),_=(w=n?.condition)==null?void 0:w.call(n,u,{getState:h,extra:f}),yYe(_)?[4,_]:[3,2];case 1:_=I.sent(),I.label=2;case 2:if(_===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(L,M){return g.signal.addEventListener("abort",function(){return M({name:"AbortError",message:y||"Aborted"})})}),d(s(m,u,(A=n?.getPendingMeta)==null?void 0:A.call(n,{requestId:m,arg:u},{getState:h,extra:f}))),[4,Promise.race([C,Promise.resolve(t(u,{dispatch:d,getState:h,extra:f,requestId:m,signal:g.signal,abort:b,rejectWithValue:function(L,M){return new jC(L,M)},fulfillWithValue:function(L,M){return new $7(L,M)}})).then(function(L){if(L instanceof jC)throw L;return L instanceof $7?i(L.payload,m,u,L.meta):i(L,m,u)})])];case 3:return S=I.sent(),[3,5];case 4:return k=I.sent(),S=k instanceof jC?a(null,m,u,k.payload,k.meta):a(k,m,u),[3,5];case 5:return D=n&&!n.dispatchConditionRejection&&a.match(S)&&S.meta.condition,D||d(S),[2,S]}})})}();return Object.assign(E,{abort:b,requestId:m,arg:u,unwrap:function(){return E.then(vYe)}})}}return Object.assign(c,{pending:s,rejected:a,fulfilled:i,typePrefix:e})}return r.withTypes=function(){return r},r})();function vYe(r){if(r.meta&&r.meta.rejectedWithValue)throw r.payload;if(r.error)throw r.error;return r.payload}function yYe(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var vP="listenerMiddleware";Cc(vP+"/add");Cc(vP+"/removeAll");Cc(vP+"/remove");var D7;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);MO();var mZ={exports:{}};(function(r,e){(function(t,n){typeof mde=="function"?r.exports=n():t.pluralize=n()})(Rn,function(){var t=[],n=[],i={},s={},a={};function o(g){return typeof g=="string"?new RegExp("^"+g+"$","i"):g}function l(g,y){return g===y?y:g===g.toLowerCase()?y.toLowerCase():g===g.toUpperCase()?y.toUpperCase():g[0]===g[0].toUpperCase()?y.charAt(0).toUpperCase()+y.substr(1).toLowerCase():y.toLowerCase()}function c(g,y){return g.replace(/\$(\d{1,2})/g,function(b,E){return y[E]||""})}function u(g,y){return g.replace(y[0],function(b,E){var w=c(y[1],arguments);return l(b===""?g[E-1]:b,w)})}function d(g,y,b){if(!g.length||i.hasOwnProperty(g))return y;for(var E=b.length;E--;){var w=b[E];if(w[0].test(y))return u(y,w)}return y}function h(g,y,b){return function(E){var w=E.toLowerCase();return y.hasOwnProperty(w)?l(E,w):g.hasOwnProperty(w)?l(E,g[w]):d(w,E,b)}}function f(g,y,b,E){return function(w){var A=w.toLowerCase();return y.hasOwnProperty(A)?!0:g.hasOwnProperty(A)?!1:d(A,A,b)===A}}function m(g,y,b){var E=y===1?m.singular(g):m.plural(g);return(b?y+" ":"")+E}return m.plural=h(a,s,t),m.isPlural=f(a,s,t),m.singular=h(s,a,n),m.isSingular=f(s,a,n),m.addPluralRule=function(g,y){t.push([o(g),y])},m.addSingularRule=function(g,y){n.push([o(g),y])},m.addUncountableRule=function(g){if(typeof g=="string"){i[g.toLowerCase()]=!0;return}m.addPluralRule(g,"$0"),m.addSingularRule(g,"$0")},m.addIrregularRule=function(g,y){y=y.toLowerCase(),g=g.toLowerCase(),a[g]=y,s[y]=g},[["I","we"],["me","us"],["he","they"],["she","they"],["them","them"],["myself","ourselves"],["yourself","yourselves"],["itself","themselves"],["herself","themselves"],["himself","themselves"],["themself","themselves"],["is","are"],["was","were"],["has","have"],["this","these"],["that","those"],["echo","echoes"],["dingo","dingoes"],["volcano","volcanoes"],["tornado","tornadoes"],["torpedo","torpedoes"],["genus","genera"],["viscus","viscera"],["stigma","stigmata"],["stoma","stomata"],["dogma","dogmata"],["lemma","lemmata"],["schema","schemata"],["anathema","anathemata"],["ox","oxen"],["axe","axes"],["die","dice"],["yes","yeses"],["foot","feet"],["eave","eaves"],["goose","geese"],["tooth","teeth"],["quiz","quizzes"],["human","humans"],["proof","proofs"],["carve","carves"],["valve","valves"],["looey","looies"],["thief","thieves"],["groove","grooves"],["pickaxe","pickaxes"],["passerby","passersby"]].forEach(function(g){return m.addIrregularRule(g[0],g[1])}),[[/s?$/i,"s"],[/[^\u0000-\u007F]$/i,"$0"],[/([^aeiou]ese)$/i,"$1"],[/(ax|test)is$/i,"$1es"],[/(alias|[^aou]us|t[lm]as|gas|ris)$/i,"$1es"],[/(e[mn]u)s?$/i,"$1s"],[/([^l]ias|[aeiou]las|[ejzr]as|[iu]am)$/i,"$1"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1i"],[/(alumn|alg|vertebr)(?:a|ae)$/i,"$1ae"],[/(seraph|cherub)(?:im)?$/i,"$1im"],[/(her|at|gr)o$/i,"$1oes"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|automat|quor)(?:a|um)$/i,"$1a"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)(?:a|on)$/i,"$1a"],[/sis$/i,"ses"],[/(?:(kni|wi|li)fe|(ar|l|ea|eo|oa|hoo)f)$/i,"$1$2ves"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/([^ch][ieo][ln])ey$/i,"$1ies"],[/(x|ch|ss|sh|zz)$/i,"$1es"],[/(matr|cod|mur|sil|vert|ind|append)(?:ix|ex)$/i,"$1ices"],[/\b((?:tit)?m|l)(?:ice|ouse)$/i,"$1ice"],[/(pe)(?:rson|ople)$/i,"$1ople"],[/(child)(?:ren)?$/i,"$1ren"],[/eaux$/i,"$0"],[/m[ae]n$/i,"men"],["thou","you"]].forEach(function(g){return m.addPluralRule(g[0],g[1])}),[[/s$/i,""],[/(ss)$/i,"$1"],[/(wi|kni|(?:after|half|high|low|mid|non|night|[^\w]|^)li)ves$/i,"$1fe"],[/(ar|(?:wo|[ae])l|[eo][ao])ves$/i,"$1f"],[/ies$/i,"y"],[/\b([pl]|zomb|(?:neck|cross)?t|coll|faer|food|gen|goon|group|lass|talk|goal|cut)ies$/i,"$1ie"],[/\b(mon|smil)ies$/i,"$1ey"],[/\b((?:tit)?m|l)ice$/i,"$1ouse"],[/(seraph|cherub)im$/i,"$1"],[/(x|ch|ss|sh|zz|tto|go|cho|alias|[^aou]us|t[lm]as|gas|(?:her|at|gr)o|[aeiou]ris)(?:es)?$/i,"$1"],[/(analy|diagno|parenthe|progno|synop|the|empha|cri|ne)(?:sis|ses)$/i,"$1sis"],[/(movie|twelve|abuse|e[mn]u)s$/i,"$1"],[/(test)(?:is|es)$/i,"$1is"],[/(alumn|syllab|vir|radi|nucle|fung|cact|stimul|termin|bacill|foc|uter|loc|strat)(?:us|i)$/i,"$1us"],[/(agend|addend|millenni|dat|extrem|bacteri|desiderat|strat|candelabr|errat|ov|symposi|curricul|quor)a$/i,"$1um"],[/(apheli|hyperbat|periheli|asyndet|noumen|phenomen|criteri|organ|prolegomen|hedr|automat)a$/i,"$1on"],[/(alumn|alg|vertebr)ae$/i,"$1a"],[/(cod|mur|sil|vert|ind)ices$/i,"$1ex"],[/(matr|append)ices$/i,"$1ix"],[/(pe)(rson|ople)$/i,"$1rson"],[/(child)ren$/i,"$1"],[/(eau)x?$/i,"$1"],[/men$/i,"man"]].forEach(function(g){return m.addSingularRule(g[0],g[1])}),["adulthood","advice","agenda","aid","aircraft","alcohol","ammo","analytics","anime","athletics","audio","bison","blood","bream","buffalo","butter","carp","cash","chassis","chess","clothing","cod","commerce","cooperation","corps","debris","diabetes","digestion","elk","energy","equipment","excretion","expertise","firmware","flounder","fun","gallows","garbage","graffiti","hardware","headquarters","health","herpes","highjinks","homework","housework","information","jeans","justice","kudos","labour","literature","machinery","mackerel","mail","media","mews","moose","music","mud","manga","news","only","personnel","pike","plankton","pliers","police","pollution","premises","rain","research","rice","salmon","scissors","series","sewage","shambles","shrimp","software","species","staff","swine","tennis","traffic","transportation","trout","tuna","wealth","welfare","whiting","wildebeest","wildlife","you",/pok[eé]mon$/i,/[^aeiou]ese$/i,/deer$/i,/fish$/i,/measles$/i,/o[iu]s$/i,/pox$/i,/sheep$/i].forEach(m.addUncountableRule),m})})(mZ);var bYe=mZ.exports;const hu=Ls(bYe);var yP={exports:{}},EYe=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")},xYe="[object Symbol]",wYe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,TYe="\\u0300-\\u036f\\ufe20-\\ufe23",SYe="\\u20d0-\\u20f0",AYe="["+TYe+SYe+"]",_Ye=RegExp(AYe,"g"),CYe={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"ss"},RYe=typeof Rn=="object"&&Rn&&Rn.Object===Object&&Rn,kYe=typeof self=="object"&&self&&self.Object===Object&&self,IYe=RYe||kYe||Function("return this")();function $Ye(r){return function(e){return r?.[e]}}var DYe=$Ye(CYe),LYe=Object.prototype,OYe=LYe.toString,L7=IYe.Symbol,O7=L7?L7.prototype:void 0,P7=O7?O7.toString:void 0;function PYe(r){if(typeof r=="string")return r;if(NYe(r))return P7?P7.call(r):"";var e=r+"";return e=="0"&&1/r==-1/0?"-0":e}function MYe(r){return!!r&&typeof r=="object"}function NYe(r){return typeof r=="symbol"||MYe(r)&&OYe.call(r)==xYe}function FYe(r){return r==null?"":PYe(r)}function BYe(r){return r=FYe(r),r&&r.replace(wYe,DYe).replace(_Ye,"")}var UYe=BYe;const WYe=/[|\\{}()[\]^$+*?.-]/g;var HYe=r=>{if(typeof r!="string")throw new TypeError("Expected a string");return r.replace(WYe,"\\$&")},VYe=[["ß","ss"],["ä","ae"],["Ä","Ae"],["ö","oe"],["Ö","Oe"],["ü","ue"],["Ü","Ue"],["À","A"],["Á","A"],["Â","A"],["Ã","A"],["Ä","Ae"],["Å","A"],["Æ","AE"],["Ç","C"],["È","E"],["É","E"],["Ê","E"],["Ë","E"],["Ì","I"],["Í","I"],["Î","I"],["Ï","I"],["Ð","D"],["Ñ","N"],["Ò","O"],["Ó","O"],["Ô","O"],["Õ","O"],["Ö","Oe"],["Ő","O"],["Ø","O"],["Ù","U"],["Ú","U"],["Û","U"],["Ü","Ue"],["Ű","U"],["Ý","Y"],["Þ","TH"],["ß","ss"],["à","a"],["á","a"],["â","a"],["ã","a"],["ä","ae"],["å","a"],["æ","ae"],["ç","c"],["è","e"],["é","e"],["ê","e"],["ë","e"],["ì","i"],["í","i"],["î","i"],["ï","i"],["ð","d"],["ñ","n"],["ò","o"],["ó","o"],["ô","o"],["õ","o"],["ö","oe"],["ő","o"],["ø","o"],["ù","u"],["ú","u"],["û","u"],["ü","ue"],["ű","u"],["ý","y"],["þ","th"],["ÿ","y"],["ẞ","SS"],["à","a"],["À","A"],["á","a"],["Á","A"],["â","a"],["Â","A"],["ã","a"],["Ã","A"],["è","e"],["È","E"],["é","e"],["É","E"],["ê","e"],["Ê","E"],["ì","i"],["Ì","I"],["í","i"],["Í","I"],["ò","o"],["Ò","O"],["ó","o"],["Ó","O"],["ô","o"],["Ô","O"],["õ","o"],["Õ","O"],["ù","u"],["Ù","U"],["ú","u"],["Ú","U"],["ý","y"],["Ý","Y"],["ă","a"],["Ă","A"],["Đ","D"],["đ","d"],["ĩ","i"],["Ĩ","I"],["ũ","u"],["Ũ","U"],["ơ","o"],["Ơ","O"],["ư","u"],["Ư","U"],["ạ","a"],["Ạ","A"],["ả","a"],["Ả","A"],["ấ","a"],["Ấ","A"],["ầ","a"],["Ầ","A"],["ẩ","a"],["Ẩ","A"],["ẫ","a"],["Ẫ","A"],["ậ","a"],["Ậ","A"],["ắ","a"],["Ắ","A"],["ằ","a"],["Ằ","A"],["ẳ","a"],["Ẳ","A"],["ẵ","a"],["Ẵ","A"],["ặ","a"],["Ặ","A"],["ẹ","e"],["Ẹ","E"],["ẻ","e"],["Ẻ","E"],["ẽ","e"],["Ẽ","E"],["ế","e"],["Ế","E"],["ề","e"],["Ề","E"],["ể","e"],["Ể","E"],["ễ","e"],["Ễ","E"],["ệ","e"],["Ệ","E"],["ỉ","i"],["Ỉ","I"],["ị","i"],["Ị","I"],["ọ","o"],["Ọ","O"],["ỏ","o"],["Ỏ","O"],["ố","o"],["Ố","O"],["ồ","o"],["Ồ","O"],["ổ","o"],["Ổ","O"],["ỗ","o"],["Ỗ","O"],["ộ","o"],["Ộ","O"],["ớ","o"],["Ớ","O"],["ờ","o"],["Ờ","O"],["ở","o"],["Ở","O"],["ỡ","o"],["Ỡ","O"],["ợ","o"],["Ợ","O"],["ụ","u"],["Ụ","U"],["ủ","u"],["Ủ","U"],["ứ","u"],["Ứ","U"],["ừ","u"],["Ừ","U"],["ử","u"],["Ử","U"],["ữ","u"],["Ữ","U"],["ự","u"],["Ự","U"],["ỳ","y"],["Ỳ","Y"],["ỵ","y"],["Ỵ","Y"],["ỷ","y"],["Ỷ","Y"],["ỹ","y"],["Ỹ","Y"],["ء","e"],["آ","a"],["أ","a"],["ؤ","w"],["إ","i"],["ئ","y"],["ا","a"],["ب","b"],["ة","t"],["ت","t"],["ث","th"],["ج","j"],["ح","h"],["خ","kh"],["د","d"],["ذ","dh"],["ر","r"],["ز","z"],["س","s"],["ش","sh"],["ص","s"],["ض","d"],["ط","t"],["ظ","z"],["ع","e"],["غ","gh"],["ـ","_"],["ف","f"],["ق","q"],["ك","k"],["ل","l"],["م","m"],["ن","n"],["ه","h"],["و","w"],["ى","a"],["ي","y"],["َ‎","a"],["ُ","u"],["ِ‎","i"],["٠","0"],["١","1"],["٢","2"],["٣","3"],["٤","4"],["٥","5"],["٦","6"],["٧","7"],["٨","8"],["٩","9"],["چ","ch"],["ک","k"],["گ","g"],["پ","p"],["ژ","zh"],["ی","y"],["۰","0"],["۱","1"],["۲","2"],["۳","3"],["۴","4"],["۵","5"],["۶","6"],["۷","7"],["۸","8"],["۹","9"],["ټ","p"],["ځ","z"],["څ","c"],["ډ","d"],["ﺫ","d"],["ﺭ","r"],["ړ","r"],["ﺯ","z"],["ږ","g"],["ښ","x"],["ګ","g"],["ڼ","n"],["ۀ","e"],["ې","e"],["ۍ","ai"],["ٹ","t"],["ڈ","d"],["ڑ","r"],["ں","n"],["ہ","h"],["ھ","h"],["ے","e"],["А","A"],["а","a"],["Б","B"],["б","b"],["В","V"],["в","v"],["Г","G"],["г","g"],["Д","D"],["д","d"],["Е","E"],["е","e"],["Ж","Zh"],["ж","zh"],["З","Z"],["з","z"],["И","I"],["и","i"],["Й","J"],["й","j"],["К","K"],["к","k"],["Л","L"],["л","l"],["М","M"],["м","m"],["Н","N"],["н","n"],["О","O"],["о","o"],["П","P"],["п","p"],["Р","R"],["р","r"],["С","S"],["с","s"],["Т","T"],["т","t"],["У","U"],["у","u"],["Ф","F"],["ф","f"],["Х","H"],["х","h"],["Ц","Cz"],["ц","cz"],["Ч","Ch"],["ч","ch"],["Ш","Sh"],["ш","sh"],["Щ","Shh"],["щ","shh"],["Ъ",""],["ъ",""],["Ы","Y"],["ы","y"],["Ь",""],["ь",""],["Э","E"],["э","e"],["Ю","Yu"],["ю","yu"],["Я","Ya"],["я","ya"],["Ё","Yo"],["ё","yo"],["ă","a"],["Ă","A"],["ș","s"],["Ș","S"],["ț","t"],["Ț","T"],["ţ","t"],["Ţ","T"],["ş","s"],["Ş","S"],["ç","c"],["Ç","C"],["ğ","g"],["Ğ","G"],["ı","i"],["İ","I"],["ա","a"],["Ա","A"],["բ","b"],["Բ","B"],["գ","g"],["Գ","G"],["դ","d"],["Դ","D"],["ե","ye"],["Ե","Ye"],["զ","z"],["Զ","Z"],["է","e"],["Է","E"],["ը","y"],["Ը","Y"],["թ","t"],["Թ","T"],["ժ","zh"],["Ժ","Zh"],["ի","i"],["Ի","I"],["լ","l"],["Լ","L"],["խ","kh"],["Խ","Kh"],["ծ","ts"],["Ծ","Ts"],["կ","k"],["Կ","K"],["հ","h"],["Հ","H"],["ձ","dz"],["Ձ","Dz"],["ղ","gh"],["Ղ","Gh"],["ճ","tch"],["Ճ","Tch"],["մ","m"],["Մ","M"],["յ","y"],["Յ","Y"],["ն","n"],["Ն","N"],["շ","sh"],["Շ","Sh"],["ո","vo"],["Ո","Vo"],["չ","ch"],["Չ","Ch"],["պ","p"],["Պ","P"],["ջ","j"],["Ջ","J"],["ռ","r"],["Ռ","R"],["ս","s"],["Ս","S"],["վ","v"],["Վ","V"],["տ","t"],["Տ","T"],["ր","r"],["Ր","R"],["ց","c"],["Ց","C"],["ու","u"],["ՈՒ","U"],["Ու","U"],["փ","p"],["Փ","P"],["ք","q"],["Ք","Q"],["օ","o"],["Օ","O"],["ֆ","f"],["Ֆ","F"],["և","yev"],["ა","a"],["ბ","b"],["გ","g"],["დ","d"],["ე","e"],["ვ","v"],["ზ","z"],["თ","t"],["ი","i"],["კ","k"],["ლ","l"],["მ","m"],["ნ","n"],["ო","o"],["პ","p"],["ჟ","zh"],["რ","r"],["ს","s"],["ტ","t"],["უ","u"],["ფ","ph"],["ქ","q"],["ღ","gh"],["ყ","k"],["შ","sh"],["ჩ","ch"],["ც","ts"],["ძ","dz"],["წ","ts"],["ჭ","tch"],["ხ","kh"],["ჯ","j"],["ჰ","h"],["č","c"],["ď","d"],["ě","e"],["ň","n"],["ř","r"],["š","s"],["ť","t"],["ů","u"],["ž","z"],["Č","C"],["Ď","D"],["Ě","E"],["Ň","N"],["Ř","R"],["Š","S"],["Ť","T"],["Ů","U"],["Ž","Z"],["ހ","h"],["ށ","sh"],["ނ","n"],["ރ","r"],["ބ","b"],["ޅ","lh"],["ކ","k"],["އ","a"],["ވ","v"],["މ","m"],["ފ","f"],["ދ","dh"],["ތ","th"],["ލ","l"],["ގ","g"],["ޏ","gn"],["ސ","s"],["ޑ","d"],["ޒ","z"],["ޓ","t"],["ޔ","y"],["ޕ","p"],["ޖ","j"],["ޗ","ch"],["ޘ","tt"],["ޙ","hh"],["ޚ","kh"],["ޛ","th"],["ޜ","z"],["ޝ","sh"],["ޞ","s"],["ޟ","d"],["ޠ","t"],["ޡ","z"],["ޢ","a"],["ޣ","gh"],["ޤ","q"],["ޥ","w"],["ަ","a"],["ާ","aa"],["ި","i"],["ީ","ee"],["ު","u"],["ޫ","oo"],["ެ","e"],["ޭ","ey"],["ޮ","o"],["ޯ","oa"],["ް",""],["α","a"],["β","v"],["γ","g"],["δ","d"],["ε","e"],["ζ","z"],["η","i"],["θ","th"],["ι","i"],["κ","k"],["λ","l"],["μ","m"],["ν","n"],["ξ","ks"],["ο","o"],["π","p"],["ρ","r"],["σ","s"],["τ","t"],["υ","y"],["φ","f"],["χ","x"],["ψ","ps"],["ω","o"],["ά","a"],["έ","e"],["ί","i"],["ό","o"],["ύ","y"],["ή","i"],["ώ","o"],["ς","s"],["ϊ","i"],["ΰ","y"],["ϋ","y"],["ΐ","i"],["Α","A"],["Β","B"],["Γ","G"],["Δ","D"],["Ε","E"],["Ζ","Z"],["Η","I"],["Θ","TH"],["Ι","I"],["Κ","K"],["Λ","L"],["Μ","M"],["Ν","N"],["Ξ","KS"],["Ο","O"],["Π","P"],["Ρ","R"],["Σ","S"],["Τ","T"],["Υ","Y"],["Φ","F"],["Χ","X"],["Ψ","PS"],["Ω","O"],["Ά","A"],["Έ","E"],["Ί","I"],["Ό","O"],["Ύ","Y"],["Ή","I"],["Ώ","O"],["Ϊ","I"],["Ϋ","Y"],["ā","a"],["ē","e"],["ģ","g"],["ī","i"],["ķ","k"],["ļ","l"],["ņ","n"],["ū","u"],["Ā","A"],["Ē","E"],["Ģ","G"],["Ī","I"],["Ķ","K"],["Ļ","L"],["Ņ","N"],["Ū","U"],["č","c"],["š","s"],["ž","z"],["Č","C"],["Š","S"],["Ž","Z"],["ą","a"],["č","c"],["ę","e"],["ė","e"],["į","i"],["š","s"],["ų","u"],["ū","u"],["ž","z"],["Ą","A"],["Č","C"],["Ę","E"],["Ė","E"],["Į","I"],["Š","S"],["Ų","U"],["Ū","U"],["Ќ","Kj"],["ќ","kj"],["Љ","Lj"],["љ","lj"],["Њ","Nj"],["њ","nj"],["Тс","Ts"],["тс","ts"],["ą","a"],["ć","c"],["ę","e"],["ł","l"],["ń","n"],["ś","s"],["ź","z"],["ż","z"],["Ą","A"],["Ć","C"],["Ę","E"],["Ł","L"],["Ń","N"],["Ś","S"],["Ź","Z"],["Ż","Z"],["Є","Ye"],["І","I"],["Ї","Yi"],["Ґ","G"],["є","ye"],["і","i"],["ї","yi"],["ґ","g"]];const GYe=UYe,qYe=HYe,jYe=VYe,KYe=(r,e)=>{for(const[t,n]of e)r=r.replace(new RegExp(qYe(t),"g"),n);return r};var zYe=(r,e)=>{if(typeof r!="string")throw new TypeError(`Expected a string, got \`${typeof r}\``);e={customReplacements:[],...e};const t=new Map([...jYe,...e.customReplacements]);return r=r.normalize(),r=KYe(r,t),r=GYe(r),r},YYe=[["&"," and "],["🦄"," unicorn "],["♥"," love "]];const QYe=EYe,XYe=zYe,ZYe=YYe,JYe=r=>r.replace(/([A-Z]{2,})(\d+)/g,"$1 $2").replace(/([a-z\d]+)([A-Z]{2,})/g,"$1 $2").replace(/([a-z\d])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z][a-z\d]+)/g,"$1 $2"),eQe=(r,e)=>{const t=QYe(e);return r.replace(new RegExp(`${t}{2,}`,"g"),e).replace(new RegExp(`^${t}|${t}$`,"g"),"")},gZ=(r,e)=>{if(typeof r!="string")throw new TypeError(`Expected a string, got \`${typeof r}\``);e={separator:"-",lowercase:!0,decamelize:!0,customReplacements:[],preserveLeadingUnderscore:!1,...e};const t=e.preserveLeadingUnderscore&&r.startsWith("_"),n=new Map([...ZYe,...e.customReplacements]);r=XYe(r,{customReplacements:n}),e.decamelize&&(r=JYe(r));let i=/[^a-zA-Z\d]+/g;return e.lowercase&&(r=r.toLowerCase(),i=/[^a-z\d]+/g),r=r.replace(i,e.separator),r=r.replace(/\\/g,""),e.separator&&(r=eQe(r,e.separator)),t&&(r=`_${r}`),r},tQe=()=>{const r=new Map,e=(t,n)=>{if(t=gZ(t,n),!t)return"";const i=t.toLowerCase(),s=r.get(i.replace(/(?:-\d+?)+?$/,""))||0,a=r.get(i);r.set(i,typeof a=="number"?a+1:1);const o=r.get(i)||2;return(o>=2||s>2)&&(t=`${t}-${o}`),t};return e.reset=()=>{r.clear()},e};yP.exports=gZ;yP.exports.counter=tQe;var rQe=yP.exports;const nQe=Ls(rQe),ig=(r,e)=>{const t=e==null;return r==="oneToOne"&&t?"oneWay":r==="oneToMany"&&t?"manyWay":r},vZ=r=>[...new Set(r)],uw=(r,e)=>{const t=r.reduce((n,i)=>{const s=i.type;if(s==="component"){const a=i.component;n.push(a);const o=Qn(e,[a,"schema","attributes"],[]);n.push(...uw(o,e))}if(s==="dynamiczone"){const a=i.components,o=a.reduce((l,c)=>{const u=Qn(e,[c,"schema","attributes"],[]);return[...l,...uw(u,e)]},[]);return[...n,...a,...o]}return n},[]);return vZ(t)},p$={components:{},contentTypes:{}},M7={components:{},contentTypes:{},initialComponents:{},initialContentTypes:{},initialData:{},modifiedData:{...p$},reservedNames:{},isLoading:!0},$h=["oneWay","manyWay"],KC=r=>r==="manyToOne"?"oneToMany":r==="oneToMany"?"manyToOne":r,Ho=(r,e)=>r.schema.attributes.findIndex(({name:t})=>t===e);pZ({name:"data-manager",initialState:M7,reducers:{init:(r,e)=>{const{components:t,contentTypes:n,reservedNames:i}=e.payload;r.components=t,r.initialComponents=t,r.initialContentTypes=n,r.contentTypes=n,r.reservedNames=i,r.isLoading=!1,r.modifiedData={...p$,component:r.modifiedData.component?t[r.modifiedData.component.uid]:void 0,contentType:r.modifiedData.contentType?n[r.modifiedData.contentType.uid]:void 0,components:r.modifiedData.components?Object.keys(r.modifiedData.components).reduce((s,a)=>(s[a]=t[a],s),{}):{},contentTypes:r.modifiedData.contentTypes?Object.keys(r.modifiedData.contentTypes).reduce((s,a)=>(s[a]=n[a],s),{}):{}},r.initialData=r.modifiedData},addAttribute:(r,e)=>{const{attributeToSet:t,forTarget:n,targetUid:i,shouldAddComponentToData:s}=e.payload,{name:a,...o}=t;delete o.createComponent;const l=["component","contentType"].includes(n)?[n]:[n,i],u=[...Qn(r,["modifiedData",...l,"schema","attributes"],[]).slice(),{...o,name:a}];if(br(r,["modifiedData",...l,"schema","attributes"],u),s){const h=o.component,f=r.components[h],m=f?.isTemporary,g=r.modifiedData.components?.[h]!==void 0;if(m||g)return;r.modifiedData.components||(r.modifiedData.components={}),r.modifiedData.components[h]=f,uw(f.schema.attributes,r.components).filter(E=>Qn(r,["modifiedData","components",E])===void 0).forEach(E=>{const w=Qn(r,["components",E],{});w.isTemporary||!1||(r.modifiedData.components||(r.modifiedData.components={}),r.modifiedData.components[E]=w)});return}if(o.type==="relation"){const h=o.target,f=o.targetAttribute||null,m=o.relation,g=ig(m,f),y=Qn(r,["modifiedData",...l,"uid"]);if(o.type==="relation"&&g!=="oneWay"&&g!=="manyWay"&&h===y){const b={name:f,relation:KC(g),target:h,targetAttribute:a,type:"relation"};o.private&&(b.private=o.private);const E=[...u,b];br(r,["modifiedData",...l,"schema","attributes"],E)}}},addCreatedComponentToDynamicZone:(r,e)=>{const{dynamicZoneTarget:t,componentsToAdd:n}=e.payload,i=Ho(r.modifiedData.contentType,t);n.forEach(s=>{r.modifiedData.contentType&&(r.modifiedData.contentType.schema.attributes[i].components||(r.modifiedData.contentType.schema.attributes[i].components=[]),r.modifiedData.contentType.schema.attributes[i].components.push(s))})},addCustomFieldAttribute:(r,e)=>{const{attributeToSet:t,forTarget:n,targetUid:i}=e.payload,{name:s,...a}=t,o=["component","contentType"].includes(n)?[n]:[n,i],c=[...Qn(r,["modifiedData",...o,"schema","attributes"],[]).slice(),{...a,name:s}];br(r,["modifiedData",...o,"schema","attributes"],c)},changeDynamicZoneComponents:(r,e)=>{const{dynamicZoneTarget:t,newComponents:n}=e.payload,i=Ho(r.modifiedData.contentType,t),s=(r.modifiedData.contentType?.schema.attributes[i]).components,a=vZ([...s,...n]);(r.modifiedData.contentType?.schema.attributes[i]).components=a,uw(DI(r.modifiedData.contentType?.schema.attributes),r.components).filter(c=>Qn(r,["modifiedData","components",c])===void 0).forEach(c=>{const u=Qn(r,["components",c],{});u.isTemporary||!1||(r.modifiedData.components||(r.modifiedData.components={}),r.modifiedData.components[c]=u)})},createComponentSchema:(r,e)=>{const{uid:t,data:n,componentCategory:i,shouldAddComponentToData:s}=e.payload,a={uid:t,isTemporary:!0,category:i,schema:{...n,attributes:[]}};r.components[t]=a,s&&(r.modifiedData.components[t]=a)},createSchema:(r,e)=>{const{uid:t,data:n}=e.payload,i={uid:t,isTemporary:!0,schema:{...n,attributes:[]}};r.contentTypes[t]=i},editAttribute:(r,e)=>{const{attributeToSet:t,forTarget:n,targetUid:i,initialAttribute:s}=e.payload,{name:a,...o}=t,l=s.name,c=["component","contentType"].includes(n)?[n]:[n,i],u=Ho(Qn(r,["modifiedData",...c]),l),d=o.type==="relation";if(!d){br(r,["modifiedData",...c,"schema","attributes",u],t);return}const h=Qn(r,["modifiedData",...c,"schema","attributes"]).slice(),f={name:a,relation:o.relation,target:o.target,targetAttribute:o.targetAttribute,type:"relation"};o.private&&(f.private=o.private),o.pluginOptions&&(f.pluginOptions=o.pluginOptions);const m=h.findIndex(W=>W.name!==void 0&&W.name===s.name);m!==-1&&h.splice(m,1,f);let g=null,y=null,b=null,E=null;const w=Qn(r,["modifiedData",...c,"uid"]),A=s.target!==o.target,S=o.target===w,_=ig(o.relation,o.targetAttribute),C=ig(s.relation,s.targetAttribute),k=s.target===w,D=C!==_,I=A&&!S&&k&&d,L=D&&k&&["oneWay","manyWay"].includes(_)&&d,M=!$h.includes(C)&&!$h.includes(_)&&k&&S&&d,F=$h.includes(C)&&!$h.includes(_)&&k&&S&&d,U=A&&S&&!$h.includes(_);if((I||L)&&(g=s.targetAttribute),g){const W=h.findIndex(j=>j.name===g);h.splice(W,1)}if(!I){const W=Qn(r,["initialContentTypes",s.target]);if(W){const j=Ho(W,s.targetAttribute);E=Qn(r,["initialContentTypes",s.target,"schema","attributes",j])}}if(F||U){b={name:o.targetAttribute,relation:KC(_),target:o.target,targetAttribute:a,type:"relation"},o.private&&(b.private=o.private),E&&E.pluginOptions&&(b.pluginOptions=E.pluginOptions);const W=h.findIndex(({name:Q})=>Q===s.name),j=h.findIndex(({name:Q})=>a===Q),z=(W===-1?j:W)+1;h.splice(z,0,b)}if(M&&(y=s.targetAttribute,b={name:o.targetAttribute,relation:KC(_),target:o.target,targetAttribute:a,type:"relation"},o.private&&(b.private=o.private),E&&E.pluginOptions&&(b.pluginOptions=E.pluginOptions),y)){const W=h.findIndex(({name:j})=>j===y);h.splice(W,1,b)}br(r,["modifiedData",...c,"schema","attributes"],h)},editCustomFieldAttribute:(r,e)=>{const{forTarget:t,targetUid:n,initialAttribute:i,attributeToSet:s}=e.payload,a=i.name,o=["component","contentType"].includes(t)?[t]:[t,n],l=Ho(Qn(r,["modifiedData",...o]),a);br(r,["modifiedData",...o,"schema","attributes",l],s)},updateInitialState:r=>{r.initialData=r.modifiedData},deleteNotSavedType:r=>{r.contentTypes=r.initialContentTypes,r.components=r.initialComponents},reloadPlugin:()=>M7,removeComponentFromDynamicZone:(r,e)=>{const{dzName:t,componentToRemoveIndex:n}=e.payload,i=Ho(r.modifiedData.contentType,t);r.modifiedData.contentType&&r.modifiedData.contentType.schema.attributes[i].components.splice(n,1)},removeField:(r,e)=>{const{mainDataKey:t,attributeToRemoveName:n}=e.payload,i=["modifiedData",t,"schema","attributes"],s=Ho(r.modifiedData[t],n),a=[...i,s],o=Qn(r,a);if(o.type==="relation"&&t==="contentType"){const{target:d,relation:h,targetAttribute:f}=o,m=ig(h,f),g=r.modifiedData.contentType?.uid;if(d===g&&!$h.includes(m)){const E=(r.modifiedData[t]?.schema.attributes.slice()).filter(A=>!(A.name===n||A.target===g&&A.targetAttribute===n)),w=r.modifiedData[t];w&&(w.schema.attributes=E);return}}r.modifiedData[t].schema.attributes.slice().reduce((d,h)=>(h.type!=="uid"||h.targetField!==n||d.push(h.name),d),[]).forEach(d=>{const h=Ho(r.modifiedData[t],d);delete r.modifiedData[t]?.schema.attributes[h].targetField}),r.modifiedData[t]?.schema.attributes.splice(s,1)},removeFieldFromDisplayedComponent:(r,e)=>{const{attributeToRemoveName:t,componentUid:n}=e.payload,i=Ho(r.modifiedData.components?.[n],t);r.modifiedData.components?.[n]?.schema?.attributes?.splice(i,1)},setModifiedData:(r,e)=>{const{schemaToSet:t,hasJustCreatedSchema:n}=e.payload,i={...p$,...t};r.initialData=i,r.modifiedData=i,n||(r.components=r.initialComponents,r.contentTypes=r.initialContentTypes)},updateSchema:(r,e)=>{const{data:t,schemaType:n}=e.payload,i=r.modifiedData[n];if(i)if(i.schema.displayName=t.displayName,n==="component"){const{uid:s}=e.payload;i.category=t.category,i.schema.icon=t.icon;const a=DI(i);r.components[s]=a}else i.schema.kind=t.kind}}});const Qu=r=>nQe(r,{separator:"-"}),iQe=(r,e)=>`${Qu(e)}.${Qu(r)}`,yZ=(r,e)=>{if(e.items)return e.items.reduce(yZ,r);if("defaultValue"in e){const{name:t,defaultValue:n}=e;r.push({name:t,defaultValue:n})}return r},zC=r=>["manyToMany","oneToMany","manyWay"].includes(r)?2:1,N7=r=>["manyToMany","manyToOne"].includes(r)?2:1,km={formErrors:{},modifiedData:{},initialData:{},componentToCreate:{},isCreatingComponentWhileAddingAField:!1};pZ({name:"formModal",initialState:km,reducers:{onChange:(r,e)=>{const{keys:t,value:n}=e.payload,i=r.modifiedData;if(!!i.default&&t.length===1&&t.includes("type")){const a=i.type;a&&["date","datetime","time"].includes(a)&&delete r.modifiedData.default}br(r,["modifiedData",...t],n)},onChangeRelationTarget:(r,e)=>{const{target:{oneThatIsCreatingARelationWithAnother:t,selectedContentTypeFriendlyName:n,targetContentTypeAllowedRelations:i,value:s}}=e.payload;let a=!1,o=null;br(r,["modifiedData","target"],s);const l=r.modifiedData;if(Array.isArray(i)){const h=ig(l.relation,l.targetAttribute);if(h&&!i.includes(h)){const f=i[0];a=!0,o=f,f==="oneWay"?br(r,["modifiedData","relation"],"oneToOne"):f==="manyWay"?br(r,["modifiedData","relation"],"oneToMany"):br(r,["modifiedData","relation"],f)}}let c;if(a&&o?c=hu(Va(Qu(n)),zC(o)):c=hu(Va(Qu(n)),zC(l.relation)),br(r,["modifiedData","name"],c),r.modifiedData.targetAttribute===null)return;if(a&&o&&["oneWay","manyWay"].includes(o)){br(r,["modifiedData","targetAttribute"],null);return}const d=hu(Va(Qu(t)),N7(l.relation));br(r,["modifiedData","targetAttribute"],d)},onChangeRelationType:(r,e)=>{const{target:{oneThatIsCreatingARelationWithAnother:t,value:n}}=e.payload,i=r.modifiedData.name;if(!["oneWay","manyWay"].includes(n)){br(r,["modifiedData","relation"],n);const s=r.modifiedData.targetAttribute;br(r,["modifiedData","name"],hu(Va(Qu(i)),zC(n))),br(r,["modifiedData","targetAttribute"],hu(s||Va(Qu(t)),N7(n)));return}if(n==="oneWay"){br(r,["modifiedData","relation"],"oneToOne"),br(r,["modifiedData","targetAttribute"],null),br(r,["modifiedData","name"],hu(Va(i),1));return}br(r,["modifiedData","relation"],"oneToMany"),br(r,["modifiedData","targetAttribute"],null),br(r,["modifiedData","name"],hu(Va(i),2))},resetProps:()=>km,resetPropsAndSetFormForAddingAnExistingCompo:(r,e)=>{const{options:t={}}=e.payload;return{...km,modifiedData:{type:"component",repeatable:!0,...t}}},resetPropsAndSaveCurrentData:(r,e)=>{const{options:t={}}=e.payload,n=r.modifiedData.componentToCreate,i={displayName:n.displayName,type:"component",repeatable:!1,...t,component:iQe(n.displayName,n.category)};return{...km,componentToCreate:n,modifiedData:i,isCreatingComponentWhileAddingAField:r.modifiedData.createComponent}},resetPropsAndSetTheFormForAddingACompoToADz:r=>{const t={...r.modifiedData,createComponent:!0,componentToCreate:{type:"component"}};return{...km,modifiedData:t}},setDataToEdit:(r,e)=>{const{data:t}=e.payload;r.modifiedData=t,r.initialData=t},setAttributeDataSchema:(r,e)=>{const{isEditing:t}=e.payload;if(t){const{modifiedDataToSetForEditing:c}=e.payload;r.modifiedData=c,r.initialData=c;return}const{attributeType:n,nameToSetForRelation:i,targetUid:s,step:a,options:o={}}=e.payload;let l;n==="component"?a==="1"?l={type:"component",createComponent:!0,componentToCreate:{type:"component"}}:l={...o,type:"component",repeatable:!0}:n==="dynamiczone"?l={...o,type:"dynamiczone",components:[]}:n==="text"?l={...o,type:"string"}:n==="number"||n==="date"?l=o:n==="media"?l={allowedTypes:["images","files","videos","audios"],type:"media",multiple:!0,...o}:n==="enumeration"?l={...o,type:"enumeration",enum:[]}:n==="relation"?l={name:Va(i),relation:"oneToOne",targetAttribute:null,target:s,type:"relation"}:l={...o,type:n,default:null},r.modifiedData=l},setCustomFieldDataSchema:(r,e)=>{const{isEditing:t}=e.payload;if(t){const{modifiedDataToSetForEditing:o}=e.payload;r.modifiedData=o,r.initialData=o;return}const{customField:n,options:i={}}=e.payload;r.modifiedData={...i,type:n.type};const a=[...n?.options?.base||[],...n?.options?.advanced||[]].reduce(yZ,[]);a.length&&a.forEach(({name:o,defaultValue:l})=>br(r.modifiedData,o,l))},setDynamicZoneDataSchema:(r,e)=>{const{attributeToEdit:t}=e.payload;r.modifiedData=t,r.initialData=t},setErrors:(r,e)=>{r.formErrors=e.payload.errors}}});const sQe=Bn`
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(359deg);
    }
  `;q(gde)`
  animation: ${sQe} 1s infinite linear;
`;q(Ie)`
  position: fixed;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  /* TODO: set this up in the theme for consistence z-index values */
  z-index: 1140;
  padding-top: 16rem;

  & > * {
    position: relative;
    z-index: 1;
  }

  &:before {
    content: '';
    position: fixed;
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    background: ${({theme:r})=>r.colors.neutral0};
    opacity: 0.9;
  }
`;q(De)`
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  svg {
    > path {
      fill: ${({theme:r})=>r.colors.primary600} !important;
    }
  }
`;var aQe=xX,oQe=aQe("mapValues",tZ());oQe.placeholder=JO();var bZ=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lQe=function(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,a;return a={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function o(c){return function(u){return l([c,u])}}function l(c){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return t.label++,{value:c[1],done:!1};case 5:t.label++,i=c[1],c=[0];continue;case 7:c=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){t=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){t.label=c[1];break}if(c[0]===6&&t.label<s[1]){t.label=s[1],s=c;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(c);break}s[2]&&t.ops.pop(),t.trys.pop();continue}c=e.call(r,t)}catch(u){c=[6,u],i=0}finally{n=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},N0=function(r,e){for(var t=0,n=e.length,i=r.length;t<n;t++,i++)r[i]=e[t];return r},cQe=Object.defineProperty,uQe=Object.defineProperties,dQe=Object.getOwnPropertyDescriptors,F7=Object.getOwnPropertySymbols,hQe=Object.prototype.hasOwnProperty,fQe=Object.prototype.propertyIsEnumerable,B7=function(r,e,t){return e in r?cQe(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t},vd=function(r,e){for(var t in e||(e={}))hQe.call(e,t)&&B7(r,t,e[t]);if(F7)for(var n=0,i=F7(e);n<i.length;n++){var t=i[n];fQe.call(e,t)&&B7(r,t,e[t])}return r},YC=function(r,e){return uQe(r,dQe(e))},pQe=function(r,e,t){return new Promise(function(n,i){var s=function(l){try{o(t.next(l))}catch(c){i(c)}},a=function(l){try{o(t.throw(l))}catch(c){i(c)}},o=function(l){return l.done?n(l.value):Promise.resolve(l.value).then(s,a)};o((t=t.apply(r,e)).next())})};function Rc(r,e){function t(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];if(e){var s=e.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return vd(vd({type:r,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:r,payload:n[0]}}return t.toString=function(){return""+r},t.type=r,t.match=function(n){return n.type===r},t}(function(r){bZ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,N0([void 0],t[0].concat(this)))):new(e.bind.apply(e,N0([void 0],t.concat(this))))},e})(Array);(function(r){bZ(e,r);function e(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=r.apply(this,t)||this;return Object.setPrototypeOf(i,e.prototype),i}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return r.prototype.concat.apply(this,t)},e.prototype.prepend=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return t.length===1&&Array.isArray(t[0])?new(e.bind.apply(e,N0([void 0],t[0].concat(this)))):new(e.bind.apply(e,N0([void 0],t.concat(this))))},e})(Array);function m$(r){return gi(r)?_l(r,function(){}):r}function EZ(r){var e={},t=[],n,i={addCase:function(s,a){{if(t.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(n)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`")}var o=typeof s=="string"?s:s.type;if(!o)throw new Error("`builder.addCase` cannot be called with an empty action type");if(o in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[o]=a,i},addMatcher:function(s,a){if(n)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return t.push({matcher:s,reducer:a}),i},addDefaultCase:function(s){if(n)throw new Error("`builder.addDefaultCase` can only be called once");return n=s,i}};return r(i),[e,t,n]}function mQe(r){return typeof r=="function"}var U7=!1;function gQe(r,e,t,n){t===void 0&&(t=[]),typeof e=="object"&&(U7||(U7=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var i=typeof e=="function"?EZ(e):[e,t,n],s=i[0],a=i[1],o=i[2],l;if(mQe(r))l=function(){return m$(r())};else{var c=m$(r);l=function(){return c}}function u(d,h){d===void 0&&(d=l());var f=N0([s[h.type]],a.filter(function(m){var g=m.matcher;return g(h)}).map(function(m){var g=m.reducer;return g}));return f.filter(function(m){return!!m}).length===0&&(f=[o]),f.reduce(function(m,g){if(g)if(is(m)){var y=m,b=g(y,h);return b===void 0?m:b}else{if(gi(m))return _l(m,function(E){return g(E,h)});var b=g(m,h);if(b===void 0){if(m===null)return m;throw Error("A case reducer on a non-draftable value must not return undefined")}return b}return m},d)}return u.getInitialState=l,u}var W7=!1;function vQe(r,e){return r+"/"+e}function yQe(r){var e=r.name;typeof process<"u"&&r.initialState===void 0&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var t=typeof r.initialState=="function"?r.initialState:m$(r.initialState),n=r.reducers||{},i=Object.keys(n),s={},a={},o={};i.forEach(function(u){var d=n[u],h=vQe(e,u),f,m;"reducer"in d?(f=d.reducer,m=d.prepare):f=d,s[u]=f,a[h]=f,o[u]=m?Rc(h,m):Rc(h)});function l(){typeof r.extraReducers=="object"&&(W7||(W7=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var u=typeof r.extraReducers=="function"?EZ(r.extraReducers):[r.extraReducers],d=u[0],h=d===void 0?{}:d,f=u[1],m=f===void 0?[]:f,g=u[2],y=g===void 0?void 0:g,b=vd(vd({},h),a);return gQe(t,function(E){for(var w in b)E.addCase(w,b[w]);for(var A=0,S=m;A<S.length;A++){var _=S[A];E.addMatcher(_.matcher,_.reducer)}y&&E.addDefaultCase(y)})}var c;return{name:e,reducer:function(u,d){return c||(c=l()),c(u,d)},actions:o,caseReducers:s,getInitialState:function(){return c||(c=l()),c.getInitialState()}}}var bQe="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",EQe=function(r){r===void 0&&(r=21);for(var e="",t=r;t--;)e+=bQe[Math.random()*64|0];return e},xQe=["name","message","stack","code"],QC=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),H7=function(){function r(e,t){this.payload=e,this.meta=t}return r}(),wQe=function(r){if(typeof r=="object"&&r!==null){for(var e={},t=0,n=xQe;t<n.length;t++){var i=n[t];typeof r[i]=="string"&&(e[i]=r[i])}return e}return{message:String(r)}};(function(){function r(e,t,n){var i=Rc(e+"/fulfilled",function(u,d,h,f){return{payload:u,meta:YC(vd({},f||{}),{arg:h,requestId:d,requestStatus:"fulfilled"})}}),s=Rc(e+"/pending",function(u,d,h){return{payload:void 0,meta:YC(vd({},h||{}),{arg:d,requestId:u,requestStatus:"pending"})}}),a=Rc(e+"/rejected",function(u,d,h,f,m){return{payload:f,error:(n&&n.serializeError||wQe)(u||"Rejected"),meta:YC(vd({},m||{}),{arg:h,requestId:d,rejectedWithValue:!!f,requestStatus:"rejected",aborted:u?.name==="AbortError",condition:u?.name==="ConditionError"})}}),o=!1,l=typeof AbortController<"u"?AbortController:function(){function u(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return u.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},u}();function c(u){return function(d,h,f){var m=n?.idGenerator?n.idGenerator(u):EQe(),g=new l,y;function b(w){y=w,g.abort()}var E=function(){return pQe(this,null,function(){var w,A,S,_,C,k,D;return lQe(this,function(I){switch(I.label){case 0:return I.trys.push([0,4,,5]),_=(w=n?.condition)==null?void 0:w.call(n,u,{getState:h,extra:f}),SQe(_)?[4,_]:[3,2];case 1:_=I.sent(),I.label=2;case 2:if(_===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return C=new Promise(function(L,M){return g.signal.addEventListener("abort",function(){return M({name:"AbortError",message:y||"Aborted"})})}),d(s(m,u,(A=n?.getPendingMeta)==null?void 0:A.call(n,{requestId:m,arg:u},{getState:h,extra:f}))),[4,Promise.race([C,Promise.resolve(t(u,{dispatch:d,getState:h,extra:f,requestId:m,signal:g.signal,abort:b,rejectWithValue:function(L,M){return new QC(L,M)},fulfillWithValue:function(L,M){return new H7(L,M)}})).then(function(L){if(L instanceof QC)throw L;return L instanceof H7?i(L.payload,m,u,L.meta):i(L,m,u)})])];case 3:return S=I.sent(),[3,5];case 4:return k=I.sent(),S=k instanceof QC?a(null,m,u,k.payload,k.meta):a(k,m,u),[3,5];case 5:return D=n&&!n.dispatchConditionRejection&&a.match(S)&&S.meta.condition,D||d(S),[2,S]}})})}();return Object.assign(E,{abort:b,requestId:m,arg:u,unwrap:function(){return E.then(TQe)}})}}return Object.assign(c,{pending:s,rejected:a,fulfilled:i,typePrefix:e})}return r.withTypes=function(){return r},r})();function TQe(r){if(r.meta&&r.meta.rejectedWithValue)throw r.payload;if(r.error)throw r.error;return r.payload}function SQe(r){return r!==null&&typeof r=="object"&&typeof r.then=="function"}var bP="listenerMiddleware";Rc(bP+"/add");Rc(bP+"/removeAll");Rc(bP+"/remove");var V7;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);MO();var AQe={exports:{}};(function(r){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var t=function(n){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,a={},o={manual:n.Prism&&n.Prism.manual,disableWorkerMessageHandler:n.Prism&&n.Prism.disableWorkerMessageHandler,util:{encode:function E(w){return w instanceof l?new l(w.type,E(w.content),w.alias):Array.isArray(w)?w.map(E):w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(E){return Object.prototype.toString.call(E).slice(8,-1)},objId:function(E){return E.__id||Object.defineProperty(E,"__id",{value:++s}),E.__id},clone:function E(w,A){A=A||{};var S,_;switch(o.util.type(w)){case"Object":if(_=o.util.objId(w),A[_])return A[_];S={},A[_]=S;for(var C in w)w.hasOwnProperty(C)&&(S[C]=E(w[C],A));return S;case"Array":return _=o.util.objId(w),A[_]?A[_]:(S=[],A[_]=S,w.forEach(function(k,D){S[D]=E(k,A)}),S);default:return w}},getLanguage:function(E){for(;E;){var w=i.exec(E.className);if(w)return w[1].toLowerCase();E=E.parentElement}return"none"},setLanguage:function(E,w){E.className=E.className.replace(RegExp(i,"gi"),""),E.classList.add("language-"+w)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(S){var E=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(S.stack)||[])[1];if(E){var w=document.getElementsByTagName("script");for(var A in w)if(w[A].src==E)return w[A]}return null}},isActive:function(E,w,A){for(var S="no-"+w;E;){var _=E.classList;if(_.contains(w))return!0;if(_.contains(S))return!1;E=E.parentElement}return!!A}},languages:{plain:a,plaintext:a,text:a,txt:a,extend:function(E,w){var A=o.util.clone(o.languages[E]);for(var S in w)A[S]=w[S];return A},insertBefore:function(E,w,A,S){S=S||o.languages;var _=S[E],C={};for(var k in _)if(_.hasOwnProperty(k)){if(k==w)for(var D in A)A.hasOwnProperty(D)&&(C[D]=A[D]);A.hasOwnProperty(k)||(C[k]=_[k])}var I=S[E];return S[E]=C,o.languages.DFS(o.languages,function(L,M){M===I&&L!=E&&(this[L]=C)}),C},DFS:function E(w,A,S,_){_=_||{};var C=o.util.objId;for(var k in w)if(w.hasOwnProperty(k)){A.call(w,k,w[k],S||k);var D=w[k],I=o.util.type(D);I==="Object"&&!_[C(D)]?(_[C(D)]=!0,E(D,A,null,_)):I==="Array"&&!_[C(D)]&&(_[C(D)]=!0,E(D,A,k,_))}}},plugins:{},highlightAll:function(E,w){o.highlightAllUnder(document,E,w)},highlightAllUnder:function(E,w,A){var S={callback:A,container:E,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};o.hooks.run("before-highlightall",S),S.elements=Array.prototype.slice.apply(S.container.querySelectorAll(S.selector)),o.hooks.run("before-all-elements-highlight",S);for(var _=0,C;C=S.elements[_++];)o.highlightElement(C,w===!0,S.callback)},highlightElement:function(E,w,A){var S=o.util.getLanguage(E),_=o.languages[S];o.util.setLanguage(E,S);var C=E.parentElement;C&&C.nodeName.toLowerCase()==="pre"&&o.util.setLanguage(C,S);var k=E.textContent,D={element:E,language:S,grammar:_,code:k};function I(M){D.highlightedCode=M,o.hooks.run("before-insert",D),D.element.innerHTML=D.highlightedCode,o.hooks.run("after-highlight",D),o.hooks.run("complete",D),A&&A.call(D.element)}if(o.hooks.run("before-sanity-check",D),C=D.element.parentElement,C&&C.nodeName.toLowerCase()==="pre"&&!C.hasAttribute("tabindex")&&C.setAttribute("tabindex","0"),!D.code){o.hooks.run("complete",D),A&&A.call(D.element);return}if(o.hooks.run("before-highlight",D),!D.grammar){I(o.util.encode(D.code));return}if(w&&n.Worker){var L=new Worker(o.filename);L.onmessage=function(M){I(M.data)},L.postMessage(JSON.stringify({language:D.language,code:D.code,immediateClose:!0}))}else I(o.highlight(D.code,D.grammar,D.language))},highlight:function(E,w,A){var S={code:E,grammar:w,language:A};if(o.hooks.run("before-tokenize",S),!S.grammar)throw new Error('The language "'+S.language+'" has no grammar.');return S.tokens=o.tokenize(S.code,S.grammar),o.hooks.run("after-tokenize",S),l.stringify(o.util.encode(S.tokens),S.language)},tokenize:function(E,w){var A=w.rest;if(A){for(var S in A)w[S]=A[S];delete w.rest}var _=new d;return h(_,_.head,E),u(E,_,w,_.head,0),m(_)},hooks:{all:{},add:function(E,w){var A=o.hooks.all;A[E]=A[E]||[],A[E].push(w)},run:function(E,w){var A=o.hooks.all[E];if(!(!A||!A.length))for(var S=0,_;_=A[S++];)_(w)}},Token:l};n.Prism=o;function l(E,w,A,S){this.type=E,this.content=w,this.alias=A,this.length=(S||"").length|0}l.stringify=function E(w,A){if(typeof w=="string")return w;if(Array.isArray(w)){var S="";return w.forEach(function(I){S+=E(I,A)}),S}var _={type:w.type,content:E(w.content,A),tag:"span",classes:["token",w.type],attributes:{},language:A},C=w.alias;C&&(Array.isArray(C)?Array.prototype.push.apply(_.classes,C):_.classes.push(C)),o.hooks.run("wrap",_);var k="";for(var D in _.attributes)k+=" "+D+'="'+(_.attributes[D]||"").replace(/"/g,"&quot;")+'"';return"<"+_.tag+' class="'+_.classes.join(" ")+'"'+k+">"+_.content+"</"+_.tag+">"};function c(E,w,A,S){E.lastIndex=w;var _=E.exec(A);if(_&&S&&_[1]){var C=_[1].length;_.index+=C,_[0]=_[0].slice(C)}return _}function u(E,w,A,S,_,C){for(var k in A)if(!(!A.hasOwnProperty(k)||!A[k])){var D=A[k];D=Array.isArray(D)?D:[D];for(var I=0;I<D.length;++I){if(C&&C.cause==k+","+I)return;var L=D[I],M=L.inside,F=!!L.lookbehind,U=!!L.greedy,W=L.alias;if(U&&!L.pattern.global){var j=L.pattern.toString().match(/[imsuy]*$/)[0];L.pattern=RegExp(L.pattern.source,j+"g")}for(var z=L.pattern||L,Q=S.next,V=_;Q!==w.tail&&!(C&&V>=C.reach);V+=Q.value.length,Q=Q.next){var Y=Q.value;if(w.length>E.length)return;if(!(Y instanceof l)){var J=1,ue;if(U){if(ue=c(z,V,E,F),!ue||ue.index>=E.length)break;var ie=ue.index,ne=ue.index+ue[0].length,ge=V;for(ge+=Q.value.length;ie>=ge;)Q=Q.next,ge+=Q.value.length;if(ge-=Q.value.length,V=ge,Q.value instanceof l)continue;for(var ae=Q;ae!==w.tail&&(ge<ne||typeof ae.value=="string");ae=ae.next)J++,ge+=ae.value.length;J--,Y=E.slice(V,ge),ue.index-=V}else if(ue=c(z,0,Y,F),!ue)continue;var ie=ue.index,ee=ue[0],be=Y.slice(0,ie),we=Y.slice(ie+ee.length),Re=V+Y.length;C&&Re>C.reach&&(C.reach=Re);var Oe=Q.prev;be&&(Oe=h(w,Oe,be),V+=be.length),f(w,Oe,J);var me=new l(k,M?o.tokenize(ee,M):ee,W,ee);if(Q=h(w,Oe,me),we&&h(w,Q,we),J>1){var Ue={cause:k+","+I,reach:Re};u(E,w,A,Q.prev,V,Ue),C&&Ue.reach>C.reach&&(C.reach=Ue.reach)}}}}}}function d(){var E={value:null,prev:null,next:null},w={value:null,prev:E,next:null};E.next=w,this.head=E,this.tail=w,this.length=0}function h(E,w,A){var S=w.next,_={value:A,prev:w,next:S};return w.next=_,S.prev=_,E.length++,_}function f(E,w,A){for(var S=w.next,_=0;_<A&&S!==E.tail;_++)S=S.next;w.next=S,S.prev=w,E.length-=_}function m(E){for(var w=[],A=E.head.next;A!==E.tail;)w.push(A.value),A=A.next;return w}if(!n.document)return n.addEventListener&&(o.disableWorkerMessageHandler||n.addEventListener("message",function(E){var w=JSON.parse(E.data),A=w.language,S=w.code,_=w.immediateClose;n.postMessage(o.highlight(S,o.languages[A],A)),_&&n.close()},!1)),o;var g=o.util.currentScript();g&&(o.filename=g.src,g.hasAttribute("data-manual")&&(o.manual=!0));function y(){o.manual||o.highlightAll()}if(!o.manual){var b=document.readyState;b==="loading"||b==="interactive"&&g&&g.defer?document.addEventListener("DOMContentLoaded",y):window.requestAnimationFrame?window.requestAnimationFrame(y):window.setTimeout(y,16)}return o}(e);r.exports&&(r.exports=t),typeof Rn<"u"&&(Rn.Prism=t),t.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},t.languages.markup.tag.inside["attr-value"].inside.entity=t.languages.markup.entity,t.languages.markup.doctype.inside["internal-subset"].inside=t.languages.markup,t.hooks.add("wrap",function(n){n.type==="entity"&&(n.attributes.title=n.content.replace(/&amp;/,"&"))}),Object.defineProperty(t.languages.markup.tag,"addInlined",{value:function(i,s){var a={};a["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:t.languages[s]},a.cdata=/^<!\[CDATA\[|\]\]>$/i;var o={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:a}};o["language-"+s]={pattern:/[\s\S]+/,inside:t.languages[s]};var l={};l[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:o},t.languages.insertBefore("markup","cdata",l)}}),Object.defineProperty(t.languages.markup.tag,"addAttribute",{value:function(n,i){t.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+n+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:t.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),t.languages.html=t.languages.markup,t.languages.mathml=t.languages.markup,t.languages.svg=t.languages.markup,t.languages.xml=t.languages.extend("markup",{}),t.languages.ssml=t.languages.xml,t.languages.atom=t.languages.xml,t.languages.rss=t.languages.xml,function(n){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;n.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},n.languages.css.atrule.inside.rest=n.languages.css;var s=n.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(t),t.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},t.languages.javascript=t.languages.extend("clike",{"class-name":[t.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),t.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,t.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:t.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:t.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:t.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:t.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:t.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),t.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:t.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),t.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),t.languages.markup&&(t.languages.markup.tag.addInlined("script","javascript"),t.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),t.languages.js=t.languages.javascript,function(){if(typeof t>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var n="Loading…",i=function(g,y){return"✖ Error "+g+" while fetching file: "+y},s="✖ Error: File does not exist or is empty",a={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},o="data-src-status",l="loading",c="loaded",u="failed",d="pre[data-src]:not(["+o+'="'+c+'"]):not(['+o+'="'+l+'"])';function h(g,y,b){var E=new XMLHttpRequest;E.open("GET",g,!0),E.onreadystatechange=function(){E.readyState==4&&(E.status<400&&E.responseText?y(E.responseText):E.status>=400?b(i(E.status,E.statusText)):b(s))},E.send(null)}function f(g){var y=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(g||"");if(y){var b=Number(y[1]),E=y[2],w=y[3];return E?w?[b,Number(w)]:[b,void 0]:[b,b]}}t.hooks.add("before-highlightall",function(g){g.selector+=", "+d}),t.hooks.add("before-sanity-check",function(g){var y=g.element;if(y.matches(d)){g.code="",y.setAttribute(o,l);var b=y.appendChild(document.createElement("CODE"));b.textContent=n;var E=y.getAttribute("data-src"),w=g.language;if(w==="none"){var A=(/\.(\w+)$/.exec(E)||[,"none"])[1];w=a[A]||A}t.util.setLanguage(b,w),t.util.setLanguage(y,w);var S=t.plugins.autoloader;S&&S.loadLanguages(w),h(E,function(_){y.setAttribute(o,c);var C=f(y.getAttribute("data-range"));if(C){var k=_.split(/\r\n?|\n/g),D=C[0],I=C[1]==null?k.length:C[1];D<0&&(D+=k.length),D=Math.max(0,Math.min(D-1,k.length)),I<0&&(I+=k.length),I=Math.max(0,Math.min(I,k.length)),_=k.slice(D,I).join(`
`),y.hasAttribute("data-start")||y.setAttribute("data-start",String(D+1))}b.textContent=_,t.highlightElement(b)},function(_){y.setAttribute(o,u),b.textContent=_})}}),t.plugins.fileHighlight={highlight:function(y){for(var b=(y||document).querySelectorAll(d),E=0,w;w=b[E++];)t.highlightElement(w)}};var m=!1;t.fileHighlight=function(){m||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),m=!0),t.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(AQe);const Ul="single-types";Co("DocumentRBAC",{canCreate:!1,canCreateFields:[],canDelete:!1,canPublish:!1,canRead:!1,canReadFields:[],canUpdate:!1,canUpdateFields:[],canUserAction:()=>!1,isLoading:!1});const mS=xl.enhanceEndpoints({addTagTypes:["ComponentConfiguration","ContentTypesConfiguration","ContentTypeSettings","Document","InitialData","HistoryVersion","Relations","UidAvailability","RecentDocumentList"]}),xZ=mS.injectEndpoints({overrideExisting:!0,endpoints:r=>({autoCloneDocument:r.mutation({query:({model:e,sourceId:t,query:n})=>({url:`/content-manager/collection-types/${e}/auto-clone/${t}`,method:"POST",config:{params:n}}),invalidatesTags:(e,t,{model:n})=>t?[]:[{type:"Document",id:`${n}_LIST`},"RecentDocumentList"]}),cloneDocument:r.mutation({query:({model:e,sourceId:t,data:n,params:i})=>({url:`/content-manager/collection-types/${e}/clone/${t}`,method:"POST",data:n,config:{params:i}}),invalidatesTags:(e,t,{model:n})=>[{type:"Document",id:`${n}_LIST`},{type:"UidAvailability",id:n},"RecentDocumentList"]}),createDocument:r.mutation({query:({model:e,data:t,params:n})=>({url:`/content-manager/collection-types/${e}`,method:"POST",data:t,config:{params:n}}),invalidatesTags:(e,t,{model:n})=>[{type:"Document",id:`${n}_LIST`},"Relations",{type:"UidAvailability",id:n},"RecentDocumentList"],transformResponse:(e,t,n)=>!("data"in e)&&n.model==="plugin::users-permissions.user"?{data:e,meta:{availableStatus:[],availableLocales:[]}}:e}),deleteDocument:r.mutation({query:({collectionType:e,model:t,documentId:n,params:i})=>({url:`/content-manager/${e}/${t}${e!==Ul&&n?`/${n}`:""}`,method:"DELETE",config:{params:i}}),invalidatesTags:(e,t,{collectionType:n,model:i})=>[{type:"Document",id:n!==Ul?`${i}_LIST`:i},"RecentDocumentList"]}),deleteManyDocuments:r.mutation({query:({model:e,params:t,...n})=>({url:`/content-manager/collection-types/${e}/actions/bulkDelete`,method:"POST",data:n,config:{params:t}}),invalidatesTags:(e,t,{model:n})=>[{type:"Document",id:`${n}_LIST`},"RecentDocumentList"]}),discardDocument:r.mutation({query:({collectionType:e,model:t,documentId:n,params:i})=>({url:n?`/content-manager/${e}/${t}/${n}/actions/discard`:`/content-manager/${e}/${t}/actions/discard`,method:"POST",config:{params:i}}),invalidatesTags:(e,t,{collectionType:n,model:i,documentId:s})=>[{type:"Document",id:n!==Ul?`${i}_${s}`:i},{type:"Document",id:`${i}_LIST`},"Relations",{type:"UidAvailability",id:i},"RecentDocumentList"]}),getAllDocuments:r.query({query:({model:e,params:t})=>({url:`/content-manager/collection-types/${e}`,method:"GET",config:{params:fQ.stringify(t,{encode:!0})}}),providesTags:(e,t,n)=>[{type:"Document",id:"ALL_LIST"},{type:"Document",id:`${n.model}_LIST`},...e?.results.map(({documentId:i})=>({type:"Document",id:`${n.model}_${i}`}))??[]]}),getDraftRelationCount:r.query({query:({collectionType:e,model:t,documentId:n,params:i})=>({url:n?`/content-manager/${e}/${t}/${n}/actions/countDraftRelations`:`/content-manager/${e}/${t}/actions/countDraftRelations`,method:"GET",config:{params:i}})}),getDocument:r.query({queryFn:async({collectionType:e,model:t,documentId:n,params:i},s,a,o)=>{const l=await o({url:`/content-manager/${e}/${t}${n?`/${n}`:""}`,method:"GET",config:{params:i}});return l.error&&l.error.name==="NotFoundError"&&e===Ul?{data:{document:void 0},error:void 0}:l},providesTags:(e,t,{collectionType:n,model:i,documentId:s})=>[{type:"Document",id:n!==Ul?`${i}_${e&&"documentId"in e?e.documentId:s}`:i},{type:"Document",id:`${i}_ALL_ITEMS`}]}),getManyDraftRelationCount:r.query({query:({model:e,...t})=>({url:`/content-manager/collection-types/${e}/actions/countManyEntriesDraftRelations`,method:"GET",config:{params:t}}),transformResponse:e=>e.data}),publishDocument:r.mutation({query:({collectionType:e,model:t,documentId:n,params:i,data:s})=>({url:n?`/content-manager/${e}/${t}/${n}/actions/publish`:`/content-manager/${e}/${t}/actions/publish`,method:"POST",data:s,config:{params:i}}),invalidatesTags:(e,t,{collectionType:n,model:i,documentId:s})=>[{type:"Document",id:n!==Ul?`${i}_${s}`:i},{type:"Document",id:`${i}_LIST`},"Relations","RecentDocumentList"]}),publishManyDocuments:r.mutation({query:({model:e,params:t,...n})=>({url:`/content-manager/collection-types/${e}/actions/bulkPublish`,method:"POST",data:n,config:{params:t}}),invalidatesTags:(e,t,{model:n,documentIds:i})=>i.map(s=>({type:"Document",id:`${n}_${s}`}))}),updateDocument:r.mutation({query:({collectionType:e,model:t,documentId:n,data:i,params:s})=>({url:`/content-manager/${e}/${t}${n?`/${n}`:""}`,method:"PUT",data:i,config:{params:s}}),invalidatesTags:(e,t,{collectionType:n,model:i,documentId:s})=>[{type:"Document",id:n!==Ul?`${i}_${s}`:i},"Relations",{type:"UidAvailability",id:i},"RecentDocumentList","RecentDocumentList"],async onQueryStarted({data:e,...t},{dispatch:n,queryFulfilled:i}){const s=n(xZ.util.updateQueryData("getDocument",t,a=>{Object.assign(a.data,e)}));try{await i}catch{s.undo()}}}),unpublishDocument:r.mutation({query:({collectionType:e,model:t,documentId:n,params:i,data:s})=>({url:n?`/content-manager/${e}/${t}/${n}/actions/unpublish`:`/content-manager/${e}/${t}/actions/unpublish`,method:"POST",data:s,config:{params:i}}),invalidatesTags:(e,t,{collectionType:n,model:i,documentId:s})=>[{type:"Document",id:n!==Ul?`${i}_${s}`:i},"RecentDocumentList"]}),unpublishManyDocuments:r.mutation({query:({model:e,params:t,...n})=>({url:`/content-manager/collection-types/${e}/actions/bulkUnpublish`,method:"POST",data:n,config:{params:t}}),invalidatesTags:(e,t,{model:n,documentIds:i})=>[...i.map(s=>({type:"Document",id:`${n}_${s}`})),"RecentDocumentList"]})})}),{useAutoCloneDocumentMutation:sht,useCloneDocumentMutation:aht,useCreateDocumentMutation:oht,useDeleteDocumentMutation:lht,useDeleteManyDocumentsMutation:cht,useDiscardDocumentMutation:uht,useGetAllDocumentsQuery:dht,useLazyGetDocumentQuery:hht,useGetDocumentQuery:fht,useLazyGetDraftRelationCountQuery:pht,useGetManyDraftRelationCountQuery:mht,usePublishDocumentMutation:ght,usePublishManyDocumentsMutation:vht,useUpdateDocumentMutation:yht,useUnpublishDocumentMutation:bht,useUnpublishManyDocumentsMutation:Eht}=xZ,_Qe=mS.injectEndpoints({endpoints:r=>({getInitialData:r.query({query:()=>"/content-manager/init",transformResponse:e=>e.data,providesTags:["InitialData"]})})}),{useGetInitialDataQuery:xht}=_Qe,CQe=mS.injectEndpoints({endpoints:r=>({getContentTypeConfiguration:r.query({query:e=>({url:`/content-manager/content-types/${e}/configuration`,method:"GET"}),transformResponse:e=>e.data,providesTags:(e,t,n)=>[{type:"ContentTypesConfiguration",id:n},{type:"ContentTypeSettings",id:"LIST"}]}),getAllContentTypeSettings:r.query({query:()=>"/content-manager/content-types-settings",transformResponse:e=>e.data,providesTags:[{type:"ContentTypeSettings",id:"LIST"}]}),updateContentTypeConfiguration:r.mutation({query:({uid:e,...t})=>({url:`/content-manager/content-types/${e}/configuration`,method:"PUT",data:t}),transformResponse:e=>e.data,invalidatesTags:(e,t,{uid:n})=>[{type:"ContentTypesConfiguration",id:n},{type:"ContentTypeSettings",id:"LIST"},{type:"InitialData"}]})})}),{useGetContentTypeConfigurationQuery:wht,useGetAllContentTypeSettingsQuery:Tht,useUpdateContentTypeConfigurationMutation:Sht}=CQe;q(BT.Item)`
  &:hover {
    background: ${({theme:r,isVariantDanger:e,isDisabled:t})=>e&&!t?r.colors.danger100:"neutral"};
  }
`;q(Je)`
  max-width: 300px;
`;q(tY)`
  width: 100%;
  table-layout: fixed;
  td:first-child {
    border-right: 1px solid ${({theme:r})=>r.colors.neutral150};
  }
  td:first-of-type {
    padding: ${({theme:r})=>r.spaces[4]};
  }
`;q(vde)`
  path {
    fill: currentColor;
  }
`;q(yde)`
  path {
    fill: currentColor;
  }
`;const RQe={collectionTypeLinks:[],components:[],fieldSizes:{},models:[],singleTypeLinks:[],isLoading:!0},kQe=yQe({name:"app",initialState:RQe,reducers:{setInitialData(r,e){const{authorizedCollectionTypeLinks:t,authorizedSingleTypeLinks:n,components:i,contentTypeSchemas:s,fieldSizes:a}=e.payload;r.collectionTypeLinks=t.filter(({isDisplayed:o})=>o),r.singleTypeLinks=n.filter(({isDisplayed:o})=>o),r.components=i,r.models=s,r.fieldSizes=a,r.isLoading=!1}}}),{reducer:IQe}=kQe;wQ({app:IQe});const $Qe=mS.injectEndpoints({endpoints:r=>({getPreviewUrl:r.query({query({query:e,params:t}){return{url:`/content-manager/preview/url/${t.contentType}`,method:"GET",config:{params:e}}}})})}),{useGetPreviewUrlQuery:Aht}=$Qe;function DQe(r,e,t){if(t===void 0&&(t=Error),!r)throw new t(e)}var LQe=function(r){console.error(r)},OQe=function(r){console.warn(r)},PQe={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:LQe,onWarn:OQe};function MQe(r){DQe(r,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}Et(Et({},PQe),{textComponent:x.Fragment});var EP=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=x.createContext(null)):x.createContext(null);EP.Consumer;EP.Provider;var NQe=EP;function xP(){var r=x.useContext(NQe);return MQe(r),r}var g$;(function(r){r.formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName"})(g$||(g$={}));var v$;(function(r){r.formatDate="FormattedDateParts",r.formatTime="FormattedTimeParts",r.formatNumber="FormattedNumberParts",r.formatList="FormattedListParts"})(v$||(v$={}));function wZ(r){var e=function(t){var n=xP(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=typeof i=="string"?new Date(i||0):i,l=r==="formatDate"?n.formatDateToParts(o,a):n.formatTimeToParts(o,a);return s(l)};return e.displayName=v$[r],e}function zv(r){var e=function(t){var n=xP(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=n[r](i,a);if(typeof s=="function")return s(o);var l=n.textComponent||x.Fragment;return x.createElement(l,null,o)};return e.displayName=g$[r],e}zv("formatDate");zv("formatTime");zv("formatNumber");zv("formatList");zv("formatDisplayName");wZ("formatDate");wZ("formatTime");/*!
 * Cropper.js v1.6.1
 * https://fengyuanchen.github.io/cropperjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2023-09-17T03:44:19.860Z
 */function G7(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function TZ(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?G7(Object(t),!0).forEach(function(n){UQe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):G7(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function y$(r){"@babel/helpers - typeof";return y$=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y$(r)}function FQe(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function q7(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,AZ(n.key),n)}}function BQe(r,e,t){return e&&q7(r.prototype,e),t&&q7(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function UQe(r,e,t){return e=AZ(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function SZ(r){return WQe(r)||HQe(r)||VQe(r)||GQe()}function WQe(r){if(Array.isArray(r))return b$(r)}function HQe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function VQe(r,e){if(r){if(typeof r=="string")return b$(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return b$(r,e)}}function b$(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function GQe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qQe(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}function AZ(r){var e=qQe(r,"string");return typeof e=="symbol"?e:String(e)}var gS=typeof window<"u"&&typeof window.document<"u",yo=gS?window:{},wP=gS&&yo.document.documentElement?"ontouchstart"in yo.document.documentElement:!1,TP=gS?"PointerEvent"in yo:!1,Er="cropper",SP="all",_Z="crop",CZ="move",RZ="zoom",fu="e",pu="w",Dh="s",Wl="n",Im="ne",$m="nw",Dm="se",Lm="sw",E$="".concat(Er,"-crop"),j7="".concat(Er,"-disabled"),Ri="".concat(Er,"-hidden"),K7="".concat(Er,"-hide"),jQe="".concat(Er,"-invisible"),dw="".concat(Er,"-modal"),x$="".concat(Er,"-move"),F0="".concat(Er,"Action"),Nb="".concat(Er,"Preview"),AP="crop",kZ="move",IZ="none",w$="crop",T$="cropend",S$="cropmove",A$="cropstart",z7="dblclick",KQe=wP?"touchstart":"mousedown",zQe=wP?"touchmove":"mousemove",YQe=wP?"touchend touchcancel":"mouseup",Y7=TP?"pointerdown":KQe,Q7=TP?"pointermove":zQe,X7=TP?"pointerup pointercancel":YQe,Z7="ready",J7="resize",eB="wheel",_$="zoom",tB="image/jpeg",QQe=/^e|w|s|n|se|sw|ne|nw|all|crop|move|zoom$/,XQe=/^data:/,ZQe=/^data:image\/jpeg;base64,/,JQe=/^img|canvas$/i,$Z=200,DZ=100,rB={viewMode:0,dragMode:AP,initialAspectRatio:NaN,aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:$Z,minContainerHeight:DZ,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},eXe='<div class="cropper-container" touch-action="none"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-cropper-action="e"></span><span class="cropper-line line-n" data-cropper-action="n"></span><span class="cropper-line line-w" data-cropper-action="w"></span><span class="cropper-line line-s" data-cropper-action="s"></span><span class="cropper-point point-e" data-cropper-action="e"></span><span class="cropper-point point-n" data-cropper-action="n"></span><span class="cropper-point point-w" data-cropper-action="w"></span><span class="cropper-point point-s" data-cropper-action="s"></span><span class="cropper-point point-ne" data-cropper-action="ne"></span><span class="cropper-point point-nw" data-cropper-action="nw"></span><span class="cropper-point point-sw" data-cropper-action="sw"></span><span class="cropper-point point-se" data-cropper-action="se"></span></div></div>',tXe=Number.isNaN||yo.isNaN;function kt(r){return typeof r=="number"&&!tXe(r)}var nB=function(e){return e>0&&e<1/0};function XC(r){return typeof r>"u"}function Nd(r){return y$(r)==="object"&&r!==null}var rXe=Object.prototype.hasOwnProperty;function bf(r){if(!Nd(r))return!1;try{var e=r.constructor,t=e.prototype;return e&&t&&rXe.call(t,"isPrototypeOf")}catch{return!1}}function Ci(r){return typeof r=="function"}var nXe=Array.prototype.slice;function LZ(r){return Array.from?Array.from(r):nXe.call(r)}function Zr(r,e){return r&&Ci(e)&&(Array.isArray(r)||kt(r.length)?LZ(r).forEach(function(t,n){e.call(r,t,n,r)}):Nd(r)&&Object.keys(r).forEach(function(t){e.call(r,r[t],t,r)})),r}var Sr=Object.assign||function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Nd(e)&&n.length>0&&n.forEach(function(s){Nd(s)&&Object.keys(s).forEach(function(a){e[a]=s[a]})}),e},iXe=/\.\d*(?:0|9){12}\d*$/;function Mf(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1e11;return iXe.test(r)?Math.round(r*e)/e:r}var sXe=/^width|height|left|top|marginLeft|marginTop$/;function Ec(r,e){var t=r.style;Zr(e,function(n,i){sXe.test(i)&&kt(n)&&(n="".concat(n,"px")),t[i]=n})}function aXe(r,e){return r.classList?r.classList.contains(e):r.className.indexOf(e)>-1}function An(r,e){if(e){if(kt(r.length)){Zr(r,function(n){An(n,e)});return}if(r.classList){r.classList.add(e);return}var t=r.className.trim();t?t.indexOf(e)<0&&(r.className="".concat(t," ").concat(e)):r.className=e}}function co(r,e){if(e){if(kt(r.length)){Zr(r,function(t){co(t,e)});return}if(r.classList){r.classList.remove(e);return}r.className.indexOf(e)>=0&&(r.className=r.className.replace(e,""))}}function Ef(r,e,t){if(e){if(kt(r.length)){Zr(r,function(n){Ef(n,e,t)});return}t?An(r,e):co(r,e)}}var oXe=/([a-z\d])([A-Z])/g;function _P(r){return r.replace(oXe,"$1-$2").toLowerCase()}function C$(r,e){return Nd(r[e])?r[e]:r.dataset?r.dataset[e]:r.getAttribute("data-".concat(_P(e)))}function B0(r,e,t){Nd(t)?r[e]=t:r.dataset?r.dataset[e]=t:r.setAttribute("data-".concat(_P(e)),t)}function lXe(r,e){if(Nd(r[e]))try{delete r[e]}catch{r[e]=void 0}else if(r.dataset)try{delete r.dataset[e]}catch{r.dataset[e]=void 0}else r.removeAttribute("data-".concat(_P(e)))}var OZ=/\s\s*/,PZ=function(){var r=!1;if(gS){var e=!1,t=function(){},n=Object.defineProperty({},"once",{get:function(){return r=!0,e},set:function(s){e=s}});yo.addEventListener("test",t,n),yo.removeEventListener("test",t,n)}return r}();function Vs(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=t;e.trim().split(OZ).forEach(function(s){if(!PZ){var a=r.listeners;a&&a[s]&&a[s][t]&&(i=a[s][t],delete a[s][t],Object.keys(a[s]).length===0&&delete a[s],Object.keys(a).length===0&&delete r.listeners)}r.removeEventListener(s,i,n)})}function xs(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},i=t;e.trim().split(OZ).forEach(function(s){if(n.once&&!PZ){var a=r.listeners,o=a===void 0?{}:a;i=function(){delete o[s][t],r.removeEventListener(s,i,n);for(var c=arguments.length,u=new Array(c),d=0;d<c;d++)u[d]=arguments[d];t.apply(r,u)},o[s]||(o[s]={}),o[s][t]&&r.removeEventListener(s,o[s][t],n),o[s][t]=i,r.listeners=o}r.addEventListener(s,i,n)})}function Nf(r,e,t){var n;return Ci(Event)&&Ci(CustomEvent)?n=new CustomEvent(e,{detail:t,bubbles:!0,cancelable:!0}):(n=document.createEvent("CustomEvent"),n.initCustomEvent(e,!0,!0,t)),r.dispatchEvent(n)}function MZ(r){var e=r.getBoundingClientRect();return{left:e.left+(window.pageXOffset-document.documentElement.clientLeft),top:e.top+(window.pageYOffset-document.documentElement.clientTop)}}var ZC=yo.location,cXe=/^(\w+:)\/\/([^:/?#]*):?(\d*)/i;function iB(r){var e=r.match(cXe);return e!==null&&(e[1]!==ZC.protocol||e[2]!==ZC.hostname||e[3]!==ZC.port)}function sB(r){var e="timestamp=".concat(new Date().getTime());return r+(r.indexOf("?")===-1?"?":"&")+e}function qg(r){var e=r.rotate,t=r.scaleX,n=r.scaleY,i=r.translateX,s=r.translateY,a=[];kt(i)&&i!==0&&a.push("translateX(".concat(i,"px)")),kt(s)&&s!==0&&a.push("translateY(".concat(s,"px)")),kt(e)&&e!==0&&a.push("rotate(".concat(e,"deg)")),kt(t)&&t!==1&&a.push("scaleX(".concat(t,")")),kt(n)&&n!==1&&a.push("scaleY(".concat(n,")"));var o=a.length?a.join(" "):"none";return{WebkitTransform:o,msTransform:o,transform:o}}function uXe(r){var e=TZ({},r),t=0;return Zr(r,function(n,i){delete e[i],Zr(e,function(s){var a=Math.abs(n.startX-s.startX),o=Math.abs(n.startY-s.startY),l=Math.abs(n.endX-s.endX),c=Math.abs(n.endY-s.endY),u=Math.sqrt(a*a+o*o),d=Math.sqrt(l*l+c*c),h=(d-u)/u;Math.abs(h)>Math.abs(t)&&(t=h)})}),t}function Fb(r,e){var t=r.pageX,n=r.pageY,i={endX:t,endY:n};return e?i:TZ({startX:t,startY:n},i)}function dXe(r){var e=0,t=0,n=0;return Zr(r,function(i){var s=i.startX,a=i.startY;e+=s,t+=a,n+=1}),e/=n,t/=n,{pageX:e,pageY:t}}function xc(r){var e=r.aspectRatio,t=r.height,n=r.width,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"contain",s=nB(n),a=nB(t);if(s&&a){var o=t*e;i==="contain"&&o>n||i==="cover"&&o<n?t=n/e:n=t*e}else s?t=n/e:a&&(n=t*e);return{width:n,height:t}}function hXe(r){var e=r.width,t=r.height,n=r.degree;if(n=Math.abs(n)%180,n===90)return{width:t,height:e};var i=n%90*Math.PI/180,s=Math.sin(i),a=Math.cos(i),o=e*a+t*s,l=e*s+t*a;return n>90?{width:l,height:o}:{width:o,height:l}}function fXe(r,e,t,n){var i=e.aspectRatio,s=e.naturalWidth,a=e.naturalHeight,o=e.rotate,l=o===void 0?0:o,c=e.scaleX,u=c===void 0?1:c,d=e.scaleY,h=d===void 0?1:d,f=t.aspectRatio,m=t.naturalWidth,g=t.naturalHeight,y=n.fillColor,b=y===void 0?"transparent":y,E=n.imageSmoothingEnabled,w=E===void 0?!0:E,A=n.imageSmoothingQuality,S=A===void 0?"low":A,_=n.maxWidth,C=_===void 0?1/0:_,k=n.maxHeight,D=k===void 0?1/0:k,I=n.minWidth,L=I===void 0?0:I,M=n.minHeight,F=M===void 0?0:M,U=document.createElement("canvas"),W=U.getContext("2d"),j=xc({aspectRatio:f,width:C,height:D}),z=xc({aspectRatio:f,width:L,height:F},"cover"),Q=Math.min(j.width,Math.max(z.width,m)),V=Math.min(j.height,Math.max(z.height,g)),Y=xc({aspectRatio:i,width:C,height:D}),J=xc({aspectRatio:i,width:L,height:F},"cover"),ue=Math.min(Y.width,Math.max(J.width,s)),ne=Math.min(Y.height,Math.max(J.height,a)),ge=[-ue/2,-ne/2,ue,ne];return U.width=Mf(Q),U.height=Mf(V),W.fillStyle=b,W.fillRect(0,0,Q,V),W.save(),W.translate(Q/2,V/2),W.rotate(l*Math.PI/180),W.scale(u,h),W.imageSmoothingEnabled=w,W.imageSmoothingQuality=S,W.drawImage.apply(W,[r].concat(SZ(ge.map(function(ae){return Math.floor(Mf(ae))})))),W.restore(),U}var NZ=String.fromCharCode;function pXe(r,e,t){var n="";t+=e;for(var i=e;i<t;i+=1)n+=NZ(r.getUint8(i));return n}var mXe=/^data:.*,/;function gXe(r){var e=r.replace(mXe,""),t=atob(e),n=new ArrayBuffer(t.length),i=new Uint8Array(n);return Zr(i,function(s,a){i[a]=t.charCodeAt(a)}),n}function vXe(r,e){for(var t=[],n=8192,i=new Uint8Array(r);i.length>0;)t.push(NZ.apply(null,LZ(i.subarray(0,n)))),i=i.subarray(n);return"data:".concat(e,";base64,").concat(btoa(t.join("")))}function yXe(r){var e=new DataView(r),t;try{var n,i,s;if(e.getUint8(0)===255&&e.getUint8(1)===216)for(var a=e.byteLength,o=2;o+1<a;){if(e.getUint8(o)===255&&e.getUint8(o+1)===225){i=o;break}o+=1}if(i){var l=i+4,c=i+10;if(pXe(e,l,4)==="Exif"){var u=e.getUint16(c);if(n=u===18761,(n||u===19789)&&e.getUint16(c+2,n)===42){var d=e.getUint32(c+4,n);d>=8&&(s=c+d)}}}if(s){var h=e.getUint16(s,n),f,m;for(m=0;m<h;m+=1)if(f=s+m*12+2,e.getUint16(f,n)===274){f+=8,t=e.getUint16(f,n),e.setUint16(f,1,n);break}}}catch{t=1}return t}function bXe(r){var e=0,t=1,n=1;switch(r){case 2:t=-1;break;case 3:e=-180;break;case 4:n=-1;break;case 5:e=90,n=-1;break;case 6:e=90;break;case 7:e=90,t=-1;break;case 8:e=-90;break}return{rotate:e,scaleX:t,scaleY:n}}var EXe={render:function(){this.initContainer(),this.initCanvas(),this.initCropBox(),this.renderCanvas(),this.cropped&&this.renderCropBox()},initContainer:function(){var e=this.element,t=this.options,n=this.container,i=this.cropper,s=Number(t.minContainerWidth),a=Number(t.minContainerHeight);An(i,Ri),co(e,Ri);var o={width:Math.max(n.offsetWidth,s>=0?s:$Z),height:Math.max(n.offsetHeight,a>=0?a:DZ)};this.containerData=o,Ec(i,{width:o.width,height:o.height}),An(e,Ri),co(i,Ri)},initCanvas:function(){var e=this.containerData,t=this.imageData,n=this.options.viewMode,i=Math.abs(t.rotate)%180===90,s=i?t.naturalHeight:t.naturalWidth,a=i?t.naturalWidth:t.naturalHeight,o=s/a,l=e.width,c=e.height;e.height*o>e.width?n===3?l=e.height*o:c=e.width/o:n===3?c=e.width/o:l=e.height*o;var u={aspectRatio:o,naturalWidth:s,naturalHeight:a,width:l,height:c};this.canvasData=u,this.limited=n===1||n===2,this.limitCanvas(!0,!0),u.width=Math.min(Math.max(u.width,u.minWidth),u.maxWidth),u.height=Math.min(Math.max(u.height,u.minHeight),u.maxHeight),u.left=(e.width-u.width)/2,u.top=(e.height-u.height)/2,u.oldLeft=u.left,u.oldTop=u.top,this.initialCanvasData=Sr({},u)},limitCanvas:function(e,t){var n=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,o=n.viewMode,l=s.aspectRatio,c=this.cropped&&a;if(e){var u=Number(n.minCanvasWidth)||0,d=Number(n.minCanvasHeight)||0;o>1?(u=Math.max(u,i.width),d=Math.max(d,i.height),o===3&&(d*l>u?u=d*l:d=u/l)):o>0&&(u?u=Math.max(u,c?a.width:0):d?d=Math.max(d,c?a.height:0):c&&(u=a.width,d=a.height,d*l>u?u=d*l:d=u/l));var h=xc({aspectRatio:l,width:u,height:d});u=h.width,d=h.height,s.minWidth=u,s.minHeight=d,s.maxWidth=1/0,s.maxHeight=1/0}if(t)if(o>(c?0:1)){var f=i.width-s.width,m=i.height-s.height;s.minLeft=Math.min(0,f),s.minTop=Math.min(0,m),s.maxLeft=Math.max(0,f),s.maxTop=Math.max(0,m),c&&this.limited&&(s.minLeft=Math.min(a.left,a.left+(a.width-s.width)),s.minTop=Math.min(a.top,a.top+(a.height-s.height)),s.maxLeft=a.left,s.maxTop=a.top,o===2&&(s.width>=i.width&&(s.minLeft=Math.min(0,f),s.maxLeft=Math.max(0,f)),s.height>=i.height&&(s.minTop=Math.min(0,m),s.maxTop=Math.max(0,m))))}else s.minLeft=-s.width,s.minTop=-s.height,s.maxLeft=i.width,s.maxTop=i.height},renderCanvas:function(e,t){var n=this.canvasData,i=this.imageData;if(t){var s=hXe({width:i.naturalWidth*Math.abs(i.scaleX||1),height:i.naturalHeight*Math.abs(i.scaleY||1),degree:i.rotate||0}),a=s.width,o=s.height,l=n.width*(a/n.naturalWidth),c=n.height*(o/n.naturalHeight);n.left-=(l-n.width)/2,n.top-=(c-n.height)/2,n.width=l,n.height=c,n.aspectRatio=a/o,n.naturalWidth=a,n.naturalHeight=o,this.limitCanvas(!0,!1)}(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCanvas(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,Ec(this.canvas,Sr({width:n.width,height:n.height},qg({translateX:n.left,translateY:n.top}))),this.renderImage(e),this.cropped&&this.limited&&this.limitCropBox(!0,!0)},renderImage:function(e){var t=this.canvasData,n=this.imageData,i=n.naturalWidth*(t.width/t.naturalWidth),s=n.naturalHeight*(t.height/t.naturalHeight);Sr(n,{width:i,height:s,left:(t.width-i)/2,top:(t.height-s)/2}),Ec(this.image,Sr({width:n.width,height:n.height},qg(Sr({translateX:n.left,translateY:n.top},n)))),e&&this.output()},initCropBox:function(){var e=this.options,t=this.canvasData,n=e.aspectRatio||e.initialAspectRatio,i=Number(e.autoCropArea)||.8,s={width:t.width,height:t.height};n&&(t.height*n>t.width?s.height=s.width/n:s.width=s.height*n),this.cropBoxData=s,this.limitCropBox(!0,!0),s.width=Math.min(Math.max(s.width,s.minWidth),s.maxWidth),s.height=Math.min(Math.max(s.height,s.minHeight),s.maxHeight),s.width=Math.max(s.minWidth,s.width*i),s.height=Math.max(s.minHeight,s.height*i),s.left=t.left+(t.width-s.width)/2,s.top=t.top+(t.height-s.height)/2,s.oldLeft=s.left,s.oldTop=s.top,this.initialCropBoxData=Sr({},s)},limitCropBox:function(e,t){var n=this.options,i=this.containerData,s=this.canvasData,a=this.cropBoxData,o=this.limited,l=n.aspectRatio;if(e){var c=Number(n.minCropBoxWidth)||0,u=Number(n.minCropBoxHeight)||0,d=o?Math.min(i.width,s.width,s.width+s.left,i.width-s.left):i.width,h=o?Math.min(i.height,s.height,s.height+s.top,i.height-s.top):i.height;c=Math.min(c,i.width),u=Math.min(u,i.height),l&&(c&&u?u*l>c?u=c/l:c=u*l:c?u=c/l:u&&(c=u*l),h*l>d?h=d/l:d=h*l),a.minWidth=Math.min(c,d),a.minHeight=Math.min(u,h),a.maxWidth=d,a.maxHeight=h}t&&(o?(a.minLeft=Math.max(0,s.left),a.minTop=Math.max(0,s.top),a.maxLeft=Math.min(i.width,s.left+s.width)-a.width,a.maxTop=Math.min(i.height,s.top+s.height)-a.height):(a.minLeft=0,a.minTop=0,a.maxLeft=i.width-a.width,a.maxTop=i.height-a.height))},renderCropBox:function(){var e=this.options,t=this.containerData,n=this.cropBoxData;(n.width>n.maxWidth||n.width<n.minWidth)&&(n.left=n.oldLeft),(n.height>n.maxHeight||n.height<n.minHeight)&&(n.top=n.oldTop),n.width=Math.min(Math.max(n.width,n.minWidth),n.maxWidth),n.height=Math.min(Math.max(n.height,n.minHeight),n.maxHeight),this.limitCropBox(!1,!0),n.left=Math.min(Math.max(n.left,n.minLeft),n.maxLeft),n.top=Math.min(Math.max(n.top,n.minTop),n.maxTop),n.oldLeft=n.left,n.oldTop=n.top,e.movable&&e.cropBoxMovable&&B0(this.face,F0,n.width>=t.width&&n.height>=t.height?CZ:SP),Ec(this.cropBox,Sr({width:n.width,height:n.height},qg({translateX:n.left,translateY:n.top}))),this.cropped&&this.limited&&this.limitCanvas(!0,!0),this.disabled||this.output()},output:function(){this.preview(),Nf(this.element,w$,this.getData())}},xXe={initPreview:function(){var e=this.element,t=this.crossOrigin,n=this.options.preview,i=t?this.crossOriginUrl:this.url,s=e.alt||"The image to preview",a=document.createElement("img");if(t&&(a.crossOrigin=t),a.src=i,a.alt=s,this.viewBox.appendChild(a),this.viewBoxImage=a,!!n){var o=n;typeof n=="string"?o=e.ownerDocument.querySelectorAll(n):n.querySelector&&(o=[n]),this.previews=o,Zr(o,function(l){var c=document.createElement("img");B0(l,Nb,{width:l.offsetWidth,height:l.offsetHeight,html:l.innerHTML}),t&&(c.crossOrigin=t),c.src=i,c.alt=s,c.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',l.innerHTML="",l.appendChild(c)})}},resetPreview:function(){Zr(this.previews,function(e){var t=C$(e,Nb);Ec(e,{width:t.width,height:t.height}),e.innerHTML=t.html,lXe(e,Nb)})},preview:function(){var e=this.imageData,t=this.canvasData,n=this.cropBoxData,i=n.width,s=n.height,a=e.width,o=e.height,l=n.left-t.left-e.left,c=n.top-t.top-e.top;!this.cropped||this.disabled||(Ec(this.viewBoxImage,Sr({width:a,height:o},qg(Sr({translateX:-l,translateY:-c},e)))),Zr(this.previews,function(u){var d=C$(u,Nb),h=d.width,f=d.height,m=h,g=f,y=1;i&&(y=h/i,g=s*y),s&&g>f&&(y=f/s,m=i*y,g=f),Ec(u,{width:m,height:g}),Ec(u.getElementsByTagName("img")[0],Sr({width:a*y,height:o*y},qg(Sr({translateX:-l*y,translateY:-c*y},e))))}))}},wXe={bind:function(){var e=this.element,t=this.options,n=this.cropper;Ci(t.cropstart)&&xs(e,A$,t.cropstart),Ci(t.cropmove)&&xs(e,S$,t.cropmove),Ci(t.cropend)&&xs(e,T$,t.cropend),Ci(t.crop)&&xs(e,w$,t.crop),Ci(t.zoom)&&xs(e,_$,t.zoom),xs(n,Y7,this.onCropStart=this.cropStart.bind(this)),t.zoomable&&t.zoomOnWheel&&xs(n,eB,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&xs(n,z7,this.onDblclick=this.dblclick.bind(this)),xs(e.ownerDocument,Q7,this.onCropMove=this.cropMove.bind(this)),xs(e.ownerDocument,X7,this.onCropEnd=this.cropEnd.bind(this)),t.responsive&&xs(window,J7,this.onResize=this.resize.bind(this))},unbind:function(){var e=this.element,t=this.options,n=this.cropper;Ci(t.cropstart)&&Vs(e,A$,t.cropstart),Ci(t.cropmove)&&Vs(e,S$,t.cropmove),Ci(t.cropend)&&Vs(e,T$,t.cropend),Ci(t.crop)&&Vs(e,w$,t.crop),Ci(t.zoom)&&Vs(e,_$,t.zoom),Vs(n,Y7,this.onCropStart),t.zoomable&&t.zoomOnWheel&&Vs(n,eB,this.onWheel,{passive:!1,capture:!0}),t.toggleDragModeOnDblclick&&Vs(n,z7,this.onDblclick),Vs(e.ownerDocument,Q7,this.onCropMove),Vs(e.ownerDocument,X7,this.onCropEnd),t.responsive&&Vs(window,J7,this.onResize)}},TXe={resize:function(){if(!this.disabled){var e=this.options,t=this.container,n=this.containerData,i=t.offsetWidth/n.width,s=t.offsetHeight/n.height,a=Math.abs(i-1)>Math.abs(s-1)?i:s;if(a!==1){var o,l;e.restore&&(o=this.getCanvasData(),l=this.getCropBoxData()),this.render(),e.restore&&(this.setCanvasData(Zr(o,function(c,u){o[u]=c*a})),this.setCropBoxData(Zr(l,function(c,u){l[u]=c*a})))}}},dblclick:function(){this.disabled||this.options.dragMode===IZ||this.setDragMode(aXe(this.dragBox,E$)?kZ:AP)},wheel:function(e){var t=this,n=Number(this.options.wheelZoomRatio)||.1,i=1;this.disabled||(e.preventDefault(),!this.wheeling&&(this.wheeling=!0,setTimeout(function(){t.wheeling=!1},50),e.deltaY?i=e.deltaY>0?1:-1:e.wheelDelta?i=-e.wheelDelta/120:e.detail&&(i=e.detail>0?1:-1),this.zoom(-i*n,e)))},cropStart:function(e){var t=e.buttons,n=e.button;if(!(this.disabled||(e.type==="mousedown"||e.type==="pointerdown"&&e.pointerType==="mouse")&&(kt(t)&&t!==1||kt(n)&&n!==0||e.ctrlKey))){var i=this.options,s=this.pointers,a;e.changedTouches?Zr(e.changedTouches,function(o){s[o.identifier]=Fb(o)}):s[e.pointerId||0]=Fb(e),Object.keys(s).length>1&&i.zoomable&&i.zoomOnTouch?a=RZ:a=C$(e.target,F0),QQe.test(a)&&Nf(this.element,A$,{originalEvent:e,action:a})!==!1&&(e.preventDefault(),this.action=a,this.cropping=!1,a===_Z&&(this.cropping=!0,An(this.dragBox,dw)))}},cropMove:function(e){var t=this.action;if(!(this.disabled||!t)){var n=this.pointers;e.preventDefault(),Nf(this.element,S$,{originalEvent:e,action:t})!==!1&&(e.changedTouches?Zr(e.changedTouches,function(i){Sr(n[i.identifier]||{},Fb(i,!0))}):Sr(n[e.pointerId||0]||{},Fb(e,!0)),this.change(e))}},cropEnd:function(e){if(!this.disabled){var t=this.action,n=this.pointers;e.changedTouches?Zr(e.changedTouches,function(i){delete n[i.identifier]}):delete n[e.pointerId||0],t&&(e.preventDefault(),Object.keys(n).length||(this.action=""),this.cropping&&(this.cropping=!1,Ef(this.dragBox,dw,this.cropped&&this.options.modal)),Nf(this.element,T$,{originalEvent:e,action:t}))}}},SXe={change:function(e){var t=this.options,n=this.canvasData,i=this.containerData,s=this.cropBoxData,a=this.pointers,o=this.action,l=t.aspectRatio,c=s.left,u=s.top,d=s.width,h=s.height,f=c+d,m=u+h,g=0,y=0,b=i.width,E=i.height,w=!0,A;!l&&e.shiftKey&&(l=d&&h?d/h:1),this.limited&&(g=s.minLeft,y=s.minTop,b=g+Math.min(i.width,n.width,n.left+n.width),E=y+Math.min(i.height,n.height,n.top+n.height));var S=a[Object.keys(a)[0]],_={x:S.endX-S.startX,y:S.endY-S.startY},C=function(D){switch(D){case fu:f+_.x>b&&(_.x=b-f);break;case pu:c+_.x<g&&(_.x=g-c);break;case Wl:u+_.y<y&&(_.y=y-u);break;case Dh:m+_.y>E&&(_.y=E-m);break}};switch(o){case SP:c+=_.x,u+=_.y;break;case fu:if(_.x>=0&&(f>=b||l&&(u<=y||m>=E))){w=!1;break}C(fu),d+=_.x,d<0&&(o=pu,d=-d,c-=d),l&&(h=d/l,u+=(s.height-h)/2);break;case Wl:if(_.y<=0&&(u<=y||l&&(c<=g||f>=b))){w=!1;break}C(Wl),h-=_.y,u+=_.y,h<0&&(o=Dh,h=-h,u-=h),l&&(d=h*l,c+=(s.width-d)/2);break;case pu:if(_.x<=0&&(c<=g||l&&(u<=y||m>=E))){w=!1;break}C(pu),d-=_.x,c+=_.x,d<0&&(o=fu,d=-d,c-=d),l&&(h=d/l,u+=(s.height-h)/2);break;case Dh:if(_.y>=0&&(m>=E||l&&(c<=g||f>=b))){w=!1;break}C(Dh),h+=_.y,h<0&&(o=Wl,h=-h,u-=h),l&&(d=h*l,c+=(s.width-d)/2);break;case Im:if(l){if(_.y<=0&&(u<=y||f>=b)){w=!1;break}C(Wl),h-=_.y,u+=_.y,d=h*l}else C(Wl),C(fu),_.x>=0?f<b?d+=_.x:_.y<=0&&u<=y&&(w=!1):d+=_.x,_.y<=0?u>y&&(h-=_.y,u+=_.y):(h-=_.y,u+=_.y);d<0&&h<0?(o=Lm,h=-h,d=-d,u-=h,c-=d):d<0?(o=$m,d=-d,c-=d):h<0&&(o=Dm,h=-h,u-=h);break;case $m:if(l){if(_.y<=0&&(u<=y||c<=g)){w=!1;break}C(Wl),h-=_.y,u+=_.y,d=h*l,c+=s.width-d}else C(Wl),C(pu),_.x<=0?c>g?(d-=_.x,c+=_.x):_.y<=0&&u<=y&&(w=!1):(d-=_.x,c+=_.x),_.y<=0?u>y&&(h-=_.y,u+=_.y):(h-=_.y,u+=_.y);d<0&&h<0?(o=Dm,h=-h,d=-d,u-=h,c-=d):d<0?(o=Im,d=-d,c-=d):h<0&&(o=Lm,h=-h,u-=h);break;case Lm:if(l){if(_.x<=0&&(c<=g||m>=E)){w=!1;break}C(pu),d-=_.x,c+=_.x,h=d/l}else C(Dh),C(pu),_.x<=0?c>g?(d-=_.x,c+=_.x):_.y>=0&&m>=E&&(w=!1):(d-=_.x,c+=_.x),_.y>=0?m<E&&(h+=_.y):h+=_.y;d<0&&h<0?(o=Im,h=-h,d=-d,u-=h,c-=d):d<0?(o=Dm,d=-d,c-=d):h<0&&(o=$m,h=-h,u-=h);break;case Dm:if(l){if(_.x>=0&&(f>=b||m>=E)){w=!1;break}C(fu),d+=_.x,h=d/l}else C(Dh),C(fu),_.x>=0?f<b?d+=_.x:_.y>=0&&m>=E&&(w=!1):d+=_.x,_.y>=0?m<E&&(h+=_.y):h+=_.y;d<0&&h<0?(o=$m,h=-h,d=-d,u-=h,c-=d):d<0?(o=Lm,d=-d,c-=d):h<0&&(o=Im,h=-h,u-=h);break;case CZ:this.move(_.x,_.y),w=!1;break;case RZ:this.zoom(uXe(a),e),w=!1;break;case _Z:if(!_.x||!_.y){w=!1;break}A=MZ(this.cropper),c=S.startX-A.left,u=S.startY-A.top,d=s.minWidth,h=s.minHeight,_.x>0?o=_.y>0?Dm:Im:_.x<0&&(c-=d,o=_.y>0?Lm:$m),_.y<0&&(u-=h),this.cropped||(co(this.cropBox,Ri),this.cropped=!0,this.limited&&this.limitCropBox(!0,!0));break}w&&(s.width=d,s.height=h,s.left=c,s.top=u,this.action=o,this.renderCropBox()),Zr(a,function(k){k.startX=k.endX,k.startY=k.endY})}},AXe={crop:function(){return this.ready&&!this.cropped&&!this.disabled&&(this.cropped=!0,this.limitCropBox(!0,!0),this.options.modal&&An(this.dragBox,dw),co(this.cropBox,Ri),this.setCropBoxData(this.initialCropBoxData)),this},reset:function(){return this.ready&&!this.disabled&&(this.imageData=Sr({},this.initialImageData),this.canvasData=Sr({},this.initialCanvasData),this.cropBoxData=Sr({},this.initialCropBoxData),this.renderCanvas(),this.cropped&&this.renderCropBox()),this},clear:function(){return this.cropped&&!this.disabled&&(Sr(this.cropBoxData,{left:0,top:0,width:0,height:0}),this.cropped=!1,this.renderCropBox(),this.limitCanvas(!0,!0),this.renderCanvas(),co(this.dragBox,dw),An(this.cropBox,Ri)),this},replace:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return!this.disabled&&e&&(this.isImg&&(this.element.src=e),t?(this.url=e,this.image.src=e,this.ready&&(this.viewBoxImage.src=e,Zr(this.previews,function(n){n.getElementsByTagName("img")[0].src=e}))):(this.isImg&&(this.replaced=!0),this.options.data=null,this.uncreate(),this.load(e))),this},enable:function(){return this.ready&&this.disabled&&(this.disabled=!1,co(this.cropper,j7)),this},disable:function(){return this.ready&&!this.disabled&&(this.disabled=!0,An(this.cropper,j7)),this},destroy:function(){var e=this.element;return e[Er]?(e[Er]=void 0,this.isImg&&this.replaced&&(e.src=this.originalUrl),this.uncreate(),this):this},move:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,i=n.left,s=n.top;return this.moveTo(XC(e)?e:i+Number(e),XC(t)?t:s+Number(t))},moveTo:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.canvasData,i=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.movable&&(kt(e)&&(n.left=e,i=!0),kt(t)&&(n.top=t,i=!0),i&&this.renderCanvas(!0)),this},zoom:function(e,t){var n=this.canvasData;return e=Number(e),e<0?e=1/(1-e):e=1+e,this.zoomTo(n.width*e/n.naturalWidth,null,t)},zoomTo:function(e,t,n){var i=this.options,s=this.canvasData,a=s.width,o=s.height,l=s.naturalWidth,c=s.naturalHeight;if(e=Number(e),e>=0&&this.ready&&!this.disabled&&i.zoomable){var u=l*e,d=c*e;if(Nf(this.element,_$,{ratio:e,oldRatio:a/l,originalEvent:n})===!1)return this;if(n){var h=this.pointers,f=MZ(this.cropper),m=h&&Object.keys(h).length?dXe(h):{pageX:n.pageX,pageY:n.pageY};s.left-=(u-a)*((m.pageX-f.left-s.left)/a),s.top-=(d-o)*((m.pageY-f.top-s.top)/o)}else bf(t)&&kt(t.x)&&kt(t.y)?(s.left-=(u-a)*((t.x-s.left)/a),s.top-=(d-o)*((t.y-s.top)/o)):(s.left-=(u-a)/2,s.top-=(d-o)/2);s.width=u,s.height=d,this.renderCanvas(!0)}return this},rotate:function(e){return this.rotateTo((this.imageData.rotate||0)+Number(e))},rotateTo:function(e){return e=Number(e),kt(e)&&this.ready&&!this.disabled&&this.options.rotatable&&(this.imageData.rotate=e%360,this.renderCanvas(!0,!0)),this},scaleX:function(e){var t=this.imageData.scaleY;return this.scale(e,kt(t)?t:1)},scaleY:function(e){var t=this.imageData.scaleX;return this.scale(kt(t)?t:1,e)},scale:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e,n=this.imageData,i=!1;return e=Number(e),t=Number(t),this.ready&&!this.disabled&&this.options.scalable&&(kt(e)&&(n.scaleX=e,i=!0),kt(t)&&(n.scaleY=t,i=!0),i&&this.renderCanvas(!0,!0)),this},getData:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,t=this.options,n=this.imageData,i=this.canvasData,s=this.cropBoxData,a;if(this.ready&&this.cropped){a={x:s.left-i.left,y:s.top-i.top,width:s.width,height:s.height};var o=n.width/n.naturalWidth;if(Zr(a,function(u,d){a[d]=u/o}),e){var l=Math.round(a.y+a.height),c=Math.round(a.x+a.width);a.x=Math.round(a.x),a.y=Math.round(a.y),a.width=c-a.x,a.height=l-a.y}}else a={x:0,y:0,width:0,height:0};return t.rotatable&&(a.rotate=n.rotate||0),t.scalable&&(a.scaleX=n.scaleX||1,a.scaleY=n.scaleY||1),a},setData:function(e){var t=this.options,n=this.imageData,i=this.canvasData,s={};if(this.ready&&!this.disabled&&bf(e)){var a=!1;t.rotatable&&kt(e.rotate)&&e.rotate!==n.rotate&&(n.rotate=e.rotate,a=!0),t.scalable&&(kt(e.scaleX)&&e.scaleX!==n.scaleX&&(n.scaleX=e.scaleX,a=!0),kt(e.scaleY)&&e.scaleY!==n.scaleY&&(n.scaleY=e.scaleY,a=!0)),a&&this.renderCanvas(!0,!0);var o=n.width/n.naturalWidth;kt(e.x)&&(s.left=e.x*o+i.left),kt(e.y)&&(s.top=e.y*o+i.top),kt(e.width)&&(s.width=e.width*o),kt(e.height)&&(s.height=e.height*o),this.setCropBoxData(s)}return this},getContainerData:function(){return this.ready?Sr({},this.containerData):{}},getImageData:function(){return this.sized?Sr({},this.imageData):{}},getCanvasData:function(){var e=this.canvasData,t={};return this.ready&&Zr(["left","top","width","height","naturalWidth","naturalHeight"],function(n){t[n]=e[n]}),t},setCanvasData:function(e){var t=this.canvasData,n=t.aspectRatio;return this.ready&&!this.disabled&&bf(e)&&(kt(e.left)&&(t.left=e.left),kt(e.top)&&(t.top=e.top),kt(e.width)?(t.width=e.width,t.height=e.width/n):kt(e.height)&&(t.height=e.height,t.width=e.height*n),this.renderCanvas(!0)),this},getCropBoxData:function(){var e=this.cropBoxData,t;return this.ready&&this.cropped&&(t={left:e.left,top:e.top,width:e.width,height:e.height}),t||{}},setCropBoxData:function(e){var t=this.cropBoxData,n=this.options.aspectRatio,i,s;return this.ready&&this.cropped&&!this.disabled&&bf(e)&&(kt(e.left)&&(t.left=e.left),kt(e.top)&&(t.top=e.top),kt(e.width)&&e.width!==t.width&&(i=!0,t.width=e.width),kt(e.height)&&e.height!==t.height&&(s=!0,t.height=e.height),n&&(i?t.height=t.width/n:s&&(t.width=t.height*n)),this.renderCropBox()),this},getCroppedCanvas:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement)return null;var t=this.canvasData,n=fXe(this.image,this.imageData,t,e);if(!this.cropped)return n;var i=this.getData(e.rounded),s=i.x,a=i.y,o=i.width,l=i.height,c=n.width/Math.floor(t.naturalWidth);c!==1&&(s*=c,a*=c,o*=c,l*=c);var u=o/l,d=xc({aspectRatio:u,width:e.maxWidth||1/0,height:e.maxHeight||1/0}),h=xc({aspectRatio:u,width:e.minWidth||0,height:e.minHeight||0},"cover"),f=xc({aspectRatio:u,width:e.width||(c!==1?n.width:o),height:e.height||(c!==1?n.height:l)}),m=f.width,g=f.height;m=Math.min(d.width,Math.max(h.width,m)),g=Math.min(d.height,Math.max(h.height,g));var y=document.createElement("canvas"),b=y.getContext("2d");y.width=Mf(m),y.height=Mf(g),b.fillStyle=e.fillColor||"transparent",b.fillRect(0,0,m,g);var E=e.imageSmoothingEnabled,w=E===void 0?!0:E,A=e.imageSmoothingQuality;b.imageSmoothingEnabled=w,A&&(b.imageSmoothingQuality=A);var S=n.width,_=n.height,C=s,k=a,D,I,L,M,F,U;C<=-o||C>S?(C=0,D=0,L=0,F=0):C<=0?(L=-C,C=0,D=Math.min(S,o+C),F=D):C<=S&&(L=0,D=Math.min(o,S-C),F=D),D<=0||k<=-l||k>_?(k=0,I=0,M=0,U=0):k<=0?(M=-k,k=0,I=Math.min(_,l+k),U=I):k<=_&&(M=0,I=Math.min(l,_-k),U=I);var W=[C,k,D,I];if(F>0&&U>0){var j=m/o;W.push(L*j,M*j,F*j,U*j)}return b.drawImage.apply(b,[n].concat(SZ(W.map(function(z){return Math.floor(Mf(z))})))),y},setAspectRatio:function(e){var t=this.options;return!this.disabled&&!XC(e)&&(t.aspectRatio=Math.max(0,e)||NaN,this.ready&&(this.initCropBox(),this.cropped&&this.renderCropBox())),this},setDragMode:function(e){var t=this.options,n=this.dragBox,i=this.face;if(this.ready&&!this.disabled){var s=e===AP,a=t.movable&&e===kZ;e=s||a?e:IZ,t.dragMode=e,B0(n,F0,e),Ef(n,E$,s),Ef(n,x$,a),t.cropBoxMovable||(B0(i,F0,e),Ef(i,E$,s),Ef(i,x$,a))}return this}},_Xe=yo.Cropper,CXe=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(FQe(this,r),!e||!JQe.test(e.tagName))throw new Error("The first argument is required and must be an <img> or <canvas> element.");this.element=e,this.options=Sr({},rB,bf(t)&&t),this.cropped=!1,this.disabled=!1,this.pointers={},this.ready=!1,this.reloading=!1,this.replaced=!1,this.sized=!1,this.sizing=!1,this.init()}return BQe(r,[{key:"init",value:function(){var t=this.element,n=t.tagName.toLowerCase(),i;if(!t[Er]){if(t[Er]=this,n==="img"){if(this.isImg=!0,i=t.getAttribute("src")||"",this.originalUrl=i,!i)return;i=t.src}else n==="canvas"&&window.HTMLCanvasElement&&(i=t.toDataURL());this.load(i)}}},{key:"load",value:function(t){var n=this;if(t){this.url=t,this.imageData={};var i=this.element,s=this.options;if(!s.rotatable&&!s.scalable&&(s.checkOrientation=!1),!s.checkOrientation||!window.ArrayBuffer){this.clone();return}if(XQe.test(t)){ZQe.test(t)?this.read(gXe(t)):this.clone();return}var a=new XMLHttpRequest,o=this.clone.bind(this);this.reloading=!0,this.xhr=a,a.onabort=o,a.onerror=o,a.ontimeout=o,a.onprogress=function(){a.getResponseHeader("content-type")!==tB&&a.abort()},a.onload=function(){n.read(a.response)},a.onloadend=function(){n.reloading=!1,n.xhr=null},s.checkCrossOrigin&&iB(t)&&i.crossOrigin&&(t=sB(t)),a.open("GET",t,!0),a.responseType="arraybuffer",a.withCredentials=i.crossOrigin==="use-credentials",a.send()}}},{key:"read",value:function(t){var n=this.options,i=this.imageData,s=yXe(t),a=0,o=1,l=1;if(s>1){this.url=vXe(t,tB);var c=bXe(s);a=c.rotate,o=c.scaleX,l=c.scaleY}n.rotatable&&(i.rotate=a),n.scalable&&(i.scaleX=o,i.scaleY=l),this.clone()}},{key:"clone",value:function(){var t=this.element,n=this.url,i=t.crossOrigin,s=n;this.options.checkCrossOrigin&&iB(n)&&(i||(i="anonymous"),s=sB(n)),this.crossOrigin=i,this.crossOriginUrl=s;var a=document.createElement("img");i&&(a.crossOrigin=i),a.src=s||n,a.alt=t.alt||"The image to crop",this.image=a,a.onload=this.start.bind(this),a.onerror=this.stop.bind(this),An(a,K7),t.parentNode.insertBefore(a,t.nextSibling)}},{key:"start",value:function(){var t=this,n=this.image;n.onload=null,n.onerror=null,this.sizing=!0;var i=yo.navigator&&/(?:iPad|iPhone|iPod).*?AppleWebKit/i.test(yo.navigator.userAgent),s=function(c,u){Sr(t.imageData,{naturalWidth:c,naturalHeight:u,aspectRatio:c/u}),t.initialImageData=Sr({},t.imageData),t.sizing=!1,t.sized=!0,t.build()};if(n.naturalWidth&&!i){s(n.naturalWidth,n.naturalHeight);return}var a=document.createElement("img"),o=document.body||document.documentElement;this.sizingImage=a,a.onload=function(){s(a.width,a.height),i||o.removeChild(a)},a.src=n.src,i||(a.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",o.appendChild(a))}},{key:"stop",value:function(){var t=this.image;t.onload=null,t.onerror=null,t.parentNode.removeChild(t),this.image=null}},{key:"build",value:function(){if(!(!this.sized||this.ready)){var t=this.element,n=this.options,i=this.image,s=t.parentNode,a=document.createElement("div");a.innerHTML=eXe;var o=a.querySelector(".".concat(Er,"-container")),l=o.querySelector(".".concat(Er,"-canvas")),c=o.querySelector(".".concat(Er,"-drag-box")),u=o.querySelector(".".concat(Er,"-crop-box")),d=u.querySelector(".".concat(Er,"-face"));this.container=s,this.cropper=o,this.canvas=l,this.dragBox=c,this.cropBox=u,this.viewBox=o.querySelector(".".concat(Er,"-view-box")),this.face=d,l.appendChild(i),An(t,Ri),s.insertBefore(o,t.nextSibling),co(i,K7),this.initPreview(),this.bind(),n.initialAspectRatio=Math.max(0,n.initialAspectRatio)||NaN,n.aspectRatio=Math.max(0,n.aspectRatio)||NaN,n.viewMode=Math.max(0,Math.min(3,Math.round(n.viewMode)))||0,An(u,Ri),n.guides||An(u.getElementsByClassName("".concat(Er,"-dashed")),Ri),n.center||An(u.getElementsByClassName("".concat(Er,"-center")),Ri),n.background&&An(o,"".concat(Er,"-bg")),n.highlight||An(d,jQe),n.cropBoxMovable&&(An(d,x$),B0(d,F0,SP)),n.cropBoxResizable||(An(u.getElementsByClassName("".concat(Er,"-line")),Ri),An(u.getElementsByClassName("".concat(Er,"-point")),Ri)),this.render(),this.ready=!0,this.setDragMode(n.dragMode),n.autoCrop&&this.crop(),this.setData(n.data),Ci(n.ready)&&xs(t,Z7,n.ready,{once:!0}),Nf(t,Z7)}}},{key:"unbuild",value:function(){if(this.ready){this.ready=!1,this.unbind(),this.resetPreview();var t=this.cropper.parentNode;t&&t.removeChild(this.cropper),co(this.element,Ri)}}},{key:"uncreate",value:function(){this.ready?(this.unbuild(),this.ready=!1,this.cropped=!1):this.sizing?(this.sizingImage.onload=null,this.sizing=!1,this.sized=!1):this.reloading?(this.xhr.onabort=null,this.xhr.abort()):this.image&&this.stop()}}],[{key:"noConflict",value:function(){return window.Cropper=_Xe,r}},{key:"setDefaults",value:function(t){Sr(rB,bf(t)&&t)}}]),r}();Sr(CXe.prototype,EXe,xXe,wXe,TXe,SXe,AXe);var RXe=Object.create,FZ=Object.defineProperty,kXe=Object.getOwnPropertyDescriptor,IXe=Object.getOwnPropertyNames,$Xe=Object.getPrototypeOf,DXe=Object.prototype.hasOwnProperty,BZ=function(r,e){return function(){return r&&(e=r(r=0)),e}},Ui=function(r,e){return function(){return e||r((e={exports:{}}).exports,e),e.exports}},LXe=function(r,e,t,n){if(e&&typeof e=="object"||typeof e=="function")for(var i=IXe(e),s=0,a=i.length,o;s<a;s++)o=i[s],!DXe.call(r,o)&&o!==t&&FZ(r,o,{get:(function(l){return e[l]}).bind(null,o),enumerable:!(n=kXe(e,o))||n.enumerable});return r},ls=function(r,e,t){return t=r!=null?RXe($Xe(r)):{},LXe(!r||!r.__esModule?FZ(t,"default",{value:r,enumerable:!0}):t,r)},va=Ui(function(r,e){var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t={},e.exports=t});function Zd(r,e){return e!=null&&typeof Symbol<"u"&&e[Symbol.hasInstance]?!!e[Symbol.hasInstance](r):Zd(r,e)}var Jd=BZ(function(){Jd()});function UZ(r){"@swc/helpers - typeof";return r&&typeof Symbol<"u"&&r.constructor===Symbol?"symbol":typeof r}var WZ=BZ(function(){}),HZ=Ui(function(r,e){var t=Array.prototype.slice;e.exports=n;function n(i,s){for(("length"in i)||(i=[i]),i=t.call(i);i.length;){var a=i.shift(),o=s(a);if(o)return o;a.childNodes&&a.childNodes.length&&(i=t.call(a.childNodes).concat(i))}}}),OXe=Ui(function(r,e){Jd(),e.exports=t;function t(n,i){if(!Zd(this,t))return new t(n,i);this.data=n,this.nodeValue=n,this.length=n.length,this.ownerDocument=i||null}t.prototype.nodeType=8,t.prototype.nodeName="#comment",t.prototype.toString=function(){return"[object Comment]"}}),PXe=Ui(function(r,e){Jd(),e.exports=t;function t(n,i){if(!Zd(this,t))return new t(n);this.data=n||"",this.length=this.data.length,this.ownerDocument=i||null}t.prototype.type="DOMTextNode",t.prototype.nodeType=3,t.prototype.nodeName="#text",t.prototype.toString=function(){return this.data},t.prototype.replaceData=function(n,i,s){var a=this.data,o=a.substring(0,n),l=a.substring(n+i,a.length);this.data=o+s+l,this.length=this.data.length}}),VZ=Ui(function(r,e){e.exports=t;function t(n){var i=this,s=n.type;n.target||(n.target=i),i.listeners||(i.listeners={});var a=i.listeners[s];if(a)return a.forEach(function(o){n.currentTarget=i,typeof o=="function"?o(n):o.handleEvent(n)});i.parentNode&&i.parentNode.dispatchEvent(n)}}),GZ=Ui(function(r,e){e.exports=t;function t(n,i){var s=this;s.listeners||(s.listeners={}),s.listeners[n]||(s.listeners[n]=[]),s.listeners[n].indexOf(i)===-1&&s.listeners[n].push(i)}}),qZ=Ui(function(r,e){e.exports=t;function t(n,i){var s=this;if(s.listeners&&s.listeners[n]){var a=s.listeners[n],o=a.indexOf(i);o!==-1&&a.splice(o,1)}}}),MXe=Ui(function(r,e){WZ(),e.exports=n;var t=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"];function n(h){switch(h.nodeType){case 3:return u(h.data);case 8:return"<!--"+h.data+"-->";default:return i(h)}}function i(h){var f=[],m=h.tagName;return h.namespaceURI==="http://www.w3.org/1999/xhtml"&&(m=m.toLowerCase()),f.push("<"+m+c(h)+o(h)),t.indexOf(m)>-1?f.push(" />"):(f.push(">"),h.childNodes.length?f.push.apply(f,h.childNodes.map(n)):h.textContent||h.innerText?f.push(u(h.textContent||h.innerText)):h.innerHTML&&f.push(h.innerHTML),f.push("</"+m+">")),f.join("")}function s(h,f){var m=UZ(h[f]);return f==="style"&&Object.keys(h.style).length>0?!0:h.hasOwnProperty(f)&&(m==="string"||m==="boolean"||m==="number")&&f!=="nodeName"&&f!=="className"&&f!=="tagName"&&f!=="textContent"&&f!=="innerText"&&f!=="namespaceURI"&&f!=="innerHTML"}function a(h){if(typeof h=="string")return h;var f="";return Object.keys(h).forEach(function(m){var g=h[m];m=m.replace(/[A-Z]/g,function(y){return"-"+y.toLowerCase()}),f+=m+":"+g+";"}),f}function o(h){var f=h.dataset,m=[];for(var g in f)m.push({name:"data-"+g,value:f[g]});return m.length?l(m):""}function l(h){var f=[];return h.forEach(function(m){var g=m.name,y=m.value;g==="style"&&(y=a(y)),f.push(g+'="'+d(y)+'"')}),f.length?" "+f.join(" "):""}function c(h){var f=[];for(var m in h)s(h,m)&&f.push({name:m,value:h[m]});for(var g in h._attributes)for(var y in h._attributes[g]){var b=h._attributes[g][y],E=(b.prefix?b.prefix+":":"")+y;f.push({name:E,value:b.value})}return h.className&&f.push({name:"class",value:h.className}),f.length?l(f):""}function u(h){var f="";return typeof h=="string"?f=h:h&&(f=h.toString()),f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function d(h){return u(h).replace(/"/g,"&quot;")}}),jZ=Ui(function(r,e){Jd();var t=HZ(),n=VZ(),i=GZ(),s=qZ(),a=MXe(),o="http://www.w3.org/1999/xhtml";e.exports=l;function l(c,u,d){if(!Zd(this,l))return new l(c);var h=d===void 0?o:d||null;this.tagName=h===o?String(c).toUpperCase():c,this.nodeName=this.tagName,this.className="",this.dataset={},this.childNodes=[],this.parentNode=null,this.style={},this.ownerDocument=u||null,this.namespaceURI=h,this._attributes={},this.tagName==="INPUT"&&(this.type="text")}l.prototype.type="DOMElement",l.prototype.nodeType=1,l.prototype.appendChild=function(c){return c.parentNode&&c.parentNode.removeChild(c),this.childNodes.push(c),c.parentNode=this,c},l.prototype.replaceChild=function(c,u){c.parentNode&&c.parentNode.removeChild(c);var d=this.childNodes.indexOf(u);return u.parentNode=null,this.childNodes[d]=c,c.parentNode=this,u},l.prototype.removeChild=function(c){var u=this.childNodes.indexOf(c);return this.childNodes.splice(u,1),c.parentNode=null,c},l.prototype.insertBefore=function(c,u){c.parentNode&&c.parentNode.removeChild(c);var d=u==null?-1:this.childNodes.indexOf(u);return d>-1?this.childNodes.splice(d,0,c):this.childNodes.push(c),c.parentNode=this,c},l.prototype.setAttributeNS=function(c,u,d){var h=null,f=u,m=u.indexOf(":");if(m>-1&&(h=u.substr(0,m),f=u.substr(m+1)),this.tagName==="INPUT"&&u==="type")this.type=d;else{var g=this._attributes[c]||(this._attributes[c]={});g[f]={value:d,prefix:h}}},l.prototype.getAttributeNS=function(c,u){var d=this._attributes[c],h=d&&d[u]&&d[u].value;return this.tagName==="INPUT"&&u==="type"?this.type:typeof h!="string"?null:h},l.prototype.removeAttributeNS=function(c,u){var d=this._attributes[c];d&&delete d[u]},l.prototype.hasAttributeNS=function(c,u){var d=this._attributes[c];return!!d&&u in d},l.prototype.setAttribute=function(c,u){return this.setAttributeNS(null,c,u)},l.prototype.getAttribute=function(c){return this.getAttributeNS(null,c)},l.prototype.removeAttribute=function(c){return this.removeAttributeNS(null,c)},l.prototype.hasAttribute=function(c){return this.hasAttributeNS(null,c)},l.prototype.removeEventListener=s,l.prototype.addEventListener=i,l.prototype.dispatchEvent=n,l.prototype.focus=function(){},l.prototype.toString=function(){return a(this)},l.prototype.getElementsByClassName=function(c){var u=c.split(" "),d=[];return t(this,function(h){if(h.nodeType===1){var f=h.className||"",m=f.split(" ");u.every(function(g){return m.indexOf(g)!==-1})&&d.push(h)}}),d},l.prototype.getElementsByTagName=function(c){c=c.toLowerCase();var u=[];return t(this.childNodes,function(d){d.nodeType===1&&(c==="*"||d.tagName.toLowerCase()===c)&&u.push(d)}),u},l.prototype.contains=function(c){return t(this,function(u){return c===u})||!1}}),NXe=Ui(function(r,e){Jd();var t=jZ();e.exports=n;function n(i){if(!Zd(this,n))return new n;this.childNodes=[],this.parentNode=null,this.ownerDocument=i||null}n.prototype.type="DocumentFragment",n.prototype.nodeType=11,n.prototype.nodeName="#document-fragment",n.prototype.appendChild=t.prototype.appendChild,n.prototype.replaceChild=t.prototype.replaceChild,n.prototype.removeChild=t.prototype.removeChild,n.prototype.toString=function(){return this.childNodes.map(function(i){return String(i)}).join("")}}),FXe=Ui(function(r,e){e.exports=t;function t(n){}t.prototype.initEvent=function(n,i,s){this.type=n,this.bubbles=i,this.cancelable=s},t.prototype.preventDefault=function(){}}),BXe=Ui(function(r,e){Jd();var t=HZ(),n=OXe(),i=PXe(),s=jZ(),a=NXe(),o=FXe(),l=VZ(),c=GZ(),u=qZ();e.exports=d;function d(){if(!Zd(this,d))return new d;this.head=this.createElement("head"),this.body=this.createElement("body"),this.documentElement=this.createElement("html"),this.documentElement.appendChild(this.head),this.documentElement.appendChild(this.body),this.childNodes=[this.documentElement],this.nodeType=9}var h=d.prototype;h.createTextNode=function(f){return new i(f,this)},h.createElementNS=function(f,m){var g=f===null?null:String(f);return new s(m,this,g)},h.createElement=function(f){return new s(f,this)},h.createDocumentFragment=function(){return new a(this)},h.createEvent=function(f){return new o(f)},h.createComment=function(f){return new n(f,this)},h.getElementById=function(f){f=String(f);var m=t(this.childNodes,function(g){if(String(g.id)===f)return g});return m||null},h.getElementsByClassName=s.prototype.getElementsByClassName,h.getElementsByTagName=s.prototype.getElementsByTagName,h.contains=s.prototype.contains,h.removeEventListener=u,h.addEventListener=c,h.dispatchEvent=l}),UXe=Ui(function(r,e){var t=BXe();e.exports=new t}),KZ=Ui(function(r,e){var t=typeof global<"u"?global:typeof window<"u"?window:{},n=UXe(),i;typeof document<"u"?i=document:(i=t["__GLOBAL_DOCUMENT_CACHE@4"],i||(i=t["__GLOBAL_DOCUMENT_CACHE@4"]=n)),e.exports=i});function WXe(r){if(Array.isArray(r))return r}function HXe(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],i=!0,s=!1,a,o;try{for(t=t.call(r);!(i=(a=t.next()).done)&&(n.push(a.value),!(e&&n.length===e));i=!0);}catch(l){s=!0,o=l}finally{try{!i&&t.return!=null&&t.return()}finally{if(s)throw o}}return n}}function VXe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R$(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function zZ(r,e){if(r){if(typeof r=="string")return R$(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(t);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return R$(r,e)}}function wl(r,e){return WXe(r)||HXe(r,e)||zZ(r,e)||VXe()}var jg=ls(va()),aB=ls(va()),GXe=ls(va()),qXe={now:function(){var r=GXe.default.performance,e=r&&r.timing,t=e&&e.navigationStart,n=typeof t=="number"&&typeof r.now=="function"?t+r.now():Date.now();return Math.round(n)}},en=qXe,U0=function(){var r,e,t;if(typeof((r=aB.default.crypto)===null||r===void 0?void 0:r.getRandomValues)=="function"){t=new Uint8Array(32),aB.default.crypto.getRandomValues(t);for(var n=0;n<32;n++)t[n]=t[n]%16}else{t=[];for(var i=0;i<32;i++)t[i]=Math.random()*16|0}var s=0;e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(l){var c=l==="x"?t[s]:t[s]&3|8;return s++,c.toString(16)});var a=en.now(),o=a?.toString(16).substring(3);return o?e.substring(0,28)+o:e},YZ=function(){return("000000"+(Math.random()*Math.pow(36,6)<<0).toString(36)).slice(-6)},qs=function(r){if(r&&typeof r.nodeName<"u")return r.muxId||(r.muxId=YZ()),r.muxId;var e;try{e=document.querySelector(r)}catch{}return e&&!e.muxId&&(e.muxId=r),e?.muxId||r},hw=function(r){var e;r&&typeof r.nodeName<"u"?(e=r,r=qs(e)):e=document.querySelector(r);var t=e&&e.nodeName?e.nodeName.toLowerCase():"";return[e,r,t]};function jXe(r){if(Array.isArray(r))return R$(r)}function KXe(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}function zXe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function js(r){return jXe(r)||KXe(r)||zZ(r)||zXe()}var Xu={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4},YXe=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,t,n,i,s,a,o=[console,r],l=(t=console.trace).bind.apply(t,js(o)),c=(n=console.info).bind.apply(n,js(o)),u=(i=console.debug).bind.apply(i,js(o)),d=(s=console.warn).bind.apply(s,js(o)),h=(a=console.error).bind.apply(a,js(o)),f=e;return{trace:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(!(f>Xu.TRACE))return l.apply(void 0,js(g))},debug:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(!(f>Xu.DEBUG))return u.apply(void 0,js(g))},info:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(!(f>Xu.INFO))return c.apply(void 0,js(g))},warn:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(!(f>Xu.WARN))return d.apply(void 0,js(g))},error:function(){for(var m=arguments.length,g=new Array(m),y=0;y<m;y++)g[y]=arguments[y];if(!(f>Xu.ERROR))return h.apply(void 0,js(g))},get level(){return f},set level(m){m!==this.level&&(f=m??e)}}},tr=YXe("[mux]"),JC=ls(va());function k$(){var r=JC.default.doNotTrack||JC.default.navigator&&JC.default.navigator.doNotTrack;return r==="1"}function ut(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}Jd();function Pn(r,e){if(!Zd(r,e))throw new TypeError("Cannot call a class as a function")}function QXe(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Ro(r,e,t){return e&&QXe(r.prototype,e),r}function ke(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function vp(r){return vp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},vp(r)}function XXe(r,e){for(;!Object.prototype.hasOwnProperty.call(r,e)&&(r=vp(r),r!==null););return r}function H1(r,e,t){return typeof Reflect<"u"&&Reflect.get?H1=Reflect.get:H1=function(n,i,s){var a=XXe(n,i);if(a){var o=Object.getOwnPropertyDescriptor(a,i);return o.get?o.get.call(s||n):o.value}},H1(r,e,t||r)}function I$(r,e){return I$=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t},I$(r,e)}function ZXe(r,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(e&&e.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),e&&I$(r,e)}function JXe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}WZ();function eZe(r,e){return e&&(UZ(e)==="object"||typeof e=="function")?e:ut(r)}function tZe(r){var e=JXe();return function(){var t=vp(r),n;if(e){var i=vp(this).constructor;n=Reflect.construct(t,arguments,i)}else n=t.apply(this,arguments);return eZe(this,n)}}var Zs=function(r){return W0(r)[0]},W0=function(r){if(typeof r!="string"||r==="")return["localhost"];var e=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,t=r.match(e)||[],n=t[4],i;return n&&(i=(n.match(/[^\.]+\.[^\.]+$/)||[])[0]),[n,i]},eR=ls(va()),rZe={exists:function(){var r=eR.default.performance,e=r&&r.timing;return e!==void 0},domContentLoadedEventEnd:function(){var r=eR.default.performance,e=r&&r.timing;return e&&e.domContentLoadedEventEnd},navigationStart:function(){var r=eR.default.performance,e=r&&r.timing;return e&&e.navigationStart}},fw=rZe;function Xr(r,e,t){t=t===void 0?1:t,r[e]=r[e]||0,r[e]+=t}function pw(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable}))),n.forEach(function(i){ke(r,i,t[i])})}return r}function nZe(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);t.push.apply(t,n)}return t}function CP(r,e){return e=e??{},Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(e)):nZe(Object(e)).forEach(function(t){Object.defineProperty(r,t,Object.getOwnPropertyDescriptor(e,t))}),r}var iZe=["x-cdn","content-type"],QZ=["x-request-id","cf-ray","x-amz-cf-id","x-akamai-request-id"],sZe=iZe.concat(QZ);function RP(r){r=r||"";var e={},t=r.trim().split(/[\r\n]+/);return t.forEach(function(n){if(n){var i=n.split(": "),s=i.shift();s&&(sZe.indexOf(s.toLowerCase())>=0||s.toLowerCase().indexOf("x-litix-")===0)&&(e[s]=i.join(": "))}}),e}function mw(r){if(r){var e=QZ.find(function(t){return r[t]!==void 0});return e?r[e]:void 0}}var aZe=function(r){var e={};for(var t in r){var n=r[t],i=n["DATA-ID"].search("io.litix.data.");if(i!==-1){var s=n["DATA-ID"].replace("io.litix.data.","");e[s]=n.VALUE}}return e},XZ=aZe,Bb=function(r){if(!r)return{};var e=fw.navigationStart(),t=r.loading,n=t?t.start:r.trequest,i=t?t.first:r.tfirst,s=t?t.end:r.tload;return{bytesLoaded:r.total,requestStart:Math.round(e+n),responseStart:Math.round(e+i),responseEnd:Math.round(e+s)}},Om=function(r){if(!(!r||typeof r.getAllResponseHeaders!="function"))return RP(r.getAllResponseHeaders())},oZe=function(r,e,t){var n=arguments.length>4?arguments[4]:void 0,i=r.log,s=r.utils.secondsToMs,a=function(y){var b=parseInt(n.version),E;return b===1&&y.programDateTime!==null&&(E=y.programDateTime),b===0&&y.pdt!==null&&(E=y.pdt),E};if(!fw.exists()){i.warn("performance timing not supported. Not tracking HLS.js.");return}var o=function(y,b){return r.emit(e,y,b)},l=function(y,b){var E=b.levels,w=b.audioTracks,A=b.url,S=b.stats,_=b.networkDetails,C=b.sessionData,k={},D={};E.forEach(function(W,j){k[j]={width:W.width,height:W.height,bitrate:W.bitrate,attrs:W.attrs}}),w.forEach(function(W,j){D[j]={name:W.name,language:W.lang,bitrate:W.bitrate}});var I=Bb(S),L=I.bytesLoaded,M=I.requestStart,F=I.responseStart,U=I.responseEnd;o("requestcompleted",CP(pw({},XZ(C)),{request_event_type:y,request_bytes_loaded:L,request_start:M,request_response_start:F,request_response_end:U,request_type:"manifest",request_hostname:Zs(A),request_response_headers:Om(_),request_rendition_lists:{media:k,audio:D,video:{}}}))};t.on(n.Events.MANIFEST_LOADED,l);var c=function(y,b){var E=b.details,w=b.level,A=b.networkDetails,S=b.stats,_=Bb(S),C=_.bytesLoaded,k=_.requestStart,D=_.responseStart,I=_.responseEnd,L=E.fragments[E.fragments.length-1],M=a(L)+s(L.duration);o("requestcompleted",{request_event_type:y,request_bytes_loaded:C,request_start:k,request_response_start:D,request_response_end:I,request_current_level:w,request_type:"manifest",request_hostname:Zs(E.url),request_response_headers:Om(A),video_holdback:E.holdBack&&s(E.holdBack),video_part_holdback:E.partHoldBack&&s(E.partHoldBack),video_part_target_duration:E.partTarget&&s(E.partTarget),video_target_duration:E.targetduration&&s(E.targetduration),video_source_is_live:E.live,player_manifest_newest_program_time:isNaN(M)?void 0:M})};t.on(n.Events.LEVEL_LOADED,c);var u=function(y,b){var E=b.details,w=b.networkDetails,A=b.stats,S=Bb(A),_=S.bytesLoaded,C=S.requestStart,k=S.responseStart,D=S.responseEnd;o("requestcompleted",{request_event_type:y,request_bytes_loaded:_,request_start:C,request_response_start:k,request_response_end:D,request_type:"manifest",request_hostname:Zs(E.url),request_response_headers:Om(w)})};t.on(n.Events.AUDIO_TRACK_LOADED,u);var d=function(y,b){var E=b.stats,w=b.networkDetails,A=b.frag;E=E||A.stats;var S=Bb(E),_=S.bytesLoaded,C=S.requestStart,k=S.responseStart,D=S.responseEnd,I=w?Om(w):void 0,L={request_event_type:y,request_bytes_loaded:_,request_start:C,request_response_start:k,request_response_end:D,request_hostname:w?Zs(w.responseURL):void 0,request_id:I?mw(I):void 0,request_response_headers:I,request_media_duration:A.duration,request_url:w?.responseURL};A.type==="main"?(L.request_type="media",L.request_current_level=A.level,L.request_video_width=(t.levels[A.level]||{}).width,L.request_video_height=(t.levels[A.level]||{}).height,L.request_labeled_bitrate=(t.levels[A.level]||{}).bitrate):L.request_type=A.type,o("requestcompleted",L)};t.on(n.Events.FRAG_LOADED,d);var h=function(y,b){var E=b.frag,w=E.start,A=a(E),S={currentFragmentPDT:A,currentFragmentStart:s(w)};o("fragmentchange",S)};t.on(n.Events.FRAG_CHANGED,h);var f=function(y,b){var E=b.type,w=b.details,A=b.response,S=b.fatal,_=b.frag,C=b.networkDetails,k=_?.url||b.url||"",D=C?Om(C):void 0;if((w===n.ErrorDetails.MANIFEST_LOAD_ERROR||w===n.ErrorDetails.MANIFEST_LOAD_TIMEOUT||w===n.ErrorDetails.FRAG_LOAD_ERROR||w===n.ErrorDetails.FRAG_LOAD_TIMEOUT||w===n.ErrorDetails.LEVEL_LOAD_ERROR||w===n.ErrorDetails.LEVEL_LOAD_TIMEOUT||w===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||w===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT||w===n.ErrorDetails.SUBTITLE_LOAD_ERROR||w===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT||w===n.ErrorDetails.KEY_LOAD_ERROR||w===n.ErrorDetails.KEY_LOAD_TIMEOUT)&&o("requestfailed",{request_error:w,request_url:k,request_hostname:Zs(k),request_id:D?mw(D):void 0,request_type:w===n.ErrorDetails.FRAG_LOAD_ERROR||w===n.ErrorDetails.FRAG_LOAD_TIMEOUT?"media":w===n.ErrorDetails.AUDIO_TRACK_LOAD_ERROR||w===n.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT?"audio":w===n.ErrorDetails.SUBTITLE_LOAD_ERROR||w===n.ErrorDetails.SUBTITLE_LOAD_TIMEOUT?"subtitle":w===n.ErrorDetails.KEY_LOAD_ERROR||w===n.ErrorDetails.KEY_LOAD_TIMEOUT?"encryption":"manifest",request_error_code:A?.code,request_error_text:A?.text}),S){var I,L="".concat(k?"url: ".concat(k,`
`):"")+"".concat(A&&(A.code||A.text)?"response: ".concat(A.code,", ").concat(A.text,`
`):"")+"".concat(b.reason?"failure reason: ".concat(b.reason,`
`):"")+"".concat(b.level?"level: ".concat(b.level,`
`):"")+"".concat(b.parent?"parent stream controller: ".concat(b.parent,`
`):"")+"".concat(b.buffer?"buffer length: ".concat(b.buffer,`
`):"")+"".concat(b.error?"error: ".concat(b.error,`
`):"")+"".concat(b.event?"event: ".concat(b.event,`
`):"")+"".concat(b.err?"error message: ".concat((I=b.err)===null||I===void 0?void 0:I.message,`
`):"");o("error",{player_error_code:E,player_error_message:w,player_error_context:L})}};t.on(n.Events.ERROR,f);var m=function(y,b){var E=b.frag,w=E&&E._url||"";o("requestcanceled",{request_event_type:y,request_url:w,request_type:"media",request_hostname:Zs(w)})};t.on(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m);var g=function(y,b){var E=b.level,w=t.levels[E];if(w&&w.attrs&&w.attrs.BANDWIDTH){var A=w.attrs.BANDWIDTH,S,_=parseFloat(w.attrs["FRAME-RATE"]);isNaN(_)||(S=_),A?o("renditionchange",{video_source_fps:S,video_source_bitrate:A,video_source_width:w.width,video_source_height:w.height,video_source_rendition_name:w.name,video_source_codec:w?.videoCodec}):i.warn("missing BANDWIDTH from HLS manifest parsed by HLS.js")}};t.on(n.Events.LEVEL_SWITCHED,g),t._stopMuxMonitor=function(){t.off(n.Events.MANIFEST_LOADED,l),t.off(n.Events.LEVEL_LOADED,c),t.off(n.Events.AUDIO_TRACK_LOADED,u),t.off(n.Events.FRAG_LOADED,d),t.off(n.Events.FRAG_CHANGED,h),t.off(n.Events.ERROR,f),t.off(n.Events.FRAG_LOAD_EMERGENCY_ABORTED,m),t.off(n.Events.LEVEL_SWITCHED,g),t.off(n.Events.DESTROYING,t._stopMuxMonitor),delete t._stopMuxMonitor},t.on(n.Events.DESTROYING,t._stopMuxMonitor)},lZe=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()},oB=function(r,e){if(!r||!r.requestEndDate)return{};var t=Zs(r.url),n=r.url,i=r.bytesLoaded,s=new Date(r.requestStartDate).getTime(),a=new Date(r.firstByteDate).getTime(),o=new Date(r.requestEndDate).getTime(),l=isNaN(r.duration)?0:r.duration,c=typeof e.getMetricsFor=="function"?e.getMetricsFor(r.mediaType).HttpList:e.getDashMetrics().getHttpRequests(r.mediaType),u;c.length>0&&(u=RP(c[c.length-1]._responseHeaders||""));var d=u?mw(u):void 0;return{requestStart:s,requestResponseStart:a,requestResponseEnd:o,requestBytesLoaded:i,requestResponseHeaders:u,requestMediaDuration:l,requestHostname:t,requestUrl:n,requestId:d}},cZe=function(r,e){var t=e.getQualityFor(r),n=e.getCurrentTrackFor(r).bitrateList;return n?{currentLevel:t,renditionWidth:n[t].width||null,renditionHeight:n[t].height||null,renditionBitrate:n[t].bandwidth}:{}},uZe=function(r){var e;return(e=r.match(/.*codecs\*?="(.*)"/))===null||e===void 0?void 0:e[1]},dZe=function(r){try{var e,t,n=(t=r.getVersion)===null||t===void 0||(e=t.call(r))===null||e===void 0?void 0:e.split(".").map(function(i){return parseInt(i)})[0];return n}catch{return!1}},hZe=function(r,e,t){var n=r.log;if(!t||!t.on){n.warn("Invalid dash.js player reference. Monitoring blocked.");return}var i=dZe(t),s=function(E,w){return r.emit(e,E,w)},a=function(E){var w=E.type,A=E.data,S=(A||{}).url;s("requestcompleted",{request_event_type:w,request_start:0,request_response_start:0,request_response_end:0,request_bytes_loaded:-1,request_type:"manifest",request_hostname:Zs(S),request_url:S})};t.on("manifestLoaded",a);var o={},l=function(E){if(typeof E.getRequests!="function")return null;var w=E.getRequests({state:"executed"});return w.length===0?null:w[w.length-1]},c=function(E){var w=E.type,A=E.fragmentModel,S=E.chunk,_=l(A);u({type:w,request:_,chunk:S})},u=function(E){var w=E.type,A=E.chunk,S=E.request,_=(A||{}).mediaInfo,C=_||{},k=C.type,D=C.bitrateList;D=D||[];var I={};D.forEach(function(Y,J){I[J]={},I[J].width=Y.width,I[J].height=Y.height,I[J].bitrate=Y.bandwidth,I[J].attrs={}}),k==="video"?o.video=I:k==="audio"?o.audio=I:o.media=I;var L=oB(S,t),M=L.requestStart,F=L.requestResponseStart,U=L.requestResponseEnd,W=L.requestResponseHeaders,j=L.requestMediaDuration,z=L.requestHostname,Q=L.requestUrl,V=L.requestId;s("requestcompleted",{request_event_type:w,request_start:M,request_response_start:F,request_response_end:U,request_bytes_loaded:-1,request_type:k+"_init",request_response_headers:W,request_hostname:z,request_id:V,request_url:Q,request_media_duration:j,request_rendition_lists:o})};i>=4?t.on("initFragmentLoaded",u):t.on("initFragmentLoaded",c);var d=function(E){var w=E.type,A=E.fragmentModel,S=E.chunk,_=l(A);h({type:w,request:_,chunk:S})},h=function(E){var w=E.type,A=E.chunk,S=E.request,_=A||{},C=_.mediaInfo,k=_.start,D=C||{},I=D.type,L=oB(S,t),M=L.requestStart,F=L.requestResponseStart,U=L.requestResponseEnd,W=L.requestBytesLoaded,j=L.requestResponseHeaders,z=L.requestMediaDuration,Q=L.requestHostname,V=L.requestUrl,Y=L.requestId,J=cZe(I,t),ue=J.currentLevel,ne=J.renditionWidth,ge=J.renditionHeight,ae=J.renditionBitrate;s("requestcompleted",{request_event_type:w,request_start:M,request_response_start:F,request_response_end:U,request_bytes_loaded:W,request_type:I,request_response_headers:j,request_hostname:Q,request_id:Y,request_url:V,request_media_start_time:k,request_media_duration:z,request_current_level:ue,request_labeled_bitrate:ae,request_video_width:ne,request_video_height:ge})};i>=4?t.on("mediaFragmentLoaded",h):t.on("mediaFragmentLoaded",d);var f={video:void 0,audio:void 0,totalBitrate:void 0},m=function(){if(f.video&&typeof f.video.bitrate=="number"){if(!(f.video.width&&f.video.height)){n.warn("have bitrate info for video but missing width/height");return}var E=f.video.bitrate;if(f.audio&&typeof f.audio.bitrate=="number"&&(E+=f.audio.bitrate),E!==f.totalBitrate)return f.totalBitrate=E,{video_source_bitrate:E,video_source_height:f.video.height,video_source_width:f.video.width,video_source_codec:uZe(f.video.codec)}}},g=function(E,w,A){if(typeof E.newQuality!="number"){n.warn("missing evt.newQuality in qualityChangeRendered event",E);return}var S=E.mediaType;if(S==="audio"||S==="video"){var _=t.getBitrateInfoListFor(S).find(function(k){var D=k.qualityIndex;return D===E.newQuality});if(!(_&&typeof _.bitrate=="number")){n.warn("missing bitrate info for ".concat(S));return}f[S]=CP(pw({},_),{codec:t.getCurrentTrackFor(S).codec});var C=m();C&&s("renditionchange",C)}};t.on("qualityChangeRendered",g);var y=function(E){var w=E.request,A=E.mediaType;w=w||{},s("requestcanceled",{request_event_type:w.type+"_"+w.action,request_url:w.url,request_type:A,request_hostname:Zs(w.url)})};t.on("fragmentLoadingAbandoned",y);var b=function(E){var w=E.error,A,S,_=(w==null||(A=w.data)===null||A===void 0?void 0:A.request)||{},C=(w==null||(S=w.data)===null||S===void 0?void 0:S.response)||{};w?.code===27&&s("requestfailed",{request_error:_.type+"_"+_.action,request_url:_.url,request_hostname:Zs(_.url),request_type:_.mediaType,request_error_code:C.status,request_error_text:C.statusText});var k="".concat(_!=null&&_.url?"url: ".concat(_.url,`
`):"")+"".concat(C!=null&&C.status||C!=null&&C.statusText?"response: ".concat(C?.status,", ").concat(C?.statusText,`
`):"");s("error",{player_error_code:w?.code,player_error_message:w?.message,player_error_context:k})};t.on("error",b),t._stopMuxMonitor=function(){t.off("manifestLoaded",a),t.off("initFragmentLoaded",u),t.off("mediaFragmentLoaded",h),t.off("qualityChangeRendered",g),t.off("error",b),t.off("fragmentLoadingAbandoned",y),delete t._stopMuxMonitor}},fZe=function(r){r&&typeof r._stopMuxMonitor=="function"&&r._stopMuxMonitor()},lB=0,pZe=function(){function r(){Pn(this,r),ke(this,"_listeners",void 0)}return Ro(r,[{key:"on",value:function(e,t,n){return t._eventEmitterGuid=t._eventEmitterGuid||++lB,this._listeners=this._listeners||{},this._listeners[e]=this._listeners[e]||[],n&&(t=t.bind(n)),this._listeners[e].push(t),t}},{key:"off",value:function(e,t){var n=this._listeners&&this._listeners[e];n&&n.forEach(function(i,s){i._eventEmitterGuid===t._eventEmitterGuid&&n.splice(s,1)})}},{key:"one",value:function(e,t,n){var i=this;t._eventEmitterGuid=t._eventEmitterGuid||++lB;var s=function(){i.off(e,s),t.apply(n||this,arguments)};s._eventEmitterGuid=t._eventEmitterGuid,this.on(e,s)}},{key:"emit",value:function(e,t){var n=this;if(this._listeners){t=t||{};var i=this._listeners["before*"]||[],s=this._listeners[e]||[],a=this._listeners["after"+e]||[],o=function(l,c){l=l.slice(),l.forEach(function(u){u.call(n,{type:e},c)})};o(i,t),o(s,t),o(a,t)}}}]),r}(),mZe=pZe,tR=ls(va()),gZe=function(){function r(e){var t=this;Pn(this,r),ke(this,"_playbackHeartbeatInterval",void 0),ke(this,"_playheadShouldBeProgressing",void 0),ke(this,"pm",void 0),this.pm=e,this._playbackHeartbeatInterval=null,this._playheadShouldBeProgressing=!1,e.on("playing",function(){t._playheadShouldBeProgressing=!0}),e.on("play",this._startPlaybackHeartbeatInterval.bind(this)),e.on("playing",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adbreakstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplay",this._startPlaybackHeartbeatInterval.bind(this)),e.on("adplaying",this._startPlaybackHeartbeatInterval.bind(this)),e.on("devicewake",this._startPlaybackHeartbeatInterval.bind(this)),e.on("viewstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("rebufferstart",this._startPlaybackHeartbeatInterval.bind(this)),e.on("pause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("ended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("viewend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("error",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("aderror",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adpause",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adended",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("adbreakend",this._stopPlaybackHeartbeatInterval.bind(this)),e.on("seeked",function(){e.data.player_is_paused?t._stopPlaybackHeartbeatInterval():t._startPlaybackHeartbeatInterval()}),e.on("timeupdate",function(){t._playbackHeartbeatInterval!==null&&e.emit("playbackheartbeat")}),e.on("devicesleep",function(n,i){t._playbackHeartbeatInterval!==null&&(tR.default.clearInterval(t._playbackHeartbeatInterval),e.emit("playbackheartbeatend",{viewer_time:i.viewer_time}),t._playbackHeartbeatInterval=null)})}return Ro(r,[{key:"_startPlaybackHeartbeatInterval",value:function(){var e=this;this._playbackHeartbeatInterval===null&&(this.pm.emit("playbackheartbeat"),this._playbackHeartbeatInterval=tR.default.setInterval(function(){e.pm.emit("playbackheartbeat")},this.pm.playbackHeartbeatTime))}},{key:"_stopPlaybackHeartbeatInterval",value:function(){this._playheadShouldBeProgressing=!1,this._playbackHeartbeatInterval!==null&&(tR.default.clearInterval(this._playbackHeartbeatInterval),this.pm.emit("playbackheartbeatend"),this._playbackHeartbeatInterval=null)}}]),r}(),vZe=gZe,yZe=function r(e){var t=this;Pn(this,r),ke(this,"viewErrored",void 0),e.on("viewinit",function(){t.viewErrored=!1}),e.on("error",function(n,i){try{var s=e.errorTranslator({player_error_code:i.player_error_code,player_error_message:i.player_error_message,player_error_context:i.player_error_context,player_error_severity:i.player_error_severity,player_error_business_exception:i.player_error_business_exception});s&&(e.data.player_error_code=s.player_error_code||i.player_error_code,e.data.player_error_message=s.player_error_message||i.player_error_message,e.data.player_error_context=s.player_error_context||i.player_error_context,e.data.player_error_severity=s.player_error_severity||i.player_error_severity,e.data.player_error_business_exception=s.player_error_business_exception||i.player_error_business_exception,t.viewErrored=!0)}catch(a){e.mux.log.warn("Exception in error translator callback.",a),t.viewErrored=!0}}),e.on("aftererror",function(){var n,i,s,a,o;(n=e.data)===null||n===void 0||delete n.player_error_code,(i=e.data)===null||i===void 0||delete i.player_error_message,(s=e.data)===null||s===void 0||delete s.player_error_context,(a=e.data)===null||a===void 0||delete a.player_error_severity,(o=e.data)===null||o===void 0||delete o.player_error_business_exception})},bZe=yZe,EZe=function(){function r(e){Pn(this,r),ke(this,"_watchTimeTrackerLastCheckedTime",void 0),ke(this,"pm",void 0),this.pm=e,this._watchTimeTrackerLastCheckedTime=null,e.on("playbackheartbeat",this._updateWatchTime.bind(this)),e.on("playbackheartbeatend",this._clearWatchTimeState.bind(this))}return Ro(r,[{key:"_updateWatchTime",value:function(e,t){var n=t.viewer_time;this._watchTimeTrackerLastCheckedTime===null&&(this._watchTimeTrackerLastCheckedTime=n),Xr(this.pm.data,"view_watch_time",n-this._watchTimeTrackerLastCheckedTime),this._watchTimeTrackerLastCheckedTime=n}},{key:"_clearWatchTimeState",value:function(e,t){this._updateWatchTime(e,t),this._watchTimeTrackerLastCheckedTime=null}}]),r}(),xZe=EZe,wZe=function(){function r(e){var t=this;Pn(this,r),ke(this,"_playbackTimeTrackerLastPlayheadPosition",void 0),ke(this,"_lastTime",void 0),ke(this,"_isAdPlaying",void 0),ke(this,"_callbackUpdatePlaybackTime",void 0),ke(this,"pm",void 0),this.pm=e,this._playbackTimeTrackerLastPlayheadPosition=-1,this._lastTime=en.now(),this._isAdPlaying=!1,this._callbackUpdatePlaybackTime=null;var n=this._startPlaybackTimeTracking.bind(this);e.on("playing",n),e.on("adplaying",n),e.on("seeked",n);var i=this._stopPlaybackTimeTracking.bind(this);e.on("playbackheartbeatend",i),e.on("seeking",i),e.on("adplaying",function(){t._isAdPlaying=!0}),e.on("adended",function(){t._isAdPlaying=!1}),e.on("adpause",function(){t._isAdPlaying=!1}),e.on("adbreakstart",function(){t._isAdPlaying=!1}),e.on("adbreakend",function(){t._isAdPlaying=!1}),e.on("adplay",function(){t._isAdPlaying=!1}),e.on("viewinit",function(){t._playbackTimeTrackerLastPlayheadPosition=-1,t._lastTime=en.now(),t._isAdPlaying=!1,t._callbackUpdatePlaybackTime=null})}return Ro(r,[{key:"_startPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime===null&&(this._callbackUpdatePlaybackTime=this._updatePlaybackTime.bind(this),this._playbackTimeTrackerLastPlayheadPosition=this.pm.data.player_playhead_time,this.pm.on("playbackheartbeat",this._callbackUpdatePlaybackTime))}},{key:"_stopPlaybackTimeTracking",value:function(){this._callbackUpdatePlaybackTime&&(this._updatePlaybackTime(),this.pm.off("playbackheartbeat",this._callbackUpdatePlaybackTime),this._callbackUpdatePlaybackTime=null,this._playbackTimeTrackerLastPlayheadPosition=-1)}},{key:"_updatePlaybackTime",value:function(){var e=this.pm.data.player_playhead_time,t=en.now(),n=-1;this._playbackTimeTrackerLastPlayheadPosition>=0&&e>this._playbackTimeTrackerLastPlayheadPosition?n=e-this._playbackTimeTrackerLastPlayheadPosition:this._isAdPlaying&&(n=t-this._lastTime),n>0&&n<=1e3&&Xr(this.pm.data,"view_content_playback_time",n),this._playbackTimeTrackerLastPlayheadPosition=e,this._lastTime=t}}]),r}(),TZe=wZe,SZe=function(){function r(e){Pn(this,r),ke(this,"pm",void 0),this.pm=e;var t=this._updatePlayheadTime.bind(this);e.on("playbackheartbeat",t),e.on("playbackheartbeatend",t),e.on("timeupdate",t),e.on("destroy",function(){e.off("timeupdate",t)})}return Ro(r,[{key:"_updateMaxPlayheadPosition",value:function(){this.pm.data.view_max_playhead_position=typeof this.pm.data.view_max_playhead_position>"u"?this.pm.data.player_playhead_time:Math.max(this.pm.data.view_max_playhead_position,this.pm.data.player_playhead_time)}},{key:"_updatePlayheadTime",value:function(e,t){var n=this,i=function(){n.pm.currentFragmentPDT&&n.pm.currentFragmentStart&&(n.pm.data.player_program_time=n.pm.currentFragmentPDT+n.pm.data.player_playhead_time-n.pm.currentFragmentStart)};if(t&&t.player_playhead_time)this.pm.data.player_playhead_time=t.player_playhead_time,i(),this._updateMaxPlayheadPosition();else if(this.pm.getPlayheadTime){var s=this.pm.getPlayheadTime();typeof s<"u"&&(this.pm.data.player_playhead_time=s,i(),this._updateMaxPlayheadPosition())}}}]),r}(),AZe=SZe,cB=5*60*1e3,_Ze=function r(e){if(Pn(this,r),!e.disableRebufferTracking){var t,n=function(s,a){i(a),t=void 0},i=function(s){if(t){var a=s.viewer_time-t;Xr(e.data,"view_rebuffer_duration",a),t=s.viewer_time,e.data.view_rebuffer_duration>cB&&(e.emit("viewend"),e.send("viewend"),e.mux.log.warn("Ending view after rebuffering for longer than ".concat(cB,"ms, future events will be ignored unless a programchange or videochange occurs.")))}e.data.view_watch_time>=0&&e.data.view_rebuffer_count>0&&(e.data.view_rebuffer_frequency=e.data.view_rebuffer_count/e.data.view_watch_time,e.data.view_rebuffer_percentage=e.data.view_rebuffer_duration/e.data.view_watch_time)};e.on("playbackheartbeat",function(s,a){return i(a)}),e.on("rebufferstart",function(s,a){t||(Xr(e.data,"view_rebuffer_count",1),t=a.viewer_time,e.one("rebufferend",n))}),e.on("viewinit",function(){t=void 0,e.off("rebufferend",n)})}},CZe=_Ze,RZe=function(){function r(e){var t=this;Pn(this,r),ke(this,"_lastCheckedTime",void 0),ke(this,"_lastPlayheadTime",void 0),ke(this,"_lastPlayheadTimeUpdatedTime",void 0),ke(this,"_rebuffering",void 0),ke(this,"pm",void 0),this.pm=e,!(e.disableRebufferTracking||e.disablePlayheadRebufferTracking)&&(this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null,e.on("playbackheartbeat",this._checkIfRebuffering.bind(this)),e.on("playbackheartbeatend",this._cleanupRebufferTracker.bind(this)),e.on("seeking",function(){t._cleanupRebufferTracker(null,{viewer_time:en.now()})}))}return Ro(r,[{key:"_checkIfRebuffering",value:function(e,t){if(this.pm.seekingTracker.isSeeking||this.pm.adTracker.isAdBreak||!this.pm.playbackHeartbeat._playheadShouldBeProgressing){this._cleanupRebufferTracker(e,t);return}if(this._lastCheckedTime===null){this._prepareRebufferTrackerState(t.viewer_time);return}if(this._lastPlayheadTime!==this.pm.data.player_playhead_time){this._cleanupRebufferTracker(e,t,!0);return}var n=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.sustainedRebufferThreshold=="number"&&n>=this.pm.sustainedRebufferThreshold&&(this._rebuffering||(this._rebuffering=!0,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}))),this._lastCheckedTime=t.viewer_time}},{key:"_clearRebufferTrackerState",value:function(){this._lastCheckedTime=null,this._lastPlayheadTime=null,this._lastPlayheadTimeUpdatedTime=null}},{key:"_prepareRebufferTrackerState",value:function(e){this._lastCheckedTime=e,this._lastPlayheadTime=this.pm.data.player_playhead_time,this._lastPlayheadTimeUpdatedTime=e}},{key:"_cleanupRebufferTracker",value:function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(this._rebuffering)this._rebuffering=!1,this.pm.emit("rebufferend",{viewer_time:t.viewer_time});else{if(this._lastCheckedTime===null)return;var i=this.pm.data.player_playhead_time-this._lastPlayheadTime,s=t.viewer_time-this._lastPlayheadTimeUpdatedTime;typeof this.pm.minimumRebufferDuration=="number"&&i>0&&s-i>this.pm.minimumRebufferDuration&&(this._lastCheckedTime=null,this.pm.emit("rebufferstart",{viewer_time:this._lastPlayheadTimeUpdatedTime}),this.pm.emit("rebufferend",{viewer_time:this._lastPlayheadTimeUpdatedTime+s-i}))}n?this._prepareRebufferTrackerState(t.viewer_time):this._clearRebufferTrackerState()}}]),r}(),kZe=RZe,IZe=function(){function r(e){var t=this;Pn(this,r),ke(this,"NAVIGATION_START",void 0),ke(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){var n=e.data,i=n.view_id;if(!n.view_program_changed){var s=function(a,o){var l=o.viewer_time;(a.type==="playing"&&typeof e.data.view_time_to_first_frame>"u"||a.type==="adplaying"&&(typeof e.data.view_time_to_first_frame>"u"||t._inPrerollPosition()))&&t.calculateTimeToFirstFrame(l||en.now(),i)};e.one("playing",s),e.one("adplaying",s),e.one("viewend",function(){e.off("playing",s),e.off("adplaying",s)})}})}return Ro(r,[{key:"_inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"calculateTimeToFirstFrame",value:function(e,t){t===this.pm.data.view_id&&(this.pm.watchTimeTracker._updateWatchTime(null,{viewer_time:e}),this.pm.data.view_time_to_first_frame=this.pm.data.view_watch_time,(this.pm.data.player_autoplay_on||this.pm.data.video_is_autoplay)&&this.NAVIGATION_START&&(this.pm.data.view_aggregate_startup_time=this.pm.data.view_start+this.pm.data.view_watch_time-this.NAVIGATION_START))}}]),r}(),$Ze=IZe,DZe=function r(e){var t=this;Pn(this,r),ke(this,"_lastPlayerHeight",void 0),ke(this,"_lastPlayerWidth",void 0),ke(this,"_lastPlayheadPosition",void 0),ke(this,"_lastSourceHeight",void 0),ke(this,"_lastSourceWidth",void 0),e.on("viewinit",function(){t._lastPlayheadPosition=-1});var n=["pause","rebufferstart","seeking","error","adbreakstart","hb"],i=["playing","hb"];n.forEach(function(s){e.on(s,function(){if(t._lastPlayheadPosition>=0&&e.data.player_playhead_time>=0&&t._lastPlayerWidth>=0&&t._lastSourceWidth>0&&t._lastPlayerHeight>=0&&t._lastSourceHeight>0){var a=e.data.player_playhead_time-t._lastPlayheadPosition;if(a<0){t._lastPlayheadPosition=-1;return}var o=Math.min(t._lastPlayerWidth/t._lastSourceWidth,t._lastPlayerHeight/t._lastSourceHeight),l=Math.max(0,o-1),c=Math.max(0,1-o);e.data.view_max_upscale_percentage=Math.max(e.data.view_max_upscale_percentage||0,l),e.data.view_max_downscale_percentage=Math.max(e.data.view_max_downscale_percentage||0,c),Xr(e.data,"view_total_content_playback_time",a),Xr(e.data,"view_total_upscaling",l*a),Xr(e.data,"view_total_downscaling",c*a)}t._lastPlayheadPosition=-1})}),i.forEach(function(s){e.on(s,function(){t._lastPlayheadPosition=e.data.player_playhead_time,t._lastPlayerWidth=e.data.player_width,t._lastPlayerHeight=e.data.player_height,t._lastSourceWidth=e.data.video_source_width,t._lastSourceHeight=e.data.video_source_height})})},LZe=DZe,OZe=2e3,PZe=function r(e){var t=this;Pn(this,r),ke(this,"isSeeking",void 0),this.isSeeking=!1;var n=-1,i=function(){var s=en.now(),a=(e.data.viewer_time||s)-(n||s);Xr(e.data,"view_seek_duration",a),e.data.view_max_seek_time=Math.max(e.data.view_max_seek_time||0,a),t.isSeeking=!1,n=-1};e.on("seeking",function(s,a){if(Object.assign(e.data,a),t.isSeeking&&a.viewer_time-n<=OZe){n=a.viewer_time;return}t.isSeeking&&i(),t.isSeeking=!0,n=a.viewer_time,Xr(e.data,"view_seek_count",1),e.send("seeking")}),e.on("seeked",function(){i()}),e.on("viewend",function(){t.isSeeking&&(i(),e.send("seeked")),t.isSeeking=!1,n=-1})},MZe=PZe,uB=function(r,e){r.push(e),r.sort(function(t,n){return t.viewer_time-n.viewer_time})},NZe=["adbreakstart","adrequest","adresponse","adplay","adplaying","adpause","adended","adbreakend","aderror","adclicked","adskipped"],FZe=function(){function r(e){var t=this;Pn(this,r),ke(this,"_adHasPlayed",void 0),ke(this,"_adRequests",void 0),ke(this,"_adResponses",void 0),ke(this,"_currentAdRequestNumber",void 0),ke(this,"_currentAdResponseNumber",void 0),ke(this,"_prerollPlayTime",void 0),ke(this,"_wouldBeNewAdPlay",void 0),ke(this,"isAdBreak",void 0),ke(this,"pm",void 0),this.pm=e,e.on("viewinit",function(){t.isAdBreak=!1,t._currentAdRequestNumber=0,t._currentAdResponseNumber=0,t._adRequests=[],t._adResponses=[],t._adHasPlayed=!1,t._wouldBeNewAdPlay=!0,t._prerollPlayTime=void 0}),NZe.forEach(function(i){return e.on(i,t._updateAdData.bind(t))});var n=function(){t.isAdBreak=!1};e.on("adbreakstart",function(){t.isAdBreak=!0}),e.on("play",n),e.on("playing",n),e.on("viewend",n),e.on("adrequest",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdRequestNumber++},s),uB(t._adRequests,s),Xr(e.data,"view_ad_request_count"),t.inPrerollPosition()&&(e.data.view_preroll_requested=!0,t._adHasPlayed||Xr(e.data,"view_preroll_request_count"))}),e.on("adresponse",function(i,s){s=Object.assign({ad_request_id:"generatedAdRequestId"+t._currentAdResponseNumber++},s),uB(t._adResponses,s);var a=t.findAdRequest(s.ad_request_id);a&&Xr(e.data,"view_ad_request_time",Math.max(0,s.viewer_time-a.viewer_time))}),e.on("adplay",function(i,s){t._adHasPlayed=!0,t._wouldBeNewAdPlay&&(t._wouldBeNewAdPlay=!1,Xr(e.data,"view_ad_played_count")),t.inPrerollPosition()&&!e.data.view_preroll_played&&(e.data.view_preroll_played=!0,t._adRequests.length>0&&(e.data.view_preroll_request_time=Math.max(0,s.viewer_time-t._adRequests[0].viewer_time)),e.data.view_start&&(e.data.view_startup_preroll_request_time=Math.max(0,s.viewer_time-e.data.view_start)),t._prerollPlayTime=s.viewer_time)}),e.on("adplaying",function(i,s){t.inPrerollPosition()&&typeof e.data.view_preroll_load_time>"u"&&typeof t._prerollPlayTime<"u"&&(e.data.view_preroll_load_time=s.viewer_time-t._prerollPlayTime,e.data.view_startup_preroll_load_time=s.viewer_time-t._prerollPlayTime)}),e.on("adclicked",function(i,s){t._wouldBeNewAdPlay||Xr(e.data,"view_ad_clicked_count")}),e.on("adskipped",function(i,s){t._wouldBeNewAdPlay||Xr(e.data,"view_ad_skipped_count")}),e.on("adended",function(){t._wouldBeNewAdPlay=!0}),e.on("aderror",function(){t._wouldBeNewAdPlay=!0})}return Ro(r,[{key:"inPrerollPosition",value:function(){return typeof this.pm.data.view_content_playback_time>"u"||this.pm.data.view_content_playback_time<=1e3}},{key:"findAdRequest",value:function(e){for(var t=0;t<this._adRequests.length;t++)if(this._adRequests[t].ad_request_id===e)return this._adRequests[t]}},{key:"_updateAdData",value:function(e,t){if(this.inPrerollPosition()){if(!this.pm.data.view_preroll_ad_tag_hostname&&t.ad_tag_url){var n=wl(W0(t.ad_tag_url),2),i=n[0],s=n[1];this.pm.data.view_preroll_ad_tag_domain=s,this.pm.data.view_preroll_ad_tag_hostname=i}if(!this.pm.data.view_preroll_ad_asset_hostname&&t.ad_asset_url){var a=wl(W0(t.ad_asset_url),2),o=a[0],l=a[1];this.pm.data.view_preroll_ad_asset_domain=l,this.pm.data.view_preroll_ad_asset_hostname=o}}this.pm.data.ad_asset_url=t?.ad_asset_url,this.pm.data.ad_tag_url=t?.ad_tag_url,this.pm.data.ad_creative_id=t?.ad_creative_id,this.pm.data.ad_id=t?.ad_id,this.pm.data.ad_universal_id=t?.ad_universal_id}}]),r}(),BZe=FZe,dB=ls(va()),UZe=function r(e){Pn(this,r);var t,n,i=function(){e.disableRebufferTracking||(Xr(e.data,"view_waiting_rebuffer_count",1),t=en.now(),n=dB.default.setInterval(function(){if(t){var c=en.now();Xr(e.data,"view_waiting_rebuffer_duration",c-t),t=c}},250))},s=function(){e.disableRebufferTracking||t&&(Xr(e.data,"view_waiting_rebuffer_duration",en.now()-t),t=!1,dB.default.clearInterval(n))},a=!1,o=function(){a=!0},l=function(){a=!1,s()};e.on("waiting",function(){a&&i()}),e.on("playing",function(){s(),o()}),e.on("pause",l),e.on("seeking",l)},WZe=UZe,HZe=function r(e){var t=this;Pn(this,r),ke(this,"lastWallClockTime",void 0);var n=function(){t.lastWallClockTime=en.now(),e.on("before*",i)},i=function(s){var a=en.now(),o=t.lastWallClockTime;t.lastWallClockTime=a,a-o>3e4&&(e.emit("devicesleep",{viewer_time:o}),Object.assign(e.data,{viewer_time:o}),e.send("devicesleep"),e.emit("devicewake",{viewer_time:a}),Object.assign(e.data,{viewer_time:a}),e.send("devicewake"))};e.one("playbackheartbeat",n),e.on("playbackheartbeatend",function(){e.off("before*",i),e.one("playbackheartbeat",n)})},VZe=HZe,rR=ls(va()),ZZ=function(r){return r()}(function(){var r=function(){for(var t=0,n={};t<arguments.length;t++){var i=arguments[t];for(var s in i)n[s]=i[s]}return n};function e(t){function n(i,s,a){var o;if(typeof document<"u"){if(arguments.length>1){if(a=r({path:"/"},n.defaults,a),typeof a.expires=="number"){var l=new Date;l.setMilliseconds(l.getMilliseconds()+a.expires*864e5),a.expires=l}try{o=JSON.stringify(s),/^[\{\[]/.test(o)&&(s=o)}catch{}return t.write?s=t.write(s,i):s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),i=encodeURIComponent(String(i)),i=i.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),i=i.replace(/[\(\)]/g,escape),document.cookie=[i,"=",s,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}i||(o={});for(var c=document.cookie?document.cookie.split("; "):[],u=/(%[0-9A-Z]{2})+/g,d=0;d<c.length;d++){var h=c[d].split("="),f=h.slice(1).join("=");f.charAt(0)==='"'&&(f=f.slice(1,-1));try{var m=h[0].replace(u,decodeURIComponent);if(f=t.read?t.read(f,m):t(f,m)||f.replace(u,decodeURIComponent),this.json)try{f=JSON.parse(f)}catch{}if(i===m){o=f;break}i||(o[m]=f)}catch{}}return o}}return n.set=n,n.get=function(i){return n.call(n,i)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(i,s){n(i,"",r(s,{expires:-1}))},n.withConverter=e,n}return e(function(){})}),JZ="muxData",GZe=function(r){return Object.entries(r).map(function(e){var t=wl(e,2),n=t[0],i=t[1];return"".concat(n,"=").concat(i)}).join("&")},qZe=function(r){return r.split("&").reduce(function(e,t){var n=wl(t.split("="),2),i=n[0],s=n[1],a=+s,o=s&&a==s?a:s;return e[i]=o,e},{})},eJ=function(){var r;try{r=qZe(ZZ.get(JZ)||"")}catch{r={}}return r},tJ=function(r){try{ZZ.set(JZ,GZe(r),{expires:365})}catch{}},jZe=function(){var r=eJ();return r.mux_viewer_id=r.mux_viewer_id||U0(),r.msn=r.msn||Math.random(),tJ(r),{mux_viewer_id:r.mux_viewer_id,mux_sample_number:r.msn}},KZe=function(){var r=eJ(),e=en.now();return r.session_start&&(r.sst=r.session_start,delete r.session_start),r.session_id&&(r.sid=r.session_id,delete r.session_id),r.session_expires&&(r.sex=r.session_expires,delete r.session_expires),(!r.sex||r.sex<e)&&(r.sid=U0(),r.sst=e),r.sex=e+25*60*1e3,tJ(r),{session_id:r.sid,session_start:r.sst,session_expires:r.sex}};function zZe(r,e){var t=e.beaconCollectionDomain,n=e.beaconDomain;if(t)return"https://"+t;r=r||"inferred";var i=n||"litix.io";return r.match(/^[a-z0-9]+$/)?"https://"+r+"."+i:"https://img.litix.io/a.gif"}var YZe=ls(va()),rJ=function(){var r;switch(nJ()){case"cellular":r="cellular";break;case"ethernet":r="wired";break;case"wifi":r="wifi";break;case void 0:break;default:r="other"}return r},nJ=function(){var r=YZe.default.navigator,e=r&&(r.connection||r.mozConnection||r.webkitConnection);return e&&e.type};rJ.getConnectionFromAPI=nJ;var QZe=rJ,XZe={a:"env",b:"beacon",c:"custom",d:"ad",e:"event",f:"experiment",i:"internal",m:"mux",n:"response",p:"player",q:"request",r:"retry",s:"session",t:"timestamp",u:"viewer",v:"video",w:"page",x:"view",y:"sub"},ZZe=iJ(XZe),JZe={ad:"ad",af:"affiliate",ag:"aggregate",ap:"api",al:"application",ao:"audio",ar:"architecture",as:"asset",au:"autoplay",av:"average",bi:"bitrate",bn:"brand",br:"break",bw:"browser",by:"bytes",bz:"business",ca:"cached",cb:"cancel",cc:"codec",cd:"code",cg:"category",ch:"changed",ci:"client",ck:"clicked",cl:"canceled",cn:"config",co:"count",ce:"counter",cp:"complete",cq:"creator",cr:"creative",cs:"captions",ct:"content",cu:"current",cx:"connection",cz:"context",dg:"downscaling",dm:"domain",dn:"cdn",do:"downscale",dr:"drm",dp:"dropped",du:"duration",dv:"device",dy:"dynamic",eb:"enabled",ec:"encoding",ed:"edge",en:"end",eg:"engine",em:"embed",er:"error",ep:"experiments",es:"errorcode",et:"errortext",ee:"event",ev:"events",ex:"expires",ez:"exception",fa:"failed",fi:"first",fm:"family",ft:"format",fp:"fps",fq:"frequency",fr:"frame",fs:"fullscreen",ha:"has",hb:"holdback",he:"headers",ho:"host",hn:"hostname",ht:"height",id:"id",ii:"init",in:"instance",ip:"ip",is:"is",ke:"key",la:"language",lb:"labeled",le:"level",li:"live",ld:"loaded",lo:"load",ls:"lists",lt:"latency",ma:"max",md:"media",me:"message",mf:"manifest",mi:"mime",ml:"midroll",mm:"min",mn:"manufacturer",mo:"model",mx:"mux",ne:"newest",nm:"name",no:"number",on:"on",or:"origin",os:"os",pa:"paused",pb:"playback",pd:"producer",pe:"percentage",pf:"played",pg:"program",ph:"playhead",pi:"plugin",pl:"preroll",pn:"playing",po:"poster",pp:"pip",pr:"preload",ps:"position",pt:"part",py:"property",px:"pop",pz:"plan",ra:"rate",rd:"requested",re:"rebuffer",rf:"rendition",rg:"range",rm:"remote",ro:"ratio",rp:"response",rq:"request",rs:"requests",sa:"sample",sd:"skipped",se:"session",sh:"shift",sk:"seek",sm:"stream",so:"source",sq:"sequence",sr:"series",ss:"status",st:"start",su:"startup",sv:"server",sw:"software",sy:"severity",ta:"tag",tc:"tech",te:"text",tg:"target",th:"throughput",ti:"time",tl:"total",to:"to",tt:"title",ty:"type",ug:"upscaling",un:"universal",up:"upscale",ur:"url",us:"user",va:"variant",vd:"viewed",vi:"video",ve:"version",vw:"view",vr:"viewer",wd:"width",wa:"watch",wt:"waiting"},hB=iJ(JZe);function iJ(r){var e={};for(var t in r)r.hasOwnProperty(t)&&(e[r[t]]=t);return e}function $$(r){var e={},t={};return Object.keys(r).forEach(function(n){var i=!1;if(r.hasOwnProperty(n)&&r[n]!==void 0){var s=n.split("_"),a=s[0],o=ZZe[a];o||(tr.info("Data key word `"+s[0]+"` not expected in "+n),o=a+"_"),s.splice(1).forEach(function(l){l==="url"&&(i=!0),hB[l]?o+=hB[l]:Number.isInteger(Number(l))?o+=l:(tr.info("Data key word `"+l+"` not expected in "+n),o+="_"+l+"_")}),i?t[o]=r[n]:e[o]=r[n]}}),Object.assign(e,t)}var rd=ls(va()),eJe=ls(KZ()),tJe={maxBeaconSize:300,maxQueueLength:3600,baseTimeBetweenBeacons:1e4,maxPayloadKBSize:500},rJe=56*1024,nJe=["hb","requestcompleted","requestfailed","requestcanceled"],iJe="https://img.litix.io",Cl=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this._beaconUrl=r||iJe,this._eventQueue=[],this._postInFlight=!1,this._resendAfterPost=!1,this._failureCount=0,this._sendTimeout=!1,this._options=Object.assign({},tJe,e)};Cl.prototype.queueEvent=function(r,e){var t=Object.assign({},e);return this._eventQueue.length<=this._options.maxQueueLength||r==="eventrateexceeded"?(this._eventQueue.push(t),this._sendTimeout||this._startBeaconSending(),this._eventQueue.length<=this._options.maxQueueLength):!1};Cl.prototype.flushEvents=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(r&&this._eventQueue.length===1){this._eventQueue.pop();return}this._eventQueue.length&&this._sendBeaconQueue(),this._startBeaconSending()};Cl.prototype.destroy=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this.destroyed=!0,r?this._clearBeaconQueue():this.flushEvents(),rd.default.clearTimeout(this._sendTimeout)};Cl.prototype._clearBeaconQueue=function(){var r=this._eventQueue.length>this._options.maxBeaconSize?this._eventQueue.length-this._options.maxBeaconSize:0,e=this._eventQueue.slice(r);r>0&&Object.assign(e[e.length-1],$$({mux_view_message:"event queue truncated"}));var t=this._createPayload(e);sJ(this._beaconUrl,t,!0,function(){})};Cl.prototype._sendBeaconQueue=function(){var r=this;if(this._postInFlight){this._resendAfterPost=!0;return}var e=this._eventQueue.slice(0,this._options.maxBeaconSize);this._eventQueue=this._eventQueue.slice(this._options.maxBeaconSize),this._postInFlight=!0;var t=this._createPayload(e),n=en.now();sJ(this._beaconUrl,t,!1,function(i,s){s?(r._eventQueue=e.concat(r._eventQueue),r._failureCount+=1,tr.info("Error sending beacon: "+s)):r._failureCount=0,r._roundTripTime=en.now()-n,r._postInFlight=!1,r._resendAfterPost&&(r._resendAfterPost=!1,r._eventQueue.length>0&&r._sendBeaconQueue())})};Cl.prototype._getNextBeaconTime=function(){if(!this._failureCount)return this._options.baseTimeBetweenBeacons;var r=Math.pow(2,this._failureCount-1);return r=r*Math.random(),(1+r)*this._options.baseTimeBetweenBeacons};Cl.prototype._startBeaconSending=function(){var r=this;rd.default.clearTimeout(this._sendTimeout),!this.destroyed&&(this._sendTimeout=rd.default.setTimeout(function(){r._eventQueue.length&&r._sendBeaconQueue(),r._startBeaconSending()},this._getNextBeaconTime()))};Cl.prototype._createPayload=function(r){var e=this,t={transmission_timestamp:Math.round(en.now())};this._roundTripTime&&(t.rtt_ms=Math.round(this._roundTripTime));var n,i,s,a=function(){n=JSON.stringify({metadata:t,events:i||r}),s=n.length/1024},o=function(){return s<=e._options.maxPayloadKBSize};return a(),o()||(tr.info("Payload size is too big ("+s+" kb). Removing unnecessary events."),i=r.filter(function(l){return nJe.indexOf(l.e)===-1}),a()),o()||(tr.info("Payload size still too big ("+s+" kb). Cropping fields.."),i.forEach(function(l){for(var c in l){var u=l[c],d=50*1024;typeof u=="string"&&u.length>d&&(l[c]=u.substring(0,d))}}),a()),n};var sJe=typeof eJe.default.exitPictureInPicture=="function"?function(r){return r.length<=rJe}:function(r){return!1},sJ=function(r,e,t,n){if(t&&navigator&&navigator.sendBeacon&&navigator.sendBeacon(r,e)){n();return}if(rd.default.fetch){rd.default.fetch(r,{method:"POST",body:e,headers:{"Content-Type":"text/plain"},keepalive:sJe(e)}).then(function(s){return n(null,s.ok?null:"Error")}).catch(function(s){return n(null,s)});return}if(rd.default.XMLHttpRequest){var i=new rd.default.XMLHttpRequest;i.onreadystatechange=function(){if(i.readyState===4)return n(null,i.status!==200?"error":void 0)},i.open("POST",r),i.setRequestHeader("Content-Type","text/plain"),i.send(e);return}n()},aJe=Cl,oJe=["env_key","view_id","view_sequence_number","player_sequence_number","beacon_domain","player_playhead_time","viewer_time","mux_api_version","event","video_id","player_instance_id","player_error_code","player_error_message","player_error_context","player_error_severity","player_error_business_exception"],lJe=["adplay","adplaying","adpause","adfirstquartile","admidpoint","adthirdquartile","adended","adresponse","adrequest"],cJe=["ad_id","ad_creative_id","ad_universal_id"],uJe=["viewstart","error","ended","viewend"],dJe=10*60*1e3,hJe=function(){function r(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Pn(this,r);var i,s,a,o,l,c,u,d,h,f,m,g;ke(this,"mux",void 0),ke(this,"envKey",void 0),ke(this,"options",void 0),ke(this,"eventQueue",void 0),ke(this,"sampleRate",void 0),ke(this,"disableCookies",void 0),ke(this,"respectDoNotTrack",void 0),ke(this,"previousBeaconData",void 0),ke(this,"lastEventTime",void 0),ke(this,"rateLimited",void 0),ke(this,"pageLevelData",void 0),ke(this,"viewerData",void 0),this.mux=e,this.envKey=t,this.options=n,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.eventQueue=new aJe(zZe(this.envKey,this.options));var y;this.sampleRate=(y=this.options.sampleRate)!==null&&y!==void 0?y:1;var b;this.disableCookies=(b=this.options.disableCookies)!==null&&b!==void 0?b:!1;var E;this.respectDoNotTrack=(E=this.options.respectDoNotTrack)!==null&&E!==void 0?E:!1,this.previousBeaconData=null,this.lastEventTime=0,this.rateLimited=!1,this.pageLevelData={mux_api_version:this.mux.API_VERSION,mux_embed:this.mux.NAME,mux_embed_version:this.mux.VERSION,viewer_application_name:(i=this.options.platform)===null||i===void 0?void 0:i.name,viewer_application_version:(s=this.options.platform)===null||s===void 0?void 0:s.version,viewer_application_engine:(a=this.options.platform)===null||a===void 0?void 0:a.layout,viewer_device_name:(o=this.options.platform)===null||o===void 0?void 0:o.product,viewer_device_category:"",viewer_device_manufacturer:(l=this.options.platform)===null||l===void 0?void 0:l.manufacturer,viewer_os_family:(u=this.options.platform)===null||u===void 0||(c=u.os)===null||c===void 0?void 0:c.family,viewer_os_architecture:(h=this.options.platform)===null||h===void 0||(d=h.os)===null||d===void 0?void 0:d.architecture,viewer_os_version:(m=this.options.platform)===null||m===void 0||(f=m.os)===null||f===void 0?void 0:f.version,viewer_connection_type:QZe(),page_url:rR.default===null||rR.default===void 0||(g=rR.default.location)===null||g===void 0?void 0:g.href},this.viewerData=this.disableCookies?{}:jZe()}return Ro(r,[{key:"send",value:function(e,t){if(!(!e||!(t!=null&&t.view_id))){if(this.respectDoNotTrack&&k$())return tr.info("Not sending `"+e+"` because Do Not Track is enabled");if(!t||typeof t!="object")return tr.error("A data object was expected in send() but was not provided");var n=this.disableCookies?{}:KZe(),i=CP(pw({},this.pageLevelData,t,n,this.viewerData),{event:e,env_key:this.envKey});i.user_id&&(i.viewer_user_id=i.user_id,delete i.user_id);var s,a=((s=i.mux_sample_number)!==null&&s!==void 0?s:0)>=this.sampleRate,o=this._deduplicateBeaconData(e,i),l=$$(o);if(this.lastEventTime=this.mux.utils.now(),a)return tr.info("Not sending event due to sample rate restriction",e,i,l);if(this.envKey||tr.info("Missing environment key (envKey) - beacons will be dropped if the video source is not a valid mux video URL",e,i,l),!this.rateLimited){if(tr.info("Sending event",e,i,l),this.rateLimited=!this.eventQueue.queueEvent(e,l),this.mux.WINDOW_UNLOADING&&e==="viewend")this.eventQueue.destroy(!0);else if(this.mux.WINDOW_HIDDEN&&e==="hb"?this.eventQueue.flushEvents(!0):uJe.indexOf(e)>=0&&this.eventQueue.flushEvents(),this.rateLimited)return i.event="eventrateexceeded",l=$$(i),this.eventQueue.queueEvent(i.event,l),tr.error("Beaconing disabled due to rate limit.")}}}},{key:"destroy",value:function(){this.eventQueue.destroy(!1)}},{key:"_deduplicateBeaconData",value:function(e,t){var n=this,i={},s=t.view_id;if(s==="-1"||e==="viewstart"||e==="viewend"||!this.previousBeaconData||this.mux.utils.now()-this.lastEventTime>=dJe)i=pw({},t),s&&(this.previousBeaconData=i),s&&e==="viewend"&&(this.previousBeaconData=null);else{var a=e.indexOf("request")===0;Object.entries(t).forEach(function(o){var l=wl(o,2),c=l[0],u=l[1];n.previousBeaconData&&(u!==n.previousBeaconData[c]||oJe.indexOf(c)>-1||n.objectHasChanged(a,c,u,n.previousBeaconData[c])||n.eventRequiresKey(e,c))&&(i[c]=u,n.previousBeaconData[c]=u)})}return i}},{key:"objectHasChanged",value:function(e,t,n,i){return!e||t.indexOf("request_")!==0?!1:t==="request_response_headers"||typeof n!="object"||typeof i!="object"?!0:Object.keys(n||{}).length!==Object.keys(i||{}).length}},{key:"eventRequiresKey",value:function(e,t){return!!(e==="renditionchange"&&t.indexOf("video_source_")===0||cJe.includes(t)&&lJe.includes(e))}}]),r}(),fJe=function r(e){Pn(this,r);var t=0,n=0,i=0,s=0,a=0,o=0,l=0,c=function(h,f){var m=f.request_start,g=f.request_response_start,y=f.request_response_end,b=f.request_bytes_loaded;s++;var E,w;if(g?(E=g-(m??0),w=(y??0)-g):w=(y??0)-(m??0),w>0&&b&&b>0){var A=b/w*8e3;a++,n+=b,i+=w,e.data.view_min_request_throughput=Math.min(e.data.view_min_request_throughput||1/0,A),e.data.view_average_request_throughput=n/i*8e3,e.data.view_request_count=s,E>0&&(t+=E,e.data.view_max_request_latency=Math.max(e.data.view_max_request_latency||0,E),e.data.view_average_request_latency=t/a)}},u=function(h,f){s++,o++,e.data.view_request_count=s,e.data.view_request_failed_count=o},d=function(h,f){s++,l++,e.data.view_request_count=s,e.data.view_request_canceled_count=l};e.on("requestcompleted",c),e.on("requestfailed",u),e.on("requestcanceled",d)},pJe=fJe,mJe=60*60*1e3,gJe=function r(e){var t=this;Pn(this,r),ke(this,"_lastEventTime",void 0),e.on("before*",function(n,i){var s=i.viewer_time,a=en.now(),o=t._lastEventTime;if(t._lastEventTime=a,o&&a-o>mJe){var l=Object.keys(e.data).reduce(function(u,d){return d.indexOf("video_")===0?Object.assign(u,ke({},d,e.data[d])):u},{});e.mux.log.info("Received event after at least an hour inactivity, creating a new view");var c=e.playbackHeartbeat._playheadShouldBeProgressing;e._resetView(Object.assign({viewer_time:s},l)),e.playbackHeartbeat._playheadShouldBeProgressing=c,e.playbackHeartbeat._playheadShouldBeProgressing&&n.type!=="play"&&n.type!=="adbreakstart"&&(e.emit("play",{viewer_time:s}),n.type!=="playing"&&e.emit("playing",{viewer_time:s}))}})},vJe=gJe,yJe=["viewstart","ended","loadstart","pause","play","playing","ratechange","waiting","adplay","adpause","adended","aderror","adplaying","adrequest","adresponse","adbreakstart","adbreakend","adfirstquartile","admidpoint","adthirdquartile","rebufferstart","rebufferend","seeked","error","hb","requestcompleted","requestfailed","requestcanceled","renditionchange"],bJe=new Set(["requestcompleted","requestfailed","requestcanceled"]),EJe=function(r){ZXe(t,r);var e=tZe(t);function t(n,i,s){Pn(this,t);var a;a=e.call(this),ke(ut(a),"DOM_CONTENT_LOADED_EVENT_END",void 0),ke(ut(a),"NAVIGATION_START",void 0),ke(ut(a),"_destroyed",void 0),ke(ut(a),"_heartBeatTimeout",void 0),ke(ut(a),"adTracker",void 0),ke(ut(a),"dashjs",void 0),ke(ut(a),"data",void 0),ke(ut(a),"disablePlayheadRebufferTracking",void 0),ke(ut(a),"disableRebufferTracking",void 0),ke(ut(a),"errorTracker",void 0),ke(ut(a),"errorTranslator",void 0),ke(ut(a),"emitTranslator",void 0),ke(ut(a),"getAdData",void 0),ke(ut(a),"getPlayheadTime",void 0),ke(ut(a),"getStateData",void 0),ke(ut(a),"stateDataTranslator",void 0),ke(ut(a),"hlsjs",void 0),ke(ut(a),"id",void 0),ke(ut(a),"longResumeTracker",void 0),ke(ut(a),"minimumRebufferDuration",void 0),ke(ut(a),"mux",void 0),ke(ut(a),"playbackEventDispatcher",void 0),ke(ut(a),"playbackHeartbeat",void 0),ke(ut(a),"playbackHeartbeatTime",void 0),ke(ut(a),"playheadTime",void 0),ke(ut(a),"seekingTracker",void 0),ke(ut(a),"sustainedRebufferThreshold",void 0),ke(ut(a),"watchTimeTracker",void 0),ke(ut(a),"currentFragmentPDT",void 0),ke(ut(a),"currentFragmentStart",void 0),a.DOM_CONTENT_LOADED_EVENT_END=fw.domContentLoadedEventEnd(),a.NAVIGATION_START=fw.navigationStart();var o={debug:!1,minimumRebufferDuration:250,sustainedRebufferThreshold:1e3,playbackHeartbeatTime:25,beaconDomain:"litix.io",sampleRate:1,disableCookies:!1,respectDoNotTrack:!1,disableRebufferTracking:!1,disablePlayheadRebufferTracking:!1,errorTranslator:function(h){return h},emitTranslator:function(){for(var h=arguments.length,f=new Array(h),m=0;m<h;m++)f[m]=arguments[m];return f},stateDataTranslator:function(h){return h}};a.mux=n,a.id=i,s!=null&&s.beaconDomain&&a.mux.log.warn("The `beaconDomain` setting has been deprecated in favor of `beaconCollectionDomain`. Please change your integration to use `beaconCollectionDomain` instead of `beaconDomain`."),s=Object.assign(o,s),s.data=s.data||{},s.data.property_key&&(s.data.env_key=s.data.property_key,delete s.data.property_key),tr.level=s.debug?Xu.DEBUG:Xu.WARN,a.getPlayheadTime=s.getPlayheadTime,a.getStateData=s.getStateData||function(){return{}},a.getAdData=s.getAdData||function(){},a.minimumRebufferDuration=s.minimumRebufferDuration,a.sustainedRebufferThreshold=s.sustainedRebufferThreshold,a.playbackHeartbeatTime=s.playbackHeartbeatTime,a.disableRebufferTracking=s.disableRebufferTracking,a.disableRebufferTracking&&a.mux.log.warn("Disabling rebuffer tracking. This should only be used in specific circumstances as a last resort when your player is known to unreliably track rebuffering."),a.disablePlayheadRebufferTracking=s.disablePlayheadRebufferTracking,a.errorTranslator=s.errorTranslator,a.emitTranslator=s.emitTranslator,a.stateDataTranslator=s.stateDataTranslator,a.playbackEventDispatcher=new hJe(n,s.data.env_key,s),a.data={player_instance_id:U0(),mux_sample_rate:s.sampleRate,beacon_domain:s.beaconCollectionDomain||s.beaconDomain},a.data.view_sequence_number=1,a.data.player_sequence_number=1;var l=(function(){typeof this.data.view_start>"u"&&(this.data.view_start=this.mux.utils.now(),this.emit("viewstart"))}).bind(ut(a));if(a.on("viewinit",function(h,f){this._resetVideoData(),this._resetViewData(),this._resetErrorData(),this._updateStateData(),Object.assign(this.data,f),this._initializeViewData(),this.one("play",l),this.one("adbreakstart",l)}),a.on("videochange",function(h,f){this._resetView(f)}),a.on("programchange",function(h,f){this.data.player_is_paused&&this.mux.log.warn("The `programchange` event is intended to be used when the content changes mid playback without the video source changing, however the video is not currently playing. If the video source is changing please use the videochange event otherwise you will lose startup time information."),this._resetView(Object.assign(f,{view_program_changed:!0})),l(),this.emit("play"),this.emit("playing")}),a.on("fragmentchange",function(h,f){this.currentFragmentPDT=f.currentFragmentPDT,this.currentFragmentStart=f.currentFragmentStart}),a.on("destroy",a.destroy),typeof window<"u"&&typeof window.addEventListener=="function"&&typeof window.removeEventListener=="function"){var c=function(){var h=typeof a.data.view_start<"u";a.mux.WINDOW_HIDDEN=document.visibilityState==="hidden",h&&a.mux.WINDOW_HIDDEN&&(a.data.player_is_paused||a.emit("hb"))};window.addEventListener("visibilitychange",c,!1);var u=function(h){h.persisted||a.destroy()};window.addEventListener("pagehide",u,!1),a.on("destroy",function(){window.removeEventListener("visibilitychange",c),window.removeEventListener("pagehide",u)})}a.on("playerready",function(h,f){Object.assign(this.data,f)}),yJe.forEach(function(h){a.on(h,function(f,m){h.indexOf("ad")!==0&&this._updateStateData(),Object.assign(this.data,m),this._sanitizeData()}),a.on("after"+h,function(){(h!=="error"||this.errorTracker.viewErrored)&&this.send(h)})}),a.on("viewend",function(h,f){Object.assign(a.data,f)});var d=function(h){var f=this.mux.utils.now();this.data.player_init_time&&(this.data.player_startup_time=f-this.data.player_init_time),!this.mux.PLAYER_TRACKED&&this.NAVIGATION_START&&(this.mux.PLAYER_TRACKED=!0,(this.data.player_init_time||this.DOM_CONTENT_LOADED_EVENT_END)&&(this.data.page_load_time=Math.min(this.data.player_init_time||1/0,this.DOM_CONTENT_LOADED_EVENT_END||1/0)-this.NAVIGATION_START)),this.send("playerready"),delete this.data.player_startup_time,delete this.data.page_load_time};return a.one("playerready",d),a.longResumeTracker=new vJe(ut(a)),a.errorTracker=new bZe(ut(a)),new VZe(ut(a)),a.seekingTracker=new MZe(ut(a)),a.playheadTime=new AZe(ut(a)),a.playbackHeartbeat=new vZe(ut(a)),new LZe(ut(a)),a.watchTimeTracker=new xZe(ut(a)),new TZe(ut(a)),a.adTracker=new BZe(ut(a)),new kZe(ut(a)),new CZe(ut(a)),new $Ze(ut(a)),new WZe(ut(a)),new pJe(ut(a)),s.hlsjs&&a.addHLSJS(s),s.dashjs&&a.addDashJS(s),a.emit("viewinit",s.data),a}return Ro(t,[{key:"emit",value:function(n,i){var s,a=Object.assign({viewer_time:this.mux.utils.now()},i),o=[n,a];if(this.emitTranslator)try{o=this.emitTranslator(n,a)}catch(l){this.mux.log.warn("Exception in emit translator callback.",l)}o!=null&&o.length&&(s=H1(vp(t.prototype),"emit",this)).call.apply(s,[this].concat(js(o)))}},{key:"destroy",value:function(){this._destroyed||(this._destroyed=!0,typeof this.data.view_start<"u"&&(this.emit("viewend"),this.send("viewend")),this.playbackEventDispatcher.destroy(),this.removeHLSJS(),this.removeDashJS(),window.clearTimeout(this._heartBeatTimeout))}},{key:"send",value:function(n){if(this.data.view_id){var i=Object.assign({},this.data),s=["player_program_time","player_manifest_newest_program_time","player_live_edge_program_time","player_program_time","video_holdback","video_part_holdback","video_target_duration","video_part_target_duration"];if(i.video_source_is_live===void 0&&(i.player_source_duration===1/0||i.video_source_duration===1/0?i.video_source_is_live=!0:(i.player_source_duration>0||i.video_source_duration>0)&&(i.video_source_is_live=!1)),i.video_source_is_live||s.forEach(function(c){i[c]=void 0}),i.video_source_url=i.video_source_url||i.player_source_url,i.video_source_url){var a=wl(W0(i.video_source_url),2),o=a[0],l=a[1];i.video_source_domain=l,i.video_source_hostname=o}delete i.ad_request_id,this.playbackEventDispatcher.send(n,i),this.data.view_sequence_number++,this.data.player_sequence_number++,bJe.has(n)||this._restartHeartBeat(),n==="viewend"&&delete this.data.view_id}}},{key:"_resetView",value:function(n){this.emit("viewend"),this.send("viewend"),this.emit("viewinit",n)}},{key:"_updateStateData",value:function(){var n=this.getStateData();if(typeof this.stateDataTranslator=="function")try{n=this.stateDataTranslator(n)}catch(i){this.mux.log.warn("Exception in stateDataTranslator translator callback.",i)}Object.assign(this.data,n),this.playheadTime._updatePlayheadTime(),this._sanitizeData()}},{key:"_sanitizeData",value:function(){var n=this,i=["player_width","player_height","video_source_width","video_source_height","player_playhead_time","video_source_bitrate"];i.forEach(function(a){var o=parseInt(n.data[a],10);n.data[a]=isNaN(o)?void 0:o});var s=["player_source_url","video_source_url"];s.forEach(function(a){if(n.data[a]){var o=n.data[a].toLowerCase();(o.indexOf("data:")===0||o.indexOf("blob:")===0)&&(n.data[a]="MSE style URL")}})}},{key:"_resetVideoData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("video_")===0&&delete n.data[i]})}},{key:"_resetViewData",value:function(){var n=this;Object.keys(this.data).forEach(function(i){i.indexOf("view_")===0&&delete n.data[i]}),this.data.view_sequence_number=1}},{key:"_resetErrorData",value:function(){delete this.data.player_error_code,delete this.data.player_error_message,delete this.data.player_error_context,delete this.data.player_error_severity,delete this.data.player_error_business_exception}},{key:"_initializeViewData",value:function(){var n=this,i=this.data.view_id=U0(),s=function(){i===n.data.view_id&&Xr(n.data,"player_view_count",1)};this.data.player_is_paused?this.one("play",s):s()}},{key:"_restartHeartBeat",value:function(){var n=this;window.clearTimeout(this._heartBeatTimeout),this._heartBeatTimeout=window.setTimeout(function(){n.data.player_is_paused||n.emit("hb")},1e4)}},{key:"addHLSJS",value:function(n){if(!n.hlsjs){this.mux.log.warn("You must pass a valid hlsjs instance in order to track it.");return}if(this.hlsjs){this.mux.log.warn("An instance of HLS.js is already being monitored for this player.");return}this.hlsjs=n.hlsjs,oZe(this.mux,this.id,n.hlsjs,{},n.Hls||window.Hls)}},{key:"removeHLSJS",value:function(){this.hlsjs&&(lZe(this.hlsjs),this.hlsjs=void 0)}},{key:"addDashJS",value:function(n){if(!n.dashjs){this.mux.log.warn("You must pass a valid dashjs instance in order to track it.");return}if(this.dashjs){this.mux.log.warn("An instance of Dash.js is already being monitored for this player.");return}this.dashjs=n.dashjs,hZe(this.mux,this.id,n.dashjs)}},{key:"removeDashJS",value:function(){this.dashjs&&(fZe(this.dashjs),this.dashjs=void 0)}}]),t}(mZe),xJe=EJe,Pm=ls(KZ());function wJe(){return Pm.default&&!!(Pm.default.fullscreenElement||Pm.default.webkitFullscreenElement||Pm.default.mozFullScreenElement||Pm.default.msFullscreenElement)}var TJe=["loadstart","pause","play","playing","seeking","seeked","timeupdate","ratechange","stalled","waiting","error","ended"],SJe={1:"MEDIA_ERR_ABORTED",2:"MEDIA_ERR_NETWORK",3:"MEDIA_ERR_DECODE",4:"MEDIA_ERR_SRC_NOT_SUPPORTED"};function AJe(r,e,t){var n=wl(hw(e),3),i=n[0],s=n[1],a=n[2],o=r.log,l=r.utils.getComputedStyle,c=r.utils.secondsToMs,u={automaticErrorTracking:!0};if(i){if(a!=="video"&&a!=="audio")return o.error("The element of `"+s+"` was not a media element.")}else return o.error("No element was found with the `"+s+"` query selector.");i.mux&&(i.mux.destroy(),delete i.mux,o.warn("Already monitoring this video element, replacing existing event listeners"));var d={getPlayheadTime:function(){return c(i.currentTime)},getStateData:function(){var f,m,g,y=((f=(m=this).getPlayheadTime)===null||f===void 0?void 0:f.call(m))||c(i.currentTime),b=this.hlsjs&&this.hlsjs.url,E=this.dashjs&&typeof this.dashjs.getSource=="function"&&this.dashjs.getSource(),w={player_is_paused:i.paused,player_width:parseInt(l(i,"width")),player_height:parseInt(l(i,"height")),player_autoplay_on:i.autoplay,player_preload_on:i.preload,player_language_code:i.lang,player_is_fullscreen:wJe(),video_poster_url:i.poster,video_source_url:b||E||i.currentSrc,video_source_duration:c(i.duration),video_source_height:i.videoHeight,video_source_width:i.videoWidth,view_dropped_frame_count:i==null||(g=i.getVideoPlaybackQuality)===null||g===void 0?void 0:g.call(i).droppedVideoFrames};if(i.getStartDate&&y>0){var A=i.getStartDate();if(A&&typeof A.getTime=="function"&&A.getTime()){var S=A.getTime();if(w.player_program_time=S+y,i.seekable.length>0){var _=S+i.seekable.end(i.seekable.length-1);w.player_live_edge_program_time=_}}}return w}};t=Object.assign(u,t,d),t.data=Object.assign({player_software:"HTML5 Video Element",player_mux_plugin_name:"VideoElementMonitor",player_mux_plugin_version:r.VERSION},t.data),i.mux=i.mux||{},i.mux.deleted=!1,i.mux.emit=function(f,m){r.emit(s,f,m)},i.mux.updateData=function(f){i.mux.emit("hb",f)};var h=function(){o.error("The monitor for this video element has already been destroyed.")};i.mux.destroy=function(){Object.keys(i.mux.listeners).forEach(function(f){i.removeEventListener(f,i.mux.listeners[f],!1)}),delete i.mux.listeners,i.mux.destroy=h,i.mux.swapElement=h,i.mux.emit=h,i.mux.addHLSJS=h,i.mux.addDashJS=h,i.mux.removeHLSJS=h,i.mux.removeDashJS=h,i.mux.updateData=h,i.mux.setEmitTranslator=h,i.mux.setStateDataTranslator=h,i.mux.setGetPlayheadTime=h,i.mux.deleted=!0,r.emit(s,"destroy")},i.mux.swapElement=function(f){var m=wl(hw(f),3),g=m[0],y=m[1],b=m[2];if(g){if(b!=="video"&&b!=="audio")return r.log.error("The element of `"+y+"` was not a media element.")}else return r.log.error("No element was found with the `"+y+"` query selector.");g.muxId=i.muxId,delete i.muxId,g.mux=g.mux||{},g.mux.listeners=Object.assign({},i.mux.listeners),delete i.mux.listeners,Object.keys(g.mux.listeners).forEach(function(E){i.removeEventListener(E,g.mux.listeners[E],!1),g.addEventListener(E,g.mux.listeners[E],!1)}),g.mux.swapElement=i.mux.swapElement,g.mux.destroy=i.mux.destroy,delete i.mux,i=g},i.mux.addHLSJS=function(f){r.addHLSJS(s,f)},i.mux.addDashJS=function(f){r.addDashJS(s,f)},i.mux.removeHLSJS=function(){r.removeHLSJS(s)},i.mux.removeDashJS=function(){r.removeDashJS(s)},i.mux.setEmitTranslator=function(f){r.setEmitTranslator(s,f)},i.mux.setStateDataTranslator=function(f){r.setStateDataTranslator(s,f)},i.mux.setGetPlayheadTime=function(f){f||(f=t.getPlayheadTime),r.setGetPlayheadTime(s,f)},r.init(s,t),r.emit(s,"playerready"),i.paused||(r.emit(s,"play"),i.readyState>2&&r.emit(s,"playing")),i.mux.listeners={},TJe.forEach(function(f){f==="error"&&!t.automaticErrorTracking||(i.mux.listeners[f]=function(){var m={};if(f==="error"){if(!i.error||i.error.code===1)return;m.player_error_code=i.error.code,m.player_error_message=SJe[i.error.code]||i.error.message}r.emit(s,f,m)},i.addEventListener(f,i.mux.listeners[f],!1))})}function _Je(r,e,t,n){var i=n;if(r&&typeof r[e]=="function")try{i=r[e].apply(r,t)}catch(s){tr.info("safeCall error",s)}return i}var Kg=ls(va()),qh;Kg.default&&Kg.default.WeakMap&&(qh=new WeakMap);function CJe(r,e){if(!r||!e||!Kg.default||typeof Kg.default.getComputedStyle!="function")return"";var t;return qh&&qh.has(r)&&(t=qh.get(r)),t||(t=Kg.default.getComputedStyle(r,null),qh&&qh.set(r,t)),t.getPropertyValue(e)}function RJe(r){return Math.floor(r*1e3)}var mu={TARGET_DURATION:"#EXT-X-TARGETDURATION",PART_INF:"#EXT-X-PART-INF",SERVER_CONTROL:"#EXT-X-SERVER-CONTROL",INF:"#EXTINF",PROGRAM_DATE_TIME:"#EXT-X-PROGRAM-DATE-TIME",VERSION:"#EXT-X-VERSION",SESSION_DATA:"#EXT-X-SESSION-DATA"},vS=function(r){return this.buffer="",this.manifest={segments:[],serverControl:{},sessionData:{}},this.currentUri={},this.process(r),this.manifest};vS.prototype.process=function(r){var e;for(this.buffer+=r,e=this.buffer.indexOf(`
`);e>-1;e=this.buffer.indexOf(`
`))this.processLine(this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};vS.prototype.processLine=function(r){var e=r.indexOf(":"),t=DJe(r,e),n=t[0],i=t.length===2?kP(t[1]):void 0;if(n[0]!=="#")this.currentUri.uri=n,this.manifest.segments.push(this.currentUri),this.manifest.targetDuration&&!("duration"in this.currentUri)&&(this.currentUri.duration=this.manifest.targetDuration),this.currentUri={};else switch(n){case mu.TARGET_DURATION:{if(!isFinite(i)||i<0)return;this.manifest.targetDuration=i,this.setHoldBack();break}case mu.PART_INF:{nR(this.manifest,t),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),this.setHoldBack();break}case mu.SERVER_CONTROL:{nR(this.manifest,t),this.setHoldBack();break}case mu.INF:{i===0?this.currentUri.duration=.01:i>0&&(this.currentUri.duration=i);break}case mu.PROGRAM_DATE_TIME:{var s=i,a=new Date(s);this.manifest.dateTimeString||(this.manifest.dateTimeString=s,this.manifest.dateTimeObject=a),this.currentUri.dateTimeString=s,this.currentUri.dateTimeObject=a;break}case mu.VERSION:{nR(this.manifest,t);break}case mu.SESSION_DATA:{var o=LJe(t[1]),l=XZ(o);Object.assign(this.manifest.sessionData,l)}}};vS.prototype.setHoldBack=function(){var r=this.manifest,e=r.serverControl,t=r.targetDuration,n=r.partTargetDuration;if(e){var i="holdBack",s="partHoldBack",a=t&&t*3,o=n&&n*2;t&&!e.hasOwnProperty(i)&&(e[i]=a),a&&e[i]<a&&(e[i]=a),n&&!e.hasOwnProperty(s)&&(e[s]=n*3),n&&e[s]<o&&(e[s]=o)}};var nR=function(r,e){var t=aJ(e[0].replace("#EXT-X-","")),n;$Je(e[1])?(n={},n=Object.assign(IJe(e[1]),n)):n=kP(e[1]),r[t]=n},aJ=function(r){return r.toLowerCase().replace(/-(\w)/g,function(e){return e[1].toUpperCase()})},kP=function(r){if(r.toLowerCase()==="yes"||r.toLowerCase()==="no")return r.toLowerCase()==="yes";var e=r.indexOf(":")!==-1?r:parseFloat(r);return isNaN(e)?r:e},kJe=function(r){var e={},t=r.split("=");if(t.length>1){var n=aJ(t[0]);e[n]=kP(t[1])}return e},IJe=function(r){for(var e=r.split(","),t={},n=0;e.length>n;n++){var i=e[n],s=kJe(i);t=Object.assign(s,t)}return t},$Je=function(r){return r.indexOf("=")>-1},DJe=function(r,e){return e===-1?[r]:[r.substring(0,e),r.substring(e+1)]},LJe=function(r){var e={};if(r){var t=r.search(","),n=r.slice(0,t),i=r.slice(t+1),s=[n,i];return s.forEach(function(a,o){for(var l=a.replace(/['"]+/g,"").split("="),c=0;c<l.length;c++)l[c]==="DATA-ID"&&(e["DATA-ID"]=l[1-c]),l[c]==="VALUE"&&(e.VALUE=l[1-c])}),{data:e}}},OJe=vS,PJe={safeCall:_Je,safeIncrement:Xr,getComputedStyle:CJe,secondsToMs:RJe,assign:Object.assign,headersStringToObject:RP,cdnHeadersToRequestId:mw,extractHostnameAndDomain:W0,extractHostname:Zs,manifestParser:OJe,generateShortID:YZ,generateUUID:U0,now:en.now,findMediaElement:hw},MJe=PJe,NJe={PLAYER_READY:"playerready",VIEW_INIT:"viewinit",VIDEO_CHANGE:"videochange",PLAY:"play",PAUSE:"pause",PLAYING:"playing",TIME_UPDATE:"timeupdate",SEEKING:"seeking",SEEKED:"seeked",REBUFFER_START:"rebufferstart",REBUFFER_END:"rebufferend",ERROR:"error",ENDED:"ended",RENDITION_CHANGE:"renditionchange",ORIENTATION_CHANGE:"orientationchange",AD_REQUEST:"adrequest",AD_RESPONSE:"adresponse",AD_BREAK_START:"adbreakstart",AD_PLAY:"adplay",AD_PLAYING:"adplaying",AD_PAUSE:"adpause",AD_FIRST_QUARTILE:"adfirstquartile",AD_MID_POINT:"admidpoint",AD_THIRD_QUARTILE:"adthirdquartile",AD_ENDED:"adended",AD_BREAK_END:"adbreakend",AD_ERROR:"aderror",REQUEST_COMPLETED:"requestcompleted",REQUEST_FAILED:"requestfailed",REQUEST_CANCELLED:"requestcanceled",HEARTBEAT:"hb",DESTROY:"destroy"},FJe=NJe,BJe="mux-embed",UJe="5.8.3",WJe="2.1",Vr={},kc=function(r){var e=arguments;typeof r=="string"?kc.hasOwnProperty(r)?jg.default.setTimeout(function(){e=Array.prototype.splice.call(e,1),kc[r].apply(null,e)},0):tr.warn("`"+r+"` is an unknown task"):typeof r=="function"?jg.default.setTimeout(function(){r(kc)},0):tr.warn("`"+r+"` is invalid.")},HJe={loaded:en.now(),NAME:BJe,VERSION:UJe,API_VERSION:WJe,PLAYER_TRACKED:!1,monitor:function(r,e){return AJe(kc,r,e)},destroyMonitor:function(r){var e=wl(hw(r),1),t=e[0];t&&t.mux&&typeof t.mux.destroy=="function"?t.mux.destroy():tr.error("A video element monitor for `"+r+"` has not been initialized via `mux.monitor`.")},addHLSJS:function(r,e){var t=qs(r);Vr[t]?Vr[t].addHLSJS(e):tr.error("A monitor for `"+t+"` has not been initialized.")},addDashJS:function(r,e){var t=qs(r);Vr[t]?Vr[t].addDashJS(e):tr.error("A monitor for `"+t+"` has not been initialized.")},removeHLSJS:function(r){var e=qs(r);Vr[e]?Vr[e].removeHLSJS():tr.error("A monitor for `"+e+"` has not been initialized.")},removeDashJS:function(r){var e=qs(r);Vr[e]?Vr[e].removeDashJS():tr.error("A monitor for `"+e+"` has not been initialized.")},init:function(r,e){k$()&&e&&e.respectDoNotTrack&&tr.info("The browser's Do Not Track flag is enabled - Mux beaconing is disabled.");var t=qs(r);Vr[t]=new xJe(kc,t,e)},emit:function(r,e,t){var n=qs(r);Vr[n]?(Vr[n].emit(e,t),e==="destroy"&&delete Vr[n]):tr.error("A monitor for `"+n+"` has not been initialized.")},updateData:function(r,e){var t=qs(r);Vr[t]?Vr[t].emit("hb",e):tr.error("A monitor for `"+t+"` has not been initialized.")},setEmitTranslator:function(r,e){var t=qs(r);Vr[t]?Vr[t].emitTranslator=e:tr.error("A monitor for `"+t+"` has not been initialized.")},setStateDataTranslator:function(r,e){var t=qs(r);Vr[t]?Vr[t].stateDataTranslator=e:tr.error("A monitor for `"+t+"` has not been initialized.")},setGetPlayheadTime:function(r,e){var t=qs(r);Vr[t]?Vr[t].getPlayheadTime=e:tr.error("A monitor for `"+t+"` has not been initialized.")},checkDoNotTrack:k$,log:tr,utils:MJe,events:FJe,WINDOW_HIDDEN:!1,WINDOW_UNLOADING:!1};Object.assign(kc,HJe);typeof jg.default<"u"&&typeof jg.default.addEventListener=="function"&&jg.default.addEventListener("pagehide",function(r){r.persisted||(kc.WINDOW_UNLOADING=!0)},!1);var IP=kc;/*!
* JavaScript Cookie v2.1.3
* https://github.com/js-cookie/js-cookie
*
* Copyright 2006, 2015 Klaus Hartl & Fagner Brack
* Released under the MIT license
*/function VJe(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var oJ={exports:{}};(function(r,e){(function(t){var n=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,i=/^(?=([^\/?#]*))\1([^]*)$/,s=/(?:\/|^)\.(?=\/)/g,a=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,c,u){if(u=u||{},l=l.trim(),c=c.trim(),!c){if(!u.alwaysNormalize)return l;var d=o.parseURL(l);if(!d)throw new Error("Error trying to parse base URL.");return d.path=o.normalizePath(d.path),o.buildURLFromParts(d)}var h=o.parseURL(c);if(!h)throw new Error("Error trying to parse relative URL.");if(h.scheme)return u.alwaysNormalize?(h.path=o.normalizePath(h.path),o.buildURLFromParts(h)):c;var f=o.parseURL(l);if(!f)throw new Error("Error trying to parse base URL.");if(!f.netLoc&&f.path&&f.path[0]!=="/"){var m=i.exec(f.path);f.netLoc=m[1],f.path=m[2]}f.netLoc&&!f.path&&(f.path="/");var g={scheme:f.scheme,netLoc:h.netLoc,path:null,params:h.params,query:h.query,fragment:h.fragment};if(!h.netLoc&&(g.netLoc=f.netLoc,h.path[0]!=="/"))if(!h.path)g.path=f.path,h.params||(g.params=f.params,h.query||(g.query=f.query));else{var y=f.path,b=y.substring(0,y.lastIndexOf("/")+1)+h.path;g.path=o.normalizePath(b)}return g.path===null&&(g.path=u.alwaysNormalize?o.normalizePath(h.path):h.path),o.buildURLFromParts(g)},parseURL:function(l){var c=n.exec(l);return c?{scheme:c[1]||"",netLoc:c[2]||"",path:c[3]||"",params:c[4]||"",query:c[5]||"",fragment:c[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(s,"");l.length!==(l=l.replace(a,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};r.exports=o})()})(oJ);var $P=oJ.exports;function fB(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(r);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(r,i).enumerable})),t.push.apply(t,n)}return t}function Ln(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?fB(Object(t),!0).forEach(function(n){jJe(r,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):fB(Object(t)).forEach(function(n){Object.defineProperty(r,n,Object.getOwnPropertyDescriptor(t,n))})}return r}function GJe(r,e){if(typeof r!="object"||!r)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var n=t.call(r,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function qJe(r){var e=GJe(r,"string");return typeof e=="symbol"?e:String(e)}function jJe(r,e,t){return e=qJe(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function tn(){return tn=Object.assign?Object.assign.bind():function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n])}return r},tn.apply(this,arguments)}const Ve=Number.isFinite||function(r){return typeof r=="number"&&isFinite(r)},KJe=Number.isSafeInteger||function(r){return typeof r=="number"&&Math.abs(r)<=zJe},zJe=Number.MAX_SAFE_INTEGER||9007199254740991;let P=function(r){return r.MEDIA_ATTACHING="hlsMediaAttaching",r.MEDIA_ATTACHED="hlsMediaAttached",r.MEDIA_DETACHING="hlsMediaDetaching",r.MEDIA_DETACHED="hlsMediaDetached",r.BUFFER_RESET="hlsBufferReset",r.BUFFER_CODECS="hlsBufferCodecs",r.BUFFER_CREATED="hlsBufferCreated",r.BUFFER_APPENDING="hlsBufferAppending",r.BUFFER_APPENDED="hlsBufferAppended",r.BUFFER_EOS="hlsBufferEos",r.BUFFER_FLUSHING="hlsBufferFlushing",r.BUFFER_FLUSHED="hlsBufferFlushed",r.MANIFEST_LOADING="hlsManifestLoading",r.MANIFEST_LOADED="hlsManifestLoaded",r.MANIFEST_PARSED="hlsManifestParsed",r.LEVEL_SWITCHING="hlsLevelSwitching",r.LEVEL_SWITCHED="hlsLevelSwitched",r.LEVEL_LOADING="hlsLevelLoading",r.LEVEL_LOADED="hlsLevelLoaded",r.LEVEL_UPDATED="hlsLevelUpdated",r.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",r.LEVELS_UPDATED="hlsLevelsUpdated",r.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",r.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",r.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",r.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",r.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",r.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",r.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",r.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",r.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",r.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",r.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",r.CUES_PARSED="hlsCuesParsed",r.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",r.INIT_PTS_FOUND="hlsInitPtsFound",r.FRAG_LOADING="hlsFragLoading",r.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",r.FRAG_LOADED="hlsFragLoaded",r.FRAG_DECRYPTED="hlsFragDecrypted",r.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",r.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",r.FRAG_PARSING_METADATA="hlsFragParsingMetadata",r.FRAG_PARSED="hlsFragParsed",r.FRAG_BUFFERED="hlsFragBuffered",r.FRAG_CHANGED="hlsFragChanged",r.FPS_DROP="hlsFpsDrop",r.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",r.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",r.ERROR="hlsError",r.DESTROYING="hlsDestroying",r.KEY_LOADING="hlsKeyLoading",r.KEY_LOADED="hlsKeyLoaded",r.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",r.BACK_BUFFER_REACHED="hlsBackBufferReached",r.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",r}({}),at=function(r){return r.NETWORK_ERROR="networkError",r.MEDIA_ERROR="mediaError",r.KEY_SYSTEM_ERROR="keySystemError",r.MUX_ERROR="muxError",r.OTHER_ERROR="otherError",r}({}),ce=function(r){return r.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",r.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",r.KEY_SYSTEM_NO_SESSION="keySystemNoSession",r.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",r.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",r.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",r.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",r.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",r.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",r.MANIFEST_LOAD_ERROR="manifestLoadError",r.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",r.MANIFEST_PARSING_ERROR="manifestParsingError",r.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",r.LEVEL_EMPTY_ERROR="levelEmptyError",r.LEVEL_LOAD_ERROR="levelLoadError",r.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",r.LEVEL_PARSING_ERROR="levelParsingError",r.LEVEL_SWITCH_ERROR="levelSwitchError",r.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",r.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",r.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",r.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",r.FRAG_LOAD_ERROR="fragLoadError",r.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",r.FRAG_DECRYPT_ERROR="fragDecryptError",r.FRAG_PARSING_ERROR="fragParsingError",r.FRAG_GAP="fragGap",r.REMUX_ALLOC_ERROR="remuxAllocError",r.KEY_LOAD_ERROR="keyLoadError",r.KEY_LOAD_TIMEOUT="keyLoadTimeOut",r.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",r.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",r.BUFFER_APPEND_ERROR="bufferAppendError",r.BUFFER_APPENDING_ERROR="bufferAppendingError",r.BUFFER_STALLED_ERROR="bufferStalledError",r.BUFFER_FULL_ERROR="bufferFullError",r.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",r.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",r.INTERNAL_EXCEPTION="internalException",r.INTERNAL_ABORTED="aborted",r.UNKNOWN="unknown",r}({});const Au=function(){},D$={trace:Au,debug:Au,log:Au,warn:Au,info:Au,error:Au};let zg=D$;function YJe(r){const e=self.console[r];return e?e.bind(self.console,`[${r}] >`):Au}function QJe(r,...e){e.forEach(function(t){zg[t]=r[t]?r[t].bind(r):YJe(t)})}function XJe(r,e){if(typeof console=="object"&&r===!0||typeof r=="object"){QJe(r,"debug","log","info","warn","error");try{zg.log(`Debug logs enabled for "${e}" in hls.js version 1.5.20`)}catch{zg=D$}}else zg=D$}const re=zg,ZJe=/^(\d+)x(\d+)$/,pB=/(.+?)=(".*?"|.*?)(?:,|$)/g;class kr{constructor(e){typeof e=="string"&&(e=kr.parseAttrList(e)),tn(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const n=new Uint8Array(t.length/2);for(let i=0;i<t.length/2;i++)n[i]=parseInt(t.slice(i*2,i*2+2),16);return n}else return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const n=this[e];return n?parseFloat(n):t}enumeratedString(e){return this[e]}bool(e){return this[e]==="YES"}decimalResolution(e){const t=ZJe.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e){let t;const n={},i='"';for(pB.lastIndex=0;(t=pB.exec(e))!==null;){let s=t[2];s.indexOf(i)===0&&s.lastIndexOf(i)===s.length-1&&(s=s.slice(1,-1));const a=t[1].trim();n[a]=s}return n}}function JJe(r){return r!=="ID"&&r!=="CLASS"&&r!=="START-DATE"&&r!=="DURATION"&&r!=="END-DATE"&&r!=="END-ON-NEXT"}function eet(r){return r==="SCTE35-OUT"||r==="SCTE35-IN"}class lJ{constructor(e,t){if(this.attr=void 0,this._startDate=void 0,this._endDate=void 0,this._badValueForSameId=void 0,t){const n=t.attr;for(const i in n)if(Object.prototype.hasOwnProperty.call(e,i)&&e[i]!==n[i]){re.warn(`DATERANGE tag attribute: "${i}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=i;break}e=tn(new kr({}),n,e)}if(this.attr=e,this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const n=new Date(this.attr["END-DATE"]);Ve(n.getTime())&&(this._endDate=n)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get startDate(){return this._startDate}get endDate(){if(this._endDate)return this._endDate;const e=this.duration;return e!==null?new Date(this._startDate.getTime()+e*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(Ve(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isValid(){return!!this.id&&!this._badValueForSameId&&Ve(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)}}class yS{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var jt={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class cJ{constructor(e){this._byteRange=null,this._url=null,this.baseurl=void 0,this.relurl=void 0,this.elementaryStreams={[jt.AUDIO]:null,[jt.VIDEO]:null,[jt.AUDIOVIDEO]:null},this.baseurl=e}setByteRange(e,t){const n=e.split("@",2);let i;n.length===1?i=t?.byteRangeEndOffset||0:i=parseInt(n[1]),this._byteRange=[i,parseInt(n[0])+i]}get byteRange(){return this._byteRange?this._byteRange:[]}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=$P.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}}class iR extends cJ{constructor(e,t){super(t),this._decryptdata=null,this.rawProgramDateTime=null,this.programDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.stats=new yS,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get decryptdata(){const{levelkeys:e}=this;if(!e&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkeys&&!this.levelkeys.NONE){const t=this.levelkeys.identity;if(t)this._decryptdata=t.getDecryptData(this.sn);else{const n=Object.keys(this.levelkeys);if(n.length===1)return this._decryptdata=this.levelkeys[n[0]].getDecryptData(this.sn)}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null||!Ve(this.programDateTime))return null;const e=Ve(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){const t=Object.keys(this.levelkeys),n=t.length;if(n>1||n===1&&this.levelkeys[t[0]].encrypted)return!0}return!1}setKeyFormat(e){if(this.levelkeys){const t=this.levelkeys[e];t&&!this._decryptdata&&(this._decryptdata=t.getDecryptData(this.sn))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,n,i,s,a=!1){const{elementaryStreams:o}=this,l=o[e];if(!l){o[e]={startPTS:t,endPTS:n,startDTS:i,endDTS:s,partial:a};return}l.startPTS=Math.min(l.startPTS,t),l.endPTS=Math.max(l.endPTS,n),l.startDTS=Math.min(l.startDTS,i),l.endDTS=Math.max(l.endDTS,s)}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[jt.AUDIO]=null,e[jt.VIDEO]=null,e[jt.AUDIOVIDEO]=null}}let tet=class extends cJ{constructor(e,t,n,i,s){super(n),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.stats=new yS,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=i;const a=e.enumeratedString("BYTERANGE");a&&this.setByteRange(a,s),s&&(this.fragOffset=s.fragOffset+s.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}};const ret=10;class net{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.live=!0,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.availabilityDelay=void 0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,n=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!n||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&n>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1,this.availabilityDelay=e.availabilityDelay}get hasProgramDateTime(){return this.fragments.length?Ve(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||ret}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){var e;return(e=this.fragments)!=null&&e.length?this.fragments[this.fragments.length-1].end:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}}function DP(r){return Uint8Array.from(atob(r),e=>e.charCodeAt(0))}function iet(r){const e=L$(r).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function set(r){const e=function(n,i,s){const a=n[i];n[i]=n[s],n[s]=a};e(r,0,3),e(r,1,2),e(r,4,5),e(r,6,7)}function aet(r){const e=r.split(":");let t=null;if(e[0]==="data"&&e.length===2){const n=e[1].split(";"),i=n[n.length-1].split(",");if(i.length===2){const s=i[0]==="base64",a=i[1];s?(n.splice(-1,1),t=DP(a)):t=iet(a)}}return t}function L$(r){return Uint8Array.from(unescape(encodeURIComponent(r)),e=>e.charCodeAt(0))}const yp=typeof self<"u"?self:void 0;var Vt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Di={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function sR(r){switch(r){case Di.FAIRPLAY:return Vt.FAIRPLAY;case Di.PLAYREADY:return Vt.PLAYREADY;case Di.WIDEVINE:return Vt.WIDEVINE;case Di.CLEARKEY:return Vt.CLEARKEY}}var Ub={CENC:"1077efecc0b24d02ace33c1e52e2fb4b",CLEARKEY:"e2719d58a985b3c9781ab030af78d30e",PLAYREADY:"9a04f07998404286ab92e65be0885f95",WIDEVINE:"edef8ba979d64acea3c827dcd51d21ed"};function aR(r){if(r===Ub.WIDEVINE)return Vt.WIDEVINE;if(r===Ub.PLAYREADY)return Vt.PLAYREADY;if(r===Ub.CENC||r===Ub.CLEARKEY)return Vt.CLEARKEY}function oR(r){switch(r){case Vt.FAIRPLAY:return Di.FAIRPLAY;case Vt.PLAYREADY:return Di.PLAYREADY;case Vt.WIDEVINE:return Di.WIDEVINE;case Vt.CLEARKEY:return Di.CLEARKEY}}function Wb(r){const{drmSystems:e,widevineLicenseUrl:t}=r,n=e?[Vt.FAIRPLAY,Vt.WIDEVINE,Vt.PLAYREADY,Vt.CLEARKEY].filter(i=>!!e[i]):[];return!n[Vt.WIDEVINE]&&t&&n.push(Vt.WIDEVINE),n}const uJ=function(r){return yp!=null&&(r=yp.navigator)!=null&&r.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null}();function oet(r,e,t,n){let i;switch(r){case Vt.FAIRPLAY:i=["cenc","sinf"];break;case Vt.WIDEVINE:case Vt.PLAYREADY:i=["cenc"];break;case Vt.CLEARKEY:i=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${r}`)}return cet(i,e,t,n)}function cet(r,e,t,n){return[{initDataTypes:r,persistentState:n.persistentState||"optional",distinctiveIdentifier:n.distinctiveIdentifier||"optional",sessionTypes:n.sessionTypes||[n.sessionType||"temporary"],audioCapabilities:e.map(s=>({contentType:`audio/mp4; codecs="${s}"`,robustness:n.audioRobustness||"",encryptionScheme:n.audioEncryptionScheme||null})),videoCapabilities:t.map(s=>({contentType:`video/mp4; codecs="${s}"`,robustness:n.videoRobustness||"",encryptionScheme:n.videoEncryptionScheme||null}))}]}function dJ(r){const e=new Uint16Array(r.buffer,r.byteOffset,r.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),n=t.substring(t.indexOf("<"),t.length),a=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("KID")[0];if(a){const o=a.childNodes[0]?a.childNodes[0].nodeValue:a.getAttribute("VALUE");if(o){const l=DP(o).subarray(0,16);return set(l),l}}return null}function yd(r,e,t){return Uint8Array.prototype.slice?r.slice(e,t):new Uint8Array(Array.prototype.slice.call(r,e,t))}const LP=(r,e)=>e+10<=r.length&&r[e]===73&&r[e+1]===68&&r[e+2]===51&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,hJ=(r,e)=>e+10<=r.length&&r[e]===51&&r[e+1]===68&&r[e+2]===73&&r[e+3]<255&&r[e+4]<255&&r[e+6]<128&&r[e+7]<128&&r[e+8]<128&&r[e+9]<128,H0=(r,e)=>{const t=e;let n=0;for(;LP(r,e);){n+=10;const i=bS(r,e+6);n+=i,hJ(r,e+10)&&(n+=10),e+=n}if(n>0)return r.subarray(t,t+n)},bS=(r,e)=>{let t=0;return t=(r[e]&127)<<21,t|=(r[e+1]&127)<<14,t|=(r[e+2]&127)<<7,t|=r[e+3]&127,t},uet=(r,e)=>LP(r,e)&&bS(r,e+6)+10<=r.length-e,OP=r=>{const e=pJ(r);for(let t=0;t<e.length;t++){const n=e[t];if(fJ(n))return get(n)}},fJ=r=>r&&r.key==="PRIV"&&r.info==="com.apple.streaming.transportStreamTimestamp",det=r=>{const e=String.fromCharCode(r[0],r[1],r[2],r[3]),t=bS(r,4),n=10;return{type:e,size:t,data:r.subarray(n,n+t)}},pJ=r=>{let e=0;const t=[];for(;LP(r,e);){const n=bS(r,e+6);e+=10;const i=e+n;for(;e+8<i;){const s=det(r.subarray(e)),a=het(s);a&&t.push(a),e+=s.size+10}hJ(r,e)&&(e+=10)}return t},het=r=>r.type==="PRIV"?fet(r):r.type[0]==="W"?met(r):pet(r),fet=r=>{if(r.size<2)return;const e=uo(r.data,!0),t=new Uint8Array(r.data.subarray(e.length+1));return{key:r.type,info:e,data:t.buffer}},pet=r=>{if(r.size<2)return;if(r.type==="TXXX"){let t=1;const n=uo(r.data.subarray(t),!0);t+=n.length+1;const i=uo(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=uo(r.data.subarray(1));return{key:r.type,data:e}},met=r=>{if(r.type==="WXXX"){if(r.size<2)return;let t=1;const n=uo(r.data.subarray(t),!0);t+=n.length+1;const i=uo(r.data.subarray(t));return{key:r.type,info:n,data:i}}const e=uo(r.data);return{key:r.type,data:e}},get=r=>{if(r.data.byteLength===8){const e=new Uint8Array(r.data),t=e[3]&1;let n=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return n/=45,t&&(n+=4772185884e-2),Math.round(n)}},uo=(r,e=!1)=>{const t=vet();if(t){const c=t.decode(r);if(e){const u=c.indexOf("\0");return u!==-1?c.substring(0,u):c}return c.replace(/\0/g,"")}const n=r.length;let i,s,a,o="",l=0;for(;l<n;){if(i=r[l++],i===0&&e)return o;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o+=String.fromCharCode(i);break;case 12:case 13:s=r[l++],o+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=r[l++],a=r[l++],o+=String.fromCharCode((i&15)<<12|(s&63)<<6|(a&63)<<0);break}}return o};let lR;function vet(){if(!navigator.userAgent.includes("PlayStation 4"))return!lR&&typeof self.TextDecoder<"u"&&(lR=new self.TextDecoder("utf-8")),lR}const Ga={hexDump:function(r){let e="";for(let t=0;t<r.length;t++){let n=r[t].toString(16);n.length<2&&(n="0"+n),e+=n}return e}},gw=Math.pow(2,32)-1,yet=[].push,mJ={video:1,audio:2,id3:3,text:4};function on(r){return String.fromCharCode.apply(null,r)}function gJ(r,e){const t=r[e]<<8|r[e+1];return t<0?65536+t:t}function rt(r,e){const t=vJ(r,e);return t<0?4294967296+t:t}function mB(r,e){let t=rt(r,e);return t*=Math.pow(2,32),t+=rt(r,e+4),t}function vJ(r,e){return r[e]<<24|r[e+1]<<16|r[e+2]<<8|r[e+3]}function cR(r,e,t){r[e]=t>>24,r[e+1]=t>>16&255,r[e+2]=t>>8&255,r[e+3]=t&255}function bet(r){const e=r.byteLength;for(let t=0;t<e;){const n=rt(r,t);if(n>8&&r[t+4]===109&&r[t+5]===111&&r[t+6]===111&&r[t+7]===102)return!0;t=n>1?t+n:e}return!1}function gt(r,e){const t=[];if(!e.length)return t;const n=r.byteLength;for(let i=0;i<n;){const s=rt(r,i),a=on(r.subarray(i+4,i+8)),o=s>1?i+s:n;if(a===e[0])if(e.length===1)t.push(r.subarray(i+8,o));else{const l=gt(r.subarray(i+8,o),e.slice(1));l.length&&yet.apply(t,l)}i=o}return t}function Eet(r){const e=[],t=r[0];let n=8;const i=rt(r,n);n+=4;let s=0,a=0;t===0?(s=rt(r,n),a=rt(r,n+4),n+=8):(s=mB(r,n),a=mB(r,n+8),n+=16),n+=2;let o=r.length+a;const l=gJ(r,n);n+=2;for(let c=0;c<l;c++){let u=n;const d=rt(r,u);u+=4;const h=d&2147483647;if((d&2147483648)>>>31===1)return re.warn("SIDX has hierarchical references (not supported)"),null;const m=rt(r,u);u+=4,e.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/i,start:o,end:o+h-1}}),o+=h,u+=4,n=u}return{earliestPresentationTime:s,timescale:i,version:t,referencesCount:l,references:e}}function yJ(r){const e=[],t=gt(r,["moov","trak"]);for(let i=0;i<t.length;i++){const s=t[i],a=gt(s,["tkhd"])[0];if(a){let o=a[0];const l=rt(a,o===0?12:20),c=gt(s,["mdia","mdhd"])[0];if(c){o=c[0];const u=rt(c,o===0?12:20),d=gt(s,["mdia","hdlr"])[0];if(d){const h=on(d.subarray(8,12)),f={soun:jt.AUDIO,vide:jt.VIDEO}[h];if(f){const m=gt(s,["mdia","minf","stbl","stsd"])[0],g=xet(m);e[l]={timescale:u,type:f},e[f]=Ln({timescale:u,id:l},g)}}}}}return gt(r,["moov","mvex","trex"]).forEach(i=>{const s=rt(i,4),a=e[s];a&&(a.default={duration:rt(i,12),flags:rt(i,20)})}),e}function xet(r){const e=r.subarray(8),t=e.subarray(86),n=on(e.subarray(4,8));let i=n;const s=n==="enca"||n==="encv";if(s){const o=gt(e,[n])[0].subarray(n==="enca"?28:78);gt(o,["sinf"]).forEach(c=>{const u=gt(c,["schm"])[0];if(u){const d=on(u.subarray(4,8));if(d==="cbcs"||d==="cenc"){const h=gt(c,["frma"])[0];h&&(i=on(h))}}})}switch(i){case"avc1":case"avc2":case"avc3":case"avc4":{const a=gt(t,["avcC"])[0];i+="."+Hb(a[1])+Hb(a[2])+Hb(a[3]);break}case"mp4a":{const a=gt(e,[n])[0],o=gt(a.subarray(28),["esds"])[0];if(o&&o.length>12){let l=4;if(o[l++]!==3)break;l=uR(o,l),l+=2;const c=o[l++];if(c&128&&(l+=2),c&64&&(l+=o[l++]),o[l++]!==4)break;l=uR(o,l);const u=o[l++];if(u===64)i+="."+Hb(u);else break;if(l+=12,o[l++]!==5)break;l=uR(o,l);const d=o[l++];let h=(d&248)>>3;h===31&&(h+=1+((d&7)<<3)+((o[l]&224)>>5)),i+="."+h}break}case"hvc1":case"hev1":{const a=gt(t,["hvcC"])[0],o=a[1],l=["","A","B","C"][o>>6],c=o&31,u=rt(a,2),d=(o&32)>>5?"H":"L",h=a[12],f=a.subarray(6,12);i+="."+l+c,i+="."+u.toString(16).toUpperCase(),i+="."+d+h;let m="";for(let g=f.length;g--;){const y=f[g];(y||m)&&(m="."+y.toString(16).toUpperCase()+m)}i+=m;break}case"dvh1":case"dvhe":{const a=gt(t,["dvcC"])[0],o=a[2]>>1&127,l=a[2]<<5&32|a[3]>>3&31;i+="."+Ca(o)+"."+Ca(l);break}case"vp09":{const a=gt(t,["vpcC"])[0],o=a[4],l=a[5],c=a[6]>>4&15;i+="."+Ca(o)+"."+Ca(l)+"."+Ca(c);break}case"av01":{const a=gt(t,["av1C"])[0],o=a[1]>>>5,l=a[1]&31,c=a[2]>>>7?"H":"M",u=(a[2]&64)>>6,d=(a[2]&32)>>5,h=o===2&&u?d?12:10:u?10:8,f=(a[2]&16)>>4,m=(a[2]&8)>>3,g=(a[2]&4)>>2,y=a[2]&3;i+="."+o+"."+Ca(l)+c+"."+Ca(h)+"."+f+"."+m+g+y+"."+Ca(1)+"."+Ca(1)+"."+Ca(1)+"."+0;break}}return{codec:i,encrypted:s}}function uR(r,e){const t=e+5;for(;r[e++]&128&&e<t;);return e}function Hb(r){return("0"+r.toString(16).toUpperCase()).slice(-2)}function Ca(r){return(r<10?"0":"")+r}function wet(r,e){if(!r||!e)return r;const t=e.keyId;return t&&e.isCommonEncryption&&gt(r,["moov","trak"]).forEach(i=>{const a=gt(i,["mdia","minf","stbl","stsd"])[0].subarray(8);let o=gt(a,["enca"]);const l=o.length>0;l||(o=gt(a,["encv"])),o.forEach(c=>{const u=l?c.subarray(28):c.subarray(78);gt(u,["sinf"]).forEach(h=>{const f=bJ(h);if(f){const m=f.subarray(8,24);m.some(g=>g!==0)||(re.log(`[eme] Patching keyId in 'enc${l?"a":"v"}>sinf>>tenc' box: ${Ga.hexDump(m)} -> ${Ga.hexDump(t)}`),f.set(t,8))}})})}),r}function bJ(r){const e=gt(r,["schm"])[0];if(e){const t=on(e.subarray(4,8));if(t==="cbcs"||t==="cenc")return gt(r,["schi","tenc"])[0]}return null}function Tet(r,e){return gt(e,["moof","traf"]).reduce((t,n)=>{const i=gt(n,["tfdt"])[0],s=i[0],a=gt(n,["tfhd"]).reduce((o,l)=>{const c=rt(l,4),u=r[c];if(u){let d=rt(i,4);if(s===1){if(d===gw)return re.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"),o;d*=gw+1,d+=rt(i,8)}const h=u.timescale||9e4,f=d/h;if(Ve(f)&&(o===null||f<o))return f}return o},null);return a!==null&&Ve(a)&&(t===null||a<t)?a:t},null)}function Aet(r,e){let t=0,n=0,i=0;const s=gt(r,["moof","traf"]);for(let a=0;a<s.length;a++){const o=s[a],l=gt(o,["tfhd"])[0],c=rt(l,4),u=e[c];if(!u)continue;const d=u.default,h=rt(l,0)|d?.flags;let f=d?.duration;h&8&&(h&2?f=rt(l,12):f=rt(l,8));const m=u.timescale||9e4,g=gt(o,["trun"]);for(let y=0;y<g.length;y++){if(t=_et(g[y]),!t&&f){const b=rt(g[y],4);t=f*b}u.type===jt.VIDEO?n+=t/m:u.type===jt.AUDIO&&(i+=t/m)}}if(n===0&&i===0){let a=1/0,o=0,l=0;const c=gt(r,["sidx"]);for(let u=0;u<c.length;u++){const d=Eet(c[u]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((f,m)=>f+m.info.duration||0,0);o=Math.max(o,h+d.earliestPresentationTime/d.timescale),l=o-a}}if(l&&Ve(l))return l}return n||i}function _et(r){const e=rt(r,0);let t=8;e&1&&(t+=4),e&4&&(t+=4);let n=0;const i=rt(r,4);for(let s=0;s<i;s++){if(e&256){const a=rt(r,t);n+=a,t+=4}e&512&&(t+=4),e&1024&&(t+=4),e&2048&&(t+=4)}return n}function Cet(r,e,t){gt(e,["moof","traf"]).forEach(n=>{gt(n,["tfhd"]).forEach(i=>{const s=rt(i,4),a=r[s];if(!a)return;const o=a.timescale||9e4;gt(n,["tfdt"]).forEach(l=>{const c=l[0],u=t*o;if(u){let d=rt(l,4);if(c===0)d-=u,d=Math.max(d,0),cR(l,4,d);else{d*=Math.pow(2,32),d+=rt(l,8),d-=u,d=Math.max(d,0);const h=Math.floor(d/(gw+1)),f=Math.floor(d%(gw+1));cR(l,4,h),cR(l,8,f)}}})})})}function Ret(r){const e={valid:null,remainder:null},t=gt(r,["moof"]);if(t.length<2)return e.remainder=r,e;const n=t[t.length-1];return e.valid=yd(r,0,n.byteOffset-8),e.remainder=yd(r,n.byteOffset-8),e}function Ds(r,e){const t=new Uint8Array(r.length+e.length);return t.set(r),t.set(e,r.length),t}function gB(r,e){const t=[],n=e.samples,i=e.timescale,s=e.id;let a=!1;return gt(n,["moof"]).map(l=>{const c=l.byteOffset-8;gt(l,["traf"]).map(d=>{const h=gt(d,["tfdt"]).map(f=>{const m=f[0];let g=rt(f,4);return m===1&&(g*=Math.pow(2,32),g+=rt(f,8)),g/i})[0];return h!==void 0&&(r=h),gt(d,["tfhd"]).map(f=>{const m=rt(f,4),g=rt(f,0)&16777215,y=(g&1)!==0,b=(g&2)!==0,E=(g&8)!==0;let w=0;const A=(g&16)!==0;let S=0;const _=(g&32)!==0;let C=8;m===s&&(y&&(C+=8),b&&(C+=4),E&&(w=rt(f,C),C+=4),A&&(S=rt(f,C),C+=4),_&&(C+=4),e.type==="video"&&(a=ket(e.codec)),gt(d,["trun"]).map(k=>{const D=k[0],I=rt(k,0)&16777215,L=(I&1)!==0;let M=0;const F=(I&4)!==0,U=(I&256)!==0;let W=0;const j=(I&512)!==0;let z=0;const Q=(I&1024)!==0,V=(I&2048)!==0;let Y=0;const J=rt(k,4);let ue=8;L&&(M=rt(k,ue),ue+=4),F&&(ue+=4);let ne=M+c;for(let ge=0;ge<J;ge++){if(U?(W=rt(k,ue),ue+=4):W=w,j?(z=rt(k,ue),ue+=4):z=S,Q&&(ue+=4),V&&(D===0?Y=rt(k,ue):Y=vJ(k,ue),ue+=4),e.type===jt.VIDEO){let ae=0;for(;ae<z;){const ie=rt(n,ne);if(ne+=4,Iet(a,n[ne])){const ee=n.subarray(ne,ne+ie);EJ(ee,a?2:1,r+Y/i,t)}ne+=ie,ae+=ie+4}}r+=W/i}}))})})}),t}function ket(r){if(!r)return!1;const e=r.indexOf("."),t=e<0?r:r.substring(0,e);return t==="hvc1"||t==="hev1"||t==="dvh1"||t==="dvhe"}function Iet(r,e){if(r){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function EJ(r,e,t,n){const i=xJ(r);let s=0;s+=e;let a=0,o=0,l=0;for(;s<i.length;){a=0;do{if(s>=i.length)break;l=i[s++],a+=l}while(l===255);o=0;do{if(s>=i.length)break;l=i[s++],o+=l}while(l===255);const c=i.length-s;let u=s;if(o<c)s+=o;else if(o>c){re.error(`Malformed SEI payload. ${o} is too small, only ${c} bytes left to parse.`);break}if(a===4){if(i[u++]===181){const h=gJ(i,u);if(u+=2,h===49){const f=rt(i,u);if(u+=4,f===1195456820){const m=i[u++];if(m===3){const g=i[u++],y=31&g,b=64&g,E=b?2+y*3:0,w=new Uint8Array(E);if(b){w[0]=g;for(let A=1;A<E;A++)w[A]=i[u++]}n.push({type:m,payloadType:a,pts:t,bytes:w})}}}}}else if(a===5&&o>16){const d=[];for(let m=0;m<16;m++){const g=i[u++].toString(16);d.push(g.length==1?"0"+g:g),(m===3||m===5||m===7||m===9)&&d.push("-")}const h=o-16,f=new Uint8Array(h);for(let m=0;m<h;m++)f[m]=i[u++];n.push({payloadType:a,pts:t,uuid:d.join(""),userData:uo(f),userDataBytes:f})}}}function xJ(r){const e=r.byteLength,t=[];let n=1;for(;n<e-2;)r[n]===0&&r[n+1]===0&&r[n+2]===3?(t.push(n+2),n+=2):n++;if(t.length===0)return r;const i=e-t.length,s=new Uint8Array(i);let a=0;for(n=0;n<i;a++,n++)a===t[0]&&(a++,t.shift()),s[n]=r[a];return s}function $et(r){const e=r[0];let t="",n="",i=0,s=0,a=0,o=0,l=0,c=0;if(e===0){for(;on(r.subarray(c,c+1))!=="\0";)t+=on(r.subarray(c,c+1)),c+=1;for(t+=on(r.subarray(c,c+1)),c+=1;on(r.subarray(c,c+1))!=="\0";)n+=on(r.subarray(c,c+1)),c+=1;n+=on(r.subarray(c,c+1)),c+=1,i=rt(r,12),s=rt(r,16),o=rt(r,20),l=rt(r,24),c=28}else if(e===1){c+=4,i=rt(r,c),c+=4;const d=rt(r,c);c+=4;const h=rt(r,c);for(c+=4,a=2**32*d+h,KJe(a)||(a=Number.MAX_SAFE_INTEGER,re.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),o=rt(r,c),c+=4,l=rt(r,c),c+=4;on(r.subarray(c,c+1))!=="\0";)t+=on(r.subarray(c,c+1)),c+=1;for(t+=on(r.subarray(c,c+1)),c+=1;on(r.subarray(c,c+1))!=="\0";)n+=on(r.subarray(c,c+1)),c+=1;n+=on(r.subarray(c,c+1)),c+=1}const u=r.subarray(c,r.byteLength);return{schemeIdUri:t,value:n,timeScale:i,presentationTime:a,presentationTimeDelta:s,eventDuration:o,id:l,payload:u}}function Det(r,...e){const t=e.length;let n=8,i=t;for(;i--;)n+=e[i].byteLength;const s=new Uint8Array(n);for(s[0]=n>>24&255,s[1]=n>>16&255,s[2]=n>>8&255,s[3]=n&255,s.set(r,4),i=0,n=8;i<t;i++)s.set(e[i],n),n+=e[i].byteLength;return s}function Let(r,e,t){if(r.byteLength!==16)throw new RangeError("Invalid system id");let n,i;n=0,i=new Uint8Array;let s;n>0?(s=new Uint8Array(4),e.length>0&&new DataView(s.buffer).setUint32(0,e.length,!1)):s=new Uint8Array;const a=new Uint8Array(4);return t&&t.byteLength>0&&new DataView(a.buffer).setUint32(0,t.byteLength,!1),Det([112,115,115,104],new Uint8Array([n,0,0,0]),r,s,i,a,t||new Uint8Array)}function Oet(r){const e=[];if(r instanceof ArrayBuffer){const t=r.byteLength;let n=0;for(;n+32<t;){const i=new DataView(r,n),s=Pet(i);e.push(s),n+=s.size}}return e}function Pet(r){const e=r.getUint32(0),t=r.byteOffset,n=r.byteLength;if(n<e)return{offset:t,size:n};if(r.getUint32(4)!==1886614376)return{offset:t,size:e};const s=r.getUint32(8)>>>24;if(s!==0&&s!==1)return{offset:t,size:e};const a=r.buffer,o=Ga.hexDump(new Uint8Array(a,t+12,16)),l=r.getUint32(28);let c=null,u=null;if(s===0){if(e-32<l||l<22)return{offset:t,size:e};u=new Uint8Array(a,t+32,l)}else if(s===1){if(!l||n<t+32+l*16+16)return{offset:t,size:e};c=[];for(let d=0;d<l;d++)c.push(new Uint8Array(a,t+32+d*16,16))}return{version:s,systemId:o,kids:c,data:u,offset:t,size:e}}let Vb={};class V0{static clearKeyUriToKeyIdMap(){Vb={}}constructor(e,t,n,i=[1],s=null){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=n,this.keyFormatVersions=i,this.iv=s,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&e!=="AES-128"}isSupported(){if(this.method){if(this.method==="AES-128"||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Di.FAIRPLAY:case Di.WIDEVINE:case Di.PLAYREADY:case Di.CLEARKEY:return["ISO-23001-7","SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e){if(!this.encrypted||!this.uri)return null;if(this.method==="AES-128"&&this.uri&&!this.iv){typeof e!="number"&&(this.method==="AES-128"&&!this.iv&&re.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0);const n=Met(e);return new V0(this.method,this.uri,"identity",this.keyFormatVersions,n)}const t=aet(this.uri);if(t)switch(this.keyFormat){case Di.WIDEVINE:this.pssh=t,t.length>=22&&(this.keyId=t.subarray(t.length-22,t.length-6));break;case Di.PLAYREADY:{const n=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=Let(n,null,t),this.keyId=dJ(t);break}default:{let n=t.subarray(0,16);if(n.length!==16){const i=new Uint8Array(16);i.set(n,16-n.length),n=i}this.keyId=n;break}}if(!this.keyId||this.keyId.byteLength!==16){let n=Vb[this.uri];if(!n){const i=Object.keys(Vb).length%Number.MAX_SAFE_INTEGER;n=new Uint8Array(16),new DataView(n.buffer,12,4).setUint32(0,i),Vb[this.uri]=n}this.keyId=n}return this}}function Met(r){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=r>>8*(15-t)&255;return e}const wJ=/\{\$([a-zA-Z0-9-_]+)\}/g;function vB(r){return wJ.test(r)}function Si(r,e,t){if(r.variableList!==null||r.hasVariableRefs)for(let n=t.length;n--;){const i=t[n],s=e[i];s&&(e[i]=O$(r,s))}}function O$(r,e){if(r.variableList!==null||r.hasVariableRefs){const t=r.variableList;return e.replace(wJ,n=>{const i=n.substring(2,n.length-1),s=t?.[i];return s===void 0?(r.playlistParsingError||(r.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${i}"`)),n):s})}return e}function yB(r,e,t){let n=r.variableList;n||(r.variableList=n={});let i,s;if("QUERYPARAM"in e){i=e.QUERYPARAM;try{const a=new self.URL(t).searchParams;if(a.has(i))s=a.get(i);else throw new Error(`"${i}" does not match any query parameter in URI: "${t}"`)}catch(a){r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${a.message}`))}}else i=e.NAME,s=e.VALUE;i in n?r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${i}"`)):n[i]=s||""}function Net(r,e,t){const n=e.IMPORT;if(t&&n in t){let i=r.variableList;i||(r.variableList=i={}),i[n]=t[n]}else r.playlistParsingError||(r.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${n}"`))}function Fd(r=!0){return typeof self>"u"?void 0:(r||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function Fet(r){return typeof self<"u"&&r===self.ManagedMediaSource}const vw={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function Bet(r,e){const t=vw[e];return!!t&&!!t[r.slice(0,4)]}function dR(r,e,t=!0){return!r.split(",").some(n=>!TJ(n,e,t))}function TJ(r,e,t=!0){var n;const i=Fd(t);return(n=i?.isTypeSupported(G0(r,e)))!=null?n:!1}function G0(r,e){return`${e}/mp4;codecs="${r}"`}function bB(r){if(r){const e=r.substring(0,4);return vw.video[e]}return 2}function yw(r){return r.split(",").reduce((e,t)=>{const n=vw.video[t];return n?(n*2+e)/(e?3:2):(vw.audio[t]+e)/(e?2:1)},0)}const hR={};function Uet(r,e=!0){if(hR[r])return hR[r];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"]}[r];for(let n=0;n<t.length;n++)if(TJ(t[n],"audio",e))return hR[r]=t[n],t[n];return r}const Wet=/flac|opus/i;function bw(r,e=!0){return r.replace(Wet,t=>Uet(t.toLowerCase(),e))}function EB(r,e){return r&&r!=="mp4a"?r:e&&e.split(",")[0]}function Het(r){const e=r.split(",");for(let t=0;t<e.length;t++){const n=e[t].split(".");if(n.length>2){let i=n.shift()+".";i+=parseInt(n.shift()).toString(16),i+=("000"+parseInt(n.shift()).toString(16)).slice(-4),e[t]=i}}return e.join(",")}const xB=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,wB=/#EXT-X-MEDIA:(.*)/g,Vet=/^#EXT(?:INF|-X-TARGETDURATION):/m,TB=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#EXT-X-BYTERANGE:*(.+)/.source,/#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/#.*/.source].join("|"),"g"),Get=new RegExp([/#(EXTM3U)/.source,/#EXT-X-(DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class eo{static findGroup(e,t){for(let n=0;n<e.length;n++){const i=e[n];if(i.id===t)return i}}static resolve(e,t){return $P.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return Vet.test(e)}static parseMasterPlaylist(e,t){const n=vB(e),i={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:n},s=[];xB.lastIndex=0;let a;for(;(a=xB.exec(e))!=null;)if(a[1]){var o;const c=new kr(a[1]);Si(i,c,["CODECS","SUPPLEMENTAL-CODECS","ALLOWED-CPC","PATHWAY-ID","STABLE-VARIANT-ID","AUDIO","VIDEO","SUBTITLES","CLOSED-CAPTIONS","NAME"]);const u=O$(i,a[2]),d={attrs:c,bitrate:c.decimalInteger("BANDWIDTH")||c.decimalInteger("AVERAGE-BANDWIDTH"),name:c.NAME,url:eo.resolve(u,t)},h=c.decimalResolution("RESOLUTION");h&&(d.width=h.width,d.height=h.height),qet(c.CODECS,d),(o=d.unknownCodecs)!=null&&o.length||s.push(d),i.levels.push(d)}else if(a[3]){const c=a[3],u=a[4];switch(c){case"SESSION-DATA":{const d=new kr(u);Si(i,d,["DATA-ID","LANGUAGE","VALUE","URI"]);const h=d["DATA-ID"];h&&(i.sessionData===null&&(i.sessionData={}),i.sessionData[h]=d);break}case"SESSION-KEY":{const d=SB(u,t,i);d.encrypted&&d.isSupported()?(i.sessionKeys===null&&(i.sessionKeys=[]),i.sessionKeys.push(d)):re.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${u}"`);break}case"DEFINE":{{const d=new kr(u);Si(i,d,["NAME","VALUE","QUERYPARAM"]),yB(i,d,t)}break}case"CONTENT-STEERING":{const d=new kr(u);Si(i,d,["SERVER-URI","PATHWAY-ID"]),i.contentSteering={uri:eo.resolve(d["SERVER-URI"],t),pathwayId:d["PATHWAY-ID"]||"."};break}case"START":{i.startTimeOffset=AB(u);break}}}const l=s.length>0&&s.length<i.levels.length;return i.levels=l?s:i.levels,i.levels.length===0&&(i.playlistParsingError=new Error("no levels found in manifest")),i}static parseMasterPlaylistMedia(e,t,n){let i;const s={},a=n.levels,o={AUDIO:a.map(c=>({id:c.attrs.AUDIO,audioCodec:c.audioCodec})),SUBTITLES:a.map(c=>({id:c.attrs.SUBTITLES,textCodec:c.textCodec})),"CLOSED-CAPTIONS":[]};let l=0;for(wB.lastIndex=0;(i=wB.exec(e))!==null;){const c=new kr(i[1]),u=c.TYPE;if(u){const d=o[u],h=s[u]||[];s[u]=h,Si(n,c,["URI","GROUP-ID","LANGUAGE","ASSOC-LANGUAGE","STABLE-RENDITION-ID","NAME","INSTREAM-ID","CHARACTERISTICS","CHANNELS"]);const f=c.LANGUAGE,m=c["ASSOC-LANGUAGE"],g=c.CHANNELS,y=c.CHARACTERISTICS,b=c["INSTREAM-ID"],E={attrs:c,bitrate:0,id:l++,groupId:c["GROUP-ID"]||"",name:c.NAME||f||"",type:u,default:c.bool("DEFAULT"),autoselect:c.bool("AUTOSELECT"),forced:c.bool("FORCED"),lang:f,url:c.URI?eo.resolve(c.URI,t):""};if(m&&(E.assocLang=m),g&&(E.channels=g),y&&(E.characteristics=y),b&&(E.instreamId=b),d!=null&&d.length){const w=eo.findGroup(d,E.groupId)||d[0];_B(E,w,"audioCodec"),_B(E,w,"textCodec")}h.push(E)}}return s}static parseLevelPlaylist(e,t,n,i,s,a){const o=new net(t),l=o.fragments;let c=null,u=0,d=0,h=0,f=0,m=null,g=new iR(i,t),y,b,E,w=-1,A=!1,S=null;for(TB.lastIndex=0,o.m3u8=e,o.hasVariableRefs=vB(e);(y=TB.exec(e))!==null;){A&&(A=!1,g=new iR(i,t),g.start=h,g.sn=u,g.cc=f,g.level=n,c&&(g.initSegment=c,g.rawProgramDateTime=c.rawProgramDateTime,c.rawProgramDateTime=null,S&&(g.setByteRange(S),S=null)));const D=y[1];if(D){g.duration=parseFloat(D);const I=(" "+y[2]).slice(1);g.title=I||null,g.tagList.push(I?["INF",D,I]:["INF",D])}else if(y[3]){if(Ve(g.duration)){g.start=h,E&&kB(g,E,o),g.sn=u,g.level=n,g.cc=f,l.push(g);const I=(" "+y[3]).slice(1);g.relurl=O$(o,I),CB(g,m),m=g,h+=g.duration,u++,d=0,A=!0}}else if(y[4]){const I=(" "+y[4]).slice(1);m?g.setByteRange(I,m):g.setByteRange(I)}else if(y[5])g.rawProgramDateTime=(" "+y[5]).slice(1),g.tagList.push(["PROGRAM-DATE-TIME",g.rawProgramDateTime]),w===-1&&(w=l.length);else{if(y=y[0].match(Get),!y){re.warn("No matches on slow regex match for level playlist!");continue}for(b=1;b<y.length&&!(typeof y[b]<"u");b++);const I=(" "+y[b]).slice(1),L=(" "+y[b+1]).slice(1),M=y[b+2]?(" "+y[b+2]).slice(1):"";switch(I){case"PLAYLIST-TYPE":o.type=L.toUpperCase();break;case"MEDIA-SEQUENCE":u=o.startSN=parseInt(L);break;case"SKIP":{const F=new kr(L);Si(o,F,["RECENTLY-REMOVED-DATERANGES"]);const U=F.decimalInteger("SKIPPED-SEGMENTS");if(Ve(U)){o.skippedSegments=U;for(let j=U;j--;)l.unshift(null);u+=U}const W=F.enumeratedString("RECENTLY-REMOVED-DATERANGES");W&&(o.recentlyRemovedDateranges=W.split("	"));break}case"TARGETDURATION":o.targetduration=Math.max(parseInt(L),1);break;case"VERSION":o.version=parseInt(L);break;case"INDEPENDENT-SEGMENTS":case"EXTM3U":break;case"ENDLIST":o.live=!1;break;case"#":(L||M)&&g.tagList.push(M?[L,M]:[L]);break;case"DISCONTINUITY":f++,g.tagList.push(["DIS"]);break;case"GAP":g.gap=!0,g.tagList.push([I]);break;case"BITRATE":g.tagList.push([I,L]);break;case"DATERANGE":{const F=new kr(L);Si(o,F,["ID","CLASS","START-DATE","END-DATE","SCTE35-CMD","SCTE35-OUT","SCTE35-IN"]),Si(o,F,F.clientAttrs);const U=new lJ(F,o.dateRanges[F.ID]);U.isValid||o.skippedSegments?o.dateRanges[U.id]=U:re.warn(`Ignoring invalid DATERANGE tag: "${L}"`),g.tagList.push(["EXT-X-DATERANGE",L]);break}case"DEFINE":{{const F=new kr(L);Si(o,F,["NAME","VALUE","IMPORT","QUERYPARAM"]),"IMPORT"in F?Net(o,F,a):yB(o,F,t)}break}case"DISCONTINUITY-SEQUENCE":f=parseInt(L);break;case"KEY":{const F=SB(L,t,o);if(F.isSupported()){if(F.method==="NONE"){E=void 0;break}E||(E={}),E[F.keyFormat]&&(E=tn({},E)),E[F.keyFormat]=F}else re.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: "${L}"`);break}case"START":o.startTimeOffset=AB(L);break;case"MAP":{const F=new kr(L);if(Si(o,F,["BYTERANGE","URI"]),g.duration){const U=new iR(i,t);RB(U,F,n,E),c=U,g.initSegment=c,c.rawProgramDateTime&&!g.rawProgramDateTime&&(g.rawProgramDateTime=c.rawProgramDateTime)}else{const U=g.byteRangeEndOffset;if(U){const W=g.byteRangeStartOffset;S=`${U-W}@${W}`}else S=null;RB(g,F,n,E),c=g,A=!0}break}case"SERVER-CONTROL":{const F=new kr(L);o.canBlockReload=F.bool("CAN-BLOCK-RELOAD"),o.canSkipUntil=F.optionalFloat("CAN-SKIP-UNTIL",0),o.canSkipDateRanges=o.canSkipUntil>0&&F.bool("CAN-SKIP-DATERANGES"),o.partHoldBack=F.optionalFloat("PART-HOLD-BACK",0),o.holdBack=F.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{const F=new kr(L);o.partTarget=F.decimalFloatingPoint("PART-TARGET");break}case"PART":{let F=o.partList;F||(F=o.partList=[]);const U=d>0?F[F.length-1]:void 0,W=d++,j=new kr(L);Si(o,j,["BYTERANGE","URI"]);const z=new tet(j,g,t,W,U);F.push(z),g.duration+=z.duration;break}case"PRELOAD-HINT":{const F=new kr(L);Si(o,F,["URI"]),o.preloadHint=F;break}case"RENDITION-REPORT":{const F=new kr(L);Si(o,F,["URI"]),o.renditionReports=o.renditionReports||[],o.renditionReports.push(F);break}default:re.warn(`line parsed but not handled: ${y}`);break}}}m&&!m.relurl?(l.pop(),h-=m.duration,o.partList&&(o.fragmentHint=m)):o.partList&&(CB(g,m),g.cc=f,o.fragmentHint=g,E&&kB(g,E,o));const _=l.length,C=l[0],k=l[_-1];if(h+=o.skippedSegments*o.targetduration,h>0&&_&&k){o.averagetargetduration=h/_;const D=k.sn;o.endSN=D!=="initSegment"?D:0,o.live||(k.endList=!0),C&&(o.startCC=C.cc)}else o.endSN=0,o.startCC=0;return o.fragmentHint&&(h+=o.fragmentHint.duration),o.totalduration=h,o.endCC=f,w>0&&jet(l,w),o}}function SB(r,e,t){var n,i;const s=new kr(r);Si(t,s,["KEYFORMAT","KEYFORMATVERSIONS","URI","IV","URI"]);const a=(n=s.METHOD)!=null?n:"",o=s.URI,l=s.hexadecimalInteger("IV"),c=s.KEYFORMATVERSIONS,u=(i=s.KEYFORMAT)!=null?i:"identity";o&&s.IV&&!l&&re.error(`Invalid IV: ${s.IV}`);const d=o?eo.resolve(o,e):"",h=(c||"1").split("/").map(Number).filter(Number.isFinite);return new V0(a,d,u,h,l)}function AB(r){const t=new kr(r).decimalFloatingPoint("TIME-OFFSET");return Ve(t)?t:null}function qet(r,e){let t=(r||"").split(/[ ,]+/).filter(n=>n);["video","audio","text"].forEach(n=>{const i=t.filter(s=>Bet(s,n));i.length&&(e[`${n}Codec`]=i.join(","),t=t.filter(s=>i.indexOf(s)===-1))}),e.unknownCodecs=t}function _B(r,e,t){const n=e[t];n&&(r[t]=n)}function jet(r,e){let t=r[e];for(let n=e;n--;){const i=r[n];if(!i)return;i.programDateTime=t.programDateTime-i.duration*1e3,t=i}}function CB(r,e){r.rawProgramDateTime?r.programDateTime=Date.parse(r.rawProgramDateTime):e!=null&&e.programDateTime&&(r.programDateTime=e.endProgramDateTime),Ve(r.programDateTime)||(r.programDateTime=null,r.rawProgramDateTime=null)}function RB(r,e,t,n){r.relurl=e.URI,e.BYTERANGE&&r.setByteRange(e.BYTERANGE),r.level=t,r.sn="initSegment",n&&(r.levelkeys=n),r.initSegment=null}function kB(r,e,t){r.levelkeys=e;const{encryptedFragments:n}=t;(!n.length||n[n.length-1].levelkeys!==e)&&Object.keys(e).some(i=>e[i].isCommonEncryption)&&n.push(r)}var Lt={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},nt={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};function IB(r){const{type:e}=r;switch(e){case Lt.AUDIO_TRACK:return nt.AUDIO;case Lt.SUBTITLE_TRACK:return nt.SUBTITLE;default:return nt.MAIN}}function fR(r,e){let t=r.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class Ket{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(P.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this)}createInternalLoader(e){const t=this.hls.config,n=t.pLoader,i=t.loader,s=n||i,a=new s(t);return this.loaders[e.type]=a,a}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:n}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Lt.MANIFEST,url:n,deliveryDirectives:null})}onLevelLoading(e,t){const{id:n,level:i,pathwayId:s,url:a,deliveryDirectives:o}=t;this.load({id:n,level:i,pathwayId:s,responseType:"text",type:Lt.LEVEL,url:a,deliveryDirectives:o})}onAudioTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Lt.AUDIO_TRACK,url:s,deliveryDirectives:a})}onSubtitleTrackLoading(e,t){const{id:n,groupId:i,url:s,deliveryDirectives:a}=t;this.load({id:n,groupId:i,level:null,responseType:"text",type:Lt.SUBTITLE_TRACK,url:s,deliveryDirectives:a})}load(e){var t;const n=this.hls.config;let i=this.getInternalLoader(e);if(i){const c=i.context;if(c&&c.url===e.url&&c.level===e.level){re.trace("[playlist-loader]: playlist request ongoing");return}re.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),i.abort()}let s;if(e.type===Lt.MANIFEST?s=n.manifestLoadPolicy.default:s=tn({},n.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),i=this.createInternalLoader(e),Ve((t=e.deliveryDirectives)==null?void 0:t.part)){let c;if(e.type===Lt.LEVEL&&e.level!==null?c=this.hls.levels[e.level].details:e.type===Lt.AUDIO_TRACK&&e.id!==null?c=this.hls.audioTracks[e.id].details:e.type===Lt.SUBTITLE_TRACK&&e.id!==null&&(c=this.hls.subtitleTracks[e.id].details),c){const u=c.partTarget,d=c.targetduration;if(u&&d){const h=Math.max(u*3,d*.8)*1e3;s=tn({},s,{maxTimeToFirstByteMs:Math.min(h,s.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(h,s.maxTimeToFirstByteMs)})}}}const a=s.errorRetry||s.timeoutRetry||{},o={loadPolicy:s,timeout:s.maxLoadTimeMs,maxRetry:a.maxNumRetry||0,retryDelay:a.retryDelayMs||0,maxRetryDelay:a.maxRetryDelayMs||0},l={onSuccess:(c,u,d,h)=>{const f=this.getInternalLoader(d);this.resetInternalLoader(d.type);const m=c.data;if(m.indexOf("#EXTM3U")!==0){this.handleManifestParsingError(c,d,new Error("no EXTM3U delimiter"),h||null,u);return}u.parsing.start=performance.now(),eo.isMediaPlaylist(m)?this.handleTrackOrLevelPlaylist(c,u,d,h||null,f):this.handleMasterPlaylist(c,u,d,h)},onError:(c,u,d,h)=>{this.handleNetworkError(u,d,!1,c,h)},onTimeout:(c,u,d)=>{this.handleNetworkError(u,d,!0,void 0,c)}};i.load(e,o,l)}handleMasterPlaylist(e,t,n,i){const s=this.hls,a=e.data,o=fR(e,n),l=eo.parseMasterPlaylist(a,o);if(l.playlistParsingError){this.handleManifestParsingError(e,n,l.playlistParsingError,i,t);return}const{contentSteering:c,levels:u,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:m}=l;this.variableList=m;const{AUDIO:g=[],SUBTITLES:y,"CLOSED-CAPTIONS":b}=eo.parseMasterPlaylistMedia(a,o,l);g.length&&!g.some(w=>!w.url)&&u[0].audioCodec&&!u[0].attrs.AUDIO&&(re.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),g.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new kr({}),bitrate:0,url:""})),s.trigger(P.MANIFEST_LOADED,{levels:u,audioTracks:g,subtitles:y,captions:b,contentSteering:c,url:o,stats:t,networkDetails:i,sessionData:d,sessionKeys:h,startTimeOffset:f,variableList:m})}handleTrackOrLevelPlaylist(e,t,n,i,s){const a=this.hls,{id:o,level:l,type:c}=n,u=fR(e,n),d=0,h=Ve(l)?l:Ve(o)?o:0,f=IB(n),m=eo.parseLevelPlaylist(e.data,u,h,f,d,this.variableList);if(c===Lt.MANIFEST){const g={attrs:new kr({}),bitrate:0,details:m,name:"",url:u};a.trigger(P.MANIFEST_LOADED,{levels:[g],audioTracks:[],url:u,stats:t,networkDetails:i,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),n.levelDetails=m,this.handlePlaylistLoaded(m,e,t,n,i,s)}handleManifestParsingError(e,t,n,i,s){this.hls.trigger(P.ERROR,{type:at.NETWORK_ERROR,details:ce.MANIFEST_PARSING_ERROR,fatal:t.type===Lt.MANIFEST,url:e.url,err:n,error:n,reason:n.message,response:e,context:t,networkDetails:i,stats:s})}handleNetworkError(e,t,n=!1,i,s){let a=`A network ${n?"timeout":"error"+(i?" (status "+i.code+")":"")} occurred while loading ${e.type}`;e.type===Lt.LEVEL?a+=`: ${e.level} id: ${e.id}`:(e.type===Lt.AUDIO_TRACK||e.type===Lt.SUBTITLE_TRACK)&&(a+=` id: ${e.id} group-id: "${e.groupId}"`);const o=new Error(a);re.warn(`[playlist-loader]: ${a}`);let l=ce.UNKNOWN,c=!1;const u=this.getInternalLoader(e);switch(e.type){case Lt.MANIFEST:l=n?ce.MANIFEST_LOAD_TIMEOUT:ce.MANIFEST_LOAD_ERROR,c=!0;break;case Lt.LEVEL:l=n?ce.LEVEL_LOAD_TIMEOUT:ce.LEVEL_LOAD_ERROR,c=!1;break;case Lt.AUDIO_TRACK:l=n?ce.AUDIO_TRACK_LOAD_TIMEOUT:ce.AUDIO_TRACK_LOAD_ERROR,c=!1;break;case Lt.SUBTITLE_TRACK:l=n?ce.SUBTITLE_TRACK_LOAD_TIMEOUT:ce.SUBTITLE_LOAD_ERROR,c=!1;break}u&&this.resetInternalLoader(e.type);const d={type:at.NETWORK_ERROR,details:l,fatal:c,url:e.url,loader:u,context:e,error:o,networkDetails:t,stats:s};if(i){const h=t?.url||e.url;d.response=Ln({url:h,data:void 0},i)}this.hls.trigger(P.ERROR,d)}handlePlaylistLoaded(e,t,n,i,s,a){const o=this.hls,{type:l,level:c,id:u,groupId:d,deliveryDirectives:h}=i,f=fR(t,i),m=IB(i),g=typeof i.level=="number"&&m===nt.MAIN?c:void 0;if(!e.fragments.length){const b=new Error("No Segments found in Playlist");o.trigger(P.ERROR,{type:at.NETWORK_ERROR,details:ce.LEVEL_EMPTY_ERROR,fatal:!1,url:f,error:b,reason:b.message,response:t,context:i,level:g,parent:m,networkDetails:s,stats:n});return}e.targetduration||(e.playlistParsingError=new Error("Missing Target Duration"));const y=e.playlistParsingError;if(y){o.trigger(P.ERROR,{type:at.NETWORK_ERROR,details:ce.LEVEL_PARSING_ERROR,fatal:!1,url:f,error:y,reason:y.message,response:t,context:i,level:g,parent:m,networkDetails:s,stats:n});return}switch(e.live&&a&&(a.getCacheAge&&(e.ageHeader=a.getCacheAge()||0),(!a.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),l){case Lt.MANIFEST:case Lt.LEVEL:o.trigger(P.LEVEL_LOADED,{details:e,level:g||0,id:u||0,stats:n,networkDetails:s,deliveryDirectives:h});break;case Lt.AUDIO_TRACK:o.trigger(P.AUDIO_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:n,networkDetails:s,deliveryDirectives:h});break;case Lt.SUBTITLE_TRACK:o.trigger(P.SUBTITLE_TRACK_LOADED,{details:e,id:u||0,groupId:d||"",stats:n,networkDetails:s,deliveryDirectives:h});break}}}function SJ(r,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=r,e.dispatchEvent(t)}function AJ(r,e){const t=r.mode;if(t==="disabled"&&(r.mode="hidden"),r.cues&&!r.cues.getCueById(e.id))try{if(r.addCue(e),!r.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(n){re.debug(`[texttrack-utils]: ${n}`);try{const i=new self.TextTrackCue(e.startTime,e.endTime,e.text);i.id=e.id,r.addCue(i)}catch(i){re.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${i}`)}}t==="disabled"&&(r.mode=t)}function xf(r){const e=r.mode;if(e==="disabled"&&(r.mode="hidden"),r.cues)for(let t=r.cues.length;t--;)r.removeCue(r.cues[t]);e==="disabled"&&(r.mode=e)}function P$(r,e,t,n){const i=r.mode;if(i==="disabled"&&(r.mode="hidden"),r.cues&&r.cues.length>0){const s=Yet(r.cues,e,t);for(let a=0;a<s.length;a++)(!n||n(s[a]))&&r.removeCue(s[a])}i==="disabled"&&(r.mode=i)}function zet(r,e){if(e<r[0].startTime)return 0;const t=r.length-1;if(e>r[t].endTime)return-1;let n=0,i=t;for(;n<=i;){const s=Math.floor((i+n)/2);if(e<r[s].startTime)i=s-1;else if(e>r[s].startTime&&n<t)n=s+1;else return s}return r[n].startTime-e<e-r[i].startTime?n:i}function Yet(r,e,t){const n=[],i=zet(r,e);if(i>-1)for(let s=i,a=r.length;s<a;s++){const o=r[s];if(o.startTime>=e&&o.endTime<=t)n.push(o);else if(o.startTime>t)return n}return n}function V1(r){const e=[];for(let t=0;t<r.length;t++){const n=r[t];(n.kind==="subtitles"||n.kind==="captions")&&n.label&&e.push(r[t])}return e}var Js={audioId3:"org.id3",dateRange:"com.apple.quicktime.HLS",emsg:"https://aomedia.org/emsg/ID3"};const Qet=.25;function M$(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function $B(r,e,t,n,i){let s=new r(e,t,"");try{s.value=n,i&&(s.type=i)}catch{s=new r(e,t,JSON.stringify(i?Ln({type:i},n):n))}return s}const Gb=(()=>{const r=M$();try{r&&new r(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();function pR(r,e){return r.getTime()/1e3-e}function Xet(r){return Uint8Array.from(r.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}class Zet{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this)}onMediaAttached(e,t){this.media=t.media}onMediaDetaching(){this.id3Track&&(xf(this.id3Track),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const n=e[t];if(n.kind==="metadata"&&n.label==="id3")return SJ(n,this.media),n}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media)return;const{hls:{config:{enableEmsgMetadataCues:n,enableID3MetadataCues:i}}}=this;if(!n&&!i)return;const{samples:s}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const a=M$();if(a)for(let o=0;o<s.length;o++){const l=s[o].type;if(l===Js.emsg&&!n||!i)continue;const c=pJ(s[o].data);if(c){const u=s[o].pts;let d=u+s[o].duration;d>Gb&&(d=Gb),d-u<=0&&(d=u+Qet);for(let f=0;f<c.length;f++){const m=c[f];if(!fJ(m)){this.updateId3CueEnds(u,l);const g=$B(a,u,d,m,l);g&&this.id3Track.addCue(g)}}}}}updateId3CueEnds(e,t){var n;const i=(n=this.id3Track)==null?void 0:n.cues;if(i)for(let s=i.length;s--;){const a=i[s];a.type===t&&a.startTime<e&&a.endTime===Gb&&(a.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:n,type:i}){const{id3Track:s,hls:a}=this;if(!a)return;const{config:{enableEmsgMetadataCues:o,enableID3MetadataCues:l}}=a;if(s&&(o||l)){let c;i==="audio"?c=u=>u.type===Js.audioId3&&l:i==="video"?c=u=>u.type===Js.emsg&&o:c=u=>u.type===Js.audioId3&&l||u.type===Js.emsg&&o,P$(s,t,n,c)}}onLevelUpdated(e,{details:t}){if(!this.media||!t.hasProgramDateTime||!this.hls.config.enableDateRangeMetadataCues)return;const{dateRangeCuesAppended:n,id3Track:i}=this,{dateRanges:s}=t,a=Object.keys(s);if(i){const u=Object.keys(n).filter(d=>!a.includes(d));for(let d=u.length;d--;){const h=u[d];Object.keys(n[h].cues).forEach(f=>{i.removeCue(n[h].cues[f])}),delete n[h]}}const o=t.fragments[t.fragments.length-1];if(a.length===0||!Ve(o?.programDateTime))return;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=o.programDateTime/1e3-o.start,c=M$();for(let u=0;u<a.length;u++){const d=a[u],h=s[d],f=pR(h.startDate,l),m=n[d],g=m?.cues||{};let y=m?.durationKnown||!1,b=Gb;const E=h.endDate;if(E)b=pR(E,l),y=!0;else if(h.endOnNext&&!y){const A=a.reduce((S,_)=>{if(_!==h.id){const C=s[_];if(C.class===h.class&&C.startDate>h.startDate&&(!S||h.startDate<S.startDate))return C}return S},null);A&&(b=pR(A.startDate,l),y=!0)}const w=Object.keys(h.attr);for(let A=0;A<w.length;A++){const S=w[A];if(!JJe(S))continue;const _=g[S];if(_)y&&!m.durationKnown&&(_.endTime=b);else if(c){let C=h.attr[S];eet(S)&&(C=Xet(C));const k=$B(c,f,b,{key:S,data:C},Js.dateRange);k&&(k.id=d,this.id3Track.addCue(k),g[S]=k)}}n[d]={cues:g,dateRange:h,durationKnown:y}}}}class Jet{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.levelDetails=null,this.currentTime=0,this.stallCount=0,this._latency=null,this.timeupdateHandler=()=>this.timeupdate(),this.hls=e,this.config=e.config,this.registerListeners()}get latency(){return this._latency||0}get maxLatency(){const{config:e,levelDetails:t}=this;return e.liveMaxLatencyDuration!==void 0?e.liveMaxLatencyDuration:t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const{levelDetails:e}=this;if(e===null)return null;const{holdBack:t,partHoldBack:n,targetduration:i}=e,{liveSyncDuration:s,liveSyncDurationCount:a,lowLatencyMode:o}=this.config,l=this.hls.userConfig;let c=o&&n||t;(l.liveSyncDuration||l.liveSyncDurationCount||c===0)&&(c=s!==void 0?s:a*i);const u=i;return c+Math.min(this.stallCount*1,u)}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency,n=this.levelDetails;if(e===null||t===null||n===null)return null;const i=n.edge,s=e-t-this.edgeStalled,a=i-n.totalduration,o=i-(this.config.lowLatencyMode&&n.partTarget||n.targetduration);return Math.min(Math.max(a,s),o)}get drift(){const{levelDetails:e}=this;return e===null?1:e.drift}get edgeStalled(){const{levelDetails:e}=this;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e,levelDetails:t}=this;if(!e||!t)return 0;const n=e.buffered.length;return(n?e.buffered.end(n-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.levelDetails=null,this.hls=this.timeupdateHandler=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.on(P.ERROR,this.onError,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),this.hls.off(P.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.timeupdateHandler)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.timeupdateHandler),this.media=null)}onManifestLoading(){this.levelDetails=null,this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){this.levelDetails=t,t.advanced&&this.timeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.timeupdateHandler)}onError(e,t){var n;t.details===ce.BUFFER_STALLED_ERROR&&(this.stallCount++,(n=this.levelDetails)!=null&&n.live&&re.warn("[playback-rate-controller]: Stall detected, adjusting target latency"))}timeupdate(){const{media:e,levelDetails:t}=this;if(!e||!t)return;this.currentTime=e.currentTime;const n=this.computeLatency();if(n===null)return;this._latency=n;const{lowLatencyMode:i,maxLiveSyncPlaybackRate:s}=this.config;if(!i||s===1||!t.live)return;const a=this.targetLatency;if(a===null)return;const o=n-a,l=Math.min(this.maxLatency,a+t.targetduration);if(o<l&&o>.05&&this.forwardBufferLength>1){const u=Math.min(2,Math.max(1,s)),d=Math.round(2/(1+Math.exp(-.75*o-this.edgeStalled))*20)/20;e.playbackRate=Math.min(u,Math.max(1,d))}else e.playbackRate!==1&&e.playbackRate!==0&&(e.playbackRate=1)}estimateLiveEdge(){const{levelDetails:e}=this;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}const N$=["NONE","TYPE-0","TYPE-1",null];function ett(r){return N$.indexOf(r)>-1}const Ew=["SDR","PQ","HLG"];function ttt(r){return!!r&&Ew.indexOf(r)>-1}var G1={No:"",Yes:"YES",v2:"v2"};function DB(r){const{canSkipUntil:e,canSkipDateRanges:t,age:n}=r,i=n<e/2;return e&&i?t?G1.v2:G1.Yes:G1.No}class LB{constructor(e,t,n){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=n}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class bp{constructor(e){this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(t=>!!t).map(t=>t.substring(0,4)).join(","),this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return OB(this._audioGroups,e)}hasSubtitleGroup(e){return OB(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let n=this._audioGroups;n||(n=this._audioGroups=[]),n.indexOf(t)===-1&&n.push(t)}else if(e==="text"){let n=this._subtitleGroups;n||(n=this._subtitleGroups=[]),n.indexOf(t)===-1&&n.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function OB(r,e){return!e||!r?!1:r.indexOf(e)!==-1}function mR(r,e){const t=e.startPTS;if(Ve(t)){let n=0,i;e.sn>r.sn?(n=t-r.start,i=r):(n=r.start-t,i=e),i.duration!==n&&(i.duration=n)}else e.sn>r.sn?r.cc===e.cc&&r.minEndPTS?e.start=r.start+(r.minEndPTS-r.start):e.start=r.start+r.duration:e.start=Math.max(r.start-e.duration,0)}function _J(r,e,t,n,i,s){n-t<=0&&(re.warn("Fragment should have a positive duration",e),n=t+e.duration,s=i+e.duration);let o=t,l=n;const c=e.startPTS,u=e.endPTS;if(Ve(c)){const y=Math.abs(c-t);Ve(e.deltaPTS)?e.deltaPTS=Math.max(y,e.deltaPTS):e.deltaPTS=y,o=Math.max(t,c),t=Math.min(t,c),i=Math.min(i,e.startDTS),l=Math.min(n,u),n=Math.max(n,u),s=Math.max(s,e.endDTS)}const d=t-e.start;e.start!==0&&(e.start=t),e.duration=n-e.start,e.startPTS=t,e.maxStartPTS=o,e.startDTS=i,e.endPTS=n,e.minEndPTS=l,e.endDTS=s;const h=e.sn;if(!r||h<r.startSN||h>r.endSN)return 0;let f;const m=h-r.startSN,g=r.fragments;for(g[m]=e,f=m;f>0;f--)mR(g[f],g[f-1]);for(f=m;f<g.length-1;f++)mR(g[f],g[f+1]);return r.fragmentHint&&mR(g[g.length-1],r.fragmentHint),r.PTSKnown=r.alignedSliding=!0,d}function rtt(r,e){let t=null;const n=r.fragments;for(let o=n.length-1;o>=0;o--){const l=n[o].initSegment;if(l){t=l;break}}r.fragmentHint&&delete r.fragmentHint.endPTS;let i;stt(r,e,(o,l,c,u)=>{if(e.skippedSegments&&l.cc!==o.cc){const d=o.cc-l.cc;for(let h=c;h<u.length;h++)u[h].cc+=d}Ve(o.startPTS)&&Ve(o.endPTS)&&(l.start=l.startPTS=o.startPTS,l.startDTS=o.startDTS,l.maxStartPTS=o.maxStartPTS,l.endPTS=o.endPTS,l.endDTS=o.endDTS,l.minEndPTS=o.minEndPTS,l.duration=o.endPTS-o.startPTS,l.duration&&(i=l),e.PTSKnown=e.alignedSliding=!0),l.elementaryStreams=o.elementaryStreams,l.loader=o.loader,l.stats=o.stats,o.initSegment&&(l.initSegment=o.initSegment,t=o.initSegment)});const s=e.fragments;if(t&&(e.fragmentHint?s.concat(e.fragmentHint):s).forEach(l=>{var c;l&&(!l.initSegment||l.initSegment.relurl===((c=t)==null?void 0:c.relurl))&&(l.initSegment=t)}),e.skippedSegments){if(e.deltaUpdateFailed=s.some(o=>!o),e.deltaUpdateFailed){re.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let o=e.skippedSegments;o--;)s.shift();e.startSN=s[0].sn}else e.canSkipDateRanges&&(e.dateRanges=ntt(r.dateRanges,e.dateRanges,e.recentlyRemovedDateranges));e.startCC=e.fragments[0].cc,e.endCC=s[s.length-1].cc}itt(r.partList,e.partList,(o,l)=>{l.elementaryStreams=o.elementaryStreams,l.stats=o.stats}),i?_J(e,i,i.startPTS,i.endPTS,i.startDTS,i.endDTS):CJ(r,e),s.length&&(e.totalduration=e.edge-s[0].start),e.driftStartTime=r.driftStartTime,e.driftStart=r.driftStart;const a=e.advancedDateTime;if(e.advanced&&a){const o=e.edge;e.driftStart||(e.driftStartTime=a,e.driftStart=o),e.driftEndTime=a,e.driftEnd=o}else e.driftEndTime=r.driftEndTime,e.driftEnd=r.driftEnd,e.advancedDateTime=r.advancedDateTime}function ntt(r,e,t){const n=tn({},r);return t&&t.forEach(i=>{delete n[i]}),Object.keys(e).forEach(i=>{const s=new lJ(e[i].attr,n[i]);s.isValid?n[i]=s:re.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${JSON.stringify(e[i].attr)}"`)}),n}function itt(r,e,t){if(r&&e){let n=0;for(let i=0,s=r.length;i<=s;i++){const a=r[i],o=e[i+n];a&&o&&a.index===o.index&&a.fragment.sn===o.fragment.sn?t(a,o):n--}}}function stt(r,e,t){const n=e.skippedSegments,i=Math.max(r.startSN,e.startSN)-e.startSN,s=(r.fragmentHint?1:0)+(n?e.endSN:Math.min(r.endSN,e.endSN))-e.startSN,a=e.startSN-r.startSN,o=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,l=r.fragmentHint?r.fragments.concat(r.fragmentHint):r.fragments;for(let c=i;c<=s;c++){const u=l[a+c];let d=o[c];n&&!d&&c<n&&(d=e.fragments[c]=u),u&&d&&t(u,d,c,o)}}function CJ(r,e){const t=e.startSN+e.skippedSegments-r.startSN,n=r.fragments;t<0||t>=n.length||F$(e,n[t].start)}function F$(r,e){if(e){const t=r.fragments;for(let n=r.skippedSegments;n<t.length;n++)t[n].start+=e;r.fragmentHint&&(r.fragmentHint.start+=e)}}function att(r,e=1/0){let t=1e3*r.targetduration;if(r.updated){const n=r.fragments;if(n.length&&t*4>e){const s=n[n.length-1].duration*1e3;s<t&&(t=s)}}else t/=2;return Math.round(t)}function ott(r,e,t){if(!(r!=null&&r.details))return null;const n=r.details;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function PB(r,e,t){var n;return r!=null&&r.details?RJ((n=r.details)==null?void 0:n.partList,e,t):null}function RJ(r,e,t){if(r)for(let n=r.length;n--;){const i=r[n];if(i.index===t&&i.fragment.sn===e)return i}return null}function kJ(r){r.forEach((e,t)=>{const{details:n}=e;n!=null&&n.fragments&&n.fragments.forEach(i=>{i.level=t})})}function xw(r){switch(r.details){case ce.FRAG_LOAD_TIMEOUT:case ce.KEY_LOAD_TIMEOUT:case ce.LEVEL_LOAD_TIMEOUT:case ce.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function MB(r,e){const t=xw(e);return r.default[`${t?"timeout":"error"}Retry`]}function PP(r,e){const t=r.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*r.retryDelayMs,r.maxRetryDelayMs)}function NB(r){return Ln(Ln({},r),{errorRetry:null,timeoutRetry:null})}function ww(r,e,t,n){if(!r)return!1;const i=n?.code,s=e<r.maxNumRetry&&(ltt(i)||!!t);return r.shouldRetry?r.shouldRetry(r,e,t,n,s):s}function ltt(r){return r===0&&navigator.onLine===!1||!!r&&(r<400||r>499)}const IJ={search:function(r,e){let t=0,n=r.length-1,i=null,s=null;for(;t<=n;){i=(t+n)/2|0,s=r[i];const a=e(s);if(a>0)t=i+1;else if(a<0)n=i-1;else return s}return null}};function ctt(r,e,t){if(e===null||!Array.isArray(r)||!r.length||!Ve(e))return null;const n=r[0].programDateTime;if(e<(n||0))return null;const i=r[r.length-1].endProgramDateTime;if(e>=(i||0))return null;t=t||0;for(let s=0;s<r.length;++s){const a=r[s];if(dtt(e,t,a))return a}return null}function Tw(r,e,t=0,n=0,i=.005){let s=null;if(r){s=e[r.sn-e[0].sn+1]||null;const o=r.endDTS-t;o>0&&o<15e-7&&(t+=15e-7)}else t===0&&e[0].start===0&&(s=e[0]);if(s&&((!r||r.level===s.level)&&B$(t,n,s)===0||utt(s,r,Math.min(i,n))))return s;const a=IJ.search(e,B$.bind(null,t,n));return a&&(a!==r||!s)?a:s}function utt(r,e,t){if(e&&e.start===0&&e.level<r.level&&(e.endPTS||0)>0){const n=e.tagList.reduce((i,s)=>(s[0]==="INF"&&(i+=parseFloat(s[1])),i),t);return r.start<=n}return!1}function B$(r=0,e=0,t){if(t.start<=r&&t.start+t.duration>r)return 0;const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-n<=r?1:t.start-n>r&&t.start?-1:0}function dtt(r,e,t){const n=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-n>r}function htt(r,e){return IJ.search(r,t=>t.cc<e?1:t.cc>e?-1:0)}var Un={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Ks={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2};class ftt{constructor(e){this.hls=void 0,this.playlistError=0,this.penalizedRenditions={},this.log=void 0,this.warn=void 0,this.error=void 0,this.hls=e,this.log=re.log.bind(re,"[info]:"),this.warn=re.warn.bind(re,"[warning]:"),this.error=re.error.bind(re,"[error]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.ERROR,this.onError,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.ERROR,this.onError,this),e.off(P.ERROR,this.onErrorOut,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null,this.penalizedRenditions={}}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===nt.MAIN?e.level:this.hls.loadLevel}onManifestLoading(){this.playlistError=0,this.penalizedRenditions={}}onLevelUpdated(){this.playlistError=0}onError(e,t){var n,i;if(t.fatal)return;const s=this.hls,a=t.context;switch(t.details){case ce.FRAG_LOAD_ERROR:case ce.FRAG_LOAD_TIMEOUT:case ce.KEY_LOAD_ERROR:case ce.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case ce.FRAG_PARSING_ERROR:if((n=t.frag)!=null&&n.gap){t.errorAction={action:Un.DoNothing,flags:Ks.None};return}case ce.FRAG_GAP:case ce.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=Un.SendAlternateToPenaltyBox;return}case ce.LEVEL_EMPTY_ERROR:case ce.LEVEL_PARSING_ERROR:{var o,l;const c=t.parent===nt.MAIN?t.level:s.loadLevel;t.details===ce.LEVEL_EMPTY_ERROR&&((o=t.context)!=null&&(l=o.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,c):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,c))}return;case ce.LEVEL_LOAD_ERROR:case ce.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case ce.AUDIO_TRACK_LOAD_ERROR:case ce.AUDIO_TRACK_LOAD_TIMEOUT:case ce.SUBTITLE_LOAD_ERROR:case ce.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const c=s.levels[s.loadLevel];if(c&&(a.type===Lt.AUDIO_TRACK&&c.hasAudioGroup(a.groupId)||a.type===Lt.SUBTITLE_TRACK&&c.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=Un.SendAlternateToPenaltyBox,t.errorAction.flags=Ks.MoveAllAlternatesMatchingHost;return}}return;case ce.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:{const c=s.levels[s.loadLevel],u=c?.attrs["HDCP-LEVEL"];u?t.errorAction={action:Un.SendAlternateToPenaltyBox,flags:Ks.MoveAllAlternatesMatchingHDCP,hdcpLevel:u}:this.keySystemError(t)}return;case ce.BUFFER_ADD_CODEC_ERROR:case ce.REMUX_ALLOC_ERROR:case ce.BUFFER_APPEND_ERROR:t.errorAction=this.getLevelSwitchAction(t,(i=t.level)!=null?i:s.loadLevel);return;case ce.INTERNAL_EXCEPTION:case ce.BUFFER_APPENDING_ERROR:case ce.BUFFER_FULL_ERROR:case ce.LEVEL_SWITCH_ERROR:case ce.BUFFER_STALLED_ERROR:case ce.BUFFER_SEEK_OVER_HOLE:case ce.BUFFER_NUDGE_ON_STALL:t.errorAction={action:Un.DoNothing,flags:Ks.None};return}t.type===at.KEY_SYSTEM_ERROR&&this.keySystemError(t)}keySystemError(e){const t=this.getVariantLevelIndex(e.frag);e.levelRetry=!1,e.errorAction=this.getLevelSwitchAction(e,t)}getPlaylistRetryOrSwitchAction(e,t){const n=this.hls,i=MB(n.config.playlistLoadPolicy,e),s=this.playlistError++;if(ww(i,s,xw(e),e.response))return{action:Un.RetryRequest,flags:Ks.None,retryConfig:i,retryCount:s};const o=this.getLevelSwitchAction(e,t);return i&&(o.retryConfig=i,o.retryCount=s),o}getFragRetryOrSwitchAction(e){const t=this.hls,n=this.getVariantLevelIndex(e.frag),i=t.levels[n],{fragLoadPolicy:s,keyLoadPolicy:a}=t.config,o=MB(e.details.startsWith("key")?a:s,e),l=t.levels.reduce((u,d)=>u+d.fragmentError,0);if(i&&(e.details!==ce.FRAG_GAP&&i.fragmentError++,ww(o,l,xw(e),e.response)))return{action:Un.RetryRequest,flags:Ks.None,retryConfig:o,retryCount:l};const c=this.getLevelSwitchAction(e,n);return o&&(c.retryConfig=o,c.retryCount=l),c}getLevelSwitchAction(e,t){const n=this.hls;t==null&&(t=n.loadLevel);const i=this.hls.levels[t];if(i){var s,a;const c=e.details;i.loadError++,c===ce.BUFFER_APPEND_ERROR&&i.fragmentError++;let u=-1;const{levels:d,loadLevel:h,minAutoLevel:f,maxAutoLevel:m}=n;n.autoLevelEnabled||(n.loadLevel=-1);const g=(s=e.frag)==null?void 0:s.type,b=(g===nt.AUDIO&&c===ce.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(c===ce.BUFFER_ADD_CODEC_ERROR||c===ce.BUFFER_APPEND_ERROR))&&d.some(({audioCodec:_})=>i.audioCodec!==_),w=e.sourceBufferName==="video"&&(c===ce.BUFFER_ADD_CODEC_ERROR||c===ce.BUFFER_APPEND_ERROR)&&d.some(({codecSet:_,audioCodec:C})=>i.codecSet!==_&&i.audioCodec===C),{type:A,groupId:S}=(a=e.context)!=null?a:{};for(let _=d.length;_--;){const C=(_+h)%d.length;if(C!==h&&C>=f&&C<=m&&d[C].loadError===0){var o,l;const k=d[C];if(c===ce.FRAG_GAP&&g===nt.MAIN&&e.frag){const D=d[C].details;if(D){const I=Tw(e.frag,D.fragments,e.frag.start);if(I!=null&&I.gap)continue}}else{if(A===Lt.AUDIO_TRACK&&k.hasAudioGroup(S)||A===Lt.SUBTITLE_TRACK&&k.hasSubtitleGroup(S))continue;if(g===nt.AUDIO&&(o=i.audioGroups)!=null&&o.some(D=>k.hasAudioGroup(D))||g===nt.SUBTITLE&&(l=i.subtitleGroups)!=null&&l.some(D=>k.hasSubtitleGroup(D))||b&&i.audioCodec===k.audioCodec||!b&&i.audioCodec!==k.audioCodec||w&&i.codecSet===k.codecSet)continue}u=C;break}}if(u>-1&&n.loadLevel!==u)return e.levelRetry=!0,this.playlistError=0,{action:Un.SendAlternateToPenaltyBox,flags:Ks.None,nextAutoLevel:u}}return{action:Un.SendAlternateToPenaltyBox,flags:Ks.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var n;switch((n=t.errorAction)==null?void 0:n.action){case Un.DoNothing:break;case Un.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==ce.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,n=e.errorAction;if(!n)return;const{flags:i,hdcpLevel:s,nextAutoLevel:a}=n;switch(i){case Ks.None:this.switchLevel(e,a);break;case Ks.MoveAllAlternatesMatchingHDCP:s&&(t.maxHdcpLevel=N$[N$.indexOf(s)-1],n.resolved=!0),this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}n.resolved||this.switchLevel(e,a)}switchLevel(e,t){t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel)}}class MP{constructor(e,t){this.hls=void 0,this.timer=-1,this.requestScheduled=-1,this.canLoad=!1,this.log=void 0,this.warn=void 0,this.log=re.log.bind(re,`${t}:`),this.warn=re.warn.bind(re,`${t}:`),this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.requestScheduled=-1,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,n){const i=t?.renditionReports;if(i){let s=-1;for(let a=0;a<i.length;a++){const o=i[a];let l;try{l=new self.URL(o.URI,t.url).href}catch(c){re.warn(`Could not construct new URL for Rendition Report: ${c}`),l=o.URI||""}if(l===e){s=a;break}else l===e.substring(0,l.length)&&(s=a)}if(s!==-1){const a=i[s],o=parseInt(a["LAST-MSN"])||t?.lastPartSn;let l=parseInt(a["LAST-PART"])||t?.lastPartIndex;if(this.hls.config.lowLatencyMode){const u=Math.min(t.age-t.partTarget,t.targetduration);l>=0&&u>t.partTarget&&(l+=1)}const c=n&&DB(n);return new LB(o,l>=0?l:void 0,c)}}}loadPlaylist(e){this.requestScheduled===-1&&(this.requestScheduled=self.performance.now())}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}shouldReloadPlaylist(e){return this.timer===-1&&this.requestScheduled===-1&&this.shouldLoadPlaylist(e)}playlistLoaded(e,t,n){const{details:i,stats:s}=t,a=self.performance.now(),o=s.loading.first?Math.max(0,a-s.loading.first):0;if(i.advancedDateTime=Date.now()-o,i.live||n!=null&&n.live){if(i.reloaded(n),n&&this.log(`live playlist ${e} ${i.advanced?"REFRESHED "+i.lastPartSn+"-"+i.lastPartIndex:i.updated?"UPDATED":"MISSED"}`),n&&i.fragments.length>0&&rtt(n,i),!this.canLoad||!i.live)return;let l,c,u;if(i.canBlockReload&&i.endSN&&i.advanced){const y=this.hls.config.lowLatencyMode,b=i.lastPartSn,E=i.endSN,w=i.lastPartIndex,A=w!==-1,S=b===E,_=y?0:w;A?(c=S?E+1:b,u=S?_:w+1):c=E+1;const C=i.age,k=C+i.ageHeader;let D=Math.min(k-i.partTarget,i.targetduration*1.5);if(D>0){if(n&&D>n.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${n.tuneInGoal} to: ${D} with playlist age: ${i.age}`),D=0;else{const I=Math.floor(D/i.targetduration);if(c+=I,u!==void 0){const L=Math.round(D%i.targetduration/i.partTarget);u+=L}this.log(`CDN Tune-in age: ${i.ageHeader}s last advanced ${C.toFixed(2)}s goal: ${D} skip sn ${I} to part ${u}`)}i.tuneInGoal=D}if(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u),y||!S){this.loadPlaylist(l);return}}else(i.canBlockReload||i.canSkipUntil)&&(l=this.getDeliveryDirectives(i,t.deliveryDirectives,c,u));const d=this.hls.mainForwardBufferInfo,h=d?d.end-d.len:0,f=(i.edge-h)*1e3,m=att(i,f);i.updated&&a>this.requestScheduled+m&&(this.requestScheduled=s.loading.start),c!==void 0&&i.canBlockReload?this.requestScheduled=s.loading.first+m-(i.partTarget*1e3||1e3):this.requestScheduled===-1||this.requestScheduled+m<a?this.requestScheduled=a:this.requestScheduled-a<=0&&(this.requestScheduled+=m);let g=this.requestScheduled-a;g=Math.max(0,g),this.log(`reload live playlist ${e} in ${Math.round(g)} ms`),this.timer=self.setTimeout(()=>this.loadPlaylist(l),g)}else this.clearTimer()}getDeliveryDirectives(e,t,n,i){let s=DB(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(n=t.msn,i=t.part,s=G1.No),new LB(n,i,s)}checkRetry(e){const t=e.details,n=xw(e),i=e.errorAction,{action:s,retryCount:a=0,retryConfig:o}=i||{},l=!!i&&!!o&&(s===Un.RetryRequest||!i.resolved&&s===Un.SendAlternateToPenaltyBox);if(l){var c;if(this.requestScheduled=-1,a>=o.maxNumRetry)return!1;if(n&&(c=e.context)!=null&&c.deliveryDirectives)this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const u=PP(o,a);this.timer=self.setTimeout(()=>this.loadPlaylist(),u),this.warn(`Retrying playlist loading ${a+1}/${o.maxNumRetry} after "${t}" in ${u}ms`)}e.levelRetry=!0,i.resolved=!0}return l}}class Lh{constructor(e,t=0,n=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=n}sample(e,t){const n=Math.pow(this.alpha_,e);this.estimate_=t*(1-n)+n*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class ptt{constructor(e,t,n,i=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new Lh(e),this.fast_=new Lh(t),this.defaultTTFB_=i,this.ttfb_=new Lh(e)}update(e,t){const{slow_:n,fast_:i,ttfb_:s}=this;n.halfLife!==e&&(this.slow_=new Lh(e,n.getEstimate(),n.getTotalWeight())),i.halfLife!==t&&(this.fast_=new Lh(t,i.getEstimate(),i.getTotalWeight())),s.halfLife!==e&&(this.ttfb_=new Lh(e,s.getEstimate(),s.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const n=8*t,i=e/1e3,s=n/i;this.fast_.sample(i,s),this.slow_.sample(i,s)}sampleTTFB(e){const t=e/1e3,n=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(n,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}destroy(){}}const $J={supported:!0,configurations:[],decodingInfoResults:[{supported:!0,powerEfficient:!0,smooth:!0}]},FB={};function mtt(r,e,t,n,i,s){const a=r.audioCodec?r.audioGroups:null,o=s?.audioCodec,l=s?.channels,c=l?parseInt(l):o?1/0:2;let u=null;if(a!=null&&a.length)try{a.length===1&&a[0]?u=e.groups[a[0]].channels:u=a.reduce((d,h)=>{if(h){const f=e.groups[h];if(!f)throw new Error(`Audio track group ${h} not found`);Object.keys(f.channels).forEach(m=>{d[m]=(d[m]||0)+f.channels[m]})}return d},{2:0})}catch{return!0}return r.videoCodec!==void 0&&(r.width>1920&&r.height>1088||r.height>1920&&r.width>1088||r.frameRate>Math.max(n,30)||r.videoRange!=="SDR"&&r.videoRange!==t||r.bitrate>Math.max(i,8e6))||!!u&&Ve(c)&&Object.keys(u).some(d=>parseInt(d)>c)}function gtt(r,e,t){const n=r.videoCodec,i=r.audioCodec;if(!n||!i||!t)return Promise.resolve($J);const s={width:r.width,height:r.height,bitrate:Math.ceil(Math.max(r.bitrate*.9,r.averageBitrate)),framerate:r.frameRate||30},a=r.videoRange;a!=="SDR"&&(s.transferFunction=a.toLowerCase());const o=n.split(",").map(l=>({type:"media-source",video:Ln(Ln({},s),{},{contentType:G0(l,"video")})}));return i&&r.audioGroups&&r.audioGroups.forEach(l=>{var c;l&&((c=e.groups[l])==null||c.tracks.forEach(u=>{if(u.groupId===l){const d=u.channels||"",h=parseFloat(d);Ve(h)&&h>2&&o.push.apply(o,i.split(",").map(f=>({type:"media-source",audio:{contentType:G0(f,"audio"),channels:""+h}})))}}))}),Promise.all(o.map(l=>{const c=vtt(l);return FB[c]||(FB[c]=t.decodingInfo(l))})).then(l=>({supported:!l.some(c=>!c.supported),configurations:o,decodingInfoResults:l})).catch(l=>({supported:!1,configurations:o,decodingInfoResults:[],error:l}))}function vtt(r){const{audio:e,video:t}=r,n=t||e;if(n){const i=n.contentType.split('"')[1];if(t)return`r${t.height}x${t.width}f${Math.ceil(t.framerate)}${t.transferFunction||"sd"}_${i}_${Math.ceil(t.bitrate/1e5)}`;if(e)return`c${e.channels}${e.spatialRendering?"s":"n"}_${i}`}return""}function ytt(){if(typeof matchMedia=="function"){const r=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(r.media!==e.media)return r.matches===!0}return!1}function btt(r,e){let t=!1,n=[];return r&&(t=r!=="SDR",n=[r]),e&&(n=e.allowedVideoRanges||Ew.slice(0),t=e.preferHDR!==void 0?e.preferHDR:ytt(),t?n=n.filter(i=>i!=="SDR"):n=["SDR"]),{preferHDR:t,allowedVideoRanges:n}}function Ett(r,e,t,n,i){const s=Object.keys(r),a=n?.channels,o=n?.audioCodec,l=a&&parseInt(a)===2;let c=!0,u=!1,d=1/0,h=1/0,f=1/0,m=0,g=[];const{preferHDR:y,allowedVideoRanges:b}=btt(e,i);for(let S=s.length;S--;){const _=r[s[S]];c=_.channels[2]>0,d=Math.min(d,_.minHeight),h=Math.min(h,_.minFramerate),f=Math.min(f,_.minBitrate);const C=b.filter(k=>_.videoRanges[k]>0);C.length>0&&(u=!0,g=C)}d=Ve(d)?d:0,h=Ve(h)?h:0;const E=Math.max(1080,d),w=Math.max(30,h);return f=Ve(f)?f:t,t=Math.max(f,t),u||(e=void 0,g=[]),{codecSet:s.reduce((S,_)=>{const C=r[_];if(_===S)return S;if(C.minBitrate>t)return Vo(_,`min bitrate of ${C.minBitrate} > current estimate of ${t}`),S;if(!C.hasDefaultAudio)return Vo(_,"no renditions with default or auto-select sound found"),S;if(o&&_.indexOf(o.substring(0,4))%5!==0)return Vo(_,`audio codec preference "${o}" not found`),S;if(a&&!l){if(!C.channels[a])return Vo(_,`no renditions with ${a} channel sound found (channels options: ${Object.keys(C.channels)})`),S}else if((!o||l)&&c&&C.channels[2]===0)return Vo(_,"no renditions with stereo sound found"),S;return C.minHeight>E?(Vo(_,`min resolution of ${C.minHeight} > maximum of ${E}`),S):C.minFramerate>w?(Vo(_,`min framerate of ${C.minFramerate} > maximum of ${w}`),S):g.some(k=>C.videoRanges[k]>0)?C.maxScore<m?(Vo(_,`max score of ${C.maxScore} < selected max of ${m}`),S):S&&(yw(_)>=yw(S)||C.fragmentError>r[S].fragmentError)?S:(m=C.maxScore,_):(Vo(_,`no variants with VIDEO-RANGE of ${JSON.stringify(g)} found`),S)},void 0),videoRanges:g,preferHDR:y,minFramerate:h,minBitrate:f}}function Vo(r,e){re.log(`[abr] start candidates with "${r}" ignored because ${e}`)}function xtt(r){return r.reduce((e,t)=>{let n=e.groups[t.groupId];n||(n=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),n.tracks.push(t);const i=t.channels||"2";return n.channels[i]=(n.channels[i]||0)+1,n.hasDefault=n.hasDefault||t.default,n.hasAutoSelect=n.hasAutoSelect||t.autoselect,n.hasDefault&&(e.hasDefaultAudio=!0),n.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function wtt(r,e,t,n){return r.slice(t,n+1).reduce((i,s)=>{if(!s.codecSet)return i;const a=s.audioGroups;let o=i[s.codecSet];o||(i[s.codecSet]=o={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!a,fragmentError:0}),o.minBitrate=Math.min(o.minBitrate,s.bitrate);const l=Math.min(s.height,s.width);return o.minHeight=Math.min(o.minHeight,l),o.minFramerate=Math.min(o.minFramerate,s.frameRate),o.maxScore=Math.max(o.maxScore,s.score),o.fragmentError+=s.fragmentError,o.videoRanges[s.videoRange]=(o.videoRanges[s.videoRange]||0)+1,a&&a.forEach(c=>{if(!c)return;const u=e.groups[c];u&&(o.hasDefaultAudio=o.hasDefaultAudio||e.hasDefaultAudio?u.hasDefault:u.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(u.channels).forEach(d=>{o.channels[d]=(o.channels[d]||0)+u.channels[d]}))}),i},{})}function to(r,e,t){if("attrs"in r){const n=e.indexOf(r);if(n!==-1)return n}for(let n=0;n<e.length;n++){const i=e[n];if(bd(r,i,t))return n}return-1}function bd(r,e,t){const{groupId:n,name:i,lang:s,assocLang:a,default:o}=r,l=r.forced;return(n===void 0||e.groupId===n)&&(i===void 0||e.name===i)&&(s===void 0||e.lang===s)&&(s===void 0||e.assocLang===a)&&(o===void 0||e.default===o)&&(l===void 0||e.forced===l)&&(!("characteristics"in r)||Ttt(r.characteristics||"",e.characteristics))&&(t===void 0||t(r,e))}function Ttt(r,e=""){const t=r.split(","),n=e.split(",");return t.length===n.length&&!t.some(i=>n.indexOf(i)===-1)}function _u(r,e){const{audioCodec:t,channels:n}=r;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(n===void 0||n===(e.channels||"2"))}function Stt(r,e,t,n,i){const s=e[n],o=e.reduce((h,f,m)=>{const g=f.uri;return(h[g]||(h[g]=[])).push(m),h},{})[s.uri];o.length>1&&(n=Math.max.apply(Math,o));const l=s.videoRange,c=s.frameRate,u=s.codecSet.substring(0,4),d=BB(e,n,h=>{if(h.videoRange!==l||h.frameRate!==c||h.codecSet.substring(0,4)!==u)return!1;const f=h.audioGroups,m=t.filter(g=>!f||f.indexOf(g.groupId)!==-1);return to(r,m,i)>-1});return d>-1?d:BB(e,n,h=>{const f=h.audioGroups,m=t.filter(g=>!f||f.indexOf(g.groupId)!==-1);return to(r,m,i)>-1})}function BB(r,e,t){for(let n=e;n>-1;n--)if(t(r[n]))return n;for(let n=e+1;n<r.length;n++)if(t(r[n]))return n;return-1}class Att{constructor(e){this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.bwEstimator=void 0,this._abandonRulesCheck=()=>{const{fragCurrent:t,partCurrent:n,hls:i}=this,{autoLevelEnabled:s,media:a}=i;if(!t||!a)return;const o=performance.now(),l=n?n.stats:t.stats,c=n?n.duration:t.duration,u=o-l.loading.start,d=i.minAutoLevel;if(l.aborted||l.loaded&&l.loaded===l.total||t.level<=d){this.clearTimer(),this._nextAutoLevel=-1;return}if(!s||a.paused||!a.playbackRate||!a.readyState)return;const h=i.mainForwardBufferInfo;if(h===null)return;const f=this.bwEstimator.getEstimateTTFB(),m=Math.abs(a.playbackRate);if(u<=Math.max(f,1e3*(c/(m*2))))return;const g=h.len/m,y=l.loading.first?l.loading.first-l.loading.start:-1,b=l.loaded&&y>-1,E=this.getBwEstimate(),w=i.levels,A=w[t.level],S=l.total||Math.max(l.loaded,Math.round(c*A.averageBitrate/8));let _=b?u-y:u;_<1&&b&&(_=Math.min(u,l.loaded*8/E));const C=b?l.loaded*1e3/_:0,k=C?(S-l.loaded)/C:S*8/E+f/1e3;if(k<=g)return;const D=C?C*8:E;let I=Number.POSITIVE_INFINITY,L;for(L=t.level-1;L>d;L--){const F=w[L].maxBitrate;if(I=this.getTimeToLoadFrag(f/1e3,D,c*F,!w[L].details),I<g)break}if(I>=k||I>c*10)return;i.nextLoadLevel=i.nextAutoLevel=L,b?this.bwEstimator.sample(u-Math.min(f,y),l.loaded):this.bwEstimator.sampleTTFB(u);const M=w[L].maxBitrate;this.getBwEstimate()*this.hls.config.abrBandWidthUpFactor>M&&this.resetEstimator(M),this.clearTimer(),re.warn(`[abr] Fragment ${t.sn}${n?" part "+n.index:""} of level ${t.level} is loading too slowly;
      Time to underbuffer: ${g.toFixed(3)} s
      Estimated load time for current fragment: ${k.toFixed(3)} s
      Estimated load time for down switch fragment: ${I.toFixed(3)} s
      TTFB estimate: ${y|0} ms
      Current BW estimate: ${Ve(E)?E|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${L} @ ${M|0} bps`),i.trigger(P.FRAG_LOAD_EMERGENCY_ABORTED,{frag:t,part:n,stats:l})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(re.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new ptt(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(P.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const n=t.frag;if(!this.ignoreFragment(n)){if(!n.bitrateTest){var i;this.fragCurrent=n,this.partCurrent=(i=t.part)!=null?i:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case ce.BUFFER_ADD_CODEC_ERROR:case ce.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case ce.FRAG_LOAD_TIMEOUT:{const n=t.frag,{fragCurrent:i,partCurrent:s}=this;if(n&&i&&n.sn===i.sn&&n.level===i.level){const a=performance.now(),o=s?s.stats:n.stats,l=a-o.loading.start,c=o.loading.first?o.loading.first-o.loading.start:-1;if(o.loaded&&c>-1){const d=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(l-Math.min(d,c),o.loaded)}else this.bwEstimator.sampleTTFB(l)}break}}}getTimeToLoadFrag(e,t,n,i){const s=e+n/t,a=i?this.lastLevelLoadSec:0;return s+a}onLevelLoaded(e,t){const n=this.hls.config,{loading:i}=t.stats,s=i.end-i.start;Ve(s)&&(this.lastLevelLoadSec=s/1e3),t.details.live?this.bwEstimator.update(n.abrEwmaSlowLive,n.abrEwmaFastLive):this.bwEstimator.update(n.abrEwmaSlowVoD,n.abrEwmaFastVoD)}onFragLoaded(e,{frag:t,part:n}){const i=n?n.stats:t.stats;if(t.type===nt.MAIN&&this.bwEstimator.sampleTTFB(i.loading.first-i.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const s=n?n.duration:t.duration,a=this.hls.levels[t.level],o=(a.loaded?a.loaded.bytes:0)+i.loaded,l=(a.loaded?a.loaded.duration:0)+s;a.loaded={bytes:o,duration:l},a.realBitrate=Math.round(8*o/l)}if(t.bitrateTest){const s={stats:i,frag:t,part:n,id:t.type};this.onFragBuffered(P.FRAG_BUFFERED,s),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:n,part:i}=t,s=i!=null&&i.stats.loaded?i.stats:n.stats;if(s.aborted||this.ignoreFragment(n))return;const a=s.parsing.end-s.loading.start-Math.min(s.loading.first-s.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(a,s.loaded),s.bwEstimate=this.getBwEstimate(),n.bitrateTest?this.bitrateTestDelay=a/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==nt.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,n=this.getBwEstimate(),i=this.hls.config.maxStarvationDelay,s=this.findBestLevel(n,t,e,0,i,1,1);if(s>-1)return s;const a=this.hls.firstLevel,o=Math.min(Math.max(a,t),e);return re.warn(`[abr] Could not find best starting auto level. Defaulting to first in playlist ${a} clamped to ${o}`),o}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,n=this.bwEstimator.canEstimate(),i=this.lastLoadedFragLevel>-1;if(e!==-1&&(!n||!i||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const s=n&&i?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const a=this.hls.levels;if(a.length>Math.max(e,s)&&a[e].loadError<=a[s].loadError)return e}return this._nextAutoLevel=s,this.nextAutoLevelKey=this.getAutoLevelKey(),s}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:n}=this,{maxAutoLevel:i,config:s,minAutoLevel:a}=n,o=t?t.duration:e?e.duration:0,l=this.getBwEstimate(),c=this.getStarvationDelay();let u=s.abrBandWidthFactor,d=s.abrBandWidthUpFactor;if(c){const y=this.findBestLevel(l,a,i,c,0,u,d);if(y>=0)return y}let h=o?Math.min(o,s.maxStarvationDelay):s.maxStarvationDelay;if(!c){const y=this.bitrateTestDelay;y&&(h=(o?Math.min(o,s.maxLoadingDelay):s.maxLoadingDelay)-y,re.info(`[abr] bitrate test took ${Math.round(1e3*y)}ms, set first fragment max fetchDuration to ${Math.round(1e3*h)} ms`),u=d=1)}const f=this.findBestLevel(l,a,i,c,h,u,d);if(re.info(`[abr] ${c?"rebuffering expected":"buffer is empty"}, optimal quality level ${f}`),f>-1)return f;const m=n.levels[a],g=n.levels[n.loadLevel];return m?.bitrate<g?.bitrate?a:n.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const n=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,i=e.mainForwardBufferInfo;return(i?i.len:0)/n}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,n,i,s,a,o){var l;const c=i+s,u=this.lastLoadedFragLevel,d=u===-1?this.hls.firstLevel:u,{fragCurrent:h,partCurrent:f}=this,{levels:m,allAudioTracks:g,loadLevel:y,config:b}=this.hls;if(m.length===1)return 0;const E=m[d],w=!!(E!=null&&(l=E.details)!=null&&l.live),A=y===-1||u===-1;let S,_="SDR",C=E?.frameRate||0;const{audioPreference:k,videoPreference:D}=b,I=this.audioTracksByGroup||(this.audioTracksByGroup=xtt(g));if(A){if(this.firstSelection!==-1)return this.firstSelection;const W=this.codecTiers||(this.codecTiers=wtt(m,I,t,n)),j=Ett(W,_,e,k,D),{codecSet:z,videoRanges:Q,minFramerate:V,minBitrate:Y,preferHDR:J}=j;S=z,_=J?Q[Q.length-1]:Q[0],C=V,e=Math.max(e,Y),re.log(`[abr] picked start tier ${JSON.stringify(j)}`)}else S=E?.codecSet,_=E?.videoRange;const L=f?f.duration:h?h.duration:0,M=this.bwEstimator.getEstimateTTFB()/1e3,F=[];for(let W=n;W>=t;W--){var U;const j=m[W],z=W>d;if(!j)continue;if(b.useMediaCapabilities&&!j.supportedResult&&!j.supportedPromise){const ge=navigator.mediaCapabilities;typeof ge?.decodingInfo=="function"&&mtt(j,I,_,C,e,k)?(j.supportedPromise=gtt(j,I,ge),j.supportedPromise.then(ae=>{if(!this.hls)return;j.supportedResult=ae;const ie=this.hls.levels,ee=ie.indexOf(j);ae.error?re.warn(`[abr] MediaCapabilities decodingInfo error: "${ae.error}" for level ${ee} ${JSON.stringify(ae)}`):ae.supported||(re.warn(`[abr] Unsupported MediaCapabilities decodingInfo result for level ${ee} ${JSON.stringify(ae)}`),ee>-1&&ie.length>1&&(re.log(`[abr] Removing unsupported level ${ee}`),this.hls.removeLevel(ee)))})):j.supportedResult=$J}if(S&&j.codecSet!==S||_&&j.videoRange!==_||z&&C>j.frameRate||!z&&C>0&&C<j.frameRate||j.supportedResult&&!((U=j.supportedResult.decodingInfoResults)!=null&&U[0].smooth)){F.push(W);continue}const Q=j.details,V=(f?Q?.partTarget:Q?.averagetargetduration)||L;let Y;z?Y=o*e:Y=a*e;const J=L&&i>=L*2&&s===0?m[W].averageBitrate:m[W].maxBitrate,ue=this.getTimeToLoadFrag(M,Y,J*V,Q===void 0);if(Y>=J&&(W===u||j.loadError===0&&j.fragmentError===0)&&(ue<=M||!Ve(ue)||w&&!this.bitrateTestDelay||ue<c)){const ge=this.forcedAutoLevel;return W!==y&&(ge===-1||ge!==y)&&(F.length&&re.trace(`[abr] Skipped level(s) ${F.join(",")} of ${n} max with CODECS and VIDEO-RANGE:"${m[F[0]].codecs}" ${m[F[0]].videoRange}; not compatible with "${E.codecs}" ${_}`),re.info(`[abr] switch candidate:${d}->${W} adjustedbw(${Math.round(Y)})-bitrate=${Math.round(Y-J)} ttfb:${M.toFixed(1)} avgDuration:${V.toFixed(1)} maxFetchDuration:${c.toFixed(1)} fetchDuration:${ue.toFixed(1)} firstSelection:${A} codecSet:${S} videoRange:${_} hls.loadLevel:${y}`)),A&&(this.firstSelection=W),W}}return-1}set nextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:n}=this.hls,i=Math.min(Math.max(e,n),t);this._nextAutoLevel!==i&&(this.nextAutoLevelKey="",this._nextAutoLevel=i)}}class _tt{constructor(){this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}var _n={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class Ctt{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.BUFFER_APPENDED,this.onBufferAppended,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.BUFFER_APPENDED,this.onBufferAppended,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this)}destroy(){this._unregisterListeners(),this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const n=this.activePartLists[t];if(n)for(let i=n.length;i--;){const s=n[i];if(!s)break;const a=s.end;if(s.start<=e&&a!==null&&e<=a)return s}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){const{fragments:n}=this,i=Object.keys(n);for(let s=i.length;s--;){const a=n[i[s]];if(a?.body.type===t&&a.buffered){const o=a.body;if(o.start<=e&&e<=o.end)return o}}return null}detectEvictedFragments(e,t,n,i){this.timeRanges&&(this.timeRanges[e]=t);const s=i?.fragment.sn||-1;Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o||s>=o.body.sn)return;if(!o.buffered&&!o.loaded){o.body.type===n&&this.removeFragment(o.body);return}const l=o.range[e];l&&l.time.some(c=>{const u=!this.isTimeBuffered(c.startPTS,c.endPTS,t);return u&&this.removeFragment(o.body),u})})}detectPartialFragments(e){const t=this.timeRanges,{frag:n,part:i}=e;if(!t||n.sn==="initSegment")return;const s=Oh(n),a=this.fragments[s];if(!a||a.buffered&&n.gap)return;const o=!n.relurl;Object.keys(t).forEach(l=>{const c=n.elementaryStreams[l];if(!c)return;const u=t[l],d=o||c.partial===!0;a.range[l]=this.getBufferedTimes(n,i,d,u)}),a.loaded=null,Object.keys(a.range).length?(a.buffered=!0,(a.body.endList=n.endList||a.body.endList)&&(this.endListFragments[a.body.type]=a),qb(a)||this.removeParts(n.sn-1,n.type)):this.removeFragment(a.body)}removeParts(e,t){const n=this.activePartLists[t];n&&(this.activePartLists[t]=n.filter(i=>i.fragment.sn>=e))}fragBuffered(e,t){const n=Oh(e);let i=this.fragments[n];!i&&t&&(i=this.fragments[n]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),i&&(i.loaded=null,i.buffered=!0)}getBufferedTimes(e,t,n,i){const s={time:[],partial:n},a=e.start,o=e.end,l=e.minEndPTS||o,c=e.maxStartPTS||a;for(let u=0;u<i.length;u++){const d=i.start(u)-this.bufferPadding,h=i.end(u)+this.bufferPadding;if(c>=d&&l<=h){s.time.push({startPTS:Math.max(a,i.start(u)),endPTS:Math.min(o,i.end(u))});break}else if(a<h&&o>d){const f=Math.max(a,i.start(u)),m=Math.min(o,i.end(u));m>f&&(s.partial=!0,s.time.push({startPTS:f,endPTS:m}))}else if(o<=d)break}return s}getPartialFragment(e){let t=null,n,i,s,a=0;const{bufferPadding:o,fragments:l}=this;return Object.keys(l).forEach(c=>{const u=l[c];u&&qb(u)&&(i=u.body.start-o,s=u.body.end+o,e>=i&&e<=s&&(n=Math.min(e-i,s-e),a<=n&&(t=u.body,a=n)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||qb(t))}getState(e){const t=Oh(e),n=this.fragments[t];return n?n.buffered?qb(n)?_n.PARTIAL:_n.OK:_n.APPENDING:_n.NOT_LOADED}isTimeBuffered(e,t,n){let i,s;for(let a=0;a<n.length;a++){if(i=n.start(a)-this.bufferPadding,s=n.end(a)+this.bufferPadding,e>=i&&t<=s)return!0;if(t<=i)return!1}return!1}onFragLoaded(e,t){const{frag:n,part:i}=t;if(n.sn==="initSegment"||n.bitrateTest)return;const s=i?null:t,a=Oh(n);this.fragments[a]={body:n,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:n,part:i,timeRanges:s}=t;if(n.sn==="initSegment")return;const a=n.type;if(i){let o=this.activePartLists[a];o||(this.activePartLists[a]=o=[]),o.push(i)}this.timeRanges=s,Object.keys(s).forEach(o=>{const l=s[o];this.detectEvictedFragments(o,l,a,i)})}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=Oh(e);return!!this.fragments[t]}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,n,i,s){i&&!this.hasGaps||Object.keys(this.fragments).forEach(a=>{const o=this.fragments[a];if(!o)return;const l=o.body;l.type!==n||i&&!l.gap||l.start<t&&l.end>e&&(o.buffered||s)&&this.removeFragment(l)})}removeFragment(e){const t=Oh(e);e.stats.loaded=0,e.clearElementaryStreamInfo();const n=this.activePartLists[e.type];if(n){const i=e.sn;this.activePartLists[e.type]=n.filter(s=>s.fragment.sn!==i)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1}}function qb(r){var e,t,n;return r.buffered&&(r.body.gap||((e=r.range.video)==null?void 0:e.partial)||((t=r.range.audio)==null?void 0:t.partial)||((n=r.range.audiovideo)==null?void 0:n.partial))}function Oh(r){return`${r.type}_${r.level}_${r.sn}`}const Rtt={length:0,start:()=>0,end:()=>0};class ur{static isBuffered(e,t){try{if(e){const n=ur.getBuffered(e);for(let i=0;i<n.length;i++)if(t>=n.start(i)&&t<=n.end(i))return!0}}catch{}return!1}static bufferInfo(e,t,n){try{if(e){const i=ur.getBuffered(e),s=[];let a;for(a=0;a<i.length;a++)s.push({start:i.start(a),end:i.end(a)});return this.bufferedInfo(s,t,n)}}catch{}return{len:0,start:t,end:t,nextStart:void 0}}static bufferedInfo(e,t,n){t=Math.max(0,t),e.sort(function(c,u){const d=c.start-u.start;return d||u.end-c.end});let i=[];if(n)for(let c=0;c<e.length;c++){const u=i.length;if(u){const d=i[u-1].end;e[c].start-d<n?e[c].end>d&&(i[u-1].end=e[c].end):i.push(e[c])}else i.push(e[c])}else i=e;let s=0,a,o=t,l=t;for(let c=0;c<i.length;c++){const u=i[c].start,d=i[c].end;if(t+n>=u&&t<d)o=u,l=d,s=l-t;else if(t+n<u){a=u;break}}return{len:s,start:o||0,end:l||0,nextStart:a}}static getBuffered(e){try{return e.buffered}catch(t){return re.log("failed to get media.buffered",t),Rtt}}}class NP{constructor(e,t,n,i=0,s=-1,a=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=jb(),this.buffering={audio:jb(),video:jb(),audiovideo:jb()},this.level=e,this.sn=t,this.id=n,this.size=i,this.part=s,this.partial=a}}function jb(){return{start:0,executeStart:0,executeEnd:0,end:0}}function q1(r,e){for(let n=0,i=r.length;n<i;n++){var t;if(((t=r[n])==null?void 0:t.cc)===e)return r[n]}return null}function ktt(r,e,t){return!!(e&&(t.endCC>t.startCC||r&&r.cc<t.startCC))}function Itt(r,e){const t=r.fragments,n=e.fragments;if(!n.length||!t.length){re.log("No fragments to align");return}const i=q1(t,n[0].cc);if(!i||i&&!i.startPTS){re.log("No frag in previous level to align on");return}return i}function UB(r,e){if(r){const t=r.start+e;r.start=r.startPTS=t,r.endPTS=t+r.duration}}function DJ(r,e){const t=e.fragments;for(let n=0,i=t.length;n<i;n++)UB(t[n],r);e.fragmentHint&&UB(e.fragmentHint,r),e.alignedSliding=!0}function $tt(r,e,t){e&&(Dtt(r,t,e),!t.alignedSliding&&e&&Sw(t,e),!t.alignedSliding&&e&&!t.skippedSegments&&CJ(e,t))}function Dtt(r,e,t){if(ktt(r,t,e)){const n=Itt(t,e);n&&Ve(n.start)&&(re.log(`Adjusting PTS using last level due to CC increase within current level ${e.url}`),DJ(n.start,e))}}function Sw(r,e){if(!r.hasProgramDateTime||!e.hasProgramDateTime)return;const t=r.fragments,n=e.fragments;if(!t.length||!n.length)return;let i,s;const a=Math.min(e.endCC,r.endCC);e.startCC<a&&r.startCC<a&&(i=q1(n,a),s=q1(t,a)),(!i||!s)&&(i=n[Math.floor(n.length/2)],s=q1(t,i.cc)||t[Math.floor(t.length/2)]);const o=i.programDateTime,l=s.programDateTime;if(!o||!l)return;const c=(l-o)/1e3-(s.start-i.start);DJ(c,r)}const WB=Math.pow(2,17);class Ltt{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const n=e.url;if(!n)return Promise.reject(new el({type:at.NETWORK_ERROR,details:ce.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${n?"part list":"url"}`),networkDetails:null}));this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(f=>f[0]==="GAP")){l(VB(e));return}else e.gap=!1;const c=this.loader=e.loader=s?new s(i):new a(i),u=HB(e),d=NB(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:WB};e.stats=c.stats,c.load(u,h,{onSuccess:(f,m,g,y)=>{this.resetLoader(e,c);let b=f.data;g.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(b.slice(0,16)),b=b.slice(16)),o({frag:e,part:null,payload:b,networkDetails:y})},onError:(f,m,g,y)=>{this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Ln({url:n,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:g,stats:y}))},onAbort:(f,m,g)=>{this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:g,stats:f}))},onTimeout:(f,m,g)=>{this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:f}))},onProgress:(f,m,g,y)=>{t&&t({frag:e,part:null,payload:g,networkDetails:y})}})})}loadPart(e,t,n){this.abort();const i=this.config,s=i.fLoader,a=i.loader;return new Promise((o,l)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){l(VB(e,t));return}const c=this.loader=e.loader=s?new s(i):new a(i),u=HB(e,t),d=NB(i.fragLoadPolicy.default),h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:WB};t.stats=c.stats,c.load(u,h,{onSuccess:(f,m,g,y)=>{this.resetLoader(e,c),this.updateStatsFromPart(e,t);const b={frag:e,part:t,payload:f.data,networkDetails:y};n(b),o(b)},onError:(f,m,g,y)=>{this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Ln({url:u.url,data:void 0},f),error:new Error(`HTTP Error ${f.code} ${f.text}`),networkDetails:g,stats:y}))},onAbort:(f,m,g)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:g,stats:f}))},onTimeout:(f,m,g)=>{this.resetLoader(e,c),l(new el({type:at.NETWORK_ERROR,details:ce.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${h.timeout}ms`),networkDetails:g,stats:f}))}})})}updateStatsFromPart(e,t){const n=e.stats,i=t.stats,s=i.total;if(n.loaded+=i.loaded,s){const l=Math.round(e.duration/t.duration),c=Math.min(Math.round(n.loaded/s),l),d=(l-c)*Math.round(n.loaded/c);n.total=n.loaded+d}else n.total=Math.max(n.loaded,n.total);const a=n.loading,o=i.loading;a.start?a.first+=o.first-o.start:(a.start=o.start,a.first=o.first),a.end=o.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function HB(r,e=null){const t=e||r,n={frag:r,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},i=t.byteRangeStartOffset,s=t.byteRangeEndOffset;if(Ve(i)&&Ve(s)){var a;let o=i,l=s;if(r.sn==="initSegment"&&((a=r.decryptdata)==null?void 0:a.method)==="AES-128"){const c=s-i;c%16&&(l=s+(16-c%16)),i!==0&&(n.resetIV=!0,o=i-16)}n.rangeStart=o,n.rangeEnd=l}return n}function VB(r,e){const t=new Error(`GAP ${r.gap?"tag":"attribute"} found`),n={type:at.MEDIA_ERROR,details:ce.FRAG_GAP,fatal:!1,frag:r,error:t,networkDetails:null};return e&&(n.part=e),(e||r).stats.aborted=!0,new el(n)}class el extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class Ott{constructor(e,t){this.subtle=void 0,this.aesIV=void 0,this.subtle=e,this.aesIV=t}decrypt(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)}}class Ptt{constructor(e,t){this.subtle=void 0,this.key=void 0,this.subtle=e,this.key=t}expandKey(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])}}function Mtt(r){const e=r.byteLength,t=e&&new DataView(r.buffer).getUint8(e-1);return t?yd(r,0,e-t):r}class Ntt{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),n=new Uint32Array(4);for(let i=0;i<4;i++)n[i]=t.getUint32(i*4);return n}initTable(){const e=this.sBox,t=this.invSBox,n=this.subMix,i=n[0],s=n[1],a=n[2],o=n[3],l=this.invSubMix,c=l[0],u=l[1],d=l[2],h=l[3],f=new Uint32Array(256);let m=0,g=0,y=0;for(y=0;y<256;y++)y<128?f[y]=y<<1:f[y]=y<<1^283;for(y=0;y<256;y++){let b=g^g<<1^g<<2^g<<3^g<<4;b=b>>>8^b&255^99,e[m]=b,t[b]=m;const E=f[m],w=f[E],A=f[w];let S=f[b]*257^b*16843008;i[m]=S<<24|S>>>8,s[m]=S<<16|S>>>16,a[m]=S<<8|S>>>24,o[m]=S,S=A*16843009^w*65537^E*257^m*16843008,c[b]=S<<24|S>>>8,u[b]=S<<16|S>>>16,d[b]=S<<8|S>>>24,h[b]=S,m?(m=E^f[f[f[A^E]]],g^=f[f[g]]):m=g=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let n=!0,i=0;for(;i<t.length&&n;)n=t[i]===this.key[i],i++;if(n)return;this.key=t;const s=this.keySize=t.length;if(s!==4&&s!==6&&s!==8)throw new Error("Invalid aes key size="+s);const a=this.ksRows=(s+6+1)*4;let o,l;const c=this.keySchedule=new Uint32Array(a),u=this.invKeySchedule=new Uint32Array(a),d=this.sBox,h=this.rcon,f=this.invSubMix,m=f[0],g=f[1],y=f[2],b=f[3];let E,w;for(o=0;o<a;o++){if(o<s){E=c[o]=t[o];continue}w=E,o%s===0?(w=w<<8|w>>>24,w=d[w>>>24]<<24|d[w>>>16&255]<<16|d[w>>>8&255]<<8|d[w&255],w^=h[o/s|0]<<24):s>6&&o%s===4&&(w=d[w>>>24]<<24|d[w>>>16&255]<<16|d[w>>>8&255]<<8|d[w&255]),c[o]=E=(c[o-s]^w)>>>0}for(l=0;l<a;l++)o=a-l,l&3?w=c[o]:w=c[o-4],l<4||o<=4?u[l]=w:u[l]=m[d[w>>>24]]^g[d[w>>>16&255]]^y[d[w>>>8&255]]^b[d[w&255]],u[l]=u[l]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,n){const i=this.keySize+6,s=this.invKeySchedule,a=this.invSBox,o=this.invSubMix,l=o[0],c=o[1],u=o[2],d=o[3],h=this.uint8ArrayToUint32Array_(n);let f=h[0],m=h[1],g=h[2],y=h[3];const b=new Int32Array(e),E=new Int32Array(b.length);let w,A,S,_,C,k,D,I,L,M,F,U,W,j;const z=this.networkToHostOrderSwap;for(;t<b.length;){for(L=z(b[t]),M=z(b[t+1]),F=z(b[t+2]),U=z(b[t+3]),C=L^s[0],k=U^s[1],D=F^s[2],I=M^s[3],W=4,j=1;j<i;j++)w=l[C>>>24]^c[k>>16&255]^u[D>>8&255]^d[I&255]^s[W],A=l[k>>>24]^c[D>>16&255]^u[I>>8&255]^d[C&255]^s[W+1],S=l[D>>>24]^c[I>>16&255]^u[C>>8&255]^d[k&255]^s[W+2],_=l[I>>>24]^c[C>>16&255]^u[k>>8&255]^d[D&255]^s[W+3],C=w,k=A,D=S,I=_,W=W+4;w=a[C>>>24]<<24^a[k>>16&255]<<16^a[D>>8&255]<<8^a[I&255]^s[W],A=a[k>>>24]<<24^a[D>>16&255]<<16^a[I>>8&255]<<8^a[C&255]^s[W+1],S=a[D>>>24]<<24^a[I>>16&255]<<16^a[C>>8&255]<<8^a[k&255]^s[W+2],_=a[I>>>24]<<24^a[C>>16&255]<<16^a[k>>8&255]<<8^a[D&255]^s[W+3],E[t]=z(w^f),E[t+1]=z(_^m),E[t+2]=z(S^g),E[t+3]=z(A^y),f=L,m=M,g=F,y=U,t=t+4}return E.buffer}}const Ftt=16;class FP{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.useSoftware=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const n=self.crypto;n&&(this.subtle=n.subtle||n.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const n=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Mtt(n):n}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,n){return this.useSoftware?new Promise((i,s)=>{this.softwareDecrypt(new Uint8Array(e),t,n);const a=this.flush();a?i(a.buffer):s(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,n)}softwareDecrypt(e,t,n){const{currentIV:i,currentResult:s,remainderData:a}=this;this.logOnce("JS AES decrypt"),a&&(e=Ds(a,e),this.remainderData=null);const o=this.getValidChunk(e);if(!o.length)return null;i&&(n=i);let l=this.softwareDecrypter;l||(l=this.softwareDecrypter=new Ntt),l.expandKey(t);const c=s;return this.currentResult=l.decrypt(o.buffer,0,n),this.currentIV=yd(o,-16).buffer,c||null}webCryptoDecrypt(e,t,n){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,n));this.key=t,this.fastAesKey=new Ptt(this.subtle,t)}return this.fastAesKey.expandKey().then(i=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Ott(this.subtle,new Uint8Array(n)).decrypt(e.buffer,i)):Promise.reject(new Error("web crypto not initialized"))).catch(i=>(re.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${i.name}: ${i.message}`),this.onWebCryptoError(e,t,n)))}onWebCryptoError(e,t,n){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,n);const i=this.flush();if(i)return i.buffer;throw new Error("WebCrypto and softwareDecrypt: failed to decrypt data")}getValidChunk(e){let t=e;const n=e.length-e.length%Ftt;return n!==e.length&&(t=yd(e,0,n),this.remainderData=yd(e,n)),t}logOnce(e){this.logEnabled&&(re.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const Btt={toString:function(r){let e="";const t=r.length;for(let n=0;n<t;n++)e+=`[${r.start(n).toFixed(3)}-${r.end(n).toFixed(3)}]`;return e}},xe={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class BP extends _tt{constructor(e,t,n,i,s){super(),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=xe.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.loadedmetadata=!1,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.onvseeking=null,this.onvended=null,this.logPrefix="",this.log=void 0,this.warn=void 0,this.playlistType=s,this.logPrefix=i,this.log=re.log.bind(re,`${i}:`),this.warn=re.warn.bind(re,`${i}:`),this.hls=e,this.fragmentLoader=new Ltt(e.config),this.keyLoader=n,this.fragmentTracker=t,this.config=e.config,this.decrypter=new FP(e.config),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=xe.STOPPED}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}_streamEnded(e,t){if(t.live||e.nextStart||!e.end||!this.media)return!1;const n=t.partList;if(n!=null&&n.length){const s=n[n.length-1];return ur.isBuffered(this.media,s.start+s.duration/2)}const i=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(i)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null){var e;return(e=this.levelLastLoaded)==null?void 0:e.details}}onMediaAttached(e,t){const n=this.media=this.mediaBuffer=t.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),n.addEventListener("seeking",this.onvseeking),n.addEventListener("ended",this.onvended);const i=this.config;this.levels&&i.autoStartLoad&&this.state===xe.STOPPED&&this.startLoad(i.startPosition)}onMediaDetaching(){const e=this.media;e!=null&&e.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&this.onvseeking&&this.onvended&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvended=null),this.keyLoader&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}onMediaSeeking(){const{config:e,fragCurrent:t,media:n,mediaBuffer:i,state:s}=this,a=n?n.currentTime:0,o=ur.bufferInfo(i||n,a,e.maxBufferHole);if(this.log(`media seeking to ${Ve(a)?a.toFixed(3):a}, state: ${s}`),this.state===xe.ENDED)this.resetLoadingState();else if(t){const l=e.maxFragLookUpTolerance,c=t.start-l,u=t.start+t.duration+l;if(!o.len||u<o.start||c>o.end){const d=a>u;(a<c||d)&&(d&&t.loader&&(this.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),t.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}n&&(this.fragmentTracker.removeFragmentsInRange(a,1/0,this.playlistType,!0),this.lastCurrentTime=a),!this.loadedmetadata&&!o.len&&(this.nextLoadPosition=this.startPosition=a),this.tickImmediate()}onMediaEnded(){this.startPosition=this.lastCurrentTime=0}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset,this.initPTS=[]}onHandlerDestroying(){this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),this.stopLoad(),super.onHandlerDestroying(),this.hls=null}onHandlerDestroyed(){this.state=xe.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,n){this._loadFragForPlayback(e,t,n)}_loadFragForPlayback(e,t,n){const i=s=>{if(this.fragContextChanged(e)){this.warn(`Fragment ${e.sn}${s.part?" p: "+s.part.index:""} of level ${e.level} was dropped during download.`),this.fragmentTracker.removeFragment(e);return}e.stats.chunkCount++,this._handleFragmentLoadProgress(s)};this._doFragLoad(e,t,n,i).then(s=>{if(!s)return;const a=this.state;if(this.fragContextChanged(e)){(a===xe.FRAG_LOADING||!this.fragCurrent&&a===xe.PARSING)&&(this.fragmentTracker.removeFragment(e),this.state=xe.IDLE);return}"payload"in s&&(this.log(`Loaded fragment ${e.sn} of level ${e.level}`),this.hls.trigger(P.FRAG_LOADED,s)),this._handleFragmentLoadComplete(s)}).catch(s=>{this.state===xe.STOPPED||this.state===xe.ERROR||(this.warn(`Frag error: ${s?.message||s}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:n}=this;if(n.getState(e)===_n.APPENDING){const s=e.type,a=this.getFwdBufferInfo(this.mediaBuffer,s),o=Math.max(e.duration,a?a.len:this.config.maxBufferLength),l=this.backtrackFragment;((l?e.sn-l.sn:0)===1||this.reduceMaxBufferLength(o,e.duration))&&n.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?n.removeAllFragments():n.hasParts(e.type)&&(n.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),n.getState(e)===_n.PARTIAL&&n.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}flushMainBuffer(e,t,n=null){if(!(e-t))return;const i={startOffset:e,endOffset:t,type:n};this.hls.trigger(P.BUFFER_FLUSHING,i)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(n=>{if(!n||this.fragContextChanged(e)||!this.levels)throw new Error("init load aborted");return n}).then(n=>{const{hls:i}=this,{payload:s}=n,a=e.decryptdata;if(s&&s.byteLength>0&&a!=null&&a.key&&a.iv&&a.method==="AES-128"){const o=self.performance.now();return this.decrypter.decrypt(new Uint8Array(s),a.key.buffer,a.iv.buffer).catch(l=>{throw i.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_DECRYPT_ERROR,fatal:!1,error:l,reason:l.message,frag:e}),l}).then(l=>{const c=self.performance.now();return i.trigger(P.FRAG_DECRYPTED,{frag:e,payload:l,stats:{tstart:o,tdecrypt:c}}),n.payload=l,this.completeInitSegmentLoad(n)})}return this.completeInitSegmentLoad(n)}).catch(n=>{this.state===xe.STOPPED||this.state===xe.ERROR||(this.warn(n),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const n=e.frag.stats;this.state=xe.IDLE,e.frag.data=new Uint8Array(e.payload),n.parsing.start=n.buffering.start=self.performance.now(),n.parsing.end=n.buffering.end=self.performance.now(),this.tick()}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){var n,i,s,a;const o=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.playlistType===nt.MAIN?"level":"track"} ${e.level} (frag:[${((n=e.startPTS)!=null?n:NaN).toFixed(3)}-${((i=e.endPTS)!=null?i:NaN).toFixed(3)}] > buffer:${o?Btt.toString(ur.getBuffered(o)):"(detached)"})`),e.sn!=="initSegment"){var l;if(e.type!==nt.SUBTITLE){const u=e.elementaryStreams;if(!Object.keys(u).some(d=>!!u[d])){this.state=xe.IDLE;return}}const c=(l=this.levels)==null?void 0:l[e.level];c!=null&&c.fragmentError&&(this.log(`Resetting level fragment error count of ${c.fragmentError} on frag buffered`),c.fragmentError=0)}this.state=xe.IDLE,o&&(!this.loadedmetadata&&e.type==nt.MAIN&&o.buffered.length&&((s=this.fragCurrent)==null?void 0:s.sn)===((a=this.fragPrevious)==null?void 0:a.sn)&&(this.loadedmetadata=!0,this.seekToStartPos()),this.tick())}seekToStartPos(){}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:n,part:i,partsLoaded:s}=e,a=!s||s.length===0||s.some(l=>!l),o=new NP(n.level,n.sn,n.stats.chunkCount+1,0,i?i.index:-1,!a);t.flush(o)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,n=null,i){var s;const a=t?.details;if(!this.levels||!a)throw new Error(`frag load aborted, missing level${a?"":" detail"}s`);let o=null;if(e.encrypted&&!((s=e.decryptdata)!=null&&s.key)?(this.log(`Loading key for ${e.sn} of [${a.startSN}-${a.endSN}], ${this.logPrefix==="[stream-controller]"?"level":"track"} ${e.level}`),this.state=xe.KEY_LOADING,this.fragCurrent=e,o=this.keyLoader.load(e).then(u=>{if(!this.fragContextChanged(u.frag))return this.hls.trigger(P.KEY_LOADED,u),this.state===xe.KEY_LOADING&&(this.state=xe.IDLE),u}),this.hls.trigger(P.KEY_LOADING,{frag:e}),this.fragCurrent===null&&(o=Promise.reject(new Error("frag load aborted, context changed in KEY_LOADING")))):!e.encrypted&&a.encryptedFragments.length&&this.keyLoader.loadClear(e,a.encryptedFragments),n=Math.max(e.start,n||0),this.config.lowLatencyMode&&e.sn!=="initSegment"){const u=a.partList;if(u&&i){n>e.end&&a.fragmentHint&&(e=a.fragmentHint);const d=this.getNextPart(u,e,n);if(d>-1){const h=u[d];this.log(`Loading part sn: ${e.sn} p: ${h.index} cc: ${e.cc} of playlist [${a.startSN}-${a.endSN}] parts [0-${d}-${u.length-1}] ${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),this.nextLoadPosition=h.start+h.duration,this.state=xe.FRAG_LOADING;let f;return o?f=o.then(m=>!m||this.fragContextChanged(m.frag)?null:this.doFragPartsLoad(e,h,t,i)).catch(m=>this.handleFragLoadError(m)):f=this.doFragPartsLoad(e,h,t,i).catch(m=>this.handleFragLoadError(m)),this.hls.trigger(P.FRAG_LOADING,{frag:e,part:h,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):f}else if(!e.url||this.loadedEndOfParts(u,n))return Promise.resolve(null)}}this.log(`Loading fragment ${e.sn} cc: ${e.cc} ${a?"of ["+a.startSN+"-"+a.endSN+"] ":""}${this.logPrefix==="[stream-controller]"?"level":"track"}: ${e.level}, target: ${parseFloat(n.toFixed(3))}`),Ve(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=xe.FRAG_LOADING;const l=this.config.progressive;let c;return l&&o?c=o.then(u=>!u||this.fragContextChanged(u?.frag)?null:this.fragmentLoader.load(e,i)).catch(u=>this.handleFragLoadError(u)):c=Promise.all([this.fragmentLoader.load(e,l?i:void 0),o]).then(([u])=>(!l&&u&&i&&i(u),u)).catch(u=>this.handleFragLoadError(u)),this.hls.trigger(P.FRAG_LOADING,{frag:e,targetBufferTime:n}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):c}doFragPartsLoad(e,t,n,i){return new Promise((s,a)=>{var o;const l=[],c=(o=n.details)==null?void 0:o.partList,u=d=>{this.fragmentLoader.loadPart(e,d,i).then(h=>{l[d.index]=h;const f=h.part;this.hls.trigger(P.FRAG_LOADED,h);const m=PB(n,e.sn,d.index+1)||RJ(c,e.sn,d.index+1);if(m)u(m);else return s({frag:e,part:f,partsLoaded:l})}).catch(a)};u(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;e.data&&t.details===ce.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):this.hls.trigger(P.ERROR,t)}else this.hls.trigger(P.ERROR,{type:at.OTHER_ERROR,details:ce.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==xe.PARSING){!this.fragCurrent&&this.state!==xe.STOPPED&&this.state!==xe.ERROR&&(this.state=xe.IDLE);return}const{frag:n,part:i,level:s}=t,a=self.performance.now();n.stats.parsing.end=a,i&&(i.stats.parsing.end=a),this.updateLevelTiming(n,i,s,e.partial)}getCurrentContext(e){const{levels:t,fragCurrent:n}=this,{level:i,sn:s,part:a}=e;if(!(t!=null&&t[i]))return this.warn(`Levels object was unset while buffering fragment ${s} of level ${i}. The current chunk will not be buffered.`),null;const o=t[i],l=a>-1?PB(o,s,a):null,c=l?l.fragment:ott(o,s,n);return c?(n&&n!==c&&(c.stats=n.stats),{frag:c,part:l,level:o}):null}bufferFragmentData(e,t,n,i,s){var a;if(!e||this.state!==xe.PARSING)return;const{data1:o,data2:l}=e;let c=o;if(o&&l&&(c=Ds(o,l)),!((a=c)!=null&&a.length))return;const u={type:e.type,frag:t,part:n,chunkMeta:i,parent:t.type,data:c};if(this.hls.trigger(P.BUFFER_APPENDING,u),e.dropped&&e.independent&&!n){if(s)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!ur.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const n=t.currentTime,i=ur.bufferInfo(t,n,0),s=e.duration,a=Math.min(this.config.maxFragLookUpTolerance*2,s*.25),o=Math.max(Math.min(e.start-a,i.end-a),n+a);e.start-o>a&&this.flushMainBuffer(o,e.start)}getFwdBufferInfo(e,t){const n=this.getLoadPosition();return Ve(n)?this.getFwdBufferInfoAtPos(e,n,t):null}getFwdBufferInfoAtPos(e,t,n){const{config:{maxBufferHole:i}}=this,s=ur.bufferInfo(e,t,i);if(s.len===0&&s.nextStart!==void 0){const a=this.fragmentTracker.getBufferedFrag(t,n);if(a&&s.nextStart<a.end)return ur.bufferInfo(e,t,Math.max(s.nextStart,i))}return s}getMaxBufferLength(e){const{config:t}=this;let n;return e?n=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):n=t.maxBufferLength,Math.min(n,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const n=this.config,i=Math.max(Math.min(e-t,n.maxBufferLength),t),s=Math.max(e-t*3,n.maxMaxBufferLength/2,i);return s>=i?(n.maxMaxBufferLength=s,this.warn(`Reduce max buffer length to ${s}s`),!0):!1}getAppendedFrag(e,t=nt.MAIN){const n=this.fragmentTracker.getAppendedFrag(e,nt.MAIN);return n&&"fragment"in n?n.fragment:n}getNextFragment(e,t){const n=t.fragments,i=n.length;if(!i)return null;const{config:s}=this,a=n[0].start;let o;if(t.live){const l=s.initialLiveManifestSize;if(i<l)return this.warn(`Not enough fragments to start playback (have: ${i}, need: ${l})`),null;(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<a)&&(o=this.getInitialLiveFragment(t,n),this.startPosition=this.nextLoadPosition=o?this.hls.liveSyncPosition||o.start:e)}else e<=a&&(o=n[0]);if(!o){const l=s.lowLatencyMode?t.partEnd:t.fragmentEnd;o=this.getFragmentAtPosition(e,l,t)}return this.mapToInitFragWhenRequired(o)}isLoopLoading(e,t){const n=this.fragmentTracker.getState(e);return(n===_n.OK||n===_n.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,n,i,s){const a=e.gap,o=this.getNextFragment(this.nextLoadPosition,t);if(o===null)return o;if(e=o,a&&e&&!e.gap&&n.nextStart){const l=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,n.nextStart,i);if(l!==null&&n.len+l.len>=s)return this.log(`buffer full after gaps in "${i}" playlist starting at sn: ${e.sn}`),null}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!(e!=null&&e.initSegment.data)&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,n){let i=-1,s=!1,a=!0;for(let o=0,l=e.length;o<l;o++){const c=e[o];if(a=a&&!c.independent,i>-1&&n<c.start)break;const u=c.loaded;u?i=-1:(s||c.independent||a)&&c.fragment===t&&(i=o),s=u}return i}loadedEndOfParts(e,t){const n=e[e.length-1];return n&&t>n.start&&n.loaded}getInitialLiveFragment(e,t){const n=this.fragPrevious;let i=null;if(n){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${n.programDateTime}`),i=ctt(t,n.endProgramDateTime,this.config.maxFragLookUpTolerance)),!i){const s=n.sn+1;if(s>=e.startSN&&s<=e.endSN){const a=t[s-e.startSN];n.cc===a.cc&&(i=a,this.log(`Live playlist, switching playlist, load frag with next SN: ${i.sn}`))}i||(i=htt(t,n.cc),i&&this.log(`Live playlist, switching playlist, load frag with same CC: ${i.sn}`))}}else{const s=this.hls.liveSyncPosition;s!==null&&(i=this.getFragmentAtPosition(s,this.bitrateTest?e.fragmentEnd:e.edge,e))}return i}getFragmentAtPosition(e,t,n){const{config:i}=this;let{fragPrevious:s}=this,{fragments:a,endSN:o}=n;const{fragmentHint:l}=n,{maxFragLookUpTolerance:c}=i,u=n.partList,d=!!(i.lowLatencyMode&&u!=null&&u.length&&l);d&&l&&!this.bitrateTest&&(a=a.concat(l),o=l.sn);let h;if(e<t){const f=e>t-c?0:c;h=Tw(s,a,e,f)}else h=a[a.length-1];if(h){const f=h.sn-n.startSN,m=this.fragmentTracker.getState(h);if((m===_n.OK||m===_n.PARTIAL&&h.gap)&&(s=h),s&&h.sn===s.sn&&(!d||u[0].fragment.sn>h.sn)&&s&&h.level===s.level){const y=a[f+1];h.sn<o&&this.fragmentTracker.getState(y)!==_n.OK?h=y:h=null}}return h}synchronizeToLiveEdge(e){const{config:t,media:n}=this;if(!n)return;const i=this.hls.liveSyncPosition,s=n.currentTime,a=e.fragments[0].start,o=e.edge,l=s>=a-t.maxFragLookUpTolerance&&s<=o;if(i!==null&&n.duration>i&&(s<i||!l)){const c=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;(!l&&n.readyState<4||s<o-c)&&(this.loadedmetadata||(this.nextLoadPosition=i),n.readyState&&(this.warn(`Playback: ${s.toFixed(3)} is located too far from the end of live sliding playlist: ${o}, reset currentTime to : ${i.toFixed(3)}`),n.currentTime=i))}}alignPlaylists(e,t,n){const i=e.fragments.length;if(!i)return this.warn("No fragments in live playlist"),0;const s=e.fragments[0].start,a=!t,o=e.alignedSliding&&Ve(s);if(a||!o&&!s){const{fragPrevious:l}=this;$tt(l,n,e);const c=e.fragments[0].start;return this.log(`Live playlist sliding: ${c.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} prev-sn: ${l?l.sn:"na"} fragments: ${i}`),c}return s}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let n=this.startPosition;if(n<t&&(n=-1),n===-1||this.lastCurrentTime===-1){const i=this.startTimeOffset!==null,s=i?this.startTimeOffset:e.startTimeOffset;s!==null&&Ve(s)?(n=t+s,s<0&&(n+=e.totalduration),n=Math.min(Math.max(t,n),t+e.totalduration),this.log(`Start time offset ${s} found in ${i?"multivariant":"media"} playlist, adjust startPosition to ${n}`),this.startPosition=n):e.live?n=this.hls.liveSyncPosition||t:this.startPosition=n=0,this.lastCurrentTime=n}this.nextLoadPosition=n}getLoadPosition(){const{media:e}=this;let t=0;return this.loadedmetadata&&e?t=e.currentTime:this.nextLoadPosition&&(t=this.nextLoadPosition),t}handleFragLoadAborted(e,t){this.transmuxer&&e.sn!=="initSegment"&&e.stats.aborted&&(this.warn(`Fragment ${e.sn}${t?" part "+t.index:""} of level ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==xe.FRAG_LOADING_WAITING_RETRY)&&(this.state=xe.IDLE)}onFragmentOrKeyLoadError(e,t){if(t.chunkMeta&&!t.frag){const u=this.getCurrentContext(t.chunkMeta);u&&(t.frag=u.frag)}const n=t.frag;if(!n||n.type!==e||!this.levels)return;if(this.fragContextChanged(n)){var i;this.warn(`Frag load error must match current frag to retry ${n.url} > ${(i=this.fragCurrent)==null?void 0:i.url}`);return}const s=t.details===ce.FRAG_GAP;s&&this.fragmentTracker.fragBuffered(n,!0);const a=t.errorAction,{action:o,retryCount:l=0,retryConfig:c}=a||{};if(a&&o===Un.RetryRequest&&c){this.resetStartWhenNotLoaded(this.levelLastLoaded);const u=PP(c,l);this.warn(`Fragment ${n.sn} of ${e} ${n.level} errored with ${t.details}, retrying loading ${l+1}/${c.maxNumRetry} in ${u}ms`),a.resolved=!0,this.retryDate=self.performance.now()+u,this.state=xe.FRAG_LOADING_WAITING_RETRY}else if(c&&a)if(this.resetFragmentErrors(e),l<c.maxNumRetry)!s&&o!==Un.RemoveAlternatePermanently&&(a.resolved=!0);else{re.warn(`${t.details} reached or exceeded max retry (${l})`);return}else a?.action===Un.SendAlternateToPenaltyBox?this.state=xe.WAITING_LEVEL:this.state=xe.ERROR;this.tickImmediate()}reduceLengthAndFlushBuffer(e){if(this.state===xe.PARSING||this.state===xe.PARSED){const t=e.frag,n=e.parent,i=this.getFwdBufferInfo(this.mediaBuffer,n),s=i&&i.len>.5;s&&this.reduceMaxBufferLength(i.len,t?.duration||10);const a=!s;return a&&this.warn(`Buffer full error while media.currentTime is not buffered, flush ${n} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),a}return!1}resetFragmentErrors(e){e===nt.AUDIO&&(this.fragCurrent=null),this.loadedmetadata||(this.startFragRequested=!1),this.state!==xe.STOPPED&&(this.state=xe.IDLE)}afterBufferFlushed(e,t,n){if(!e)return;const i=ur.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,i,n),this.state===xe.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state=xe.IDLE}resetStartWhenNotLoaded(e){if(!this.loadedmetadata){this.startFragRequested=!1;const t=e?e.details:null;t!=null&&t.live?(this.startPosition=-1,this.setStartPosition(t,0),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.warn(`The loading context changed while buffering fragment ${e.sn} of level ${e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,n,i){var s;const a=n.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((l,c)=>{const u=e.elementaryStreams[c];if(u){const d=u.endPTS-u.startPTS;if(d<=0)return this.warn(`Could not parse fragment ${e.sn} ${c} duration reliably (${d})`),l||!1;const h=i?0:_J(a,e,u.startPTS,u.endPTS,u.startDTS,u.endDTS);return this.hls.trigger(P.LEVEL_PTS_UPDATED,{details:a,level:n,drift:h,type:c,frag:e,start:u.startPTS,end:u.endPTS}),!0}return l},!1)&&((s=this.transmuxer)==null?void 0:s.error)===null){const l=new Error(`Found no media in fragment ${e.sn} of level ${e.level} resetting transmuxer to fallback to playlist timing`);if(n.fragmentError===0&&(n.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)),this.warn(l.message),this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_PARSING_ERROR,fatal:!1,error:l,frag:e,reason:`Found no media in msn ${e.sn} of level "${n.url}"`}),!this.hls)return;this.resetTransmuxer()}this.state=xe.PARSED,this.hls.trigger(P.FRAG_PARSED,{frag:e,part:t})}resetTransmuxer(){this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null)}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.resetTransmuxer(),this.resetStartWhenNotLoaded(this.levelLastLoaded),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}class LJ{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let n;if(e.length)e.length===1?n=e[0]:n=Utt(e,t);else return new Uint8Array(0);return this.reset(),n}reset(){this.chunks.length=0,this.dataLength=0}}function Utt(r,e){const t=new Uint8Array(e);let n=0;for(let i=0;i<r.length;i++){const s=r[i];t.set(s,n),n+=s.length}return t}function Wtt(){return typeof __HLS_WORKER_BUNDLE__=="function"}function Htt(){const r=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),e=self.URL.createObjectURL(r);return{worker:new self.Worker(e),objectURL:e}}function Vtt(r){const e=new self.URL(r,self.location.href).href;return{worker:new self.Worker(e),scriptURL:e}}function ja(r="",e=9e4){return{type:r,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class UP{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,n,i){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,n){}demux(e,t){this.cachedData&&(e=Ds(this.cachedData,e),this.cachedData=null);let n=H0(e,0),i=n?n.length:0,s;const a=this._audioTrack,o=this._id3Track,l=n?OP(n):void 0,c=e.length;for((this.basePTS===null||this.frameIndex===0&&Ve(l))&&(this.basePTS=Gtt(l,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),n&&n.length>0&&o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Js.audioId3,duration:Number.POSITIVE_INFINITY});i<c;){if(this.canParse(e,i)){const u=this.appendFrame(a,e,i);u?(this.frameIndex++,this.lastPTS=u.sample.pts,i+=u.length,s=i):i=c}else uet(e,i)?(n=H0(e,i),o.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:n,type:Js.audioId3,duration:Number.POSITIVE_INFINITY}),i+=n.length,s=i):i++;if(i===c&&s!==c){const u=yd(e,s);this.cachedData?this.cachedData=Ds(this.cachedData,u):this.cachedData=u}}return{audioTrack:a,videoTrack:ja(),id3Track:o,textTrack:ja()}}demuxSampleAes(e,t,n){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:ja(),id3Track:this._id3Track,textTrack:ja()}}destroy(){}}const Gtt=(r,e,t)=>{if(Ve(r))return r*90;const n=t?t.baseTime*9e4/t.timescale:0;return e*9e4+n};function qtt(r,e,t,n){let i,s,a,o;const l=navigator.userAgent.toLowerCase(),c=n,u=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=((e[t+2]&192)>>>6)+1;const d=(e[t+2]&60)>>>2;if(d>u.length-1){const h=new Error(`invalid ADTS sampling index:${d}`);r.emit(P.ERROR,P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_PARSING_ERROR,fatal:!0,error:h,reason:h.message});return}return a=(e[t+2]&1)<<2,a|=(e[t+3]&192)>>>6,re.log(`manifest codec:${n}, ADTS type:${i}, samplingIndex:${d}`),/firefox/i.test(l)?d>=6?(i=5,o=new Array(4),s=d-3):(i=2,o=new Array(2),s=d):l.indexOf("android")!==-1?(i=2,o=new Array(2),s=d):(i=5,o=new Array(4),n&&(n.indexOf("mp4a.40.29")!==-1||n.indexOf("mp4a.40.5")!==-1)||!n&&d>=6?s=d-3:((n&&n.indexOf("mp4a.40.2")!==-1&&(d>=6&&a===1||/vivaldi/i.test(l))||!n&&a===1)&&(i=2,o=new Array(2)),s=d)),o[0]=i<<3,o[0]|=(d&14)>>1,o[1]|=(d&1)<<7,o[1]|=a<<3,i===5&&(o[1]|=(s&14)>>1,o[2]=(s&1)<<7,o[2]|=8,o[3]=0),{config:o,samplerate:u[d],channelCount:a,codec:"mp4a.40."+i,manifestCodec:c}}function OJ(r,e){return r[e]===255&&(r[e+1]&246)===240}function PJ(r,e){return r[e+1]&1?7:9}function WP(r,e){return(r[e+3]&3)<<11|r[e+4]<<3|(r[e+5]&224)>>>5}function jtt(r,e){return e+5<r.length}function Aw(r,e){return e+1<r.length&&OJ(r,e)}function Ktt(r,e){return jtt(r,e)&&OJ(r,e)&&WP(r,e)<=r.length-e}function ztt(r,e){if(Aw(r,e)){const t=PJ(r,e);if(e+t>=r.length)return!1;const n=WP(r,e);if(n<=t)return!1;const i=e+n;return i===r.length||Aw(r,i)}return!1}function MJ(r,e,t,n,i){if(!r.samplerate){const s=qtt(e,t,n,i);if(!s)return;r.config=s.config,r.samplerate=s.samplerate,r.channelCount=s.channelCount,r.codec=s.codec,r.manifestCodec=s.manifestCodec,re.log(`parsed codec:${r.codec}, rate:${s.samplerate}, channels:${s.channelCount}`)}}function NJ(r){return 1024*9e4/r}function Ytt(r,e){const t=PJ(r,e);if(e+t<=r.length){const n=WP(r,e)-t;if(n>0)return{headerLength:t,frameLength:n}}}function FJ(r,e,t,n,i){const s=NJ(r.samplerate),a=n+i*s,o=Ytt(e,t);let l;if(o){const{frameLength:d,headerLength:h}=o,f=h+d,m=Math.max(0,t+f-e.length);m?(l=new Uint8Array(f-h),l.set(e.subarray(t+h,e.length),0)):l=e.subarray(t+h,t+f);const g={unit:l,pts:a};return m||r.samples.push(g),{sample:g,length:f,missing:m}}const c=e.length-t;return l=new Uint8Array(c),l.set(e.subarray(t,e.length),0),{sample:{unit:l,pts:a},length:c,missing:-1}}let Kb=null;const Qtt=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],Xtt=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],Ztt=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],Jtt=[0,1,1,4];function BJ(r,e,t,n,i){if(t+24>e.length)return;const s=UJ(e,t);if(s&&t+s.frameLength<=e.length){const a=s.samplesPerFrame*9e4/s.sampleRate,o=n+i*a,l={unit:e.subarray(t,t+s.frameLength),pts:o,dts:o};return r.config=[],r.channelCount=s.channelCount,r.samplerate=s.sampleRate,r.samples.push(l),{sample:l,length:s.frameLength,missing:0}}}function UJ(r,e){const t=r[e+1]>>3&3,n=r[e+1]>>1&3,i=r[e+2]>>4&15,s=r[e+2]>>2&3;if(t!==1&&i!==0&&i!==15&&s!==3){const a=r[e+2]>>1&1,o=r[e+3]>>6,l=t===3?3-n:n===3?3:4,c=Qtt[l*14+i-1]*1e3,d=Xtt[(t===3?0:t===2?1:2)*3+s],h=o===3?1:2,f=Ztt[t][n],m=Jtt[n],g=f*8*m,y=Math.floor(f*c/d+a)*m;if(Kb===null){const w=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Kb=w?parseInt(w[1]):0}return!!Kb&&Kb<=87&&n===2&&c>=224e3&&o===0&&(r[e+3]=r[e+3]|128),{sampleRate:d,channelCount:h,frameLength:y,samplesPerFrame:g}}}function HP(r,e){return r[e]===255&&(r[e+1]&224)===224&&(r[e+1]&6)!==0}function WJ(r,e){return e+1<r.length&&HP(r,e)}function ert(r,e){return HP(r,e)&&4<=r.length-e}function HJ(r,e){if(e+1<r.length&&HP(r,e)){const n=UJ(r,e);let i=4;n!=null&&n.frameLength&&(i=n.frameLength);const s=e+i;return s===r.length||WJ(r,s)}return!1}class trt extends UP{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=H0(e,0);let n=t?.length||0;if(HJ(e,n))return!1;for(let i=e.length;n<i;n++)if(ztt(e,n))return re.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return Ktt(e,t)}appendFrame(e,t,n){MJ(e,this.observer,t,n,e.manifestCodec);const i=FJ(e,t,n,this.basePTS,this.frameIndex);if(i&&i.missing===0)return i}}const rrt=/\/emsg[-/]ID3/i;class nrt{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,n,i){const s=this.videoTrack=ja("video",1),a=this.audioTrack=ja("audio",1),o=this.txtTrack=ja("text",1);if(this.id3Track=ja("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const l=yJ(e);if(l.video){const{id:c,timescale:u,codec:d}=l.video;s.id=c,s.timescale=o.timescale=u,s.codec=d}if(l.audio){const{id:c,timescale:u,codec:d}=l.audio;a.id=c,a.timescale=u,a.codec=d}o.id=mJ.text,s.sampleDuration=0,s.duration=a.duration=i}resetContiguity(){this.remainderData=null}static probe(e){return bet(e)}demux(e,t){this.timeOffset=t;let n=e;const i=this.videoTrack,s=this.txtTrack;if(this.config.progressive){this.remainderData&&(n=Ds(this.remainderData,e));const o=Ret(n);this.remainderData=o.remainder,i.samples=o.valid||new Uint8Array}else i.samples=n;const a=this.extractID3Track(i,t);return s.samples=gB(t,i),{videoTrack:i,audioTrack:this.audioTrack,id3Track:a,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,n=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const i=this.extractID3Track(t,this.timeOffset);return n.samples=gB(e,t),{videoTrack:t,audioTrack:ja(),id3Track:i,textTrack:ja()}}extractID3Track(e,t){const n=this.id3Track;if(e.samples.length){const i=gt(e.samples,["emsg"]);i&&i.forEach(s=>{const a=$et(s);if(rrt.test(a.schemeIdUri)){const o=Ve(a.presentationTime)?a.presentationTime/a.timeScale:t+a.presentationTimeDelta/a.timeScale;let l=a.eventDuration===4294967295?Number.POSITIVE_INFINITY:a.eventDuration/a.timeScale;l<=.001&&(l=Number.POSITIVE_INFINITY);const c=a.payload;n.samples.push({data:c,len:c.byteLength,dts:o,pts:o,type:Js.emsg,duration:l})}})}return n}demuxSampleAes(e,t,n){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){}}const VJ=(r,e)=>{let t=0,n=5;e+=n;const i=new Uint32Array(1),s=new Uint32Array(1),a=new Uint8Array(1);for(;n>0;){a[0]=r[e];const o=Math.min(n,8),l=8-o;s[0]=4278190080>>>24+l<<l,i[0]=(a[0]&s[0])>>l,t=t?t<<o|i[0]:i[0],e+=1,n-=o}return t};class irt extends UP{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,n){const i=GJ(e,t,n,this.basePTS,this.frameIndex);if(i!==-1)return{sample:e.samples[e.samples.length-1],length:i,missing:0}}static probe(e){if(!e)return!1;const t=H0(e,0);if(!t)return!1;const n=t.length;return e[n]===11&&e[n+1]===119&&OP(t)!==void 0&&VJ(e,n)<16}}function GJ(r,e,t,n,i){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const s=e[t+4]>>6;if(s>=3)return-1;const o=[48e3,44100,32e3][s],l=e[t+4]&63,u=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][l*3+s]*2;if(t+u>e.length)return-1;const d=e[t+6]>>5;let h=0;d===2?h+=2:(d&1&&d!==1&&(h+=2),d&4&&(h+=2));const f=(e[t+6]<<8|e[t+7])>>12-h&1,g=[2,1,2,3,3,4,4,5][d]+f,y=e[t+5]>>3,b=e[t+5]&7,E=new Uint8Array([s<<6|y<<1|b>>2,(b&3)<<6|d<<3|f<<2|l>>4,l<<4&224]),w=1536/o*9e4,A=n+i*w,S=e.subarray(t,t+u);return r.config=E,r.channelCount=g,r.samplerate=o,r.samples.push({unit:S,pts:A}),u}class srt{constructor(){this.VideoSample=null}createVideoSample(e,t,n,i){return{key:e,frame:!1,pts:t,dts:n,units:[],debug:i,length:0}}getLastNalUnit(e){var t;let n=this.VideoSample,i;if((!n||n.units.length===0)&&(n=e[e.length-1]),(t=n)!=null&&t.units){const s=n.units;i=s[s.length-1]}return i}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const n=t.samples,i=n.length;if(i){const s=n[i-1];e.pts=s.pts,e.dts=s.dts}else{t.dropped++;return}}t.samples.push(e)}e.debug.length&&re.log(e.pts+"/"+e.dts+":"+e.debug)}}class GB{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,n=e.byteLength-t,i=new Uint8Array(4),s=Math.min(4,t);if(s===0)throw new Error("no bytes available");i.set(e.subarray(n,n+s)),this.word=new DataView(i.buffer).getUint32(0),this.bitsAvailable=s*8,this.bytesAvailable-=s}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const n=this.word>>>32-t;if(e>32&&re.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?n<<t|this.readBits(t):n}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if(this.word&2147483648>>>e)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}skipScalingList(e){let t=8,n=8,i;for(let s=0;s<e;s++)n!==0&&(i=this.readEG(),n=(t+i+256)%256),t=n===0?t:n}readSPS(){let e=0,t=0,n=0,i=0,s,a,o;const l=this.readUByte.bind(this),c=this.readBits.bind(this),u=this.readUEG.bind(this),d=this.readBoolean.bind(this),h=this.skipBits.bind(this),f=this.skipEG.bind(this),m=this.skipUEG.bind(this),g=this.skipScalingList.bind(this);l();const y=l();if(c(5),h(3),l(),m(),y===100||y===110||y===122||y===244||y===44||y===83||y===86||y===118||y===128){const _=u();if(_===3&&h(1),m(),m(),h(1),d())for(a=_!==3?8:12,o=0;o<a;o++)d()&&(o<6?g(16):g(64))}m();const b=u();if(b===0)u();else if(b===1)for(h(1),f(),f(),s=u(),o=0;o<s;o++)f();m(),h(1);const E=u(),w=u(),A=c(1);A===0&&h(1),h(1),d()&&(e=u(),t=u(),n=u(),i=u());let S=[1,1];if(d()&&d())switch(l()){case 1:S=[1,1];break;case 2:S=[12,11];break;case 3:S=[10,11];break;case 4:S=[16,11];break;case 5:S=[40,33];break;case 6:S=[24,11];break;case 7:S=[20,11];break;case 8:S=[32,11];break;case 9:S=[80,33];break;case 10:S=[18,11];break;case 11:S=[15,11];break;case 12:S=[64,33];break;case 13:S=[160,99];break;case 14:S=[4,3];break;case 15:S=[3,2];break;case 16:S=[2,1];break;case 255:{S=[l()<<8|l(),l()<<8|l()];break}}return{width:Math.ceil((E+1)*16-e*2-t*2),height:(2-A)*(w+1)*16-(A?2:4)*(n+i),pixelRatio:S}}readSliceType(){return this.readUByte(),this.readUEG(),this.readUEG()}}class art extends srt{parseAVCPES(e,t,n,i,s){const a=this.parseAVCNALu(e,n.data);let o=this.VideoSample,l,c=!1;n.data=null,o&&a.length&&!e.audFound&&(this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"")),a.forEach(u=>{var d;switch(u.type){case 1:{let g=!1;l=!0;const y=u.data;if(c&&y.length>4){const b=new GB(y).readSliceType();(b===2||b===4||b===7||b===9)&&(g=!0)}if(g){var h;(h=o)!=null&&h.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null)}o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.frame=!0,o.key=g;break}case 5:l=!0,(d=o)!=null&&d.frame&&!o.key&&(this.pushAccessUnit(o,e),o=this.VideoSample=null),o||(o=this.VideoSample=this.createVideoSample(!0,n.pts,n.dts,"")),o.key=!0,o.frame=!0;break;case 6:{l=!0,EJ(u.data,1,n.pts,t.samples);break}case 7:{var f,m;l=!0,c=!0;const g=u.data,b=new GB(g).readSPS();if(!e.sps||e.width!==b.width||e.height!==b.height||((f=e.pixelRatio)==null?void 0:f[0])!==b.pixelRatio[0]||((m=e.pixelRatio)==null?void 0:m[1])!==b.pixelRatio[1]){e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.sps=[g],e.duration=s;const E=g.subarray(1,4);let w="avc1.";for(let A=0;A<3;A++){let S=E[A].toString(16);S.length<2&&(S="0"+S),w+=S}e.codec=w}break}case 8:l=!0,e.pps=[u.data];break;case 9:l=!0,e.audFound=!0,o&&this.pushAccessUnit(o,e),o=this.VideoSample=this.createVideoSample(!1,n.pts,n.dts,"");break;case 12:l=!0;break;default:l=!1,o&&(o.debug+="unknown NAL "+u.type+" ");break}o&&l&&o.units.push(u)}),i&&o&&(this.pushAccessUnit(o,e),this.VideoSample=null)}parseAVCNALu(e,t){const n=t.byteLength;let i=e.naluState||0;const s=i,a=[];let o=0,l,c,u,d=-1,h=0;for(i===-1&&(d=0,h=t[0]&31,i=0,o=1);o<n;){if(l=t[o++],!i){i=l?0:1;continue}if(i===1){i=l?0:2;continue}if(!l)i=3;else if(l===1){if(c=o-i-1,d>=0){const f={data:t.subarray(d,c),type:h};a.push(f)}else{const f=this.getLastNalUnit(e.samples);f&&(s&&o<=4-s&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-s)),c>0&&(f.data=Ds(f.data,t.subarray(0,c)),f.state=0))}o<n?(u=t[o]&31,d=o,h=u,i=0):i=-1}else i=0}if(d>=0&&i>=0){const f={data:t.subarray(d,n),type:h,state:i};a.push(f)}if(a.length===0){const f=this.getLastNalUnit(e.samples);f&&(f.data=Ds(f.data,t))}return e.naluState=i,a}}class ort{constructor(e,t,n){this.keyData=void 0,this.decrypter=void 0,this.keyData=n,this.decrypter=new FP(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer)}decryptAacSample(e,t,n){const i=e[t].unit;if(i.length<=16)return;const s=i.subarray(16,i.length-i.length%16),a=s.buffer.slice(s.byteOffset,s.byteOffset+s.length);this.decryptBuffer(a).then(o=>{const l=new Uint8Array(o);i.set(l,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,n)})}decryptAacSamples(e,t,n){for(;;t++){if(t>=e.length){n();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,n),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,n=new Int8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)n.set(e.subarray(s,s+16),i);return n}getAvcDecryptedUnit(e,t){const n=new Uint8Array(t);let i=0;for(let s=32;s<e.length-16;s+=160,i+=16)e.set(n.subarray(i,i+16),s);return e}decryptAvcSample(e,t,n,i,s){const a=xJ(s.data),o=this.getAvcEncryptedData(a);this.decryptBuffer(o.buffer).then(l=>{s.data=this.getAvcDecryptedUnit(a,l),this.decrypter.isSync()||this.decryptAvcSamples(e,t,n+1,i)})}decryptAvcSamples(e,t,n,i){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,n=0){if(t>=e.length){i();return}const s=e[t].units;for(;!(n>=s.length);n++){const a=s[n];if(!(a.data.length<=48||a.type!==1&&a.type!==5)&&(this.decryptAvcSample(e,t,n,i,a),!this.decrypter.isSync()))return}}}}const yn=188;class sc{constructor(e,t,n){this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._duration=0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.videoParser=new art}static probe(e){const t=sc.syncOffset(e);return t>0&&re.warn(`MPEG2-TS detected but first sync word found @ offset ${t}`),t!==-1}static syncOffset(e){const t=e.length;let n=Math.min(yn*5,t-yn)+1,i=0;for(;i<n;){let s=!1,a=-1,o=0;for(let l=i;l<t;l+=yn)if(e[l]===71&&(t-l===yn||e[l+yn]===71)){if(o++,a===-1&&(a=l,a!==0&&(n=Math.min(a+yn*99,e.length-yn)+1)),s||(s=U$(e,l)===0),s&&o>1&&(a===0&&o>2||l+yn>n))return a}else{if(o)return-1;break}i++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:mJ[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,n,i){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=sc.createTrack("video"),this._audioTrack=sc.createTrack("audio",i),this._id3Track=sc.createTrack("id3"),this._txtTrack=sc.createTrack("text"),this._audioTrack.segmentCodec="aac",this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=n,this._duration=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:n}=this;e&&(e.pesData=null),t&&(t.pesData=null),n&&(n.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,n=!1,i=!1){n||(this.sampleAes=null);let s;const a=this._videoTrack,o=this._audioTrack,l=this._id3Track,c=this._txtTrack;let u=a.pid,d=a.pesData,h=o.pid,f=l.pid,m=o.pesData,g=l.pesData,y=null,b=this.pmtParsed,E=this._pmtId,w=e.length;if(this.remainderData&&(e=Ds(this.remainderData,e),w=e.length,this.remainderData=null),w<yn&&!i)return this.remainderData=e,{audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};const A=Math.max(0,sc.syncOffset(e));w-=(w-A)%yn,w<e.byteLength&&!i&&(this.remainderData=new Uint8Array(e.buffer,w,e.buffer.byteLength-w));let S=0;for(let C=A;C<w;C+=yn)if(e[C]===71){const k=!!(e[C+1]&64),D=U$(e,C),I=(e[C+3]&48)>>4;let L;if(I>1){if(L=C+5+e[C+4],L===C+yn)continue}else L=C+4;switch(D){case u:k&&(d&&(s=Ph(d))&&this.videoParser.parseAVCPES(a,c,s,!1,this._duration),d={data:[],size:0}),d&&(d.data.push(e.subarray(L,C+yn)),d.size+=C+yn-L);break;case h:if(k){if(m&&(s=Ph(m)))switch(o.segmentCodec){case"aac":this.parseAACPES(o,s);break;case"mp3":this.parseMPEGPES(o,s);break;case"ac3":this.parseAC3PES(o,s);break}m={data:[],size:0}}m&&(m.data.push(e.subarray(L,C+yn)),m.size+=C+yn-L);break;case f:k&&(g&&(s=Ph(g))&&this.parseID3PES(l,s),g={data:[],size:0}),g&&(g.data.push(e.subarray(L,C+yn)),g.size+=C+yn-L);break;case 0:k&&(L+=e[L]+1),E=this._pmtId=lrt(e,L);break;case E:{k&&(L+=e[L]+1);const M=crt(e,L,this.typeSupported,n,this.observer);u=M.videoPid,u>0&&(a.pid=u,a.segmentCodec=M.segmentVideoCodec),h=M.audioPid,h>0&&(o.pid=h,o.segmentCodec=M.segmentAudioCodec),f=M.id3Pid,f>0&&(l.pid=f),y!==null&&!b&&(re.warn(`MPEG-TS PMT found at ${C} after unknown PID '${y}'. Backtracking to sync byte @${A} to parse all TS packets.`),y=null,C=A-188),b=this.pmtParsed=!0;break}case 17:case 8191:break;default:y=D;break}}else S++;S>0&&_w(this.observer,new Error(`Found ${S} TS packet/s that do not start with 0x47`)),a.pesData=d,o.pesData=m,l.pesData=g;const _={audioTrack:o,videoTrack:a,id3Track:l,textTrack:c};return i&&this.extractRemainingSamples(_),_}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:n,id3Track:i,textTrack:s}=e,a=n.pesData,o=t.pesData,l=i.pesData;let c;if(a&&(c=Ph(a))?(this.videoParser.parseAVCPES(n,s,c,!0,this._duration),n.pesData=null):n.pesData=a,o&&(c=Ph(o))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,c);break;case"mp3":this.parseMPEGPES(t,c);break;case"ac3":this.parseAC3PES(t,c);break}t.pesData=null}else o!=null&&o.size&&re.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=o;l&&(c=Ph(l))?(this.parseID3PES(i,c),i.pesData=null):i.pesData=l}demuxSampleAes(e,t,n){const i=this.demux(e,n,!0,!this.config.progressive),s=this.sampleAes=new ort(this.observer,this.config,t);return this.decrypt(i,s)}decrypt(e,t){return new Promise(n=>{const{audioTrack:i,videoTrack:s}=e;i.samples&&i.segmentCodec==="aac"?t.decryptAacSamples(i.samples,0,()=>{s.samples?t.decryptAvcSamples(s.samples,0,0,()=>{n(e)}):n(e)}):s.samples&&t.decryptAvcSamples(s.samples,0,0,()=>{n(e)})})}destroy(){this._duration=0}parseAACPES(e,t){let n=0;const i=this.aacOverFlow;let s=t.data;if(i){this.aacOverFlow=null;const d=i.missing,h=i.sample.unit.byteLength;if(d===-1)s=Ds(i.sample.unit,s);else{const f=h-d;i.sample.unit.set(s.subarray(0,d),f),e.samples.push(i.sample),n=i.missing}}let a,o;for(a=n,o=s.length;a<o-1&&!Aw(s,a);a++);if(a!==n){let d;const h=a<o-1;if(h?d=`AAC PES did not start with ADTS header,offset:${a}`:d="No ADTS header found in AAC PES",_w(this.observer,new Error(d),h),!h)return}MJ(e,this.observer,s,a,this.audioCodec);let l;if(t.pts!==void 0)l=t.pts;else if(i){const d=NJ(e.samplerate);l=i.sample.pts+d}else{re.warn("[tsdemuxer]: AAC PES unknown PTS");return}let c=0,u;for(;a<o;)if(u=FJ(e,s,a,l,c),a+=u.length,u.missing){this.aacOverFlow=u;break}else for(c++;a<o-1&&!Aw(s,a);a++);}parseMPEGPES(e,t){const n=t.data,i=n.length;let s=0,a=0;const o=t.pts;if(o===void 0){re.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;a<i;)if(WJ(n,a)){const l=BJ(e,n,a,o,s);if(l)a+=l.length,s++;else break}else a++}parseAC3PES(e,t){{const n=t.data,i=t.pts;if(i===void 0){re.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const s=n.length;let a=0,o=0,l;for(;o<s&&(l=GJ(e,n,o,i,a++))>0;)o+=l}}parseID3PES(e,t){if(t.pts===void 0){re.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const n=tn({},t,{type:this._videoTrack?Js.emsg:Js.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(n)}}function U$(r,e){return((r[e+1]&31)<<8)+r[e+2]}function lrt(r,e){return(r[e+10]&31)<<8|r[e+11]}function crt(r,e,t,n,i){const s={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},a=(r[e+1]&15)<<8|r[e+2],o=e+3+a-4,l=(r[e+10]&15)<<8|r[e+11];for(e+=12+l;e<o;){const c=U$(r,e),u=(r[e+3]&15)<<8|r[e+4];switch(r[e]){case 207:if(!n){gR("ADTS AAC");break}case 15:s.audioPid===-1&&(s.audioPid=c);break;case 21:s.id3Pid===-1&&(s.id3Pid=c);break;case 219:if(!n){gR("H.264");break}case 27:s.videoPid===-1&&(s.videoPid=c,s.segmentVideoCodec="avc");break;case 3:case 4:!t.mpeg&&!t.mp3?re.log("MPEG audio found, not supported in this browser"):s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="mp3");break;case 193:if(!n){gR("AC-3");break}case 129:t.ac3?s.audioPid===-1&&(s.audioPid=c,s.segmentAudioCodec="ac3"):re.log("AC-3 audio found, not supported in this browser");break;case 6:if(s.audioPid===-1&&u>0){let d=e+5,h=u;for(;h>2;){switch(r[d]){case 106:t.ac3!==!0?re.log("AC-3 audio found, not supported in this browser for now"):(s.audioPid=c,s.segmentAudioCodec="ac3");break}const m=r[d+1]+2;d+=m,h-=m}}break;case 194:case 135:return _w(i,new Error("Unsupported EC-3 in M2TS found")),s;case 36:return _w(i,new Error("Unsupported HEVC in M2TS found")),s}e+=u+5}return s}function _w(r,e,t){re.warn(`parsing error: ${e.message}`),r.emit(P.ERROR,P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function gR(r){re.log(`${r} with AES-128-CBC encryption found in unencrypted stream`)}function Ph(r){let e=0,t,n,i,s,a;const o=r.data;if(!r||r.size===0)return null;for(;o[0].length<19&&o.length>1;)o[0]=Ds(o[0],o[1]),o.splice(1,1);if(t=o[0],(t[0]<<16)+(t[1]<<8)+t[2]===1){if(n=(t[4]<<8)+t[5],n&&n>r.size-6)return null;const c=t[7];c&192&&(s=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2,c&64?(a=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,s-a>60*9e4&&(re.warn(`${Math.round((s-a)/9e4)}s delta between PTS and DTS, align them`),s=a)):a=s),i=t[8];let u=i+9;if(r.size<=u)return null;r.size-=u;const d=new Uint8Array(r.size);for(let h=0,f=o.length;h<f;h++){t=o[h];let m=t.byteLength;if(u)if(u>m){u-=m;continue}else t=t.subarray(u),m-=u,u=0;d.set(t,e),e+=m}return n&&(n-=i+3),{data:d,pts:s,dts:a,len:n}}return null}class urt extends UP{resetInitSegment(e,t,n,i){super.resetInitSegment(e,t,n,i),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:i,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=H0(e,0);let n=t?.length||0;if(t&&e[n]===11&&e[n+1]===119&&OP(t)!==void 0&&VJ(e,n)<=16)return!1;for(let i=e.length;n<i;n++)if(HJ(e,n))return re.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return ert(e,t)}appendFrame(e,t,n){if(this.basePTS!==null)return BJ(e,t,n,this.basePTS,this.frameIndex)}}class qB{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const Hl=Math.pow(2,32)-1;class oe{static init(){oe.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in oe.types)oe.types.hasOwnProperty(e)&&(oe.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);oe.HDLR_TYPES={video:t,audio:n};const i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),s=new Uint8Array([0,0,0,0,0,0,0,0]);oe.STTS=oe.STSC=oe.STCO=s,oe.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),oe.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),oe.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),oe.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const a=new Uint8Array([105,115,111,109]),o=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);oe.FTYP=oe.box(oe.types.ftyp,a,l,a,o),oe.DINF=oe.box(oe.types.dinf,oe.box(oe.types.dref,i))}static box(e,...t){let n=8,i=t.length;const s=i;for(;i--;)n+=t[i].byteLength;const a=new Uint8Array(n);for(a[0]=n>>24&255,a[1]=n>>16&255,a[2]=n>>8&255,a[3]=n&255,a.set(e,4),i=0,n=8;i<s;i++)a.set(t[i],n),n+=t[i].byteLength;return a}static hdlr(e){return oe.box(oe.types.hdlr,oe.HDLR_TYPES[e])}static mdat(e){return oe.box(oe.types.mdat,e)}static mdhd(e,t){t*=e;const n=Math.floor(t/(Hl+1)),i=Math.floor(t%(Hl+1));return oe.box(oe.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,85,196,0,0]))}static mdia(e){return oe.box(oe.types.mdia,oe.mdhd(e.timescale,e.duration),oe.hdlr(e.type),oe.minf(e))}static mfhd(e){return oe.box(oe.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?oe.box(oe.types.minf,oe.box(oe.types.smhd,oe.SMHD),oe.DINF,oe.stbl(e)):oe.box(oe.types.minf,oe.box(oe.types.vmhd,oe.VMHD),oe.DINF,oe.stbl(e))}static moof(e,t,n){return oe.box(oe.types.moof,oe.mfhd(e),oe.traf(n,t))}static moov(e){let t=e.length;const n=[];for(;t--;)n[t]=oe.trak(e[t]);return oe.box.apply(null,[oe.types.moov,oe.mvhd(e[0].timescale,e[0].duration)].concat(n).concat(oe.mvex(e)))}static mvex(e){let t=e.length;const n=[];for(;t--;)n[t]=oe.trex(e[t]);return oe.box.apply(null,[oe.types.mvex,...n])}static mvhd(e,t){t*=e;const n=Math.floor(t/(Hl+1)),i=Math.floor(t%(Hl+1)),s=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,n>>24,n>>16&255,n>>8&255,n&255,i>>24,i>>16&255,i>>8&255,i&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return oe.box(oe.types.mvhd,s)}static sdtp(e){const t=e.samples||[],n=new Uint8Array(4+t.length);let i,s;for(i=0;i<t.length;i++)s=t[i].flags,n[i+4]=s.dependsOn<<4|s.isDependedOn<<2|s.hasRedundancy;return oe.box(oe.types.sdtp,n)}static stbl(e){return oe.box(oe.types.stbl,oe.stsd(e),oe.box(oe.types.stts,oe.STTS),oe.box(oe.types.stsc,oe.STSC),oe.box(oe.types.stsz,oe.STSZ),oe.box(oe.types.stco,oe.STCO))}static avc1(e){let t=[],n=[],i,s,a;for(i=0;i<e.sps.length;i++)s=e.sps[i],a=s.byteLength,t.push(a>>>8&255),t.push(a&255),t=t.concat(Array.prototype.slice.call(s));for(i=0;i<e.pps.length;i++)s=e.pps[i],a=s.byteLength,n.push(a>>>8&255),n.push(a&255),n=n.concat(Array.prototype.slice.call(s));const o=oe.box(oe.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(n))),l=e.width,c=e.height,u=e.pixelRatio[0],d=e.pixelRatio[1];return oe.box(oe.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,l&255,c>>8&255,c&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),o,oe.box(oe.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),oe.box(oe.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,u&255,d>>24,d>>16&255,d>>8&255,d&255])))}static esds(e){const t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))}static audioStsd(e){const t=e.samplerate;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return oe.box(oe.types.mp4a,oe.audioStsd(e),oe.box(oe.types.esds,oe.esds(e)))}static mp3(e){return oe.box(oe.types[".mp3"],oe.audioStsd(e))}static ac3(e){return oe.box(oe.types["ac-3"],oe.audioStsd(e),oe.box(oe.types.dac3,e.config))}static stsd(e){return e.type==="audio"?e.segmentCodec==="mp3"&&e.codec==="mp3"?oe.box(oe.types.stsd,oe.STSD,oe.mp3(e)):e.segmentCodec==="ac3"?oe.box(oe.types.stsd,oe.STSD,oe.ac3(e)):oe.box(oe.types.stsd,oe.STSD,oe.mp4a(e)):oe.box(oe.types.stsd,oe.STSD,oe.avc1(e))}static tkhd(e){const t=e.id,n=e.duration*e.timescale,i=e.width,s=e.height,a=Math.floor(n/(Hl+1)),o=Math.floor(n%(Hl+1));return oe.box(oe.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,o>>24,o>>16&255,o>>8&255,o&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,i>>8&255,i&255,0,0,s>>8&255,s&255,0,0]))}static traf(e,t){const n=oe.sdtp(e),i=e.id,s=Math.floor(t/(Hl+1)),a=Math.floor(t%(Hl+1));return oe.box(oe.types.traf,oe.box(oe.types.tfhd,new Uint8Array([0,0,0,0,i>>24,i>>16&255,i>>8&255,i&255])),oe.box(oe.types.tfdt,new Uint8Array([1,0,0,0,s>>24,s>>16&255,s>>8&255,s&255,a>>24,a>>16&255,a>>8&255,a&255])),oe.trun(e,n.length+16+20+8+16+8+8),n)}static trak(e){return e.duration=e.duration||4294967295,oe.box(oe.types.trak,oe.tkhd(e),oe.mdia(e))}static trex(e){const t=e.id;return oe.box(oe.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const n=e.samples||[],i=n.length,s=12+16*i,a=new Uint8Array(s);let o,l,c,u,d,h;for(t+=8+s,a.set([e.type==="video"?1:0,0,15,1,i>>>24&255,i>>>16&255,i>>>8&255,i&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),o=0;o<i;o++)l=n[o],c=l.duration,u=l.size,d=l.flags,h=l.cts,a.set([c>>>24&255,c>>>16&255,c>>>8&255,c&255,u>>>24&255,u>>>16&255,u>>>8&255,u&255,d.isLeading<<2|d.dependsOn,d.isDependedOn<<6|d.hasRedundancy<<4|d.paddingValue<<1|d.isNonSync,d.degradPrio&61440,d.degradPrio&15,h>>>24&255,h>>>16&255,h>>>8&255,h&255],12+16*o);return oe.box(oe.types.trun,a)}static initSegment(e){oe.types||oe.init();const t=oe.moov(e);return Ds(oe.FTYP,t)}}oe.types=void 0;oe.HDLR_TYPES=void 0;oe.STTS=void 0;oe.STSC=void 0;oe.STCO=void 0;oe.STSZ=void 0;oe.VMHD=void 0;oe.SMHD=void 0;oe.STSD=void 0;oe.FTYP=void 0;oe.DINF=void 0;const qJ=9e4;function VP(r,e,t=1,n=!1){const i=r*e*t;return n?Math.round(i):i}function drt(r,e,t=1,n=!1){return VP(r,e,1/t,n)}function Mm(r,e=!1){return VP(r,1e3,1/qJ,e)}function hrt(r,e=1){return VP(r,qJ,1/e)}const frt=10*1e3,jB=1024,prt=1152,mrt=1536;let Mh=null,vR=null;class j1{constructor(e,t,n,i=""){if(this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextAvcDts=null,this.nextAudioPts=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=n,this.ISGenerated=!1,Mh===null){const a=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Mh=a?parseInt(a[1]):0}if(vR===null){const s=navigator.userAgent.match(/Safari\/(\d+)/i);vR=s?parseInt(s[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){re.log("[mp4-remuxer]: initPTS & initDTS reset"),this._initPTS=this._initDTS=e}resetNextTimestamp(){re.log("[mp4-remuxer]: reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){re.log("[mp4-remuxer]: ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const n=e[0].pts,i=e.reduce((s,a)=>{let o=a.pts,l=o-s;return l<-4294967296&&(t=!0,o=As(o,n),l=o-s),l>0?s:o},n);return t&&re.debug("PTS rollover detected"),i}remux(e,t,n,i,s,a,o,l){let c,u,d,h,f,m,g=s,y=s;const b=e.pid>-1,E=t.pid>-1,w=t.samples.length,A=e.samples.length>0,S=o&&w>0||w>1;if((!b||A)&&(!E||S)||this.ISGenerated||o){if(this.ISGenerated){var C,k,D,I;const U=this.videoTrackConfig;U&&(t.width!==U.width||t.height!==U.height||((C=t.pixelRatio)==null?void 0:C[0])!==((k=U.pixelRatio)==null?void 0:k[0])||((D=t.pixelRatio)==null?void 0:D[1])!==((I=U.pixelRatio)==null?void 0:I[1]))&&this.resetInitSegment()}else d=this.generateIS(e,t,s,a);const L=this.isVideoContiguous;let M=-1,F;if(S&&(M=grt(t.samples),!L&&this.config.forceKeyFrameOnDiscontinuity))if(m=!0,M>0){re.warn(`[mp4-remuxer]: Dropped ${M} out of ${w} video samples due to a missing keyframe`);const U=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(M),t.dropped+=M,y+=(t.samples[0].pts-U)/t.inputTimeScale,F=y}else M===-1&&(re.warn(`[mp4-remuxer]: No keyframe found out of ${w} video samples`),m=!1);if(this.ISGenerated){if(A&&S){const U=this.getVideoStartPts(t.samples),j=(As(e.samples[0].pts,U)-U)/t.inputTimeScale;g+=Math.max(0,j),y+=Math.max(0,-j)}if(A){if(e.samplerate||(re.warn("[mp4-remuxer]: regenerate InitSegment as audio detected"),d=this.generateIS(e,t,s,a)),u=this.remuxAudio(e,g,this.isAudioContiguous,a,E||S||l===nt.AUDIO?y:void 0),S){const U=u?u.endPTS-u.startPTS:0;t.inputTimeScale||(re.warn("[mp4-remuxer]: regenerate InitSegment as video detected"),d=this.generateIS(e,t,s,a)),c=this.remuxVideo(t,y,L,U)}}else S&&(c=this.remuxVideo(t,y,L,0));c&&(c.firstKeyFrame=M,c.independent=M!==-1,c.firstKeyFramePTS=F)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(n.samples.length&&(f=jJ(n,s,this._initPTS,this._initDTS)),i.samples.length&&(h=KJ(i,s,this._initPTS))),{audio:u,video:c,initSegment:d,independent:m,text:h,id3:f}}generateIS(e,t,n,i){const s=e.samples,a=t.samples,o=this.typeSupported,l={},c=this._initPTS;let u=!c||i,d="audio/mp4",h,f,m;if(u&&(h=f=1/0),e.config&&s.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":o.mpeg?(d="audio/mpeg",e.codec=""):o.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}l.audio={id:"audio",container:d,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&o.mpeg?new Uint8Array(0):oe.initSegment([e]),metadata:{channelCount:e.channelCount}},u&&(m=e.inputTimeScale,!c||m!==c.timescale?h=f=s[0].pts-Math.round(m*n):u=!1)}if(t.sps&&t.pps&&a.length){if(t.timescale=t.inputTimeScale,l.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:oe.initSegment([t]),metadata:{width:t.width,height:t.height}},u)if(m=t.inputTimeScale,!c||m!==c.timescale){const g=this.getVideoStartPts(a),y=Math.round(m*n);f=Math.min(f,As(a[0].dts,g)-y),h=Math.min(h,g-y)}else u=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(l).length)return this.ISGenerated=!0,u?(this._initPTS={baseTime:h,timescale:m},this._initDTS={baseTime:f,timescale:m}):h=m=void 0,{tracks:l,initPTS:h,timescale:m}}remuxVideo(e,t,n,i){const s=e.inputTimeScale,a=e.samples,o=[],l=a.length,c=this._initPTS;let u=this.nextAvcDts,d=8,h=this.videoSampleDuration,f,m,g=Number.POSITIVE_INFINITY,y=Number.NEGATIVE_INFINITY,b=!1;if(!n||u===null){const V=t*s,Y=a[0].pts-As(a[0].dts,a[0].pts);Mh&&u!==null&&Math.abs(V-Y-u)<15e3?n=!0:u=V-Y}const E=c.baseTime*s/c.timescale;for(let V=0;V<l;V++){const Y=a[V];Y.pts=As(Y.pts-E,u),Y.dts=As(Y.dts-E,u),Y.dts<a[V>0?V-1:V].dts&&(b=!0)}b&&a.sort(function(V,Y){const J=V.dts-Y.dts,ue=V.pts-Y.pts;return J||ue}),f=a[0].dts,m=a[a.length-1].dts;const w=m-f,A=w?Math.round(w/(l-1)):h||e.inputTimeScale/30;if(n){const V=f-u,Y=V>A,J=V<-1;if((Y||J)&&(Y?re.warn(`AVC: ${Mm(V,!0)} ms (${V}dts) hole between fragments detected at ${t.toFixed(3)}`):re.warn(`AVC: ${Mm(-V,!0)} ms (${V}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!J||u>=a[0].pts||Mh)){f=u;const ue=a[0].pts-V;if(Y)a[0].dts=f,a[0].pts=ue;else for(let ne=0;ne<a.length&&!(a[ne].dts>ue);ne++)a[ne].dts-=V,a[ne].pts-=V;re.log(`Video: Initial PTS/DTS adjusted: ${Mm(ue,!0)}/${Mm(f,!0)}, delta: ${Mm(V,!0)} ms`)}}f=Math.max(0,f);let S=0,_=0,C=f;for(let V=0;V<l;V++){const Y=a[V],J=Y.units,ue=J.length;let ne=0;for(let ge=0;ge<ue;ge++)ne+=J[ge].data.length;_+=ne,S+=ue,Y.length=ne,Y.dts<C?(Y.dts=C,C+=A/4|0||1):C=Y.dts,g=Math.min(Y.pts,g),y=Math.max(Y.pts,y)}m=a[l-1].dts;const k=_+4*S+8;let D;try{D=new Uint8Array(k)}catch(V){this.observer.emit(P.ERROR,P.ERROR,{type:at.MUX_ERROR,details:ce.REMUX_ALLOC_ERROR,fatal:!1,error:V,bytes:k,reason:`fail allocating video mdat ${k}`});return}const I=new DataView(D.buffer);I.setUint32(0,k),D.set(oe.types.mdat,4);let L=!1,M=Number.POSITIVE_INFINITY,F=Number.POSITIVE_INFINITY,U=Number.NEGATIVE_INFINITY,W=Number.NEGATIVE_INFINITY;for(let V=0;V<l;V++){const Y=a[V],J=Y.units;let ue=0;for(let ae=0,ie=J.length;ae<ie;ae++){const ee=J[ae],be=ee.data,we=ee.data.byteLength;I.setUint32(d,we),d+=4,D.set(be,d),d+=we,ue+=4+we}let ne;if(V<l-1)h=a[V+1].dts-Y.dts,ne=a[V+1].pts-Y.pts;else{const ae=this.config,ie=V>0?Y.dts-a[V-1].dts:A;if(ne=V>0?Y.pts-a[V-1].pts:A,ae.stretchShortVideoTrack&&this.nextAudioPts!==null){const ee=Math.floor(ae.maxBufferHole*s),be=(i?g+i*s:this.nextAudioPts)-Y.pts;be>ee?(h=be-ie,h<0?h=ie:L=!0,re.log(`[mp4-remuxer]: It is approximately ${be/90} ms to the next segment; using duration ${h/90} ms for the last video frame.`)):h=ie}else h=ie}const ge=Math.round(Y.pts-Y.dts);M=Math.min(M,h),U=Math.max(U,h),F=Math.min(F,ne),W=Math.max(W,ne),o.push(new KB(Y.key,h,ue,ge))}if(o.length){if(Mh){if(Mh<70){const V=o[0].flags;V.dependsOn=2,V.isNonSync=0}}else if(vR&&W-F<U-M&&A/U<.025&&o[0].cts===0){re.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let V=f;for(let Y=0,J=o.length;Y<J;Y++){const ue=V+o[Y].duration,ne=V+o[Y].cts;if(Y<J-1){const ge=ue+o[Y+1].cts;o[Y].duration=ge-ne}else o[Y].duration=Y?o[Y-1].duration:A;o[Y].cts=0,V=ue}}}h=L||!h?A:h,this.nextAvcDts=u=m+h,this.videoSampleDuration=h,this.isVideoContiguous=!0;const Q={data1:oe.moof(e.sequenceNumber++,f,tn({},e,{samples:o})),data2:D,startPTS:g/s,endPTS:(y+h)/s,startDTS:f/s,endDTS:u/s,type:"video",hasAudio:!1,hasVideo:!0,nb:o.length,dropped:e.dropped};return e.samples=[],e.dropped=0,Q}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return prt;case"ac3":return mrt;default:return jB}}remuxAudio(e,t,n,i,s){const a=e.inputTimeScale,o=e.samplerate?e.samplerate:a,l=a/o,c=this.getSamplesPerFrame(e),u=c*l,d=this._initPTS,h=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,f=[],m=s!==void 0;let g=e.samples,y=h?0:8,b=this.nextAudioPts||-1;const E=t*a,w=d.baseTime*a/d.timescale;if(this.isAudioContiguous=n=n||g.length&&b>0&&(i&&Math.abs(E-b)<9e3||Math.abs(As(g[0].pts-w,E)-b)<20*u),g.forEach(function(j){j.pts=As(j.pts-w,E)}),!n||b<0){if(g=g.filter(j=>j.pts>=0),!g.length)return;s===0?b=0:i&&!m?b=Math.max(0,E):b=g[0].pts}if(e.segmentCodec==="aac"){const j=this.config.maxAudioFramesDrift;for(let z=0,Q=b;z<g.length;z++){const V=g[z],Y=V.pts,J=Y-Q,ue=Math.abs(1e3*J/a);if(J<=-j*u&&m)z===0&&(re.warn(`Audio frame @ ${(Y/a).toFixed(3)}s overlaps nextAudioPts by ${Math.round(1e3*J/a)} ms.`),this.nextAudioPts=b=Q=Y);else if(J>=j*u&&ue<frt&&m){let ne=Math.round(J/u);Q=Y-ne*u,Q<0&&(ne--,Q+=u),z===0&&(this.nextAudioPts=b=Q),re.warn(`[mp4-remuxer]: Injecting ${ne} audio frame @ ${(Q/a).toFixed(3)}s due to ${Math.round(1e3*J/a)} ms gap.`);for(let ge=0;ge<ne;ge++){const ae=Math.max(Q,0);let ie=qB.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);ie||(re.log("[mp4-remuxer]: Unable to get silent frame for given audio codec; duplicating last frame instead."),ie=V.unit.subarray()),g.splice(z,0,{unit:ie,pts:ae}),Q+=u,z++}}V.pts=Q,Q+=u}}let A=null,S=null,_,C=0,k=g.length;for(;k--;)C+=g[k].unit.byteLength;for(let j=0,z=g.length;j<z;j++){const Q=g[j],V=Q.unit;let Y=Q.pts;if(S!==null){const ue=f[j-1];ue.duration=Math.round((Y-S)/l)}else if(n&&e.segmentCodec==="aac"&&(Y=b),A=Y,C>0){C+=y;try{_=new Uint8Array(C)}catch(ue){this.observer.emit(P.ERROR,P.ERROR,{type:at.MUX_ERROR,details:ce.REMUX_ALLOC_ERROR,fatal:!1,error:ue,bytes:C,reason:`fail allocating audio mdat ${C}`});return}h||(new DataView(_.buffer).setUint32(0,C),_.set(oe.types.mdat,4))}else return;_.set(V,y);const J=V.byteLength;y+=J,f.push(new KB(!0,c,J,0)),S=Y}const D=f.length;if(!D)return;const I=f[f.length-1];this.nextAudioPts=b=S+l*I.duration;const L=h?new Uint8Array(0):oe.moof(e.sequenceNumber++,A/l,tn({},e,{samples:f}));e.samples=[];const M=A/a,F=b/a,W={data1:L,data2:_,startPTS:M,endPTS:F,startDTS:M,endDTS:F,type:"audio",hasAudio:!0,hasVideo:!1,nb:D};return this.isAudioContiguous=!0,W}remuxEmptyAudio(e,t,n,i){const s=e.inputTimeScale,a=e.samplerate?e.samplerate:s,o=s/a,l=this.nextAudioPts,c=this._initDTS,u=c.baseTime*9e4/c.timescale,d=(l!==null?l:i.startDTS*s)+u,h=i.endDTS*s+u,f=o*jB,m=Math.ceil((h-d)/f),g=qB.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(re.warn("[mp4-remuxer]: remux empty Audio"),!g){re.trace("[mp4-remuxer]: Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec");return}const y=[];for(let b=0;b<m;b++){const E=d+b*f;y.push({unit:g,pts:E,dts:E})}return e.samples=y,this.remuxAudio(e,t,n,!1)}}function As(r,e){let t;if(e===null)return r;for(e<r?t=-8589934592:t=8589934592;Math.abs(r-e)>4294967296;)r+=t;return r}function grt(r){for(let e=0;e<r.length;e++)if(r[e].key)return e;return-1}function jJ(r,e,t,n){const i=r.samples.length;if(!i)return;const s=r.inputTimeScale;for(let o=0;o<i;o++){const l=r.samples[o];l.pts=As(l.pts-t.baseTime*s/t.timescale,e*s)/s,l.dts=As(l.dts-n.baseTime*s/n.timescale,e*s)/s}const a=r.samples;return r.samples=[],{samples:a}}function KJ(r,e,t){const n=r.samples.length;if(!n)return;const i=r.inputTimeScale;for(let a=0;a<n;a++){const o=r.samples[a];o.pts=As(o.pts-t.baseTime*i/t.timescale,e*i)/i}r.samples.sort((a,o)=>a.pts-o.pts);const s=r.samples;return r.samples=[],{samples:s}}class KB{constructor(e,t,n,i){this.size=void 0,this.duration=void 0,this.cts=void 0,this.flags=void 0,this.duration=t,this.size=n,this.cts=i,this.flags={isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:e?2:1,isNonSync:e?0:1}}}class vrt{constructor(){this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null}destroy(){}resetTimeStamp(e){this.initPTS=e,this.lastEndTime=null}resetNextTimestamp(){this.lastEndTime=null}resetInitSegment(e,t,n,i){this.audioCodec=t,this.videoCodec=n,this.generateInitSegment(wet(e,i)),this.emitInitSegment=!0}generateInitSegment(e){let{audioCodec:t,videoCodec:n}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const i=this.initData=yJ(e);i.audio&&(t=zB(i.audio,jt.AUDIO)),i.video&&(n=zB(i.video,jt.VIDEO));const s={};i.audio&&i.video?s.audiovideo={container:"video/mp4",codec:t+","+n,initSegment:e,id:"main"}:i.audio?s.audio={container:"audio/mp4",codec:t,initSegment:e,id:"audio"}:i.video?s.video={container:"video/mp4",codec:n,initSegment:e,id:"main"}:re.warn("[passthrough-remuxer.ts]: initSegment does not contain moov or trak boxes."),this.initTracks=s}remux(e,t,n,i,s,a){var o,l;let{initPTS:c,lastEndTime:u}=this;const d={audio:void 0,video:void 0,text:i,id3:n,initSegment:void 0};Ve(u)||(u=this.lastEndTime=s||0);const h=t.samples;if(!(h!=null&&h.length))return d;const f={initPTS:void 0,timescale:1};let m=this.initData;if((o=m)!=null&&o.length||(this.generateInitSegment(h),m=this.initData),!((l=m)!=null&&l.length))return re.warn("[passthrough-remuxer.ts]: Failed to generate initSegment."),d;this.emitInitSegment&&(f.tracks=this.initTracks,this.emitInitSegment=!1);const g=Aet(h,m),y=Tet(m,h),b=y===null?s:y;(yrt(c,b,s,g)||f.timescale!==c.timescale&&a)&&(f.initPTS=b-s,c&&c.timescale===1&&re.warn(`Adjusting initPTS by ${f.initPTS-c.baseTime}`),this.initPTS=c={baseTime:f.initPTS,timescale:1});const E=e?b-c.baseTime/c.timescale:u,w=E+g;Cet(m,h,c.baseTime/c.timescale),g>0?this.lastEndTime=w:(re.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const A=!!m.audio,S=!!m.video;let _="";A&&(_+="audio"),S&&(_+="video");const C={data1:h,startPTS:E,startDTS:E,endPTS:w,endDTS:w,type:_,hasAudio:A,hasVideo:S,nb:1,dropped:0};return d.audio=C.type==="audio"?C:void 0,d.video=C.type!=="audio"?C:void 0,d.initSegment=f,d.id3=jJ(n,s,c,c),i.samples.length&&(d.text=KJ(i,s,c)),d}}function yrt(r,e,t,n){if(r===null)return!0;const i=Math.max(n,1),s=e-r.baseTime/r.timescale;return Math.abs(s-t)>i}function zB(r,e){const t=r?.codec;if(t&&t.length>4)return t;if(e===jt.AUDIO){if(t==="ec-3"||t==="ac-3"||t==="alac")return t;if(t==="fLaC"||t==="Opus")return bw(t,!1);const n="mp4a.40.5";return re.info(`Parsed audio codec "${t}" or audio object type not handled. Using "${n}"`),n}return re.warn(`Unhandled video codec "${t}"`),t==="hvc1"||t==="hev1"?"hvc1.1.6.L120.90":t==="av01"?"av01.0.04M.08":"avc1.42e01e"}let tl;try{tl=self.performance.now.bind(self.performance)}catch{re.debug("Unable to use Performance API on this environment"),tl=yp?.Date.now}const K1=[{demux:nrt,remux:vrt},{demux:sc,remux:j1},{demux:trt,remux:j1},{demux:urt,remux:j1}];K1.splice(2,0,{demux:irt,remux:j1});class YB{constructor(e,t,n,i,s){this.async=!1,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.vendor=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=n,this.vendor=i,this.id=s}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,n,i){const s=n.transmuxing;s.executeStart=tl();let a=new Uint8Array(e);const{currentTransmuxState:o,transmuxConfig:l}=this;i&&(this.currentTransmuxState=i);const{contiguous:c,discontinuity:u,trackSwitch:d,accurateTimeOffset:h,timeOffset:f,initSegmentChange:m}=i||o,{audioCodec:g,videoCodec:y,defaultInitPts:b,duration:E,initSegmentData:w}=l,A=brt(a,t);if(A&&A.method==="AES-128"){const k=this.getDecrypter();if(k.isSync()){let D=k.softwareDecrypt(a,A.key.buffer,A.iv.buffer);if(n.part>-1&&(D=k.flush()),!D)return s.executeEnd=tl(),yR(n);a=new Uint8Array(D)}else return this.decryptionPromise=k.webCryptoDecrypt(a,A.key.buffer,A.iv.buffer).then(D=>{const I=this.push(D,null,n);return this.decryptionPromise=null,I}),this.decryptionPromise}const S=this.needsProbing(u,d);if(S){const k=this.configureTransmuxer(a);if(k)return re.warn(`[transmuxer] ${k.message}`),this.observer.emit(P.ERROR,P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_PARSING_ERROR,fatal:!1,error:k,reason:k.message}),s.executeEnd=tl(),yR(n)}(u||d||m||S)&&this.resetInitSegment(w,g,y,E,t),(u||m||S)&&this.resetInitialTimestamp(b),c||this.resetContiguity();const _=this.transmux(a,A,f,h,n),C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,s.executeEnd=tl(),_}flush(e){const t=e.transmuxing;t.executeStart=tl();const{decrypter:n,currentTransmuxState:i,decryptionPromise:s}=this;if(s)return s.then(()=>this.flush(e));const a=[],{timeOffset:o}=i;if(n){const d=n.flush();d&&a.push(this.push(d,null,e))}const{demuxer:l,remuxer:c}=this;if(!l||!c)return t.executeEnd=tl(),[yR(e)];const u=l.flush(o);return z1(u)?u.then(d=>(this.flushRemux(a,d,e),a)):(this.flushRemux(a,u,e),a)}flushRemux(e,t,n){const{audioTrack:i,videoTrack:s,id3Track:a,textTrack:o}=t,{accurateTimeOffset:l,timeOffset:c}=this.currentTransmuxState;re.log(`[transmuxer.ts]: Flushed fragment ${n.sn}${n.part>-1?" p: "+n.part:""} of level ${n.level}`);const u=this.remuxer.remux(i,s,a,o,c,l,!0,this.id);e.push({remuxResult:u,chunkMeta:n}),n.transmuxing.executeEnd=tl()}resetInitialTimestamp(e){const{demuxer:t,remuxer:n}=this;!t||!n||(t.resetTimeStamp(e),n.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,n,i,s){const{demuxer:a,remuxer:o}=this;!a||!o||(a.resetInitSegment(e,t,n,i),o.resetInitSegment(e,t,n,s))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,n,i,s){let a;return t&&t.method==="SAMPLE-AES"?a=this.transmuxSampleAes(e,t,n,i,s):a=this.transmuxUnencrypted(e,n,i,s),a}transmuxUnencrypted(e,t,n,i){const{audioTrack:s,videoTrack:a,id3Track:o,textTrack:l}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(s,a,o,l,t,n,!1,this.id),chunkMeta:i}}transmuxSampleAes(e,t,n,i,s){return this.demuxer.demuxSampleAes(e,t,n).then(a=>({remuxResult:this.remuxer.remux(a.audioTrack,a.videoTrack,a.id3Track,a.textTrack,n,i,!1,this.id),chunkMeta:s}))}configureTransmuxer(e){const{config:t,observer:n,typeSupported:i,vendor:s}=this;let a;for(let h=0,f=K1.length;h<f;h++){var o;if((o=K1[h].demux)!=null&&o.probe(e)){a=K1[h];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const l=this.demuxer,c=this.remuxer,u=a.remux,d=a.demux;(!c||!(c instanceof u))&&(this.remuxer=new u(n,t,i,s)),(!l||!(l instanceof d))&&(this.demuxer=new d(n,t,i),this.probe=d.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new FP(this.config)),e}}function brt(r,e){let t=null;return r.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const yR=r=>({remuxResult:{},chunkMeta:r});function z1(r){return"then"in r&&r.then instanceof Function}class Ert{constructor(e,t,n,i,s){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=n,this.duration=i,this.defaultInitPts=s||null}}class xrt{constructor(e,t,n,i,s,a){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=n,this.trackSwitch=i,this.timeOffset=s,this.initSegmentChange=a}}var zJ={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),m=t?t+c:c;return l._events[m]?l._events[m].fn?l._events[m]=[l._events[m],f]:l._events[m].push(f):(l._events[m]=f,l._eventsCount++),l}function a(l,c){--l._eventsCount===0?l._events=new n:delete l._events[c]}function o(){this._events=new n,this._eventsCount=0}o.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(t?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},o.prototype.listeners=function(c){var u=t?t+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,m=new Array(f);h<f;h++)m[h]=d[h].fn;return m},o.prototype.listenerCount=function(c){var u=t?t+c:c,d=this._events[u];return d?d.fn?1:d.length:0},o.prototype.emit=function(c,u,d,h,f,m){var g=t?t+c:c;if(!this._events[g])return!1;var y=this._events[g],b=arguments.length,E,w;if(y.fn){switch(y.once&&this.removeListener(c,y.fn,void 0,!0),b){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,u),!0;case 3:return y.fn.call(y.context,u,d),!0;case 4:return y.fn.call(y.context,u,d,h),!0;case 5:return y.fn.call(y.context,u,d,h,f),!0;case 6:return y.fn.call(y.context,u,d,h,f,m),!0}for(w=1,E=new Array(b-1);w<b;w++)E[w-1]=arguments[w];y.fn.apply(y.context,E)}else{var A=y.length,S;for(w=0;w<A;w++)switch(y[w].once&&this.removeListener(c,y[w].fn,void 0,!0),b){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,u);break;case 3:y[w].fn.call(y[w].context,u,d);break;case 4:y[w].fn.call(y[w].context,u,d,h);break;default:if(!E)for(S=1,E=new Array(b-1);S<b;S++)E[S-1]=arguments[S];y[w].fn.apply(y[w].context,E)}}return!0},o.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},o.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},o.prototype.removeListener=function(c,u,d,h){var f=t?t+c:c;if(!this._events[f])return this;if(!u)return a(this,f),this;var m=this._events[f];if(m.fn)m.fn===u&&(!h||m.once)&&(!d||m.context===d)&&a(this,f);else{for(var g=0,y=[],b=m.length;g<b;g++)(m[g].fn!==u||h&&!m[g].once||d&&m[g].context!==d)&&y.push(m[g]);y.length?this._events[f]=y.length===1?y[0]:y:a(this,f)}return this},o.prototype.removeAllListeners=function(c){var u;return c?(u=t?t+c:c,this._events[u]&&a(this,u)):(this._events=new n,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=t,o.EventEmitter=o,r.exports=o})(zJ);var wrt=zJ.exports,GP=VJe(wrt);class YJ{constructor(e,t,n,i){this.error=null,this.hls=void 0,this.id=void 0,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.onwmsg=void 0,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0;const s=e.config;this.hls=e,this.id=t,this.useWorker=!!s.enableWorker,this.onTransmuxComplete=n,this.onFlush=i;const a=(c,u)=>{u=u||{},u.frag=this.frag,u.id=this.id,c===P.ERROR&&(this.error=u.error),this.hls.trigger(c,u)};this.observer=new GP,this.observer.on(P.FRAG_DECRYPTED,a),this.observer.on(P.ERROR,a);const o=Fd(s.preferManagedMediaSource)||{isTypeSupported:()=>!1},l={mpeg:o.isTypeSupported("audio/mpeg"),mp3:o.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:o.isTypeSupported('audio/mp4; codecs="ac-3"')};if(this.useWorker&&typeof Worker<"u"&&(s.workerPath||Wtt())){try{s.workerPath?(re.log(`loading Web Worker ${s.workerPath} for "${t}"`),this.workerContext=Vtt(s.workerPath)):(re.log(`injecting Web Worker for "${t}"`),this.workerContext=Htt()),this.onwmsg=d=>this.onWorkerMessage(d);const{worker:u}=this.workerContext;u.addEventListener("message",this.onwmsg),u.onerror=d=>{const h=new Error(`${d.message}  (${d.filename}:${d.lineno})`);s.enableWorker=!1,re.warn(`Error in "${t}" Web Worker, fallback to inline`),this.hls.trigger(P.ERROR,{type:at.OTHER_ERROR,details:ce.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:h})},u.postMessage({cmd:"init",typeSupported:l,vendor:"",id:t,config:JSON.stringify(s)})}catch(u){re.warn(`Error setting up "${t}" Web Worker, fallback to inline`,u),this.resetWorker(),this.error=null,this.transmuxer=new YB(this.observer,l,s,"",t)}return}this.transmuxer=new YB(this.observer,l,s,"",t)}resetWorker(){if(this.workerContext){const{worker:e,objectURL:t}=this.workerContext;t&&self.URL.revokeObjectURL(t),e.removeEventListener("message",this.onwmsg),e.onerror=null,e.terminate(),this.workerContext=null}}destroy(){if(this.workerContext)this.resetWorker(),this.onwmsg=void 0;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.observer=null,this.hls=null}push(e,t,n,i,s,a,o,l,c,u){var d,h;c.transmuxing.start=self.performance.now();const{transmuxer:f}=this,m=a?a.start:s.start,g=s.decryptdata,y=this.frag,b=!(y&&s.cc===y.cc),E=!(y&&c.level===y.level),w=y?c.sn-y.sn:-1,A=this.part?c.part-this.part.index:-1,S=w===0&&c.id>1&&c.id===y?.stats.chunkCount,_=!E&&(w===1||w===0&&(A===1||S&&A<=0)),C=self.performance.now();(E||w||s.stats.parsing.start===0)&&(s.stats.parsing.start=C),a&&(A||!_)&&(a.stats.parsing.start=C);const k=!(y&&((d=s.initSegment)==null?void 0:d.url)===((h=y.initSegment)==null?void 0:h.url)),D=new xrt(b,_,l,E,m,k);if(!_||b||k){re.log(`[transmuxer-interface, ${s.type}]: Starting new transmux session for sn: ${c.sn} p: ${c.part} level: ${c.level} id: ${c.id}
        discontinuity: ${b}
        trackSwitch: ${E}
        contiguous: ${_}
        accurateTimeOffset: ${l}
        timeOffset: ${m}
        initSegmentChange: ${k}`);const I=new Ert(n,i,t,o,u);this.configureTransmuxer(I)}if(this.frag=s,this.part=a,this.workerContext)this.workerContext.worker.postMessage({cmd:"demux",data:e,decryptdata:g,chunkMeta:c,state:D},e instanceof ArrayBuffer?[e]:[]);else if(f){const I=f.push(e,g,c,D);z1(I)?(f.async=!0,I.then(L=>{this.handleTransmuxComplete(L)}).catch(L=>{this.transmuxerError(L,c,"transmuxer-interface push error")})):(f.async=!1,this.handleTransmuxComplete(I))}}flush(e){e.transmuxing.start=self.performance.now();const{transmuxer:t}=this;if(this.workerContext)this.workerContext.worker.postMessage({cmd:"flush",chunkMeta:e});else if(t){let n=t.flush(e);z1(n)||t.async?(z1(n)||(n=Promise.resolve(n)),n.then(s=>{this.handleFlushResult(s,e)}).catch(s=>{this.transmuxerError(s,e,"transmuxer-interface flush error")})):this.handleFlushResult(n,e)}}transmuxerError(e,t,n){this.hls&&(this.error=e,this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,fatal:!1,error:e,err:e,reason:n}))}handleFlushResult(e,t){e.forEach(n=>{this.handleTransmuxComplete(n)}),this.onFlush(t)}onWorkerMessage(e){const t=e.data;if(!(t!=null&&t.event)){re.warn(`worker message received with no ${t?"event name":"data"}`);return}const n=this.hls;if(this.hls)switch(t.event){case"init":{var i;const s=(i=this.workerContext)==null?void 0:i.objectURL;s&&self.URL.revokeObjectURL(s);break}case"transmuxComplete":{this.handleTransmuxComplete(t.data);break}case"flush":{this.onFlush(t.data);break}case"workerLog":re[t.data.logType]&&re[t.data.logType](t.data.message);break;default:{t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,n.trigger(t.event,t.data);break}}}configureTransmuxer(e){const{transmuxer:t}=this;this.workerContext?this.workerContext.worker.postMessage({cmd:"configure",config:e}):t&&t.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const QB=100;class Trt extends BP{constructor(e,t,n){super(e,t,n,"[audio-stream-controller]",nt.AUDIO),this.videoBuffer=null,this.videoTrackCC=-1,this.waitingVideoCC=-1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null,this.bufferedTrack=null,this.switchingTrack=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.ERROR,this.onError,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.ERROR,this.onError,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s}){if(n==="main"){const a=t.cc;this.initPTS[t.cc]={baseTime:i,timescale:s},this.log(`InitPTS for cc: ${a} found from main: ${i}`),this.videoTrackCC=a,this.state===xe.WAITING_INIT_PTS&&this.tick()}}startLoad(e){if(!this.levels){this.startPosition=e,this.state=xe.STOPPED;return}const t=this.lastCurrentTime;this.stopLoad(),this.setInterval(QB),t>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t,this.state=xe.IDLE):(this.loadedmetadata=!1,this.state=xe.WAITING_TRACK),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}doTick(){switch(this.state){case xe.IDLE:this.doTickIdle();break;case xe.WAITING_TRACK:{var e;const{levels:n,trackId:i}=this,s=n==null||(e=n[i])==null?void 0:e.details;if(s){if(this.waitForCdnTuneIn(s))break;this.state=xe.WAITING_INIT_PTS}break}case xe.FRAG_LOADING_WAITING_RETRY:{var t;const n=performance.now(),i=this.retryDate;if(!i||n>=i||(t=this.media)!=null&&t.seeking){const{levels:s,trackId:a}=this;this.log("RetryDate reached, switch back to IDLE state"),this.resetStartWhenNotLoaded(s?.[a]||null),this.state=xe.IDLE}break}case xe.WAITING_INIT_PTS:{const n=this.waitingData;if(n){const{frag:i,part:s,cache:a,complete:o}=n;if(this.initPTS[i.cc]!==void 0){this.waitingData=null,this.waitingVideoCC=-1,this.state=xe.FRAG_LOADING;const l=a.flush(),c={frag:i,part:s,payload:l,networkDetails:null};this._handleFragmentLoadProgress(c),o&&super._handleFragmentLoadComplete(c)}else if(this.videoTrackCC!==this.waitingVideoCC)this.log(`Waiting fragment cc (${i.cc}) cancelled because video is at cc ${this.videoTrackCC}`),this.clearWaitingFragment();else{const l=this.getLoadPosition(),c=ur.bufferInfo(this.mediaBuffer,l,this.config.maxBufferHole);B$(c.end,this.config.maxFragLookUpTolerance,i)<0&&(this.log(`Waiting fragment cc (${i.cc}) @ ${i.start} cancelled because another fragment at ${c.end} is needed`),this.clearWaitingFragment())}}else this.state=xe.IDLE}}this.onTickEnd()}clearWaitingFragment(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null,this.waitingVideoCC=-1,this.state=xe.IDLE)}resetLoadingState(){this.clearWaitingFragment(),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){const{hls:e,levels:t,media:n,trackId:i}=this,s=e.config;if(!this.buffering||!n&&(this.startFragRequested||!s.startFragPrefetch)||!(t!=null&&t[i]))return;const a=t[i],o=a.details;if(!o||o.live&&this.levelLastLoaded!==a||this.waitForCdnTuneIn(o)){this.state=xe.WAITING_TRACK;return}const l=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&l&&(this.bufferFlushed=!1,this.afterBufferFlushed(l,jt.AUDIO,nt.AUDIO));const c=this.getFwdBufferInfo(l,nt.AUDIO);if(c===null)return;if(!this.switchingTrack&&this._streamEnded(c,o)){e.trigger(P.BUFFER_EOS,{type:"audio"}),this.state=xe.ENDED;return}const u=this.getFwdBufferInfo(this.videoBuffer?this.videoBuffer:this.media,nt.MAIN),d=c.len,h=this.getMaxBufferLength(u?.len),f=o.fragments,m=f[0].start,g=this.getLoadPosition(),y=this.flushing?g:c.end;if(this.switchingTrack&&n){const A=g;o.PTSKnown&&A<m&&(c.end>m||c.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),n.currentTime=m+.05)}if(d>=h&&!this.switchingTrack&&y<f[f.length-1].start)return;let b=this.getNextFragment(y,o),E=!1;if(b&&this.isLoopLoading(b,y)&&(E=!!b.gap,b=this.getNextFragmentLoopLoading(b,o,c,nt.MAIN,h)),!b){this.bufferFlushed=!0;return}const w=u&&b.start>u.end+o.targetduration;if(w||!(u!=null&&u.len)&&c.len){const A=this.getAppendedFrag(b.start,nt.MAIN);if(A===null||(E||(E=!!A.gap||!!w&&u.len===0),w&&!E||E&&c.nextStart&&c.nextStart<A.end))return}this.loadFragment(b,a,y)}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.min(Math.max(t,e),this.config.maxMaxBufferLength):t}onMediaDetaching(){this.videoBuffer=null,this.bufferFlushed=this.flushing=!1,super.onMediaDetaching()}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(n=>new bp(n))}onAudioTrackSwitching(e,t){const n=!!t.url;this.trackId=t.id;const{fragCurrent:i}=this;i&&(i.abortRequests(),this.removeUnbufferedFrags(i.start)),this.resetLoadingState(),n?this.setInterval(QB):this.resetTransmuxer(),n?(this.switchingTrack=t,this.state=xe.IDLE,this.flushAudioIfNeeded(t)):(this.switchingTrack=null,this.bufferedTrack=t,this.state=xe.STOPPED),this.tick()}onManifestLoading(){this.fragmentTracker.removeAllFragments(),this.startPosition=this.lastCurrentTime=0,this.bufferFlushed=this.flushing=!1,this.levels=this.mainDetails=this.waitingData=this.bufferedTrack=this.cachedTrackLoadedData=this.switchingTrack=null,this.startFragRequested=!1,this.trackId=this.videoTrackCC=this.waitingVideoCC=-1}onLevelLoaded(e,t){this.mainDetails=t.details,this.cachedTrackLoadedData!==null&&(this.hls.trigger(P.AUDIO_TRACK_LOADED,this.cachedTrackLoadedData),this.cachedTrackLoadedData=null)}onAudioTrackLoaded(e,t){var n;if(this.mainDetails==null){this.cachedTrackLoadedData=t;return}const{levels:i}=this,{details:s,id:a}=t;if(!i){this.warn(`Audio tracks were reset while loading level ${a}`);return}this.log(`Audio track ${a} loaded [${s.startSN},${s.endSN}]${s.lastPartSn?`[part-${s.lastPartSn}-${s.lastPartIndex}]`:""},duration:${s.totalduration}`);const o=i[a];let l=0;if(s.live||(n=o.details)!=null&&n.live){this.checkLiveUpdate(s);const u=this.mainDetails;if(s.deltaUpdateFailed||!u)return;if(!o.details&&s.hasProgramDateTime&&u.hasProgramDateTime)Sw(s,u),l=s.fragments[0].start;else{var c;l=this.alignPlaylists(s,o.details,(c=this.levelLastLoaded)==null?void 0:c.details)}}o.details=s,this.levelLastLoaded=o,!this.startFragRequested&&(this.mainDetails||!s.live)&&this.setStartPosition(this.mainDetails||s,l),this.state===xe.WAITING_TRACK&&!this.waitForCdnTuneIn(s)&&(this.state=xe.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:s}=e,{config:a,trackId:o,levels:l}=this;if(!l){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const c=l[o];if(!c){this.warn("Audio track is undefined on fragment load progress");return}const u=c.details;if(!u){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(n.start);return}const d=a.defaultAudioCodec||c.audioCodec||"mp4a.40.2";let h=this.transmuxer;h||(h=this.transmuxer=new YJ(this.hls,nt.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const f=this.initPTS[n.cc],m=(t=n.initSegment)==null?void 0:t.data;if(f!==void 0){const y=i?i.index:-1,b=y!==-1,E=new NP(n.level,n.sn,n.stats.chunkCount,s.byteLength,y,b);h.push(s,m,d,"",n,i,u.totalduration,!1,E,f)}else{this.log(`Unknown video PTS for cc ${n.cc}, waiting for video PTS before demuxing audio frag ${n.sn} of [${u.startSN} ,${u.endSN}],track ${o}`);const{cache:g}=this.waitingData=this.waitingData||{frag:n,part:i,cache:new LJ,complete:!1};g.push(new Uint8Array(s)),this.waitingVideoCC=this.videoTrackCC,this.state=xe.WAITING_INIT_PTS}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1}onBufferCreated(e,t){const n=t.tracks.audio;n&&(this.mediaBuffer=n.buffer||null),t.tracks.video&&(this.videoBuffer=t.tracks.video.buffer||null)}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n.type!==nt.AUDIO){if(!this.loadedmetadata&&n.type===nt.MAIN){const s=this.videoBuffer||this.media;s&&ur.getBuffered(s).length&&(this.loadedmetadata=!0)}return}if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(n.sn!=="initSegment"){this.fragPrevious=n;const s=this.switchingTrack;s&&(this.bufferedTrack=s,this.switchingTrack=null,this.hls.trigger(P.AUDIO_TRACK_SWITCHED,Ln({},s)))}this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=xe.ERROR;return}switch(t.details){case ce.FRAG_GAP:case ce.FRAG_PARSING_ERROR:case ce.FRAG_DECRYPT_ERROR:case ce.FRAG_LOAD_ERROR:case ce.FRAG_LOAD_TIMEOUT:case ce.KEY_LOAD_ERROR:case ce.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(nt.AUDIO,t);break;case ce.AUDIO_TRACK_LOAD_ERROR:case ce.AUDIO_TRACK_LOAD_TIMEOUT:case ce.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===xe.WAITING_TRACK&&((n=t.context)==null?void 0:n.type)===Lt.AUDIO_TRACK&&(this.state=xe.IDLE);break;case ce.BUFFER_APPEND_ERROR:case ce.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="audio")return;if(t.details===ce.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case ce.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==jt.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==jt.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===xe.ENDED&&(this.state=xe.IDLE);const n=this.mediaBuffer||this.media;n&&(this.afterBufferFlushed(n,t,nt.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const n="audio",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{details:d}=u,{audio:h,text:f,id3:m,initSegment:g}=s;if(this.fragContextChanged(l)||!d){this.fragmentTracker.removeFragment(l);return}if(this.state=xe.PARSING,this.switchingTrack&&h&&this.completeAudioSwitch(this.switchingTrack),g!=null&&g.tracks){const y=l.initSegment||l;this._bufferInitSegment(u,g.tracks,y,a),i.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:y,id:n,tracks:g.tracks})}if(h){const{startPTS:y,endPTS:b,startDTS:E,endDTS:w}=h;c&&(c.elementaryStreams[jt.AUDIO]={startPTS:y,endPTS:b,startDTS:E,endDTS:w}),l.setElementaryStreamInfo(jt.AUDIO,y,b,E,w),this.bufferFragmentData(h,l,c,a)}if(m!=null&&(t=m.samples)!=null&&t.length){const y=tn({id:n,frag:l,details:d},m);i.trigger(P.FRAG_PARSING_METADATA,y)}if(f){const y=tn({id:n,frag:l,details:d},f);i.trigger(P.FRAG_PARSING_USERDATA,y)}}_bufferInitSegment(e,t,n,i){if(this.state!==xe.PARSING)return;t.video&&delete t.video;const s=t.audio;if(!s)return;s.id="audio";const a=e.audioCodec;this.log(`Init audio buffer, container:${s.container}, codecs[level/parsed]=[${a}/${s.codec}]`),a&&a.split(",").length===1&&(s.levelCodec=a),this.hls.trigger(P.BUFFER_CODECS,t);const o=s.initSegment;if(o!=null&&o.byteLength){const l={type:"audio",frag:n,part:null,chunkMeta:i,parent:n.type,data:o};this.hls.trigger(P.BUFFER_APPENDING,l)}this.tickImmediate()}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);if(this.fragCurrent=e,this.switchingTrack||i===_n.NOT_LOADED||i===_n.PARTIAL){var s;if(e.sn==="initSegment")this._loadInitSegment(e,t);else if((s=t.details)!=null&&s.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=xe.WAITING_INIT_PTS;const a=this.mainDetails;a&&a.fragments[0].start!==t.details.fragments[0].start&&Sw(t.details,a)}else this.startFragRequested=!0,super.loadFragment(e,t,n)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o}=this.bufferedTrack;bd({name:t,lang:n,assocLang:i,characteristics:s,audioCodec:a,channels:o},e,_u)||(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(P.AUDIO_TRACK_SWITCHED,Ln({},e))}}function QJ(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!q0(r[t].attrs,e[t].attrs))return!1;return!0}function q0(r,e,t){const n=r["STABLE-RENDITION-ID"];return n&&!t?n===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(i=>r[i]!==e[i])}function W$(r,e){return e.label.toLowerCase()===r.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(r.lang||"").toLowerCase())}class Srt extends MP{constructor(e){super(e,"[audio-track-controller]"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(P.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Audio track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Audio track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.audioGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(o=>i?.indexOf(o)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const o=this.tracks.filter(h=>!n||n.indexOf(h.groupId)!==-1);if(o.length)this.selectDefaultTrack&&!o.some(h=>h.default)&&(this.selectDefaultTrack=!1),o.forEach((h,f)=>{h.id=f});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=o;const l=this.hls.config.audioPreference;if(!s&&l){const h=to(l,o,_u);if(h>-1)s=o[h];else{const f=to(l,this.tracks);s=this.tracks[f]}}let c=this.findTrackId(s);c===-1&&s&&(c=this.findTrackId(null));const u={audioTracks:o};this.log(`Updating audio tracks, ${o.length} track(s) found in group(s): ${n?.join(",")}`),this.hls.trigger(P.AUDIO_TRACKS_UPDATED,u);const d=this.trackId;if(c!==-1&&d===-1)this.setAudioTrack(c);else if(o.length&&d===-1){var a;const h=new Error(`No audio track selected for current audio group-ID(s): ${(a=this.groupIds)==null?void 0:a.join(",")} track count: ${o.length}`);this.warn(h.message),this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:h})}}else this.shouldReloadPlaylist(s)&&this.setAudioTrack(this.trackId)}onError(e,t){t.fatal||!t.context||t.context.type===Lt.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&(this.requestScheduled=-1,this.checkRetry(t))}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const n=this.allAudioTracks;if(this.selectDefaultTrack=!1,n.length){const i=this.currentTrack;if(i&&bd(e,i,_u))return i;const s=to(e,this.tracksInGroup,_u);if(s>-1){const a=this.tracksInGroup[s];return this.setAudioTrack(s),a}else if(i){let a=t.loadLevel;a===-1&&(a=t.firstAutoLevel);const o=Stt(e,t.levels,n,a,_u);if(o===-1)return null;t.nextLoadLevel=o}if(e.channels||e.audioCodec){const a=to(e,n);if(a>-1)return n[a]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e],s=i.details&&!i.details.live;if(e===this.trackId&&i===n&&s||(this.log(`Switching to audio-track ${e} "${i.name}" lang:${i.lang} group:${i.groupId} channels:${i.channels}`),this.trackId=e,this.currentTrack=i,this.hls.trigger(P.AUDIO_TRACK_SWITCHING,Ln({},i)),s))return;const a=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(a)}findTrackId(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(!(this.selectDefaultTrack&&!i.default)&&(!e||bd(e,i,_u)))return n}if(e){const{name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l}=e;for(let c=0;c<t.length;c++){const u=t[c];if(bd({name:n,lang:i,assocLang:s,characteristics:a,audioCodec:o,channels:l},u,_u))return c}for(let c=0;c<t.length;c++){const u=t[c];if(q0(e.attrs,u.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return c}for(let c=0;c<t.length;c++){const u=t[c];if(q0(e.attrs,u.attrs,["LANGUAGE"]))return c}}return-1}loadPlaylist(e){const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){super.loadPlaylist();const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`loading audio-track playlist ${n} "${t.name}" lang:${t.lang} group:${i}`),this.clearTimer(),this.hls.trigger(P.AUDIO_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}}const XB=500;class Art extends BP{constructor(e,t,n){super(e,t,n,"[subtitle-stream-controller]",nt.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this._registerListeners()}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.ERROR,this.onError,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.ERROR,this.onError,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}startLoad(e){this.stopLoad(),this.state=xe.IDLE,this.setInterval(XB),this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}onManifestLoading(){this.mainDetails=null,this.fragmentTracker.removeAllFragments()}onMediaDetaching(){this.tracksBuffered=[],super.onMediaDetaching()}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:n,success:i}=t;if(this.fragPrevious=n,this.state=xe.IDLE,!i)return;const s=this.tracksBuffered[this.currentTrackId];if(!s)return;let a;const o=n.start;for(let c=0;c<s.length;c++)if(o>=s[c].start&&o<=s[c].end){a=s[c];break}const l=n.start+n.duration;a?a.end=l:(a={start:o,end:l},s.push(a)),this.fragmentTracker.fragBuffered(n),this.fragBufferedComplete(n,null)}onBufferFlushing(e,t){const{startOffset:n,endOffset:i}=t;if(n===0&&i!==Number.POSITIVE_INFINITY){const s=i-1;if(s<=0)return;t.endOffsetSubtitles=Math.max(0,s),this.tracksBuffered.forEach(a=>{for(let o=0;o<a.length;){if(a[o].end<=s){a.shift();continue}else if(a[o].start<s)a[o].start=s;else break;o++}}),this.fragmentTracker.removeFragmentsInRange(n,s,nt.SUBTITLE)}}onFragBuffered(e,t){if(!this.loadedmetadata&&t.frag.type===nt.MAIN){var n;(n=this.media)!=null&&n.buffered.length&&(this.loadedmetadata=!0)}}onError(e,t){const n=t.frag;n?.type===nt.SUBTITLE&&(t.details===ce.FRAG_GAP&&this.fragmentTracker.fragBuffered(n,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==xe.STOPPED&&(this.state=xe.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&QJ(this.levels,t)){this.levels=t.map(n=>new bp(n));return}this.tracksBuffered=[],this.levels=t.map(n=>{const i=new bp(n);return this.tracksBuffered[i.id]=[],i}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,nt.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var n;if(this.currentTrackId=t.id,!((n=this.levels)!=null&&n.length)||this.currentTrackId===-1){this.clearInterval();return}const i=this.levels[this.currentTrackId];i!=null&&i.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,i&&this.setInterval(XB)}onSubtitleTrackLoaded(e,t){var n;const{currentTrackId:i,levels:s}=this,{details:a,id:o}=t;if(!s){this.warn(`Subtitle tracks were reset while loading level ${o}`);return}const l=s[o];if(o>=s.length||!l)return;this.log(`Subtitle track ${o} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let c=0;if(a.live||(n=l.details)!=null&&n.live){const d=this.mainDetails;if(a.deltaUpdateFailed||!d)return;const h=d.fragments[0];if(!l.details)a.hasProgramDateTime&&d.hasProgramDateTime?(Sw(a,d),c=a.fragments[0].start):h&&(c=h.start,F$(a,c));else{var u;c=this.alignPlaylists(a,l.details,(u=this.levelLastLoaded)==null?void 0:u.details),c===0&&h&&(c=h.start,F$(a,c))}}l.details=a,this.levelLastLoaded=l,o===i&&(!this.startFragRequested&&(this.mainDetails||!a.live)&&this.setStartPosition(this.mainDetails||a,c),this.tick(),a.live&&!this.fragCurrent&&this.media&&this.state===xe.IDLE&&(Tw(null,a.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),l.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:n}=e,i=t.decryptdata,s=this.hls;if(!this.fragContextChanged(t)&&n&&n.byteLength>0&&i!=null&&i.key&&i.iv&&i.method==="AES-128"){const a=performance.now();this.decrypter.decrypt(new Uint8Array(n),i.key.buffer,i.iv.buffer).catch(o=>{throw s.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.FRAG_DECRYPT_ERROR,fatal:!1,error:o,reason:o.message,frag:t}),o}).then(o=>{const l=performance.now();s.trigger(P.FRAG_DECRYPTED,{frag:t,payload:o,stats:{tstart:a,tdecrypt:l}})}).catch(o=>{this.warn(`${o.name}: ${o.message}`),this.state=xe.IDLE})}}doTick(){if(!this.media){this.state=xe.IDLE;return}if(this.state===xe.IDLE){const{currentTrackId:e,levels:t}=this,n=t?.[e];if(!n||!t.length||!n.details)return;const{config:i}=this,s=this.getLoadPosition(),a=ur.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],s,i.maxBufferHole),{end:o,len:l}=a,c=this.getFwdBufferInfo(this.media,nt.MAIN),u=n.details,d=this.getMaxBufferLength(c?.len)+u.levelTargetDuration;if(l>d)return;const h=u.fragments,f=h.length,m=u.edge;let g=null;const y=this.fragPrevious;if(o<m){const b=i.maxFragLookUpTolerance,E=o>m-b?0:b;g=Tw(y,h,Math.max(h[0].start,o),E),!g&&y&&y.start<h[0].start&&(g=h[0])}else g=h[f-1];if(!g)return;if(g=this.mapToInitFragWhenRequired(g),g.sn!=="initSegment"){const b=g.sn-u.startSN,E=h[b-1];E&&E.cc===g.cc&&this.fragmentTracker.getState(E)===_n.NOT_LOADED&&(g=E)}this.fragmentTracker.getState(g)===_n.NOT_LOADED&&this.loadFragment(g,n,o)}}getMaxBufferLength(e){const t=super.getMaxBufferLength();return e?Math.max(t,e):t}loadFragment(e,t,n){this.fragCurrent=e,e.sn==="initSegment"?this._loadInitSegment(e,t):(this.startFragRequested=!0,super.loadFragment(e,t,n))}get mediaBufferTimeRanges(){return new _rt(this.tracksBuffered[this.currentTrackId]||[])}}class _rt{constructor(e){this.buffered=void 0;const t=(n,i,s)=>{if(i=i>>>0,i>s-1)throw new DOMException(`Failed to execute '${n}' on 'TimeRanges': The index provided (${i}) is greater than the maximum bound (${s})`);return e[i][n]};this.buffered={get length(){return e.length},end(n){return t("end",n,e.length)},start(n){return t("start",n,e.length)}}}}class Crt extends MP{constructor(e){super(e,"[subtitle-track-controller]"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const n=V1(this.media.textTracks);for(let s=0;s<n.length;s++)if(n[s].mode==="hidden")t=n[s];else if(n[s].mode==="showing"){t=n[s];break}const i=this.findTrackForTextTrack(t);this.subtitleTrack!==i&&this.setSubtitleTrack(i)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADING,this.onLevelLoading,this),e.off(P.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(P.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(P.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(){if(!this.media)return;self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||this.media.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),V1(this.media.textTracks).forEach(t=>{xf(t)}),this.subtitleTrack=-1,this.media=null}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:n,groupId:i,details:s}=t,a=this.tracksInGroup[n];if(!a||a.groupId!==i){this.warn(`Subtitle track with id:${n} and group:${i} not found in active group ${a?.groupId}`);return}const o=a.details;a.details=t.details,this.log(`Subtitle track ${n} "${a.name}" lang:${a.lang} group:${i} loaded [${s.startSN}-${s.endSN}]`),n===this.trackId&&this.playlistLoaded(n,t,o)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const n=t.subtitleGroups||null,i=this.groupIds;let s=this.currentTrack;if(!n||i?.length!==n?.length||n!=null&&n.some(a=>i?.indexOf(a)===-1)){this.groupIds=n,this.trackId=-1,this.currentTrack=null;const a=this.tracks.filter(u=>!n||n.indexOf(u.groupId)!==-1);if(a.length)this.selectDefaultTrack&&!a.some(u=>u.default)&&(this.selectDefaultTrack=!1),a.forEach((u,d)=>{u.id=d});else if(!s&&!this.tracksInGroup.length)return;this.tracksInGroup=a;const o=this.hls.config.subtitlePreference;if(!s&&o){this.selectDefaultTrack=!1;const u=to(o,a);if(u>-1)s=a[u];else{const d=to(o,this.tracks);s=this.tracks[d]}}let l=this.findTrackId(s);l===-1&&s&&(l=this.findTrackId(null));const c={subtitleTracks:a};this.log(`Updating subtitle tracks, ${a.length} track(s) found in "${n?.join(",")}" group-id`),this.hls.trigger(P.SUBTITLE_TRACKS_UPDATED,c),l!==-1&&this.trackId===-1&&this.setSubtitleTrack(l)}else this.shouldReloadPlaylist(s)&&this.setSubtitleTrack(this.trackId)}findTrackId(e){const t=this.tracksInGroup,n=this.selectDefaultTrack;for(let i=0;i<t.length;i++){const s=t[i];if(!(n&&!s.default||!n&&!e)&&(!e||bd(s,e)))return i}if(e){for(let i=0;i<t.length;i++){const s=t[i];if(q0(e.attrs,s.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return i}for(let i=0;i<t.length;i++){const s=t[i];if(q0(e.attrs,s.attrs,["LANGUAGE"]))return i}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let n=0;n<t.length;n++){const i=t[n];if(W$(i,e))return n}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Lt.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const n=this.currentTrack;if(n&&bd(e,n))return n;const i=to(e,this.tracksInGroup);if(i>-1){const s=this.tracksInGroup[i];return this.setSubtitleTrack(i),s}else{if(n)return null;{const s=to(e,t);if(s>-1)return t[s]}}}}return null}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;if(this.shouldLoadPlaylist(t)&&t){const n=t.id,i=t.groupId;let s=t.url;if(e)try{s=e.addDirectives(s)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}this.log(`Loading subtitle playlist for id ${n}`),this.hls.trigger(P.SUBTITLE_TRACK_LOADING,{url:s,id:n,groupId:i,deliveryDirectives:e||null})}}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=V1(e.textTracks),n=this.currentTrack;let i;if(n&&(i=t.filter(s=>W$(n,s))[0],i||this.warn(`Unable to find subtitle TextTrack with name "${n.name}" and language "${n.lang}"`)),[].slice.call(t).forEach(s=>{s.mode!=="disabled"&&s!==i&&(s.mode="disabled")}),i){const s=this.subtitleDisplay?"showing":"hidden";i.mode!==s&&(i.mode=s)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!Ve(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.clearTimer(),this.selectDefaultTrack=!1;const n=this.currentTrack,i=t[e]||null;if(this.trackId=e,this.currentTrack=i,this.toggleTrackModes(),!i){this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:e});return}const s=!!i.details&&!i.details.live;if(e===this.trackId&&i===n&&s)return;this.log(`Switching to subtitle-track ${e}`+(i?` "${i.name}" lang:${i.lang} group:${i.groupId}`:""));const{id:a,groupId:o="",name:l,type:c,url:u}=i;this.hls.trigger(P.SUBTITLE_TRACK_SWITCH,{id:a,groupId:o,name:l,type:c,url:u});const d=this.switchParams(i.url,n?.details,i.details);this.loadPlaylist(d)}}class Rrt{constructor(e){this.buffers=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.buffers=e}append(e,t,n){const i=this.queues[t];i.push(e),i.length===1&&!n&&this.executeNext(t)}insertAbort(e,t){this.queues[t].unshift(e),this.executeNext(t)}appendBlocker(e){let t;const n=new Promise(s=>{t=s}),i={execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};return this.append(i,e),n}executeNext(e){const t=this.queues[e];if(t.length){const n=t[0];try{n.execute()}catch(i){re.warn(`[buffer-operation-queue]: Exception executing "${e}" SourceBuffer operation: ${i}`),n.onError(i);const s=this.buffers[e];s!=null&&s.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues[e].shift(),this.executeNext(e)}current(e){return this.queues[e][0]}}const ZB=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/;class krt{constructor(e){this.details=null,this._objectUrl=null,this.operationQueue=void 0,this.listeners=void 0,this.hls=void 0,this.bufferCodecEventsExpected=0,this._bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.appendSource=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.pendingTracks={},this.sourceBuffer=void 0,this.log=void 0,this.warn=void 0,this.error=void 0,this._onEndStreaming=n=>{this.hls&&this.hls.pauseBuffering()},this._onStartStreaming=n=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=()=>{const{media:n,mediaSource:i}=this;this.log("Media source opened"),n&&(n.removeEventListener("emptied",this._onMediaEmptied),this.updateMediaElementDuration(),this.hls.trigger(P.MEDIA_ATTACHED,{media:n,mediaSource:i})),i&&i.removeEventListener("sourceopen",this._onMediaSourceOpen),this.checkPendingTracks()},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:n,_objectUrl:i}=this;n!==i&&re.error(`Media element src was set while attaching MediaSource (${i} > ${n})`)},this.hls=e;const t="[buffer-controller]";this.appendSource=Fet(Fd(e.config.preferManagedMediaSource)),this.log=re.log.bind(re,t),this.warn=re.warn.bind(re,t),this.error=re.error.bind(re,t),this._initSourceBuffer(),this.registerListeners()}hasSourceTypes(){return this.getSourceBufferTypes().length>0||Object.keys(this.pendingTracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=null,this.hls=null}registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.BUFFER_RESET,this.onBufferReset,this),e.on(P.BUFFER_APPENDING,this.onBufferAppending,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.BUFFER_EOS,this.onBufferEos,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(P.FRAG_PARSED,this.onFragParsed,this),e.on(P.FRAG_CHANGED,this.onFragChanged,this)}unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.BUFFER_RESET,this.onBufferReset,this),e.off(P.BUFFER_APPENDING,this.onBufferAppending,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.BUFFER_EOS,this.onBufferEos,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(P.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(P.FRAG_PARSED,this.onFragParsed,this),e.off(P.FRAG_CHANGED,this.onFragChanged,this)}_initSourceBuffer(){this.sourceBuffer={},this.operationQueue=new Rrt(this.sourceBuffer),this.listeners={audio:[],video:[],audiovideo:[]},this.appendErrors={audio:0,video:0,audiovideo:0},this.lastMpegAudioChunk=null}onManifestLoading(){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){let n=2;(t.audio&&!t.video||!t.altAudio)&&(n=1),this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=n,this.log(`${this.bufferCodecEventsExpected} bufferCodec event(s) expected`)}onMediaAttaching(e,t){const n=this.media=t.media,i=Fd(this.appendSource);if(n&&i){var s;const a=this.mediaSource=new i;this.log(`created media source: ${(s=a.constructor)==null?void 0:s.name}`),a.addEventListener("sourceopen",this._onMediaSourceOpen),a.addEventListener("sourceended",this._onMediaSourceEnded),a.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.addEventListener("startstreaming",this._onStartStreaming),a.addEventListener("endstreaming",this._onEndStreaming));const o=this._objectUrl=self.URL.createObjectURL(a);if(this.appendSource)try{n.removeAttribute("src");const l=self.ManagedMediaSource;n.disableRemotePlayback=n.disableRemotePlayback||l&&a instanceof l,JB(n),Irt(n,o),n.load()}catch{n.src=o}else n.src=o;n.addEventListener("emptied",this._onMediaEmptied)}}onMediaDetaching(){const{media:e,mediaSource:t,_objectUrl:n}=this;if(t){if(this.log("media source detaching"),t.readyState==="open")try{t.endOfStream()}catch(i){this.warn(`onMediaDetaching: ${i.message} while calling endOfStream`)}this.onBufferReset(),t.removeEventListener("sourceopen",this._onMediaSourceOpen),t.removeEventListener("sourceended",this._onMediaSourceEnded),t.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(t.removeEventListener("startstreaming",this._onStartStreaming),t.removeEventListener("endstreaming",this._onEndStreaming)),e&&(e.removeEventListener("emptied",this._onMediaEmptied),n&&self.URL.revokeObjectURL(n),this.mediaSrc===n?(e.removeAttribute("src"),this.appendSource&&JB(e),e.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={}}this.hls.trigger(P.MEDIA_DETACHED,void 0)}onBufferReset(){this.getSourceBufferTypes().forEach(e=>{this.resetBuffer(e)}),this._initSourceBuffer(),this.hls.resumeBuffering()}resetBuffer(e){const t=this.sourceBuffer[e];try{if(t){var n;this.removeBufferListeners(e),this.sourceBuffer[e]=void 0,(n=this.mediaSource)!=null&&n.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(t)}}catch(i){this.warn(`onBufferReset ${e}`,i)}}onBufferCodecs(e,t){const n=this.getSourceBufferTypes().length,i=Object.keys(t);if(i.forEach(a=>{if(n){const l=this.tracks[a];if(l&&typeof l.buffer.changeType=="function"){var o;const{id:c,codec:u,levelCodec:d,container:h,metadata:f}=t[a],m=EB(l.codec,l.levelCodec),g=m?.replace(ZB,"$1");let y=EB(u,d);const b=(o=y)==null?void 0:o.replace(ZB,"$1");if(y&&g!==b){a.slice(0,5)==="audio"&&(y=bw(y,this.appendSource));const E=`${h};codecs=${y}`;this.appendChangeType(a,E),this.log(`switching codec ${m} to ${y}`),this.tracks[a]={buffer:l.buffer,codec:u,container:h,levelCodec:d,metadata:f,id:c}}}}else this.pendingTracks[a]=t[a]}),n)return;const s=Math.max(this.bufferCodecEventsExpected-1,0);this.bufferCodecEventsExpected!==s&&(this.log(`${s} bufferCodec event(s) expected ${i.join(",")}`),this.bufferCodecEventsExpected=s),this.mediaSource&&this.mediaSource.readyState==="open"&&this.checkPendingTracks()}appendChangeType(e,t){const{operationQueue:n}=this,i={execute:()=>{const s=this.sourceBuffer[e];s&&(this.log(`changing ${e} sourceBuffer type to ${t}`),s.changeType(t)),n.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:s=>{this.warn(`Failed to change ${e} SourceBuffer type`,s)}};n.append(i,e,!!this.pendingTracks[e])}onBufferAppending(e,t){const{hls:n,operationQueue:i,tracks:s}=this,{data:a,type:o,frag:l,part:c,chunkMeta:u}=t,d=u.buffering[o],h=self.performance.now();d.start=h;const f=l.stats.buffering,m=c?c.stats.buffering:null;f.start===0&&(f.start=h),m&&m.start===0&&(m.start=h);const g=s.audio;let y=!1;o==="audio"&&g?.container==="audio/mpeg"&&(y=!this.lastMpegAudioChunk||u.id===1||this.lastMpegAudioChunk.sn!==u.sn,this.lastMpegAudioChunk=u);const b=l.start,E={execute:()=>{if(d.executeStart=self.performance.now(),y){const w=this.sourceBuffer[o];if(w){const A=b-w.timestampOffset;Math.abs(A)>=.1&&(this.log(`Updating audio SourceBuffer timestampOffset to ${b} (delta: ${A}) sn: ${l.sn})`),w.timestampOffset=b)}}this.appendExecutor(a,o)},onStart:()=>{},onComplete:()=>{const w=self.performance.now();d.executeEnd=d.end=w,f.first===0&&(f.first=w),m&&m.first===0&&(m.first=w);const{sourceBuffer:A}=this,S={};for(const _ in A)S[_]=ur.getBuffered(A[_]);this.appendErrors[o]=0,o==="audio"||o==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(P.BUFFER_APPENDED,{type:o,frag:l,part:c,chunkMeta:u,parent:l.type,timeRanges:S})},onError:w=>{const A={type:at.MEDIA_ERROR,parent:l.type,details:ce.BUFFER_APPEND_ERROR,sourceBufferName:o,frag:l,part:c,chunkMeta:u,error:w,err:w,fatal:!1};if(w.code===DOMException.QUOTA_EXCEEDED_ERR)A.details=ce.BUFFER_FULL_ERROR;else{const S=++this.appendErrors[o];A.details=ce.BUFFER_APPEND_ERROR,this.warn(`Failed ${S}/${n.config.appendErrorMaxRetry} times to append segment in "${o}" sourceBuffer`),S>=n.config.appendErrorMaxRetry&&(A.fatal=!0)}n.trigger(P.ERROR,A)}};i.append(E,o,!!this.pendingTracks[o])}onBufferFlushing(e,t){const{operationQueue:n}=this,i=s=>({execute:this.removeExecutor.bind(this,s,t.startOffset,t.endOffset),onStart:()=>{},onComplete:()=>{this.hls.trigger(P.BUFFER_FLUSHED,{type:s})},onError:a=>{this.warn(`Failed to remove from ${s} SourceBuffer`,a)}});t.type?n.append(i(t.type),t.type):this.getSourceBufferTypes().forEach(s=>{n.append(i(s),s)})}onFragParsed(e,t){const{frag:n,part:i}=t,s=[],a=i?i.elementaryStreams:n.elementaryStreams;a[jt.AUDIOVIDEO]?s.push("audiovideo"):(a[jt.AUDIO]&&s.push("audio"),a[jt.VIDEO]&&s.push("video"));const o=()=>{const l=self.performance.now();n.stats.buffering.end=l,i&&(i.stats.buffering.end=l);const c=i?i.stats:n.stats;this.hls.trigger(P.FRAG_BUFFERED,{frag:n,part:i,stats:c,id:n.type})};s.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${n.type} level: ${n.level} sn: ${n.sn}`),this.blockBuffers(o,s)}onFragChanged(e,t){this.trimBuffers()}onBufferEos(e,t){this.getSourceBufferTypes().reduce((i,s)=>{const a=this.sourceBuffer[s];return a&&(!t.type||t.type===s)&&(a.ending=!0,a.ended||(a.ended=!0,this.log(`${s} sourceBuffer now EOS`))),i&&!!(!a||a.ended)},!0)&&(this.log("Queueing mediaSource.endOfStream()"),this.blockBuffers(()=>{this.getSourceBufferTypes().forEach(s=>{const a=this.sourceBuffer[s];a&&(a.ending=!1)});const{mediaSource:i}=this;if(!i||i.readyState!=="open"){i&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${i.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),i.endOfStream()}))}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.getSourceBufferTypes().length?this.blockBuffers(this.updateMediaElementDuration.bind(this)):this.updateMediaElementDuration())}trimBuffers(){const{hls:e,details:t,media:n}=this;if(!n||t===null||!this.getSourceBufferTypes().length)return;const s=e.config,a=n.currentTime,o=t.levelTargetDuration,l=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(Ve(l)&&l>0){const c=Math.max(l,o),u=Math.floor(a/o)*o-c;this.flushBackBuffer(a,o,u)}if(Ve(s.frontBufferFlushThreshold)&&s.frontBufferFlushThreshold>0){const c=Math.max(s.maxBufferLength,s.frontBufferFlushThreshold),u=Math.max(c,o),d=Math.floor(a/o)*o+u;this.flushFrontBuffer(a,o,d)}}flushBackBuffer(e,t,n){const{details:i,sourceBuffer:s}=this;this.getSourceBufferTypes().forEach(o=>{const l=s[o];if(l){const c=ur.getBuffered(l);if(c.length>0&&n>c.start(0)){if(this.hls.trigger(P.BACK_BUFFER_REACHED,{bufferEnd:n}),i!=null&&i.live)this.hls.trigger(P.LIVE_BACK_BUFFER_REACHED,{bufferEnd:n});else if(l.ended&&c.end(c.length-1)-e<t*2){this.log(`Cannot flush ${o} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:n,type:o})}}})}flushFrontBuffer(e,t,n){const{sourceBuffer:i}=this;this.getSourceBufferTypes().forEach(a=>{const o=i[a];if(o){const l=ur.getBuffered(o),c=l.length;if(c<2)return;const u=l.start(c-1),d=l.end(c-1);if(n>u||e>=u&&e<=d)return;if(o.ended&&e-d<2*t){this.log(`Cannot flush ${a} front buffer while SourceBuffer is in ended state`);return}this.hls.trigger(P.BUFFER_FLUSHING,{startOffset:u,endOffset:1/0,type:a})}})}updateMediaElementDuration(){if(!this.details||!this.media||!this.mediaSource||this.mediaSource.readyState!=="open")return;const{details:e,hls:t,media:n,mediaSource:i}=this,s=e.fragments[0].start+e.totalduration,a=n.duration,o=Ve(i.duration)?i.duration:0;e.live&&t.config.liveDurationInfinity?(i.duration=1/0,this.updateSeekableRange(e)):(s>o&&s>a||!Ve(a))&&(this.log(`Updating Media Source duration to ${s.toFixed(3)}`),i.duration=s)}updateSeekableRange(e){const t=this.mediaSource,n=e.fragments;if(n.length&&e.live&&t!=null&&t.setLiveSeekableRange){const s=Math.max(0,n[0].start),a=Math.max(s,s+e.totalduration);this.log(`Media Source duration is set to ${t.duration}. Setting seekable range to ${s}-${a}.`),t.setLiveSeekableRange(s,a)}}checkPendingTracks(){const{bufferCodecEventsExpected:e,operationQueue:t,pendingTracks:n}=this,i=Object.keys(n).length;if(i&&(!e||i===2||"audiovideo"in n)){this.createSourceBuffers(n),this.pendingTracks={};const s=this.getSourceBufferTypes();if(s.length)this.hls.trigger(P.BUFFER_CREATED,{tracks:this.tracks}),s.forEach(a=>{t.executeNext(a)});else{const a=new Error("could not create source buffer for media codec(s)");this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:a,reason:a.message})}}}createSourceBuffers(e){const{sourceBuffer:t,mediaSource:n}=this;if(!n)throw Error("createSourceBuffers called when mediaSource was null");for(const s in e)if(!t[s]){var i;const a=e[s];if(!a)throw Error(`source buffer exists for track ${s}, however track does not`);let o=((i=a.levelCodec)==null?void 0:i.indexOf(","))===-1?a.levelCodec:a.codec;o&&s.slice(0,5)==="audio"&&(o=bw(o,this.appendSource));const l=`${a.container};codecs=${o}`;this.log(`creating sourceBuffer(${l})`);try{const c=t[s]=n.addSourceBuffer(l),u=s;this.addBufferListener(u,"updatestart",this._onSBUpdateStart),this.addBufferListener(u,"updateend",this._onSBUpdateEnd),this.addBufferListener(u,"error",this._onSBUpdateError),this.appendSource&&this.addBufferListener(u,"bufferedchange",(d,h)=>{const f=h.removedRanges;f!=null&&f.length&&this.hls.trigger(P.BUFFER_FLUSHED,{type:s})}),this.tracks[s]={buffer:c,codec:o,container:a.container,levelCodec:a.levelCodec,metadata:a.metadata,id:a.id}}catch(c){this.error(`error while trying to add sourceBuffer: ${c.message}`),this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:c,sourceBufferName:s,mimeType:l})}}}get mediaSrc(){var e,t;const n=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return n?.src}_onSBUpdateStart(e){const{operationQueue:t}=this;t.current(e).onStart()}_onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const{operationQueue:n}=this;n.current(e).onComplete(),n.shiftAndExecuteNext(e)}_onSBUpdateError(e,t){var n;const i=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(n=this.mediaSource)==null?void 0:n.readyState}`);this.error(`${i}`,t),this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:i,fatal:!1});const s=this.operationQueue.current(e);s&&s.onError(i)}removeExecutor(e,t,n){const{media:i,mediaSource:s,operationQueue:a,sourceBuffer:o}=this,l=o[e];if(!i||!s||!l){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),a.shiftAndExecuteNext(e);return}const c=Ve(i.duration)?i.duration:1/0,u=Ve(s.duration)?s.duration:1/0,d=Math.max(0,t),h=Math.min(n,c,u);h>d&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${d},${h}] from the ${e} SourceBuffer`),l.remove(d,h)):a.shiftAndExecuteNext(e)}appendExecutor(e,t){const n=this.sourceBuffer[t];if(!n){if(!this.pendingTracks[t])throw new Error(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);return}n.ended=!1,n.appendBuffer(e)}blockBuffers(e,t=this.getSourceBufferTypes()){if(!t.length){this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);return}const{operationQueue:n}=this,i=t.map(s=>n.appendBlocker(s));Promise.all(i).then(()=>{e(),t.forEach(s=>{const a=this.sourceBuffer[s];a!=null&&a.updating||n.shiftAndExecuteNext(s)})})}getSourceBufferTypes(){return Object.keys(this.sourceBuffer)}addBufferListener(e,t,n){const i=this.sourceBuffer[e];if(!i)return;const s=n.bind(this,e);this.listeners[e].push({event:t,listener:s}),i.addEventListener(t,s)}removeBufferListeners(e){const t=this.sourceBuffer[e];t&&this.listeners[e].forEach(n=>{t.removeEventListener(n.event,n.listener)})}}function JB(r){const e=r.querySelectorAll("source");[].slice.call(e).forEach(t=>{r.removeChild(t)})}function Irt(r,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,r.appendChild(t)}const $rt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},XJ=r=>String.fromCharCode($rt[r]||r),Ys=15,Go=100,Drt={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Lrt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Ort={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},Prt={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Mrt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class Nrt{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const n=typeof t=="function"?t():t;re.log(`${this.time} [${e}] ${n}`)}}}const gu=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].toString(16));return t};class ZJ{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let n=0;n<t.length;n++){const i=t[n];e.hasOwnProperty(i)&&(this[i]=e[i])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class Frt{constructor(){this.uchar=" ",this.penState=new ZJ}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class Brt{constructor(e){this.chars=[],this.pos=0,this.currPenState=new ZJ,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Go;t++)this.chars.push(new Frt);this.logger=e}equals(e){for(let t=0;t<Go;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Go;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Go;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Go&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Go)}moveCursor(e){const t=this.pos+e;if(e>1)for(let n=this.pos+1;n<t+1;n++)this.chars[n].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=XJ(e);if(this.pos>=Go){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Go;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let n=0;n<Go;n++){const i=this.chars[n].uchar;i!==" "&&(t=!1),e.push(i)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class bR{constructor(e){this.rows=[],this.currRow=Ys-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<Ys;t++)this.rows.push(new Brt(e));this.logger=e}reset(){for(let e=0;e<Ys;e++)this.rows[e].clear();this.currRow=Ys-1}equals(e){let t=!0;for(let n=0;n<Ys;n++)if(!this.rows[n].equals(e.rows[n])){t=!1;break}return t}copy(e){for(let t=0;t<Ys;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<Ys;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+JSON.stringify(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let o=0;o<Ys;o++)this.rows[o].clear();const s=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){const o=a.rows[s].cueStartTime,l=this.logger.time;if(o!==null&&l!==null&&o<l)for(let c=0;c<this.nrRollUpRows;c++)this.rows[t-this.nrRollUpRows+c+1].copy(a.rows[s+c])}}this.currRow=t;const n=this.rows[this.currRow];if(e.indent!==null){const s=e.indent,a=Math.max(s-1,0);n.setCursor(e.indent),e.color=n.chars[a].penState.foreground}const i={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(i)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let n="",i=-1;for(let s=0;s<Ys;s++){const a=this.rows[s].getTextString();a&&(i=s+1,e?t.push("Row "+i+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(e?n="["+t.join(" | ")+"]":n=t.join(`
`)),n}getTextAndFormat(){return this.rows}}class eU{constructor(e,t,n){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new bR(n),this.nonDisplayedMemory=new bR(n),this.lastOutputScreen=new bR(n),this.currRollUpRow=this.displayedMemory.rows[Ys-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=n}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[Ys-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let n=0;n<e.length;n++)this.writeScreen.insertChar(e[n]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const n=Math.floor(e/2)-16,i=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=i[n]}this.logger.log(2,"MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class tU{constructor(e,t,n){this.channels=void 0,this.currentChannel=0,this.cmdHistory=Wrt(),this.logger=void 0;const i=this.logger=new Nrt;this.channels=[null,new eU(e,t,i),new eU(e+1,n,i)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let n=0;n<t.length;n+=2){const i=t[n]&127,s=t[n+1]&127;let a=!1,o=null;if(i===0&&s===0)continue;this.logger.log(3,()=>"["+gu([t[n],t[n+1]])+"] -> ("+gu([i,s])+")");const l=this.cmdHistory;if(i>=16&&i<=31){if(Urt(i,s,l)){zb(null,null,l),this.logger.log(3,()=>"Repeated command ("+gu([i,s])+") is dropped");continue}zb(i,s,this.cmdHistory),a=this.parseCmd(i,s),a||(a=this.parseMidrow(i,s)),a||(a=this.parsePAC(i,s)),a||(a=this.parseBackgroundAttributes(i,s))}else zb(null,null,l);if(!a&&(o=this.parseChars(i,s),o)){const u=this.currentChannel;u&&u>0?this.channels[u].insertChars(o):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!a&&!o&&this.logger.log(2,()=>"Couldn't parse cleaned data "+gu([i,s])+" orig: "+gu([t[n],t[n+1]]))}}parseCmd(e,t){const n=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=33&&t<=35;if(!(n||i))return!1;const s=e===20||e===21||e===23?1:2,a=this.channels[s];return e===20||e===21||e===28||e===29?t===32?a.ccRCL():t===33?a.ccBS():t===34?a.ccAOF():t===35?a.ccAON():t===36?a.ccDER():t===37?a.ccRU(2):t===38?a.ccRU(3):t===39?a.ccRU(4):t===40?a.ccFON():t===41?a.ccRDC():t===42?a.ccTR():t===43?a.ccRTD():t===44?a.ccEDM():t===45?a.ccCR():t===46?a.ccENM():t===47&&a.ccEOC():a.ccTO(t-32),this.currentChannel=s,!0}parseMidrow(e,t){let n=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?n=1:n=2,n!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const i=this.channels[n];return i?(i.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+gu([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let n;const i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,s=(e===16||e===24)&&t>=64&&t<=95;if(!(i||s))return!1;const a=e<=23?1:2;t>=64&&t<=95?n=a===1?Drt[e]:Ort[e]:n=a===1?Lrt[e]:Prt[e];const o=this.channels[a];return o?(o.setPAC(this.interpretPAC(n,t)),this.currentChannel=a,!0):!1}interpretPAC(e,t){let n;const i={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?n=t-96:n=t-64,i.underline=(n&1)===1,n<=13?i.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(n/2)]:n<=15?(i.italics=!0,i.color="white"):i.indent=Math.floor((n-16)/2)*4,i}parseChars(e,t){let n,i=null,s=null;if(e>=25?(n=2,s=e-8):(n=1,s=e),s>=17&&s<=19){let a;s===17?a=t+80:s===18?a=t+112:a=t+144,this.logger.log(2,()=>"Special char '"+XJ(a)+"' in channel "+n),i=[a]}else e>=32&&e<=127&&(i=t===0?[e]:[e,t]);return i&&this.logger.log(3,()=>"Char codes =  "+gu(i).join(",")),i}parseBackgroundAttributes(e,t){const n=(e===16||e===24)&&t>=32&&t<=47,i=(e===23||e===31)&&t>=45&&t<=47;if(!(n||i))return!1;let s;const a={};e===16||e===24?(s=Math.floor((t-32)/2),a.background=Mrt[s],t%2===1&&(a.background=a.background+"_semi")):t===45?a.background="transparent":(a.foreground="black",t===47&&(a.underline=!0));const o=e<=23?1:2;return this.channels[o].setBkgData(a),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}zb(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const n=this.channels[t];n&&n.cueSplitAtTime(e)}}}function zb(r,e,t){t.a=r,t.b=e}function Urt(r,e,t){return t.a===r&&t.b===e}function Wrt(){return{a:null,b:null}}class Yb{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,n){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=n,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}var qP=function(){if(yp!=null&&yp.VTTCue)return self.VTTCue;const r=["","lr","rl"],e=["start","middle","end","left","right"];function t(o,l){if(typeof l!="string"||!Array.isArray(o))return!1;const c=l.toLowerCase();return~o.indexOf(c)?c:!1}function n(o){return t(r,o)}function i(o){return t(e,o)}function s(o,...l){let c=1;for(;c<arguments.length;c++){const u=arguments[c];for(const d in u)o[d]=u[d]}return o}function a(o,l,c){const u=this,d={enumerable:!0};u.hasBeenReset=!1;let h="",f=!1,m=o,g=l,y=c,b=null,E="",w=!0,A="auto",S="start",_=50,C="middle",k=50,D="middle";Object.defineProperty(u,"id",s({},d,{get:function(){return h},set:function(I){h=""+I}})),Object.defineProperty(u,"pauseOnExit",s({},d,{get:function(){return f},set:function(I){f=!!I}})),Object.defineProperty(u,"startTime",s({},d,{get:function(){return m},set:function(I){if(typeof I!="number")throw new TypeError("Start time must be set to a number.");m=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"endTime",s({},d,{get:function(){return g},set:function(I){if(typeof I!="number")throw new TypeError("End time must be set to a number.");g=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"text",s({},d,{get:function(){return y},set:function(I){y=""+I,this.hasBeenReset=!0}})),Object.defineProperty(u,"region",s({},d,{get:function(){return b},set:function(I){b=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"vertical",s({},d,{get:function(){return E},set:function(I){const L=n(I);if(L===!1)throw new SyntaxError("An invalid or illegal string was specified.");E=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"snapToLines",s({},d,{get:function(){return w},set:function(I){w=!!I,this.hasBeenReset=!0}})),Object.defineProperty(u,"line",s({},d,{get:function(){return A},set:function(I){if(typeof I!="number"&&I!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");A=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"lineAlign",s({},d,{get:function(){return S},set:function(I){const L=i(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");S=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"position",s({},d,{get:function(){return _},set:function(I){if(I<0||I>100)throw new Error("Position must be between 0 and 100.");_=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"positionAlign",s({},d,{get:function(){return C},set:function(I){const L=i(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");C=L,this.hasBeenReset=!0}})),Object.defineProperty(u,"size",s({},d,{get:function(){return k},set:function(I){if(I<0||I>100)throw new Error("Size must be between 0 and 100.");k=I,this.hasBeenReset=!0}})),Object.defineProperty(u,"align",s({},d,{get:function(){return D},set:function(I){const L=i(I);if(!L)throw new SyntaxError("An invalid or illegal string was specified.");D=L,this.hasBeenReset=!0}})),u.displayState=void 0}return a.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},a}();class Hrt{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function JJ(r){function e(n,i,s,a){return(n|0)*3600+(i|0)*60+(s|0)+parseFloat(a||0)}const t=r.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class Vrt{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,n){return n?this.has(e)?this.values[e]:t[n]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,n){for(let i=0;i<n.length;++i)if(t===n[i]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const n=parseFloat(t);if(n>=0&&n<=100)return this.set(e,n),!0}return!1}}function eee(r,e,t,n){const i=n?r.split(n):[r];for(const s in i){if(typeof i[s]!="string")continue;const a=i[s].split(t);if(a.length!==2)continue;const o=a[0],l=a[1];e(o,l)}}const H$=new qP(0,0,""),Qb=H$.align==="middle"?"middle":"center";function Grt(r,e,t){const n=r;function i(){const o=JJ(r);if(o===null)throw new Error("Malformed timestamp: "+n);return r=r.replace(/^[^\sa-zA-Z-]+/,""),o}function s(o,l){const c=new Vrt;eee(o,function(h,f){let m;switch(h){case"region":for(let g=t.length-1;g>=0;g--)if(t[g].id===f){c.set(h,t[g].region);break}break;case"vertical":c.alt(h,f,["rl","lr"]);break;case"line":m=f.split(","),c.integer(h,m[0]),c.percent(h,m[0])&&c.set("snapToLines",!1),c.alt(h,m[0],["auto"]),m.length===2&&c.alt("lineAlign",m[1],["start",Qb,"end"]);break;case"position":m=f.split(","),c.percent(h,m[0]),m.length===2&&c.alt("positionAlign",m[1],["start",Qb,"end","line-left","line-right","auto"]);break;case"size":c.percent(h,f);break;case"align":c.alt(h,f,["start",Qb,"end","left","right"]);break}},/:/,/\s/),l.region=c.get("region",null),l.vertical=c.get("vertical","");let u=c.get("line","auto");u==="auto"&&H$.line===-1&&(u=-1),l.line=u,l.lineAlign=c.get("lineAlign","start"),l.snapToLines=c.get("snapToLines",!0),l.size=c.get("size",100),l.align=c.get("align",Qb);let d=c.get("position","auto");d==="auto"&&H$.position===50&&(d=l.align==="start"||l.align==="left"?0:l.align==="end"||l.align==="right"?100:50),l.position=d}function a(){r=r.replace(/^\s+/,"")}if(a(),e.startTime=i(),a(),r.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+n);r=r.slice(3),a(),e.endTime=i(),a(),s(r,e)}function tee(r){return r.replace(/<br(?: \/)?>/gi,`
`)}class qrt{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new Hrt,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function n(){let s=t.buffer,a=0;for(s=tee(s);a<s.length&&s[a]!=="\r"&&s[a]!==`
`;)++a;const o=s.slice(0,a);return s[a]==="\r"&&++a,s[a]===`
`&&++a,t.buffer=s.slice(a),o}function i(s){eee(s,function(a,o){},/:/)}try{let s="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=n();const o=s.match(/^(ï»¿)?WEBVTT([ \t].*)?$/);if(!(o!=null&&o[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let a=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(a?a=!1:s=n(),t.state){case"HEADER":/:/.test(s)?i(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;if(t.cue=new qP(0,0,""),t.state="CUE",s.indexOf("-->")===-1){t.cue.id=s;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{Grt(s,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const o=s.indexOf("-->")!==-1;if(!s||o&&(a=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s}continue;case"BADCUE":s||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const jrt=/\r\n|\n\r|\n|\r/g,ER=function(e,t,n=0){return e.slice(n,n+t.length)===t},Krt=function(e){let t=parseInt(e.slice(-3));const n=parseInt(e.slice(-6,-4)),i=parseInt(e.slice(-9,-7)),s=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!Ve(t)||!Ve(n)||!Ve(i)||!Ve(s))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*n,t+=60*1e3*i,t+=60*60*1e3*s,t},xR=function(e){let t=5381,n=e.length;for(;n;)t=t*33^e.charCodeAt(--n);return(t>>>0).toString()};function jP(r,e,t){return xR(r.toString())+xR(e.toString())+xR(t)}const zrt=function(e,t,n){let i=e[t],s=e[i.prevCC];if(!s||!s.new&&i.new){e.ccOffset=e.presentationOffset=i.start,i.new=!1;return}for(;(a=s)!=null&&a.new;){var a;e.ccOffset+=i.start-s.start,i.new=!1,i=s,s=e[i.prevCC]}e.presentationOffset=n};function Yrt(r,e,t,n,i,s,a){const o=new qrt,l=uo(new Uint8Array(r)).trim().replace(jrt,`
`).split(`
`),c=[],u=e?hrt(e.baseTime,e.timescale):0;let d="00:00.000",h=0,f=0,m,g=!0;o.oncue=function(y){const b=t[n];let E=t.ccOffset;const w=(h-u)/9e4;if(b!=null&&b.new&&(f!==void 0?E=t.ccOffset=b.start:zrt(t,n,w)),w){if(!e){m=new Error("Missing initPTS for VTT MPEGTS");return}E=w-t.presentationOffset}const A=y.endTime-y.startTime,S=As((y.startTime+E-f)*9e4,i*9e4)/9e4;y.startTime=Math.max(S,0),y.endTime=Math.max(S+A,0);const _=y.text.trim();y.text=decodeURIComponent(encodeURIComponent(_)),y.id||(y.id=jP(y.startTime,y.endTime,_)),y.endTime>0&&c.push(y)},o.onparsingerror=function(y){m=y},o.onflush=function(){if(m){a(m);return}s(c)},l.forEach(y=>{if(g)if(ER(y,"X-TIMESTAMP-MAP=")){g=!1,y.slice(16).split(",").forEach(b=>{ER(b,"LOCAL:")?d=b.slice(6):ER(b,"MPEGTS:")&&(h=parseInt(b.slice(7)))});try{f=Krt(d)/1e3}catch(b){m=b}return}else y===""&&(g=!1);o.parse(y+`
`)}),o.flush()}const wR="stpp.ttml.im1t",ree=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,nee=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,Qrt={left:"start",center:"center",right:"end",start:"start",end:"end"};function rU(r,e,t,n){const i=gt(new Uint8Array(r),["mdat"]);if(i.length===0){n(new Error("Could not parse IMSC1 mdat"));return}const s=i.map(o=>uo(o)),a=drt(e.baseTime,1,e.timescale);try{s.forEach(o=>t(Xrt(o,a)))}catch(o){n(o)}}function Xrt(r,e){const i=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("tt")[0];if(!i)throw new Error("Invalid ttml");const s={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},a=Object.keys(s).reduce((d,h)=>(d[h]=i.getAttribute(`ttp:${h}`)||s[h],d),{}),o=i.getAttribute("xml:space")!=="preserve",l=nU(TR(i,"styling","style")),c=nU(TR(i,"layout","region")),u=TR(i,"body","[begin]");return[].map.call(u,d=>{const h=iee(d,o);if(!h||!d.hasAttribute("begin"))return null;const f=AR(d.getAttribute("begin"),a),m=AR(d.getAttribute("dur"),a);let g=AR(d.getAttribute("end"),a);if(f===null)throw iU(d);if(g===null){if(m===null)throw iU(d);g=f+m}const y=new qP(f-e,g-e,h);y.id=jP(y.startTime,y.endTime,y.text);const b=c[d.getAttribute("region")],E=l[d.getAttribute("style")],w=Zrt(b,E,l),{textAlign:A}=w;if(A){const S=Qrt[A];S&&(y.lineAlign=S),y.align=A}return tn(y,w),y}).filter(d=>d!==null)}function TR(r,e,t){const n=r.getElementsByTagName(e)[0];return n?[].slice.call(n.querySelectorAll(t)):[]}function nU(r){return r.reduce((e,t)=>{const n=t.getAttribute("xml:id");return n&&(e[n]=t),e},{})}function iee(r,e){return[].slice.call(r.childNodes).reduce((t,n,i)=>{var s;return n.nodeName==="br"&&i?t+`
`:(s=n.childNodes)!=null&&s.length?iee(n,e):e?t+n.textContent.trim().replace(/\s+/g," "):t+n.textContent},"")}function Zrt(r,e,t){const n="http://www.w3.org/ns/ttml#styling";let i=null;const s=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],a=r!=null&&r.hasAttribute("style")?r.getAttribute("style"):null;return a&&t.hasOwnProperty(a)&&(i=t[a]),s.reduce((o,l)=>{const c=SR(e,n,l)||SR(r,n,l)||SR(i,n,l);return c&&(o[l]=c),o},{})}function SR(r,e,t){return r&&r.hasAttributeNS(e,t)?r.getAttributeNS(e,t):null}function iU(r){return new Error(`Could not parse ttml timestamp ${r}`)}function AR(r,e){if(!r)return null;let t=JJ(r);return t===null&&(ree.test(r)?t=Jrt(r,e):nee.test(r)&&(t=ent(r,e))),t}function Jrt(r,e){const t=ree.exec(r),n=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+n/e.frameRate}function ent(r,e){const t=nee.exec(r),n=Number(t[1]);switch(t[2]){case"h":return n*3600;case"m":return n*60;case"ms":return n*1e3;case"f":return n/e.frameRate;case"t":return n/e.tickRate}return n}class tnt{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=aU(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(P.FRAG_LOADING,this.onFragLoading,this),e.on(P.FRAG_LOADED,this.onFragLoaded,this),e.on(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(P.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(P.FRAG_LOADING,this.onFragLoading,this),e.off(P.FRAG_LOADED,this.onFragLoaded,this),e.off(P.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(P.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(P.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(P.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(P.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){if(this.config.enableCEA708Captions&&(!this.cea608Parser1||!this.cea608Parser2)){const e=new Yb(this,"textTrack1"),t=new Yb(this,"textTrack2"),n=new Yb(this,"textTrack3"),i=new Yb(this,"textTrack4");this.cea608Parser1=new tU(1,e,t),this.cea608Parser2=new tU(3,n,i)}}addCues(e,t,n,i,s){let a=!1;for(let o=s.length;o--;){const l=s[o],c=rnt(l[0],l[1],t,n);if(c>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],n),a=!0,c/(n-t)>.5))return}if(a||s.push([t,n]),this.config.renderTextTracksNatively){const o=this.captionsTracks[e];this.Cues.newCue(o,t,n,i)}else{const o=this.Cues.newCue(null,t,n,i);this.hls.trigger(P.CUES_PARSED,{type:"captions",cues:o,track:e})}}onInitPtsFound(e,{frag:t,id:n,initPTS:i,timescale:s}){const{unparsedVttFrags:a}=this;n==="main"&&(this.initPTS[t.cc]={baseTime:i,timescale:s}),a.length&&(this.unparsedVttFrags=[],a.forEach(o=>{this.onFragLoaded(P.FRAG_LOADED,o)}))}getExistingTrack(e,t){const{media:n}=this;if(n)for(let i=0;i<n.textTracks.length;i++){const s=n.textTracks[i];if(sU(s,{name:e,lang:t}))return s}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:n,media:i}=this,{label:s,languageCode:a}=t[e],o=this.getExistingTrack(s,a);if(o)n[e]=o,xf(n[e]),SJ(n[e],i);else{const l=this.createTextTrack("captions",s,a);l&&(l[e]=!0,n[e]=l)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const n=t.label,i={_id:e,label:n,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=i,this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[i]})}createTextTrack(e,t,n){const i=this.media;if(i)return i.addTextTrack(e,t,n)}onMediaAttaching(e,t){this.media=t.media,this._cleanTracks()}onMediaDetaching(){const{captionsTracks:e}=this;Object.keys(e).forEach(t=>{xf(e[t]),delete e[t]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=aU(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let n=0;n<t.length;n++)xf(t[n])}onSubtitleTracksUpdated(e,t){const n=t.subtitleTracks||[],i=n.some(s=>s.textCodec===wR);if(this.config.enableWebVTT||i&&this.config.enableIMSC1){if(QJ(this.tracks,n)){this.tracks=n;return}if(this.textTracks=[],this.tracks=n,this.config.renderTextTracksNatively){const a=this.media,o=a?V1(a.textTracks):null;if(this.tracks.forEach((l,c)=>{let u;if(o){let d=null;for(let h=0;h<o.length;h++)if(o[h]&&sU(o[h],l)){d=o[h],o[h]=null;break}d&&(u=d)}if(u)xf(u);else{const d=see(l);u=this.createTextTrack(d,l.name,l.lang),u&&(u.mode="disabled")}u&&this.textTracks.push(u)}),o!=null&&o.length){const l=o.filter(c=>c!==null).map(c=>c.label);l.length&&re.warn(`Media element contains unused subtitle tracks: ${l.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const a=this.tracks.map(o=>({label:o.name,kind:o.type.toLowerCase(),default:o.default,subtitleTrack:o}));this.hls.trigger(P.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:a})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(n=>{const i=/(?:CC|SERVICE)([1-4])/.exec(n.instreamId);if(!i)return;const s=`textTrack${i[1]}`,a=this.captionsProperties[s];a&&(a.label=n.name,n.lang&&(a.languageCode=n.lang),a.media=n)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===nt.MAIN){var n,i;const{cea608Parser1:s,cea608Parser2:a,lastSn:o}=this,{cc:l,sn:c}=t.frag,u=(n=(i=t.part)==null?void 0:i.index)!=null?n:-1;s&&a&&(c!==o+1||c===o&&u!==this.lastPartIndex+1||l!==this.lastCc)&&(s.reset(),a.reset()),this.lastCc=l,this.lastSn=c,this.lastPartIndex=u}}onFragLoaded(e,t){const{frag:n,payload:i}=t;if(n.type===nt.SUBTITLE)if(i.byteLength){const s=n.decryptdata,a="stats"in t;if(s==null||!s.encrypted||a){const o=this.tracks[n.level],l=this.vttCCs;l[n.cc]||(l[n.cc]={start:n.start,prevCC:this.prevCC,new:!0},this.prevCC=n.cc),o&&o.textCodec===wR?this._parseIMSC1(n,i):this._parseVTTs(t)}}else this.hls.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const n=this.hls;rU(t,this.initPTS[e.cc],i=>{this._appendCues(i,e.level),n.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},i=>{re.log(`Failed to parse IMSC1: ${i}`),n.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:i})})}_parseVTTs(e){var t;const{frag:n,payload:i}=e,{initPTS:s,unparsedVttFrags:a}=this,o=s.length-1;if(!s[n.cc]&&o===-1){a.push(e);return}const l=this.hls,c=(t=n.initSegment)!=null&&t.data?Ds(n.initSegment.data,new Uint8Array(i)):i;Yrt(c,this.initPTS[n.cc],this.vttCCs,n.cc,n.start,u=>{this._appendCues(u,n.level),l.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:n})},u=>{const d=u.message==="Missing initPTS for VTT MPEGTS";d?a.push(e):this._fallbackToIMSC1(n,i),re.log(`Failed to parse VTT cue: ${u}`),!(d&&o>n.cc)&&l.trigger(P.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:n,error:u})})}_fallbackToIMSC1(e,t){const n=this.tracks[e.level];n.textCodec||rU(t,this.initPTS[e.cc],()=>{n.textCodec=wR,this._parseIMSC1(e,t)},()=>{n.textCodec="wvtt"})}_appendCues(e,t){const n=this.hls;if(this.config.renderTextTracksNatively){const i=this.textTracks[t];if(!i||i.mode==="disabled")return;e.forEach(s=>AJ(i,s))}else{const i=this.tracks[t];if(!i)return;const s=i.default?"default":"subtitles"+t;n.trigger(P.CUES_PARSED,{type:"subtitles",cues:e,track:s})}}onFragDecrypted(e,t){const{frag:n}=t;n.type===nt.SUBTITLE&&this.onFragLoaded(P.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){this.initCea608Parsers();const{cea608Parser1:n,cea608Parser2:i}=this;if(!this.enabled||!n||!i)return;const{frag:s,samples:a}=t;if(!(s.type===nt.MAIN&&this.closedCaptionsForLevel(s)==="NONE"))for(let o=0;o<a.length;o++){const l=a[o].bytes;if(l){const c=this.extractCea608Data(l);n.addData(a[o].pts,c[0]),i.addData(a[o].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:n,endOffsetSubtitles:i,type:s}){const{media:a}=this;if(!(!a||a.currentTime<n)){if(!s||s==="video"){const{captionsTracks:o}=this;Object.keys(o).forEach(l=>P$(o[l],t,n))}if(this.config.renderTextTracksNatively&&t===0&&i!==void 0){const{textTracks:o}=this;Object.keys(o).forEach(l=>P$(o[l],t,i))}}}extractCea608Data(e){const t=[[],[]],n=e[0]&31;let i=2;for(let s=0;s<n;s++){const a=e[i++],o=127&e[i++],l=127&e[i++];if(o===0&&l===0)continue;if((4&a)!==0){const u=3&a;(u===0||u===1)&&(t[u].push(o),t[u].push(l))}}return t}}function see(r){return r.characteristics&&/transcribes-spoken-dialog/gi.test(r.characteristics)&&/describes-music-and-sound/gi.test(r.characteristics)?"captions":"subtitles"}function sU(r,e){return!!r&&r.kind===see(e)&&W$(e,r)}function rnt(r,e,t,n){return Math.min(e,n)-Math.max(r,t)}function aU(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}class KP{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.BUFFER_CODECS,this.onBufferCodecs,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(P.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.BUFFER_CODECS,this.onBufferCodecs,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const n=this.hls.levels[t.droppedLevel];this.isLevelAllowed(n)&&this.restrictedLevels.push({bitrate:n.bitrate,height:n.height,width:n.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const n=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,n.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&Ve(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping()}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,n=this.getMaxLevel(e.length-1);n!==this.autoLevelCapping&&re.log(`Setting autoLevelCapping to ${n}: ${e[n].height}p@${e[n].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=n,t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const n=t.filter((i,s)=>this.isLevelAllowed(i)&&s<=e);return this.clientRect=null,KP.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const n=e.getBoundingClientRect();t.width=n.width,t.height=n.height,!t.width&&!t.height&&(t.width=n.right-n.left||e.width||0,t.height=n.bottom-n.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return e}isLevelAllowed(e){return!this.restrictedLevels.some(n=>e.bitrate===n.bitrate&&e.width===n.width&&e.height===n.height)}static getMaxLevelByMediaSize(e,t,n){if(!(e!=null&&e.length))return-1;const i=(o,l)=>l?o.width!==l.width||o.height!==l.height:!0;let s=e.length-1;const a=Math.max(t,n);for(let o=0;o<e.length;o+=1){const l=e[o];if((l.width>=a||l.height>=a)&&i(l,e[o+1])){s=o;break}}return s}}class nnt{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHING,this.onMediaAttaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const n=this.hls.config;if(n.capLevelOnFPSDrop){const i=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=i,i&&typeof i.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),n.fpsDroppedMonitoringPeriod)}}checkFPS(e,t,n){const i=performance.now();if(t){if(this.lastTime){const s=i-this.lastTime,a=n-this.lastDroppedFrames,o=t-this.lastDecodedFrames,l=1e3*a/s,c=this.hls;if(c.trigger(P.FPS_DROP,{currentDropped:a,currentDecoded:o,totalDroppedFrames:n}),l>0&&a>c.config.fpsDroppedMonitoringThreshold*o){let u=c.currentLevel;re.warn("drop FPS ratio greater than max allowed value for currentLevel: "+u),u>0&&(c.autoLevelCapping===-1||c.autoLevelCapping>=u)&&(u=u-1,c.trigger(P.FPS_DROP_LEVEL_CAPPING,{level:u,droppedLevel:c.currentLevel}),c.autoLevelCapping=u,this.streamController.nextLevelSwitch())}}this.lastTime=i,this.lastDroppedFrames=n,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}const Xb="[eme]";class Ff{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.setMediaKeysQueue=Ff.CDMCleanupPromise?[Ff.CDMCleanupPromise]:[],this.debug=re.debug.bind(re,Xb),this.log=re.log.bind(re,Xb),this.warn=re.warn.bind(re,Xb),this.error=re.error.bind(re,Xb),this.onMediaEncrypted=t=>{const{initDataType:n,initData:i}=t,s=`"${t.type}" event: init data type: "${n}"`;if(this.debug(s),i!==null){if(!this.keyFormatPromise){let a=Object.keys(this.keySystemAccessPromises);a.length||(a=Wb(this.config));const o=a.map(oR).filter(l=>!!l);this.keyFormatPromise=this.getKeyFormatPromise(o)}this.keyFormatPromise.then(a=>{const o=sR(a);let l,c;if(n==="sinf"){if(o!==Vt.FAIRPLAY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}const m=on(new Uint8Array(i));try{const g=DP(JSON.parse(m).sinf),y=bJ(g);if(!y)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");l=y.subarray(8,24),c=Vt.FAIRPLAY}catch(g){this.warn(`${s} Failed to parse sinf: ${g}`);return}}else{if(o!==Vt.WIDEVINE&&o!==Vt.PLAYREADY){this.warn(`Ignoring unexpected "${t.type}" event with init data type: "${n}" for selected key-system ${o}`);return}const m=Oet(i),g=m.filter(b=>!!b.systemId&&aR(b.systemId)===o);g.length>1&&this.warn(`${s} Using first of ${g.length} pssh found for selected key-system ${o}`);const y=g[0];if(!y){m.length===0||m.some(b=>!b.systemId)?this.warn(`${s} contains incomplete or invalid pssh data`):this.log(`ignoring ${s} for ${m.map(b=>aR(b.systemId)).join(",")} pssh data in favor of playlist keys`);return}if(c=aR(y.systemId),y.version===0&&y.data)if(c===Vt.WIDEVINE){const b=y.data.length-22;l=y.data.subarray(b,b+16)}else c===Vt.PLAYREADY&&(l=dJ(y.data))}if(!c||!l){this.log(`Unable to handle ${s} with key-system ${o}`);return}const u=Ga.hexDump(l),{keyIdToKeySessionPromise:d,mediaKeySessions:h}=this;let f=d[u];for(let m=0;m<h.length;m++){const g=h[m],y=g.decryptdata;if(!y.keyId)continue;const b=Ga.hexDump(y.keyId);if(u===b||y.uri.replace(/-/g,"").indexOf(u)!==-1){if(f=d[b],y.pssh)break;delete d[b],y.pssh=new Uint8Array(i),y.keyId=l,f=d[u]=f.then(()=>this.generateRequestWithPreferredKeySession(g,n,i,"encrypted-event-key-match")),f.catch(E=>this.handleError(E));break}}if(!f){if(c!==o){this.log(`Ignoring "${s}" with ${c} init data for selected key-system ${o}`);return}f=d[u]=this.getKeySystemSelectionPromise([c]).then(({keySystem:m,mediaKeys:g})=>{var y;this.throwIfDestroyed();const b=new V0("ISO-23001-7",u,(y=oR(m))!=null?y:"");return b.pssh=new Uint8Array(i),b.keyId=l,this.attemptSetMediaKeys(m,g).then(()=>{this.throwIfDestroyed();const E=this.createMediaKeySessionContext({decryptdata:b,keySystem:m,mediaKeys:g});return this.generateRequestWithPreferredKeySession(E,n,i,"encrypted-event-no-match")})}),f.catch(m=>this.handleError(m))}})}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.unregisterListeners(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(P.MANIFEST_LOADED,this.onManifestLoaded,this)}unregisterListeners(){this.hls.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(P.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(P.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(P.MANIFEST_LOADED,this.onManifestLoaded,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:n}=this.config,i=t[e];if(i)return i.licenseUrl;if(e===Vt.WIDEVINE&&n)return n}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,n=t[e];if(n)return n.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,n=(a,o,l)=>!!a&&l.indexOf(a)===o,i=t.map(a=>a.audioCodec).filter(n),s=t.map(a=>a.videoCodec).filter(n);return i.length+s.length===0&&s.push("avc1.42e01e"),new Promise((a,o)=>{const l=c=>{const u=c.shift();this.getMediaKeysPromise(u,i,s).then(d=>a({keySystem:u,mediaKeys:d})).catch(d=>{c.length?l(c):d instanceof ys?o(d):o(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_NO_ACCESS,error:d,fatal:!0},d.message))})};l(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:n}=this.config;if(typeof n!="function"){let i=`Configured requestMediaKeySystemAccess is not a function ${n}`;return uJ===null&&self.location.protocol==="http:"&&(i=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(i))}return n(e,t)}getMediaKeysPromise(e,t,n){const i=oet(e,t,n,this.config.drmSystemOptions),s=this.keySystemAccessPromises[e];let a=s?.keySystemAccess;if(!a){this.log(`Requesting encrypted media "${e}" key-system access with config: ${JSON.stringify(i)}`),a=this.requestMediaKeySystemAccess(e,i);const o=this.keySystemAccessPromises[e]={keySystemAccess:a};return a.catch(l=>{this.log(`Failed to obtain access to key-system "${e}": ${l}`)}),a.then(l=>{this.log(`Access for key-system "${l.keySystem}" obtained`);const c=this.fetchServerCertificate(e);return this.log(`Create media-keys for "${e}"`),o.mediaKeys=l.createMediaKeys().then(u=>(this.log(`Media-keys created for "${e}"`),c.then(d=>d?this.setMediaKeysServerCertificate(u,e,d):u))),o.mediaKeys.catch(u=>{this.error(`Failed to create media-keys for "${e}"}: ${u}`)}),o.mediaKeys})}return a.then(()=>s.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:n}){this.log(`Creating key-system session "${t}" keyId: ${Ga.hexDump(e.keyId||[])}`);const i=n.createSession(),s={decryptdata:e,keySystem:t,mediaKeys:n,mediaKeysSession:i,keyStatus:"status-pending"};return this.mediaKeySessions.push(s),s}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const n=this.createMediaKeySessionContext(e),i=this.getKeyIdString(t),s="cenc";this.keyIdToKeySessionPromise[i]=this.generateRequestWithPreferredKeySession(n,s,t.pssh,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}getKeyIdString(e){if(!e)throw new Error("Could not read keyId of undefined decryptdata");if(e.keyId===null)throw new Error("keyId is null");return Ga.hexDump(e.keyId)}updateKeySession(e,t){var n;const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyID ${Ga.hexDump(((n=e.decryptdata)==null?void 0:n.keyId)||[])}
      } (data length: ${t&&t.byteLength})`),i.update(t)}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){return new Promise((t,n)=>{const i=Wb(this.config),s=e.map(sR).filter(a=>!!a&&i.indexOf(a)!==-1);return this.getKeySystemSelectionPromise(s).then(({keySystem:a})=>{const o=oR(a);o?t(o):n(new Error(`Unable to find format for key-system "${a}"`))}).catch(n)})}loadKey(e){const t=e.keyInfo.decryptdata,n=this.getKeyIdString(t),i=`(keyId: ${n} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${i}`);let s=this.keyIdToKeySessionPromise[n];return s||(s=this.keyIdToKeySessionPromise[n]=this.getKeySystemForKeyPromise(t).then(({keySystem:a,mediaKeys:o})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${i}`),this.attemptSetMediaKeys(a,o).then(()=>{this.throwIfDestroyed();const l=this.createMediaKeySessionContext({keySystem:a,mediaKeys:o,decryptdata:t});return this.generateRequestWithPreferredKeySession(l,"cenc",t.pssh,"playlist-key")}))),s.catch(a=>this.handleError(a))),s}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e){this.hls&&(this.error(e.message),e instanceof ys?this.hls.trigger(P.ERROR,e.data):this.hls.trigger(P.ERROR,{type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0}))}getKeySystemForKeyPromise(e){const t=this.getKeyIdString(e),n=this.keyIdToKeySessionPromise[t];if(!n){const i=sR(e.keyFormat),s=i?[i]:Wb(this.config);return this.attemptKeySystemAccess(s)}return n}getKeySystemSelectionPromise(e){if(e.length||(e=Wb(this.config)),e.length===0)throw new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${JSON.stringify({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){const n=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const i=Promise.all(n).then(()=>{if(!this.media)throw new Error("Attempted to set mediaKeys without media element attached");return this.media.setMediaKeys(t)});return this.setMediaKeysQueue.push(i),i.then(()=>{this.log(`Media-keys set for "${e}"`),n.push(i),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(s=>n.indexOf(s)===-1)})}generateRequestWithPreferredKeySession(e,t,n,i){var s,a;const o=(s=this.config.drmSystems)==null||(a=s[e.keySystem])==null?void 0:a.generateRequest;if(o)try{const m=o.call(this.hls,t,n,e);if(!m)throw new Error("Invalid response from configured generateRequest filter");t=m.initDataType,n=e.decryptdata.pssh=m.initData?new Uint8Array(m.initData):null}catch(m){var l;if(this.warn(m.message),(l=this.hls)!=null&&l.config.debug)throw m}if(n===null)return this.log(`Skipping key-session request for "${i}" (no initData)`),Promise.resolve(e);const c=this.getKeyIdString(e.decryptdata);this.log(`Generating key-session request for "${i}": ${c} (init data type: ${t} length: ${n?n.byteLength:null})`);const u=new GP,d=e._onmessage=m=>{const g=e.mediaKeysSession;if(!g){u.emit("error",new Error("invalid state"));return}const{messageType:y,message:b}=m;this.log(`"${y}" message event for session "${g.sessionId}" message size: ${b.byteLength}`),y==="license-request"||y==="license-renewal"?this.renewLicense(e,b).catch(E=>{this.handleError(E),u.emit("error",E)}):y==="license-release"?e.keySystem===Vt.FAIRPLAY&&(this.updateKeySession(e,L$("acknowledged")),this.removeSession(e)):this.warn(`unhandled media key message type "${y}"`)},h=e._onkeystatuseschange=m=>{if(!e.mediaKeysSession){u.emit("error",new Error("invalid state"));return}this.onKeyStatusChange(e);const y=e.keyStatus;u.emit("keyStatus",y),y==="expired"&&(this.warn(`${e.keySystem} expired for key ${c}`),this.renewKeySession(e))};e.mediaKeysSession.addEventListener("message",d),e.mediaKeysSession.addEventListener("keystatuseschange",h);const f=new Promise((m,g)=>{u.on("error",g),u.on("keyStatus",y=>{y.startsWith("usable")?m():y==="output-restricted"?g(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,fatal:!1},"HDCP level output restricted")):y==="internal-error"?g(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_STATUS_INTERNAL_ERROR,fatal:!0},`key status changed to "${y}"`)):y==="expired"?g(new Error("key expired while generating request")):this.warn(`unhandled key status change "${y}"`)})});return e.mediaKeysSession.generateRequest(t,n).then(()=>{var m;this.log(`Request generated for key-session "${(m=e.mediaKeysSession)==null?void 0:m.sessionId}" keyId: ${c}`)}).catch(m=>{throw new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_NO_SESSION,error:m,fatal:!1},`Error generating key-session request: ${m}`)}).then(()=>f).catch(m=>{throw u.removeAllListeners(),this.removeSession(e),m}).then(()=>(u.removeAllListeners(),e))}onKeyStatusChange(e){e.mediaKeysSession.keyStatuses.forEach((t,n)=>{this.log(`key status change "${t}" for keyStatuses keyId: ${Ga.hexDump("buffer"in n?new Uint8Array(n.buffer,n.byteOffset,n.byteLength):new Uint8Array(n))} session keyId: ${Ga.hexDump(new Uint8Array(e.decryptdata.keyId||[]))} uri: ${e.decryptdata.uri}`),e.keyStatus=t})}fetchServerCertificate(e){const t=this.config,n=t.loader,i=new n(t),s=this.getServerCertificateUrl(e);return s?(this.log(`Fetching server certificate for "${e}"`),new Promise((a,o)=>{const l={responseType:"arraybuffer",url:s},c=t.certLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,m,g)=>{a(h.data)},onError:(h,f,m,g)=>{o(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:Ln({url:l.url,data:void 0},h)},`"${e}" certificate request failed (${s}). Status: ${h.code} (${h.text})`))},onTimeout:(h,f,m)=>{o(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:m,response:{url:l.url,data:void 0}},`"${e}" certificate request timed out (${s})`))},onAbort:(h,f,m)=>{o(new Error("aborted"))}};i.load(l,u,d)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,n){return new Promise((i,s)=>{e.setServerCertificate(n).then(a=>{this.log(`setServerCertificate ${a?"success":"not supported by CDM"} (${n?.byteLength}) on "${t}"`),i(e)}).catch(a=>{s(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:a,fatal:!0},a.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(n=>this.updateKeySession(e,new Uint8Array(n)).catch(i=>{throw new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_SESSION_UPDATE_FAILED,error:i,fatal:!0},i.message)}))}unpackPlayReadyKeyMessage(e,t){const n=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!n.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const i=new DOMParser().parseFromString(n,"application/xml"),s=i.querySelectorAll("HttpHeader");if(s.length>0){let u;for(let d=0,h=s.length;d<h;d++){var a,o;u=s[d];const f=(a=u.querySelector("name"))==null?void 0:a.textContent,m=(o=u.querySelector("value"))==null?void 0:o.textContent;f&&m&&e.setRequestHeader(f,m)}}const l=i.querySelector("Challenge"),c=l?.textContent;if(!c)throw new Error("Cannot find <Challenge> in key message");return L$(atob(c))}setupLicenseXHR(e,t,n,i){const s=this.config.licenseXhrSetup;return s?Promise.resolve().then(()=>{if(!n.decryptdata)throw new Error("Key removed");return s.call(this.hls,e,t,n,i)}).catch(a=>{if(!n.decryptdata)throw a;return e.open("POST",t,!0),s.call(this.hls,e,t,n,i)}).then(a=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:a||i})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:i}))}requestLicense(e,t){const n=this.config.keyLoadPolicy.default;return new Promise((i,s)=>{const a=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${a}`);const o=new XMLHttpRequest;o.responseType="arraybuffer",o.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return s(new Error("invalid state"));if(o.readyState===4)if(o.status===200){this._requestLicenseFailureCount=0;let l=o.response;this.log(`License received ${l instanceof ArrayBuffer?l.byteLength:l}`);const c=this.config.licenseResponseCallback;if(c)try{l=c.call(this.hls,o,a,e)}catch(u){this.error(u)}i(l)}else{const l=n.errorRetry,c=l?l.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>c||o.status>=400&&o.status<500)s(new ys({type:at.KEY_SYSTEM_ERROR,details:ce.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0,networkDetails:o,response:{url:a,data:void 0,code:o.status,text:o.statusText}},`License Request XHR failed (${a}). Status: ${o.status} (${o.statusText})`));else{const u=c-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${u} attempts left`),this.requestLicense(e,t).then(i,s)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=o,this.setupLicenseXHR(o,a,e,t).then(({xhr:l,licenseChallenge:c})=>{e.keySystem==Vt.PLAYREADY&&(c=this.unpackPlayReadyKeyMessage(l,c)),l.send(c)})})}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const n=t.media;this.media=n,n.removeEventListener("encrypted",this.onMediaEncrypted),n.removeEventListener("waitingforkey",this.onWaitingForKey),n.addEventListener("encrypted",this.onMediaEncrypted),n.addEventListener("waitingforkey",this.onWaitingForKey)}onMediaDetached(){const e=this.media,t=this.mediaKeySessions;e&&(e.removeEventListener("encrypted",this.onMediaEncrypted),e.removeEventListener("waitingforkey",this.onWaitingForKey),this.media=null),this._requestLicenseFailureCount=0,this.setMediaKeysQueue=[],this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},V0.clearKeyUriToKeyIdMap();const n=t.length;Ff.CDMCleanupPromise=Promise.all(t.map(i=>this.removeSession(i)).concat(e?.setMediaKeys(null).catch(i=>{this.log(`Could not clear media keys: ${i}`)}))).then(()=>{n&&(this.log("finished closing key sessions and clearing media keys"),t.length=0)}).catch(i=>{this.log(`Could not close sessions and clear media keys: ${i}`)})}onManifestLoading(){this.keyFormatPromise=null}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const n=t.reduce((i,s)=>(i.indexOf(s.keyFormat)===-1&&i.push(s.keyFormat),i),[]);this.log(`Selecting key-system from session-keys ${n.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(n)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:n}=e;if(t){this.log(`Remove licenses and keys and close session ${t.sessionId}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),n&&n.readyState!==XMLHttpRequest.DONE&&n.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const i=this.mediaKeySessions.indexOf(e);return i>-1&&this.mediaKeySessions.splice(i,1),t.remove().catch(s=>{this.log(`Could not remove session: ${s}`)}).then(()=>t.close()).catch(s=>{this.log(`Could not close session: ${s}`)})}}}Ff.CDMCleanupPromise=void 0;class ys extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}var Xn;(function(r){r.MANIFEST="m",r.AUDIO="a",r.VIDEO="v",r.MUXED="av",r.INIT="i",r.CAPTION="c",r.TIMED_TEXT="tt",r.KEY="k",r.OTHER="o"})(Xn||(Xn={}));var V$;(function(r){r.DASH="d",r.HLS="h",r.SMOOTH="s",r.OTHER="o"})(V$||(V$={}));var nd;(function(r){r.OBJECT="CMCD-Object",r.REQUEST="CMCD-Request",r.SESSION="CMCD-Session",r.STATUS="CMCD-Status"})(nd||(nd={}));const int={[nd.OBJECT]:["br","d","ot","tb"],[nd.REQUEST]:["bl","dl","mtp","nor","nrr","su"],[nd.SESSION]:["cid","pr","sf","sid","st","v"],[nd.STATUS]:["bs","rtp"]};class Ep{constructor(e,t){this.value=void 0,this.params=void 0,Array.isArray(e)&&(e=e.map(n=>n instanceof Ep?n:new Ep(n))),this.value=e,this.params=t}}class aee{constructor(e){this.description=void 0,this.description=e}}const snt="Dict";function ant(r){return Array.isArray(r)?JSON.stringify(r):r instanceof Map?"Map{}":r instanceof Set?"Set{}":typeof r=="object"?JSON.stringify(r):String(r)}function ont(r,e,t,n){return new Error(`failed to ${r} "${ant(e)}" as ${t}`,{cause:n})}const oU="Bare Item",lnt="Boolean",cnt="Byte Sequence",unt="Decimal",dnt="Integer";function hnt(r){return r<-999999999999999||999999999999999<r}const fnt=/[\x00-\x1f\x7f]+/,pnt="Token",mnt="Key";function bo(r,e,t){return ont("serialize",r,e,t)}function gnt(r){if(typeof r!="boolean")throw bo(r,lnt);return r?"?1":"?0"}function vnt(r){return btoa(String.fromCharCode(...r))}function ynt(r){if(ArrayBuffer.isView(r)===!1)throw bo(r,cnt);return`:${vnt(r)}:`}function oee(r){if(hnt(r))throw bo(r,dnt);return r.toString()}function bnt(r){return`@${oee(r.getTime()/1e3)}`}function lee(r,e){if(r<0)return-lee(-r,e);const t=Math.pow(10,e);if(Math.abs(r*t%1-.5)<Number.EPSILON){const i=Math.floor(r*t);return(i%2===0?i:i+1)/t}else return Math.round(r*t)/t}function Ent(r){const e=lee(r,3);if(Math.floor(Math.abs(e)).toString().length>12)throw bo(r,unt);const t=e.toString();return t.includes(".")?t:`${t}.0`}const xnt="String";function wnt(r){if(fnt.test(r))throw bo(r,xnt);return`"${r.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function Tnt(r){return r.description||r.toString().slice(7,-1)}function lU(r){const e=Tnt(r);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw bo(e,pnt);return e}function G$(r){switch(typeof r){case"number":if(!Ve(r))throw bo(r,oU);return Number.isInteger(r)?oee(r):Ent(r);case"string":return wnt(r);case"symbol":return lU(r);case"boolean":return gnt(r);case"object":if(r instanceof Date)return bnt(r);if(r instanceof Uint8Array)return ynt(r);if(r instanceof aee)return lU(r);default:throw bo(r,oU)}}function q$(r){if(/^[a-z*][a-z0-9\-_.*]*$/.test(r)===!1)throw bo(r,mnt);return r}function zP(r){return r==null?"":Object.entries(r).map(([e,t])=>t===!0?`;${q$(e)}`:`;${q$(e)}=${G$(t)}`).join("")}function cee(r){return r instanceof Ep?`${G$(r.value)}${zP(r.params)}`:G$(r)}function Snt(r){return`(${r.value.map(cee).join(" ")})${zP(r.params)}`}function Ant(r,e={whitespace:!0}){if(typeof r!="object")throw bo(r,snt);const t=r instanceof Map?r.entries():Object.entries(r),n=e!=null&&e.whitespace?" ":"";return Array.from(t).map(([i,s])=>{s instanceof Ep||(s=new Ep(s));let a=q$(i);return s.value===!0?a+=zP(s.params):(a+="=",Array.isArray(s.value)?a+=Snt(s):a+=cee(s)),a}).join(`,${n}`)}function _nt(r,e){return Ant(r,e)}const Cnt=r=>r==="ot"||r==="sf"||r==="st",Rnt=r=>typeof r=="number"?Ve(r):r!=null&&r!==""&&r!==!1;function knt(r,e){const t=new URL(r),n=new URL(e);if(t.origin!==n.origin)return r;const i=t.pathname.split("/").slice(1),s=n.pathname.split("/").slice(1,-1);for(;i[0]===s[0];)i.shift(),s.shift();for(;s.length;)s.shift(),i.unshift("..");return i.join("/")}function Int(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,i=>{const s=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(i=="x"?s:s&3|8).toString(16)})}}}const Y1=r=>Math.round(r),$nt=(r,e)=>(e!=null&&e.baseUrl&&(r=knt(r,e.baseUrl)),encodeURIComponent(r)),Zb=r=>Y1(r/100)*100,Dnt={br:Y1,d:Y1,bl:Zb,dl:Zb,mtp:Zb,nor:$nt,rtp:Zb,tb:Y1};function Lnt(r,e){const t={};if(r==null||typeof r!="object")return t;const n=Object.keys(r).sort(),i=tn({},Dnt,e?.formatters),s=e?.filter;return n.forEach(a=>{if(s!=null&&s(a))return;let o=r[a];const l=i[a];l&&(o=l(o,e)),!(a==="v"&&o===1)&&(a=="pr"&&o===1||Rnt(o)&&(Cnt(a)&&typeof o=="string"&&(o=new aee(o)),t[a]=o))}),t}function uee(r,e={}){return r?_nt(Lnt(r,e),tn({whitespace:!1},e)):""}function Ont(r,e={}){if(!r)return{};const t=Object.entries(r),n=Object.entries(int).concat(Object.entries(e?.customHeaderMap||{})),i=t.reduce((s,a)=>{var o,l;const[c,u]=a,d=((o=n.find(h=>h[1].includes(c)))==null?void 0:o[0])||nd.REQUEST;return(l=s[d])!=null||(s[d]={}),s[d][c]=u,s},{});return Object.entries(i).reduce((s,[a,o])=>(s[a]=uee(o,e),s),{})}function Pnt(r,e,t){return tn(r,Ont(e,t))}const Mnt="CMCD";function Nnt(r,e={}){if(!r)return"";const t=uee(r,e);return`${Mnt}=${encodeURIComponent(t)}`}const cU=/CMCD=[^&#]+/;function Fnt(r,e,t){const n=Nnt(e,t);if(!n)return r;if(cU.test(r))return r.replace(cU,n);const i=r.includes("?")?"&":"?";return`${r}${i}${n}`}class Bnt{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=i=>{try{this.apply(i,{ot:Xn.MANIFEST,su:!this.initialized})}catch(s){re.warn("Could not generate manifest CMCD data.",s)}},this.applyFragmentData=i=>{try{const s=i.frag,a=this.hls.levels[s.level],o=this.getObjectType(s),l={d:s.duration*1e3,ot:o};(o===Xn.VIDEO||o===Xn.AUDIO||o==Xn.MUXED)&&(l.br=a.bitrate/1e3,l.tb=this.getTopBandwidth(o)/1e3,l.bl=this.getBufferLength(o)),this.apply(i,l)}catch(s){re.warn("Could not generate segment CMCD data.",s)}},this.hls=e;const t=this.config=e.config,{cmcd:n}=t;n!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=n.sessionId||Int(),this.cid=n.contentId,this.useHeaders=n.useHeaders===!0,this.includeKeys=n.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHED,this.onMediaDetached,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHED,this.onMediaDetached,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var n,i;this.audioBuffer=(n=t.tracks.audio)==null?void 0:n.buffer,this.videoBuffer=(i=t.tracks.video)==null?void 0:i.buffer}createData(){var e;return{v:1,sf:V$.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){tn(t,this.createData());const n=t.ot===Xn.INIT||t.ot===Xn.VIDEO||t.ot===Xn.MUXED;this.starved&&n&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:i}=this;i&&(t=Object.keys(t).reduce((s,a)=>(i.includes(a)&&(s[a]=t[a]),s),{})),this.useHeaders?(e.headers||(e.headers={}),Pnt(e.headers,t)):e.url=Fnt(e.url,t)}getObjectType(e){const{type:t}=e;if(t==="subtitle")return Xn.TIMED_TEXT;if(e.sn==="initSegment")return Xn.INIT;if(t==="audio")return Xn.AUDIO;if(t==="main")return this.hls.audioTracks.length?Xn.VIDEO:Xn.MUXED}getTopBandwidth(e){let t=0,n;const i=this.hls;if(e===Xn.AUDIO)n=i.audioTracks;else{const s=i.maxAutoLevel,a=s>-1?s+1:i.levels.length;n=i.levels.slice(0,a)}for(const s of n)s.bitrate>t&&(t=s.bitrate);return t>0?t:NaN}getBufferLength(e){const t=this.hls.media,n=e===Xn.AUDIO?this.audioBuffer:this.videoBuffer;return!n||!t?NaN:ur.bufferInfo(n,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,n=e||this.config.loader;return class{constructor(s){this.loader=void 0,this.loader=new n(s)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(s,a,o){t(s),this.loader.load(s,a,o)}}}}const Unt=3e5;class Wnt{constructor(e){this.hls=void 0,this.log=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this.pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.log=re.log.bind(re,"[content-steering]:"),this.registerListeners()}registerListeners(){const e=this.hls;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.ERROR,this.onError,this))}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(n=>n!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:n}=t;n!==null&&(this.pathwayId=n.pathwayId,this.uri=n.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:n}=t;if(n?.action===Un.SendAlternateToPenaltyBox&&n.flags===Ks.MoveAllAlternatesMatchingHost){const i=this.levels;let s=this.pathwayPriority,a=this.pathwayId;if(t.context){const{groupId:o,pathwayId:l,type:c}=t.context;o&&i?a=this.getPathwayForGroupId(o,c,a):l&&(a=l)}a in this.penalizedPathways||(this.penalizedPathways[a]=performance.now()),!s&&i&&(s=i.reduce((o,l)=>(o.indexOf(l.pathwayId)===-1&&o.push(l.pathwayId),o),[])),s&&s.length>1&&(this.updatePathwayPriority(s),n.resolved=this.pathwayId!==a),n.resolved||re.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${a} levels: ${i&&i.length} priorities: ${JSON.stringify(s)} penalized: ${JSON.stringify(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const n=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${n}"`),t=this.getLevelsForPathway(n),this.pathwayId=n}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this.pathwayPriority=e;let t;const n=this.penalizedPathways,i=performance.now();Object.keys(n).forEach(s=>{i-n[s]>Unt&&delete n[s]});for(let s=0;s<e.length;s++){const a=e[s];if(a in n)continue;if(a===this.pathwayId)return;const o=this.hls.nextLoadLevel,l=this.hls.levels[o];if(t=this.getLevelsForPathway(a),t.length>0){this.log(`Setting Pathway to "${a}"`),this.pathwayId=a,kJ(t),this.hls.trigger(P.LEVELS_UPDATED,{levels:t});const c=this.hls.levels[o];l&&c&&this.levels&&(c.attrs["STABLE-VARIANT-ID"]!==l.attrs["STABLE-VARIANT-ID"]&&c.bitrate!==l.bitrate&&this.log(`Unstable Pathways change from bitrate ${l.bitrate} to ${c.bitrate}`),this.hls.nextLoadLevel=o);break}}}getPathwayForGroupId(e,t,n){const i=this.getLevelsForPathway(n).concat(this.levels||[]);for(let s=0;s<i.length;s++)if(t===Lt.AUDIO_TRACK&&i[s].hasAudioGroup(e)||t===Lt.SUBTITLE_TRACK&&i[s].hasSubtitleGroup(e))return i[s].pathwayId;return n}clonePathways(e){const t=this.levels;if(!t)return;const n={},i={};e.forEach(s=>{const{ID:a,"BASE-ID":o,"URI-REPLACEMENT":l}=s;if(t.some(u=>u.pathwayId===a))return;const c=this.getLevelsForPathway(o).map(u=>{const d=new kr(u.attrs);d["PATHWAY-ID"]=a;const h=d.AUDIO&&`${d.AUDIO}_clone_${a}`,f=d.SUBTITLES&&`${d.SUBTITLES}_clone_${a}`;h&&(n[d.AUDIO]=h,d.AUDIO=h),f&&(i[d.SUBTITLES]=f,d.SUBTITLES=f);const m=dee(u.uri,d["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",l),g=new bp({attrs:d,audioCodec:u.audioCodec,bitrate:u.bitrate,height:u.height,name:u.name,url:m,videoCodec:u.videoCodec,width:u.width});if(u.audioGroups)for(let y=1;y<u.audioGroups.length;y++)g.addGroupId("audio",`${u.audioGroups[y]}_clone_${a}`);if(u.subtitleGroups)for(let y=1;y<u.subtitleGroups.length;y++)g.addGroupId("text",`${u.subtitleGroups[y]}_clone_${a}`);return g});t.push(...c),uU(this.audioTracks,n,l,a),uU(this.subtitleTracks,i,l,a)})}loadSteeringManifest(e){const t=this.hls.config,n=t.loader;this.loader&&this.loader.destroy(),this.loader=new n(t);let i;try{i=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(i.protocol!=="data:"){const u=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;i.searchParams.set("_HLS_pathway",this.pathwayId),i.searchParams.set("_HLS_throughput",""+u)}const s={responseType:"json",url:i.href},a=t.steeringManifestLoadPolicy.default,o=a.errorRetry||a.timeoutRetry||{},l={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:o.maxNumRetry||0,retryDelay:o.retryDelayMs||0,maxRetryDelay:o.maxRetryDelayMs||0},c={onSuccess:(u,d,h,f)=>{this.log(`Loaded steering manifest: "${i}"`);const m=u.data;if(m.VERSION!==1){this.log(`Steering VERSION ${m.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=m.TTL;const{"RELOAD-URI":g,"PATHWAY-CLONES":y,"PATHWAY-PRIORITY":b}=m;if(g)try{this.uri=new self.URL(g,i).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${g}`);return}this.scheduleRefresh(this.uri||h.url),y&&this.clonePathways(y);const E={steeringManifest:m,url:i.toString()};this.hls.trigger(P.STEERING_MANIFEST_LOADED,E),b&&this.updatePathwayPriority(b)},onError:(u,d,h,f)=>{if(this.log(`Error loading steering manifest: ${u.code} ${u.text} (${d.url})`),this.stopLoad(),u.code===410){this.enabled=!1,this.log(`Steering manifest ${d.url} no longer available`);return}let m=this.timeToLoad*1e3;if(u.code===429){const g=this.loader;if(typeof g?.getResponseHeader=="function"){const y=g.getResponseHeader("Retry-After");y&&(m=parseFloat(y)*1e3)}this.log(`Steering manifest ${d.url} rate limited`);return}this.scheduleRefresh(this.uri||d.url,m)},onTimeout:(u,d,h)=>{this.log(`Timeout loading steering manifest (${d.url})`),this.scheduleRefresh(this.uri||d.url)}};this.log(`Requesting steering manifest: ${i}`),this.loader.load(s,l,c)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var n;const i=(n=this.hls)==null?void 0:n.media;if(i&&!i.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function uU(r,e,t,n){r&&Object.keys(e).forEach(i=>{const s=r.filter(a=>a.groupId===i).map(a=>{const o=tn({},a);return o.details=void 0,o.attrs=new kr(o.attrs),o.url=o.attrs.URI=dee(a.url,a.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),o.groupId=o.attrs["GROUP-ID"]=e[i],o.attrs["PATHWAY-ID"]=n,o});r.push(...s)})}function dee(r,e,t,n){const{HOST:i,PARAMS:s,[t]:a}=n;let o;e&&(o=a?.[e],o&&(r=o));const l=new self.URL(r);return i&&!o&&(l.host=i),s&&Object.keys(s).sort().forEach(c=>{c&&l.searchParams.set(c,s[c])}),l.href}const Hnt=/^age:\s*[\d.]+\s*$/im;class hee{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new yS,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,n){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=n,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const n=this.loader=new self.XMLHttpRequest,i=this.stats;i.loading.first=0,i.loaded=0,i.aborted=!1;const s=this.xhrSetup;s?Promise.resolve().then(()=>{if(!(this.loader!==n||this.stats.aborted))return s(n,t.url)}).catch(a=>{if(!(this.loader!==n||this.stats.aborted))return n.open("GET",t.url,!0),s(n,t.url)}).then(()=>{this.loader!==n||this.stats.aborted||this.openAndSendXhr(n,t,e)}).catch(a=>{this.callbacks.onError({code:n.status,text:a.message},t,n,i)}):this.openAndSendXhr(n,t,e)}openAndSendXhr(e,t,n){e.readyState||e.open("GET",t.url,!0);const i=t.headers,{maxTimeToFirstByteMs:s,maxLoadTimeMs:a}=n.loadPolicy;if(i)for(const o in i)e.setRequestHeader(o,i[o]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),n.timeout=s&&Ve(s)?s:a,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),n.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:n}=this;if(!e||!t)return;const i=t.readyState,s=this.config;if(!n.aborted&&i>=2&&(n.loading.first===0&&(n.loading.first=Math.max(self.performance.now(),n.loading.start),s.timeout!==s.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),s.timeout=s.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),s.loadPolicy.maxLoadTimeMs-(n.loading.first-n.loading.start)))),i===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const a=t.status,o=t.responseType==="text"?t.responseText:null;if(a>=200&&a<300){const d=o??t.response;if(d!=null){n.loading.end=Math.max(self.performance.now(),n.loading.first);const h=t.responseType==="arraybuffer"?d.byteLength:d.length;if(n.loaded=n.total=h,n.bwEstimate=n.total*8e3/(n.loading.end-n.loading.first),!this.callbacks)return;const f=this.callbacks.onProgress;if(f&&f(n,e,d,t),!this.callbacks)return;const m={url:t.responseURL,data:d,code:a};this.callbacks.onSuccess(m,n,e,t);return}}const l=s.loadPolicy.errorRetry,c=n.retry,u={url:e.url,data:void 0,code:a};ww(l,c,!1,u)?this.retry(l):(re.error(`${a} while loading ${e.url}`),this.callbacks.onError({code:a,text:t.statusText},e,t,n))}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(ww(e,t,!0))this.retry(e);else{var n;re.warn(`timeout while loading ${(n=this.context)==null?void 0:n.url}`);const i=this.callbacks;i&&(this.abortInternal(),i.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:n}=this;this.retryDelay=PP(e,n.retry),n.retry++,re.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${n.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&Hnt.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}function Vnt(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const Gnt=/(\d+)-(\d+)\/(\d+)/;class dU{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||znt,this.controller=new self.AbortController,this.stats=new yS}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,n){const i=this.stats;if(i.loading.start)throw new Error("Loader can only be used once.");i.loading.start=self.performance.now();const s=qnt(e,this.controller.signal),a=n.onProgress,o=e.responseType==="arraybuffer",l=o?"byteLength":"length",{maxTimeToFirstByteMs:c,maxLoadTimeMs:u}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=n,this.request=this.fetchSetup(e,s),self.clearTimeout(this.requestTimeout),t.timeout=c&&Ve(c)?c:u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},t.timeout),self.fetch(this.request).then(d=>{this.response=this.loader=d;const h=Math.max(self.performance.now(),i.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=u,this.requestTimeout=self.setTimeout(()=>{this.abortInternal(),n.onTimeout(i,e,this.response)},u-(h-i.loading.start)),!d.ok){const{status:f,statusText:m}=d;throw new Ynt(m||"fetch, bad network response",f,d)}return i.loading.first=h,i.total=Knt(d.headers)||i.total,a&&Ve(t.highWaterMark)?this.loadProgressively(d,i,e,t.highWaterMark,a):o?d.arrayBuffer():e.responseType==="json"?d.json():d.text()}).then(d=>{const h=this.response;if(!h)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),i.loading.end=Math.max(self.performance.now(),i.loading.first);const f=d[l];f&&(i.loaded=i.total=f);const m={url:h.url,data:d,code:h.status};a&&!Ve(t.highWaterMark)&&a(i,e,d,h),n.onSuccess(m,i,e,h)}).catch(d=>{if(self.clearTimeout(this.requestTimeout),i.aborted)return;const h=d&&d.code||0,f=d?d.message:null;n.onError({code:h,text:f},e,d?d.details:null,i)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,n,i=0,s){const a=new LJ,o=e.body.getReader(),l=()=>o.read().then(c=>{if(c.done)return a.dataLength&&s(t,n,a.flush(),e),Promise.resolve(new ArrayBuffer(0));const u=c.value,d=u.length;return t.loaded+=d,d<i||a.dataLength?(a.push(u),a.dataLength>=i&&s(t,n,a.flush(),e)):s(t,n,u,e),l()}).catch(()=>Promise.reject());return l()}}function qnt(r,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(tn({},r.headers))};return r.rangeEnd&&t.headers.set("Range","bytes="+r.rangeStart+"-"+String(r.rangeEnd-1)),t}function jnt(r){const e=Gnt.exec(r);if(e)return parseInt(e[2])-parseInt(e[1])+1}function Knt(r){const e=r.get("Content-Range");if(e){const n=jnt(e);if(Ve(n))return n}const t=r.get("Content-Length");if(t)return parseInt(t)}function znt(r,e){return new self.Request(r.url,e)}class Ynt extends Error{constructor(e,t,n){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=n}}const Qnt=/\s/,Xnt={newCue(r,e,t,n){const i=[];let s,a,o,l,c;const u=self.VTTCue||self.TextTrackCue;for(let h=0;h<n.rows.length;h++)if(s=n.rows[h],o=!0,l=0,c="",!s.isEmpty()){var d;for(let g=0;g<s.chars.length;g++)Qnt.test(s.chars[g].uchar)&&o?l++:(c+=s.chars[g].uchar,o=!1);s.cueStartTime=e,e===t&&(t+=1e-4),l>=16?l--:l++;const f=tee(c.trim()),m=jP(e,t,f);r!=null&&(d=r.cues)!=null&&d.getCueById(m)||(a=new u(e,t,f),a.id=m,a.line=h+1,a.align="left",a.position=10+Math.min(80,Math.floor(l*8/32)*10),i.push(a))}return r&&i.length&&(i.sort((h,f)=>h.line==="auto"||f.line==="auto"?0:h.line>8&&f.line>8?f.line-h.line:h.line-f.line),i.forEach(h=>AJ(r,h))),i}},Znt={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},fee=Ln(Ln({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,maxBufferSize:60*1e3*1e3,maxBufferHole:.1,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:hee,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Att,bufferController:krt,capLevelController:KP,errorController:ftt,fpsController:nnt,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:uJ,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableID3MetadataCues:!0,useMediaCapabilities:!0,certLoadPolicy:{default:Znt},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},Jnt()),{},{subtitleStreamController:Art,subtitleTrackController:Crt,timelineController:tnt,audioStreamController:Trt,audioTrackController:Srt,emeController:Ff,cmcdController:Bnt,contentSteeringController:Wnt});function Jnt(){return{cueHandler:Xnt,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function eit(r,e){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const t=j$(r),n=["manifest","level","frag"],i=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return n.forEach(s=>{const a=`${s==="level"?"playlist":s}LoadPolicy`,o=e[a]===void 0,l=[];i.forEach(c=>{const u=`${s}Loading${c}`,d=e[u];if(d!==void 0&&o){l.push(u);const h=t[a].default;switch(e[a]={default:h},c){case"TimeOut":h.maxLoadTimeMs=d,h.maxTimeToFirstByteMs=d;break;case"MaxRetry":h.errorRetry.maxNumRetry=d,h.timeoutRetry.maxNumRetry=d;break;case"RetryDelay":h.errorRetry.retryDelayMs=d,h.timeoutRetry.retryDelayMs=d;break;case"MaxRetryTimeout":h.errorRetry.maxRetryDelayMs=d,h.timeoutRetry.maxRetryDelayMs=d;break}}}),l.length&&re.warn(`hls.js config: "${l.join('", "')}" setting(s) are deprecated, use "${a}": ${JSON.stringify(e[a])}`)}),Ln(Ln({},t),e)}function j$(r){return r&&typeof r=="object"?Array.isArray(r)?r.map(j$):Object.keys(r).reduce((e,t)=>(e[t]=j$(r[t]),e),{}):r}function tit(r){const e=r.loader;e!==dU&&e!==hee?(re.log("[config]: Custom loader detected, cannot enable progressive streaming"),r.progressive=!1):Vnt()&&(r.loader=dU,r.progressive=!0,r.enableSoftwareAES=!0,re.log("[config]: Progressive streaming enabled, using FetchLoader"))}let _R;class rit extends MP{constructor(e,t){super(e,"[level-controller]"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this),e.on(P.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this),e.off(P.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const n=this.hls.config.preferManagedMediaSource,i=[],s={},a={};let o=!1,l=!1,c=!1;t.levels.forEach(u=>{var d,h;const f=u.attrs;let{audioCodec:m,videoCodec:g}=u;((d=m)==null?void 0:d.indexOf("mp4a.40.34"))!==-1&&(_R||(_R=/chrome|firefox/i.test(navigator.userAgent)),_R&&(u.audioCodec=m=void 0)),m&&(u.audioCodec=m=bw(m,n)),((h=g)==null?void 0:h.indexOf("avc1"))===0&&(g=u.videoCodec=Het(g));const{width:y,height:b,unknownCodecs:E}=u;if(o||(o=!!(y&&b)),l||(l=!!g),c||(c=!!m),E!=null&&E.length||m&&!dR(m,"audio",n)||g&&!dR(g,"video",n))return;const{CODECS:w,"FRAME-RATE":A,"HDCP-LEVEL":S,"PATHWAY-ID":_,RESOLUTION:C,"VIDEO-RANGE":k}=f,I=`${`${_||"."}-`}${u.bitrate}-${C}-${A}-${w}-${k}-${S}`;if(s[I])if(s[I].uri!==u.url&&!u.attrs["PATHWAY-ID"]){const L=a[I]+=1;u.attrs["PATHWAY-ID"]=new Array(L+1).join(".");const M=new bp(u);s[I]=M,i.push(M)}else s[I].addGroupId("audio",f.AUDIO),s[I].addGroupId("text",f.SUBTITLES);else{const L=new bp(u);s[I]=L,a[I]=1,i.push(L)}}),this.filterAndSortMediaOptions(i,t,o,l,c)}filterAndSortMediaOptions(e,t,n,i,s){let a=[],o=[],l=e;if((n||i)&&s&&(l=l.filter(({videoCodec:m,videoRange:g,width:y,height:b})=>(!!m||!!(y&&b))&&ttt(g))),l.length===0){Promise.resolve().then(()=>{if(this.hls){t.levels.length&&this.warn(`One or more CODECS in variant not supported: ${JSON.stringify(t.levels[0].attrs)}`);const m=new Error("no level with compatible codecs found in manifest");this.hls.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:m,reason:m.message})}});return}if(t.audioTracks){const{preferManagedMediaSource:m}=this.hls.config;a=t.audioTracks.filter(g=>!g.audioCodec||dR(g.audioCodec,"audio",m)),hU(a)}t.subtitles&&(o=t.subtitles,hU(o));const c=l.slice(0);l.sort((m,g)=>{if(m.attrs["HDCP-LEVEL"]!==g.attrs["HDCP-LEVEL"])return(m.attrs["HDCP-LEVEL"]||"")>(g.attrs["HDCP-LEVEL"]||"")?1:-1;if(n&&m.height!==g.height)return m.height-g.height;if(m.frameRate!==g.frameRate)return m.frameRate-g.frameRate;if(m.videoRange!==g.videoRange)return Ew.indexOf(m.videoRange)-Ew.indexOf(g.videoRange);if(m.videoCodec!==g.videoCodec){const y=bB(m.videoCodec),b=bB(g.videoCodec);if(y!==b)return b-y}if(m.uri===g.uri&&m.codecSet!==g.codecSet){const y=yw(m.codecSet),b=yw(g.codecSet);if(y!==b)return b-y}return m.averageBitrate!==g.averageBitrate?m.averageBitrate-g.averageBitrate:0});let u=c[0];if(this.steering&&(l=this.steering.filterParsedLevels(l),l.length!==c.length)){for(let m=0;m<c.length;m++)if(c[m].pathwayId===l[0].pathwayId){u=c[m];break}}this._levels=l;for(let m=0;m<l.length;m++)if(l[m]===u){var d;this._firstLevel=m;const g=u.bitrate,y=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${l.length} level(s) found, first bitrate: ${g}`),((d=this.hls.userConfig)==null?void 0:d.abrEwmaDefaultEstimate)===void 0){const b=Math.min(g,this.hls.config.abrEwmaDefaultEstimateMax);b>y&&y===fee.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=b)}break}const h=s&&!i,f={levels:l,audioTracks:a,subtitleTracks:o,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:s,video:i,altAudio:!h&&a.some(m=>!!m.url)};this.hls.trigger(P.MANIFEST_PARSED,f),(this.hls.config.autoStartLoad||this.hls.forceStartLoad)&&this.hls.startLoad(this.hls.config.startPosition)}get levels(){return this._levels.length===0?null:this._levels}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const u=new Error("invalid level idx"),d=e<0;if(this.hls.trigger(P.ERROR,{type:at.OTHER_ERROR,details:ce.LEVEL_SWITCH_ERROR,level:e,fatal:d,error:u,reason:u.message}),d)return;e=Math.min(e,t.length-1)}const n=this.currentLevelIndex,i=this.currentLevel,s=i?i.attrs["PATHWAY-ID"]:void 0,a=t[e],o=a.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=a,n===e&&a.details&&i&&s===o)return;this.log(`Switching to level ${e} (${a.height?a.height+"p ":""}${a.videoRange?a.videoRange+" ":""}${a.codecSet?a.codecSet+" ":""}@${a.bitrate})${o?" with Pathway "+o:""} from level ${n}${s?" with Pathway "+s:""}`);const l={level:e,attrs:a.attrs,details:a.details,bitrate:a.bitrate,averageBitrate:a.averageBitrate,maxBitrate:a.maxBitrate,realBitrate:a.realBitrate,width:a.width,height:a.height,codecSet:a.codecSet,audioCodec:a.audioCodec,videoCodec:a.videoCodec,audioGroups:a.audioGroups,subtitleGroups:a.subtitleGroups,loaded:a.loaded,loadError:a.loadError,fragmentError:a.fragmentError,name:a.name,id:a.id,uri:a.uri,url:a.url,urlId:0,audioGroupIds:a.audioGroupIds,textGroupIds:a.textGroupIds};this.hls.trigger(P.LEVEL_SWITCHING,l);const c=a.details;if(!c||c.live){const u=this.switchParams(a.uri,i?.details,c);this.loadPlaylist(u)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}onError(e,t){t.fatal||!t.context||t.context.type===Lt.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===nt.MAIN){const n=t.elementaryStreams;if(!Object.keys(n).some(s=>!!n[s]))return;const i=this._levels[t.level];i!=null&&i.loadError&&(this.log(`Resetting level error count of ${i.loadError} on frag buffered`),i.loadError=0)}}onLevelLoaded(e,t){var n;const{level:i,details:s}=t,a=this._levels[i];if(!a){var o;this.warn(`Invalid level index ${i}`),(o=t.deliveryDirectives)!=null&&o.skip&&(s.deltaUpdateFailed=!0);return}i===this.currentLevelIndex?(a.fragmentError===0&&(a.loadError=0),this.playlistLoaded(i,t,a.details)):(n=t.deliveryDirectives)!=null&&n.skip&&(s.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist();const t=this.currentLevelIndex,n=this.currentLevel;if(n&&this.shouldLoadPlaylist(n)){let i=n.uri;if(e)try{i=e.addDirectives(i)}catch(a){this.warn(`Could not construct new URL with HLS Delivery Directives: ${a}`)}const s=n.attrs["PATHWAY-ID"];this.log(`Loading level index ${t}${e?.msn!==void 0?" at sn "+e.msn+" part "+e.part:""} with${s?" Pathway "+s:""} ${i}`),this.clearTimer(),this.hls.trigger(P.LEVEL_LOADING,{url:i,level:t,pathwayId:n.attrs["PATHWAY-ID"],id:0,deliveryDirectives:e||null})}}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;const n=this._levels.filter((i,s)=>s!==e?!0:(this.steering&&this.steering.removeLevel(i),i===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,i.details&&i.details.fragments.forEach(a=>a.level=-1)),!1));kJ(n),this._levels=n,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.hls.trigger(P.LEVELS_UPDATED,{levels:n})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:n}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(P.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:n}))}}function hU(r){const e={};r.forEach(t=>{const n=t.groupId||"";t.id=e[n]=e[n]||0,e[n]++})}class nit{constructor(e){this.config=void 0,this.keyUriToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const n in this.keyUriToKeyInfo){const i=this.keyUriToKeyInfo[n].loader;if(i){var t;if(e&&e!==((t=i.context)==null?void 0:t.frag.type))return;i.abort()}}}detach(){for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyUriToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyUriToKeyInfo){const t=this.keyUriToKeyInfo[e].loader;t&&t.destroy()}this.keyUriToKeyInfo={}}createKeyLoadError(e,t=ce.KEY_LOAD_ERROR,n,i,s){return new el({type:at.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:s,error:n,networkDetails:i})}loadClear(e,t){if(this.emeController&&this.config.emeEnabled){const{sn:n,cc:i}=e;for(let s=0;s<t.length;s++){const a=t[s];if(i<=a.cc&&(n==="initSegment"||a.sn==="initSegment"||n<a.sn)){this.emeController.selectKeySystemFormat(a).then(o=>{a.setKeyFormat(o)});break}}}}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var n,i;t&&e.setKeyFormat(t);const s=e.decryptdata;if(!s){const c=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:"Missing decryption data on fragment in onKeyLoading");return Promise.reject(this.createKeyLoadError(e,ce.KEY_LOAD_ERROR,c))}const a=s.uri;if(!a)return Promise.reject(this.createKeyLoadError(e,ce.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${a}"`)));let o=this.keyUriToKeyInfo[a];if((n=o)!=null&&n.decryptdata.key)return s.key=o.decryptdata.key,Promise.resolve({frag:e,keyInfo:o});if((i=o)!=null&&i.keyLoadPromise){var l;switch((l=o.mediaKeySessionContext)==null?void 0:l.keyStatus){case void 0:case"status-pending":case"usable":case"usable-in-future":return o.keyLoadPromise.then(c=>(s.key=c.keyInfo.decryptdata.key,{frag:e,keyInfo:o}))}}switch(o=this.keyUriToKeyInfo[a]={decryptdata:s,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},s.method){case"ISO-23001-7":case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return s.keyFormat==="identity"?this.loadKeyHTTP(o,e):this.loadKeyEME(o,e);case"AES-128":return this.loadKeyHTTP(o,e);default:return Promise.reject(this.createKeyLoadError(e,ce.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${s.method}"`)))}}loadKeyEME(e,t){const n={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){const i=this.emeController.loadKey(n);if(i)return(e.keyLoadPromise=i.then(s=>(e.mediaKeySessionContext=s,n))).catch(s=>{throw e.keyLoadPromise=null,s})}return Promise.resolve(n)}loadKeyHTTP(e,t){const n=this.config,i=n.loader,s=new i(n);return t.keyLoader=e.loader=s,e.keyLoadPromise=new Promise((a,o)=>{const l={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},c=n.keyLoadPolicy.default,u={loadPolicy:c,timeout:c.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},d={onSuccess:(h,f,m,g)=>{const{frag:y,keyInfo:b,url:E}=m;if(!y.decryptdata||b!==this.keyUriToKeyInfo[E])return o(this.createKeyLoadError(y,ce.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),g));b.decryptdata.key=y.decryptdata.key=new Uint8Array(h.data),y.keyLoader=null,b.loader=null,a({frag:y,keyInfo:b})},onError:(h,f,m,g)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ce.KEY_LOAD_ERROR,new Error(`HTTP Error ${h.code} loading key ${h.text}`),m,Ln({url:l.url,data:void 0},h)))},onTimeout:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ce.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),m))},onAbort:(h,f,m)=>{this.resetLoader(f),o(this.createKeyLoadError(t,ce.INTERNAL_ABORTED,new Error("key loading aborted"),m))}};s.load(l,u,d)})}resetLoader(e){const{frag:t,keyInfo:n,url:i}=e,s=n.loader;t.keyLoader===s&&(t.keyLoader=null,n.loader=null),delete this.keyUriToKeyInfo[i],s&&s.destroy()}}function pee(){return self.SourceBuffer||self.WebKitSourceBuffer}function mee(){if(!Fd())return!1;const e=pee();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function iit(){if(!mee())return!1;const r=Fd();return typeof r?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>r.isTypeSupported(G0(e,"video")))||["mp4a.40.2","fLaC"].some(e=>r.isTypeSupported(G0(e,"audio"))))}function sit(){var r;const e=pee();return typeof(e==null||(r=e.prototype)==null?void 0:r.changeType)=="function"}const ait=250,Q1=2,oit=.1,lit=.05;class cit{constructor(e,t,n,i){this.config=void 0,this.media=null,this.fragmentTracker=void 0,this.hls=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.config=e,this.media=t,this.fragmentTracker=n,this.hls=i}destroy(){this.media=null,this.hls=this.fragmentTracker=null}poll(e,t){const{config:n,media:i,stalled:s}=this;if(i===null)return;const{currentTime:a,seeking:o}=i,l=this.seeking&&!o,c=!this.seeking&&o;if(this.seeking=o,a!==e){if(this.moved=!0,o||(this.nudgeRetry=0),s!==null){if(this.stallReported){const y=self.performance.now()-s;re.warn(`playback not stuck anymore @${a}, after ${Math.round(y)}ms`),this.stallReported=!1}this.stalled=null}return}if(c||l){this.stalled=null;return}if(i.paused&&!o||i.ended||i.playbackRate===0||!ur.getBuffered(i).length){this.nudgeRetry=0;return}const u=ur.bufferInfo(i,a,0),d=u.nextStart||0;if(o){const y=u.len>Q1,b=!d||t&&t.start<=a||d-a>Q1&&!this.fragmentTracker.getPartialFragment(a);if(y||b)return;this.moved=!1}if(!this.moved&&this.stalled!==null){var h;if(!(u.len>0)&&!d)return;const b=Math.max(d,u.start||0)-a,E=this.hls.levels?this.hls.levels[this.hls.currentLevel]:null,A=(E==null||(h=E.details)==null?void 0:h.live)?E.details.targetduration*2:Q1,S=this.fragmentTracker.getPartialFragment(a);if(b>0&&(b<=A||S)){i.paused||this._trySkipBufferHole(S);return}}const f=self.performance.now();if(s===null){this.stalled=f;return}const m=f-s;if(!o&&m>=ait&&(this._reportStall(u),!this.media))return;const g=ur.bufferInfo(i,a,n.maxBufferHole);this._tryFixBufferStall(g,m)}_tryFixBufferStall(e,t){const{config:n,fragmentTracker:i,media:s}=this;if(s===null)return;const a=s.currentTime,o=i.getPartialFragment(a);o&&(this._trySkipBufferHole(o)||!this.media)||(e.len>n.maxBufferHole||e.nextStart&&e.nextStart-a<n.maxBufferHole)&&t>n.highBufferWatchdogPeriod*1e3&&(re.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())}_reportStall(e){const{hls:t,media:n,stallReported:i}=this;if(!i&&n){this.stallReported=!0;const s=new Error(`Playback stalling at @${n.currentTime} due to low buffer (${JSON.stringify(e)})`);re.warn(s.message),t.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_STALLED_ERROR,fatal:!1,error:s,buffer:e.len})}}_trySkipBufferHole(e){const{config:t,hls:n,media:i}=this;if(i===null)return 0;const s=i.currentTime,a=ur.bufferInfo(i,s,0),o=s<a.start?a.start:a.nextStart;if(o){const l=a.len<=t.maxBufferHole,c=a.len>0&&a.len<1&&i.readyState<3,u=o-s;if(u>0&&(l||c)){if(u>t.maxBufferHole){const{fragmentTracker:h}=this;let f=!1;if(s===0){const m=h.getAppendedFrag(0,nt.MAIN);m&&o<m.end&&(f=!0)}if(!f){const m=e||h.getAppendedFrag(s,nt.MAIN);if(m){let g=!1,y=m.end;for(;y<o;){const b=h.getPartialFragment(y);if(b)y+=b.duration;else{g=!0;break}}if(g)return 0}}}const d=Math.max(o+lit,s+oit);if(re.warn(`skipping hole, adjusting currentTime from ${s} to ${d}`),this.moved=!0,this.stalled=null,i.currentTime=d,e&&!e.gap){const h=new Error(`fragment loaded with buffer holes, seeking from ${s} to ${d}`);n.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:h,reason:h.message,frag:e})}return d}}return 0}_tryNudgeBuffer(){const{config:e,hls:t,media:n,nudgeRetry:i}=this;if(n===null)return;const s=n.currentTime;if(this.nudgeRetry++,i<e.nudgeMaxRetry){const a=s+(i+1)*e.nudgeOffset,o=new Error(`Nudging 'currentTime' from ${s} to ${a}`);re.warn(o.message),n.currentTime=a,t.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_NUDGE_ON_STALL,error:o,fatal:!1})}else{const a=new Error(`Playhead still not moving while enough data buffered @${s} after ${e.nudgeMaxRetry} nudges`);re.error(a.message),t.trigger(P.ERROR,{type:at.MEDIA_ERROR,details:ce.BUFFER_STALLED_ERROR,error:a,fatal:!0})}}}const uit=100;class dit extends BP{constructor(e,t,n){super(e,t,n,"[stream-controller]",nt.MAIN),this.audioCodecSwap=!1,this.gapController=null,this.level=-1,this._forceStartLoad=!1,this.altAudio=!1,this.audioOnly=!1,this.fragPlaying=null,this.onvplaying=null,this.onvseeked=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(P.MANIFEST_LOADING,this.onManifestLoading,this),e.on(P.MANIFEST_PARSED,this.onManifestParsed,this),e.on(P.LEVEL_LOADING,this.onLevelLoading,this),e.on(P.LEVEL_LOADED,this.onLevelLoaded,this),e.on(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(P.ERROR,this.onError,this),e.on(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(P.BUFFER_CREATED,this.onBufferCreated,this),e.on(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(P.FRAG_BUFFERED,this.onFragBuffered,this)}_unregisterListeners(){const{hls:e}=this;e.off(P.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(P.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(P.MANIFEST_LOADING,this.onManifestLoading,this),e.off(P.MANIFEST_PARSED,this.onManifestParsed,this),e.off(P.LEVEL_LOADED,this.onLevelLoaded,this),e.off(P.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(P.ERROR,this.onError,this),e.off(P.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(P.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(P.BUFFER_CREATED,this.onBufferCreated,this),e.off(P.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(P.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(P.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this._unregisterListeners(),super.onHandlerDestroying()}startLoad(e){if(this.levels){const{lastCurrentTime:t,hls:n}=this;if(this.stopLoad(),this.setInterval(uit),this.level=-1,!this.startFragRequested){let i=n.startLevel;i===-1&&(n.config.testBandwidth&&this.levels.length>1?(i=0,this.bitrateTest=!0):i=n.firstAutoLevel),n.nextLoadLevel=i,this.level=n.loadLevel,this.loadedmetadata=!1}t>0&&e===-1&&(this.log(`Override startPosition with lastCurrentTime @${t.toFixed(3)}`),e=t),this.state=xe.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this._forceStartLoad=!0,this.state=xe.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case xe.WAITING_LEVEL:{const{levels:t,level:n}=this,i=t?.[n],s=i?.details;if(s&&(!s.live||this.levelLastLoaded===i)){if(this.waitForCdnTuneIn(s))break;this.state=xe.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=xe.IDLE;break}break}case xe.FRAG_LOADING_WAITING_RETRY:{var e;const t=self.performance.now(),n=this.retryDate;if(!n||t>=n||(e=this.media)!=null&&e.seeking){const{levels:i,level:s}=this,a=i?.[s];this.resetStartWhenNotLoaded(a||null),this.state=xe.IDLE}}break}this.state===xe.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){super.onTickEnd(),this.checkBuffer(),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:n,media:i}=this;if(t===null||!i&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const s=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(n!=null&&n[s]))return;const a=n[s],o=this.getMainFwdBufferInfo();if(o===null)return;const l=this.getLevelDetails();if(l&&this._streamEnded(o,l)){const g={};this.altAudio&&(g.type="video"),this.hls.trigger(P.BUFFER_EOS,g),this.state=xe.ENDED;return}if(!this.buffering)return;e.loadLevel!==s&&e.manualLevel===-1&&this.log(`Adapting to level ${s} from level ${this.level}`),this.level=e.nextLoadLevel=s;const c=a.details;if(!c||this.state===xe.WAITING_LEVEL||c.live&&this.levelLastLoaded!==a){this.level=s,this.state=xe.WAITING_LEVEL;return}const u=o.len,d=this.getMaxBufferLength(a.maxBitrate);if(u>=d)return;this.backtrackFragment&&this.backtrackFragment.start>o.end&&(this.backtrackFragment=null);const h=this.backtrackFragment?this.backtrackFragment.start:o.end;let f=this.getNextFragment(h,c);if(this.couldBacktrack&&!this.fragPrevious&&f&&f.sn!=="initSegment"&&this.fragmentTracker.getState(f)!==_n.OK){var m;const y=((m=this.backtrackFragment)!=null?m:f).sn-c.startSN,b=c.fragments[y-1];b&&f.cc===b.cc&&(f=b,this.fragmentTracker.removeFragment(b))}else this.backtrackFragment&&o.len&&(this.backtrackFragment=null);if(f&&this.isLoopLoading(f,h)){if(!f.gap){const y=this.audioOnly&&!this.altAudio?jt.AUDIO:jt.VIDEO,b=(y===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;b&&this.afterBufferFlushed(b,y,nt.MAIN)}f=this.getNextFragmentLoopLoading(f,c,o,nt.MAIN,d)}f&&(f.initSegment&&!f.initSegment.data&&!this.bitrateTest&&(f=f.initSegment),this.loadFragment(f,a,h))}loadFragment(e,t,n){const i=this.fragmentTracker.getState(e);this.fragCurrent=e,i===_n.NOT_LOADED||i===_n.PARTIAL?e.sn==="initSegment"?this._loadInitSegment(e,t):this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):(this.startFragRequested=!0,super.loadFragment(e,t,n)):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,nt.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let n;const i=this.getAppendedFrag(t.currentTime);i&&i.start>1&&this.flushMainBuffer(0,i.start-1);const s=this.getLevelDetails();if(s!=null&&s.live){const o=this.getMainFwdBufferInfo();if(!o||o.len<s.targetduration*2)return}if(!t.paused&&e){const o=this.hls.nextLoadLevel,l=e[o],c=this.fragLastKbps;c&&this.fragCurrent?n=this.fragCurrent.duration*l.maxBitrate/(1e3*c)+1:n=0}else n=0;const a=this.getBufferedFrag(t.currentTime+n);if(a){const o=this.followingBufferedFrag(a);if(o){this.abortCurrentFrag();const l=o.maxStartPTS?o.maxStartPTS:o.start,c=o.duration,u=Math.max(a.end,l+Math.min(Math.max(c-this.config.maxFragLookUpTolerance,c*(this.couldBacktrack?.5:.125)),c*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(u,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case xe.KEY_LOADING:case xe.FRAG_LOADING:case xe.FRAG_LOADING_WAITING_RETRY:case xe.PARSING:case xe.PARSED:this.state=xe.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const n=t.media;this.onvplaying=this.onMediaPlaying.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),n.addEventListener("playing",this.onvplaying),n.addEventListener("seeked",this.onvseeked),this.gapController=new cit(this.config,n,this.fragmentTracker,this.hls)}onMediaDetaching(){const{media:e}=this;e&&this.onvplaying&&this.onvseeked&&(e.removeEventListener("playing",this.onvplaying),e.removeEventListener("seeked",this.onvseeked),this.onvplaying=this.onvseeked=null,this.videoBuffer=null),this.fragPlaying=null,this.gapController&&(this.gapController.destroy(),this.gapController=null),super.onMediaDetaching()}onMediaPlaying(){this.tick()}onMediaSeeked(){const e=this.media,t=e?e.currentTime:null;Ve(t)&&this.log(`Media seeked to ${t.toFixed(3)}`);const n=this.getMainFwdBufferInfo();if(n===null||n.len===0){this.warn(`Main forward buffer length on "seeked" event ${n?n.len:"empty"})`);return}this.tick()}onManifestLoading(){this.log("Trigger BUFFER_RESET"),this.hls.trigger(P.BUFFER_RESET,void 0),this.fragmentTracker.removeAllFragments(),this.couldBacktrack=!1,this.startPosition=this.lastCurrentTime=this.fragLastKbps=0,this.levels=this.fragPlaying=this.backtrackFragment=this.levelLastLoaded=null,this.altAudio=this.audioOnly=this.startFragRequested=!1}onManifestParsed(e,t){let n=!1,i=!1;t.levels.forEach(s=>{const a=s.audioCodec;a&&(n=n||a.indexOf("mp4a.40.2")!==-1,i=i||a.indexOf("mp4a.40.5")!==-1)}),this.audioCodecSwitch=n&&i&&!sit(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:n}=this;if(!n||this.state!==xe.IDLE)return;const i=n[t.level];(!i.details||i.details.live&&this.levelLastLoaded!==i||this.waitForCdnTuneIn(i.details))&&(this.state=xe.WAITING_LEVEL)}onLevelLoaded(e,t){var n;const{levels:i}=this,s=t.level,a=t.details,o=a.totalduration;if(!i){this.warn(`Levels were reset while loading level ${s}`);return}this.log(`Level ${s} loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""}, cc [${a.startCC}, ${a.endCC}] duration:${o}`);const l=i[s],c=this.fragCurrent;c&&(this.state===xe.FRAG_LOADING||this.state===xe.FRAG_LOADING_WAITING_RETRY)&&c.level!==t.level&&c.loader&&this.abortCurrentFrag();let u=0;if(a.live||(n=l.details)!=null&&n.live){var d;if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;u=this.alignPlaylists(a,l.details,(d=this.levelLastLoaded)==null?void 0:d.details)}if(l.details=a,this.levelLastLoaded=l,this.hls.trigger(P.LEVEL_UPDATED,{details:a,level:s}),this.state===xe.WAITING_LEVEL){if(this.waitForCdnTuneIn(a))return;this.state=xe.IDLE}this.startFragRequested?a.live&&this.synchronizeToLiveEdge(a):this.setStartPosition(a,u),this.tick()}_handleFragmentLoadProgress(e){var t;const{frag:n,part:i,payload:s}=e,{levels:a}=this;if(!a){this.warn(`Levels were reset while fragment load was in progress. Fragment ${n.sn} of level ${n.level} will not be buffered`);return}const o=a[n.level],l=o.details;if(!l){this.warn(`Dropping fragment ${n.sn} of level ${n.level} after level details were reset`),this.fragmentTracker.removeFragment(n);return}const c=o.videoCodec,u=l.PTSKnown||!l.live,d=(t=n.initSegment)==null?void 0:t.data,h=this._getAudioCodec(o),f=this.transmuxer=this.transmuxer||new YJ(this.hls,nt.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),m=i?i.index:-1,g=m!==-1,y=new NP(n.level,n.sn,n.stats.chunkCount,s.byteLength,m,g),b=this.initPTS[n.cc];f.push(s,d,h,c,n,i,l.totalduration,u,y,b)}onAudioTrackSwitching(e,t){const n=this.altAudio;if(!!!t.url){if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const a=this.fragCurrent;a&&(this.log("Switching to main audio track, cancel main fragment load"),a.abortRequests(),this.fragmentTracker.removeFragment(a)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();const s=this.hls;n&&(s.trigger(P.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null}),this.fragmentTracker.removeAllFragments()),s.trigger(P.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const n=t.id,i=!!this.hls.audioTracks[n].url;if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i,this.tick()}onBufferCreated(e,t){const n=t.tracks;let i,s,a=!1;for(const o in n){const l=n[o];if(l.id==="main"){if(s=o,i=l,o==="video"){const c=n[o];c&&(this.videoBuffer=c.buffer)}}else a=!0}a&&i?(this.log(`Alternate track found, use ${s}.buffered to schedule main fragment loading`),this.mediaBuffer=i.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:n,part:i}=t;if(n&&n.type!==nt.MAIN)return;if(this.fragContextChanged(n)){this.warn(`Fragment ${n.sn}${i?" p: "+i.index:""} of level ${n.level} finished buffering, but was aborted. state: ${this.state}`),this.state===xe.PARSED&&(this.state=xe.IDLE);return}const s=i?i.stats:n.stats;this.fragLastKbps=Math.round(8*s.total/(s.buffering.end-s.loading.first)),n.sn!=="initSegment"&&(this.fragPrevious=n),this.fragBufferedComplete(n,i)}onError(e,t){var n;if(t.fatal){this.state=xe.ERROR;return}switch(t.details){case ce.FRAG_GAP:case ce.FRAG_PARSING_ERROR:case ce.FRAG_DECRYPT_ERROR:case ce.FRAG_LOAD_ERROR:case ce.FRAG_LOAD_TIMEOUT:case ce.KEY_LOAD_ERROR:case ce.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(nt.MAIN,t);break;case ce.LEVEL_LOAD_ERROR:case ce.LEVEL_LOAD_TIMEOUT:case ce.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===xe.WAITING_LEVEL&&((n=t.context)==null?void 0:n.type)===Lt.LEVEL&&(this.state=xe.IDLE);break;case ce.BUFFER_APPEND_ERROR:case ce.BUFFER_FULL_ERROR:if(!t.parent||t.parent!=="main")return;if(t.details===ce.BUFFER_APPEND_ERROR){this.resetLoadingState();return}this.reduceLengthAndFlushBuffer(t)&&this.flushMainBuffer(0,Number.POSITIVE_INFINITY);break;case ce.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}checkBuffer(){const{media:e,gapController:t}=this;if(!(!e||!t||!e.readyState)){if(this.loadedmetadata||!ur.getBuffered(e).length){const n=this.state!==xe.IDLE?this.fragCurrent:null;t.poll(this.lastCurrentTime,n)}this.lastCurrentTime=e.currentTime}}onFragLoadEmergencyAborted(){this.state=xe.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==jt.AUDIO||this.audioOnly&&!this.altAudio){const n=(t===jt.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;this.afterBufferFlushed(n,t,nt.MAIN),this.tick()}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let n=this.startPosition;if(n>=0&&t<n){if(e.seeking){this.log(`could not seek to ${n}, already seeking at ${t}`);return}const i=ur.getBuffered(e),a=(i.length?i.start(0):0)-n;a>0&&(a<this.config.maxBufferHole||a<this.config.maxFragLookUpTolerance)&&(this.log(`adjusting start position by ${a} to match buffer start`),n+=a,this.startPosition=n),this.log(`seek to target start position ${n} from current time ${t}`),e.currentTime=n}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(n=>{const{hls:i}=this;if(!n||this.fragContextChanged(e))return;t.fragmentError=0,this.state=xe.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const s=e.stats;s.parsing.start=s.parsing.end=s.buffering.start=s.buffering.end=self.performance.now(),i.trigger(P.FRAG_LOADED,n),e.bitrateTest=!1})}_handleTransmuxComplete(e){var t;const n="main",{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,o=this.getCurrentContext(a);if(!o){this.resetWhenMissingContext(a);return}const{frag:l,part:c,level:u}=o,{video:d,text:h,id3:f,initSegment:m}=s,{details:g}=u,y=this.altAudio?void 0:s.audio;if(this.fragContextChanged(l)){this.fragmentTracker.removeFragment(l);return}if(this.state=xe.PARSING,m){if(m!=null&&m.tracks){const w=l.initSegment||l;this._bufferInitSegment(u,m.tracks,w,a),i.trigger(P.FRAG_PARSING_INIT_SEGMENT,{frag:w,id:n,tracks:m.tracks})}const b=m.initPTS,E=m.timescale;Ve(b)&&(this.initPTS[l.cc]={baseTime:b,timescale:E},i.trigger(P.INIT_PTS_FOUND,{frag:l,id:n,initPTS:b,timescale:E}))}if(d&&g&&l.sn!=="initSegment"){const b=g.fragments[l.sn-1-g.startSN],E=l.sn===g.startSN,w=!b||l.cc>b.cc;if(s.independent!==!1){const{startPTS:A,endPTS:S,startDTS:_,endDTS:C}=d;if(c)c.elementaryStreams[d.type]={startPTS:A,endPTS:S,startDTS:_,endDTS:C};else if(d.firstKeyFrame&&d.independent&&a.id===1&&!w&&(this.couldBacktrack=!0),d.dropped&&d.independent){const k=this.getMainFwdBufferInfo(),D=(k?k.end:this.getLoadPosition())+this.config.maxBufferHole,I=d.firstKeyFramePTS?d.firstKeyFramePTS:A;if(!E&&D<I-this.config.maxBufferHole&&!w){this.backtrack(l);return}else w&&(l.gap=!0);l.setElementaryStreamInfo(d.type,l.start,S,l.start,C,!0)}else E&&A>Q1&&(l.gap=!0);l.setElementaryStreamInfo(d.type,A,S,_,C),this.backtrackFragment&&(this.backtrackFragment=l),this.bufferFragmentData(d,l,c,a,E||w)}else if(E||w)l.gap=!0;else{this.backtrack(l);return}}if(y){const{startPTS:b,endPTS:E,startDTS:w,endDTS:A}=y;c&&(c.elementaryStreams[jt.AUDIO]={startPTS:b,endPTS:E,startDTS:w,endDTS:A}),l.setElementaryStreamInfo(jt.AUDIO,b,E,w,A),this.bufferFragmentData(y,l,c,a)}if(g&&f!=null&&(t=f.samples)!=null&&t.length){const b={id:n,frag:l,details:g,samples:f.samples};i.trigger(P.FRAG_PARSING_METADATA,b)}if(g&&h){const b={id:n,frag:l,details:g,samples:h.samples};i.trigger(P.FRAG_PARSING_USERDATA,b)}}_bufferInitSegment(e,t,n,i){if(this.state!==xe.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&delete t.audio;const{audio:s,video:a,audiovideo:o}=t;if(s){let l=e.audioCodec;const c=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){l&&(l.indexOf("mp4a.40.5")!==-1?l="mp4a.40.2":l="mp4a.40.5");const u=s.metadata;u&&"channelCount"in u&&(u.channelCount||1)!==1&&c.indexOf("firefox")===-1&&(l="mp4a.40.5")}l&&l.indexOf("mp4a.40.5")!==-1&&c.indexOf("android")!==-1&&s.container!=="audio/mpeg"&&(l="mp4a.40.2",this.log(`Android: force audio codec to ${l}`)),e.audioCodec&&e.audioCodec!==l&&this.log(`Swapping manifest audio codec "${e.audioCodec}" for "${l}"`),s.levelCodec=l,s.id="main",this.log(`Init audio buffer, container:${s.container}, codecs[selected/level/parsed]=[${l||""}/${e.audioCodec||""}/${s.codec}]`)}a&&(a.levelCodec=e.videoCodec,a.id="main",this.log(`Init video buffer, container:${a.container}, codecs[level/parsed]=[${e.videoCodec||""}/${a.codec}]`)),o&&this.log(`Init audiovideo buffer, container:${o.container}, codecs[level/parsed]=[${e.codecs}/${o.codec}]`),this.hls.trigger(P.BUFFER_CODECS,t),Object.keys(t).forEach(l=>{const u=t[l].initSegment;u!=null&&u.byteLength&&this.hls.trigger(P.BUFFER_APPENDING,{type:l,data:u,frag:n,part:null,chunkMeta:i,parent:n.type})}),this.tickImmediate()}getMainFwdBufferInfo(){return this.getFwdBufferInfo(this.mediaBuffer?this.mediaBuffer:this.media,nt.MAIN)}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=xe.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const n=e.currentTime;if(ur.isBuffered(e,n)?t=this.getAppendedFrag(n):ur.isBuffered(e,n+.1)&&(t=this.getAppendedFrag(n+.1)),t){this.backtrackFragment=null;const i=this.fragPlaying,s=t.level;(!i||t.sn!==i.sn||i.level!==s)&&(this.fragPlaying=t,this.hls.trigger(P.FRAG_CHANGED,{frag:t}),(!i||i.level!==s)&&this.hls.trigger(P.LEVEL_SWITCHED,{level:s}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){const e=this.media;return e?this.fragPlaying||this.getAppendedFrag(e.currentTime):null}get currentProgramDateTime(){const e=this.media;if(e){const t=e.currentTime,n=this.currentFrag;if(n&&Ve(t)&&Ve(n.programDateTime)){const i=n.programDateTime+(t-n.start)*1e3;return new Date(i)}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class id{static get version(){return"1.5.20"}static isMSESupported(){return mee()}static isSupported(){return iit()}static getMediaSource(){return Fd()}static get Events(){return P}static get ErrorTypes(){return at}static get ErrorDetails(){return ce}static get DefaultConfig(){return id.defaultConfig?id.defaultConfig:fee}static set DefaultConfig(e){id.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this.started=!1,this._emitter=new GP,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this.url=null,this.triggeringException=void 0,XJe(e.debug||!1,"Hls instance");const t=this.config=eit(id.DefaultConfig,e);this.userConfig=e,t.progressive&&tit(t);const{abrController:n,bufferController:i,capLevelController:s,errorController:a,fpsController:o}=t,l=new a(this),c=this.abrController=new n(this),u=this.bufferController=new i(this),d=this.capLevelController=new s(this),h=new o(this),f=new Ket(this),m=new Zet(this),g=t.contentSteeringController,y=g?new g(this):null,b=this.levelController=new rit(this,y),E=new Ctt(this),w=new nit(this.config),A=this.streamController=new dit(this,E,w);d.setStreamController(A),h.setStreamController(A);const S=[f,b,A];y&&S.splice(1,0,y),this.networkControllers=S;const _=[c,u,d,h,m,E];this.audioTrackController=this.createController(t.audioTrackController,S);const C=t.audioStreamController;C&&S.push(new C(this,E,w)),this.subtitleTrackController=this.createController(t.subtitleTrackController,S);const k=t.subtitleStreamController;k&&S.push(new k(this,E,w)),this.createController(t.timelineController,_),w.emeController=this.emeController=this.createController(t.emeController,_),this.cmcdController=this.createController(t.cmcdController,_),this.latencyController=this.createController(Jet,_),this.coreComponents=_,S.push(l);const D=l.onErrorOut;typeof D=="function"&&this.on(P.ERROR,D,l)}createController(e,t){if(e){const n=new e(this);return t&&t.push(n),n}return null}on(e,t,n=this){this._emitter.on(e,t,n)}once(e,t,n=this){this._emitter.once(e,t,n)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,n=this,i){this._emitter.off(e,t,n,i)}listeners(e){return this._emitter.listeners(e)}emit(e,t,n){return this._emitter.emit(e,t,n)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(n){if(re.error("An internal error happened while handling event "+e+'. Error message: "'+n.message+'". Here is a stacktrace:',n),!this.triggeringException){this.triggeringException=!0;const i=e===P.ERROR;this.trigger(P.ERROR,{type:at.OTHER_ERROR,details:ce.INTERNAL_EXCEPTION,fatal:i,event:e,error:n}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){re.log("destroy"),this.trigger(P.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this.url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){re.log("attachMedia"),this._media=e,this.trigger(P.MEDIA_ATTACHING,{media:e})}detachMedia(){re.log("detachMedia"),this.trigger(P.MEDIA_DETACHING,void 0),this._media=null}loadSource(e){this.stopLoad();const t=this.media,n=this.url,i=this.url=$P.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,re.log(`loadSource:${i}`),t&&n&&(n!==i||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(P.MANIFEST_LOADING,{url:e})}startLoad(e=-1){re.log(`startLoad(${e})`),this.started=!0,this.resumeBuffering();for(let t=0;t<this.networkControllers.length&&(this.networkControllers[t].startLoad(e),!(!this.started||!this.networkControllers));t++);}stopLoad(){re.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}resumeBuffering(){re.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()})}pauseBuffering(){re.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()})}swapAudioCodec(){re.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){re.log("recoverMediaError");const e=this._media;this.detachMedia(),e&&this.attachMedia(e)}removeLevel(e){this.levelController.removeLevel(e)}get levels(){const e=this.levelController.levels;return e||[]}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){re.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){re.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){re.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){re.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){re.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(re.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){ett(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const n=e.length;for(let i=0;i<n;i++)if(e[i].maxBitrate>=t)return i;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:n}=this;let i;if(t===-1&&e!=null&&e.length?i=e.length-1:i=t,n)for(let s=i;s--;){const a=e[s].attrs["HDCP-LEVEL"];if(a&&a<=n)return s}return i}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}setAudioOption(e){var t;return(t=this.audioTrackController)==null?void 0:t.setAudioOption(e)}setSubtitleOption(e){var t;return(t=this.subtitleTrackController)==null||t.setSubtitleOption(e),null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}}id.defaultConfig=void 0;var Ar=id,cr={VIDEO:"video",THUMBNAIL:"thumbnail",STORYBOARD:"storyboard",DRM:"drm"},Qe={NOT_AN_ERROR:0,NETWORK_OFFLINE:2000002,NETWORK_UNKNOWN_ERROR:2e6,NETWORK_NO_STATUS:2000001,NETWORK_INVALID_URL:24e5,NETWORK_NOT_FOUND:2404e3,NETWORK_NOT_READY:2412e3,NETWORK_GENERIC_SERVER_FAIL:25e5,NETWORK_TOKEN_MISSING:2403201,NETWORK_TOKEN_MALFORMED:2412202,NETWORK_TOKEN_EXPIRED:2403210,NETWORK_TOKEN_AUD_MISSING:2403221,NETWORK_TOKEN_AUD_MISMATCH:2403222,NETWORK_TOKEN_SUB_MISMATCH:2403232,ENCRYPTED_ERROR:5e6,ENCRYPTED_UNSUPPORTED_KEY_SYSTEM:5000001,ENCRYPTED_GENERATE_REQUEST_FAILED:5000002,ENCRYPTED_UPDATE_LICENSE_FAILED:5000003,ENCRYPTED_UPDATE_SERVER_CERT_FAILED:5000004,ENCRYPTED_CDM_ERROR:5000005,ENCRYPTED_OUTPUT_RESTRICTED:5000006,ENCRYPTED_MISSING_TOKEN:5000002},ES=r=>r===cr.VIDEO?"playback":r,Kl=class sg extends Error{constructor(e,t=sg.MEDIA_ERR_CUSTOM,n,i){var s;super(e),this.name="MediaError",this.code=t,this.context=i,this.fatal=n??(t>=sg.MEDIA_ERR_NETWORK&&t<=sg.MEDIA_ERR_ENCRYPTED),this.message||(this.message=(s=sg.defaultMessages[this.code])!=null?s:"")}};Kl.MEDIA_ERR_ABORTED=1,Kl.MEDIA_ERR_NETWORK=2,Kl.MEDIA_ERR_DECODE=3,Kl.MEDIA_ERR_SRC_NOT_SUPPORTED=4,Kl.MEDIA_ERR_ENCRYPTED=5,Kl.MEDIA_ERR_CUSTOM=100,Kl.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail.",3:"A media error caused playback to be aborted. The media could be corrupt or your browser does not support this format.",4:"An unsupported error occurred. The server or network failed, or your browser does not support this format.",5:"The media is encrypted and there are no keys to decrypt it."};var Fe=Kl,hit=r=>r==null,YP=(r,e)=>hit(e)?!1:r in e,K$={ANY:"any",MUTED:"muted"},zt={ON_DEMAND:"on-demand",LIVE:"live",UNKNOWN:"unknown"},ro={MSE:"mse",NATIVE:"native"},X1={HEADER:"header",QUERY:"query",NONE:"none"},Cw=Object.values(X1),Gc={M3U8:"application/vnd.apple.mpegurl",MP4:"video/mp4"},fU={HLS:Gc.M3U8};[...Object.values(Gc)];var fit="en",z$={code:fit},jr=(r,e,t,n,i=r)=>{i.addEventListener(e,t,n),r.addEventListener("teardown",()=>{i.removeEventListener(e,t)},{once:!0})};function pit(r,e,t){e&&t>e&&(t=e);for(let n=0;n<r.length;n++)if(r.start(n)<=t&&r.end(n)>=t)return!0;return!1}var QP=r=>{let e=r.indexOf("?");if(e<0)return[r];let t=r.slice(0,e),n=r.slice(e);return[t,n]},xS=r=>{let e=r.type;if(e){let n=e.toUpperCase();return YP(n,fU)?fU[n]:e}let{src:t}=r;return t?mit(t):""},gee=r=>r==="VOD"?zt.ON_DEMAND:zt.LIVE,vee=r=>r==="EVENT"?Number.POSITIVE_INFINITY:r==="VOD"?Number.NaN:0,mit=r=>{let e="";try{e=new URL(r).pathname}catch{console.error("invalid url")}let t=e.lastIndexOf(".");if(t<0)return"";let n=e.slice(t+1).toUpperCase();return YP(n,Gc)?Gc[n]:""},Bf=r=>{let e=(r??"").split(".")[1];if(e)try{let t=e.replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(atob(t).split("").map(function(i){return"%"+("00"+i.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(n)}catch{return}},git=({exp:r},e=Date.now())=>!r||r*1e3<e,vit=({sub:r},e)=>r!==e,yit=({aud:r},e)=>!r,bit=({aud:r},e)=>r!==e,yee="en";function ze(r,e=!0){var t,n;let i=e&&(n=(t=z$)==null?void 0:t[r])!=null?n:r,s=e?z$.code:yee;return new Eit(i,s)}var Eit=class{constructor(e,t=(n=>(n=z$)!=null?n:yee)()){this.message=e,this.locale=t}format(e){return this.message.replace(/\{(\w+)\}/g,(t,n)=>{var i;return(i=e[n])!=null?i:""})}toString(){return this.message}},xit=Object.values(K$),pU=r=>typeof r=="boolean"||typeof r=="string"&&xit.includes(r),wit=(r,e,t)=>{let{autoplay:n}=r,i=!1,s=!1,a=pU(n)?n:!!n,o=()=>{i||jr(e,"playing",()=>{i=!0},{once:!0})};if(o(),jr(e,"loadstart",()=>{i=!1,o(),CR(e,a)},{once:!0}),jr(e,"loadstart",()=>{t||(r.streamType&&r.streamType!==zt.UNKNOWN?s=r.streamType===zt.LIVE:s=!Number.isFinite(e.duration)),CR(e,a)},{once:!0}),t&&t.once(Ar.Events.LEVEL_LOADED,(l,c)=>{var u;r.streamType&&r.streamType!==zt.UNKNOWN?s=r.streamType===zt.LIVE:s=(u=c.details.live)!=null?u:!1}),!a){let l=()=>{!s||Number.isFinite(r.startTime)||(t!=null&&t.liveSyncPosition?e.currentTime=t.liveSyncPosition:Number.isFinite(e.seekable.end(0))&&(e.currentTime=e.seekable.end(0)))};t&&jr(e,"play",()=>{e.preload==="metadata"?t.once(Ar.Events.LEVEL_UPDATED,l):l()},{once:!0})}return l=>{i||(a=pU(l)?l:!!l,CR(e,a))}},CR=(r,e)=>{if(!e)return;let t=r.muted,n=()=>r.muted=t;switch(e){case K$.ANY:r.play().catch(()=>{r.muted=!0,r.play().catch(n)});break;case K$.MUTED:r.muted=!0,r.play().catch(n);break;default:r.play().catch(()=>{});break}},Tit=({preload:r,src:e},t,n)=>{let i=d=>{d!=null&&["","none","metadata","auto"].includes(d)?t.setAttribute("preload",d):t.removeAttribute("preload")};if(!n)return i(r),i;let s=!1,a=!1,o=n.config.maxBufferLength,l=n.config.maxBufferSize,c=d=>{i(d);let h=d??t.preload;a||h==="none"||(h==="metadata"?(n.config.maxBufferLength=1,n.config.maxBufferSize=1):(n.config.maxBufferLength=o,n.config.maxBufferSize=l),u())},u=()=>{!s&&e&&(s=!0,n.loadSource(e))};return jr(t,"play",()=>{a=!0,n.config.maxBufferLength=o,n.config.maxBufferSize=l,u()},{once:!0}),c(r),c};function Sit(r,e){var t;if(!("videoTracks"in r))return;let n=new WeakMap;e.on(Ar.Events.MANIFEST_PARSED,function(c,u){l();let d=r.addVideoTrack("main");d.selected=!0;for(let[h,f]of u.levels.entries()){let m=d.addRendition(f.url[0],f.width,f.height,f.videoCodec,f.bitrate);n.set(f,`${h}`),m.id=`${h}`}}),e.on(Ar.Events.AUDIO_TRACKS_UPDATED,function(c,u){o();for(let d of u.audioTracks){let h=d.default?"main":"alternative",f=r.addAudioTrack(h,d.name,d.lang);f.id=`${d.id}`,d.default&&(f.enabled=!0)}}),r.audioTracks.addEventListener("change",()=>{var c;let u=+((c=[...r.audioTracks].find(h=>h.enabled))==null?void 0:c.id),d=e.audioTracks.map(h=>h.id);u!=e.audioTrack&&d.includes(u)&&(e.audioTrack=u)}),e.on(Ar.Events.LEVELS_UPDATED,function(c,u){var d;let h=r.videoTracks[(d=r.videoTracks.selectedIndex)!=null?d:0];if(!h)return;let f=u.levels.map(m=>n.get(m));for(let m of r.videoRenditions)m.id&&!f.includes(m.id)&&h.removeRendition(m)});let i=c=>{let u=c.target.selectedIndex;u!=e.nextLevel&&s(u)},s=c=>{let u=r.currentTime,d=!1,h=(f,m)=>{d||(d=!Number.isFinite(m.endOffset))};e.on(Ar.Events.BUFFER_FLUSHING,h),e.nextLevel=c,e.off(Ar.Events.BUFFER_FLUSHING,h),d||e.trigger(Ar.Events.BUFFER_FLUSHING,{startOffset:u+10,endOffset:1/0,type:"video"})};(t=r.videoRenditions)==null||t.addEventListener("change",i);let a=()=>{for(let c of r.videoTracks)r.removeVideoTrack(c)},o=()=>{for(let c of r.audioTracks)r.removeAudioTrack(c)},l=()=>{a(),o()};e.once(Ar.Events.DESTROYING,l)}var RR=r=>"time"in r?r.time:r.startTime;function Ait(r,e){e.on(Ar.Events.NON_NATIVE_TEXT_TRACKS_FOUND,(i,{tracks:s})=>{s.forEach(a=>{var o,l;let c=(o=a.subtitleTrack)!=null?o:a.closedCaptions,u=e.subtitleTracks.findIndex(({lang:h,name:f,type:m})=>h==c?.lang&&f===a.label&&m.toLowerCase()===a.kind),d=((l=a._id)!=null?l:a.default)?"default":`${a.kind}${u}`;XP(r,a.kind,a.label,c?.lang,d,a.default)})});let t=()=>{if(!e.subtitleTracks.length)return;let i=Array.from(r.textTracks).find(o=>o.id&&o.mode==="showing"&&["subtitles","captions"].includes(o.kind));if(!i)return;let s=e.subtitleTracks[e.subtitleTrack],a=s?s.default?"default":`${e.subtitleTracks[e.subtitleTrack].type.toLowerCase()}${e.subtitleTrack}`:void 0;if(e.subtitleTrack<0||i?.id!==a){let o=e.subtitleTracks.findIndex(({lang:l,name:c,type:u,default:d})=>i.id==="default"&&d||l==i.language&&c===i.label&&u.toLowerCase()===i.kind);e.subtitleTrack=o}i?.id===a&&i.cues&&Array.from(i.cues).forEach(o=>{i.addCue(o)})};r.textTracks.addEventListener("change",t),e.on(Ar.Events.CUES_PARSED,(i,{track:s,cues:a})=>{let o=r.textTracks.getTrackById(s);if(!o)return;let l=o.mode==="disabled";l&&(o.mode="hidden"),a.forEach(c=>{var u;(u=o.cues)!=null&&u.getCueById(c.id)||o.addCue(c)}),l&&(o.mode="disabled")}),e.once(Ar.Events.DESTROYING,()=>{r.textTracks.removeEventListener("change",t),r.querySelectorAll("track[data-removeondestroy]").forEach(i=>{i.remove()})});let n=()=>{Array.from(r.textTracks).forEach(i=>{var s,a;if(!["subtitles","caption"].includes(i.kind)&&(i.label==="thumbnails"||i.kind==="chapters")){if(!((s=i.cues)!=null&&s.length)){let o="track";i.kind&&(o+=`[kind="${i.kind}"]`),i.label&&(o+=`[label="${i.label}"]`);let l=r.querySelector(o),c=(a=l?.getAttribute("src"))!=null?a:"";l?.removeAttribute("src"),setTimeout(()=>{l?.setAttribute("src",c)},0)}i.mode!=="hidden"&&(i.mode="hidden")}})};e.once(Ar.Events.MANIFEST_LOADED,n),e.once(Ar.Events.MEDIA_ATTACHED,n)}function XP(r,e,t,n,i,s){let a=document.createElement("track");return a.kind=e,a.label=t,n&&(a.srclang=n),i&&(a.id=i),s&&(a.default=!0),a.track.mode=["subtitles","captions"].includes(e)?"disabled":"hidden",a.setAttribute("data-removeondestroy",""),r.append(a),a.track}function _it(r,e){let t=Array.prototype.find.call(r.querySelectorAll("track"),n=>n.track===e);t?.remove()}function Yv(r,e,t){var n;return(n=Array.from(r.querySelectorAll("track")).find(i=>i.track.label===e&&i.track.kind===t))==null?void 0:n.track}async function bee(r,e,t,n){let i=Yv(r,t,n);return i||(i=XP(r,n,t),i.mode="hidden",await new Promise(s=>setTimeout(()=>s(void 0),0))),i.mode!=="hidden"&&(i.mode="hidden"),[...e].sort((s,a)=>RR(a)-RR(s)).forEach(s=>{var a,o;let l=s.value,c=RR(s);if("endTime"in s&&s.endTime!=null)i?.addCue(new VTTCue(c,s.endTime,n==="chapters"?l:JSON.stringify(l??null)));else{let u=Array.prototype.findIndex.call(i?.cues,m=>m.startTime>=c),d=(a=i?.cues)==null?void 0:a[u],h=d?d.startTime:Number.isFinite(r.duration)?r.duration:Number.MAX_SAFE_INTEGER,f=(o=i?.cues)==null?void 0:o[u-1];f&&(f.endTime=c),i?.addCue(new VTTCue(c,h,n==="chapters"?l:JSON.stringify(l??null)))}}),r.textTracks.dispatchEvent(new Event("change",{bubbles:!0,composed:!0})),i}var ZP="cuepoints",Eee=Object.freeze({label:ZP});async function xee(r,e,t=Eee){return bee(r,e,t.label,"metadata")}var Y$=r=>({time:r.startTime,value:JSON.parse(r.text)});function Cit(r,e={label:ZP}){let t=Yv(r,e.label,"metadata");return t!=null&&t.cues?Array.from(t.cues,n=>Y$(n)):[]}function wee(r,e={label:ZP}){var t,n;let i=Yv(r,e.label,"metadata");if(!((t=i?.activeCues)!=null&&t.length))return;if(i.activeCues.length===1)return Y$(i.activeCues[0]);let{currentTime:s}=r,a=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return Y$(a||i.activeCues[0])}async function Rit(r,e=Eee){return new Promise(t=>{jr(r,"loadstart",async()=>{let n=await xee(r,[],e);jr(r,"cuechange",()=>{let i=wee(r);if(i){let s=new CustomEvent("cuepointchange",{composed:!0,bubbles:!0,detail:i});r.dispatchEvent(s)}},{},n),t(n)})})}var JP="chapters",Tee=Object.freeze({label:JP}),Q$=r=>({startTime:r.startTime,endTime:r.endTime,value:r.text});async function See(r,e,t=Tee){return bee(r,e,t.label,"chapters")}function kit(r,e={label:JP}){var t;let n=Yv(r,e.label,"chapters");return(t=n?.cues)!=null&&t.length?Array.from(n.cues,i=>Q$(i)):[]}function Aee(r,e={label:JP}){var t,n;let i=Yv(r,e.label,"chapters");if(!((t=i?.activeCues)!=null&&t.length))return;if(i.activeCues.length===1)return Q$(i.activeCues[0]);let{currentTime:s}=r,a=Array.prototype.find.call((n=i.activeCues)!=null?n:[],({startTime:o,endTime:l})=>o<=s&&l>s);return Q$(a||i.activeCues[0])}async function Iit(r,e=Tee){return new Promise(t=>{jr(r,"loadstart",async()=>{let n=await See(r,[],e);jr(r,"cuechange",()=>{let i=Aee(r);if(i){let s=new CustomEvent("chapterchange",{composed:!0,bubbles:!0,detail:i});r.dispatchEvent(s)}},{},n),t(n)})})}function $it(r,e){if(e){let t=e.playingDate;if(t!=null)return new Date(t.getTime()-r.currentTime*1e3)}return typeof r.getStartDate=="function"?r.getStartDate():new Date(NaN)}function Dit(r,e){if(e&&e.playingDate)return e.playingDate;if(typeof r.getStartDate=="function"){let t=r.getStartDate();return new Date(t.getTime()+r.currentTime*1e3)}return new Date(NaN)}var Yg={VIDEO:"v",THUMBNAIL:"t",STORYBOARD:"s",DRM:"d"},Lit=r=>{if(r===cr.VIDEO)return Yg.VIDEO;if(r===cr.DRM)return Yg.DRM},Oit=(r,e)=>{var t,n;let i=ES(r),s=`${i}Token`;return(t=e.tokens)!=null&&t[i]?(n=e.tokens)==null?void 0:n[i]:YP(s,e)?e[s]:void 0},Rw=(r,e,t,n=!1,i=!(s=>(s=globalThis.navigator)==null?void 0:s.onLine)())=>{var s,a;if(i){let y=ze("Your device appears to be offline",n),b,E=Fe.MEDIA_ERR_NETWORK,w=new Fe(y,E,!0,b);return w.errorCategory=e,w.muxCode=Qe.NETWORK_OFFLINE,w.data=r,w}let o="status"in r?r.status:r.code,l=Date.now(),c=Fe.MEDIA_ERR_NETWORK;if(o===200)return;let u=ES(e),d=Oit(e,t),h=Lit(e),[f]=QP((s=t.playbackId)!=null?s:"");if(!o||!f)return;let m=Bf(d);if(d&&!m){let y=ze("The {tokenNamePrefix}-token provided is invalid or malformed.",n).format({tokenNamePrefix:u}),b=ze("Compact JWT string: {token}",n).format({token:d}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_TOKEN_MALFORMED,E.data=r,E}if(o>=500){let y=new Fe("",c,!0);return y.errorCategory=e,y.muxCode=Qe.NETWORK_UNKNOWN_ERROR,y}if(o===403)if(m){if(git(m,l)){let y={timeStyle:"medium",dateStyle:"medium"},b=ze("The video’s secured {tokenNamePrefix}-token has expired.",n).format({tokenNamePrefix:u}),E=ze("Expired at: {expiredDate}. Current time: {currentDate}.",n).format({expiredDate:new Intl.DateTimeFormat("en",y).format((a=m.exp)!=null?a:0*1e3),currentDate:new Intl.DateTimeFormat("en",y).format(l)}),w=new Fe(b,c,!0,E);return w.errorCategory=e,w.muxCode=Qe.NETWORK_TOKEN_EXPIRED,w.data=r,w}if(vit(m,f)){let y=ze("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",n).format({tokenNamePrefix:u}),b=ze("Specified playback ID: {playbackId} and the playback ID encoded in the {tokenNamePrefix}-token: {tokenPlaybackId}",n).format({tokenNamePrefix:u,playbackId:f,tokenPlaybackId:m.sub}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_TOKEN_SUB_MISMATCH,E.data=r,E}if(yit(m)){let y=ze("The {tokenNamePrefix}-token is formatted with incorrect information.",n).format({tokenNamePrefix:u}),b=ze("The {tokenNamePrefix}-token has no aud value. aud value should be {expectedAud}.",n).format({tokenNamePrefix:u,expectedAud:h}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_TOKEN_AUD_MISSING,E.data=r,E}if(bit(m,h)){let y=ze("The {tokenNamePrefix}-token is formatted with incorrect information.",n).format({tokenNamePrefix:u}),b=ze("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.",n).format({tokenNamePrefix:u,expectedAud:h,aud:m.aud}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_TOKEN_AUD_MISMATCH,E.data=r,E}}else{let y=ze("Authorization error trying to access this {category} URL. If this is a signed URL, you might need to provide a {tokenNamePrefix}-token.",n).format({tokenNamePrefix:u,category:e}),b=ze("Specified playback ID: {playbackId}",n).format({playbackId:f}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_TOKEN_MISSING,E.data=r,E}if(o===412){let y=ze("This playback-id may belong to a live stream that is not currently active or an asset that is not ready.",n),b=ze("Specified playback ID: {playbackId}",n).format({playbackId:f}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_NOT_READY,E.data=r,E}if(o===404){let y=ze("This URL or playback-id does not exist. You may have used an Asset ID or an ID from a different resource.",n),b=ze("Specified playback ID: {playbackId}",n).format({playbackId:f}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_NOT_FOUND,E.data=r,E}if(o===400){let y=ze("The URL or playback-id was invalid. You may have used an invalid value as a playback-id."),b=ze("Specified playback ID: {playbackId}",n).format({playbackId:f}),E=new Fe(y,c,!0,b);return E.errorCategory=e,E.muxCode=Qe.NETWORK_INVALID_URL,E.data=r,E}let g=new Fe("",c,!0);return g.errorCategory=e,g.muxCode=Qe.NETWORK_UNKNOWN_ERROR,g.data=r,g},Z1={FAIRPLAY:"fairplay",PLAYREADY:"playready",WIDEVINE:"widevine"},Pit=r=>{if(r.includes("fps"))return Z1.FAIRPLAY;if(r.includes("playready"))return Z1.PLAYREADY;if(r.includes("widevine"))return Z1.WIDEVINE},Mit=async r=>fetch(r).then(e=>e.status!==200?Promise.reject(e):e.text()).then(e=>{let t=e.split(`
`).find((n,i,s)=>i&&s[i-1].startsWith("#EXT-X-STREAM-INF"));return fetch(t).then(n=>n.status!==200?Promise.reject(n):n.text()).then(n=>n.split(`
`))}),Nit=r=>{var e,t,n;let i=(t=((e=r.find(l=>l.startsWith("#EXT-X-PLAYLIST-TYPE")))!=null?e:"").split(":")[1])==null?void 0:t.trim(),s=gee(i),a=vee(i),o;if(s===zt.LIVE){let l=r.find(c=>c.startsWith("#EXT-X-PART-INF"));if(l)o=+l.split(":")[1].split("=")[1]*2;else{let c=r.find(d=>d.startsWith("#EXT-X-TARGETDURATION")),u=(n=c?.split(":"))==null?void 0:n[1];o=+(u??6)*3}}return{streamType:s,targetLiveWindow:a,liveEdgeStartOffset:o}},Fit=async(r,e)=>{if(e===Gc.MP4)return{streamType:zt.ON_DEMAND,targetLiveWindow:Number.NaN,liveEdgeStartOffset:void 0};if(e===Gc.M3U8){let t=await Mit(r);return Nit(t)}return console.error(`Media type ${e} is an unrecognized or unsupported type for src ${r}.`),{streamType:void 0,targetLiveWindow:void 0,liveEdgeStartOffset:void 0}},Bit=async(r,e,t=xS({src:r}))=>{var n,i,s;let{streamType:a,targetLiveWindow:o,liveEdgeStartOffset:l}=await Fit(r,t);((n=jn.get(e))!=null?n:{}).liveEdgeStartOffset=l,((i=jn.get(e))!=null?i:{}).targetLiveWindow=o,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((s=jn.get(e))!=null?s:{}).streamType=a,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},Uit=r=>{var e;let t=r.type,n=gee(t),i=vee(t),s,a=!!((e=r.partList)!=null&&e.length);return n===zt.LIVE&&(s=a?r.partTarget*2:r.targetduration*3),{streamType:n,targetLiveWindow:i,liveEdgeStartOffset:s,lowLatency:a}},Wit=(r,e,t)=>{var n,i,s,a,o,l,c,u;let{streamType:d,targetLiveWindow:h,liveEdgeStartOffset:f,lowLatency:m}=Uit(r);if(d===zt.LIVE){m?(t.config.backBufferLength=(n=t.userConfig.backBufferLength)!=null?n:4,t.config.maxFragLookUpTolerance=(i=t.userConfig.maxFragLookUpTolerance)!=null?i:.001,t.config.abrBandWidthUpFactor=(s=t.userConfig.abrBandWidthUpFactor)!=null?s:t.config.abrBandWidthFactor):t.config.backBufferLength=(a=t.userConfig.backBufferLength)!=null?a:8;let g=Object.freeze({get length(){return e.seekable.length},start(y){return e.seekable.start(y)},end(y){var b;return y>this.length||y<0||Number.isFinite(e.duration)?e.seekable.end(y):(b=t.liveSyncPosition)!=null?b:e.seekable.end(y)}});((o=jn.get(e))!=null?o:{}).seekable=g}((l=jn.get(e))!=null?l:{}).liveEdgeStartOffset=f,((c=jn.get(e))!=null?c:{}).targetLiveWindow=h,e.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0})),((u=jn.get(e))!=null?u:{}).streamType=d,e.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}))},mU,gU,Hit=(gU=(mU=globalThis?.navigator)==null?void 0:mU.userAgent)!=null?gU:"",vU,yU,bU,Vit=(bU=(yU=(vU=globalThis?.navigator)==null?void 0:vU.userAgentData)==null?void 0:yU.platform)!=null?bU:"",Git=Hit.toLowerCase().includes("android")||["x11","android"].some(r=>Vit.toLowerCase().includes(r)),jn=new WeakMap,Ic="mux.com",EU,xU,_ee=(xU=(EU=Ar).isSupported)==null?void 0:xU.call(EU),qit=Git,jit=()=>IP.utils.now(),Kit=IP.utils.generateUUID,X$=({playbackId:r,customDomain:e=Ic,maxResolution:t,minResolution:n,renditionOrder:i,programStartTime:s,programEndTime:a,assetStartTime:o,assetEndTime:l,playbackToken:c,tokens:{playback:u=c}={},extraSourceParams:d={}}={})=>{if(!r)return;let[h,f=""]=QP(r),m=new URL(`https://stream.${e}/${h}.m3u8${f}`);return u||m.searchParams.has("token")?(m.searchParams.forEach((g,y)=>{y!="token"&&m.searchParams.delete(y)}),u&&m.searchParams.set("token",u)):(t&&m.searchParams.set("max_resolution",t),n&&(m.searchParams.set("min_resolution",n),t&&+t.slice(0,-1)<+n.slice(0,-1)&&console.error("minResolution must be <= maxResolution","minResolution",n,"maxResolution",t)),i&&m.searchParams.set("rendition_order",i),s&&m.searchParams.set("program_start_time",`${s}`),a&&m.searchParams.set("program_end_time",`${a}`),o&&m.searchParams.set("asset_start_time",`${o}`),l&&m.searchParams.set("asset_end_time",`${l}`),Object.entries(d).forEach(([g,y])=>{y!=null&&m.searchParams.set(g,y)})),m.toString()},wS=r=>{if(!r)return;let[e]=r.split("?");return e||void 0},Cee=r=>{if(!r||!r.startsWith("https://stream."))return;let[e]=new URL(r).pathname.slice(1).split(".m3u8");return e||void 0},zit=r=>{var e,t,n;return(e=r?.metadata)!=null&&e.video_id?r.metadata.video_id:Pee(r)&&(n=(t=wS(r.playbackId))!=null?t:Cee(r.src))!=null?n:r.src},Ree=r=>{var e;return(e=jn.get(r))==null?void 0:e.error},Z$=r=>{var e,t;return(t=(e=jn.get(r))==null?void 0:e.streamType)!=null?t:zt.UNKNOWN},Yit=r=>{var e,t;return(t=(e=jn.get(r))==null?void 0:e.targetLiveWindow)!=null?t:Number.NaN},eM=r=>{var e,t;return(t=(e=jn.get(r))==null?void 0:e.seekable)!=null?t:r.seekable},Qit=r=>{var e;let t=(e=jn.get(r))==null?void 0:e.liveEdgeStartOffset;if(typeof t!="number")return Number.NaN;let n=eM(r);return n.length?n.end(n.length-1)-t:Number.NaN},tM=.034,Xit=(r,e,t=tM)=>Math.abs(r-e)<=t,kee=(r,e,t=tM)=>r>e||Xit(r,e,t),Zit=(r,e=tM)=>r.paused&&kee(r.currentTime,r.duration,e),Iee=(r,e)=>{var t,n,i;if(!e||!r.buffered.length)return;if(r.readyState>2)return!1;let s=e.currentLevel>=0?(n=(t=e.levels)==null?void 0:t[e.currentLevel])==null?void 0:n.details:(i=e.levels.find(d=>!!d.details))==null?void 0:i.details;if(!s||s.live)return;let{fragments:a}=s;if(!(a!=null&&a.length))return;if(r.currentTime<r.duration-(s.targetduration+.5))return!1;let o=a[a.length-1];if(r.currentTime<=o.start)return!1;let l=o.start+o.duration/2,c=r.buffered.start(r.buffered.length-1),u=r.buffered.end(r.buffered.length-1);return l>c&&l<u},$ee=(r,e)=>r.ended||r.loop?r.ended:e&&Iee(r,e)?!0:Zit(r),Jit=(r,e,t)=>{Dee(e,t);let{metadata:n={}}=r,{view_session_id:i=Kit()}=n,s=zit(r);n.view_session_id=i,n.video_id=s,r.metadata=n;let a=u=>{var d;(d=e.mux)==null||d.emit("hb",{view_drm_type:u})};r.drmTypeCb=a,jn.set(e,{});let o=est(r,e),l=Tit(r,e,o);ast(r,e,o),ost(r,e,o),Rit(e),Iit(e);let c=wit(r,e,o);return{engine:o,setAutoplay:c,setPreload:l}},Dee=(r,e)=>{let t=e?.engine;t&&(t.detachMedia(),t.destroy()),r!=null&&r.mux&&!r.mux.deleted&&(r.mux.destroy(),delete r.mux),r&&(r.removeAttribute("src"),r.load(),r.removeEventListener("error",Nee),r.removeEventListener("error",J$),r.removeEventListener("durationchange",Mee),jn.delete(r),r.dispatchEvent(new Event("teardown")))};function Lee(r,e){var t;let n=xS(r);if(n!==Gc.M3U8)return!0;let i=!n||((t=e.canPlayType(n))!=null?t:!0),{preferPlayback:s}=r,a=s===ro.MSE,o=s===ro.NATIVE;return i&&(o||!(_ee&&(a||qit)))}var est=(r,e)=>{let{debug:t,streamType:n,startTime:i=-1,metadata:s,preferCmcd:a,_hlsConfig:o={}}=r,l=xS(r)===Gc.M3U8,c=Lee(r,e);if(l&&!c&&_ee){let u={backBufferLength:30,renderTextTracksNatively:!1,liveDurationInfinity:!0,capLevelToPlayerSize:!0,capLevelOnFPSDrop:!0},d=tst(n),h=rst(r),f=a!==X1.NONE?{useHeaders:a===X1.HEADER,sessionId:s?.view_session_id,contentId:s?.video_id}:void 0;return new Ar({debug:t,startPosition:i,cmcd:f,xhrSetup:(m,g)=>{var y,b;if(a&&a!==X1.QUERY)return;let E=new URL(g);if(!E.searchParams.has("CMCD"))return;let w=((b=(y=E.searchParams.get("CMCD"))==null?void 0:y.split(","))!=null?b:[]).filter(A=>A.startsWith("sid")||A.startsWith("cid")).join(",");E.searchParams.set("CMCD",w),m.open("GET",E)},...u,...d,...h,...o})}},tst=r=>r===zt.LIVE?{backBufferLength:8}:{},rst=r=>{let{tokens:{drm:e}={},playbackId:t,drmTypeCb:n}=r,i=wS(t);return!e||!i?{}:{emeEnabled:!0,drmSystems:{"com.apple.fps":{licenseUrl:J1(r,"fairplay"),serverCertificateUrl:Oee(r,"fairplay")},"com.widevine.alpha":{licenseUrl:J1(r,"widevine")},"com.microsoft.playready":{licenseUrl:J1(r,"playready")}},requestMediaKeySystemAccessFunc:(s,a)=>(s==="com.widevine.alpha"&&(a=[...a.map(o=>{var l;let c=(l=o.videoCapabilities)==null?void 0:l.map(u=>({...u,robustness:"HW_SECURE_ALL"}));return{...o,videoCapabilities:c}}),...a]),navigator.requestMediaKeySystemAccess(s,a).then(o=>{let l=Pit(s);return n?.(l),o}))}},nst=async r=>{let e=await fetch(r);return e.status!==200?Promise.reject(e):await e.arrayBuffer()},ist=async(r,e)=>{let t=await fetch(e,{method:"POST",headers:{"Content-type":"application/octet-stream"},body:r});if(t.status!==200)return Promise.reject(t);let n=await t.arrayBuffer();return new Uint8Array(n)},sst=(r,e)=>{jr(e,"encrypted",async t=>{try{let n=t.initDataType;if(n!=="skd"){console.error(`Received unexpected initialization data type "${n}"`);return}if(!e.mediaKeys){let l=await navigator.requestMediaKeySystemAccess("com.apple.fps",[{initDataTypes:[n],videoCapabilities:[{contentType:"application/vnd.apple.mpegurl",robustness:""}],distinctiveIdentifier:"not-allowed",persistentState:"not-allowed",sessionTypes:["temporary"]}]).then(u=>{var d;return(d=r.drmTypeCb)==null||d.call(r,Z1.FAIRPLAY),u}).catch(()=>{let u=ze("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser."),d=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,!0);d.errorCategory=cr.DRM,d.muxCode=Qe.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM,e.dispatchEvent(new CustomEvent("error",{detail:d}))});if(!l)return;let c=await l.createMediaKeys();try{let u=await nst(Oee(r,"fairplay")).catch(d=>{if(d instanceof Response){let h=Rw(d,cr.DRM,r);return console.error("mediaError",h?.message,h?.context),h?Promise.reject(h):Promise.reject(new Error("Unexpected error in app cert request"))}return Promise.reject(d)});await c.setServerCertificate(u).catch(()=>{let d=ze("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate."),h=new Fe(d,Fe.MEDIA_ERR_ENCRYPTED,!0);return h.errorCategory=cr.DRM,h.muxCode=Qe.ENCRYPTED_UPDATE_SERVER_CERT_FAILED,Promise.reject(h)})}catch(u){e.dispatchEvent(new CustomEvent("error",{detail:u}));return}await e.setMediaKeys(c)}let i=t.initData;if(i==null){console.error(`Could not start encrypted playback due to missing initData in ${t.type} event`);return}let s=e.mediaKeys.createSession();s.addEventListener("keystatuseschange",()=>{s.keyStatuses.forEach(l=>{let c;if(l==="internal-error"){let u=ze("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");c=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,!0),c.errorCategory=cr.DRM,c.muxCode=Qe.ENCRYPTED_CDM_ERROR}else if(l==="output-restricted"||l==="output-downscaled"){let u=ze("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");c=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,!1),c.errorCategory=cr.DRM,c.muxCode=Qe.ENCRYPTED_OUTPUT_RESTRICTED}c&&e.dispatchEvent(new CustomEvent("error",{detail:c}))})});let a=await Promise.all([s.generateRequest(n,i).catch(()=>{let l=ze("Failed to generate a DRM license request. This may be an issue with the player or your protected content."),c=new Fe(l,Fe.MEDIA_ERR_ENCRYPTED,!0);c.errorCategory=cr.DRM,c.muxCode=Qe.ENCRYPTED_GENERATE_REQUEST_FAILED,e.dispatchEvent(new CustomEvent("error",{detail:c}))}),new Promise(l=>{s.addEventListener("message",c=>{l(c.message)},{once:!0})})]).then(([,l])=>l);s.generateRequest(n,i);let o=await ist(a,J1(r,"fairplay")).catch(l=>{if(l instanceof Response){let c=Rw(l,cr.DRM,r);return console.error("mediaError",c?.message,c?.context),c?Promise.reject(c):Promise.reject(new Error("Unexpected error in license key request"))}return Promise.reject(l)});await s.update(o).catch(()=>{let l=ze("Failed to update DRM license. This may be an issue with the player or your protected content."),c=new Fe(l,Fe.MEDIA_ERR_ENCRYPTED,!0);return c.errorCategory=cr.DRM,c.muxCode=Qe.ENCRYPTED_UPDATE_LICENSE_FAILED,Promise.reject(c)})}catch(n){e.dispatchEvent(new CustomEvent("error",{detail:n}));return}})},J1=({playbackId:r,tokens:{drm:e}={},customDomain:t=Ic},n)=>{let i=wS(r);return`https://license.${t.toLocaleLowerCase().endsWith(Ic)?t:Ic}/license/${n}/${i}?token=${e}`},Oee=({playbackId:r,tokens:{drm:e}={},customDomain:t=Ic},n)=>{let i=wS(r);return`https://license.${t.toLocaleLowerCase().endsWith(Ic)?t:Ic}/appcert/${n}/${i}?token=${e}`},Pee=({playbackId:r,src:e,customDomain:t})=>{if(r)return!0;if(typeof e!="string")return!1;let n=window?.location.href,i=new URL(e,n).hostname.toLocaleLowerCase();return i.includes(Ic)||!!t&&i.includes(t.toLocaleLowerCase())},ast=(r,e,t)=>{var n;let{envKey:i,disableTracking:s}=r,a=Pee(r);if(!s&&(i||a)){let{playerInitTime:o,playerSoftwareName:l,playerSoftwareVersion:c,beaconCollectionDomain:u,debug:d,disableCookies:h}=r,f={...r.metadata,video_title:((n=r?.metadata)==null?void 0:n.video_title)||void 0},m=g=>typeof g.player_error_code=="string"?!1:typeof r.errorTranslator=="function"?r.errorTranslator(g):g;IP.monitor(e,{debug:d,beaconCollectionDomain:u,hlsjs:t,Hls:t?Ar:void 0,automaticErrorTracking:!1,errorTranslator:m,disableCookies:h,data:{...i?{env_key:i}:{},player_software_name:l,player_software:l,player_software_version:c,player_init_time:o,...f}})}},ost=(r,e,t)=>{var n,i;let s=Lee(r,e),{src:a}=r,o=()=>{e.ended||!$ee(e,t)||(Iee(e,t)?e.currentTime=e.buffered.end(e.buffered.length-1):e.dispatchEvent(new Event("ended")))},l,c,u=()=>{let d=eM(e),h,f;d.length>0&&(h=d.start(0),f=d.end(0)),(c!==f||l!==h)&&e.dispatchEvent(new CustomEvent("seekablechange",{composed:!0})),l=h,c=f};if(jr(e,"durationchange",u),e&&s){let d=xS(r);if(typeof a=="string"){let h=()=>{if(Z$(e)!==zt.LIVE||Number.isFinite(e.duration))return;let m=setInterval(u,1e3);e.addEventListener("teardown",()=>{clearInterval(m)},{once:!0}),jr(e,"durationchange",()=>{Number.isFinite(e.duration)&&clearInterval(m)})},f=async()=>Bit(a,e,d).then(h).catch(m=>{if(m instanceof Response){let g=Rw(m,cr.VIDEO,r);if(g){e.dispatchEvent(new CustomEvent("error",{detail:g}));return}}});if(e.preload==="none"){let m=()=>{f(),e.removeEventListener("loadedmetadata",g)},g=()=>{f(),e.removeEventListener("play",m)};jr(e,"play",m,{once:!0}),jr(e,"loadedmetadata",g,{once:!0})}else f();(n=r.tokens)!=null&&n.drm?sst(r,e):jr(e,"encrypted",()=>{let m=ze("Attempting to play DRM-protected content without providing a DRM token."),g=new Fe(m,Fe.MEDIA_ERR_ENCRYPTED,!0);g.errorCategory=cr.DRM,g.muxCode=Qe.ENCRYPTED_MISSING_TOKEN,e.dispatchEvent(new CustomEvent("error",{detail:g}))},{once:!0}),e.setAttribute("src",a),r.startTime&&(((i=jn.get(e))!=null?i:{}).startTime=r.startTime,e.addEventListener("durationchange",Mee,{once:!0}))}else e.removeAttribute("src");e.addEventListener("error",Nee),e.addEventListener("error",J$),e.addEventListener("emptied",()=>{e.querySelectorAll("track[data-removeondestroy]").forEach(h=>{h.remove()})},{once:!0}),jr(e,"pause",o),jr(e,"seeked",o),jr(e,"play",()=>{e.ended||kee(e.currentTime,e.duration)&&(e.currentTime=e.seekable.length?e.seekable.start(0):0)})}else t&&a?(t.once(Ar.Events.LEVEL_LOADED,(d,h)=>{Wit(h.details,e,t),u(),Z$(e)===zt.LIVE&&!Number.isFinite(e.duration)&&(t.on(Ar.Events.LEVEL_UPDATED,u),jr(e,"durationchange",()=>{Number.isFinite(e.duration)&&t.off(Ar.Events.LEVELS_UPDATED,u)}))}),t.on(Ar.Events.ERROR,(d,h)=>{e.dispatchEvent(new CustomEvent("error",{detail:lst(h,r)}))}),e.addEventListener("error",J$),jr(e,"waiting",o),Sit(r,t),Ait(e,t),t.attachMedia(e)):console.error("It looks like the video you're trying to play will not work on this system! If possible, try upgrading to the newest versions of your browser or software.")};function Mee(r){var e;let t=r.target,n=(e=jn.get(t))==null?void 0:e.startTime;if(n&&pit(t.seekable,t.duration,n)){let i=t.preload==="auto";i&&(t.preload="none"),t.currentTime=n,i&&(t.preload="auto")}}async function Nee(r){if(!r.isTrusted)return;r.stopImmediatePropagation();let e=r.target;if(!(e!=null&&e.error))return;let{message:t,code:n}=e.error,i=new Fe(t,n);if(e.src&&n===Fe.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.readyState===HTMLMediaElement.HAVE_NOTHING){setTimeout(()=>{var s;let a=(s=Ree(e))!=null?s:e.error;a?.code===Fe.MEDIA_ERR_SRC_NOT_SUPPORTED&&e.dispatchEvent(new CustomEvent("error",{detail:i}))},500);return}if(e.src&&(n!==Fe.MEDIA_ERR_DECODE||n!==void 0))try{let{status:s}=await fetch(e.src);i.data={response:{code:s}}}catch{}e.dispatchEvent(new CustomEvent("error",{detail:i}))}function J$(r){var e,t;if(!(r instanceof CustomEvent)||!(r.detail instanceof Fe))return;let n=r.target,i=r.detail;!i||!i.fatal||(((e=jn.get(n))!=null?e:{}).error=i,(t=n.mux)==null||t.emit("error",{player_error_code:i.code,player_error_message:i.message,player_error_context:i.context}))}var lst=(r,e)=>{var t,n,i;console.error("getErrorFromHlsErrorData()",r);let s={[Ar.ErrorTypes.NETWORK_ERROR]:Fe.MEDIA_ERR_NETWORK,[Ar.ErrorTypes.MEDIA_ERROR]:Fe.MEDIA_ERR_DECODE,[Ar.ErrorTypes.KEY_SYSTEM_ERROR]:Fe.MEDIA_ERR_ENCRYPTED},a=u=>[ce.KEY_SYSTEM_LICENSE_REQUEST_FAILED,ce.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED].includes(u.details)?Fe.MEDIA_ERR_NETWORK:s[u.type],o=u=>{if(u.type===at.KEY_SYSTEM_ERROR)return cr.DRM;if(u.type===at.NETWORK_ERROR)return cr.VIDEO},l,c=a(r);if(c===Fe.MEDIA_ERR_NETWORK&&r.response){let u=(t=o(r))!=null?t:cr.VIDEO;l=(n=Rw(r.response,u,e))!=null?n:new Fe("",c)}else if(c===Fe.MEDIA_ERR_ENCRYPTED)if(r.details===ce.KEY_SYSTEM_NO_CONFIGURED_LICENSE){let u=ze("Attempting to play DRM-protected content without providing a DRM token.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_MISSING_TOKEN}else if(r.details===ce.KEY_SYSTEM_NO_ACCESS){let u=ze("Cannot play DRM-protected content with current security configuration on this browser. Try playing in another browser.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_UNSUPPORTED_KEY_SYSTEM}else if(r.details===ce.KEY_SYSTEM_NO_SESSION){let u=ze("Failed to generate a DRM license request. This may be an issue with the player or your protected content.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,!0),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_GENERATE_REQUEST_FAILED}else if(r.details===ce.KEY_SYSTEM_SESSION_UPDATE_FAILED){let u=ze("Failed to update DRM license. This may be an issue with the player or your protected content.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_UPDATE_LICENSE_FAILED}else if(r.details===ce.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED){let u=ze("Your server certificate failed when attempting to set it. This may be an issue with a no longer valid certificate.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_UPDATE_SERVER_CERT_FAILED}else if(r.details===ce.KEY_SYSTEM_STATUS_INTERNAL_ERROR){let u=ze("The DRM Content Decryption Module system had an internal failure. Try reloading the page, upading your browser, or playing in another browser.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_CDM_ERROR}else if(r.details===ce.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED){let u=ze("DRM playback is being attempted in an environment that is not sufficiently secure. User may see black screen.");l=new Fe(u,Fe.MEDIA_ERR_ENCRYPTED,!1),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_OUTPUT_RESTRICTED}else l=new Fe(r.error.message,Fe.MEDIA_ERR_ENCRYPTED,r.fatal),l.errorCategory=cr.DRM,l.muxCode=Qe.ENCRYPTED_ERROR;else l=new Fe("",c,r.fatal);return l.context||(l.context=`${r.url?`url: ${r.url}
`:""}${r.response&&(r.response.code||r.response.text)?`response: ${r.response.code}, ${r.response.text}
`:""}${r.reason?`failure reason: ${r.reason}
`:""}${r.level?`level: ${r.level}
`:""}${r.parent?`parent stream controller: ${r.parent}
`:""}${r.buffer?`buffer length: ${r.buffer}
`:""}${r.error?`error: ${r.error}
`:""}${r.event?`event: ${r.event}
`:""}${r.err?`error message: ${(i=r.err)==null?void 0:i.message}
`:""}`),l.data=r,l};const qe={MEDIA_PLAY_REQUEST:"mediaplayrequest",MEDIA_PAUSE_REQUEST:"mediapauserequest",MEDIA_MUTE_REQUEST:"mediamuterequest",MEDIA_UNMUTE_REQUEST:"mediaunmuterequest",MEDIA_VOLUME_REQUEST:"mediavolumerequest",MEDIA_SEEK_REQUEST:"mediaseekrequest",MEDIA_AIRPLAY_REQUEST:"mediaairplayrequest",MEDIA_ENTER_FULLSCREEN_REQUEST:"mediaenterfullscreenrequest",MEDIA_EXIT_FULLSCREEN_REQUEST:"mediaexitfullscreenrequest",MEDIA_PREVIEW_REQUEST:"mediapreviewrequest",MEDIA_ENTER_PIP_REQUEST:"mediaenterpiprequest",MEDIA_EXIT_PIP_REQUEST:"mediaexitpiprequest",MEDIA_ENTER_CAST_REQUEST:"mediaentercastrequest",MEDIA_EXIT_CAST_REQUEST:"mediaexitcastrequest",MEDIA_SHOW_TEXT_TRACKS_REQUEST:"mediashowtexttracksrequest",MEDIA_HIDE_TEXT_TRACKS_REQUEST:"mediahidetexttracksrequest",MEDIA_SHOW_SUBTITLES_REQUEST:"mediashowsubtitlesrequest",MEDIA_DISABLE_SUBTITLES_REQUEST:"mediadisablesubtitlesrequest",MEDIA_TOGGLE_SUBTITLES_REQUEST:"mediatogglesubtitlesrequest",MEDIA_PLAYBACK_RATE_REQUEST:"mediaplaybackraterequest",MEDIA_RENDITION_REQUEST:"mediarenditionrequest",MEDIA_AUDIO_TRACK_REQUEST:"mediaaudiotrackrequest",MEDIA_SEEK_TO_LIVE_REQUEST:"mediaseektoliverequest",REGISTER_MEDIA_STATE_RECEIVER:"registermediastatereceiver",UNREGISTER_MEDIA_STATE_RECEIVER:"unregistermediastatereceiver"},Yt={MEDIA_CHROME_ATTRIBUTES:"mediachromeattributes",MEDIA_CONTROLLER:"mediacontroller"},Fee={MEDIA_AIRPLAY_UNAVAILABLE:"mediaAirplayUnavailable",MEDIA_FULLSCREEN_UNAVAILABLE:"mediaFullscreenUnavailable",MEDIA_PIP_UNAVAILABLE:"mediaPipUnavailable",MEDIA_CAST_UNAVAILABLE:"mediaCastUnavailable",MEDIA_RENDITION_UNAVAILABLE:"mediaRenditionUnavailable",MEDIA_AUDIO_TRACK_UNAVAILABLE:"mediaAudioTrackUnavailable",MEDIA_WIDTH:"mediaWidth",MEDIA_HEIGHT:"mediaHeight",MEDIA_PAUSED:"mediaPaused",MEDIA_HAS_PLAYED:"mediaHasPlayed",MEDIA_ENDED:"mediaEnded",MEDIA_MUTED:"mediaMuted",MEDIA_VOLUME_LEVEL:"mediaVolumeLevel",MEDIA_VOLUME:"mediaVolume",MEDIA_VOLUME_UNAVAILABLE:"mediaVolumeUnavailable",MEDIA_IS_PIP:"mediaIsPip",MEDIA_IS_CASTING:"mediaIsCasting",MEDIA_IS_AIRPLAYING:"mediaIsAirplaying",MEDIA_SUBTITLES_LIST:"mediaSubtitlesList",MEDIA_SUBTITLES_SHOWING:"mediaSubtitlesShowing",MEDIA_IS_FULLSCREEN:"mediaIsFullscreen",MEDIA_PLAYBACK_RATE:"mediaPlaybackRate",MEDIA_CURRENT_TIME:"mediaCurrentTime",MEDIA_DURATION:"mediaDuration",MEDIA_SEEKABLE:"mediaSeekable",MEDIA_PREVIEW_TIME:"mediaPreviewTime",MEDIA_PREVIEW_IMAGE:"mediaPreviewImage",MEDIA_PREVIEW_COORDS:"mediaPreviewCoords",MEDIA_PREVIEW_CHAPTER:"mediaPreviewChapter",MEDIA_LOADING:"mediaLoading",MEDIA_BUFFERED:"mediaBuffered",MEDIA_STREAM_TYPE:"mediaStreamType",MEDIA_TARGET_LIVE_WINDOW:"mediaTargetLiveWindow",MEDIA_TIME_IS_LIVE:"mediaTimeIsLive",MEDIA_RENDITION_LIST:"mediaRenditionList",MEDIA_RENDITION_SELECTED:"mediaRenditionSelected",MEDIA_AUDIO_TRACK_LIST:"mediaAudioTrackList",MEDIA_AUDIO_TRACK_ENABLED:"mediaAudioTrackEnabled",MEDIA_CHAPTERS_CUES:"mediaChaptersCues"},Bee=Object.entries(Fee),H=Bee.reduce((r,[e,t])=>(r[e]=t.toLowerCase(),r),{}),cst={USER_INACTIVE:"userinactivechange",BREAKPOINTS_CHANGE:"breakpointchange",BREAKPOINTS_COMPUTED:"breakpointscomputed"},eh=Bee.reduce((r,[e,t])=>(r[e]=t.toLowerCase(),r),{...cst});Object.entries(eh).reduce((r,[e,t])=>{const n=H[e];return n&&(r[t]=n),r},{userinactivechange:"userinactive"});const ust=Object.entries(H).reduce((r,[e,t])=>{const n=eh[e];return n&&(r[t]=n),r},{userinactive:"userinactivechange"}),ho={SUBTITLES:"subtitles",CAPTIONS:"captions",CHAPTERS:"chapters",METADATA:"metadata"},Uf={DISABLED:"disabled",SHOWING:"showing"},wU={MOUSE:"mouse",TOUCH:"touch"},bs={UNAVAILABLE:"unavailable",UNSUPPORTED:"unsupported"},rl={LIVE:"live",ON_DEMAND:"on-demand",UNKNOWN:"unknown"},dst={FULLSCREEN:"fullscreen"},Pr={ENTER_AIRPLAY:"Start airplay",EXIT_AIRPLAY:"Stop airplay",AUDIO_TRACK_MENU:"Audio",CAPTIONS:"Captions",ENABLE_CAPTIONS:"Enable captions",DISABLE_CAPTIONS:"Disable captions",START_CAST:"Start casting",STOP_CAST:"Stop casting",ENTER_FULLSCREEN:"Enter fullscreen mode",EXIT_FULLSCREEN:"Exit fullscreen mode",MUTE:"Mute",UNMUTE:"Unmute",ENTER_PIP:"Enter picture in picture mode",EXIT_PIP:"Enter picture in picture mode",PLAY:"Play",PAUSE:"Pause",PLAYBACK_RATE:"Playback rate",RENDITIONS:"Quality",SEEK_BACKWARD:"Seek backward",SEEK_FORWARD:"Seek forward",SETTINGS:"Settings"},as={AUDIO_PLAYER:()=>"audio player",VIDEO_PLAYER:()=>"video player",VOLUME:()=>"volume",SEEK:()=>"seek",CLOSED_CAPTIONS:()=>"closed captions",PLAYBACK_RATE:({playbackRate:r=1}={})=>`current playback rate ${r}`,PLAYBACK_TIME:()=>"playback time",MEDIA_LOADING:()=>"media loading",SETTINGS:()=>"settings",AUDIO_TRACKS:()=>"audio tracks",QUALITY:()=>"quality"},ai={PLAY:()=>"play",PAUSE:()=>"pause",MUTE:()=>"mute",UNMUTE:()=>"unmute",ENTER_AIRPLAY:()=>"start airplay",EXIT_AIRPLAY:()=>"stop airplay",ENTER_CAST:()=>"start casting",EXIT_CAST:()=>"stop casting",ENTER_FULLSCREEN:()=>"enter fullscreen mode",EXIT_FULLSCREEN:()=>"exit fullscreen mode",ENTER_PIP:()=>"enter picture in picture mode",EXIT_PIP:()=>"exit picture in picture mode",SEEK_FORWARD_N_SECS:({seekOffset:r=30}={})=>`seek forward ${r} seconds`,SEEK_BACK_N_SECS:({seekOffset:r=30}={})=>`seek back ${r} seconds`,SEEK_LIVE:()=>"seek to live",PLAYING_LIVE:()=>"playing live"};function hst(r){return r?.map(pst).join(" ")}function fst(r){return r?.split(/\s+/).map(mst)}function pst(r){if(r){const{id:e,width:t,height:n}=r;return[e,t,n].filter(i=>i!=null).join(":")}}function mst(r){if(r){const[e,t,n]=r.split(":");return{id:e,width:+t,height:+n}}}function gst(r){return r?.map(yst).join(" ")}function vst(r){return r?.split(/\s+/).map(bst)}function yst(r){if(r){const{id:e,kind:t,language:n,label:i}=r;return[e,t,n,i].filter(s=>s!=null).join(":")}}function bst(r){if(r){const[e,t,n,i]=r.split(":");return{id:e,kind:t,language:n,label:i}}}function Est(r){return r.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function rM(r){return typeof r=="number"&&!Number.isNaN(r)&&Number.isFinite(r)}function Uee(r){return typeof r!="string"?!1:!isNaN(r)&&!isNaN(parseFloat(r))}const Wee=r=>new Promise(e=>setTimeout(e,r)),TU=[{singular:"hour",plural:"hours"},{singular:"minute",plural:"minutes"},{singular:"second",plural:"seconds"}],xst=(r,e)=>{const t=r===1?TU[e].singular:TU[e].plural;return`${r} ${t}`},Qg=r=>{if(!rM(r))return"";const e=Math.abs(r),t=e!==r,n=new Date(0,0,0,0,0,e,0);return`${[n.getHours(),n.getMinutes(),n.getSeconds()].map((o,l)=>o&&xst(o,l)).filter(o=>o).join(", ")}${t?" remaining":""}`};function Ed(r,e){let t=!1;r<0&&(t=!0,r=0-r),r=r<0?0:r;let n=Math.floor(r%60),i=Math.floor(r/60%60),s=Math.floor(r/3600);const a=Math.floor(e/60%60),o=Math.floor(e/3600);return(isNaN(r)||r===1/0)&&(s=i=n="0"),s=s>0||o>0?s+":":"",i=((s||a>=10)&&i<10?"0"+i:i)+":",n=n<10?"0"+n:n,(t?"-":"")+s+i+n}let Hee=class{addEventListener(){}removeEventListener(){}dispatchEvent(){return!0}},Vee=class extends Hee{},SU=class extends Vee{constructor(){super(...arguments),this.role=null}},wst=class{observe(){}unobserve(){}disconnect(){}};const Gee={createElement:function(){return new j0.HTMLElement},createElementNS:function(){return new j0.HTMLElement},addEventListener(){},removeEventListener(){},dispatchEvent(r){return!1}},j0={ResizeObserver:wst,document:Gee,Node:Vee,Element:SU,HTMLElement:class extends SU{constructor(){super(...arguments),this.innerHTML=""}get content(){return new j0.DocumentFragment}},DocumentFragment:class extends Hee{},customElements:{get:function(){},define:function(){},whenDefined:function(){}},localStorage:{getItem(r){return null},setItem(r,e){},removeItem(r){}},CustomEvent:function(){},getComputedStyle:function(){},navigator:{languages:[],get userAgent(){return""}},matchMedia(r){return{matches:!1,media:r}}},qee=typeof window>"u"||typeof window.customElements>"u",jee=Object.keys(j0).every(r=>r in globalThis),se=qee&&!jee?j0:globalThis,Ze=qee&&!jee?Gee:globalThis.document,AU=new WeakMap,nM=r=>{let e=AU.get(r);return e||AU.set(r,e=new Set),e},Kee=new se.ResizeObserver(r=>{for(const e of r)for(const t of nM(e.target))t(e)});function xp(r,e){nM(r).add(e),Kee.observe(r)}function K0(r,e){const t=nM(r);t.delete(e),t.size||Kee.unobserve(r)}function Ns(r){var e;return(e=eD(r))!=null?e:Xp(r,"media-controller")}function eD(r){var e;const{MEDIA_CONTROLLER:t}=Yt,n=r.getAttribute(t);if(n)return(e=TS(r))==null?void 0:e.getElementById(n)}const zee=(r,e,t=".value")=>{const n=r.querySelector(t);n&&(n.textContent=e)},Tst=(r,e)=>{const t=`slot[name="${e}"]`,n=r.shadowRoot.querySelector(t);return n?n.children:[]},Yee=(r,e)=>Tst(r,e)[0],Rl=(r,e)=>!r||!e?!1:r?.contains(e)?!0:Rl(r,e.getRootNode().host),Xp=(r,e)=>{if(!r)return null;const t=r.closest(e);return t||Xp(r.getRootNode().host,e)};function iM(r=document){var e;const t=r?.activeElement;return t?(e=iM(t.shadowRoot))!=null?e:t:null}function TS(r){var e;const t=(e=r?.getRootNode)==null?void 0:e.call(r);return t instanceof ShadowRoot||t instanceof Document?t:null}function Qee(r,{depth:e=3,checkOpacity:t=!0,checkVisibilityCSS:n=!0}={}){if(r.checkVisibility)return r.checkVisibility({checkOpacity:t,checkVisibilityCSS:n});let i=r;for(;i&&e>0;){const s=getComputedStyle(i);if(t&&s.opacity==="0"||n&&s.visibility==="hidden"||s.display==="none")return!1;i=i.parentElement,e--}return!0}function Sst(r,e,t,n){const i=kR(t,n),s=kR(t,{x:r,y:e}),a=kR(n,{x:r,y:e});return s>i||a>i?s>a?1:0:s/i}function kR(r,e){return Math.sqrt(Math.pow(e.x-r.x,2)+Math.pow(e.y-r.y,2))}function Yr(r,e){const t=Ast(r,n=>n===e);return t||Xee(r,e)}function Ast(r,e){var t,n;let i;for(i of(t=r.querySelectorAll("style:not([media])"))!=null?t:[]){let s;try{s=(n=i.sheet)==null?void 0:n.cssRules}catch{continue}for(const a of s??[])if(e(a.selectorText))return a}}function Xee(r,e){var t,n;const i=(t=r.querySelectorAll("style:not([media])"))!=null?t:[],s=i?.[i.length-1];return s?.sheet?(s?.sheet.insertRule(`${e}{}`,s.sheet.cssRules.length),(n=s.sheet.cssRules)==null?void 0:n[s.sheet.cssRules.length-1]):(console.warn("Media Chrome: No style sheet found on style tag of",r),{style:{setProperty:()=>{},removeProperty:()=>"",getPropertyValue:()=>""}})}function $r(r,e,t=Number.NaN){const n=r.getAttribute(e);return n!=null?+n:t}function hn(r,e,t){const n=+t;if(t==null||Number.isNaN(n)){r.hasAttribute(e)&&r.removeAttribute(e);return}$r(r,e,void 0)!==n&&r.setAttribute(e,`${n}`)}function In(r,e){return r.hasAttribute(e)}function $n(r,e,t){if(t==null){r.hasAttribute(e)&&r.removeAttribute(e);return}In(r,e)!=t&&r.toggleAttribute(e,t)}function fn(r,e,t=null){var n;return(n=r.getAttribute(e))!=null?n:t}function pn(r,e,t){if(t==null){r.hasAttribute(e)&&r.removeAttribute(e);return}const n=`${t}`;fn(r,e,void 0)!==n&&r.setAttribute(e,n)}var Zee=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Vl=(r,e,t)=>(Zee(r,e,"read from private field"),t?t.call(r):e.get(r)),_st=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Jb=(r,e,t,n)=>(Zee(r,e,"write to private field"),e.set(r,t),t),Ai;const Jee=Ze.createElement("template");Jee.innerHTML=`
<style>
  :host {
    display: var(--media-control-display, var(--media-gesture-receiver-display, inline-block));
    box-sizing: border-box;
  }
</style>
`;class Cst extends se.HTMLElement{constructor(e={}){if(super(),_st(this,Ai,void 0),!this.shadowRoot){const t=this.attachShadow({mode:"open"}),n=Jee.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Ze.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),this.nativeEl.appendChild(i.content.cloneNode(!0)),t.appendChild(n)}}static get observedAttributes(){return[Yt.MEDIA_CONTROLLER,H.MEDIA_PAUSED]}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===Yt.MEDIA_CONTROLLER&&(t&&((s=(i=Vl(this,Ai))==null?void 0:i.unassociateElement)==null||s.call(i,this),Jb(this,Ai,null)),n&&this.isConnected&&(Jb(this,Ai,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Vl(this,Ai))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,n,i;this.tabIndex=-1,this.setAttribute("aria-hidden","true"),Jb(this,Ai,Rst(this)),this.getAttribute(Yt.MEDIA_CONTROLLER)&&((t=(e=Vl(this,Ai))==null?void 0:e.associateElement)==null||t.call(e,this)),(n=Vl(this,Ai))==null||n.addEventListener("pointerdown",this),(i=Vl(this,Ai))==null||i.addEventListener("click",this)}disconnectedCallback(){var e,t,n,i;this.getAttribute(Yt.MEDIA_CONTROLLER)&&((t=(e=Vl(this,Ai))==null?void 0:e.unassociateElement)==null||t.call(e,this)),(n=Vl(this,Ai))==null||n.removeEventListener("pointerdown",this),(i=Vl(this,Ai))==null||i.removeEventListener("click",this),Jb(this,Ai,null)}handleEvent(e){var t;const n=(t=e.composedPath())==null?void 0:t[0];if(["video","media-controller"].includes(n?.localName)){if(e.type==="pointerdown")this._pointerType=e.pointerType;else if(e.type==="click"){const{clientX:s,clientY:a}=e,{left:o,top:l,width:c,height:u}=this.getBoundingClientRect(),d=s-o,h=a-l;if(d<0||h<0||d>c||h>u||c===0&&u===0)return;const{pointerType:f=this._pointerType}=e;if(this._pointerType=void 0,f===wU.TOUCH){this.handleTap(e);return}else if(f===wU.MOUSE){this.handleMouseClick(e);return}}}}get mediaPaused(){return In(this,H.MEDIA_PAUSED)}set mediaPaused(e){$n(this,H.MEDIA_PAUSED,e)}handleTap(e){}handleMouseClick(e){const t=this.mediaPaused?qe.MEDIA_PLAY_REQUEST:qe.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new se.CustomEvent(t,{composed:!0,bubbles:!0}))}}Ai=new WeakMap;function Rst(r){var e;const t=r.getAttribute(Yt.MEDIA_CONTROLLER);return t?(e=r.getRootNode())==null?void 0:e.getElementById(t):Xp(r,"media-controller")}se.customElements.get("media-gesture-receiver")||se.customElements.define("media-gesture-receiver",Cst);var sM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},wc=(r,e,t)=>(sM(r,e,"read from private field"),t?t.call(r):e.get(r)),qo=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},ag=(r,e,t,n)=>(sM(r,e,"write to private field"),e.set(r,t),t),sa=(r,e,t)=>(sM(r,e,"access private method"),t),kw,jh,z0,wf,tD,ete,rD,tte,Y0,SS,AS,aM,wp,Q0;const Ot={AUDIO:"audio",AUTOHIDE:"autohide",BREAKPOINTS:"breakpoints",GESTURES_DISABLED:"gesturesdisabled",KEYBOARD_CONTROL:"keyboardcontrol",NO_AUTOHIDE:"noautohide",USER_INACTIVE:"userinactive"},rte=Ze.createElement("template");rte.innerHTML=`
  <style>
    
    :host([${H.MEDIA_IS_FULLSCREEN}]) ::slotted([slot=media]) {
      outline: none;
    }

    :host {
      box-sizing: border-box;
      position: relative;
      display: inline-block;
      line-height: 0;
      background-color: var(--media-background-color, #000);
    }

    :host(:not([${Ot.AUDIO}])) [part~=layer]:not([part~=media-layer]) {
      position: absolute;
      top: 0;
      left: 0;
      bottom: 0;
      right: 0;
      display: flex;
      flex-flow: column nowrap;
      align-items: start;
      pointer-events: none;
      background: none;
    }

    slot[name=media] {
      display: var(--media-slot-display, contents);
    }

    
    :host([${Ot.AUDIO}]) slot[name=media] {
      display: var(--media-slot-display, none);
    }

    
    :host([${Ot.AUDIO}]) [part~=layer][part~=gesture-layer] {
      height: 0;
      display: block;
    }

    
    :host(:not([${Ot.AUDIO}])[${Ot.GESTURES_DISABLED}]) ::slotted([slot=gestures-chrome]),
    :host(:not([${Ot.AUDIO}])[${Ot.GESTURES_DISABLED}]) media-gesture-receiver[slot=gestures-chrome] {
      display: none;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not(media-loading-indicator):not([hidden])) {
      pointer-events: auto;
    }

    :host(:not([${Ot.AUDIO}])) *[part~=layer][part~=centered-layer] {
      align-items: center;
      justify-content: center;
    }

    :host(:not([${Ot.AUDIO}])) ::slotted(media-gesture-receiver[slot=gestures-chrome]),
    :host(:not([${Ot.AUDIO}])) media-gesture-receiver[slot=gestures-chrome] {
      align-self: stretch;
      flex-grow: 1;
    }

    slot[name=middle-chrome] {
      display: inline;
      flex-grow: 1;
      pointer-events: none;
      background: none;
    }

    
    ::slotted([slot=media]),
    ::slotted([slot=poster]) {
      width: 100%;
      height: 100%;
    }

    
    :host(:not([${Ot.AUDIO}])) .spacer {
      flex-grow: 1;
    }

    
    :host(:-webkit-full-screen) {
      
      width: 100% !important;
      height: 100% !important;
    }

    
    ::slotted(:not([slot=media]):not([slot=poster]):not([${Ot.NO_AUTOHIDE}]):not([hidden])) {
      opacity: 1;
      transition: opacity 0.25s;
    }

    
    :host([${Ot.USER_INACTIVE}]:not([${H.MEDIA_PAUSED}]):not([${H.MEDIA_IS_AIRPLAYING}]):not([${H.MEDIA_IS_CASTING}]):not([${Ot.AUDIO}])) ::slotted(:not([slot=media]):not([slot=poster]):not([${Ot.NO_AUTOHIDE}])) {
      opacity: 0;
      transition: opacity 1s;
    }

    :host([${Ot.USER_INACTIVE}]:not([${H.MEDIA_PAUSED}]):not([${H.MEDIA_IS_CASTING}]):not([${Ot.AUDIO}])) ::slotted([slot=media]) {
      cursor: none;
    }

    ::slotted(media-control-bar)  {
      align-self: stretch;
    }

    
    :host(:not([${Ot.AUDIO}])[${H.MEDIA_HAS_PLAYED}]) slot[name=poster] {
      display: none;
    }

    ::slotted([role="menu"]) {
      align-self: end;
    }

    ::slotted([role="dialog"]) {
      align-self: center;
    }
  </style>

  <slot name="media" part="layer media-layer"></slot>
  <slot name="poster" part="layer poster-layer"></slot>
  <slot name="gestures-chrome" part="layer gesture-layer">
    <media-gesture-receiver slot="gestures-chrome"></media-gesture-receiver>
  </slot>
  <span part="layer vertical-layer">
    <slot name="top-chrome" part="top chrome"></slot>
    <slot name="middle-chrome" part="middle chrome"></slot>
    <slot name="centered-chrome" part="layer centered-layer center centered chrome"></slot>
    
    <slot part="bottom chrome"></slot>
  </span>
`;const kst=Object.values(H),Ist="sm:384 md:576 lg:768 xl:960";function $st(r){Dst(r.target,r.contentRect.width)}function Dst(r,e){var t;if(!r.isConnected)return;const n=(t=r.getAttribute(Ot.BREAKPOINTS))!=null?t:Ist,i=Lst(n),s=Ost(i,e);let a=!1;if(Object.keys(i).forEach(o=>{if(s.includes(o)){r.hasAttribute(`breakpoint${o}`)||(r.setAttribute(`breakpoint${o}`,""),a=!0);return}r.hasAttribute(`breakpoint${o}`)&&(r.removeAttribute(`breakpoint${o}`),a=!0)}),a){const o=new CustomEvent(eh.BREAKPOINTS_CHANGE,{detail:s});r.dispatchEvent(o)}}function Lst(r){const e=r.split(/\s+/);return Object.fromEntries(e.map(t=>t.split(":")))}function Ost(r,e){return Object.keys(r).filter(t=>e>=parseInt(r[t]))}class nte extends se.HTMLElement{constructor(){super(),qo(this,tD),qo(this,rD),qo(this,Y0),qo(this,AS),qo(this,wp),qo(this,kw,0),qo(this,jh,null),qo(this,z0,null),qo(this,wf,void 0),this.breakpointsComputed=!1,this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(rte.content.cloneNode(!0)));const e=a=>{const o=this.media;for(const l of a)l.type==="childList"&&(l.removedNodes.forEach(c=>{if(c.slot=="media"&&l.target==this){let u=l.previousSibling&&l.previousSibling.previousElementSibling;if(!u||!o)this.mediaUnsetCallback(c);else{let d=u.slot!=="media";for(;(u=u.previousSibling)!==null;)u.slot=="media"&&(d=!1);d&&this.mediaUnsetCallback(c)}}}),o&&l.addedNodes.forEach(c=>{c===o&&this.handleMediaUpdated(o)}))};new MutationObserver(e).observe(this,{childList:!0,subtree:!0});let n=!1;xp(this,a=>{n||(setTimeout(()=>{$st(a),n=!1,this.breakpointsComputed||(this.breakpointsComputed=!0,this.dispatchEvent(new CustomEvent(eh.BREAKPOINTS_COMPUTED,{bubbles:!0,composed:!0})))},0),n=!0)});const s=this.querySelector(":scope > slot[slot=media]");s&&s.addEventListener("slotchange",()=>{if(!s.assignedElements({flatten:!0}).length){wc(this,jh)&&this.mediaUnsetCallback(wc(this,jh));return}this.handleMediaUpdated(this.media)})}static get observedAttributes(){return[Ot.AUTOHIDE,Ot.GESTURES_DISABLED].concat(kst).filter(e=>![H.MEDIA_RENDITION_LIST,H.MEDIA_AUDIO_TRACK_LIST,H.MEDIA_CHAPTERS_CUES,H.MEDIA_WIDTH,H.MEDIA_HEIGHT].includes(e))}attributeChangedCallback(e,t,n){e.toLowerCase()==Ot.AUTOHIDE&&(this.autohide=n)}get media(){let e=this.querySelector(":scope > [slot=media]");return e?.nodeName=="SLOT"&&(e=e.assignedElements({flatten:!0})[0]),e}async handleMediaUpdated(e){e&&(ag(this,jh,e),e.localName.includes("-")&&await se.customElements.whenDefined(e.localName),this.mediaSetCallback(e))}connectedCallback(){var e;const n=this.getAttribute(Ot.AUDIO)!=null?as.AUDIO_PLAYER():as.VIDEO_PLAYER();this.setAttribute("role","region"),this.setAttribute("aria-label",n),this.handleMediaUpdated(this.media),this.setAttribute(Ot.USER_INACTIVE,""),this.addEventListener("pointerdown",this),this.addEventListener("pointermove",this),this.addEventListener("pointerup",this),this.addEventListener("mouseleave",this),this.addEventListener("keyup",this),(e=se.window)==null||e.addEventListener("mouseup",this)}disconnectedCallback(){var e;this.media&&this.mediaUnsetCallback(this.media),(e=se.window)==null||e.removeEventListener("mouseup",this)}mediaSetCallback(e){}mediaUnsetCallback(e){ag(this,jh,null)}handleEvent(e){switch(e.type){case"pointerdown":ag(this,kw,e.timeStamp);break;case"pointermove":sa(this,tD,ete).call(this,e);break;case"pointerup":sa(this,rD,tte).call(this,e);break;case"mouseleave":sa(this,Y0,SS).call(this);break;case"mouseup":this.removeAttribute(Ot.KEYBOARD_CONTROL);break;case"keyup":sa(this,wp,Q0).call(this),this.setAttribute(Ot.KEYBOARD_CONTROL,"");break}}set autohide(e){const t=Number(e);ag(this,wf,isNaN(t)?0:t)}get autohide(){return(wc(this,wf)===void 0?2:wc(this,wf)).toString()}}kw=new WeakMap;jh=new WeakMap;z0=new WeakMap;wf=new WeakMap;tD=new WeakSet;ete=function(r){r.pointerType!=="mouse"&&r.timeStamp-wc(this,kw)<250||(sa(this,AS,aM).call(this),clearTimeout(wc(this,z0)),[this,this.media].includes(r.target)&&sa(this,wp,Q0).call(this))};rD=new WeakSet;tte=function(r){if(r.pointerType==="touch"){const e=!this.hasAttribute(Ot.USER_INACTIVE);[this,this.media].includes(r.target)&&e?sa(this,Y0,SS).call(this):sa(this,wp,Q0).call(this)}else r.composedPath().some(e=>["media-play-button","media-fullscreen-button"].includes(e?.localName))&&sa(this,wp,Q0).call(this)};Y0=new WeakSet;SS=function(){if(wc(this,wf)<0||this.hasAttribute(Ot.USER_INACTIVE))return;this.setAttribute(Ot.USER_INACTIVE,"");const r=new se.CustomEvent(eh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!0});this.dispatchEvent(r)};AS=new WeakSet;aM=function(){if(!this.hasAttribute(Ot.USER_INACTIVE))return;this.removeAttribute(Ot.USER_INACTIVE);const r=new se.CustomEvent(eh.USER_INACTIVE,{composed:!0,bubbles:!0,detail:!1});this.dispatchEvent(r)};wp=new WeakSet;Q0=function(){sa(this,AS,aM).call(this),clearTimeout(wc(this,z0));const r=parseInt(this.autohide);r<0||ag(this,z0,setTimeout(()=>{sa(this,Y0,SS).call(this)},r*1e3))};se.customElements.get("media-container")||se.customElements.define("media-container",nte);var ite=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},wn=(r,e,t)=>(ite(r,e,"read from private field"),t?t.call(r):e.get(r)),Nm=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},e1=(r,e,t,n)=>(ite(r,e,"write to private field"),e.set(r,t),t),Kh,zh,Iw,sd,Yo,zl;class _S{constructor(e,t,{defaultValue:n}={defaultValue:void 0}){Nm(this,Yo),Nm(this,Kh,void 0),Nm(this,zh,void 0),Nm(this,Iw,void 0),Nm(this,sd,new Set),e1(this,Kh,e),e1(this,zh,t),e1(this,Iw,new Set(n))}[Symbol.iterator](){return wn(this,Yo,zl).values()}get length(){return wn(this,Yo,zl).size}get value(){var e;return(e=[...wn(this,Yo,zl)].join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(e1(this,sd,new Set),this.add(...(t=e?.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return[...wn(this,Yo,zl)][e]}values(){return wn(this,Yo,zl).values()}forEach(e,t){wn(this,Yo,zl).forEach(e,t)}add(...e){var t,n;e.forEach(i=>wn(this,sd).add(i)),!(this.value===""&&!((t=wn(this,Kh))!=null&&t.hasAttribute(`${wn(this,zh)}`)))&&((n=wn(this,Kh))==null||n.setAttribute(`${wn(this,zh)}`,`${this.value}`))}remove(...e){var t;e.forEach(n=>wn(this,sd).delete(n)),(t=wn(this,Kh))==null||t.setAttribute(`${wn(this,zh)}`,`${this.value}`)}contains(e){return wn(this,Yo,zl).has(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){return this.remove(e),this.add(t),e===t}}Kh=new WeakMap;zh=new WeakMap;Iw=new WeakMap;sd=new WeakMap;Yo=new WeakSet;zl=function(){return wn(this,sd).size?wn(this,sd):wn(this,Iw)};const Pst=(r="")=>r.split(/\s+/),ste=(r="")=>{const[e,t,n]=r.split(":"),i=n?decodeURIComponent(n):void 0;return{kind:e==="cc"?ho.CAPTIONS:ho.SUBTITLES,language:t,label:i}},CS=(r="",e={})=>Pst(r).map(t=>{const n=ste(t);return{...e,...n}}),ate=r=>r?Array.isArray(r)?r.map(e=>typeof e=="string"?ste(e):e):typeof r=="string"?CS(r):[r]:[],nD=({kind:r,label:e,language:t}={kind:"subtitles"})=>e?`${r==="captions"?"cc":"sb"}:${t}:${encodeURIComponent(e)}`:t,X0=(r=[])=>Array.prototype.map.call(r,nD).join(" "),Mst=(r,e)=>t=>t[r]===e,ote=r=>{const e=Object.entries(r).map(([t,n])=>Mst(t,n));return t=>e.every(n=>n(t))},Xg=(r,e=[],t=[])=>{const n=ate(t).map(ote),i=s=>n.some(a=>a(s));Array.from(e).filter(i).forEach(s=>{s.mode=r})},RS=(r,e=()=>!0)=>{if(!r?.textTracks)return[];const t=typeof e=="function"?e:ote(e);return Array.from(r.textTracks).filter(t)},lte=r=>{var e;return!!((e=r.mediaSubtitlesShowing)!=null&&e.length)||r.hasAttribute(H.MEDIA_SUBTITLES_SHOWING)},Nst=r=>{var e;const{media:t,fullscreenElement:n}=r,i=n&&"requestFullscreen"in n?"requestFullscreen":n&&"webkitRequestFullScreen"in n?"webkitRequestFullScreen":void 0;if(i){const s=(e=n[i])==null?void 0:e.call(n);if(s instanceof Promise)return s.catch(()=>{})}else t?.webkitEnterFullscreen?t.webkitEnterFullscreen():t?.requestFullscreen&&t.requestFullscreen()},_U="exitFullscreen"in Ze?"exitFullscreen":"webkitExitFullscreen"in Ze?"webkitExitFullscreen":"webkitCancelFullScreen"in Ze?"webkitCancelFullScreen":void 0,Fst=r=>{var e;const{documentElement:t}=r;if(_U){const n=(e=t?.[_U])==null?void 0:e.call(t);if(n instanceof Promise)return n.catch(()=>{})}},og="fullscreenElement"in Ze?"fullscreenElement":"webkitFullscreenElement"in Ze?"webkitFullscreenElement":void 0,Bst=r=>{const{documentElement:e,media:t}=r,n=e?.[og];return!n&&"webkitDisplayingFullscreen"in t&&"webkitPresentationMode"in t&&t.webkitDisplayingFullscreen&&t.webkitPresentationMode===dst.FULLSCREEN?t:n},Ust=r=>{var e;const{media:t,documentElement:n,fullscreenElement:i=t}=r;if(!t||!n)return!1;const s=Bst(r);if(!s)return!1;if(s===i||s===t)return!0;if(s.localName.includes("-")){let a=s.shadowRoot;if(!(og in a))return Rl(s,i);for(;a?.[og];){if(a[og]===i)return!0;a=(e=a[og])==null?void 0:e.shadowRoot}}return!1},Wst="fullscreenEnabled"in Ze?"fullscreenEnabled":"webkitFullscreenEnabled"in Ze?"webkitFullscreenEnabled":void 0,Hst=r=>{const{documentElement:e,media:t}=r;return!!e?.[Wst]||t&&"webkitSupportsFullscreen"in t};let t1;const oM=()=>{var r,e;return t1||(t1=(e=(r=Ze)==null?void 0:r.createElement)==null?void 0:e.call(r,"video"),t1)},Vst=async(r=oM())=>{if(!r)return!1;const e=r.volume;r.volume=e/2+.1;const t=new AbortController,n=await Promise.race([Gst(r,t.signal),qst(r,e)]);return t.abort(),n},Gst=(r,e)=>new Promise(t=>{r.addEventListener("volumechange",()=>t(!0),{signal:e})}),qst=async(r,e)=>{for(let t=0;t<10;t++){if(r.volume===e)return!1;await Wee(10)}return r.volume!==e},jst=/.*Version\/.*Safari\/.*/.test(se.navigator.userAgent),cte=(r=oM())=>se.matchMedia("(display-mode: standalone)").matches&&jst?!1:typeof r?.requestPictureInPicture=="function",ute=(r=oM())=>Hst({documentElement:Ze,media:r}),Kst=ute(),zst=cte(),Yst=!!se.WebKitPlaybackTargetAvailabilityEvent,Qst=!!se.chrome,$w=r=>RS(r.media,e=>[ho.SUBTITLES,ho.CAPTIONS].includes(e.kind)).sort((e,t)=>e.kind>=t.kind?1:-1),dte=r=>RS(r.media,e=>e.mode===Uf.SHOWING&&[ho.SUBTITLES,ho.CAPTIONS].includes(e.kind)),hte=(r,e)=>{const t=$w(r),n=dte(r),i=!!n.length;if(t.length){if(e===!1||i&&e!==!0)Xg(Uf.DISABLED,t,n);else if(e===!0||!i&&e!==!1){let s=t[0];const{options:a}=r;if(!a?.noSubtitlesLangPref){const u=globalThis.localStorage.getItem("media-chrome-pref-subtitles-lang"),d=u?[u,...globalThis.navigator.languages]:globalThis.navigator.languages,h=t.filter(f=>d.some(m=>f.language.toLowerCase().startsWith(m.split("-")[0]))).sort((f,m)=>{const g=d.findIndex(b=>f.language.toLowerCase().startsWith(b.split("-")[0])),y=d.findIndex(b=>m.language.toLowerCase().startsWith(b.split("-")[0]));return g-y});h[0]&&(s=h[0])}const{language:o,label:l,kind:c}=s;Xg(Uf.DISABLED,t,n),Xg(Uf.SHOWING,t,[{language:o,label:l,kind:c}])}}},lM=(r,e)=>r===e?!0:typeof r!=typeof e?!1:typeof r=="number"&&Number.isNaN(r)&&Number.isNaN(e)?!0:typeof r!="object"?!1:Array.isArray(r)?Xst(r,e):Object.entries(r).every(([t,n])=>t in e&&lM(n,e[t])),Xst=(r,e)=>{const t=Array.isArray(r),n=Array.isArray(e);return t!==n?!1:t||n?r.length!==e.length?!1:r.every((i,s)=>lM(i,e[s])):!0},Zst=Object.values(rl);let Dw;const Jst=Vst().then(r=>(Dw=r,Dw)),eat=async(...r)=>{await Promise.all(r.filter(e=>e).map(async e=>{if(!("localName"in e&&e instanceof se.HTMLElement))return;const t=e.localName;if(!t.includes("-"))return;const n=se.customElements.get(t);n&&e instanceof n||(await se.customElements.whenDefined(t),se.customElements.upgrade(e))}))},eE={mediaWidth:{get(r){var e;const{media:t}=r;return(e=t?.videoWidth)!=null?e:0},mediaEvents:["resize"]},mediaHeight:{get(r){var e;const{media:t}=r;return(e=t?.videoHeight)!=null?e:0},mediaEvents:["resize"]},mediaPaused:{get(r){var e;const{media:t}=r;return(e=t?.paused)!=null?e:!0},set(r,e){var t;const{media:n}=e;n&&(r?n.pause():(t=n.play())==null||t.catch(()=>{}))},mediaEvents:["play","playing","pause","emptied"]},mediaHasPlayed:{get(r,e){const{media:t}=r;return t?e?e.type==="playing":!t.paused:!1},mediaEvents:["playing","emptied"]},mediaEnded:{get(r){var e;const{media:t}=r;return(e=t?.ended)!=null?e:!1},mediaEvents:["seeked","ended","emptied"]},mediaPlaybackRate:{get(r){var e;const{media:t}=r;return(e=t?.playbackRate)!=null?e:1},set(r,e){const{media:t}=e;t&&Number.isFinite(+r)&&(t.playbackRate=+r)},mediaEvents:["ratechange","loadstart"]},mediaMuted:{get(r){var e;const{media:t}=r;return(e=t?.muted)!=null?e:!1},set(r,e){const{media:t}=e;t&&(t.muted=r)},mediaEvents:["volumechange"]},mediaVolume:{get(r){var e;const{media:t}=r;return(e=t?.volume)!=null?e:1},set(r,e){const{media:t}=e;if(t){try{r==null?se.localStorage.removeItem("media-chrome-pref-volume"):se.localStorage.setItem("media-chrome-pref-volume",r.toString())}catch{}Number.isFinite(+r)&&(t.volume=+r)}},mediaEvents:["volumechange"],stateOwnersUpdateHandlers:[(r,e)=>{const{options:{noVolumePref:t}}=e;if(!t)try{const n=se.localStorage.getItem("media-chrome-pref-volume");if(n==null)return;eE.mediaVolume.set(+n,e),r(+n)}catch(n){console.debug("Error getting volume pref",n)}}]},mediaVolumeLevel:{get(r){const{media:e}=r;return typeof e?.volume>"u"?"high":e.muted||e.volume===0?"off":e.volume<.5?"low":e.volume<.75?"medium":"high"},mediaEvents:["volumechange"]},mediaCurrentTime:{get(r){var e;const{media:t}=r;return(e=t?.currentTime)!=null?e:0},set(r,e){const{media:t}=e;!t||!rM(r)||(t.currentTime=r)},mediaEvents:["timeupdate","loadedmetadata"]},mediaDuration:{get(r){const{media:e,options:{defaultDuration:t}={}}=r;return t&&(!e||!e.duration||Number.isNaN(e.duration)||!Number.isFinite(e.duration))?t:Number.isFinite(e?.duration)?e.duration:Number.NaN},mediaEvents:["durationchange","loadedmetadata","emptied"]},mediaLoading:{get(r){const{media:e}=r;return e?.readyState<3},mediaEvents:["waiting","playing","emptied"]},mediaSeekable:{get(r){var e;const{media:t}=r;if(!((e=t?.seekable)!=null&&e.length))return;const n=t.seekable.start(0),i=t.seekable.end(t.seekable.length-1);if(!(!n&&!i))return[Number(n.toFixed(3)),Number(i.toFixed(3))]},mediaEvents:["loadedmetadata","emptied","progress","seekablechange"]},mediaBuffered:{get(r){var e;const{media:t}=r,n=(e=t?.buffered)!=null?e:[];return Array.from(n).map((i,s)=>[Number(n.start(s).toFixed(3)),Number(n.end(s).toFixed(3))])},mediaEvents:["progress","emptied"]},mediaStreamType:{get(r){const{media:e,options:{defaultStreamType:t}={}}=r,n=[rl.LIVE,rl.ON_DEMAND].includes(t)?t:void 0;if(!e)return n;const{streamType:i}=e;if(Zst.includes(i))return i===rl.UNKNOWN?n:i;const s=e.duration;return s===1/0?rl.LIVE:Number.isFinite(s)?rl.ON_DEMAND:n},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange"]},mediaTargetLiveWindow:{get(r){const{media:e}=r;if(!e)return Number.NaN;const{targetLiveWindow:t}=e,n=eE.mediaStreamType.get(r);return(t==null||Number.isNaN(t))&&n===rl.LIVE?0:t},mediaEvents:["emptied","durationchange","loadedmetadata","streamtypechange","targetlivewindowchange"]},mediaTimeIsLive:{get(r){const{media:e,options:{liveEdgeOffset:t=10}={}}=r;if(!e)return!1;if(typeof e.liveEdgeStart=="number")return Number.isNaN(e.liveEdgeStart)?!1:e.currentTime>=e.liveEdgeStart;if(!(eE.mediaStreamType.get(r)===rl.LIVE))return!1;const i=e.seekable;if(!i)return!0;if(!i.length)return!1;const s=i.end(i.length-1)-t;return e.currentTime>=s},mediaEvents:["playing","timeupdate","progress","waiting","emptied"]},mediaSubtitlesList:{get(r){return $w(r).map(({kind:e,label:t,language:n})=>({kind:e,label:t,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack"]},mediaSubtitlesShowing:{get(r){return dte(r).map(({kind:e,label:t,language:n})=>({kind:e,label:t,language:n}))},mediaEvents:["loadstart"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(r,e)=>{var t,n;const{media:i,options:s}=e;if(!i)return;const a=o=>{var l;!s.defaultSubtitles||o&&![ho.CAPTIONS,ho.SUBTITLES].includes((l=o?.track)==null?void 0:l.kind)||hte(e,!0)};return(t=i.textTracks)==null||t.addEventListener("addtrack",a),(n=i.textTracks)==null||n.addEventListener("removetrack",a),a(),()=>{var o,l;(o=i.textTracks)==null||o.removeEventListener("addtrack",a),(l=i.textTracks)==null||l.removeEventListener("removetrack",a)}}]},mediaChaptersCues:{get(r){var e;const{media:t}=r;if(!t)return[];const[n]=RS(t,{kind:ho.CHAPTERS});return Array.from((e=n?.cues)!=null?e:[]).map(({text:i,startTime:s,endTime:a})=>({text:i,startTime:s,endTime:a}))},mediaEvents:["loadstart","loadedmetadata"],textTracksEvents:["addtrack","removetrack","change"],stateOwnersUpdateHandlers:[(r,e)=>{var t;const{media:n}=e;if(!n)return;const i=n.querySelector('track[kind="chapters"][default][src]'),s=(t=n.shadowRoot)==null?void 0:t.querySelector(':is(video,audio) > track[kind="chapters"][default][src]');return i?.addEventListener("load",r),s?.addEventListener("load",r),()=>{i?.removeEventListener("load",r),s?.removeEventListener("load",r)}}]},mediaIsPip:{get(r){var e,t;const{media:n,documentElement:i}=r;if(!n||!i||!i.pictureInPictureElement)return!1;if(i.pictureInPictureElement===n)return!0;if(i.pictureInPictureElement instanceof HTMLMediaElement)return(e=n.localName)!=null&&e.includes("-")?Rl(n,i.pictureInPictureElement):!1;if(i.pictureInPictureElement.localName.includes("-")){let s=i.pictureInPictureElement.shadowRoot;for(;s?.pictureInPictureElement;){if(s.pictureInPictureElement===n)return!0;s=(t=s.pictureInPictureElement)==null?void 0:t.shadowRoot}}return!1},set(r,e){const{media:t}=e;if(t)if(r){if(!Ze.pictureInPictureEnabled){console.warn("MediaChrome: Picture-in-picture is not enabled");return}if(!t.requestPictureInPicture){console.warn("MediaChrome: The current media does not support picture-in-picture");return}const n=()=>{console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a readyState > 0.")};t.requestPictureInPicture().catch(i=>{if(i.code===11){if(!t.src){console.warn("MediaChrome: The media is not ready for picture-in-picture. It must have a src set.");return}if(t.readyState===0&&t.preload==="none"){const s=()=>{t.removeEventListener("loadedmetadata",a),t.preload="none"},a=()=>{t.requestPictureInPicture().catch(n),s()};t.addEventListener("loadedmetadata",a),t.preload="metadata",setTimeout(()=>{t.readyState===0&&n(),s()},1e3)}else throw i}else throw i})}else Ze.pictureInPictureElement&&Ze.exitPictureInPicture()},mediaEvents:["enterpictureinpicture","leavepictureinpicture"]},mediaRenditionList:{get(r){var e;const{media:t}=r;return[...(e=t?.videoRenditions)!=null?e:[]].map(n=>({...n}))},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaRenditionSelected:{get(r){var e,t,n;const{media:i}=r;return(n=(t=i?.videoRenditions)==null?void 0:t[(e=i.videoRenditions)==null?void 0:e.selectedIndex])==null?void 0:n.id},set(r,e){const{media:t}=e;if(!t?.videoRenditions){console.warn("MediaController: Rendition selection not supported by this media.");return}const n=r,i=Array.prototype.findIndex.call(t.videoRenditions,s=>s.id==n);t.videoRenditions.selectedIndex!=i&&(t.videoRenditions.selectedIndex=i)},mediaEvents:["emptied"],videoRenditionsEvents:["addrendition","removerendition","change"]},mediaAudioTrackList:{get(r){var e;const{media:t}=r;return[...(e=t?.audioTracks)!=null?e:[]]},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]},mediaAudioTrackEnabled:{get(r){var e,t;const{media:n}=r;return(t=[...(e=n?.audioTracks)!=null?e:[]].find(i=>i.enabled))==null?void 0:t.id},set(r,e){const{media:t}=e;if(!t?.audioTracks){console.warn("MediaChrome: Audio track selection not supported by this media.");return}const n=r;for(const i of t.audioTracks)i.enabled=n==i.id},mediaEvents:["emptied"],audioTracksEvents:["addtrack","removetrack","change"]},mediaIsFullscreen:{get(r){return Ust(r)},set(r,e){r?Nst(e):Fst(e)},rootEvents:["fullscreenchange","webkitfullscreenchange"],mediaEvents:["webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"]},mediaIsCasting:{get(r){var e;const{media:t}=r;return!t?.remote||((e=t.remote)==null?void 0:e.state)==="disconnected"?!1:!!t.remote.state},set(r,e){var t,n;const{media:i}=e;if(i&&!(r&&((t=i.remote)==null?void 0:t.state)!=="disconnected")&&!(!r&&((n=i.remote)==null?void 0:n.state)!=="connected")){if(typeof i.remote.prompt!="function"){console.warn("MediaChrome: Casting is not supported in this environment");return}i.remote.prompt().catch(()=>{})}},remoteEvents:["connect","connecting","disconnect"]},mediaIsAirplaying:{get(){return!1},set(r,e){const{media:t}=e;if(t){if(!(t.webkitShowPlaybackTargetPicker&&se.WebKitPlaybackTargetAvailabilityEvent)){console.warn("MediaChrome: received a request to select AirPlay but AirPlay is not supported in this environment");return}t.webkitShowPlaybackTargetPicker()}},mediaEvents:["webkitcurrentplaybacktargetiswirelesschanged"]},mediaFullscreenUnavailable:{get(r){const{media:e}=r;if(!Kst||!ute(e))return bs.UNSUPPORTED}},mediaPipUnavailable:{get(r){const{media:e}=r;if(!zst||!cte(e))return bs.UNSUPPORTED}},mediaVolumeUnavailable:{get(r){const{media:e}=r;if(Dw===!1||e?.volume==null)return bs.UNSUPPORTED},stateOwnersUpdateHandlers:[r=>{Dw==null&&Jst.then(e=>r(e?void 0:bs.UNSUPPORTED))}]},mediaCastUnavailable:{get(r,{availability:e="not-available"}={}){var t;const{media:n}=r;if(!Qst||!((t=n?.remote)!=null&&t.state))return bs.UNSUPPORTED;if(!(e==null||e==="available"))return bs.UNAVAILABLE},stateOwnersUpdateHandlers:[(r,e)=>{var t;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(t=n?.remote)==null||t.watchAvailability(s=>{r({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?r({availability:null}):r({availability:"not-available"})}),()=>{var s;(s=n?.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaAirplayUnavailable:{get(r,e){if(!Yst)return bs.UNSUPPORTED;if(e?.availability==="not-available")return bs.UNAVAILABLE},mediaEvents:["webkitplaybacktargetavailabilitychanged"],stateOwnersUpdateHandlers:[(r,e)=>{var t;const{media:n}=e;return n?(n.disableRemotePlayback||n.hasAttribute("disableremoteplayback")||(t=n?.remote)==null||t.watchAvailability(s=>{r({availability:s?"available":"not-available"})}).catch(s=>{s.name==="NotSupportedError"?r({availability:null}):r({availability:"not-available"})}),()=>{var s;(s=n?.remote)==null||s.cancelWatchAvailability().catch(()=>{})}):void 0}]},mediaRenditionUnavailable:{get(r){var e;const{media:t}=r;if(!t?.videoRenditions)return bs.UNSUPPORTED;if(!((e=t.videoRenditions)!=null&&e.length))return bs.UNAVAILABLE},mediaEvents:["emptied","loadstart"],videoRenditionsEvents:["addrendition","removerendition"]},mediaAudioTrackUnavailable:{get(r){var e,t;const{media:n}=r;if(!n?.audioTracks)return bs.UNSUPPORTED;if(((t=(e=n.audioTracks)==null?void 0:e.length)!=null?t:0)<=1)return bs.UNAVAILABLE},mediaEvents:["emptied","loadstart"],audioTracksEvents:["addtrack","removetrack"]}},tat={[qe.MEDIA_PREVIEW_REQUEST](r,e,{detail:t}){var n,i,s;const{media:a}=e,o=t??void 0;let l,c;if(a&&o!=null){const[f]=RS(a,{kind:ho.METADATA,label:"thumbnails"}),m=Array.prototype.find.call((n=f?.cues)!=null?n:[],(g,y,b)=>y===0?g.endTime>o:y===b.length-1?g.startTime<=o:g.startTime<=o&&g.endTime>o);if(m){const g=/'^(?:[a-z]+:)?\/\//i.test(m.text)||(i=a?.querySelector('track[label="thumbnails"]'))==null?void 0:i.src,y=new URL(m.text,g);c=new URLSearchParams(y.hash).get("#xywh").split(",").map(E=>+E),l=y.href}}const u=r.mediaDuration.get(e);let h=(s=r.mediaChaptersCues.get(e).find((f,m,g)=>m===g.length-1&&u===f.endTime?f.startTime<=o&&f.endTime>=o:f.startTime<=o&&f.endTime>o))==null?void 0:s.text;return t!=null&&h==null&&(h=""),{mediaPreviewTime:o,mediaPreviewImage:l,mediaPreviewCoords:c,mediaPreviewChapter:h}},[qe.MEDIA_PAUSE_REQUEST](r,e){r["mediaPaused"].set(!0,e)},[qe.MEDIA_PLAY_REQUEST](r,e){var t;const n="mediaPaused";if(r.mediaStreamType.get(e)===rl.LIVE){const a=!(r.mediaTargetLiveWindow.get(e)>0),o=(t=r.mediaSeekable.get(e))==null?void 0:t[1];a&&o&&r.mediaCurrentTime.set(o,e)}r[n].set(!1,e)},[qe.MEDIA_PLAYBACK_RATE_REQUEST](r,e,{detail:t}){const n="mediaPlaybackRate",i=t;r[n].set(i,e)},[qe.MEDIA_MUTE_REQUEST](r,e){r["mediaMuted"].set(!0,e)},[qe.MEDIA_UNMUTE_REQUEST](r,e){const t="mediaMuted";r.mediaVolume.get(e)||r.mediaVolume.set(.25,e),r[t].set(!1,e)},[qe.MEDIA_VOLUME_REQUEST](r,e,{detail:t}){const n="mediaVolume",i=t;i&&r.mediaMuted.get(e)&&r.mediaMuted.set(!1,e),r[n].set(i,e)},[qe.MEDIA_SEEK_REQUEST](r,e,{detail:t}){const n="mediaCurrentTime",i=t;r[n].set(i,e)},[qe.MEDIA_SEEK_TO_LIVE_REQUEST](r,e){var t;const n="mediaCurrentTime",i=(t=r.mediaSeekable.get(e))==null?void 0:t[1];Number.isNaN(Number(i))||r[n].set(i,e)},[qe.MEDIA_SHOW_SUBTITLES_REQUEST](r,e,{detail:t}){var n;const{options:i}=e,s=$w(e),a=ate(t),o=(n=a[0])==null?void 0:n.language;o&&!i.noSubtitlesLangPref&&se.localStorage.setItem("media-chrome-pref-subtitles-lang",o),Xg(Uf.SHOWING,s,a)},[qe.MEDIA_DISABLE_SUBTITLES_REQUEST](r,e,{detail:t}){const n=$w(e),i=t??[];Xg(Uf.DISABLED,n,i)},[qe.MEDIA_TOGGLE_SUBTITLES_REQUEST](r,e,{detail:t}){hte(e,t)},[qe.MEDIA_RENDITION_REQUEST](r,e,{detail:t}){const n="mediaRenditionSelected",i=t;r[n].set(i,e)},[qe.MEDIA_AUDIO_TRACK_REQUEST](r,e,{detail:t}){const n="mediaAudioTrackEnabled",i=t;r[n].set(i,e)},[qe.MEDIA_ENTER_PIP_REQUEST](r,e){const t="mediaIsPip";r.mediaIsFullscreen.get(e)&&r.mediaIsFullscreen.set(!1,e),r[t].set(!0,e)},[qe.MEDIA_EXIT_PIP_REQUEST](r,e){r["mediaIsPip"].set(!1,e)},[qe.MEDIA_ENTER_FULLSCREEN_REQUEST](r,e){const t="mediaIsFullscreen";r.mediaIsPip.get(e)&&r.mediaIsPip.set(!1,e),r[t].set(!0,e)},[qe.MEDIA_EXIT_FULLSCREEN_REQUEST](r,e){r["mediaIsFullscreen"].set(!1,e)},[qe.MEDIA_ENTER_CAST_REQUEST](r,e){const t="mediaIsCasting";r.mediaIsFullscreen.get(e)&&r.mediaIsFullscreen.set(!1,e),r[t].set(!0,e)},[qe.MEDIA_EXIT_CAST_REQUEST](r,e){r["mediaIsCasting"].set(!1,e)},[qe.MEDIA_AIRPLAY_REQUEST](r,e){r["mediaIsAirplaying"].set(!0,e)}},rat=({media:r,fullscreenElement:e,documentElement:t,stateMediator:n=eE,requestMap:i=tat,options:s={},monitorStateOwnersOnlyWithSubscriptions:a=!0})=>{const o=[],l={options:{...s}};let c=Object.freeze({mediaPreviewTime:void 0,mediaPreviewImage:void 0,mediaPreviewCoords:void 0,mediaPreviewChapter:void 0});const u=g=>{g!=null&&(lM(g,c)||(c=Object.freeze({...c,...g}),o.forEach(y=>y(c))))},d=()=>{const g=Object.entries(n).reduce((y,[b,{get:E}])=>(y[b]=E(l),y),{});u(g)},h={};let f;const m=async(g,y)=>{var b,E,w,A,S,_,C,k,D,I,L,M,F,U,W,j;const z=!!f;if(f={...l,...f??{},...g},z)return;await eat(...Object.values(g));const Q=o.length>0&&y===0&&a,V=l.media!==f.media,Y=((b=l.media)==null?void 0:b.textTracks)!==((E=f.media)==null?void 0:E.textTracks),J=((w=l.media)==null?void 0:w.videoRenditions)!==((A=f.media)==null?void 0:A.videoRenditions),ue=((S=l.media)==null?void 0:S.audioTracks)!==((_=f.media)==null?void 0:_.audioTracks),ne=((C=l.media)==null?void 0:C.remote)!==((k=f.media)==null?void 0:k.remote),ge=l.documentElement!==f.documentElement,ae=!!l.media&&(V||Q),ie=!!((D=l.media)!=null&&D.textTracks)&&(Y||Q),ee=!!((I=l.media)!=null&&I.videoRenditions)&&(J||Q),be=!!((L=l.media)!=null&&L.audioTracks)&&(ue||Q),we=!!((M=l.media)!=null&&M.remote)&&(ne||Q),Re=!!l.documentElement&&(ge||Q),Oe=ae||ie||ee||be||we||Re,me=o.length===0&&y===1&&a,Ue=!!f.media&&(V||me),Se=!!((F=f.media)!=null&&F.textTracks)&&(Y||me),et=!!((U=f.media)!=null&&U.videoRenditions)&&(J||me),Qt=!!((W=f.media)!=null&&W.audioTracks)&&(ue||me),Ut=!!((j=f.media)!=null&&j.remote)&&(ne||me),Wi=!!f.documentElement&&(ge||me),ya=Ue||Se||et||Qt||Ut||Wi;if(!(Oe||ya)){Object.entries(f).forEach(([tt,Lr])=>{l[tt]=Lr}),d(),f=void 0;return}Object.entries(n).forEach(([tt,{get:Lr,mediaEvents:Fs=[],textTracksEvents:ko=[],videoRenditionsEvents:Vi=[],audioTracksEvents:Io=[],remoteEvents:bi=[],rootEvents:vr=[],stateOwnersUpdateHandlers:eu=[]}])=>{h[tt]||(h[tt]={});const Ce=ct=>{const _t=Lr(l,ct);u({[tt]:_t})};let Ne;Ne=h[tt].mediaEvents,Fs.forEach(ct=>{Ne&&ae&&(l.media.removeEventListener(ct,Ne),h[tt].mediaEvents=void 0),Ue&&(f.media.addEventListener(ct,Ce),h[tt].mediaEvents=Ce)}),Ne=h[tt].textTracksEvents,ko.forEach(ct=>{var _t,Xt;Ne&&ie&&((_t=l.media.textTracks)==null||_t.removeEventListener(ct,Ne),h[tt].textTracksEvents=void 0),Se&&((Xt=f.media.textTracks)==null||Xt.addEventListener(ct,Ce),h[tt].textTracksEvents=Ce)}),Ne=h[tt].videoRenditionsEvents,Vi.forEach(ct=>{var _t,Xt;Ne&&ee&&((_t=l.media.videoRenditions)==null||_t.removeEventListener(ct,Ne),h[tt].videoRenditionsEvents=void 0),et&&((Xt=f.media.videoRenditions)==null||Xt.addEventListener(ct,Ce),h[tt].videoRenditionsEvents=Ce)}),Ne=h[tt].audioTracksEvents,Io.forEach(ct=>{var _t,Xt;Ne&&be&&((_t=l.media.audioTracks)==null||_t.removeEventListener(ct,Ne),h[tt].audioTracksEvents=void 0),Qt&&((Xt=f.media.audioTracks)==null||Xt.addEventListener(ct,Ce),h[tt].audioTracksEvents=Ce)}),Ne=h[tt].remoteEvents,bi.forEach(ct=>{var _t,Xt;Ne&&we&&((_t=l.media.remote)==null||_t.removeEventListener(ct,Ne),h[tt].remoteEvents=void 0),Ut&&((Xt=f.media.remote)==null||Xt.addEventListener(ct,Ce),h[tt].remoteEvents=Ce)}),Ne=h[tt].rootEvents,vr.forEach(ct=>{Ne&&Re&&(l.documentElement.removeEventListener(ct,Ne),h[tt].rootEvents=void 0),Wi&&(f.documentElement.addEventListener(ct,Ce),h[tt].rootEvents=Ce)});const vt=h[tt].stateOwnersUpdateHandlers;eu.forEach(ct=>{vt&&Oe&&vt(),ya&&(h[tt].stateOwnersUpdateHandlers=ct(Ce,f))})}),Object.entries(f).forEach(([tt,Lr])=>{l[tt]=Lr}),d(),f=void 0};return m({media:r,fullscreenElement:e,documentElement:t,options:s}),{dispatch(g){const{type:y,detail:b}=g;if(i[y]){u(i[y](n,l,g));return}y==="mediaelementchangerequest"?m({media:b}):y==="fullscreenelementchangerequest"?m({fullscreenElement:b}):y==="documentelementchangerequest"?m({documentElement:b}):y==="optionschangerequest"&&Object.entries(b??{}).forEach(([E,w])=>{l.options[E]=w})},getState(){return c},subscribe(g){return m({},o.length+1),o.push(g),g(c),()=>{const y=o.indexOf(g);y>=0&&(m({},o.length-1),o.splice(y,1))}}}};var nat=rat,cM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},At=(r,e,t)=>(cM(r,e,"read from private field"),t?t.call(r):e.get(r)),jo=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Gl=(r,e,t,n)=>(cM(r,e,"write to private field"),e.set(r,t),t),dc=(r,e,t)=>(cM(r,e,"access private method"),t),hc,lg,hr,cg,Da,tE,rE,iD,Tp,Z0,nE,sD;const fte=["ArrowLeft","ArrowRight","Enter"," ","f","m","k","c"],CU=10,Dt={DEFAULT_SUBTITLES:"defaultsubtitles",DEFAULT_STREAM_TYPE:"defaultstreamtype",DEFAULT_DURATION:"defaultduration",FULLSCREEN_ELEMENT:"fullscreenelement",HOTKEYS:"hotkeys",KEYS_USED:"keysused",LIVE_EDGE_OFFSET:"liveedgeoffset",NO_HOTKEYS:"nohotkeys",NO_VOLUME_PREF:"novolumepref",NO_SUBTITLES_LANG_PREF:"nosubtitleslangpref",NO_DEFAULT_STORE:"nodefaultstore",KEYBOARD_FORWARD_SEEK_OFFSET:"keyboardforwardseekoffset",KEYBOARD_BACKWARD_SEEK_OFFSET:"keyboardbackwardseekoffset"};class pte extends nte{constructor(){super(),jo(this,rE),jo(this,Tp),jo(this,nE),this.mediaStateReceivers=[],this.associatedElementSubscriptions=new Map,jo(this,hc,new _S(this,Dt.HOTKEYS)),jo(this,lg,void 0),jo(this,hr,void 0),jo(this,cg,void 0),jo(this,Da,void 0),jo(this,tE,t=>{var n;(n=At(this,hr))==null||n.dispatch(t)}),this.associateElement(this);let e={};Gl(this,cg,t=>{Object.entries(t).forEach(([n,i])=>{if(n in e&&e[n]===i)return;this.propagateMediaState(n,i);const s=n.toLowerCase(),a=new se.CustomEvent(ust[s],{composed:!0,detail:i});this.dispatchEvent(a)}),e=t}),this.enableHotkeys()}static get observedAttributes(){return super.observedAttributes.concat(Dt.NO_HOTKEYS,Dt.HOTKEYS,Dt.DEFAULT_STREAM_TYPE,Dt.DEFAULT_SUBTITLES,Dt.DEFAULT_DURATION)}get mediaStore(){return At(this,hr)}set mediaStore(e){var t,n;if(At(this,hr)&&((t=At(this,Da))==null||t.call(this),Gl(this,Da,void 0)),Gl(this,hr,e),!At(this,hr)&&!this.hasAttribute(Dt.NO_DEFAULT_STORE)){dc(this,rE,iD).call(this);return}Gl(this,Da,(n=At(this,hr))==null?void 0:n.subscribe(At(this,cg)))}get fullscreenElement(){var e;return(e=At(this,lg))!=null?e:this}set fullscreenElement(e){var t;this.hasAttribute(Dt.FULLSCREEN_ELEMENT)&&this.removeAttribute(Dt.FULLSCREEN_ELEMENT),Gl(this,lg,e),(t=At(this,hr))==null||t.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}attributeChangedCallback(e,t,n){var i,s,a,o,l,c;if(super.attributeChangedCallback(e,t,n),e===Dt.NO_HOTKEYS)n!==t&&n===""?(this.hasAttribute(Dt.HOTKEYS)&&console.warn("Media Chrome: Both `hotkeys` and `nohotkeys` have been set. All hotkeys will be disabled."),this.disableHotkeys()):n!==t&&n===null&&this.enableHotkeys();else if(e===Dt.HOTKEYS)At(this,hc).value=n;else if(e===Dt.DEFAULT_SUBTITLES&&n!==t)(i=At(this,hr))==null||i.dispatch({type:"optionschangerequest",detail:{defaultSubtitles:this.hasAttribute(Dt.DEFAULT_SUBTITLES)}});else if(e===Dt.DEFAULT_STREAM_TYPE)(a=At(this,hr))==null||a.dispatch({type:"optionschangerequest",detail:{defaultStreamType:(s=this.getAttribute(Dt.DEFAULT_STREAM_TYPE))!=null?s:void 0}});else if(e===Dt.LIVE_EDGE_OFFSET)(o=At(this,hr))==null||o.dispatch({type:"optionschangerequest",detail:{liveEdgeOffset:this.hasAttribute(Dt.LIVE_EDGE_OFFSET)?+this.getAttribute(Dt.LIVE_EDGE_OFFSET):void 0}});else if(e===Dt.FULLSCREEN_ELEMENT){const u=n?(l=this.getRootNode())==null?void 0:l.getElementById(n):void 0;Gl(this,lg,u),(c=At(this,hr))==null||c.dispatch({type:"fullscreenelementchangerequest",detail:this.fullscreenElement})}}connectedCallback(){var e,t;!At(this,hr)&&!this.hasAttribute(Dt.NO_DEFAULT_STORE)&&dc(this,rE,iD).call(this),(e=At(this,hr))==null||e.dispatch({type:"documentelementchangerequest",detail:Ze}),super.connectedCallback(),At(this,hr)&&!At(this,Da)&&Gl(this,Da,(t=At(this,hr))==null?void 0:t.subscribe(At(this,cg))),this.enableHotkeys()}disconnectedCallback(){var e,t,n,i;(e=super.disconnectedCallback)==null||e.call(this),At(this,hr)&&((t=At(this,hr))==null||t.dispatch({type:"documentelementchangerequest",detail:void 0}),(n=At(this,hr))==null||n.dispatch({type:qe.MEDIA_TOGGLE_SUBTITLES_REQUEST,detail:!1})),At(this,Da)&&((i=At(this,Da))==null||i.call(this),Gl(this,Da,void 0))}mediaSetCallback(e){var t;super.mediaSetCallback(e),(t=At(this,hr))==null||t.dispatch({type:"mediaelementchangerequest",detail:e}),e.hasAttribute("tabindex")||(e.tabIndex=-1)}mediaUnsetCallback(e){var t;super.mediaUnsetCallback(e),(t=At(this,hr))==null||t.dispatch({type:"mediaelementchangerequest",detail:void 0})}propagateMediaState(e,t){IU(this.mediaStateReceivers,e,t)}associateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(t.has(e))return;const n=this.registerMediaStateReceiver.bind(this),i=this.unregisterMediaStateReceiver.bind(this),s=cat(e,n,i);Object.values(qe).forEach(a=>{e.addEventListener(a,At(this,tE))}),t.set(e,s)}unassociateElement(e){if(!e)return;const{associatedElementSubscriptions:t}=this;if(!t.has(e))return;t.get(e)(),t.delete(e),Object.values(qe).forEach(i=>{e.removeEventListener(i,At(this,tE))})}registerMediaStateReceiver(e){if(!e)return;const t=this.mediaStateReceivers;t.indexOf(e)>-1||(t.push(e),At(this,hr)&&Object.entries(At(this,hr).getState()).forEach(([i,s])=>{IU([e],i,s)}))}unregisterMediaStateReceiver(e){const t=this.mediaStateReceivers,n=t.indexOf(e);n<0||t.splice(n,1)}enableHotkeys(){this.addEventListener("keydown",dc(this,nE,sD))}disableHotkeys(){this.removeEventListener("keydown",dc(this,nE,sD)),this.removeEventListener("keyup",dc(this,Tp,Z0))}get hotkeys(){return At(this,hc)}keyboardShortcutHandler(e){var t,n,i,s,a;const o=e.target;if(((i=(n=(t=o.getAttribute(Dt.KEYS_USED))==null?void 0:t.split(" "))!=null?n:o?.keysUsed)!=null?i:[]).map(h=>h==="Space"?" ":h).filter(Boolean).includes(e.key))return;let c,u,d;if(!At(this,hc).contains(`no${e.key.toLowerCase()}`)&&!(e.key===" "&&At(this,hc).contains("nospace")))switch(e.key){case" ":case"k":c=At(this,hr).getState().mediaPaused?qe.MEDIA_PLAY_REQUEST:qe.MEDIA_PAUSE_REQUEST,this.dispatchEvent(new se.CustomEvent(c,{composed:!0,bubbles:!0}));break;case"m":c=this.mediaStore.getState().mediaVolumeLevel==="off"?qe.MEDIA_UNMUTE_REQUEST:qe.MEDIA_MUTE_REQUEST,this.dispatchEvent(new se.CustomEvent(c,{composed:!0,bubbles:!0}));break;case"f":c=this.mediaStore.getState().mediaIsFullscreen?qe.MEDIA_EXIT_FULLSCREEN_REQUEST:qe.MEDIA_ENTER_FULLSCREEN_REQUEST,this.dispatchEvent(new se.CustomEvent(c,{composed:!0,bubbles:!0}));break;case"c":this.dispatchEvent(new se.CustomEvent(qe.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}));break;case"ArrowLeft":{const h=this.hasAttribute(Dt.KEYBOARD_BACKWARD_SEEK_OFFSET)?+this.getAttribute(Dt.KEYBOARD_BACKWARD_SEEK_OFFSET):CU;u=Math.max(((s=this.mediaStore.getState().mediaCurrentTime)!=null?s:0)-h,0),d=new se.CustomEvent(qe.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:u}),this.dispatchEvent(d);break}case"ArrowRight":{const h=this.hasAttribute(Dt.KEYBOARD_FORWARD_SEEK_OFFSET)?+this.getAttribute(Dt.KEYBOARD_FORWARD_SEEK_OFFSET):CU;u=Math.max(((a=this.mediaStore.getState().mediaCurrentTime)!=null?a:0)+h,0),d=new se.CustomEvent(qe.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:u}),this.dispatchEvent(d);break}}}}hc=new WeakMap;lg=new WeakMap;hr=new WeakMap;cg=new WeakMap;Da=new WeakMap;tE=new WeakMap;rE=new WeakSet;iD=function(){var r;this.mediaStore=nat({media:this.media,fullscreenElement:this.fullscreenElement,options:{defaultSubtitles:this.hasAttribute(Dt.DEFAULT_SUBTITLES),defaultDuration:this.hasAttribute(Dt.DEFAULT_DURATION)?+this.getAttribute(Dt.DEFAULT_DURATION):void 0,defaultStreamType:(r=this.getAttribute(Dt.DEFAULT_STREAM_TYPE))!=null?r:void 0,liveEdgeOffset:this.hasAttribute(Dt.LIVE_EDGE_OFFSET)?+this.getAttribute(Dt.LIVE_EDGE_OFFSET):void 0,noVolumePref:this.hasAttribute(Dt.NO_VOLUME_PREF),noSubtitlesLangPref:this.hasAttribute(Dt.NO_SUBTITLES_LANG_PREF)}})};Tp=new WeakSet;Z0=function(r){const{key:e}=r;if(!fte.includes(e)){this.removeEventListener("keyup",dc(this,Tp,Z0));return}this.keyboardShortcutHandler(r)};nE=new WeakSet;sD=function(r){const{metaKey:e,altKey:t,key:n}=r;if(e||t||!fte.includes(n)){this.removeEventListener("keyup",dc(this,Tp,Z0));return}[" ","ArrowLeft","ArrowRight"].includes(n)&&!(At(this,hc).contains(`no${n.toLowerCase()}`)||n===" "&&At(this,hc).contains("nospace"))&&r.preventDefault(),this.addEventListener("keyup",dc(this,Tp,Z0),{once:!0})};const iat=Object.values(H),sat=Object.values(Fee),mte=r=>{var e,t,n,i;let{observedAttributes:s}=r.constructor;!s&&((e=r.nodeName)!=null&&e.includes("-"))&&(se.customElements.upgrade(r),{observedAttributes:s}=r.constructor);const a=(i=(n=(t=r?.getAttribute)==null?void 0:t.call(r,Yt.MEDIA_CHROME_ATTRIBUTES))==null?void 0:n.split)==null?void 0:i.call(n,/\s+/);return Array.isArray(s||a)?(s||a).filter(o=>iat.includes(o)):[]},aat=r=>{var e,t;return(e=r.nodeName)!=null&&e.includes("-")&&se.customElements.get((t=r.nodeName)==null?void 0:t.toLowerCase())&&!(r instanceof se.customElements.get(r.nodeName.toLowerCase()))&&se.customElements.upgrade(r),sat.some(n=>n in r)},aD=r=>aat(r)||!!mte(r).length,RU=r=>{var e;return(e=r?.join)==null?void 0:e.call(r,":")},kU={[H.MEDIA_SUBTITLES_LIST]:X0,[H.MEDIA_SUBTITLES_SHOWING]:X0,[H.MEDIA_SEEKABLE]:RU,[H.MEDIA_BUFFERED]:r=>r?.map(RU).join(" "),[H.MEDIA_PREVIEW_COORDS]:r=>r?.join(" "),[H.MEDIA_RENDITION_LIST]:hst,[H.MEDIA_AUDIO_TRACK_LIST]:gst},oat=async(r,e,t)=>{var n,i;if(r.isConnected||await Wee(0),typeof t=="boolean"||t==null)return $n(r,e,t);if(typeof t=="number")return hn(r,e,t);if(typeof t=="string")return pn(r,e,t);if(Array.isArray(t)&&!t.length)return r.removeAttribute(e);const s=(i=(n=kU[e])==null?void 0:n.call(kU,t))!=null?i:t;return r.setAttribute(e,s)},lat=r=>{var e;return!!((e=r.closest)!=null&&e.call(r,'*[slot="media"]'))},Cu=(r,e)=>{if(lat(r))return;const t=(i,s)=>{var a,o;aD(i)&&s(i);const{children:l=[]}=i??{},c=(o=(a=i?.shadowRoot)==null?void 0:a.children)!=null?o:[];[...l,...c].forEach(d=>Cu(d,s))},n=r?.nodeName.toLowerCase();if(n.includes("-")&&!aD(r)){se.customElements.whenDefined(n).then(()=>{t(r,e)});return}t(r,e)},IU=(r,e,t)=>{r.forEach(n=>{if(e in n){n[e]=t;return}const i=mte(n),s=e.toLowerCase();i.includes(s)&&oat(n,s,t)})},cat=(r,e,t)=>{Cu(r,e);const n=u=>{var d;const h=(d=u?.composedPath()[0])!=null?d:u.target;e(h)},i=u=>{var d;const h=(d=u?.composedPath()[0])!=null?d:u.target;t(h)};r.addEventListener(qe.REGISTER_MEDIA_STATE_RECEIVER,n),r.addEventListener(qe.UNREGISTER_MEDIA_STATE_RECEIVER,i);const s=u=>{u.forEach(d=>{const{addedNodes:h=[],removedNodes:f=[],type:m,target:g,attributeName:y}=d;m==="childList"?(Array.prototype.forEach.call(h,b=>Cu(b,e)),Array.prototype.forEach.call(f,b=>Cu(b,t))):m==="attributes"&&y===Yt.MEDIA_CHROME_ATTRIBUTES&&(aD(g)?e(g):t(g))})};let a=[];const o=u=>{const d=u.target;d.name!=="media"&&(a.forEach(h=>Cu(h,t)),a=[...d.assignedElements({flatten:!0})],a.forEach(h=>Cu(h,e)))};r.addEventListener("slotchange",o);const l=new MutationObserver(s);return l.observe(r,{childList:!0,attributes:!0,subtree:!0}),()=>{Cu(r,t),r.removeEventListener("slotchange",o),l.disconnect(),r.removeEventListener(qe.REGISTER_MEDIA_STATE_RECEIVER,n),r.removeEventListener(qe.UNREGISTER_MEDIA_STATE_RECEIVER,i)}};se.customElements.get("media-controller")||se.customElements.define("media-controller",pte);var uat=pte,uM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Gr=(r,e,t)=>(uM(r,e,"read from private field"),t?t.call(r):e.get(r)),Nh=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},r1=(r,e,t,n)=>(uM(r,e,"write to private field"),e.set(r,t),t),dat=(r,e,t)=>(uM(r,e,"access private method"),t),La,Tf,fc,Yh,iE,oD,gte;const n1={TOOLTIP_PLACEMENT:"tooltipplacement"},vte=Ze.createElement("template");vte.innerHTML=`
<style>
  :host {
    position: relative;
    font: var(--media-font,
      var(--media-font-weight, bold)
      var(--media-font-size, 14px) /
      var(--media-text-content-height, var(--media-control-height, 24px))
      var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
    color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
    background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
    padding: var(--media-button-padding, var(--media-control-padding, 10px));
    justify-content: var(--media-button-justify-content, center);
    display: inline-flex;
    align-items: center;
    vertical-align: middle;
    box-sizing: border-box;
    transition: background .15s linear;
    pointer-events: auto;
    cursor: pointer;
    -webkit-tap-highlight-color: transparent;
  }

  
  :host(:focus-visible) {
    box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
    outline: 0;
  }
  
  :host(:where(:focus)) {
    box-shadow: none;
    outline: 0;
  }

  :host(:hover) {
    background: var(--media-control-hover-background, rgba(50 50 70 / .7));
  }

  svg, img, ::slotted(svg), ::slotted(img) {
    width: var(--media-button-icon-width);
    height: var(--media-button-icon-height, var(--media-control-height, 24px));
    transform: var(--media-button-icon-transform);
    transition: var(--media-button-icon-transition);
    fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
    vertical-align: middle;
    max-width: 100%;
    max-height: 100%;
    min-width: 100%;
  }

  media-tooltip {
    
    max-width: 0;
    overflow-x: clip;
    opacity: 0;
    transition: opacity .3s, max-width 0s 9s;
  }

  :host(:hover) media-tooltip,
  :host(:focus-visible) media-tooltip {
    max-width: 100vw;
    opacity: 1;
    transition: opacity .3s;
  }

  :host([notooltip]) slot[name="tooltip"] {
    display: none;
  }
</style>

<slot name="tooltip">
  <media-tooltip part="tooltip" aria-hidden="true">
    <slot name="tooltip-content"></slot>
  </media-tooltip>
</slot>
`;class cs extends se.HTMLElement{constructor(e={}){var t;if(super(),Nh(this,oD),Nh(this,La,void 0),this.preventClick=!1,this.tooltipEl=null,this.tooltipContent="",Nh(this,Tf,n=>{this.preventClick||this.handleClick(n),setTimeout(Gr(this,fc),0)}),Nh(this,fc,()=>{var n,i;(i=(n=this.tooltipEl)==null?void 0:n.updateXOffset)==null||i.call(n)}),Nh(this,Yh,n=>{const{key:i}=n;if(!this.keysUsed.includes(i)){this.removeEventListener("keyup",Gr(this,Yh));return}this.preventClick||this.handleClick(n)}),Nh(this,iE,n=>{const{metaKey:i,altKey:s,key:a}=n;if(i||s||!this.keysUsed.includes(a)){this.removeEventListener("keyup",Gr(this,Yh));return}this.addEventListener("keyup",Gr(this,Yh),{once:!0})}),!this.shadowRoot){this.attachShadow({mode:"open"});const n=vte.content.cloneNode(!0);this.nativeEl=n;let i=e.slotTemplate;i||(i=Ze.createElement("template"),i.innerHTML=`<slot>${e.defaultContent||""}</slot>`),e.tooltipContent&&(n.querySelector('slot[name="tooltip-content"]').innerHTML=(t=e.tooltipContent)!=null?t:"",this.tooltipContent=e.tooltipContent),this.nativeEl.appendChild(i.content.cloneNode(!0)),this.shadowRoot.appendChild(n)}this.tooltipEl=this.shadowRoot.querySelector("media-tooltip")}static get observedAttributes(){return["disabled",n1.TOOLTIP_PLACEMENT,Yt.MEDIA_CONTROLLER]}enable(){this.addEventListener("click",Gr(this,Tf)),this.addEventListener("keydown",Gr(this,iE)),this.tabIndex=0}disable(){this.removeEventListener("click",Gr(this,Tf)),this.removeEventListener("keydown",Gr(this,iE)),this.removeEventListener("keyup",Gr(this,Yh)),this.tabIndex=-1}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===Yt.MEDIA_CONTROLLER?(t&&((s=(i=Gr(this,La))==null?void 0:i.unassociateElement)==null||s.call(i,this),r1(this,La,null)),n&&this.isConnected&&(r1(this,La,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Gr(this,La))==null?void 0:o.associateElement)==null||l.call(o,this))):e==="disabled"&&n!==t?n==null?this.enable():this.disable():e===n1.TOOLTIP_PLACEMENT&&this.tooltipEl&&n!==t&&(this.tooltipEl.placement=n),Gr(this,fc).call(this)}connectedCallback(){var e,t,n;const{style:i}=Yr(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","button");const s=this.getAttribute(Yt.MEDIA_CONTROLLER);s&&(r1(this,La,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(t=Gr(this,La))==null?void 0:t.associateElement)==null||n.call(t,this)),se.customElements.whenDefined("media-tooltip").then(()=>dat(this,oD,gte).call(this))}disconnectedCallback(){var e,t;this.disable(),(t=(e=Gr(this,La))==null?void 0:e.unassociateElement)==null||t.call(e,this),r1(this,La,null),this.removeEventListener("mouseenter",Gr(this,fc)),this.removeEventListener("focus",Gr(this,fc)),this.removeEventListener("click",Gr(this,Tf))}get keysUsed(){return["Enter"," "]}get tooltipPlacement(){return fn(this,n1.TOOLTIP_PLACEMENT)}set tooltipPlacement(e){pn(this,n1.TOOLTIP_PLACEMENT,e)}handleClick(e){}}La=new WeakMap;Tf=new WeakMap;fc=new WeakMap;Yh=new WeakMap;iE=new WeakMap;oD=new WeakSet;gte=function(){this.addEventListener("mouseenter",Gr(this,fc)),this.addEventListener("focus",Gr(this,fc)),this.addEventListener("click",Gr(this,Tf));const r=this.tooltipPlacement;r&&this.tooltipEl&&(this.tooltipEl.placement=r)};se.customElements.get("media-chrome-button")||se.customElements.define("media-chrome-button",cs);const $U=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.13 3H3.87a.87.87 0 0 0-.87.87v13.26a.87.87 0 0 0 .87.87h3.4L9 16H5V5h16v11h-4l1.72 2h3.4a.87.87 0 0 0 .87-.87V3.87a.87.87 0 0 0-.86-.87Zm-8.75 11.44a.5.5 0 0 0-.76 0l-4.91 5.73a.5.5 0 0 0 .38.83h9.82a.501.501 0 0 0 .38-.83l-4.91-5.73Z"/>
</svg>
`,yte=Ze.createElement("template");yte.innerHTML=`
  <style>
    :host([${H.MEDIA_IS_AIRPLAYING}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${H.MEDIA_IS_AIRPLAYING}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${H.MEDIA_IS_AIRPLAYING}]) slot[name=tooltip-enter],
    :host(:not([${H.MEDIA_IS_AIRPLAYING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${$U}</slot>
    <slot name="exit">${$U}</slot>
  </slot>
`;const hat=`
  <slot name="tooltip-enter">${Pr.ENTER_AIRPLAY}</slot>
  <slot name="tooltip-exit">${Pr.EXIT_AIRPLAY}</slot>
`,DU=r=>{const e=r.mediaIsAirplaying?ai.EXIT_AIRPLAY():ai.ENTER_AIRPLAY();r.setAttribute("aria-label",e)};class fat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_IS_AIRPLAYING,H.MEDIA_AIRPLAY_UNAVAILABLE]}constructor(e={}){super({slotTemplate:yte,tooltipContent:hat,...e})}connectedCallback(){super.connectedCallback(),DU(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_IS_AIRPLAYING&&DU(this)}get mediaIsAirplaying(){return In(this,H.MEDIA_IS_AIRPLAYING)}set mediaIsAirplaying(e){$n(this,H.MEDIA_IS_AIRPLAYING,e)}get mediaAirplayUnavailable(){return fn(this,H.MEDIA_AIRPLAY_UNAVAILABLE)}set mediaAirplayUnavailable(e){pn(this,H.MEDIA_AIRPLAY_UNAVAILABLE,e)}handleClick(){const e=new se.CustomEvent(qe.MEDIA_AIRPLAY_REQUEST,{composed:!0,bubbles:!0});this.dispatchEvent(e)}}se.customElements.get("media-airplay-button")||se.customElements.define("media-airplay-button",fat);const pat=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,mat=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,bte=Ze.createElement("template");bte.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-checked="true"]) slot[name=tooltip-enable],
    :host(:not([aria-checked="true"])) slot[name=tooltip-disable] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${pat}</slot>
    <slot name="off">${mat}</slot>
  </slot>
`;const gat=`
  <slot name="tooltip-enable">${Pr.ENABLE_CAPTIONS}</slot>
  <slot name="tooltip-disable">${Pr.DISABLE_CAPTIONS}</slot>
`,LU=r=>{r.setAttribute("aria-checked",lte(r).toString())};class vat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_SUBTITLES_LIST,H.MEDIA_SUBTITLES_SHOWING]}constructor(e={}){super({slotTemplate:bte,tooltipContent:gat,...e}),this._captionsReady=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","switch"),this.setAttribute("aria-label",as.CLOSED_CAPTIONS()),LU(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_SUBTITLES_SHOWING&&LU(this)}get mediaSubtitlesList(){return OU(this,H.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){PU(this,H.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return OU(this,H.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){PU(this,H.MEDIA_SUBTITLES_SHOWING,e)}handleClick(){this.dispatchEvent(new se.CustomEvent(qe.MEDIA_TOGGLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0}))}}const OU=(r,e)=>{const t=r.getAttribute(e);return t?CS(t):[]},PU=(r,e,t)=>{if(!t?.length){r.removeAttribute(e);return}const n=X0(t);r.getAttribute(e)!==n&&r.setAttribute(e,n)};se.customElements.get("media-captions-button")||se.customElements.define("media-captions-button",vat);const yat='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/></g></svg>',bat='<svg aria-hidden="true" viewBox="0 0 24 24"><g><path class="cast_caf_icon_arch0" d="M1,18 L1,21 L4,21 C4,19.3 2.66,18 1,18 L1,18 Z"/><path class="cast_caf_icon_arch1" d="M1,14 L1,16 C3.76,16 6,18.2 6,21 L8,21 C8,17.13 4.87,14 1,14 L1,14 Z"/><path class="cast_caf_icon_arch2" d="M1,10 L1,12 C5.97,12 10,16.0 10,21 L12,21 C12,14.92 7.07,10 1,10 L1,10 Z"/><path class="cast_caf_icon_box" d="M21,3 L3,3 C1.9,3 1,3.9 1,5 L1,8 L3,8 L3,5 L21,5 L21,19 L14,19 L14,21 L21,21 C22.1,21 23,20.1 23,19 L23,5 C23,3.9 22.1,3 21,3 L21,3 Z"/><path class="cast_caf_icon_boxfill" d="M5,7 L5,8.63 C8,8.6 13.37,14 13.37,17 L19,17 L19,7 Z"/></g></svg>',Ete=Ze.createElement("template");Ete.innerHTML=`
  <style>
  :host([${H.MEDIA_IS_CASTING}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${H.MEDIA_IS_CASTING}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${H.MEDIA_IS_CASTING}]) slot[name=tooltip-enter],
    :host(:not([${H.MEDIA_IS_CASTING}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${yat}</slot>
    <slot name="exit">${bat}</slot>
  </slot>
`;const Eat=`
  <slot name="tooltip-enter">${Pr.START_CAST}</slot>
  <slot name="tooltip-exit">${Pr.STOP_CAST}</slot>
`,MU=r=>{const e=r.mediaIsCasting?ai.EXIT_CAST():ai.ENTER_CAST();r.setAttribute("aria-label",e)};class xat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_IS_CASTING,H.MEDIA_CAST_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Ete,tooltipContent:Eat,...e})}connectedCallback(){super.connectedCallback(),MU(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_IS_CASTING&&MU(this)}get mediaIsCasting(){return In(this,H.MEDIA_IS_CASTING)}set mediaIsCasting(e){$n(this,H.MEDIA_IS_CASTING,e)}get mediaCastUnavailable(){return fn(this,H.MEDIA_CAST_UNAVAILABLE)}set mediaCastUnavailable(e){pn(this,H.MEDIA_CAST_UNAVAILABLE,e)}handleClick(){const e=this.mediaIsCasting?qe.MEDIA_EXIT_CAST_REQUEST:qe.MEDIA_ENTER_CAST_REQUEST;this.dispatchEvent(new se.CustomEvent(e,{composed:!0,bubbles:!0}))}}se.customElements.get("media-cast-button")||se.customElements.define("media-cast-button",xat);var dM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Wf=(r,e,t)=>(dM(r,e,"read from private field"),t?t.call(r):e.get(r)),vu=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},xte=(r,e,t,n)=>(dM(r,e,"write to private field"),e.set(r,t),t),Fm=(r,e,t)=>(dM(r,e,"access private method"),t),J0,Bd,lD,wte,cD,Tte,uD,Ste,dD,Ate,hD,_te;const Cte=Ze.createElement("template");Cte.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-dialog-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-dialog-border-radius);
      border: var(--media-dialog-border, none);
      display: var(--media-dialog-display, inline-flex);
      transition: var(--media-dialog-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out
      ) !important;
      
      visibility: var(--media-dialog-visibility, visible);
      opacity: var(--media-dialog-opacity, 1);
      transform: var(--media-dialog-transform-in, translateY(0) scale(1));
    }

    :host([hidden]) {
      transition: var(--media-dialog-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-dialog-hidden-visibility, hidden);
      opacity: var(--media-dialog-hidden-opacity, 0);
      transform: var(--media-dialog-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }
  </style>
  <slot></slot>
`;const IR={HIDDEN:"hidden",ANCHOR:"anchor"};class Rte extends se.HTMLElement{constructor(){super(),vu(this,lD),vu(this,cD),vu(this,uD),vu(this,dD),vu(this,hD),vu(this,J0,null),vu(this,Bd,null),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.addEventListener("invoke",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this)}static get observedAttributes(){return[IR.HIDDEN,IR.ANCHOR]}handleEvent(e){switch(e.type){case"invoke":Fm(this,uD,Ste).call(this,e);break;case"focusout":Fm(this,dD,Ate).call(this,e);break;case"keydown":Fm(this,hD,_te).call(this,e);break}}connectedCallback(){this.role||(this.role="dialog")}attributeChangedCallback(e,t,n){e===IR.HIDDEN&&n!==t&&(this.hidden?Fm(this,cD,Tte).call(this):Fm(this,lD,wte).call(this))}focus(){xte(this,J0,iM());const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e?.focus()}get keysUsed(){return["Escape","Tab"]}}J0=new WeakMap;Bd=new WeakMap;lD=new WeakSet;wte=function(){var r;(r=Wf(this,Bd))==null||r.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0})};cD=new WeakSet;Tte=function(){var r;(r=Wf(this,Bd))==null||r.setAttribute("aria-expanded","false")};uD=new WeakSet;Ste=function(r){xte(this,Bd,r.relatedTarget),Rl(this,r.relatedTarget)||(this.hidden=!this.hidden)};dD=new WeakSet;Ate=function(r){var e;Rl(this,r.relatedTarget)||((e=Wf(this,J0))==null||e.focus(),Wf(this,Bd)&&Wf(this,Bd)!==r.relatedTarget&&!this.hidden&&(this.hidden=!0))};hD=new WeakSet;_te=function(r){var e,t,n,i,s;const{key:a,ctrlKey:o,altKey:l,metaKey:c}=r;o||l||c||this.keysUsed.includes(a)&&(r.preventDefault(),r.stopPropagation(),a==="Tab"?(r.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()):a==="Escape"&&((s=Wf(this,J0))==null||s.focus(),this.hidden=!0))};Rte.template=Cte;se.customElements.get("media-chrome-dialog")||se.customElements.define("media-chrome-dialog",Rte);var hM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Rr=(r,e,t)=>(hM(r,e,"read from private field"),t?t.call(r):e.get(r)),Fn=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Yl=(r,e,t,n)=>(hM(r,e,"write to private field"),e.set(r,t),t),Qs=(r,e,t)=>(hM(r,e,"access private method"),t),Oa,kS,sE,aE,Xs,Lw,oE,lE,cE,fM,kte,uE,fD,dE,pD,Ow,pM,mD,Ite,gD,$te,vD,Dte,yD,Lte;const Ote=Ze.createElement("template");Ote.innerHTML=`
  <style>
    :host {
      --_focus-box-shadow: var(--media-focus-box-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      --_media-range-padding: var(--media-range-padding, var(--media-control-padding, 10px));

      box-shadow: var(--_focus-visible-box-shadow, none);
      background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      height: calc(var(--media-control-height, 24px) + 2 * var(--_media-range-padding));
      display: inline-flex;
      align-items: center;
      
      vertical-align: middle;
      box-sizing: border-box;
      position: relative;
      width: 100px;
      transition: background .15s linear;
      cursor: pointer;
      pointer-events: auto;
      touch-action: none; 
      z-index: 1; 
    }

    
    input[type=range]:focus {
      outline: 0;
    }
    input[type=range]:focus::-webkit-slider-runnable-track {
      outline: 0;
    }

    :host(:hover) {
      background: var(--media-control-hover-background, rgb(50 50 70 / .7));
    }

    #leftgap {
      padding-left: var(--media-range-padding-left, var(--_media-range-padding));
    }

    #rightgap {
      padding-right: var(--media-range-padding-right, var(--_media-range-padding));
    }

    #startpoint,
    #endpoint {
      position: absolute;
    }

    #endpoint {
      right: 0;
    }

    #container {
      
      width: var(--media-range-track-width, 100%);
      transform: translate(var(--media-range-track-translate-x, 0px), var(--media-range-track-translate-y, 0px));
      position: relative;
      height: 100%;
      display: flex;
      align-items: center;
      min-width: 40px;
    }

    #range {
      
      display: var(--media-time-range-hover-display, block);
      bottom: var(--media-time-range-hover-bottom, -7px);
      height: var(--media-time-range-hover-height, max(100% + 7px, 25px));
      width: 100%;
      position: absolute;
      cursor: pointer;

      -webkit-appearance: none; 
      -webkit-tap-highlight-color: transparent;
      background: transparent; 
      margin: 0;
      z-index: 1;
    }

    @media (hover: hover) {
      #range {
        bottom: var(--media-time-range-hover-bottom, -5px);
        height: var(--media-time-range-hover-height, max(100% + 5px, 20px));
      }
    }

    
    
    #range::-webkit-slider-thumb {
      -webkit-appearance: none;
      background: transparent;
      width: .1px;
      height: .1px;
    }

    
    #range::-moz-range-thumb {
      background: transparent;
      border: transparent;
      width: .1px;
      height: .1px;
    }

    #appearance {
      height: var(--media-range-track-height, 4px);
      display: flex;
      flex-direction: column;
      justify-content: center;
      width: 100%;
      position: absolute;
      
      will-change: transform;
    }

    #track {
      background: var(--media-range-track-background, rgb(255 255 255 / .2));
      border-radius: var(--media-range-track-border-radius, 1px);
      border: var(--media-range-track-border, none);
      outline: var(--media-range-track-outline);
      outline-offset: var(--media-range-track-outline-offset);
      backdrop-filter: var(--media-range-track-backdrop-filter);
      -webkit-backdrop-filter: var(--media-range-track-backdrop-filter);
      box-shadow: var(--media-range-track-box-shadow, none);
      position: absolute;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #progress,
    #pointer {
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #progress {
      background: var(--media-range-bar-color, var(--media-primary-color, rgb(238 238 238)));
      transition: var(--media-range-track-transition);
    }

    #pointer {
      background: var(--media-range-track-pointer-background);
      border-right: var(--media-range-track-pointer-border-right);
      transition: visibility .25s, opacity .25s;
      visibility: hidden;
      opacity: 0;
    }

    @media (hover: hover) {
      :host(:hover) #pointer {
        transition: visibility .5s, opacity .5s;
        visibility: visible;
        opacity: 1;
      }
    }

    #thumb {
      width: var(--media-range-thumb-width, 10px);
      height: var(--media-range-thumb-height, 10px);
      margin-left: calc(var(--media-range-thumb-width, 10px) / -2);
      border: var(--media-range-thumb-border, none);
      border-radius: var(--media-range-thumb-border-radius, 10px);
      background: var(--media-range-thumb-background, var(--media-primary-color, rgb(238 238 238)));
      box-shadow: var(--media-range-thumb-box-shadow, 1px 1px 1px transparent);
      transition: var(--media-range-thumb-transition);
      transform: var(--media-range-thumb-transform, none);
      opacity: var(--media-range-thumb-opacity, 1);
      position: absolute;
      left: 0;
      cursor: pointer;
    }

    :host([disabled]) #thumb {
      background-color: #777;
    }

    .segments #appearance {
      height: var(--media-range-segment-hover-height, 7px);
    }

    #track {
      clip-path: url(#segments-clipping);
    }

    #segments {
      --segments-gap: var(--media-range-segments-gap, 2px);
      position: absolute;
      width: 100%;
      height: 100%;
    }

    #segments-clipping {
      transform: translateX(calc(var(--segments-gap) / 2));
    }

    #segments-clipping:empty {
      display: none;
    }

    #segments-clipping rect {
      height: var(--media-range-track-height, 4px);
      y: calc((var(--media-range-segment-hover-height, 7px) - var(--media-range-track-height, 4px)) / 2);
      transition: var(--media-range-segment-transition, transform .1s ease-in-out);
      transform: var(--media-range-segment-transform, scaleY(1));
      transform-origin: center;
    }
  </style>
  <div id="leftgap"></div>
  <div id="container">
    <div id="startpoint"></div>
    <div id="endpoint"></div>
    <div id="appearance">
      <div id="track" part="track">
        <div id="pointer"></div>
        <div id="progress" part="progress"></div>
      </div>
      <div id="thumb" part="thumb"></div>
      <svg id="segments"><clipPath id="segments-clipping"></clipPath></svg>
    </div>
    <input id="range" type="range" min="0" max="1" step="any" value="0">
  </div>
  <div id="rightgap"></div>
`;class mM extends se.HTMLElement{constructor(){super(),Fn(this,fM),Fn(this,uE),Fn(this,dE),Fn(this,Ow),Fn(this,mD),Fn(this,gD),Fn(this,vD),Fn(this,yD),Fn(this,Oa,void 0),Fn(this,kS,void 0),Fn(this,sE,void 0),Fn(this,aE,void 0),Fn(this,Xs,{}),Fn(this,Lw,[]),Fn(this,oE,()=>{if(this.range.matches(":focus-visible")){const{style:e}=Yr(this.shadowRoot,":host");e.setProperty("--_focus-visible-box-shadow","var(--_focus-box-shadow)")}}),Fn(this,lE,()=>{const{style:e}=Yr(this.shadowRoot,":host");e.removeProperty("--_focus-visible-box-shadow")}),Fn(this,cE,()=>{const e=this.shadowRoot.querySelector("#segments-clipping");e&&e.parentNode.append(e)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Ote.content.cloneNode(!0))),this.container=this.shadowRoot.querySelector("#container"),Yl(this,sE,this.shadowRoot.querySelector("#startpoint")),Yl(this,aE,this.shadowRoot.querySelector("#endpoint")),this.range=this.shadowRoot.querySelector("#range"),this.appearance=this.shadowRoot.querySelector("#appearance")}static get observedAttributes(){return["disabled","aria-disabled",Yt.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===Yt.MEDIA_CONTROLLER?(t&&((s=(i=Rr(this,Oa))==null?void 0:i.unassociateElement)==null||s.call(i,this),Yl(this,Oa,null)),n&&this.isConnected&&(Yl(this,Oa,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Rr(this,Oa))==null?void 0:o.associateElement)==null||l.call(o,this))):(e==="disabled"||e==="aria-disabled"&&t!==n)&&(n==null?(this.range.removeAttribute(e),Qs(this,uE,fD).call(this)):(this.range.setAttribute(e,n),Qs(this,dE,pD).call(this)))}connectedCallback(){var e,t,n;const{style:i}=Yr(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`),Rr(this,Xs).pointer=Yr(this.shadowRoot,"#pointer"),Rr(this,Xs).progress=Yr(this.shadowRoot,"#progress"),Rr(this,Xs).thumb=Yr(this.shadowRoot,"#thumb"),Rr(this,Xs).activeSegment=Yr(this.shadowRoot,"#segments-clipping rect:nth-child(0)");const s=this.getAttribute(Yt.MEDIA_CONTROLLER);s&&(Yl(this,Oa,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(t=Rr(this,Oa))==null?void 0:t.associateElement)==null||n.call(t,this)),this.updateBar(),this.shadowRoot.addEventListener("focusin",Rr(this,oE)),this.shadowRoot.addEventListener("focusout",Rr(this,lE)),Qs(this,uE,fD).call(this),xp(this.container,Rr(this,cE))}disconnectedCallback(){var e,t;Qs(this,dE,pD).call(this),(t=(e=Rr(this,Oa))==null?void 0:e.unassociateElement)==null||t.call(e,this),Yl(this,Oa,null),this.shadowRoot.removeEventListener("focusin",Rr(this,oE)),this.shadowRoot.removeEventListener("focusout",Rr(this,lE)),K0(this.container,Rr(this,cE))}updatePointerBar(e){var t;(t=Rr(this,Xs).pointer)==null||t.style.setProperty("width",`${this.getPointerRatio(e)*100}%`)}updateBar(){var e,t;const n=this.range.valueAsNumber*100;(e=Rr(this,Xs).progress)==null||e.style.setProperty("width",`${n}%`),(t=Rr(this,Xs).thumb)==null||t.style.setProperty("left",`${n}%`)}updateSegments(e){const t=this.shadowRoot.querySelector("#segments-clipping");if(t.textContent="",this.container.classList.toggle("segments",!!e?.length),!e?.length)return;const n=[...new Set([+this.range.min,...e.flatMap(s=>[s.start,s.end]),+this.range.max])];Yl(this,Lw,[...n]);const i=n.pop();for(const[s,a]of n.entries()){const[o,l]=[s===0,s===n.length-1],c=o?"calc(var(--segments-gap) / -1)":`${a*100}%`,d=`calc(${((l?i:n[s+1])-a)*100}%${o||l?"":" - var(--segments-gap)"})`,h=Ze.createElementNS("http://www.w3.org/2000/svg","rect"),f=Yr(this.shadowRoot,`#segments-clipping rect:nth-child(${s+1})`);f.style.setProperty("x",c),f.style.setProperty("width",d),t.append(h)}}getPointerRatio(e){const t=Sst(e.clientX,e.clientY,Rr(this,sE).getBoundingClientRect(),Rr(this,aE).getBoundingClientRect());return Math.max(0,Math.min(1,t))}get dragging(){return this.hasAttribute("dragging")}handleEvent(e){switch(e.type){case"pointermove":Qs(this,yD,Lte).call(this,e);break;case"input":this.updateBar();break;case"pointerenter":Qs(this,mD,Ite).call(this,e);break;case"pointerdown":Qs(this,Ow,pM).call(this,e);break;case"pointerup":Qs(this,gD,$te).call(this);break;case"pointerleave":Qs(this,vD,Dte).call(this);break}}get keysUsed(){return["ArrowUp","ArrowRight","ArrowDown","ArrowLeft"]}}Oa=new WeakMap;kS=new WeakMap;sE=new WeakMap;aE=new WeakMap;Xs=new WeakMap;Lw=new WeakMap;oE=new WeakMap;lE=new WeakMap;cE=new WeakMap;fM=new WeakSet;kte=function(r){const e=Rr(this,Xs).activeSegment;if(!e)return;const t=this.getPointerRatio(r),i=`#segments-clipping rect:nth-child(${Rr(this,Lw).findIndex((s,a,o)=>{const l=o[a+1];return l!=null&&t>=s&&t<=l})+1})`;(e.selectorText!=i||!e.style.transform)&&(e.selectorText=i,e.style.setProperty("transform","var(--media-range-segment-hover-transform, scaleY(2))"))};uE=new WeakSet;fD=function(){this.hasAttribute("disabled")||(this.addEventListener("input",this),this.addEventListener("pointerdown",this),this.addEventListener("pointerenter",this))};dE=new WeakSet;pD=function(){var r,e;this.removeEventListener("input",this),this.removeEventListener("pointerdown",this),this.removeEventListener("pointerenter",this),(r=se.window)==null||r.removeEventListener("pointerup",this),(e=se.window)==null||e.removeEventListener("pointermove",this)};Ow=new WeakSet;pM=function(r){var e;Yl(this,kS,r.composedPath().includes(this.range)),(e=se.window)==null||e.addEventListener("pointerup",this)};mD=new WeakSet;Ite=function(r){var e;r.pointerType!=="mouse"&&Qs(this,Ow,pM).call(this,r),this.addEventListener("pointerleave",this),(e=se.window)==null||e.addEventListener("pointermove",this)};gD=new WeakSet;$te=function(){var r;(r=se.window)==null||r.removeEventListener("pointerup",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled")};vD=new WeakSet;Dte=function(){var r,e;this.removeEventListener("pointerleave",this),(r=se.window)==null||r.removeEventListener("pointermove",this),this.toggleAttribute("dragging",!1),this.range.disabled=this.hasAttribute("disabled"),(e=Rr(this,Xs).activeSegment)==null||e.style.removeProperty("transform")};yD=new WeakSet;Lte=function(r){this.toggleAttribute("dragging",r.buttons===1||r.pointerType!=="mouse"),this.updatePointerBar(r),Qs(this,fM,kte).call(this,r),this.dragging&&(r.pointerType!=="mouse"||!Rr(this,kS))&&(this.range.disabled=!0,this.range.valueAsNumber=this.getPointerRatio(r),this.range.dispatchEvent(new Event("input",{bubbles:!0,composed:!0})))};se.customElements.get("media-chrome-range")||se.customElements.define("media-chrome-range",mM);var Pte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},i1=(r,e,t)=>(Pte(r,e,"read from private field"),t?t.call(r):e.get(r)),wat=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},s1=(r,e,t,n)=>(Pte(r,e,"write to private field"),e.set(r,t),t),Pa;const Mte=Ze.createElement("template");Mte.innerHTML=`
  <style>
    :host {
      
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-control-bar-display, inline-flex));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      --media-loading-indicator-icon-height: 44px;
    }

    ::slotted(media-time-range),
    ::slotted(media-volume-range) {
      min-height: 100%;
    }

    ::slotted(media-time-range),
    ::slotted(media-clip-selector) {
      flex-grow: 1;
    }

    ::slotted([role="menu"]) {
      position: absolute;
    }
  </style>

  <slot></slot>
`;class Tat extends se.HTMLElement{constructor(){super(),wat(this,Pa,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Mte.content.cloneNode(!0)))}static get observedAttributes(){return[Yt.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===Yt.MEDIA_CONTROLLER&&(t&&((s=(i=i1(this,Pa))==null?void 0:i.unassociateElement)==null||s.call(i,this),s1(this,Pa,null)),n&&this.isConnected&&(s1(this,Pa,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=i1(this,Pa))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Yt.MEDIA_CONTROLLER);i&&(s1(this,Pa,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(t=i1(this,Pa))==null?void 0:t.associateElement)==null||n.call(t,this))}disconnectedCallback(){var e,t;(t=(e=i1(this,Pa))==null?void 0:e.unassociateElement)==null||t.call(e,this),s1(this,Pa,null)}}Pa=new WeakMap;se.customElements.get("media-control-bar")||se.customElements.define("media-control-bar",Tat);var Nte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},a1=(r,e,t)=>(Nte(r,e,"read from private field"),t?t.call(r):e.get(r)),Sat=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},o1=(r,e,t,n)=>(Nte(r,e,"write to private field"),e.set(r,t),t),Ma;const Fte=Ze.createElement("template");Fte.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-text-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7))));
      padding: var(--media-control-padding, 10px);
      display: inline-flex;
      justify-content: center;
      align-items: center;
      vertical-align: middle;
      box-sizing: border-box;
      text-align: center;
      pointer-events: auto;
    }

    
    :host(:focus-visible) {
      box-shadow: inset 0 0 0 2px rgb(27 127 204 / .9);
      outline: 0;
    }

    
    :host(:where(:focus)) {
      box-shadow: none;
      outline: 0;
    }
  </style>
  <slot></slot>
`;class Qv extends se.HTMLElement{constructor(){super(),Sat(this,Ma,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Fte.content.cloneNode(!0)))}static get observedAttributes(){return[Yt.MEDIA_CONTROLLER]}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===Yt.MEDIA_CONTROLLER&&(t&&((s=(i=a1(this,Ma))==null?void 0:i.unassociateElement)==null||s.call(i,this),o1(this,Ma,null)),n&&this.isConnected&&(o1(this,Ma,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=a1(this,Ma))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,n;const{style:i}=Yr(this.shadowRoot,":host");i.setProperty("display",`var(--media-control-display, var(--${this.localName}-display, inline-flex))`);const s=this.getAttribute(Yt.MEDIA_CONTROLLER);s&&(o1(this,Ma,(e=this.getRootNode())==null?void 0:e.getElementById(s)),(n=(t=a1(this,Ma))==null?void 0:t.associateElement)==null||n.call(t,this))}disconnectedCallback(){var e,t;(t=(e=a1(this,Ma))==null?void 0:e.unassociateElement)==null||t.call(e,this),o1(this,Ma,null)}}Ma=new WeakMap;se.customElements.get("media-text-display")||se.customElements.define("media-text-display",Qv);var Bte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},NU=(r,e,t)=>(Bte(r,e,"read from private field"),t?t.call(r):e.get(r)),Aat=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},_at=(r,e,t,n)=>(Bte(r,e,"write to private field"),e.set(r,t),t),ug;class Cat extends Qv{constructor(){super(),Aat(this,ug,void 0),_at(this,ug,this.shadowRoot.querySelector("slot")),NU(this,ug).textContent=Ed(0)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_DURATION]}attributeChangedCallback(e,t,n){e===H.MEDIA_DURATION&&(NU(this,ug).textContent=Ed(+n)),super.attributeChangedCallback(e,t,n)}get mediaDuration(){return $r(this,H.MEDIA_DURATION)}set mediaDuration(e){hn(this,H.MEDIA_DURATION,e)}}ug=new WeakMap;se.customElements.get("media-duration-display")||se.customElements.define("media-duration-display",Cat);const Rat=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M16 3v2.5h3.5V9H22V3h-6ZM4 9h2.5V5.5H10V3H4v6Zm15.5 9.5H16V21h6v-6h-2.5v3.5ZM6.5 15H4v6h6v-2.5H6.5V15Z"/>
</svg>`,kat=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M18.5 6.5V3H16v6h6V6.5h-3.5ZM16 21h2.5v-3.5H22V15h-6v6ZM4 17.5h3.5V21H10v-6H4v2.5Zm3.5-11H4V9h6V3H7.5v3.5Z"/>
</svg>`,Ute=Ze.createElement("template");Ute.innerHTML=`
  <style>
    :host([${H.MEDIA_IS_FULLSCREEN}]) slot[name=icon] slot:not([name=exit]) {
      display: none !important;
    }

    
    :host(:not([${H.MEDIA_IS_FULLSCREEN}])) slot[name=icon] slot:not([name=enter]) {
      display: none !important;
    }

    :host([${H.MEDIA_IS_FULLSCREEN}]) slot[name=tooltip-enter],
    :host(:not([${H.MEDIA_IS_FULLSCREEN}])) slot[name=tooltip-exit] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="enter">${Rat}</slot>
    <slot name="exit">${kat}</slot>
  </slot>
`;const Iat=`
  <slot name="tooltip-enter">${Pr.ENTER_FULLSCREEN}</slot>
  <slot name="tooltip-exit">${Pr.EXIT_FULLSCREEN}</slot>
`,FU=r=>{const e=r.mediaIsFullscreen?ai.EXIT_FULLSCREEN():ai.ENTER_FULLSCREEN();r.setAttribute("aria-label",e)};class $at extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_IS_FULLSCREEN,H.MEDIA_FULLSCREEN_UNAVAILABLE]}constructor(e={}){super({slotTemplate:Ute,tooltipContent:Iat,...e})}connectedCallback(){super.connectedCallback(),FU(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_IS_FULLSCREEN&&FU(this)}get mediaFullscreenUnavailable(){return fn(this,H.MEDIA_FULLSCREEN_UNAVAILABLE)}set mediaFullscreenUnavailable(e){pn(this,H.MEDIA_FULLSCREEN_UNAVAILABLE,e)}get mediaIsFullscreen(){return In(this,H.MEDIA_IS_FULLSCREEN)}set mediaIsFullscreen(e){$n(this,H.MEDIA_IS_FULLSCREEN,e)}handleClick(){const e=this.mediaIsFullscreen?qe.MEDIA_EXIT_FULLSCREEN_REQUEST:qe.MEDIA_ENTER_FULLSCREEN_REQUEST;this.dispatchEvent(new se.CustomEvent(e,{composed:!0,bubbles:!0}))}}se.customElements.get("media-fullscreen-button")||se.customElements.define("media-fullscreen-button",$at);const{MEDIA_TIME_IS_LIVE:hE,MEDIA_PAUSED:Zg}=H,{MEDIA_SEEK_TO_LIVE_REQUEST:Dat,MEDIA_PLAY_REQUEST:Lat}=qe,Oat='<svg viewBox="0 0 6 12"><circle cx="3" cy="6" r="2"></circle></svg>',Wte=Ze.createElement("template");Wte.innerHTML=`
  <style>
  :host { --media-tooltip-display: none; }
  
  slot[name=indicator] > *,
  :host ::slotted([slot=indicator]) {
    
    min-width: auto;
    fill: var(--media-live-button-icon-color, rgb(140, 140, 140));
    color: var(--media-live-button-icon-color, rgb(140, 140, 140));
  }

  :host([${hE}]:not([${Zg}])) slot[name=indicator] > *,
  :host([${hE}]:not([${Zg}])) ::slotted([slot=indicator]) {
    fill: var(--media-live-button-indicator-color, rgb(255, 0, 0));
    color: var(--media-live-button-indicator-color, rgb(255, 0, 0));
  }

  :host([${hE}]:not([${Zg}])) {
    cursor: not-allowed;
  }

  </style>

  <slot name="indicator">${Oat}</slot>
  
  <slot name="spacer">&nbsp;</slot><slot name="text">LIVE</slot>
`;const BU=r=>{const e=r.mediaPaused||!r.mediaTimeIsLive,t=e?ai.SEEK_LIVE():ai.PLAYING_LIVE();r.setAttribute("aria-label",t),e?r.removeAttribute("aria-disabled"):r.setAttribute("aria-disabled","true")};class Pat extends cs{static get observedAttributes(){return[...super.observedAttributes,Zg,hE]}constructor(e={}){super({slotTemplate:Wte,...e})}connectedCallback(){BU(this),super.connectedCallback()}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),BU(this)}get mediaPaused(){return In(this,H.MEDIA_PAUSED)}set mediaPaused(e){$n(this,H.MEDIA_PAUSED,e)}get mediaTimeIsLive(){return In(this,H.MEDIA_TIME_IS_LIVE)}set mediaTimeIsLive(e){$n(this,H.MEDIA_TIME_IS_LIVE,e)}handleClick(){!this.mediaPaused&&this.mediaTimeIsLive||(this.dispatchEvent(new se.CustomEvent(Dat,{composed:!0,bubbles:!0})),this.hasAttribute(Zg)&&this.dispatchEvent(new se.CustomEvent(Lat,{composed:!0,bubbles:!0})))}}se.customElements.get("media-live-button")||se.customElements.define("media-live-button",Pat);var Hte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Bm=(r,e,t)=>(Hte(r,e,"read from private field"),t?t.call(r):e.get(r)),UU=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Um=(r,e,t,n)=>(Hte(r,e,"write to private field"),e.set(r,t),t),Na,fE;const WU={LOADING_DELAY:"loadingdelay"},Vte=500,Gte=Ze.createElement("template"),Mat=`
<svg aria-hidden="true" viewBox="0 0 100 100">
  <path d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50">
    <animateTransform
       attributeName="transform"
       attributeType="XML"
       type="rotate"
       dur="1s"
       from="0 50 50"
       to="360 50 50"
       repeatCount="indefinite" />
  </path>
</svg>
`;Gte.innerHTML=`
<style>
:host {
  display: var(--media-control-display, var(--media-loading-indicator-display, inline-block));
  vertical-align: middle;
  box-sizing: border-box;
  --_loading-indicator-delay: var(--media-loading-indicator-transition-delay, ${Vte}ms);
}

#status {
  color: rgba(0,0,0,0);
  width: 0px;
  height: 0px;
}

:host slot[name=icon] > *,
:host ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 0);
  transition: opacity 0.15s;
}

:host([${H.MEDIA_LOADING}]:not([${H.MEDIA_PAUSED}])) slot[name=icon] > *,
:host([${H.MEDIA_LOADING}]:not([${H.MEDIA_PAUSED}])) ::slotted([slot=icon]) {
  opacity: var(--media-loading-indicator-opacity, 1);
  transition: opacity 0.15s var(--_loading-indicator-delay);
}

:host #status {
  visibility: var(--media-loading-indicator-opacity, hidden);
  transition: visibility 0.15s;
}

:host([${H.MEDIA_LOADING}]:not([${H.MEDIA_PAUSED}])) #status {
  visibility: var(--media-loading-indicator-opacity, visible);
  transition: visibility 0.15s var(--_loading-indicator-delay);
}

svg, img, ::slotted(svg), ::slotted(img) {
  width: var(--media-loading-indicator-icon-width);
  height: var(--media-loading-indicator-icon-height, 100px);
  fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
  vertical-align: middle;
}
</style>

<slot name="icon">${Mat}</slot>
<div id="status" role="status" aria-live="polite">${as.MEDIA_LOADING()}</div>
`;class Nat extends se.HTMLElement{constructor(){if(super(),UU(this,Na,void 0),UU(this,fE,Vte),!this.shadowRoot){const e=this.attachShadow({mode:"open"}),t=Gte.content.cloneNode(!0);e.appendChild(t)}}static get observedAttributes(){return[Yt.MEDIA_CONTROLLER,H.MEDIA_PAUSED,H.MEDIA_LOADING,WU.LOADING_DELAY]}attributeChangedCallback(e,t,n){var i,s,a,o,l;e===WU.LOADING_DELAY&&t!==n?this.loadingDelay=Number(n):e===Yt.MEDIA_CONTROLLER&&(t&&((s=(i=Bm(this,Na))==null?void 0:i.unassociateElement)==null||s.call(i,this),Um(this,Na,null)),n&&this.isConnected&&(Um(this,Na,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=Bm(this,Na))==null?void 0:o.associateElement)==null||l.call(o,this)))}connectedCallback(){var e,t,n;const i=this.getAttribute(Yt.MEDIA_CONTROLLER);i&&(Um(this,Na,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(t=Bm(this,Na))==null?void 0:t.associateElement)==null||n.call(t,this))}disconnectedCallback(){var e,t;(t=(e=Bm(this,Na))==null?void 0:e.unassociateElement)==null||t.call(e,this),Um(this,Na,null)}get loadingDelay(){return Bm(this,fE)}set loadingDelay(e){Um(this,fE,e);const{style:t}=Yr(this.shadowRoot,":host");t.setProperty("--_loading-indicator-delay",`var(--media-loading-indicator-transition-delay, ${e}ms)`)}get mediaPaused(){return In(this,H.MEDIA_PAUSED)}set mediaPaused(e){$n(this,H.MEDIA_PAUSED,e)}get mediaLoading(){return In(this,H.MEDIA_LOADING)}set mediaLoading(e){$n(this,H.MEDIA_LOADING,e)}}Na=new WeakMap;fE=new WeakMap;se.customElements.get("media-loading-indicator")||se.customElements.define("media-loading-indicator",Nat);const{MEDIA_VOLUME_LEVEL:yu}=H,Fat=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M16.5 12A4.5 4.5 0 0 0 14 8v2.18l2.45 2.45a4.22 4.22 0 0 0 .05-.63Zm2.5 0a6.84 6.84 0 0 1-.54 2.64L20 16.15A8.8 8.8 0 0 0 21 12a9 9 0 0 0-7-8.77v2.06A7 7 0 0 1 19 12ZM4.27 3 3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25A6.92 6.92 0 0 1 14 18.7v2.06A9 9 0 0 0 17.69 19l2 2.05L21 19.73l-9-9L4.27 3ZM12 4 9.91 6.09 12 8.18V4Z"/>
</svg>`,HU=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4Z"/>
</svg>`,Bat=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M3 9v6h4l5 5V4L7 9H3Zm13.5 3A4.5 4.5 0 0 0 14 8v8a4.47 4.47 0 0 0 2.5-4ZM14 3.23v2.06a7 7 0 0 1 0 13.42v2.06a9 9 0 0 0 0-17.54Z"/>
</svg>`,qte=Ze.createElement("template");qte.innerHTML=`
  <style>
  
  :host(:not([${yu}])) slot[name=icon] slot:not([name=high]), 
  :host([${yu}=high]) slot[name=icon] slot:not([name=high]) {
    display: none !important;
  }

  :host([${yu}=off]) slot[name=icon] slot:not([name=off]) {
    display: none !important;
  }

  :host([${yu}=low]) slot[name=icon] slot:not([name=low]) {
    display: none !important;
  }

  :host([${yu}=medium]) slot[name=icon] slot:not([name=medium]) {
    display: none !important;
  }

  :host(:not([${yu}=off])) slot[name=tooltip-unmute],
  :host([${yu}=off]) slot[name=tooltip-mute] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="off">${Fat}</slot>
    <slot name="low">${HU}</slot>
    <slot name="medium">${HU}</slot>
    <slot name="high">${Bat}</slot>
  </slot>
`;const Uat=`
  <slot name="tooltip-mute">${Pr.MUTE}</slot>
  <slot name="tooltip-unmute">${Pr.UNMUTE}</slot>
`,VU=r=>{const t=r.mediaVolumeLevel==="off"?ai.UNMUTE():ai.MUTE();r.setAttribute("aria-label",t)};class Wat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_VOLUME_LEVEL]}constructor(e={}){super({slotTemplate:qte,tooltipContent:Uat,...e})}connectedCallback(){VU(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===H.MEDIA_VOLUME_LEVEL&&VU(this),super.attributeChangedCallback(e,t,n)}get mediaVolumeLevel(){return fn(this,H.MEDIA_VOLUME_LEVEL)}set mediaVolumeLevel(e){pn(this,H.MEDIA_VOLUME_LEVEL,e)}handleClick(){const e=this.mediaVolumeLevel==="off"?qe.MEDIA_UNMUTE_REQUEST:qe.MEDIA_MUTE_REQUEST;this.dispatchEvent(new se.CustomEvent(e,{composed:!0,bubbles:!0}))}}se.customElements.get("media-mute-button")||se.customElements.define("media-mute-button",Wat);const GU=`<svg aria-hidden="true" viewBox="0 0 28 24">
  <path d="M24 3H4a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V4a1 1 0 0 0-1-1Zm-1 16H5V5h18v14Zm-3-8h-7v5h7v-5Z"/>
</svg>`,jte=Ze.createElement("template");jte.innerHTML=`
  <style>
  :host([${H.MEDIA_IS_PIP}]) slot[name=icon] slot:not([name=exit]) {
    display: none !important;
  }

  
  :host(:not([${H.MEDIA_IS_PIP}])) slot[name=icon] slot:not([name=enter]) {
    display: none !important;
  }

  :host([${H.MEDIA_IS_PIP}]) slot[name=tooltip-enter],
  :host(:not([${H.MEDIA_IS_PIP}])) slot[name=tooltip-exit] {
    display: none;
  }
  </style>

  <slot name="icon">
    <slot name="enter">${GU}</slot>
    <slot name="exit">${GU}</slot>
  </slot>
`;const Hat=`
  <slot name="tooltip-enter">${Pr.ENTER_PIP}</slot>
  <slot name="tooltip-exit">${Pr.EXIT_PIP}</slot>
`,qU=r=>{const e=r.mediaIsPip?ai.EXIT_PIP():ai.ENTER_PIP();r.setAttribute("aria-label",e)};class Vat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_IS_PIP,H.MEDIA_PIP_UNAVAILABLE]}constructor(e={}){super({slotTemplate:jte,tooltipContent:Hat,...e})}connectedCallback(){qU(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===H.MEDIA_IS_PIP&&qU(this),super.attributeChangedCallback(e,t,n)}get mediaPipUnavailable(){return fn(this,H.MEDIA_PIP_UNAVAILABLE)}set mediaPipUnavailable(e){pn(this,H.MEDIA_PIP_UNAVAILABLE,e)}get mediaIsPip(){return In(this,H.MEDIA_IS_PIP)}set mediaIsPip(e){$n(this,H.MEDIA_IS_PIP,e)}handleClick(){const e=this.mediaIsPip?qe.MEDIA_EXIT_PIP_REQUEST:qe.MEDIA_ENTER_PIP_REQUEST;this.dispatchEvent(new se.CustomEvent(e,{composed:!0,bubbles:!0}))}}se.customElements.get("media-pip-button")||se.customElements.define("media-pip-button",Vat);var Gat=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},l1=(r,e,t)=>(Gat(r,e,"read from private field"),t?t.call(r):e.get(r)),qat=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Qh;const $R={RATES:"rates"},Kte=[1,1.2,1.5,1.7,2],dg=1,zte=Ze.createElement("template");zte.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
  </style>
  <slot name="icon"></slot>
`;class jat extends cs{constructor(e={}){super({slotTemplate:zte,tooltipContent:Pr.PLAYBACK_RATE,...e}),qat(this,Qh,new _S(this,$R.RATES,{defaultValue:Kte})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${dg}x`}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PLAYBACK_RATE,$R.RATES]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===$R.RATES&&(l1(this,Qh).value=n),e===H.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?dg:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",as.PLAYBACK_RATE({playbackRate:s}))}}get rates(){return l1(this,Qh)}set rates(e){e?Array.isArray(e)&&(l1(this,Qh).value=e.join(" ")):l1(this,Qh).value=""}get mediaPlaybackRate(){return $r(this,H.MEDIA_PLAYBACK_RATE,dg)}set mediaPlaybackRate(e){hn(this,H.MEDIA_PLAYBACK_RATE,e)}handleClick(){var e,t;const n=Array.from(this.rates.values(),a=>+a).sort((a,o)=>a-o),i=(t=(e=n.find(a=>a>this.mediaPlaybackRate))!=null?e:n[0])!=null?t:dg,s=new se.CustomEvent(qe.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:i});this.dispatchEvent(s)}}Qh=new WeakMap;se.customElements.get("media-playback-rate-button")||se.customElements.define("media-playback-rate-button",jat);const Kat=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="m6 21 15-9L6 3v18Z"/>
</svg>`,zat=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M6 20h4V4H6v16Zm8-16v16h4V4h-4Z"/>
</svg>`,Yte=Ze.createElement("template");Yte.innerHTML=`
  <style>
    :host([${H.MEDIA_PAUSED}]) slot[name=pause],
    :host(:not([${H.MEDIA_PAUSED}])) slot[name=play] {
      display: none !important;
    }

    :host([${H.MEDIA_PAUSED}]) slot[name=tooltip-pause],
    :host(:not([${H.MEDIA_PAUSED}])) slot[name=tooltip-play] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="play">${Kat}</slot>
    <slot name="pause">${zat}</slot>
  </slot>
`;const Yat=`
  <slot name="tooltip-play">${Pr.PLAY}</slot>
  <slot name="tooltip-pause">${Pr.PAUSE}</slot>
`,jU=r=>{const e=r.mediaPaused?ai.PLAY():ai.PAUSE();r.setAttribute("aria-label",e)};class Qat extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PAUSED,H.MEDIA_ENDED]}constructor(e={}){super({slotTemplate:Yte,tooltipContent:Yat,...e})}connectedCallback(){jU(this),super.connectedCallback()}attributeChangedCallback(e,t,n){e===H.MEDIA_PAUSED&&jU(this),super.attributeChangedCallback(e,t,n)}get mediaPaused(){return In(this,H.MEDIA_PAUSED)}set mediaPaused(e){$n(this,H.MEDIA_PAUSED,e)}handleClick(){const e=this.mediaPaused?qe.MEDIA_PLAY_REQUEST:qe.MEDIA_PAUSE_REQUEST;this.dispatchEvent(new se.CustomEvent(e,{composed:!0,bubbles:!0}))}}se.customElements.get("media-play-button")||se.customElements.define("media-play-button",Qat);const Ra={PLACEHOLDER_SRC:"placeholdersrc",SRC:"src"},Qte=Ze.createElement("template");Qte.innerHTML=`
  <style>
    :host {
      pointer-events: none;
      display: var(--media-poster-image-display, inline-block);
      box-sizing: border-box;
    }

    img {
      max-width: 100%;
      max-height: 100%;
      min-width: 100%;
      min-height: 100%;
      background-repeat: no-repeat;
      background-position: var(--media-poster-image-background-position, var(--media-object-position, center));
      background-size: var(--media-poster-image-background-size, var(--media-object-fit, contain));
      object-fit: var(--media-object-fit, contain);
      object-position: var(--media-object-position, center);
    }
  </style>

  <img part="poster img" aria-hidden="true" id="image"/>
`;const Xat=r=>{r.style.removeProperty("background-image")},Zat=(r,e)=>{r.style["background-image"]=`url('${e}')`};class Jat extends se.HTMLElement{static get observedAttributes(){return[Ra.PLACEHOLDER_SRC,Ra.SRC]}constructor(){super(),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Qte.content.cloneNode(!0))),this.image=this.shadowRoot.querySelector("#image")}attributeChangedCallback(e,t,n){e===Ra.SRC&&(n==null?this.image.removeAttribute(Ra.SRC):this.image.setAttribute(Ra.SRC,n)),e===Ra.PLACEHOLDER_SRC&&(n==null?Xat(this.image):Zat(this.image,n))}get placeholderSrc(){return fn(this,Ra.PLACEHOLDER_SRC)}set placeholderSrc(e){pn(this,Ra.SRC,e)}get src(){return fn(this,Ra.SRC)}set src(e){pn(this,Ra.SRC,e)}}se.customElements.get("media-poster-image")||se.customElements.define("media-poster-image",Jat);var Xte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},eot=(r,e,t)=>(Xte(r,e,"read from private field"),t?t.call(r):e.get(r)),tot=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},rot=(r,e,t,n)=>(Xte(r,e,"write to private field"),e.set(r,t),t),pE;class not extends Qv{constructor(){super(),tot(this,pE,void 0),rot(this,pE,this.shadowRoot.querySelector("slot"))}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PREVIEW_CHAPTER]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_PREVIEW_CHAPTER&&n!==t&&n!=null&&(eot(this,pE).textContent=n,n!==""?this.setAttribute("aria-valuetext",`chapter: ${n}`):this.removeAttribute("aria-valuetext"))}get mediaPreviewChapter(){return fn(this,H.MEDIA_PREVIEW_CHAPTER)}set mediaPreviewChapter(e){pn(this,H.MEDIA_PREVIEW_CHAPTER,e)}}pE=new WeakMap;se.customElements.get("media-preview-chapter-display")||se.customElements.define("media-preview-chapter-display",not);var Zte=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},c1=(r,e,t)=>(Zte(r,e,"read from private field"),t?t.call(r):e.get(r)),iot=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},u1=(r,e,t,n)=>(Zte(r,e,"write to private field"),e.set(r,t),t),Fa;const Jte=Ze.createElement("template");Jte.innerHTML=`
  <style>
    :host {
      box-sizing: border-box;
      display: var(--media-control-display, var(--media-preview-thumbnail-display, inline-block));
      overflow: hidden;
    }

    img {
      display: none;
      position: relative;
    }
  </style>
  <img crossorigin loading="eager" decoding="async">
`;class sot extends se.HTMLElement{constructor(){super(),iot(this,Fa,void 0),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(Jte.content.cloneNode(!0)))}static get observedAttributes(){return[Yt.MEDIA_CONTROLLER,H.MEDIA_PREVIEW_IMAGE,H.MEDIA_PREVIEW_COORDS]}connectedCallback(){var e,t,n;const i=this.getAttribute(Yt.MEDIA_CONTROLLER);i&&(u1(this,Fa,(e=this.getRootNode())==null?void 0:e.getElementById(i)),(n=(t=c1(this,Fa))==null?void 0:t.associateElement)==null||n.call(t,this))}disconnectedCallback(){var e,t;(t=(e=c1(this,Fa))==null?void 0:e.unassociateElement)==null||t.call(e,this),u1(this,Fa,null)}attributeChangedCallback(e,t,n){var i,s,a,o,l;[H.MEDIA_PREVIEW_IMAGE,H.MEDIA_PREVIEW_COORDS].includes(e)&&this.update(),e===Yt.MEDIA_CONTROLLER&&(t&&((s=(i=c1(this,Fa))==null?void 0:i.unassociateElement)==null||s.call(i,this),u1(this,Fa,null)),n&&this.isConnected&&(u1(this,Fa,(a=this.getRootNode())==null?void 0:a.getElementById(n)),(l=(o=c1(this,Fa))==null?void 0:o.associateElement)==null||l.call(o,this)))}get mediaPreviewImage(){return fn(this,H.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){pn(this,H.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewCoords(){const e=this.getAttribute(H.MEDIA_PREVIEW_COORDS);if(e)return e.split(/\s+/).map(t=>+t)}set mediaPreviewCoords(e){if(!e){this.removeAttribute(H.MEDIA_PREVIEW_COORDS);return}this.setAttribute(H.MEDIA_PREVIEW_COORDS,e.join(" "))}update(){const e=this.mediaPreviewCoords,t=this.mediaPreviewImage;if(!(e&&t))return;const[n,i,s,a]=e,o=t.split("#")[0],l=getComputedStyle(this),{maxWidth:c,maxHeight:u,minWidth:d,minHeight:h}=l,f=Math.min(parseInt(c)/s,parseInt(u)/a),m=Math.max(parseInt(d)/s,parseInt(h)/a),g=f<1,y=g?f:m>1?m:1,{style:b}=Yr(this.shadowRoot,":host"),E=Yr(this.shadowRoot,"img").style,w=this.shadowRoot.querySelector("img"),A=g?"min":"max";b.setProperty(`${A}-width`,"initial","important"),b.setProperty(`${A}-height`,"initial","important"),b.width=`${s*y}px`,b.height=`${a*y}px`;const S=()=>{E.width=`${this.imgWidth*y}px`,E.height=`${this.imgHeight*y}px`,E.display="block"};w.src!==o&&(w.onload=()=>{this.imgWidth=w.naturalWidth,this.imgHeight=w.naturalHeight,S()},w.src=o,S()),S(),E.transform=`translate(-${n*y}px, -${i*y}px)`}}Fa=new WeakMap;se.customElements.get("media-preview-thumbnail")||se.customElements.define("media-preview-thumbnail",sot);var ere=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},KU=(r,e,t)=>(ere(r,e,"read from private field"),t?t.call(r):e.get(r)),aot=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},oot=(r,e,t,n)=>(ere(r,e,"write to private field"),e.set(r,t),t),hg;class lot extends Qv{constructor(){super(),aot(this,hg,void 0),oot(this,hg,this.shadowRoot.querySelector("slot")),KU(this,hg).textContent=Ed(0)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PREVIEW_TIME]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_PREVIEW_TIME&&n!=null&&(KU(this,hg).textContent=Ed(parseFloat(n)))}get mediaPreviewTime(){return $r(this,H.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){hn(this,H.MEDIA_PREVIEW_TIME,e)}}hg=new WeakMap;se.customElements.get("media-preview-time-display")||se.customElements.define("media-preview-time-display",lot);const Fh={SEEK_OFFSET:"seekoffset"},mE=30,cot=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(2.18 19.87)">${mE}</text><path d="M10 6V3L4.37 7 10 10.94V8a5.54 5.54 0 0 1 1.9 10.48v2.12A7.5 7.5 0 0 0 10 6Z"/></svg>`,tre=Ze.createElement("template");tre.innerHTML=`
  <slot name="icon">${cot}</slot>
`;const uot=0;class dot extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_CURRENT_TIME,Fh.SEEK_OFFSET]}constructor(e={}){super({slotTemplate:tre,tooltipContent:Pr.SEEK_BACKWARD,...e})}connectedCallback(){this.seekOffset=$r(this,Fh.SEEK_OFFSET,mE),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Fh.SEEK_OFFSET&&(this.seekOffset=$r(this,Fh.SEEK_OFFSET,mE)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return $r(this,Fh.SEEK_OFFSET,mE)}set seekOffset(e){hn(this,Fh.SEEK_OFFSET,e),this.setAttribute("aria-label",ai.SEEK_BACK_N_SECS({seekOffset:this.seekOffset})),zee(Yee(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return $r(this,H.MEDIA_CURRENT_TIME,uot)}set mediaCurrentTime(e){hn(this,H.MEDIA_CURRENT_TIME,e)}handleClick(){const e=Math.max(this.mediaCurrentTime-this.seekOffset,0),t=new se.CustomEvent(qe.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}se.customElements.get("media-seek-backward-button")||se.customElements.define("media-seek-backward-button",dot);const Bh={SEEK_OFFSET:"seekoffset"},gE=30,hot=`<svg aria-hidden="true" viewBox="0 0 20 24"><defs><style>.text{font-size:8px;font-family:Arial-BoldMT, Arial;font-weight:700;}</style></defs><text class="text value" transform="translate(8.9 19.87)">${gE}</text><path d="M10 6V3l5.61 4L10 10.94V8a5.54 5.54 0 0 0-1.9 10.48v2.12A7.5 7.5 0 0 1 10 6Z"/></svg>`,rre=Ze.createElement("template");rre.innerHTML=`
  <slot name="icon">${hot}</slot>
`;const fot=0;class pot extends cs{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_CURRENT_TIME,Bh.SEEK_OFFSET]}constructor(e={}){super({slotTemplate:rre,tooltipContent:Pr.SEEK_FORWARD,...e})}connectedCallback(){this.seekOffset=$r(this,Bh.SEEK_OFFSET,gE),super.connectedCallback()}attributeChangedCallback(e,t,n){e===Bh.SEEK_OFFSET&&(this.seekOffset=$r(this,Bh.SEEK_OFFSET,gE)),super.attributeChangedCallback(e,t,n)}get seekOffset(){return $r(this,Bh.SEEK_OFFSET,gE)}set seekOffset(e){hn(this,Bh.SEEK_OFFSET,e),this.setAttribute("aria-label",ai.SEEK_FORWARD_N_SECS({seekOffset:this.seekOffset})),zee(Yee(this,"icon"),this.seekOffset)}get mediaCurrentTime(){return $r(this,H.MEDIA_CURRENT_TIME,fot)}set mediaCurrentTime(e){hn(this,H.MEDIA_CURRENT_TIME,e)}handleClick(){const e=this.mediaCurrentTime+this.seekOffset,t=new se.CustomEvent(qe.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)}}se.customElements.get("media-seek-forward-button")||se.customElements.define("media-seek-forward-button",pot);var nre=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},DR=(r,e,t)=>(nre(r,e,"read from private field"),t?t.call(r):e.get(r)),mot=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},got=(r,e,t,n)=>(nre(r,e,"write to private field"),e.set(r,t),t),Xh;const ea={REMAINING:"remaining",SHOW_DURATION:"showduration",NO_TOGGLE:"notoggle"},zU=[...Object.values(ea),H.MEDIA_CURRENT_TIME,H.MEDIA_DURATION,H.MEDIA_SEEKABLE],YU=["Enter"," "],vot="&nbsp;/&nbsp;",QU=(r,{timesSep:e=vot}={})=>{var t,n;const i=r.hasAttribute(ea.REMAINING),s=r.hasAttribute(ea.SHOW_DURATION),a=(t=r.mediaCurrentTime)!=null?t:0,[,o]=(n=r.mediaSeekable)!=null?n:[];let l=0;Number.isFinite(r.mediaDuration)?l=r.mediaDuration:Number.isFinite(o)&&(l=o);const c=Ed(i?0-(l-a):a);return s?`${c}${e}${Ed(l)}`:c},yot="video not loaded, unknown time.",bot=r=>{var e;const t=r.mediaCurrentTime,[,n]=(e=r.mediaSeekable)!=null?e:[];let i=null;if(Number.isFinite(r.mediaDuration)?i=r.mediaDuration:Number.isFinite(n)&&(i=n),t==null||i===null){r.setAttribute("aria-valuetext",yot);return}const s=r.hasAttribute(ea.REMAINING),a=r.hasAttribute(ea.SHOW_DURATION),o=Qg(s?0-(i-t):t);if(!a){r.setAttribute("aria-valuetext",o);return}const l=Qg(i),c=`${o} of ${l}`;r.setAttribute("aria-valuetext",c)};class Eot extends Qv{constructor(){super(),mot(this,Xh,void 0),got(this,Xh,this.shadowRoot.querySelector("slot")),DR(this,Xh).innerHTML=`${QU(this)}`}static get observedAttributes(){return[...super.observedAttributes,...zU,"disabled"]}connectedCallback(){const{style:e}=Yr(this.shadowRoot,":host(:hover:not([notoggle]))");e.setProperty("cursor","pointer"),e.setProperty("background","var(--media-control-hover-background, rgba(50 50 70 / .7))"),this.hasAttribute("disabled")||this.enable(),this.setAttribute("role","progressbar"),this.setAttribute("aria-label",as.PLAYBACK_TIME());const t=n=>{const{key:i}=n;if(!YU.includes(i)){this.removeEventListener("keyup",t);return}this.toggleTimeDisplay()};this.addEventListener("keydown",n=>{const{metaKey:i,altKey:s,key:a}=n;if(i||s||!YU.includes(a)){this.removeEventListener("keyup",t);return}this.addEventListener("keyup",t)}),this.addEventListener("click",this.toggleTimeDisplay),super.connectedCallback()}toggleTimeDisplay(){this.noToggle||(this.hasAttribute("remaining")?this.removeAttribute("remaining"):this.setAttribute("remaining",""))}disconnectedCallback(){this.disable(),super.disconnectedCallback()}attributeChangedCallback(e,t,n){zU.includes(e)?this.update():e==="disabled"&&n!==t&&(n==null?this.enable():this.disable()),super.attributeChangedCallback(e,t,n)}enable(){this.tabIndex=0}disable(){this.tabIndex=-1}get remaining(){return In(this,ea.REMAINING)}set remaining(e){$n(this,ea.REMAINING,e)}get showDuration(){return In(this,ea.SHOW_DURATION)}set showDuration(e){$n(this,ea.SHOW_DURATION,e)}get noToggle(){return In(this,ea.NO_TOGGLE)}set noToggle(e){$n(this,ea.NO_TOGGLE,e)}get mediaDuration(){return $r(this,H.MEDIA_DURATION)}set mediaDuration(e){hn(this,H.MEDIA_DURATION,e)}get mediaCurrentTime(){return $r(this,H.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){hn(this,H.MEDIA_CURRENT_TIME,e)}get mediaSeekable(){const e=this.getAttribute(H.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(H.MEDIA_SEEKABLE);return}this.setAttribute(H.MEDIA_SEEKABLE,e.join(":"))}update(){const e=QU(this);bot(this),e!==DR(this,Xh).innerHTML&&(DR(this,Xh).innerHTML=e)}}Xh=new WeakMap;se.customElements.get("media-time-display")||se.customElements.define("media-time-display",Eot);var ire=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},En=(r,e,t)=>(ire(r,e,"read from private field"),e.get(r)),ka=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Zi=(r,e,t,n)=>(ire(r,e,"write to private field"),e.set(r,t),t),xot=(r,e,t,n)=>({set _(i){Zi(r,e,i)},get _(){return En(r,e)}}),Zh,vE,Jh,fg,yE,bE,EE,ef,Ru,xE;class wot{constructor(e,t,n){ka(this,Zh,void 0),ka(this,vE,void 0),ka(this,Jh,void 0),ka(this,fg,void 0),ka(this,yE,void 0),ka(this,bE,void 0),ka(this,EE,void 0),ka(this,ef,void 0),ka(this,Ru,0),ka(this,xE,(i=performance.now())=>{Zi(this,Ru,requestAnimationFrame(En(this,xE))),Zi(this,fg,performance.now()-En(this,Jh));const s=1e3/this.fps;if(En(this,fg)>s){Zi(this,Jh,i-En(this,fg)%s);const a=1e3/((i-En(this,vE))/++xot(this,yE)._),o=(i-En(this,bE))/1e3/this.duration;let l=En(this,EE)+o*this.playbackRate;l-En(this,Zh).valueAsNumber>0?Zi(this,ef,this.playbackRate/this.duration/a):(Zi(this,ef,.995*En(this,ef)),l=En(this,Zh).valueAsNumber+En(this,ef)),this.callback(l)}}),Zi(this,Zh,e),this.callback=t,this.fps=n}start(){En(this,Ru)===0&&(Zi(this,Jh,performance.now()),Zi(this,vE,En(this,Jh)),Zi(this,yE,0),En(this,xE).call(this))}stop(){En(this,Ru)!==0&&(cancelAnimationFrame(En(this,Ru)),Zi(this,Ru,0))}update({start:e,duration:t,playbackRate:n}){const i=e-En(this,Zh).valueAsNumber,s=Math.abs(t-this.duration);(i>0||i<-.03||s>=.5)&&this.callback(e),Zi(this,EE,e),Zi(this,bE,performance.now()),this.duration=t,this.playbackRate=n}}Zh=new WeakMap;vE=new WeakMap;Jh=new WeakMap;fg=new WeakMap;yE=new WeakMap;bE=new WeakMap;EE=new WeakMap;ef=new WeakMap;Ru=new WeakMap;xE=new WeakMap;var gM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},cn=(r,e,t)=>(gM(r,e,"read from private field"),t?t.call(r):e.get(r)),bn=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Ba=(r,e,t,n)=>(gM(r,e,"write to private field"),e.set(r,t),t),ei=(r,e,t)=>(gM(r,e,"access private method"),t),tf,xd,Pw,Jg,Mw,wE,ev,tv,rf,nf,pg,vM,sre,bD,Nw,yM,Fw,bM,Bw,EM,ED,are,rv,Uw,xD,ore;const Tot="video not loaded, unknown time.",Sot=r=>{const e=r.range,t=Qg(+cre(r)),n=Qg(+r.mediaSeekableEnd),i=t&&n?`${t} of ${n}`:Tot;e.setAttribute("aria-valuetext",i)},lre=Ze.createElement("template");lre.innerHTML=`
  <style>
    :host {
      --media-box-border-radius: 4px;
      --media-box-padding-left: 10px;
      --media-box-padding-right: 10px;
      --media-preview-border-radius: var(--media-box-border-radius);
      --media-box-arrow-offset: var(--media-box-border-radius);
      --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));
      --_preview-background: var(--media-preview-background, var(--_control-background));

      
      contain: layout;
    }

    #buffered {
      background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));
      position: absolute;
      height: 100%;
      will-change: width;
    }

    #preview-rail,
    #current-rail {
      width: 100%;
      position: absolute;
      left: 0;
      bottom: 100%;
      pointer-events: none;
      will-change: transform;
    }

    [part~="box"] {
      width: min-content;
      
      position: absolute;
      bottom: 100%;
      flex-direction: column;
      align-items: center;
      transform: translateX(-50%);
    }

    [part~="current-box"] {
      display: var(--media-current-box-display, var(--media-box-display, flex));
      margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));
      visibility: hidden;
    }

    [part~="preview-box"] {
      display: var(--media-preview-box-display, var(--media-box-display, flex));
      margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));
      transition-property: var(--media-preview-transition-property, visibility, opacity);
      transition-duration: var(--media-preview-transition-duration-out, .25s);
      transition-delay: var(--media-preview-transition-delay-out, 0s);
      visibility: hidden;
      opacity: 0;
    }

    :host(:is([${H.MEDIA_PREVIEW_IMAGE}], [${H.MEDIA_PREVIEW_TIME}])[dragging]) [part~="preview-box"] {
      transition-duration: var(--media-preview-transition-duration-in, .5s);
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
      opacity: 1;
    }

    @media (hover: hover) {
      :host(:is([${H.MEDIA_PREVIEW_IMAGE}], [${H.MEDIA_PREVIEW_TIME}]):hover) [part~="preview-box"] {
        transition-duration: var(--media-preview-transition-duration-in, .5s);
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
        opacity: 1;
      }
    }

    media-preview-thumbnail,
    ::slotted(media-preview-thumbnail) {
      visibility: hidden;
      
      transition: visibility 0s .25s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-thumbnail-background, var(--_preview-background));
      box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));
      max-width: var(--media-preview-thumbnail-max-width, 180px);
      max-height: var(--media-preview-thumbnail-max-height, 160px);
      min-width: var(--media-preview-thumbnail-min-width, 120px);
      min-height: var(--media-preview-thumbnail-min-height, 80px);
      border: var(--media-preview-thumbnail-border);
      border-radius: var(--media-preview-thumbnail-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);
    }

    :host([${H.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,
    :host([${H.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      visibility: visible;
    }

    @media (hover: hover) {
      :host([${H.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,
      :host([${H.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {
        transition-delay: var(--media-preview-transition-delay-in, .25s);
        visibility: visible;
      }

      :host([${H.MEDIA_PREVIEW_TIME}]:hover) {
        --media-time-range-hover-display: block;
      }
    }

    media-preview-chapter-display,
    ::slotted(media-preview-chapter-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      visibility: hidden;
      
      transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-chapter-background, var(--_preview-background));
      border-radius: var(--media-preview-chapter-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-chapter-padding, 3.5px 9px);
      margin: var(--media-preview-chapter-margin, 0 0 5px);
      text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));
    }

    :host([${H.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,
    :host([${H.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-chapter-border-radius, 0);
      padding: var(--media-preview-chapter-padding, 3.5px 9px 0);
      margin: var(--media-preview-chapter-margin, 0);
      min-width: 100%;
    }

    media-preview-chapter-display[${H.MEDIA_PREVIEW_CHAPTER}],
    ::slotted(media-preview-chapter-display[${H.MEDIA_PREVIEW_CHAPTER}]) {
      visibility: visible;
    }

    media-preview-chapter-display:not([aria-valuetext]),
    ::slotted(media-preview-chapter-display:not([aria-valuetext])) {
      display: none;
    }

    media-preview-time-display,
    ::slotted(media-preview-time-display),
    media-time-display,
    ::slotted(media-time-display) {
      font-size: var(--media-font-size, 13px);
      line-height: 17px;
      min-width: 0;
      
      transition: min-width 0s, border-radius 0s;
      transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));
      background: var(--media-preview-time-background, var(--_preview-background));
      border-radius: var(--media-preview-time-border-radius,
        var(--media-preview-border-radius) var(--media-preview-border-radius)
        var(--media-preview-border-radius) var(--media-preview-border-radius));
      padding: var(--media-preview-time-padding, 3.5px 9px);
      margin: var(--media-preview-time-margin, 0);
      text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50%)
      ));
    }

    :host([${H.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,
    :host([${H.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {
      transition-delay: var(--media-preview-transition-delay-in, .25s);
      border-radius: var(--media-preview-time-border-radius,
        0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));
      min-width: 100%;
    }

    :host([${H.MEDIA_PREVIEW_TIME}]:hover) {
      --media-time-range-hover-display: block;
    }

    [part~="arrow"],
    ::slotted([part~="arrow"]) {
      display: var(--media-box-arrow-display, inline-block);
      transform: translateX(min(
        max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),
        calc(var(--_box-shift, 0))),
        calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))
      ));
      
      border-color: transparent;
      border-top-color: var(--media-box-arrow-background, var(--_control-background));
      border-width: var(--media-box-arrow-border-width,
        var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);
      border-style: solid;
      justify-content: center;
      height: 0;
    }
  </style>
  <div id="preview-rail">
    <slot name="preview" part="box preview-box">
      <media-preview-thumbnail></media-preview-thumbnail>
      <media-preview-chapter-display></media-preview-chapter-display>
      <media-preview-time-display></media-preview-time-display>
      <slot name="preview-arrow"><div part="arrow"></div></slot>
    </slot>
  </div>
  <div id="current-rail">
    <slot name="current" part="box current-box">
      
    </slot>
  </div>
`;const d1=(r,e=r.mediaCurrentTime)=>{const t=Number.isFinite(r.mediaSeekableStart)?r.mediaSeekableStart:0,n=Number.isFinite(r.mediaDuration)?r.mediaDuration:r.mediaSeekableEnd;if(Number.isNaN(n))return 0;const i=(e-t)/(n-t);return Math.max(0,Math.min(i,1))},cre=(r,e=r.range.valueAsNumber)=>{const t=Number.isFinite(r.mediaSeekableStart)?r.mediaSeekableStart:0,n=Number.isFinite(r.mediaDuration)?r.mediaDuration:r.mediaSeekableEnd;return Number.isNaN(n)?0:e*(n-t)+t};class Aot extends mM{constructor(){super(),bn(this,nf),bn(this,vM),bn(this,Nw),bn(this,Fw),bn(this,Bw),bn(this,ED),bn(this,rv),bn(this,xD),bn(this,tf,void 0),bn(this,xd,void 0),bn(this,Pw,void 0),bn(this,Jg,void 0),bn(this,Mw,void 0),bn(this,wE,void 0),bn(this,ev,void 0),bn(this,tv,void 0),bn(this,rf,void 0),bn(this,bD,n=>{this.dragging||(rM(n)&&(this.range.valueAsNumber=n),this.updateBar())}),this.container.appendChild(lre.content.cloneNode(!0)),this.shadowRoot.querySelector("#track").insertAdjacentHTML("afterbegin",'<div id="buffered" part="buffered"></div>'),Ba(this,Pw,this.shadowRoot.querySelectorAll('[part~="box"]')),Ba(this,Mw,this.shadowRoot.querySelector('[part~="preview-box"]')),Ba(this,wE,this.shadowRoot.querySelector('[part~="current-box"]'));const t=getComputedStyle(this);Ba(this,ev,parseInt(t.getPropertyValue("--media-box-padding-left"))),Ba(this,tv,parseInt(t.getPropertyValue("--media-box-padding-right"))),Ba(this,xd,new wot(this.range,cn(this,bD),60))}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PAUSED,H.MEDIA_DURATION,H.MEDIA_SEEKABLE,H.MEDIA_CURRENT_TIME,H.MEDIA_PREVIEW_IMAGE,H.MEDIA_PREVIEW_TIME,H.MEDIA_PREVIEW_CHAPTER,H.MEDIA_BUFFERED,H.MEDIA_PLAYBACK_RATE,H.MEDIA_LOADING,H.MEDIA_ENDED]}connectedCallback(){var e;super.connectedCallback(),this.range.setAttribute("aria-label",as.SEEK()),ei(this,nf,pg).call(this),Ba(this,tf,this.getRootNode()),(e=cn(this,tf))==null||e.addEventListener("transitionstart",this)}disconnectedCallback(){var e;super.disconnectedCallback(),ei(this,nf,pg).call(this),(e=cn(this,tf))==null||e.removeEventListener("transitionstart",this),Ba(this,tf,null)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),t!=n&&(e===H.MEDIA_CURRENT_TIME||e===H.MEDIA_PAUSED||e===H.MEDIA_ENDED||e===H.MEDIA_LOADING||e===H.MEDIA_DURATION||e===H.MEDIA_SEEKABLE?(cn(this,xd).update({start:d1(this),duration:this.mediaSeekableEnd-this.mediaSeekableStart,playbackRate:this.mediaPlaybackRate}),ei(this,nf,pg).call(this),Sot(this)):e===H.MEDIA_BUFFERED&&this.updateBufferedBar(),(e===H.MEDIA_DURATION||e===H.MEDIA_SEEKABLE)&&(this.mediaChaptersCues=cn(this,rf),this.updateBar()))}get mediaChaptersCues(){return cn(this,rf)}set mediaChaptersCues(e){var t;Ba(this,rf,e),this.updateSegments((t=cn(this,rf))==null?void 0:t.map(n=>({start:d1(this,n.startTime),end:d1(this,n.endTime)})))}get mediaPaused(){return In(this,H.MEDIA_PAUSED)}set mediaPaused(e){$n(this,H.MEDIA_PAUSED,e)}get mediaLoading(){return In(this,H.MEDIA_LOADING)}set mediaLoading(e){$n(this,H.MEDIA_LOADING,e)}get mediaDuration(){return $r(this,H.MEDIA_DURATION)}set mediaDuration(e){hn(this,H.MEDIA_DURATION,e)}get mediaCurrentTime(){return $r(this,H.MEDIA_CURRENT_TIME)}set mediaCurrentTime(e){hn(this,H.MEDIA_CURRENT_TIME,e)}get mediaPlaybackRate(){return $r(this,H.MEDIA_PLAYBACK_RATE,1)}set mediaPlaybackRate(e){hn(this,H.MEDIA_PLAYBACK_RATE,e)}get mediaBuffered(){const e=this.getAttribute(H.MEDIA_BUFFERED);return e?e.split(" ").map(t=>t.split(":").map(n=>+n)):[]}set mediaBuffered(e){if(!e){this.removeAttribute(H.MEDIA_BUFFERED);return}const t=e.map(n=>n.join(":")).join(" ");this.setAttribute(H.MEDIA_BUFFERED,t)}get mediaSeekable(){const e=this.getAttribute(H.MEDIA_SEEKABLE);if(e)return e.split(":").map(t=>+t)}set mediaSeekable(e){if(e==null){this.removeAttribute(H.MEDIA_SEEKABLE);return}this.setAttribute(H.MEDIA_SEEKABLE,e.join(":"))}get mediaSeekableEnd(){var e;const[,t=this.mediaDuration]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaSeekableStart(){var e;const[t=0]=(e=this.mediaSeekable)!=null?e:[];return t}get mediaPreviewImage(){return fn(this,H.MEDIA_PREVIEW_IMAGE)}set mediaPreviewImage(e){pn(this,H.MEDIA_PREVIEW_IMAGE,e)}get mediaPreviewTime(){return $r(this,H.MEDIA_PREVIEW_TIME)}set mediaPreviewTime(e){hn(this,H.MEDIA_PREVIEW_TIME,e)}get mediaEnded(){return In(this,H.MEDIA_ENDED)}set mediaEnded(e){$n(this,H.MEDIA_ENDED,e)}updateBar(){super.updateBar(),this.updateBufferedBar(),this.updateCurrentBox()}updateBufferedBar(){var e;const t=this.mediaBuffered;if(!t.length)return;let n;if(this.mediaEnded)n=1;else{const s=this.mediaCurrentTime,[,a=this.mediaSeekableStart]=(e=t.find(([o,l])=>o<=s&&s<=l))!=null?e:[];n=d1(this,a)}const{style:i}=Yr(this.shadowRoot,"#buffered");i.setProperty("width",`${n*100}%`)}updateCurrentBox(){if(!this.shadowRoot.querySelector('slot[name="current"]').assignedElements().length)return;const t=Yr(this.shadowRoot,"#current-rail"),n=Yr(this.shadowRoot,'[part~="current-box"]'),i=ei(this,Nw,yM).call(this,cn(this,wE)),s=ei(this,Fw,bM).call(this,i,this.range.valueAsNumber),a=ei(this,Bw,EM).call(this,i,this.range.valueAsNumber);t.style.transform=`translateX(${s})`,t.style.setProperty("--_range-width",`${i.range.width}`),n.style.setProperty("--_box-shift",`${a}`),n.style.setProperty("--_box-width",`${i.box.width}px`),n.style.setProperty("visibility","initial")}handleEvent(e){switch(super.handleEvent(e),e.type){case"input":ei(this,xD,ore).call(this);break;case"pointermove":ei(this,ED,are).call(this,e);break;case"pointerup":case"pointerleave":ei(this,rv,Uw).call(this,null);break;case"transitionstart":Rl(e.target,this)&&setTimeout(()=>ei(this,nf,pg).call(this),0);break}}}tf=new WeakMap;xd=new WeakMap;Pw=new WeakMap;Jg=new WeakMap;Mw=new WeakMap;wE=new WeakMap;ev=new WeakMap;tv=new WeakMap;rf=new WeakMap;nf=new WeakSet;pg=function(){ei(this,vM,sre).call(this)?cn(this,xd).start():cn(this,xd).stop()};vM=new WeakSet;sre=function(){return this.isConnected&&!this.mediaPaused&&!this.mediaLoading&&!this.mediaEnded&&this.mediaSeekableEnd>0&&Qee(this)};bD=new WeakMap;Nw=new WeakSet;yM=function(r){var e;const n=((e=this.getAttribute("bounds")?Xp(this,`#${this.getAttribute("bounds")}`):this.parentElement)!=null?e:this).getBoundingClientRect(),i=this.range.getBoundingClientRect(),s=r.offsetWidth,a=-(i.left-n.left-s/2),o=n.right-i.left-s/2;return{box:{width:s,min:a,max:o},bounds:n,range:i}};Fw=new WeakSet;bM=function(r,e){let t=`${e*100}%`;const{width:n,min:i,max:s}=r.box;if(!n)return t;if(Number.isNaN(i)||(t=`max(${`calc(1 / var(--_range-width) * 100 * ${i}% + var(--media-box-padding-left))`}, ${t})`),!Number.isNaN(s)){const o=`calc(1 / var(--_range-width) * 100 * ${s}% - var(--media-box-padding-right))`;t=`min(${t}, ${o})`}return t};Bw=new WeakSet;EM=function(r,e){const{width:t,min:n,max:i}=r.box,s=e*r.range.width;if(s<n+cn(this,ev)){const a=r.range.left-r.bounds.left-cn(this,ev);return`${s-t/2+a}px`}if(s>i-cn(this,tv)){const a=r.bounds.right-r.range.right-cn(this,tv);return`${s+t/2-a-r.range.width}px`}return 0};ED=new WeakSet;are=function(r){const e=[...cn(this,Pw)].some(u=>r.composedPath().includes(u));if(!this.dragging&&(e||!r.composedPath().includes(this))){ei(this,rv,Uw).call(this,null);return}const t=this.mediaSeekableEnd;if(!t)return;const n=Yr(this.shadowRoot,"#preview-rail"),i=Yr(this.shadowRoot,'[part~="preview-box"]'),s=ei(this,Nw,yM).call(this,cn(this,Mw));let a=(r.clientX-s.range.left)/s.range.width;a=Math.max(0,Math.min(1,a));const o=ei(this,Fw,bM).call(this,s,a),l=ei(this,Bw,EM).call(this,s,a);n.style.transform=`translateX(${o})`,n.style.setProperty("--_range-width",`${s.range.width}`),i.style.setProperty("--_box-shift",`${l}`),i.style.setProperty("--_box-width",`${s.box.width}px`);const c=Math.round(cn(this,Jg))-Math.round(a*t);Math.abs(c)<1&&a>.01&&a<.99||(Ba(this,Jg,a*t),ei(this,rv,Uw).call(this,cn(this,Jg)))};rv=new WeakSet;Uw=function(r){this.dispatchEvent(new se.CustomEvent(qe.MEDIA_PREVIEW_REQUEST,{composed:!0,bubbles:!0,detail:r}))};xD=new WeakSet;ore=function(){cn(this,xd).stop();const r=cre(this);this.dispatchEvent(new se.CustomEvent(qe.MEDIA_SEEK_REQUEST,{composed:!0,bubbles:!0,detail:r}))};se.customElements.get("media-time-range")||se.customElements.define("media-time-range",Aot);const Uh={PLACEMENT:"placement",BOUNDS:"bounds"},ure=Ze.createElement("template");ure.innerHTML=`
  <style>
    :host {
      --_tooltip-background-color: var(--media-tooltip-background-color, var(--media-secondary-color, rgba(20, 20, 30, .7)));
      --_tooltip-background: var(--media-tooltip-background, var(--_tooltip-background-color));
      --_tooltip-arrow-half-width: calc(var(--media-tooltip-arrow-width, 12px) / 2);
      --_tooltip-arrow-height: var(--media-tooltip-arrow-height, 5px);
      --_tooltip-arrow-background: var(--media-tooltip-arrow-color, var(--_tooltip-background-color));
      position: relative;
      pointer-events: none;
      display: var(--media-tooltip-display, inline-flex);
      justify-content: center;
      align-items: center;
      box-sizing: border-box;
      z-index: var(--media-tooltip-z-index, 1);
      background: var(--_tooltip-background);
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      font: var(--media-font,
        var(--media-font-weight, 400)
        var(--media-font-size, 13px) /
        var(--media-text-content-height, var(--media-control-height, 18px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      padding: var(--media-tooltip-padding, .35em .7em);
      border: var(--media-tooltip-border, none);
      border-radius: var(--media-tooltip-border-radius, 5px);
      filter: var(--media-tooltip-filter, drop-shadow(0 0 4px rgba(0, 0, 0, .2)));
      white-space: var(--media-tooltip-white-space, nowrap);
    }

    :host([hidden]) {
      display: none;
    }

    img, svg {
      display: inline-block;
    }

    #arrow {
      position: absolute;
      width: 0px;
      height: 0px;
      border-style: solid;
      display: var(--media-tooltip-arrow-display, block);
    }

    :host(:not([placement])),
    :host([placement="top"]) {
      position: absolute;
      bottom: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host(:not([placement])) #arrow,
    :host([placement="top"]) #arrow {
      top: 100%;
      left: 50%;
      border-width: var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width);
      border-color: var(--_tooltip-arrow-background) transparent transparent transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="right"]) {
      position: absolute;
      left: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="right"]) #arrow {
      top: 50%;
      right: 100%;
      border-width: var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width) 0;
      border-color: transparent var(--_tooltip-arrow-background) transparent transparent;
      transform: translate(0, -50%);
    }

    :host([placement="bottom"]) {
      position: absolute;
      top: calc(100% + var(--media-tooltip-distance, 12px));
      left: 50%;
      transform: translate(calc(-50% - var(--media-tooltip-offset-x, 0px)), 0);
    }
    :host([placement="bottom"]) #arrow {
      bottom: 100%;
      left: 50%;
      border-width: 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height) var(--_tooltip-arrow-half-width);
      border-color: transparent transparent var(--_tooltip-arrow-background) transparent;
      transform: translate(calc(-50% + var(--media-tooltip-offset-x, 0px)), 0);
    }

    :host([placement="left"]) {
      position: absolute;
      right: calc(100% + var(--media-tooltip-distance, 12px));
      top: 50%;
      transform: translate(0, -50%);
    }
    :host([placement="left"]) #arrow {
      top: 50%;
      left: 100%;
      border-width: var(--_tooltip-arrow-half-width) 0 var(--_tooltip-arrow-half-width) var(--_tooltip-arrow-height);
      border-color: transparent transparent transparent var(--_tooltip-arrow-background);
      transform: translate(0, -50%);
    }
    
    :host([placement="none"]) #arrow {
      display: none;
    }

  </style>
  <slot></slot>
  <div id="arrow"></div>
`;class _ot extends se.HTMLElement{constructor(){if(super(),this.updateXOffset=()=>{var e;if(!Qee(this,{checkOpacity:!1,checkVisibilityCSS:!1}))return;const t=this.placement;if(t==="left"||t==="right"){this.style.removeProperty("--media-tooltip-offset-x");return}const n=getComputedStyle(this),i=(e=Xp(this,"#"+this.bounds))!=null?e:Ns(this);if(!i)return;const{x:s,width:a}=i.getBoundingClientRect(),{x:o,width:l}=this.getBoundingClientRect(),c=o+l,u=s+a,d=n.getPropertyValue("--media-tooltip-offset-x"),h=d?parseFloat(d.replace("px","")):0,f=n.getPropertyValue("--media-tooltip-container-margin"),m=f?parseFloat(f.replace("px","")):0,g=o-s+h-m,y=c-u+h+m;if(g<0){this.style.setProperty("--media-tooltip-offset-x",`${g}px`);return}if(y>0){this.style.setProperty("--media-tooltip-offset-x",`${y}px`);return}this.style.removeProperty("--media-tooltip-offset-x")},this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.appendChild(ure.content.cloneNode(!0))),this.arrowEl=this.shadowRoot.querySelector("#arrow"),Object.prototype.hasOwnProperty.call(this,"placement")){const e=this.placement;delete this.placement,this.placement=e}}static get observedAttributes(){return[Uh.PLACEMENT,Uh.BOUNDS]}get placement(){return fn(this,Uh.PLACEMENT)}set placement(e){pn(this,Uh.PLACEMENT,e)}get bounds(){return fn(this,Uh.BOUNDS)}set bounds(e){pn(this,Uh.BOUNDS,e)}}se.customElements.get("media-tooltip")||se.customElements.define("media-tooltip",_ot);const Cot=1,Rot=r=>r.mediaMuted?0:r.mediaVolume,kot=r=>`${Math.round(r*100)}%`;class Iot extends mM{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_VOLUME,H.MEDIA_MUTED,H.MEDIA_VOLUME_UNAVAILABLE]}constructor(){super(),this.range.addEventListener("input",()=>{const e=this.range.value,t=new se.CustomEvent(qe.MEDIA_VOLUME_REQUEST,{composed:!0,bubbles:!0,detail:e});this.dispatchEvent(t)})}connectedCallback(){super.connectedCallback(),this.range.setAttribute("aria-label",as.VOLUME())}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),(e===H.MEDIA_VOLUME||e===H.MEDIA_MUTED)&&(this.range.valueAsNumber=Rot(this),this.range.setAttribute("aria-valuetext",kot(this.range.valueAsNumber)),this.updateBar())}get mediaVolume(){return $r(this,H.MEDIA_VOLUME,Cot)}set mediaVolume(e){hn(this,H.MEDIA_VOLUME,e)}get mediaMuted(){return In(this,H.MEDIA_MUTED)}set mediaMuted(e){$n(this,H.MEDIA_MUTED,e)}get mediaVolumeUnavailable(){return fn(this,H.MEDIA_VOLUME_UNAVAILABLE)}set mediaVolumeUnavailable(e){pn(this,H.MEDIA_VOLUME_UNAVAILABLE,e)}}se.customElements.get("media-volume-range")||se.customElements.define("media-volume-range",Iot);var $ot=Object.defineProperty,Dot=Object.getPrototypeOf,Lot=Reflect.get,Oot=(r,e,t)=>e in r?$ot(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nr=(r,e,t)=>(Oot(r,typeof e!="symbol"?e+"":e,t),t),xM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},te=(r,e,t)=>(xM(r,e,"read from private field"),t?t.call(r):e.get(r)),Ke=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Xe=(r,e,t,n)=>(xM(r,e,"write to private field"),e.set(r,t),t),wr=(r,e,t)=>(xM(r,e,"access private method"),t),LR=(r,e,t)=>Lot(Dot(r),t,e),dre=class{addEventListener(){}removeEventListener(){}dispatchEvent(e){return!0}};if(typeof DocumentFragment>"u"){class r extends dre{}globalThis.DocumentFragment=r}var Pot=class extends dre{},Mot={get(r){},define(r,e,t){},getName(r){return null},upgrade(r){},whenDefined(r){return Promise.resolve(Pot)}},Not={customElements:Mot},Fot=typeof window>"u"||typeof globalThis.customElements>"u",OR=Fot?Not:globalThis,Bot=()=>{try{return"0.22.0"}catch{}return"UNKNOWN"},Uot=Bot(),Wot=()=>Uot,wM=["abort","canplay","canplaythrough","durationchange","emptied","encrypted","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting","waitingforkey","resize","enterpictureinpicture","leavepictureinpicture","webkitbeginfullscreen","webkitendfullscreen","webkitpresentationmodechanged"];function Hot(r){return`
    <style>
      :host {
        display: inline-flex;
        line-height: 0;
        flex-direction: column;
        justify-content: end;
      }

      audio {
        width: 100%;
      }
    </style>
    <slot name="media">
      <audio${fre(r)}></audio>
    </slot>
    <slot></slot>
  `}function Vot(r){return`
    <style>
      :host {
        display: inline-block;
        line-height: 0;
      }

      video {
        max-width: 100%;
        max-height: 100%;
        min-width: 100%;
        min-height: 100%;
        object-fit: var(--media-object-fit, contain);
        object-position: var(--media-object-position, 50% 50%);
      }

      video::-webkit-media-text-track-container {
        transform: var(--media-webkit-text-track-transform);
        transition: var(--media-webkit-text-track-transition);
      }
    </style>
    <slot name="media">
      <video${fre(r)}></video>
    </slot>
    <slot></slot>
  `}var hre=(r,{tag:e,is:t})=>{var n,i,s,a,o,l,c,u,d,h,f,m,g,y,b,E,w;let A=(i=(n=globalThis.document)==null?void 0:n.createElement)==null?void 0:i.call(n,e,{is:t}),S=A?Got(A):[];return s=class extends r{constructor(){super(),Ke(this,h),Ke(this,m),Ke(this,y),Ke(this,E),Ke(this,c,void 0),Ke(this,u,void 0),Ke(this,d,new Map)}static get observedAttributes(){var _,C,k;return wr(_=s,o,l).call(_),[...(k=(C=A?.constructor)==null?void 0:C.observedAttributes)!=null?k:[],"autopictureinpicture","disablepictureinpicture","disableremoteplayback","autoplay","controls","controlslist","crossorigin","loop","muted","playsinline","poster","preload","src"]}get nativeEl(){var _,C,k;return wr(this,h,f).call(this),(k=(C=(_=te(this,u))!=null?_:this.shadowRoot.querySelector(e))!=null?C:this.querySelector(":scope > [slot=media]"))!=null?k:this.querySelector(e)}set nativeEl(_){Xe(this,u,_)}get defaultMuted(){return this.hasAttribute("muted")}set defaultMuted(_){this.toggleAttribute("muted",!!_)}get src(){return this.getAttribute("src")}set src(_){this.setAttribute("src",`${_}`)}get preload(){var _,C;return(C=this.getAttribute("preload"))!=null?C:(_=this.nativeEl)==null?void 0:_.preload}set preload(_){this.setAttribute("preload",`${_}`)}init(){var _,C;if(!this.shadowRoot){this.attachShadow({mode:"open"});let k=qot(this.attributes);t&&(k.is=t),e&&(k.part=e),this.shadowRoot.innerHTML=this.constructor.getTemplateHTML(k)}this.nativeEl.muted=this.hasAttribute("muted");for(let k of S)wr(this,y,b).call(this,k);this.shadowRoot.addEventListener("slotchange",this),wr(this,m,g).call(this);for(let k of this.constructor.Events)(C=(_=this.shadowRoot).addEventListener)==null||C.call(_,k,this,!0)}handleEvent(_){if(_.type==="slotchange"){wr(this,m,g).call(this);return}_.target===this.nativeEl&&this.dispatchEvent(new CustomEvent(_.type,{detail:_.detail}))}attributeChangedCallback(_,C,k){wr(this,h,f).call(this),wr(this,E,w).call(this,_,C,k)}connectedCallback(){wr(this,h,f).call(this)}},a=new WeakMap,o=new WeakSet,l=function(){if(te(this,a))return;Xe(this,a,!0);let _=new Set(this.observedAttributes);_.delete("muted");for(let C of S)if(!(C in this.prototype))if(typeof A[C]=="function")this.prototype[C]=function(...k){return wr(this,h,f).call(this),this.call?this.call(C,...k):this.nativeEl[C].apply(this.nativeEl,k)};else{let k={get(){var D,I,L;wr(this,h,f).call(this);let M=C.toLowerCase();if(_.has(M)){let F=this.getAttribute(M);return F===null?!1:F===""?!0:F}return(L=(D=this.get)==null?void 0:D.call(this,C))!=null?L:(I=this.nativeEl)==null?void 0:I[C]}};C!==C.toUpperCase()&&(k.set=function(D){wr(this,h,f).call(this);let I=C.toLowerCase();if(_.has(I)){D===!0||D===!1||D==null?this.toggleAttribute(I,!!D):this.setAttribute(I,D);return}if(this.set){this.set(C,D);return}this.nativeEl[C]=D}),Object.defineProperty(this.prototype,C,k)}},c=new WeakMap,u=new WeakMap,d=new WeakMap,h=new WeakSet,f=function(){te(this,c)||(Xe(this,c,!0),this.init())},m=new WeakSet,g=function(){let _=new Map(te(this,d));this.shadowRoot.querySelector("slot:not([name])").assignedElements({flatten:!0}).filter(C=>["track","source"].includes(C.localName)).forEach(C=>{var k,D;_.delete(C);let I=te(this,d).get(C);I||(I=C.cloneNode(),te(this,d).set(C,I)),(D=(k=this.nativeEl).append)==null||D.call(k,I),I.localName==="track"&&I.default&&(I.kind==="chapters"||I.kind==="metadata")&&I.track.mode==="disabled"&&(I.track.mode="hidden")}),_.forEach(C=>C.remove())},y=new WeakSet,b=function(_){if(Object.prototype.hasOwnProperty.call(this,_)){let C=this[_];delete this[_],this[_]=C}},E=new WeakSet,w=function(_,C,k){var D,I,L,M,F,U;["id","class"].includes(_)||!s.observedAttributes.includes(_)&&this.constructor.observedAttributes.includes(_)||(k===null?(I=(D=this.nativeEl).removeAttribute)==null||I.call(D,_):((M=(L=this.nativeEl).getAttribute)==null?void 0:M.call(L,_))!=k&&((U=(F=this.nativeEl).setAttribute)==null||U.call(F,_,k)))},Ke(s,o),nr(s,"getTemplateHTML",e.endsWith("audio")?Hot:Vot),nr(s,"shadowRootOptions",{mode:"open"}),nr(s,"Events",wM),Ke(s,a,void 0),s};function Got(r){let e=[];for(let t=Object.getPrototypeOf(r);t&&t!==HTMLElement.prototype;t=Object.getPrototypeOf(t))e.push(...Object.getOwnPropertyNames(t));return e}function fre(r){let e="";for(let t in r){let n=r[t];n===""?e+=` ${t}`:e+=` ${t}="${n}"`}return e}function qot(r){let e={};for(let t of r)e[t.name]=t.value;return e}var XU,PR=hre((XU=globalThis.HTMLElement)!=null?XU:class{},{tag:"video"}),ZU;hre((ZU=globalThis.HTMLElement)!=null?ZU:class{},{tag:"audio"});var wd=new WeakMap,MR=class extends Error{},jot=class extends Error{},Kot=globalThis.WeakRef?class extends Set{add(r){super.add(new WeakRef(r))}forEach(r){super.forEach(e=>{let t=e.deref();t&&r(t)})}}:Set;function zot(r){var e,t,n;(t=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&t.isAvailable?(n=globalThis.cast)!=null&&n.framework?r():customElements.whenDefined("google-cast-button").then(r):globalThis.__onGCastApiAvailable=()=>{customElements.whenDefined("google-cast-button").then(r)}}function Yot(){return globalThis.chrome}function Qot(){var r;let e="https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1";if((r=globalThis.chrome)!=null&&r.cast||document.querySelector(`script[src="${e}"]`))return;let t=document.createElement("script");t.src=e,document.head.append(t)}function Ud(){var r,e;return(e=(r=globalThis.cast)==null?void 0:r.framework)==null?void 0:e.CastContext.getInstance()}function TM(){var r;return(r=Ud())==null?void 0:r.getCurrentSession()}function SM(){var r;return(r=TM())==null?void 0:r.getSessionObj().media[0]}function Xot(r){return new Promise((e,t)=>{SM().editTracksInfo(r,e,t)})}function Zot(r){return new Promise((e,t)=>{SM().getStatus(r,e,t)})}function pre(r){return Ud().setOptions({...mre(),...r})}function mre(){return{receiverApplicationId:"CC1AD845",autoJoinPolicy:"origin_scoped",androidReceiverCompatible:!1,language:"en-US",resumeSavedSession:!0}}var TE=new Kot,pc=new WeakSet,an;zot(()=>{var r,e,t,n;if(!((e=(r=globalThis.chrome)==null?void 0:r.cast)!=null&&e.isAvailable)){console.debug("chrome.cast.isAvailable",(n=(t=globalThis.chrome)==null?void 0:t.cast)==null?void 0:n.isAvailable);return}an||(an=cast.framework,Ud().addEventListener(an.CastContextEventType.CAST_STATE_CHANGED,i=>{TE.forEach(s=>{var a,o;return(o=(a=wd.get(s)).onCastStateChanged)==null?void 0:o.call(a,i)})}),Ud().addEventListener(an.CastContextEventType.SESSION_STATE_CHANGED,i=>{TE.forEach(s=>{var a,o;return(o=(a=wd.get(s)).onSessionStateChanged)==null?void 0:o.call(a,i)})}),TE.forEach(i=>{var s,a;return(a=(s=wd.get(i)).init)==null?void 0:a.call(s)}))});var JU=0,Ht,SE,ws,ac,Sf,sf,ad,wD,oc,ku,TD,eW,Ww,SD,AD,gre,AE,_D,CD,tW,_E,NR,Jot=class extends EventTarget{constructor(e){super(),Ke(this,oc),Ke(this,TD),Ke(this,Ww),Ke(this,AD),Ke(this,AE),Ke(this,CD),Ke(this,_E),Ke(this,Ht,void 0),Ke(this,SE,void 0),Ke(this,ws,void 0),Ke(this,ac,void 0),Ke(this,Sf,"disconnected"),Ke(this,sf,!1),Ke(this,ad,new Set),Ke(this,wD,new WeakMap),Xe(this,Ht,e),TE.add(this),wd.set(this,{init:()=>wr(this,AE,_D).call(this),onCastStateChanged:()=>wr(this,Ww,SD).call(this),onSessionStateChanged:()=>wr(this,AD,gre).call(this),getCastPlayer:()=>te(this,oc,ku)}),wr(this,AE,_D).call(this)}get state(){return te(this,Sf)}async watchAvailability(e){if(te(this,Ht).disableRemotePlayback)throw new MR("disableRemotePlayback attribute is present.");return te(this,wD).set(e,++JU),te(this,ad).add(e),JU}async cancelWatchAvailability(e){if(te(this,Ht).disableRemotePlayback)throw new MR("disableRemotePlayback attribute is present.");e?te(this,ad).delete(e):te(this,ad).clear()}async prompt(){var e,t,n,i;if(te(this,Ht).disableRemotePlayback)throw new MR("disableRemotePlayback attribute is present.");if(!((t=(e=globalThis.chrome)==null?void 0:e.cast)!=null&&t.isAvailable))throw new jot("The RemotePlayback API is disabled on this platform.");let s=pc.has(te(this,Ht));pc.add(te(this,Ht)),pre(te(this,Ht).castOptions),Object.entries(te(this,ac)).forEach(([a,o])=>{te(this,ws).controller.addEventListener(a,o)});try{await Ud().requestSession()}catch(a){if(a==="cancel"){s||pc.delete(te(this,Ht));return}throw new Error(a)}(i=(n=wd.get(te(this,Ht)))==null?void 0:n.loadOnPrompt)==null||i.call(n)}};Ht=new WeakMap,SE=new WeakMap,ws=new WeakMap,ac=new WeakMap,Sf=new WeakMap,sf=new WeakMap,ad=new WeakMap,wD=new WeakMap,oc=new WeakSet,ku=function(){if(pc.has(te(this,Ht)))return te(this,ws)},TD=new WeakSet,eW=function(){pc.has(te(this,Ht))&&(Object.entries(te(this,ac)).forEach(([r,e])=>{te(this,ws).controller.removeEventListener(r,e)}),pc.delete(te(this,Ht)),te(this,Ht).muted=te(this,ws).isMuted,te(this,Ht).currentTime=te(this,ws).savedPlayerState.currentTime,te(this,ws).savedPlayerState.isPaused===!1&&te(this,Ht).play())},Ww=new WeakSet,SD=function(){let r=Ud().getCastState();if(pc.has(te(this,Ht))&&r==="CONNECTING"&&(Xe(this,Sf,"connecting"),this.dispatchEvent(new Event("connecting"))),!te(this,sf)&&r!=null&&r.includes("CONNECT")){Xe(this,sf,!0);for(let e of te(this,ad))e(!0)}else if(te(this,sf)&&(!r||r==="NO_DEVICES_AVAILABLE")){Xe(this,sf,!1);for(let e of te(this,ad))e(!1)}},AD=new WeakSet,gre=async function(){var r;let{SESSION_RESUMED:e}=an.SessionState;if(Ud().getSessionState()===e&&te(this,Ht).castSrc===((r=SM())==null?void 0:r.media.contentId)){pc.add(te(this,Ht)),Object.entries(te(this,ac)).forEach(([t,n])=>{te(this,ws).controller.addEventListener(t,n)});try{await Zot(new chrome.cast.media.GetStatusRequest)}catch(t){console.error(t)}te(this,ac)[an.RemotePlayerEventType.IS_PAUSED_CHANGED](),te(this,ac)[an.RemotePlayerEventType.PLAYER_STATE_CHANGED]()}},AE=new WeakSet,_D=function(){!an||te(this,SE)||(Xe(this,SE,!0),pre(te(this,Ht).castOptions),te(this,Ht).textTracks.addEventListener("change",()=>wr(this,_E,NR).call(this)),wr(this,Ww,SD).call(this),Xe(this,ws,new an.RemotePlayer),new an.RemotePlayerController(te(this,ws)),Xe(this,ac,{[an.RemotePlayerEventType.IS_CONNECTED_CHANGED]:({value:r})=>{r===!0?(Xe(this,Sf,"connected"),this.dispatchEvent(new Event("connect"))):(wr(this,TD,eW).call(this),Xe(this,Sf,"disconnected"),this.dispatchEvent(new Event("disconnect")))},[an.RemotePlayerEventType.DURATION_CHANGED]:()=>{te(this,Ht).dispatchEvent(new Event("durationchange"))},[an.RemotePlayerEventType.VOLUME_LEVEL_CHANGED]:()=>{te(this,Ht).dispatchEvent(new Event("volumechange"))},[an.RemotePlayerEventType.IS_MUTED_CHANGED]:()=>{te(this,Ht).dispatchEvent(new Event("volumechange"))},[an.RemotePlayerEventType.CURRENT_TIME_CHANGED]:()=>{var r;(r=te(this,oc,ku))!=null&&r.isMediaLoaded&&te(this,Ht).dispatchEvent(new Event("timeupdate"))},[an.RemotePlayerEventType.VIDEO_INFO_CHANGED]:()=>{te(this,Ht).dispatchEvent(new Event("resize"))},[an.RemotePlayerEventType.IS_PAUSED_CHANGED]:()=>{te(this,Ht).dispatchEvent(new Event(this.paused?"pause":"play"))},[an.RemotePlayerEventType.PLAYER_STATE_CHANGED]:()=>{var r,e;((r=te(this,oc,ku))==null?void 0:r.playerState)!==chrome.cast.media.PlayerState.PAUSED&&te(this,Ht).dispatchEvent(new Event({[chrome.cast.media.PlayerState.PLAYING]:"playing",[chrome.cast.media.PlayerState.BUFFERING]:"waiting",[chrome.cast.media.PlayerState.IDLE]:"emptied"}[(e=te(this,oc,ku))==null?void 0:e.playerState]))},[an.RemotePlayerEventType.IS_MEDIA_LOADED_CHANGED]:async()=>{var r;(r=te(this,oc,ku))!=null&&r.isMediaLoaded&&(await Promise.resolve(),wr(this,CD,tW).call(this))}}))},CD=new WeakSet,tW=function(){wr(this,_E,NR).call(this)},_E=new WeakSet,NR=async function(){var r,e,t,n,i;if(!te(this,oc,ku))return;let s=((e=(r=te(this,ws).mediaInfo)==null?void 0:r.tracks)!=null?e:[]).filter(({type:h})=>h===chrome.cast.media.TrackType.TEXT),a=[...te(this,Ht).textTracks].filter(({kind:h})=>h==="subtitles"||h==="captions"),o=s.map(({language:h,name:f,trackId:m})=>{var g;let{mode:y}=(g=a.find(b=>b.language===h&&b.label===f))!=null?g:{};return y?{mode:y,trackId:m}:!1}).filter(Boolean),l=o.filter(({mode:h})=>h!=="showing").map(({trackId:h})=>h),c=o.find(({mode:h})=>h==="showing"),u=(i=(n=(t=TM())==null?void 0:t.getSessionObj().media[0])==null?void 0:n.activeTrackIds)!=null?i:[],d=u;if(u.length&&(d=d.filter(h=>!l.includes(h))),c!=null&&c.trackId&&(d=[...d,c.trackId]),d=[...new Set(d)],!((h,f)=>h.length===f.length&&h.every(m=>f.includes(m)))(u,d))try{let h=new chrome.cast.media.EditTracksInfoRequest(d);await Xot(h)}catch(h){console.error(h)}};var elt=r=>{var e,t,n,i,s,a,o,l,c,u;return t=class extends r{constructor(){super(...arguments),Ke(this,o),Ke(this,c),Ke(this,n,{paused:!1}),Ke(this,i,mre()),Ke(this,s,void 0),Ke(this,a,void 0)}get remote(){return te(this,a)?te(this,a):Yot()?(Qot(),wd.set(this,{loadOnPrompt:()=>wr(this,c,u).call(this)}),Xe(this,a,new Jot(this))):super.remote}attributeChangedCallback(d,h,f){if(super.attributeChangedCallback(d,h,f),d==="cast-receiver"&&f){te(this,i).receiverApplicationId=f;return}if(te(this,o,l))switch(d){case"cast-stream-type":case"cast-src":this.load();break}}async load(){var d,h;if(!te(this,o,l))return super.load();let f=new chrome.cast.media.MediaInfo(this.castSrc,this.castContentType);f.customData=this.castCustomData;let m=[...this.querySelectorAll("track")].filter(({kind:E,src:w})=>w&&(E==="subtitles"||E==="captions")),g=[],y=0;m.length&&(f.tracks=m.map(E=>{let w=++y;g.length===0&&E.track.mode==="showing"&&g.push(w);let A=new chrome.cast.media.Track(w,chrome.cast.media.TrackType.TEXT);return A.trackContentId=E.src,A.trackContentType="text/vtt",A.subtype=E.kind==="captions"?chrome.cast.media.TextTrackType.CAPTIONS:chrome.cast.media.TextTrackType.SUBTITLES,A.name=E.label,A.language=E.srclang,A})),this.castStreamType==="live"?f.streamType=chrome.cast.media.StreamType.LIVE:f.streamType=chrome.cast.media.StreamType.BUFFERED,f.metadata=new chrome.cast.media.GenericMediaMetadata,f.metadata.title=this.title,f.metadata.images=[{url:this.poster}];let b=new chrome.cast.media.LoadRequest(f);b.currentTime=(d=super.currentTime)!=null?d:0,b.autoplay=!te(this,n).paused,b.activeTrackIds=g,await((h=TM())==null?void 0:h.loadMedia(b)),this.dispatchEvent(new Event("volumechange"))}play(){var d;if(te(this,o,l)){te(this,o,l).isPaused&&((d=te(this,o,l).controller)==null||d.playOrPause());return}return super.play()}pause(){var d;if(te(this,o,l)){te(this,o,l).isPaused||(d=te(this,o,l).controller)==null||d.playOrPause();return}super.pause()}get castOptions(){return te(this,i)}get castReceiver(){var d;return(d=this.getAttribute("cast-receiver"))!=null?d:void 0}set castReceiver(d){this.castReceiver!=d&&this.setAttribute("cast-receiver",`${d}`)}get castSrc(){var d,h,f;return(f=(h=this.getAttribute("cast-src"))!=null?h:(d=this.querySelector("source"))==null?void 0:d.src)!=null?f:this.currentSrc}set castSrc(d){this.castSrc!=d&&this.setAttribute("cast-src",`${d}`)}get castContentType(){var d;return(d=this.getAttribute("cast-content-type"))!=null?d:void 0}set castContentType(d){this.setAttribute("cast-content-type",`${d}`)}get castStreamType(){var d,h;return(h=(d=this.getAttribute("cast-stream-type"))!=null?d:this.streamType)!=null?h:void 0}set castStreamType(d){this.setAttribute("cast-stream-type",`${d}`)}get castCustomData(){return te(this,s)}set castCustomData(d){let h=typeof d;if(!["object","undefined"].includes(h)){console.error(`castCustomData must be nullish or an object but value was of type ${h}`);return}Xe(this,s,d)}get readyState(){if(te(this,o,l))switch(te(this,o,l).playerState){case chrome.cast.media.PlayerState.IDLE:return 0;case chrome.cast.media.PlayerState.BUFFERING:return 2;default:return 3}return super.readyState}get paused(){return te(this,o,l)?te(this,o,l).isPaused:super.paused}get muted(){var d;return te(this,o,l)?(d=te(this,o,l))==null?void 0:d.isMuted:super.muted}set muted(d){var h;if(te(this,o,l)){(d&&!te(this,o,l).isMuted||!d&&te(this,o,l).isMuted)&&((h=te(this,o,l).controller)==null||h.muteOrUnmute());return}super.muted=d}get volume(){var d,h;return te(this,o,l)?(h=(d=te(this,o,l))==null?void 0:d.volumeLevel)!=null?h:1:super.volume}set volume(d){var h;if(te(this,o,l)){te(this,o,l).volumeLevel=+d,(h=te(this,o,l).controller)==null||h.setVolumeLevel();return}super.volume=d}get duration(){var d,h,f;return te(this,o,l)&&(d=te(this,o,l))!=null&&d.isMediaLoaded?(f=(h=te(this,o,l))==null?void 0:h.duration)!=null?f:NaN:super.duration}get currentTime(){var d,h,f;return te(this,o,l)&&(d=te(this,o,l))!=null&&d.isMediaLoaded?(f=(h=te(this,o,l))==null?void 0:h.currentTime)!=null?f:0:super.currentTime}set currentTime(d){var h;if(te(this,o,l)){te(this,o,l).currentTime=d,(h=te(this,o,l).controller)==null||h.seek();return}super.currentTime=d}},n=new WeakMap,i=new WeakMap,s=new WeakMap,a=new WeakMap,o=new WeakSet,l=function(){var d,h;return(h=(d=wd.get(this.remote))==null?void 0:d.getCastPlayer)==null?void 0:h.call(d)},c=new WeakSet,u=async function(){te(this,n).paused=LR(t.prototype,this,"paused"),LR(t.prototype,this,"pause").call(this),this.muted=LR(t.prototype,this,"muted");try{await this.load()}catch(d){console.error(d)}},nr(t,"observedAttributes",[...(e=r.observedAttributes)!=null?e:[],"cast-src","cast-content-type","cast-stream-type","cast-receiver"]),t},IS=class extends Event{constructor(e,t){super(e),nr(this,"track"),this.track=t.track}},RD=new WeakMap;function We(r){var e;return(e=RD.get(r))!=null?e:tlt(r,{})}function tlt(r,e){let t=RD.get(r);return t||RD.set(r,t={}),Object.assign(t,e)}function kD(r,e){let t=r.videoTracks;We(e).media=r,We(e).renditionSet||(We(e).renditionSet=new Set);let n=We(t).trackSet;n.add(e);let i=n.size-1;i in $D.prototype||Object.defineProperty($D.prototype,i,{get(){return[...We(this).trackSet][i]}}),queueMicrotask(()=>{t.dispatchEvent(new IS("addtrack",{track:e}))})}function ID(r){var e;let t=(e=We(r).media)==null?void 0:e.videoTracks;t&&(We(t).trackSet.delete(r),queueMicrotask(()=>{t.dispatchEvent(new IS("removetrack",{track:r}))}))}function rlt(r){var e;let t=(e=We(r).media.videoTracks)!=null?e:[],n=!1;for(let i of t)i!==r&&(i.selected=!1,n=!0);if(n){if(We(t).changeRequested)return;We(t).changeRequested=!0,queueMicrotask(()=>{delete We(t).changeRequested,t.dispatchEvent(new Event("change"))})}}var Iu,$u,Du,af,mg,$D=class extends EventTarget{constructor(){super(),Ke(this,af),Ke(this,Iu,void 0),Ke(this,$u,void 0),Ke(this,Du,void 0),We(this).trackSet=new Set}[Symbol.iterator](){return te(this,af,mg).values()}get length(){return te(this,af,mg).size}getTrackById(r){var e;return(e=[...te(this,af,mg)].find(t=>t.id===r))!=null?e:null}get selectedIndex(){return[...te(this,af,mg)].findIndex(r=>r.selected)}get onaddtrack(){return te(this,Iu)}set onaddtrack(r){te(this,Iu)&&(this.removeEventListener("addtrack",te(this,Iu)),Xe(this,Iu,void 0)),typeof r=="function"&&(Xe(this,Iu,r),this.addEventListener("addtrack",r))}get onremovetrack(){return te(this,$u)}set onremovetrack(r){te(this,$u)&&(this.removeEventListener("removetrack",te(this,$u)),Xe(this,$u,void 0)),typeof r=="function"&&(Xe(this,$u,r),this.addEventListener("removetrack",r))}get onchange(){return te(this,Du)}set onchange(r){te(this,Du)&&(this.removeEventListener("change",te(this,Du)),Xe(this,Du,void 0)),typeof r=="function"&&(Xe(this,Du,r),this.addEventListener("change",r))}};Iu=new WeakMap,$u=new WeakMap,Du=new WeakMap,af=new WeakSet,mg=function(){return We(this).trackSet};var $S=class extends Event{constructor(r,e){super(r),nr(this,"rendition"),this.rendition=e.rendition}};function nlt(r,e){let t=We(r).media.videoRenditions;We(e).media=We(r).media,We(e).track=r;let n=We(r).renditionSet;n.add(e);let i=n.size-1;i in DD.prototype||Object.defineProperty(DD.prototype,i,{get(){return of(this)[i]}}),queueMicrotask(()=>{r.selected&&t.dispatchEvent(new $S("addrendition",{rendition:e}))})}function ilt(r){let e=We(r).media.videoRenditions,t=We(r).track;We(t).renditionSet.delete(r),queueMicrotask(()=>{We(r).track.selected&&e.dispatchEvent(new $S("removerendition",{rendition:r}))})}function slt(r){let e=We(r).media.videoRenditions;!e||We(e).changeRequested||(We(e).changeRequested=!0,queueMicrotask(()=>{delete We(e).changeRequested,We(r).track.selected&&e.dispatchEvent(new Event("change"))}))}function of(r){return[...We(r).media.videoTracks].filter(e=>e.selected).flatMap(e=>[...We(e).renditionSet])}var Lu,Ou,Pu,DD=class extends EventTarget{constructor(){super(...arguments),Ke(this,Lu,void 0),Ke(this,Ou,void 0),Ke(this,Pu,void 0)}[Symbol.iterator](){return of(this).values()}get length(){return of(this).length}getRenditionById(e){var t;return(t=of(this).find(n=>`${n.id}`==`${e}`))!=null?t:null}get selectedIndex(){return of(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,n]of of(this).entries())n.selected=t===e}get onaddrendition(){return te(this,Lu)}set onaddrendition(e){te(this,Lu)&&(this.removeEventListener("addrendition",te(this,Lu)),Xe(this,Lu,void 0)),typeof e=="function"&&(Xe(this,Lu,e),this.addEventListener("addrendition",e))}get onremoverendition(){return te(this,Ou)}set onremoverendition(e){te(this,Ou)&&(this.removeEventListener("removerendition",te(this,Ou)),Xe(this,Ou,void 0)),typeof e=="function"&&(Xe(this,Ou,e),this.addEventListener("removerendition",e))}get onchange(){return te(this,Pu)}set onchange(e){te(this,Pu)&&(this.removeEventListener("change",te(this,Pu)),Xe(this,Pu,void 0)),typeof e=="function"&&(Xe(this,Pu,e),this.addEventListener("change",e))}};Lu=new WeakMap,Ou=new WeakMap,Pu=new WeakMap;var gg,alt=class{constructor(){nr(this,"src"),nr(this,"id"),nr(this,"width"),nr(this,"height"),nr(this,"bitrate"),nr(this,"frameRate"),nr(this,"codec"),Ke(this,gg,!1)}get selected(){return te(this,gg)}set selected(e){te(this,gg)!==e&&(Xe(this,gg,e),slt(this))}};gg=new WeakMap;var vg,vre=class{constructor(){nr(this,"id"),nr(this,"kind"),nr(this,"label",""),nr(this,"language",""),nr(this,"sourceBuffer"),Ke(this,vg,!1)}addRendition(e,t,n,i,s,a){let o=new alt;return o.src=e,o.width=t,o.height=n,o.frameRate=a,o.bitrate=s,o.codec=i,nlt(this,o),o}removeRendition(e){ilt(e)}get selected(){return te(this,vg)}set selected(e){te(this,vg)!==e&&(Xe(this,vg,e),e===!0&&rlt(this))}};vg=new WeakMap;function olt(r,e){let t=We(r).media.audioRenditions;We(e).media=We(r).media,We(e).track=r;let n=We(r).renditionSet;n.add(e);let i=n.size-1;i in LD.prototype||Object.defineProperty(LD.prototype,i,{get(){return lf(this)[i]}}),queueMicrotask(()=>{r.enabled&&t.dispatchEvent(new $S("addrendition",{rendition:e}))})}function llt(r){let e=We(r).media.audioRenditions,t=We(r).track;We(t).renditionSet.delete(r),queueMicrotask(()=>{We(r).track.enabled&&e.dispatchEvent(new $S("removerendition",{rendition:r}))})}function clt(r){let e=We(r).media.audioRenditions;!e||We(e).changeRequested||(We(e).changeRequested=!0,queueMicrotask(()=>{delete We(e).changeRequested,We(r).track.enabled&&e.dispatchEvent(new Event("change"))}))}function lf(r){return[...We(r).media.audioTracks].filter(e=>e.enabled).flatMap(e=>[...We(e).renditionSet])}var Mu,Nu,Fu,LD=class extends EventTarget{constructor(){super(...arguments),Ke(this,Mu,void 0),Ke(this,Nu,void 0),Ke(this,Fu,void 0)}[Symbol.iterator](){return lf(this).values()}get length(){return lf(this).length}getRenditionById(e){var t;return(t=lf(this).find(n=>`${n.id}`==`${e}`))!=null?t:null}get selectedIndex(){return lf(this).findIndex(e=>e.selected)}set selectedIndex(e){for(let[t,n]of lf(this).entries())n.selected=t===e}get onaddrendition(){return te(this,Mu)}set onaddrendition(e){te(this,Mu)&&(this.removeEventListener("addrendition",te(this,Mu)),Xe(this,Mu,void 0)),typeof e=="function"&&(Xe(this,Mu,e),this.addEventListener("addrendition",e))}get onremoverendition(){return te(this,Nu)}set onremoverendition(e){te(this,Nu)&&(this.removeEventListener("removerendition",te(this,Nu)),Xe(this,Nu,void 0)),typeof e=="function"&&(Xe(this,Nu,e),this.addEventListener("removerendition",e))}get onchange(){return te(this,Fu)}set onchange(e){te(this,Fu)&&(this.removeEventListener("change",te(this,Fu)),Xe(this,Fu,void 0)),typeof e=="function"&&(Xe(this,Fu,e),this.addEventListener("change",e))}};Mu=new WeakMap,Nu=new WeakMap,Fu=new WeakMap;var yg,ult=class{constructor(){nr(this,"src"),nr(this,"id"),nr(this,"bitrate"),nr(this,"codec"),Ke(this,yg,!1)}get selected(){return te(this,yg)}set selected(e){te(this,yg)!==e&&(Xe(this,yg,e),clt(this))}};yg=new WeakMap;function OD(r,e){let t=r.audioTracks;We(e).media=r,We(e).renditionSet||(We(e).renditionSet=new Set);let n=We(t).trackSet;n.add(e);let i=n.size-1;i in MD.prototype||Object.defineProperty(MD.prototype,i,{get(){return[...We(this).trackSet][i]}}),queueMicrotask(()=>{t.dispatchEvent(new IS("addtrack",{track:e}))})}function PD(r){var e;let t=(e=We(r).media)==null?void 0:e.audioTracks;t&&(We(t).trackSet.delete(r),queueMicrotask(()=>{t.dispatchEvent(new IS("removetrack",{track:r}))}))}function dlt(r){let e=We(r).media.audioTracks;!e||We(e).changeRequested||(We(e).changeRequested=!0,queueMicrotask(()=>{delete We(e).changeRequested,e.dispatchEvent(new Event("change"))}))}var Bu,Uu,Wu,bg,CE,MD=class extends EventTarget{constructor(){super(),Ke(this,bg),Ke(this,Bu,void 0),Ke(this,Uu,void 0),Ke(this,Wu,void 0),We(this).trackSet=new Set}[Symbol.iterator](){return te(this,bg,CE).values()}get length(){return te(this,bg,CE).size}getTrackById(e){var t;return(t=[...te(this,bg,CE)].find(n=>n.id===e))!=null?t:null}get onaddtrack(){return te(this,Bu)}set onaddtrack(e){te(this,Bu)&&(this.removeEventListener("addtrack",te(this,Bu)),Xe(this,Bu,void 0)),typeof e=="function"&&(Xe(this,Bu,e),this.addEventListener("addtrack",e))}get onremovetrack(){return te(this,Uu)}set onremovetrack(e){te(this,Uu)&&(this.removeEventListener("removetrack",te(this,Uu)),Xe(this,Uu,void 0)),typeof e=="function"&&(Xe(this,Uu,e),this.addEventListener("removetrack",e))}get onchange(){return te(this,Wu)}set onchange(e){te(this,Wu)&&(this.removeEventListener("change",te(this,Wu)),Xe(this,Wu,void 0)),typeof e=="function"&&(Xe(this,Wu,e),this.addEventListener("change",e))}};Bu=new WeakMap,Uu=new WeakMap,Wu=new WeakMap,bg=new WeakSet,CE=function(){return We(this).trackSet};var Eg,yre=class{constructor(){nr(this,"id"),nr(this,"kind"),nr(this,"label",""),nr(this,"language",""),nr(this,"sourceBuffer"),Ke(this,Eg,!1)}addRendition(e,t,n){let i=new ult;return i.src=e,i.codec=t,i.bitrate=n,olt(this,i),i}removeRendition(e){llt(e)}get enabled(){return te(this,Eg)}set enabled(e){te(this,Eg)!==e&&(Xe(this,Eg,e),dlt(this))}};Eg=new WeakMap;var rW=Hw(globalThis.HTMLMediaElement,"video"),nW=Hw(globalThis.HTMLMediaElement,"audio");function hlt(r){if(!(r!=null&&r.prototype))return r;let e=Hw(r,"video");(!e||`${e}`.includes("[native code]"))&&Object.defineProperty(r.prototype,"videoTracks",{get(){return flt(this)}});let t=Hw(r,"audio");(!t||`${t}`.includes("[native code]"))&&Object.defineProperty(r.prototype,"audioTracks",{get(){return plt(this)}}),"addVideoTrack"in r.prototype||(r.prototype.addVideoTrack=function(s,a="",o=""){let l=new vre;return l.kind=s,l.label=a,l.language=o,kD(this,l),l}),"removeVideoTrack"in r.prototype||(r.prototype.removeVideoTrack=ID),"addAudioTrack"in r.prototype||(r.prototype.addAudioTrack=function(s,a="",o=""){let l=new yre;return l.kind=s,l.label=a,l.language=o,OD(this,l),l}),"removeAudioTrack"in r.prototype||(r.prototype.removeAudioTrack=PD),"videoRenditions"in r.prototype||Object.defineProperty(r.prototype,"videoRenditions",{get(){return n(this)}});let n=s=>{let a=We(s).videoRenditions;return a||(a=new DD,We(a).media=s,We(s).videoRenditions=a),a};"audioRenditions"in r.prototype||Object.defineProperty(r.prototype,"audioRenditions",{get(){return i(this)}});let i=s=>{let a=We(s).audioRenditions;return a||(a=new LD,We(a).media=s,We(s).audioRenditions=a),a};return r}function Hw(r,e){var t;if(r!=null&&r.prototype)return(t=Object.getOwnPropertyDescriptor(r.prototype,`${e}Tracks`))==null?void 0:t.get}function flt(r){var e;let t=We(r).videoTracks;if(!t&&(t=new $D,We(r).videoTracks=t,rW)){let n=rW.call((e=r.nativeEl)!=null?e:r);for(let i of n)kD(r,i);n.addEventListener("change",()=>{t.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",i=>{if([...t].some(s=>s instanceof vre)){for(let s of n)ID(s);return}kD(r,i.track)}),n.addEventListener("removetrack",i=>{ID(i.track)})}return t}function plt(r){var e;let t=We(r).audioTracks;if(!t&&(t=new MD,We(r).audioTracks=t,nW)){let n=nW.call((e=r.nativeEl)!=null?e:r);for(let i of n)OD(r,i);n.addEventListener("change",()=>{t.dispatchEvent(new Event("change"))}),n.addEventListener("addtrack",i=>{if([...t].some(s=>s instanceof yre)){for(let s of n)PD(s);return}OD(r,i.track)}),n.addEventListener("removetrack",i=>{PD(i.track)})}return t}wM.push("castchange","entercast","leavecast");var de={BEACON_COLLECTION_DOMAIN:"beacon-collection-domain",CUSTOM_DOMAIN:"custom-domain",DEBUG:"debug",DISABLE_TRACKING:"disable-tracking",DISABLE_COOKIES:"disable-cookies",DRM_TOKEN:"drm-token",PLAYBACK_TOKEN:"playback-token",ENV_KEY:"env-key",MAX_RESOLUTION:"max-resolution",MIN_RESOLUTION:"min-resolution",RENDITION_ORDER:"rendition-order",PROGRAM_START_TIME:"program-start-time",PROGRAM_END_TIME:"program-end-time",ASSET_START_TIME:"asset-start-time",ASSET_END_TIME:"asset-end-time",METADATA_URL:"metadata-url",PLAYBACK_ID:"playback-id",PLAYER_SOFTWARE_NAME:"player-software-name",PLAYER_SOFTWARE_VERSION:"player-software-version",PREFER_CMCD:"prefer-cmcd",PREFER_PLAYBACK:"prefer-playback",START_TIME:"start-time",STREAM_TYPE:"stream-type",TARGET_LIVE_WINDOW:"target-live-window",LIVE_EDGE_OFFSET:"live-edge-offset",TYPE:"type"},mlt=Object.values(de),glt=Wot(),vlt="mux-video",Ua,xg,RE,wg,kE,IE,$E,DE,LE,Tg,OE,ylt=class extends PR{constructor(){super(),Ke(this,Tg),Ke(this,Ua,void 0),Ke(this,xg,void 0),Ke(this,RE,void 0),Ke(this,wg,{}),Ke(this,kE,{}),Ke(this,IE,void 0),Ke(this,$E,void 0),Ke(this,DE,void 0),Ke(this,LE,void 0),Xe(this,RE,jit())}static get observedAttributes(){var e;return[...mlt,...(e=PR.observedAttributes)!=null?e:[]]}get preferCmcd(){var e;return(e=this.getAttribute(de.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?Cw.includes(e)?this.setAttribute(de.PREFER_CMCD,e):console.warn(`Invalid value for preferCmcd. Must be one of ${Cw.join()}`):this.removeAttribute(de.PREFER_CMCD))}get playerInitTime(){return te(this,RE)}get playerSoftwareName(){var e;return(e=te(this,DE))!=null?e:vlt}set playerSoftwareName(e){Xe(this,DE,e)}get playerSoftwareVersion(){var e;return(e=te(this,$E))!=null?e:glt}set playerSoftwareVersion(e){Xe(this,$E,e)}get _hls(){var e;return(e=te(this,Ua))==null?void 0:e.engine}get mux(){var e;return(e=this.nativeEl)==null?void 0:e.mux}get error(){var e;return(e=Ree(this.nativeEl))!=null?e:null}get errorTranslator(){return te(this,LE)}set errorTranslator(e){Xe(this,LE,e)}get src(){return this.getAttribute("src")}set src(e){e!==this.src&&(e==null?this.removeAttribute("src"):this.setAttribute("src",e))}get type(){var e;return(e=this.getAttribute(de.TYPE))!=null?e:void 0}set type(e){e!==this.type&&(e?this.setAttribute(de.TYPE,e):this.removeAttribute(de.TYPE))}get autoplay(){let e=this.getAttribute("autoplay");return e===null?!1:e===""?!0:e}set autoplay(e){let t=this.autoplay;e!==t&&(e?this.setAttribute("autoplay",typeof e=="string"?e:""):this.removeAttribute("autoplay"))}get preload(){let e=this.getAttribute("preload");return e===""?"auto":["none","metadata","auto"].includes(e)?e:super.preload}set preload(e){e!=this.getAttribute("preload")&&(["","none","metadata","auto"].includes(e)?this.setAttribute("preload",e):this.removeAttribute("preload"))}get debug(){return this.getAttribute(de.DEBUG)!=null}set debug(e){e!==this.debug&&(e?this.setAttribute(de.DEBUG,""):this.removeAttribute(de.DEBUG))}get disableTracking(){return this.hasAttribute(de.DISABLE_TRACKING)}set disableTracking(e){e!==this.disableTracking&&this.toggleAttribute(de.DISABLE_TRACKING,!!e)}get disableCookies(){return this.hasAttribute(de.DISABLE_COOKIES)}set disableCookies(e){e!==this.disableCookies&&(e?this.setAttribute(de.DISABLE_COOKIES,""):this.removeAttribute(de.DISABLE_COOKIES))}get startTime(){let e=this.getAttribute(de.START_TIME);if(e==null)return;let t=+e;return Number.isNaN(t)?void 0:t}set startTime(e){e!==this.startTime&&(e==null?this.removeAttribute(de.START_TIME):this.setAttribute(de.START_TIME,`${e}`))}get playbackId(){var e;return this.hasAttribute(de.PLAYBACK_ID)?this.getAttribute(de.PLAYBACK_ID):(e=Cee(this.src))!=null?e:void 0}set playbackId(e){e!==this.playbackId&&(e?this.setAttribute(de.PLAYBACK_ID,e):this.removeAttribute(de.PLAYBACK_ID))}get maxResolution(){var e;return(e=this.getAttribute(de.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(de.MAX_RESOLUTION,e):this.removeAttribute(de.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(de.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(de.MIN_RESOLUTION,e):this.removeAttribute(de.MIN_RESOLUTION))}get renditionOrder(){var e;return(e=this.getAttribute(de.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(de.RENDITION_ORDER,e):this.removeAttribute(de.RENDITION_ORDER))}get programStartTime(){let e=this.getAttribute(de.PROGRAM_START_TIME);if(e==null)return;let t=+e;return Number.isNaN(t)?void 0:t}set programStartTime(e){e==null?this.removeAttribute(de.PROGRAM_START_TIME):this.setAttribute(de.PROGRAM_START_TIME,`${e}`)}get programEndTime(){let e=this.getAttribute(de.PROGRAM_END_TIME);if(e==null)return;let t=+e;return Number.isNaN(t)?void 0:t}set programEndTime(e){e==null?this.removeAttribute(de.PROGRAM_END_TIME):this.setAttribute(de.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){let e=this.getAttribute(de.ASSET_START_TIME);if(e==null)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetStartTime(e){e==null?this.removeAttribute(de.ASSET_START_TIME):this.setAttribute(de.ASSET_START_TIME,`${e}`)}get assetEndTime(){let e=this.getAttribute(de.ASSET_END_TIME);if(e==null)return;let t=+e;return Number.isNaN(t)?void 0:t}set assetEndTime(e){e==null?this.removeAttribute(de.ASSET_END_TIME):this.setAttribute(de.ASSET_END_TIME,`${e}`)}get customDomain(){var e;return(e=this.getAttribute(de.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(de.CUSTOM_DOMAIN,e):this.removeAttribute(de.CUSTOM_DOMAIN))}get drmToken(){var e;return(e=this.getAttribute(de.DRM_TOKEN))!=null?e:void 0}set drmToken(e){e!==this.drmToken&&(e?this.setAttribute(de.DRM_TOKEN,e):this.removeAttribute(de.DRM_TOKEN))}get playbackToken(){var e,t,n,i;if(this.hasAttribute(de.PLAYBACK_TOKEN))return(e=this.getAttribute(de.PLAYBACK_TOKEN))!=null?e:void 0;if(this.hasAttribute(de.PLAYBACK_ID)){let[,s]=QP((t=this.playbackId)!=null?t:"");return(n=new URLSearchParams(s).get("token"))!=null?n:void 0}if(this.src)return(i=new URLSearchParams(this.src).get("token"))!=null?i:void 0}set playbackToken(e){e!==this.playbackToken&&(e?this.setAttribute(de.PLAYBACK_TOKEN,e):this.removeAttribute(de.PLAYBACK_TOKEN))}get tokens(){let e=this.getAttribute(de.PLAYBACK_TOKEN),t=this.getAttribute(de.DRM_TOKEN);return{...te(this,kE),...e!=null?{playback:e}:{},...t!=null?{drm:t}:{}}}set tokens(e){Xe(this,kE,e??{})}get ended(){return $ee(this.nativeEl,this._hls)}get envKey(){var e;return(e=this.getAttribute(de.ENV_KEY))!=null?e:void 0}set envKey(e){e!==this.envKey&&(e?this.setAttribute(de.ENV_KEY,e):this.removeAttribute(de.ENV_KEY))}get beaconCollectionDomain(){var e;return(e=this.getAttribute(de.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(de.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(de.BEACON_COLLECTION_DOMAIN))}get streamType(){var e;return(e=this.getAttribute(de.STREAM_TYPE))!=null?e:Z$(this.nativeEl)}set streamType(e){e!==this.streamType&&(e?this.setAttribute(de.STREAM_TYPE,e):this.removeAttribute(de.STREAM_TYPE))}get targetLiveWindow(){return this.hasAttribute(de.TARGET_LIVE_WINDOW)?+this.getAttribute(de.TARGET_LIVE_WINDOW):Yit(this.nativeEl)}set targetLiveWindow(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(de.TARGET_LIVE_WINDOW):this.setAttribute(de.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e,t;if(this.hasAttribute(de.LIVE_EDGE_OFFSET)){let{liveEdgeOffset:n}=this,i=(e=this.nativeEl.seekable.end(0))!=null?e:0,s=(t=this.nativeEl.seekable.start(0))!=null?t:0;return Math.max(s,i-n)}return Qit(this.nativeEl)}get liveEdgeOffset(){if(this.hasAttribute(de.LIVE_EDGE_OFFSET))return+this.getAttribute(de.LIVE_EDGE_OFFSET)}set liveEdgeOffset(e){e!=this.targetLiveWindow&&(e==null?this.removeAttribute(de.LIVE_EDGE_OFFSET):this.setAttribute(de.LIVE_EDGE_OFFSET,`${+e}`))}get seekable(){return eM(this.nativeEl)}async addCuePoints(e){return xee(this.nativeEl,e)}get activeCuePoint(){return wee(this.nativeEl)}get cuePoints(){return Cit(this.nativeEl)}async addChapters(e){return See(this.nativeEl,e)}get activeChapter(){return Aee(this.nativeEl)}get chapters(){return kit(this.nativeEl)}getStartDate(){return $it(this.nativeEl,this._hls)}get currentPdt(){return Dit(this.nativeEl,this._hls)}get preferPlayback(){let e=this.getAttribute(de.PREFER_PLAYBACK);if(e===ro.MSE||e===ro.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===ro.MSE||e===ro.NATIVE?this.setAttribute(de.PREFER_PLAYBACK,e):this.removeAttribute(de.PREFER_PLAYBACK))}get metadata(){return{...this.getAttributeNames().filter(e=>e.startsWith("metadata-")&&![de.METADATA_URL].includes(e)).reduce((e,t)=>{let n=this.getAttribute(t);return n!=null&&(e[t.replace(/^metadata-/,"").replace(/-/g,"_")]=n),e},{}),...te(this,wg)}}set metadata(e){Xe(this,wg,e??{}),this.mux&&this.mux.emit("hb",te(this,wg))}get _hlsConfig(){return te(this,IE)}set _hlsConfig(e){Xe(this,IE,e)}load(){Xe(this,Ua,Jit(this,this.nativeEl,te(this,Ua)))}unload(){Dee(this.nativeEl,te(this,Ua)),Xe(this,Ua,void 0)}attributeChangedCallback(e,t,n){var i,s;switch(PR.observedAttributes.includes(e)&&!["src","autoplay","preload"].includes(e)&&super.attributeChangedCallback(e,t,n),e){case de.PLAYER_SOFTWARE_NAME:this.playerSoftwareName=n??void 0;break;case de.PLAYER_SOFTWARE_VERSION:this.playerSoftwareVersion=n??void 0;break;case"src":{let a=!!t,o=!!n;!a&&o?wr(this,Tg,OE).call(this):a&&!o?this.unload():a&&o&&(this.unload(),wr(this,Tg,OE).call(this));break}case"autoplay":if(n===t)break;(i=te(this,Ua))==null||i.setAutoplay(this.autoplay);break;case"preload":if(n===t)break;(s=te(this,Ua))==null||s.setPreload(n);break;case de.PLAYBACK_ID:this.src=X$(this);break;case de.DEBUG:{let a=this.debug;this.mux&&console.info("Cannot toggle debug mode of mux data after initialization. Make sure you set all metadata to override before setting the src."),this._hls&&(this._hls.config.debug=a);break}case de.METADATA_URL:n&&fetch(n).then(a=>a.json()).then(a=>this.metadata=a).catch(()=>console.error(`Unable to load or parse metadata JSON from metadata-url ${n}!`));break;case de.STREAM_TYPE:(n==null||n!==t)&&this.dispatchEvent(new CustomEvent("streamtypechange",{composed:!0,bubbles:!0}));break;case de.TARGET_LIVE_WINDOW:(n==null||n!==t)&&this.dispatchEvent(new CustomEvent("targetlivewindowchange",{composed:!0,bubbles:!0,detail:this.targetLiveWindow}));break}}connectedCallback(){var e;(e=super.connectedCallback)==null||e.call(this),this.nativeEl&&this.src&&!te(this,Ua)&&wr(this,Tg,OE).call(this)}disconnectedCallback(){this.unload()}};Ua=new WeakMap,xg=new WeakMap,RE=new WeakMap,wg=new WeakMap,kE=new WeakMap,IE=new WeakMap,$E=new WeakMap,DE=new WeakMap,LE=new WeakMap,Tg=new WeakSet,OE=async function(){te(this,xg)||(await Xe(this,xg,Promise.resolve()),Xe(this,xg,null),this.load())};var PE,ND=class extends elt(hlt(ylt)){constructor(){super(...arguments),Ke(this,PE,void 0)}get muxCastCustomData(){return{mux:{playbackId:this.playbackId,minResolution:this.minResolution,maxResolution:this.maxResolution,renditionOrder:this.renditionOrder,customDomain:this.customDomain,tokens:{drm:this.drmToken},envKey:this.envKey,metadata:this.metadata,disableCookies:this.disableCookies,disableTracking:this.disableTracking,beaconCollectionDomain:this.beaconCollectionDomain,startTime:this.startTime,preferCmcd:this.preferCmcd}}}get castCustomData(){var e;return(e=te(this,PE))!=null?e:this.muxCastCustomData}set castCustomData(e){Xe(this,PE,e)}};PE=new WeakMap;OR.customElements.get("mux-video")||(OR.customElements.define("mux-video",ND),OR.MuxVideoElement=ND);var blt=ND,bre=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},wt=(r,e,t)=>(bre(r,e,"read from private field"),t?t.call(r):e.get(r)),Qa=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},hl=(r,e,t,n)=>(bre(r,e,"write to private field"),e.set(r,t),t),cf,ME,Hu,Sg,Ql,Xl,Zl,Vu,uf,NE,zs;const iW=1,sW=0,Elt=1,xlt={processCallback(r,e,t){if(t){for(const[n,i]of e)if(n in t){const s=t[n];typeof s=="boolean"&&i instanceof oa&&typeof i.element[i.attributeName]=="boolean"?i.booleanValue=s:typeof s=="function"&&i instanceof oa?i.element[i.attributeName]=s:i.value=s}}}};class DS extends se.DocumentFragment{constructor(e,t,n=xlt){var i;super(),Qa(this,cf,void 0),Qa(this,ME,void 0),this.append(e.content.cloneNode(!0)),hl(this,cf,Ere(this)),hl(this,ME,n),(i=n.createCallback)==null||i.call(n,this,wt(this,cf),t),n.processCallback(this,wt(this,cf),t)}update(e){wt(this,ME).processCallback(this,wt(this,cf),e)}}cf=new WeakMap;ME=new WeakMap;const Ere=(r,e=[])=>{let t,n;for(const i of r.attributes||[])if(i.value.includes("{{")){const s=new Tlt;for([t,n]of oW(i.value))if(!t)s.append(n);else{const a=new oa(r,i.name,i.namespaceURI);s.append(a),e.push([n,a])}i.value=s.toString()}for(const i of r.childNodes)if(i.nodeType===iW&&!(i instanceof HTMLTemplateElement))Ere(i,e);else{const s=i.data;if(i.nodeType===iW||s.includes("{{")){const a=[];if(s)for([t,n]of oW(s))if(!t)a.push(new Text(n));else{const o=new Zp(r);a.push(o),e.push([n,o])}else if(i instanceof HTMLTemplateElement){const o=new Tre(r,i);a.push(o),e.push([o.expression,o])}i.replaceWith(...a.flatMap(o=>o.replacementNodes||[o]))}}return e},aW={},oW=r=>{let e="",t=0,n=aW[r],i=0,s;if(n)return n;for(n=[];s=r[i];i++)s==="{"&&r[i+1]==="{"&&r[i-1]!=="\\"&&r[i+2]&&++t==1?(e&&n.push([sW,e]),e="",i++):s==="}"&&r[i+1]==="}"&&r[i-1]!=="\\"&&!--t?(n.push([Elt,e.trim()]),e="",i++):e+=s||"";return e&&n.push([sW,(t>0?"{{":"")+e]),aW[r]=n},wlt=11;class xre{get value(){return""}set value(e){}toString(){return this.value}}const wre=new WeakMap;class Tlt{constructor(){Qa(this,Hu,[])}[Symbol.iterator](){return wt(this,Hu).values()}get length(){return wt(this,Hu).length}item(e){return wt(this,Hu)[e]}append(...e){for(const t of e)t instanceof oa&&wre.set(t,this),wt(this,Hu).push(t)}toString(){return wt(this,Hu).join("")}}Hu=new WeakMap;class oa extends xre{constructor(e,t,n){super(),Qa(this,Vu),Qa(this,Sg,""),Qa(this,Ql,void 0),Qa(this,Xl,void 0),Qa(this,Zl,void 0),hl(this,Ql,e),hl(this,Xl,t),hl(this,Zl,n)}get attributeName(){return wt(this,Xl)}get attributeNamespace(){return wt(this,Zl)}get element(){return wt(this,Ql)}get value(){return wt(this,Sg)}set value(e){wt(this,Sg)!==e&&(hl(this,Sg,e),!wt(this,Vu,uf)||wt(this,Vu,uf).length===1?e==null?wt(this,Ql).removeAttributeNS(wt(this,Zl),wt(this,Xl)):wt(this,Ql).setAttributeNS(wt(this,Zl),wt(this,Xl),e):wt(this,Ql).setAttributeNS(wt(this,Zl),wt(this,Xl),wt(this,Vu,uf).toString()))}get booleanValue(){return wt(this,Ql).hasAttributeNS(wt(this,Zl),wt(this,Xl))}set booleanValue(e){if(!wt(this,Vu,uf)||wt(this,Vu,uf).length===1)this.value=e?"":null;else throw new DOMException("Value is not fully templatized")}}Sg=new WeakMap;Ql=new WeakMap;Xl=new WeakMap;Zl=new WeakMap;Vu=new WeakSet;uf=function(){return wre.get(this)};class Zp extends xre{constructor(e,t){super(),Qa(this,NE,void 0),Qa(this,zs,void 0),hl(this,NE,e),hl(this,zs,t?[...t]:[new Text])}get replacementNodes(){return wt(this,zs)}get parentNode(){return wt(this,NE)}get nextSibling(){return wt(this,zs)[wt(this,zs).length-1].nextSibling}get previousSibling(){return wt(this,zs)[0].previousSibling}get value(){return wt(this,zs).map(e=>e.textContent).join("")}set value(e){this.replace(e)}replace(...e){const t=e.flat().flatMap(n=>n==null?[new Text]:n.forEach?[...n]:n.nodeType===wlt?[...n.childNodes]:n.nodeType?[n]:[new Text(n)]);t.length||t.push(new Text),hl(this,zs,Slt(wt(this,zs)[0].parentNode,wt(this,zs),t,this.nextSibling))}}NE=new WeakMap;zs=new WeakMap;class Tre extends Zp{constructor(e,t){const n=t.getAttribute("directive")||t.getAttribute("type");let i=t.getAttribute("expression")||t.getAttribute(n)||"";i.startsWith("{{")&&(i=i.trim().slice(2,-2).trim()),super(e),this.expression=i,this.template=t,this.directive=n}}function Slt(r,e,t,n=null){let i=0,s,a,o,l=t.length,c=e.length;for(;i<l&&i<c&&e[i]==t[i];)i++;for(;i<l&&i<c&&t[l-1]==e[c-1];)n=t[--c,--l];if(i==c)for(;i<l;)r.insertBefore(t[i++],n);if(i==l)for(;i<c;)r.removeChild(e[i++]);else{for(s=e[i];i<l;)o=t[i++],a=s?s.nextSibling:n,s==o?s=a:i<l&&t[i]==a?(r.replaceChild(o,s),s=a):r.insertBefore(o,s);for(;s!=n;)a=s.nextSibling,r.removeChild(s),s=a}return t}const lW={string:r=>String(r)};class Sre{constructor(e){this.template=e,this.state=void 0}}const od=new WeakMap,ld=new WeakMap,FD={partial:(r,e)=>{e[r.expression]=new Sre(r.template)},if:(r,e)=>{var t;if(Are(r.expression,e))if(od.get(r)!==r.template){od.set(r,r.template);const n=new DS(r.template,e,AM);r.replace(n),ld.set(r,n)}else(t=ld.get(r))==null||t.update(e);else r.replace(""),od.delete(r),ld.delete(r)}},Alt=Object.keys(FD),AM={processCallback(r,e,t){var n,i;if(t)for(const[s,a]of e){if(a instanceof Tre){if(!a.directive){const l=Alt.find(c=>a.template.hasAttribute(c));l&&(a.directive=l,a.expression=a.template.getAttribute(l))}(n=FD[a.directive])==null||n.call(FD,a,t);continue}let o=Are(s,t);if(o instanceof Sre){od.get(a)!==o.template?(od.set(a,o.template),o=new DS(o.template,o.state,AM),a.value=o,ld.set(a,o)):(i=ld.get(a))==null||i.update(o.state);continue}o?(a instanceof oa&&a.attributeName.startsWith("aria-")&&(o=String(o)),a instanceof oa?typeof o=="boolean"?a.booleanValue=o:typeof o=="function"?a.element[a.attributeName]=o:a.value=o:(a.value=o,od.delete(a),ld.delete(a))):a instanceof oa?a.value=void 0:(a.value=void 0,od.delete(a),ld.delete(a))}}},cW={"!":r=>!r,"!!":r=>!!r,"==":(r,e)=>r==e,"!=":(r,e)=>r!=e,">":(r,e)=>r>e,">=":(r,e)=>r>=e,"<":(r,e)=>r<e,"<=":(r,e)=>r<=e,"??":(r,e)=>r??e,"|":(r,e)=>{var t;return(t=lW[e])==null?void 0:t.call(lW,r)}};function _lt(r){return Clt(r,{boolean:/true|false/,number:/-?\d+\.?\d*/,string:/(["'])((?:\\.|[^\\])*?)\1/,operator:/[!=><][=!]?|\?\?|\|/,ws:/\s+/,param:/[$a-z_][$\w]*/i}).filter(({type:e})=>e!=="ws")}function Are(r,e={}){var t,n,i,s,a,o,l;const c=_lt(r);if(c.length===0||c.some(({type:u})=>!u))return Wm(r);if(((t=c[0])==null?void 0:t.token)===">"){const u=e[(n=c[1])==null?void 0:n.token];if(!u)return Wm(r);const d={...e};u.state=d;const h=c.slice(2);for(let f=0;f<h.length;f+=3){const m=(i=h[f])==null?void 0:i.token,g=(s=h[f+1])==null?void 0:s.token,y=(a=h[f+2])==null?void 0:a.token;m&&g==="="&&(d[m]=Hm(y,e))}return u}if(c.length===1)return h1(c[0])?Hm(c[0].token,e):Wm(r);if(c.length===2){const u=(o=c[0])==null?void 0:o.token,d=cW[u];if(!d||!h1(c[1]))return Wm(r);const h=Hm(c[1].token,e);return d(h)}if(c.length===3){const u=(l=c[1])==null?void 0:l.token,d=cW[u];if(!d||!h1(c[0])||!h1(c[2]))return Wm(r);const h=Hm(c[0].token,e);if(u==="|")return d(h,c[2].token);const f=Hm(c[2].token,e);return d(h,f)}}function Wm(r){return console.warn(`Warning: invalid expression \`${r}\``),!1}function h1({type:r}){return["number","boolean","string","param"].includes(r)}function Hm(r,e){const t=r[0],n=r.slice(-1);return r==="true"||r==="false"?r==="true":t===n&&["'",'"'].includes(t)?r.slice(1,-1):Uee(r)?parseFloat(r):e[r]}function Clt(r,e){let t,n,i;const s=[];for(;r;){i=null,t=r.length;for(const a in e)n=e[a].exec(r),n&&n.index<t&&(i={token:n[0],type:a,matches:n.slice(1)},t=n.index);t&&s.push({token:r.substr(0,t),type:void 0}),i&&s.push(i),r=r.substr(t+(i?i.token.length:0))}return s}var _M=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},BD=(r,e,t)=>(_M(r,e,"read from private field"),t?t.call(r):e.get(r)),Vm=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},cd=(r,e,t,n)=>(_M(r,e,"write to private field"),e.set(r,t),t),FR=(r,e,t)=>(_M(r,e,"access private method"),t),Hf,FE,Vf,UD,_re,BE,WD;const BR={mediatargetlivewindow:"targetlivewindow",mediastreamtype:"streamtype"},Cre=Ze.createElement("template");Cre.innerHTML=`
  <style>
    :host {
      display: inline-block;
      line-height: 0;

      /* Hide theme element until the breakpoints are available to avoid flicker. */
      visibility: hidden;
    }

    media-controller {
      width: 100%;
      height: 100%;
    }

    media-captions-button:not([mediasubtitleslist]),
    media-captions-menu:not([mediasubtitleslist]),
    media-captions-menu-button:not([mediasubtitleslist]),
    media-audio-track-menu[mediaaudiotrackunavailable],
    media-audio-track-menu-button[mediaaudiotrackunavailable],
    media-rendition-menu[mediarenditionunavailable],
    media-rendition-menu-button[mediarenditionunavailable],
    media-volume-range[mediavolumeunavailable],
    media-airplay-button[mediaairplayunavailable],
    media-fullscreen-button[mediafullscreenunavailable],
    media-cast-button[mediacastunavailable],
    media-pip-button[mediapipunavailable] {
      display: none;
    }
  </style>
`;class LS extends se.HTMLElement{constructor(){super(),Vm(this,UD),Vm(this,BE),Vm(this,Hf,void 0),Vm(this,FE,void 0),Vm(this,Vf,void 0),this.shadowRoot?this.renderRoot=this.shadowRoot:(this.renderRoot=this.attachShadow({mode:"open"}),this.createRenderer());const e=new MutationObserver(t=>{var n;this.mediaController&&!((n=this.mediaController)!=null&&n.breakpointsComputed)||t.some(i=>{const s=i.target;return s===this?!0:s.localName!=="media-controller"?!1:!!(BR[i.attributeName]||i.attributeName.startsWith("breakpoint"))})&&this.render()});e.observe(this,{attributes:!0}),e.observe(this.renderRoot,{attributes:!0,subtree:!0}),this.addEventListener(eh.BREAKPOINTS_COMPUTED,this.render),FR(this,UD,_re).call(this,"template")}get mediaController(){return this.renderRoot.querySelector("media-controller")}get template(){var e;return(e=BD(this,Hf))!=null?e:this.constructor.template}set template(e){cd(this,Vf,null),cd(this,Hf,e),this.createRenderer()}get props(){var e,t,n;const i=[...Array.from((t=(e=this.mediaController)==null?void 0:e.attributes)!=null?t:[]).filter(({name:a})=>BR[a]||a.startsWith("breakpoint")),...Array.from(this.attributes)],s={};for(const a of i){const o=(n=BR[a.name])!=null?n:Est(a.name);let{value:l}=a;l!=null?(Uee(l)&&(l=parseFloat(l)),s[o]=l===""?!0:l):s[o]=!1}return s}attributeChangedCallback(e,t,n){e==="template"&&t!=n&&FR(this,BE,WD).call(this)}connectedCallback(){FR(this,BE,WD).call(this)}createRenderer(){this.template&&this.template!==BD(this,FE)&&(cd(this,FE,this.template),this.renderer=new DS(this.template,this.props,this.constructor.processor),this.renderRoot.textContent="",this.renderRoot.append(Cre.content.cloneNode(!0),this.renderer))}render(){var e;if((e=this.renderer)==null||e.update(this.props),this.renderRoot.isConnected){const{style:t}=Yr(this.renderRoot,":host");t.visibility==="hidden"&&t.removeProperty("visibility")}}}Hf=new WeakMap;FE=new WeakMap;Vf=new WeakMap;UD=new WeakSet;_re=function(r){if(Object.prototype.hasOwnProperty.call(this,r)){const e=this[r];delete this[r],this[r]=e}};BE=new WeakSet;WD=function(){var r;const e=this.getAttribute("template");if(!e||e===BD(this,Vf))return;const t=this.getRootNode(),n=(r=t?.getElementById)==null?void 0:r.call(t,e);if(n){cd(this,Vf,e),cd(this,Hf,n),this.createRenderer();return}Rlt(e)&&(cd(this,Vf,e),klt(e).then(i=>{const s=Ze.createElement("template");s.innerHTML=i,cd(this,Hf,s),this.createRenderer()}).catch(console.error))};LS.observedAttributes=["template"];LS.processor=AM;function Rlt(r){if(!/^(\/|\.\/|https?:\/\/)/.test(r))return!1;const e=/^https?:\/\//.test(r)?void 0:location.origin;try{new URL(r,e)}catch{return!1}return!0}async function klt(r){const e=await fetch(r);if(e.status!==200)throw new Error(`Failed to load resource: the server responded with a status of ${e.status}`);return e.text()}se.customElements.get("media-theme")||se.customElements.define("media-theme",LS);function Ilt({anchor:r,floating:e,placement:t}){const n=$lt({anchor:r,floating:e}),{x:i,y:s}=Llt(n,t);return{x:i,y:s}}function $lt({anchor:r,floating:e}){return{anchor:Dlt(r,e.offsetParent),floating:{x:0,y:0,width:e.offsetWidth,height:e.offsetHeight}}}function Dlt(r,e){var t;const n=r.getBoundingClientRect(),i=(t=e?.getBoundingClientRect())!=null?t:{x:0,y:0};return{x:n.x-i.x,y:n.y-i.y,width:n.width,height:n.height}}function Llt({anchor:r,floating:e},t){const n=Olt(t)==="x"?"y":"x",i=n==="y"?"height":"width",s=Rre(t),a=r.x+r.width/2-e.width/2,o=r.y+r.height/2-e.height/2,l=r[i]/2-e[i]/2;let c;switch(s){case"top":c={x:a,y:r.y-e.height};break;case"bottom":c={x:a,y:r.y+r.height};break;case"right":c={x:r.x+r.width,y:o};break;case"left":c={x:r.x-e.width,y:o};break;default:c={x:r.x,y:r.y}}switch(t.split("-")[1]){case"start":c[n]-=l;break;case"end":c[n]+=l;break}return c}function Rre(r){return r.split("-")[0]}function Olt(r){return["top","bottom"].includes(Rre(r))?"y":"x"}class CM extends Event{constructor({action:e="auto",relatedTarget:t,...n}){super("invoke",n),this.action=e,this.relatedTarget=t}}class Plt extends Event{constructor({newState:e,oldState:t,...n}){super("toggle",n),this.newState=e,this.oldState=t}}var RM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Mt=(r,e,t)=>(RM(r,e,"read from private field"),t?t.call(r):e.get(r)),Jt=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Wa=(r,e,t,n)=>(RM(r,e,"write to private field"),e.set(r,t),t),lr=(r,e,t)=>(RM(r,e,"access private method"),t),Ha,Td,qc,UE,WE,Sd,nv,HD,kre,Vw,HE,VD,GD,Ire,qD,$re,jD,Dre,Gf,qf,jf,iv,Gw,kM,KD,Lre,IM,Ore,zD,Pre,$M,Mre,YD,Nre,QD,Fre,e0,qw,XD,Bre,t0,jw,VE,ZD;function Sp({type:r,text:e,value:t,checked:n}){const i=Ze.createElement("media-chrome-menu-item");i.type=r,i.part.add("menu-item"),i.part.add(r),i.value=t,i.checked=n;const s=Ze.createElement("span");return s.textContent=e,i.append(s),i}function Ad(r,e){let t=r.querySelector(`:scope > [slot="${e}"]`);if(t?.nodeName=="SLOT"&&(t=t.assignedElements({flatten:!0})[0]),t)return t=t.cloneNode(!0),t;const n=r.shadowRoot.querySelector(`[name="${e}"] > svg`);return n?n.cloneNode(!0):""}const Ure=Ze.createElement("template");Ure.innerHTML=`
  <style>
    :host {
      font: var(--media-font,
        var(--media-font-weight, normal)
        var(--media-font-size, 14px) /
        var(--media-text-content-height, var(--media-control-height, 24px))
        var(--media-font-family, helvetica neue, segoe ui, roboto, arial, sans-serif));
      color: var(--media-text-color, var(--media-primary-color, rgb(238 238 238)));
      background: var(--media-menu-background, var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .8))));
      border-radius: var(--media-menu-border-radius);
      border: var(--media-menu-border, none);
      display: var(--media-menu-display, inline-flex);
      transition: var(--media-menu-transition-in,
        visibility 0s,
        opacity .2s ease-out,
        transform .15s ease-out,
        left .2s ease-in-out,
        min-width .2s ease-in-out,
        min-height .2s ease-in-out
      ) !important;
      
      visibility: var(--media-menu-visibility, visible);
      opacity: var(--media-menu-opacity, 1);
      max-height: var(--media-menu-max-height, var(--_menu-max-height, 300px));
      transform: var(--media-menu-transform-in, translateY(0) scale(1));
      flex-direction: column;
      
      min-height: 0;
      position: relative;
      bottom: var(--_menu-bottom);
      box-sizing: border-box;
    }

    :host([hidden]) {
      transition: var(--media-menu-transition-out,
        visibility .15s ease-in,
        opacity .15s ease-in,
        transform .15s ease-in
      ) !important;
      visibility: var(--media-menu-hidden-visibility, hidden);
      opacity: var(--media-menu-hidden-opacity, 0);
      max-height: var(--media-menu-hidden-max-height,
        var(--media-menu-max-height, var(--_menu-max-height, 300px)));
      transform: var(--media-menu-transform-out, translateY(2px) scale(.99));
      pointer-events: none;
    }

    :host([slot="submenu"]) {
      background: none;
      width: 100%;
      min-height: 100%;
      position: absolute;
      bottom: 0;
      right: -100%;
    }

    #container {
      display: flex;
      flex-direction: column;
      min-height: 0;
      transition: transform .2s ease-out;
      transform: translate(0, 0);
    }

    #container.has-expanded {
      transition: transform .2s ease-in;
      transform: translate(-100%, 0);
    }

    button {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      outline: inherit;
      display: inline-flex;
      align-items: center;
    }

    slot[name="header"][hidden] {
      display: none;
    }

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .7em;
      border-bottom: 1px solid rgb(255 255 255 / .25);
      cursor: default;
    }

    slot[name="header"] > button[part~="back"],
    slot[name="header"]::slotted(button[part~="back"]) {
      cursor: pointer;
    }

    svg[part~="back"] {
      height: var(--media-menu-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
      margin-right: .5ch;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap);
      flex-direction: var(--media-menu-flex-direction, column);
      overflow: var(--media-menu-overflow, hidden auto);
      display: flex;
      min-height: 0;
    }

    :host([role="menu"]) slot:not([name]) {
      padding-block: .4em;
    }

    slot:not([name])::slotted([role="menu"]) {
      background: none;
    }

    media-chrome-menu-item > span {
      margin-right: .5ch;
      max-width: var(--media-menu-item-max-width);
      text-overflow: ellipsis;
      overflow: hidden;
    }
  </style>
  <style id="layout-row" media="width:0">

    slot[name="header"] > *,
    slot[name="header"]::slotted(*) {
      padding: .4em .5em;
    }

    slot:not([name]) {
      gap: var(--media-menu-gap, .25em);
      flex-direction: var(--media-menu-flex-direction, row);
      padding-inline: .5em;
    }

    media-chrome-menu-item {
      padding: .3em .5em;
    }

    media-chrome-menu-item[aria-checked="true"] {
      background: var(--media-menu-item-checked-background, rgb(255 255 255 / .2));
    }

    
    media-chrome-menu-item::part(checked-indicator) {
      display: var(--media-menu-item-checked-indicator-display, none);
    }
  </style>
  <div id="container">
    <slot name="header" hidden>
      <button part="back button" aria-label="Back to previous menu">
        <slot name="back-icon">
          <svg aria-hidden="true" viewBox="0 0 20 24" part="back indicator">
            <path d="m11.88 17.585.742-.669-4.2-4.665 4.2-4.666-.743-.669-4.803 5.335 4.803 5.334Z"/>
          </svg>
        </slot>
        <slot name="title"></slot>
      </button>
    </slot>
    <slot></slot>
  </div>
  <slot name="checked-indicator" hidden></slot>
`;const bu={STYLE:"style",HIDDEN:"hidden",DISABLED:"disabled",ANCHOR:"anchor"};class kl extends se.HTMLElement{constructor(){super(),Jt(this,HD),Jt(this,HE),Jt(this,GD),Jt(this,qD),Jt(this,jD),Jt(this,jf),Jt(this,Gw),Jt(this,KD),Jt(this,IM),Jt(this,zD),Jt(this,$M),Jt(this,YD),Jt(this,QD),Jt(this,e0),Jt(this,XD),Jt(this,t0),Jt(this,VE),Jt(this,Ha,null),Jt(this,Td,null),Jt(this,qc,null),Jt(this,UE,new Set),Jt(this,WE,void 0),Jt(this,Sd,!1),Jt(this,nv,null),Jt(this,Vw,()=>{const e=Mt(this,UE),t=new Set(this.items);for(const n of e)t.has(n)||this.dispatchEvent(new CustomEvent("removemenuitem",{detail:n}));for(const n of t)e.has(n)||this.dispatchEvent(new CustomEvent("addmenuitem",{detail:n}));Wa(this,UE,t)}),Jt(this,Gf,()=>{lr(this,jf,iv).call(this),lr(this,Gw,kM).call(this,!1)}),Jt(this,qf,()=>{lr(this,jf,iv).call(this)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.nativeEl=this.constructor.template.content.cloneNode(!0),this.shadowRoot.append(this.nativeEl)),this.container=this.shadowRoot.querySelector("#container"),this.defaultSlot=this.shadowRoot.querySelector("slot:not([name])"),this.shadowRoot.addEventListener("slotchange",this),Wa(this,WE,new MutationObserver(Mt(this,Vw))),Mt(this,WE).observe(this.defaultSlot,{childList:!0})}static get observedAttributes(){return[bu.DISABLED,bu.HIDDEN,bu.STYLE,bu.ANCHOR,Yt.MEDIA_CONTROLLER]}static formatMenuItemText(e){return e}enable(){this.addEventListener("click",this),this.addEventListener("focusout",this),this.addEventListener("keydown",this),this.addEventListener("invoke",this),this.addEventListener("toggle",this)}disable(){this.removeEventListener("click",this),this.removeEventListener("focusout",this),this.removeEventListener("keyup",this),this.removeEventListener("invoke",this),this.removeEventListener("toggle",this)}handleEvent(e){switch(e.type){case"slotchange":lr(this,HD,kre).call(this,e);break;case"invoke":lr(this,GD,Ire).call(this,e);break;case"click":lr(this,KD,Lre).call(this,e);break;case"toggle":lr(this,zD,Pre).call(this,e);break;case"focusout":lr(this,YD,Nre).call(this,e);break;case"keydown":lr(this,QD,Fre).call(this,e);break}}connectedCallback(){var e,t;Wa(this,nv,Xee(this.shadowRoot,":host")),lr(this,HE,VD).call(this),this.hasAttribute("disabled")||this.enable(),this.role||(this.role="menu"),Wa(this,Ha,eD(this)),(t=(e=Mt(this,Ha))==null?void 0:e.associateElement)==null||t.call(e,this),this.hidden||(xp(sv(this),Mt(this,Gf)),xp(this,Mt(this,qf)))}disconnectedCallback(){var e,t;K0(sv(this),Mt(this,Gf)),K0(this,Mt(this,qf)),this.disable(),(t=(e=Mt(this,Ha))==null?void 0:e.unassociateElement)==null||t.call(e,this),Wa(this,Ha,null)}attributeChangedCallback(e,t,n){var i,s,a,o;e===bu.HIDDEN&&n!==t?(Mt(this,Sd)||Wa(this,Sd,!0),this.hidden?lr(this,jD,Dre).call(this):lr(this,qD,$re).call(this),this.dispatchEvent(new Plt({oldState:this.hidden?"open":"closed",newState:this.hidden?"closed":"open",bubbles:!0}))):e===Yt.MEDIA_CONTROLLER?(t&&((s=(i=Mt(this,Ha))==null?void 0:i.unassociateElement)==null||s.call(i,this),Wa(this,Ha,null)),n&&this.isConnected&&(Wa(this,Ha,eD(this)),(o=(a=Mt(this,Ha))==null?void 0:a.associateElement)==null||o.call(a,this))):e===bu.DISABLED&&n!==t?n==null?this.enable():this.disable():e===bu.STYLE&&n!==t&&lr(this,HE,VD).call(this)}formatMenuItemText(e,t){return this.constructor.formatMenuItemText(e,t)}get anchor(){return this.getAttribute("anchor")}set anchor(e){this.setAttribute("anchor",`${e}`)}get anchorElement(){var e;return this.anchor?(e=TS(this))==null?void 0:e.querySelector(`#${this.anchor}`):null}get items(){return this.defaultSlot.assignedElements({flatten:!0}).filter(Mlt)}get radioGroupItems(){return this.items.filter(e=>e.role==="menuitemradio")}get checkedItems(){return this.items.filter(e=>e.checked)}get value(){var e,t;return(t=(e=this.checkedItems[0])==null?void 0:e.value)!=null?t:""}set value(e){const t=this.items.find(n=>n.value===e);t&&lr(this,VE,ZD).call(this,t)}focus(){if(Wa(this,Td,iM()),this.items.length){lr(this,t0,jw).call(this,this.items[0]),this.items[0].focus();return}const e=this.querySelector('[autofocus], [tabindex]:not([tabindex="-1"]), [role="menu"]');e?.focus()}handleSelect(e){var t;const n=lr(this,e0,qw).call(this,e);n&&(lr(this,VE,ZD).call(this,n,n.type==="checkbox"),Mt(this,qc)&&!this.hidden&&((t=Mt(this,Td))==null||t.focus(),this.hidden=!0))}get keysUsed(){return["Enter","Escape","Tab"," ","ArrowDown","ArrowUp","Home","End"]}handleMove(e){var t,n;const{key:i}=e,s=this.items,a=(n=(t=lr(this,e0,qw).call(this,e))!=null?t:lr(this,XD,Bre).call(this))!=null?n:s[0],o=s.indexOf(a);let l=Math.max(0,o);i==="ArrowDown"?l++:i==="ArrowUp"?l--:e.key==="Home"?l=0:e.key==="End"&&(l=s.length-1),l<0&&(l=s.length-1),l>s.length-1&&(l=0),lr(this,t0,jw).call(this,s[l]),s[l].focus()}}Ha=new WeakMap;Td=new WeakMap;qc=new WeakMap;UE=new WeakMap;WE=new WeakMap;Sd=new WeakMap;nv=new WeakMap;HD=new WeakSet;kre=function(r){const e=r.target;for(const t of e.assignedNodes({flatten:!0}))t.nodeType===3&&t.textContent.trim()===""&&t.remove();if(["header","title"].includes(e.name)){const t=this.shadowRoot.querySelector('slot[name="header"]');t.hidden=e.assignedNodes().length===0}e.name||Mt(this,Vw).call(this)};Vw=new WeakMap;HE=new WeakSet;VD=function(){var r;const e=this.shadowRoot.querySelector("#layout-row"),t=(r=getComputedStyle(this).getPropertyValue("--media-menu-layout"))==null?void 0:r.trim();e.setAttribute("media",t==="row"?"":"width:0")};GD=new WeakSet;Ire=function(r){Wa(this,qc,r.relatedTarget),Rl(this,r.relatedTarget)||(this.hidden=!this.hidden)};qD=new WeakSet;$re=function(){var r;(r=Mt(this,qc))==null||r.setAttribute("aria-expanded","true"),this.addEventListener("transitionend",()=>this.focus(),{once:!0}),xp(sv(this),Mt(this,Gf)),xp(this,Mt(this,qf))};jD=new WeakSet;Dre=function(){var r;(r=Mt(this,qc))==null||r.setAttribute("aria-expanded","false"),K0(sv(this),Mt(this,Gf)),K0(this,Mt(this,qf))};Gf=new WeakMap;qf=new WeakMap;jf=new WeakSet;iv=function(r){if(this.hasAttribute("mediacontroller")&&!this.anchor||this.hidden||!this.anchorElement)return;const{x:e,y:t}=Ilt({anchor:this.anchorElement,floating:this,placement:"top-start"});r??(r=this.offsetWidth);const i=sv(this).getBoundingClientRect(),s=i.width-e-r,a=i.height-t-this.offsetHeight,{style:o}=Mt(this,nv);o.setProperty("position","absolute"),o.setProperty("right",`${Math.max(0,s)}px`),o.setProperty("--_menu-bottom",`${a}px`);const l=getComputedStyle(this),u=o.getPropertyValue("--_menu-bottom")===l.bottom?a:parseFloat(l.bottom),d=i.height-u-parseFloat(l.marginBottom);this.style.setProperty("--_menu-max-height",`${d}px`)};Gw=new WeakSet;kM=function(r){const e=this.querySelector('[role="menuitem"][aria-haspopup][aria-expanded="true"]'),t=e?.querySelector('[role="menu"]'),{style:n}=Mt(this,nv);if(r||n.setProperty("--media-menu-transition-in","none"),t){const i=t.offsetHeight,s=Math.max(t.offsetWidth,e.offsetWidth);this.style.setProperty("min-width",`${s}px`),this.style.setProperty("min-height",`${i}px`),lr(this,jf,iv).call(this,s)}else this.style.removeProperty("min-width"),this.style.removeProperty("min-height"),lr(this,jf,iv).call(this);n.removeProperty("--media-menu-transition-in")};KD=new WeakSet;Lre=function(r){var e;if(r.stopPropagation(),r.composedPath().includes(Mt(this,IM,Ore))){(e=Mt(this,Td))==null||e.focus(),this.hidden=!0;return}const t=lr(this,e0,qw).call(this,r);!t||t.hasAttribute("disabled")||(lr(this,t0,jw).call(this,t),this.handleSelect(r))};IM=new WeakSet;Ore=function(){var r;return(r=this.shadowRoot.querySelector('slot[name="header"]').assignedElements({flatten:!0}))==null?void 0:r.find(t=>t.matches('button[part~="back"]'))};zD=new WeakSet;Pre=function(r){if(r.target===this)return;lr(this,$M,Mre).call(this);const e=Array.from(this.querySelectorAll('[role="menuitem"][aria-haspopup]'));for(const t of e)t.invokeTargetElement!=r.target&&r.newState=="open"&&t.getAttribute("aria-expanded")=="true"&&!t.invokeTargetElement.hidden&&t.invokeTargetElement.dispatchEvent(new CM({relatedTarget:t}));for(const t of e)t.setAttribute("aria-expanded",`${!t.submenuElement.hidden}`);lr(this,Gw,kM).call(this,!0)};$M=new WeakSet;Mre=function(){const e=this.querySelector('[role="menuitem"] > [role="menu"]:not([hidden])');this.container.classList.toggle("has-expanded",!!e)};YD=new WeakSet;Nre=function(r){var e;Rl(this,r.relatedTarget)||(Mt(this,Sd)&&((e=Mt(this,Td))==null||e.focus()),Mt(this,qc)&&Mt(this,qc)!==r.relatedTarget&&!this.hidden&&(this.hidden=!0))};QD=new WeakSet;Fre=function(r){var e,t,n,i,s;const{key:a,ctrlKey:o,altKey:l,metaKey:c}=r;if(!(o||l||c)&&this.keysUsed.includes(a))if(r.preventDefault(),r.stopPropagation(),a==="Tab"){if(Mt(this,Sd)){this.hidden=!0;return}r.shiftKey?(t=(e=this.previousElementSibling)==null?void 0:e.focus)==null||t.call(e):(i=(n=this.nextElementSibling)==null?void 0:n.focus)==null||i.call(n),this.blur()}else a==="Escape"?((s=Mt(this,Td))==null||s.focus(),Mt(this,Sd)&&(this.hidden=!0)):a==="Enter"||a===" "?this.handleSelect(r):this.handleMove(r)};e0=new WeakSet;qw=function(r){return r.composedPath().find(e=>["menuitemradio","menuitemcheckbox"].includes(e.role))};XD=new WeakSet;Bre=function(){return this.items.find(r=>r.tabIndex===0)};t0=new WeakSet;jw=function(r){for(const e of this.items)e.tabIndex=e===r?0:-1};VE=new WeakSet;ZD=function(r,e){const t=[...this.checkedItems];r.type==="radio"&&this.radioGroupItems.forEach(n=>n.checked=!1),e?r.checked=!r.checked:r.checked=!0,this.checkedItems.some((n,i)=>n!=t[i])&&this.dispatchEvent(new Event("change",{bubbles:!0,composed:!0}))};kl.template=Ure;function Mlt(r){return["menuitem","menuitemradio","menuitemcheckbox"].includes(r?.role)}function sv(r){var e;return(e=r.getAttribute("bounds")?Xp(r,`#${r.getAttribute("bounds")}`):Ns(r)||r.parentElement)!=null?e:r}se.customElements.get("media-chrome-menu")||se.customElements.define("media-chrome-menu",kl);var DM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},no=(r,e,t)=>(DM(r,e,"read from private field"),t?t.call(r):e.get(r)),Ko=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},UR=(r,e,t,n)=>(DM(r,e,"write to private field"),e.set(r,t),t),Xa=(r,e,t)=>(DM(r,e,"access private method"),t),GE,r0,JD,Wre,LM,Hre,OM,Vre,io,Ap,av,e2,Gre,qE,t2;const qre=Ze.createElement("template");qre.innerHTML=`
  <style>
    :host {
      transition: var(--media-menu-item-transition,
        background .15s linear,
        opacity .2s ease-in-out
      );
      outline: var(--media-menu-item-outline, 0);
      outline-offset: var(--media-menu-item-outline-offset, -1px);
      cursor: pointer;
      display: flex;
      align-items: center;
      align-self: stretch;
      justify-self: stretch;
      white-space: nowrap;
      white-space-collapse: collapse;
      text-wrap: nowrap;
      padding: .4em .8em .4em 1em;
    }

    :host(:focus-visible) {
      box-shadow: var(--media-menu-item-focus-shadow, inset 0 0 0 2px rgb(27 127 204 / .9));
      outline: var(--media-menu-item-hover-outline, 0);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host(:hover) {
      cursor: pointer;
      background: var(--media-menu-item-hover-background, rgb(92 92 102 / .5));
      outline: var(--media-menu-item-hover-outline);
      outline-offset: var(--media-menu-item-hover-outline-offset,  var(--media-menu-item-outline-offset, -1px));
    }

    :host([aria-checked="true"]) {
      background: var(--media-menu-item-checked-background);
    }

    :host([hidden]) {
      display: none;
    }

    :host([disabled]) {
      pointer-events: none;
      color: rgba(255, 255, 255, .3);
    }

    slot:not([name]) {
      width: 100%;
    }

    slot:not([name="submenu"]) {
      display: inline-flex;
      align-items: center;
      transition: inherit;
      opacity: var(--media-menu-item-opacity, 1);
    }

    slot[name="description"] {
      justify-content: end;
    }

    slot[name="description"] > span {
      display: inline-block;
      margin-inline: 1em .2em;
      max-width: var(--media-menu-item-description-max-width, 100px);
      text-overflow: ellipsis;
      overflow: hidden;
      font-size: .8em;
      font-weight: 400;
      text-align: right;
      position: relative;
      top: .04em;
    }

    slot[name="checked-indicator"] {
      display: none;
    }

    :host(:is([role="menuitemradio"],[role="menuitemcheckbox"])) slot[name="checked-indicator"] {
      display: var(--media-menu-item-checked-indicator-display, inline-block);
    }

    
    svg, img, ::slotted(svg), ::slotted(img) {
      height: var(--media-menu-item-icon-height, var(--media-control-height, 24px));
      fill: var(--media-icon-color, var(--media-primary-color, rgb(238 238 238)));
      display: block;
    }

    
    [part~="indicator"],
    ::slotted([part~="indicator"]) {
      fill: var(--media-menu-item-indicator-fill,
        var(--media-icon-color, var(--media-primary-color, rgb(238 238 238))));
      height: var(--media-menu-item-indicator-height, 1.25em);
      margin-right: .5ch;
    }

    [part~="checked-indicator"] {
      visibility: hidden;
    }

    :host([aria-checked="true"]) [part~="checked-indicator"] {
      visibility: visible;
    }
  </style>
  <slot name="checked-indicator">
    <svg aria-hidden="true" viewBox="0 1 24 24" part="checked-indicator indicator">
      <path d="m10 15.17 9.193-9.191 1.414 1.414-10.606 10.606-6.364-6.364 1.414-1.414 4.95 4.95Z"/>
    </svg>
  </slot>
  <slot name="prefix"></slot>
  <slot></slot>
  <slot name="description"></slot>
  <slot name="suffix"></slot>
  <slot name="submenu"></slot>
`;const Es={TYPE:"type",VALUE:"value",CHECKED:"checked",DISABLED:"disabled"};class OS extends se.HTMLElement{constructor(){super(),Ko(this,JD),Ko(this,LM),Ko(this,OM),Ko(this,Ap),Ko(this,e2),Ko(this,qE),Ko(this,GE,!1),Ko(this,r0,void 0),Ko(this,io,()=>{var e,t;this.setAttribute("submenusize",`${this.submenuElement.items.length}`);const n=this.shadowRoot.querySelector('slot[name="description"]'),i=(e=this.submenuElement.checkedItems)==null?void 0:e[0],s=(t=i?.dataset.description)!=null?t:i?.text,a=Ze.createElement("span");a.textContent=s??"",n.replaceChildren(a)}),this.shadowRoot||(this.attachShadow({mode:"open"}),this.shadowRoot.append(this.constructor.template.content.cloneNode(!0))),this.shadowRoot.addEventListener("slotchange",this)}static get observedAttributes(){return[Es.TYPE,Es.DISABLED,Es.CHECKED,Es.VALUE]}enable(){this.hasAttribute("tabindex")||this.setAttribute("tabindex","-1"),Gm(this)&&!this.hasAttribute("aria-checked")&&this.setAttribute("aria-checked","false"),this.addEventListener("click",this),this.addEventListener("keydown",this)}disable(){this.removeAttribute("tabindex"),this.removeEventListener("click",this),this.removeEventListener("keydown",this),this.removeEventListener("keyup",this)}handleEvent(e){switch(e.type){case"slotchange":Xa(this,JD,Wre).call(this,e);break;case"click":this.handleClick(e);break;case"keydown":Xa(this,e2,Gre).call(this,e);break;case"keyup":Xa(this,Ap,av).call(this,e);break}}attributeChangedCallback(e,t,n){e===Es.CHECKED&&Gm(this)&&!no(this,GE)?this.setAttribute("aria-checked",n!=null?"true":"false"):e===Es.TYPE&&n!==t?this.role="menuitem"+n:e===Es.DISABLED&&n!==t&&(n==null?this.enable():this.disable())}connectedCallback(){this.hasAttribute(Es.DISABLED)||this.enable(),this.role="menuitem"+this.type,UR(this,r0,r2(this,this.parentNode)),Xa(this,qE,t2).call(this)}disconnectedCallback(){this.disable(),Xa(this,qE,t2).call(this),UR(this,r0,null)}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=TS(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):this.submenuElement}get submenuElement(){return this.shadowRoot.querySelector('slot[name="submenu"]').assignedElements({flatten:!0})[0]}get type(){var e;return(e=this.getAttribute(Es.TYPE))!=null?e:""}set type(e){this.setAttribute(Es.TYPE,`${e}`)}get value(){var e;return(e=this.getAttribute(Es.VALUE))!=null?e:this.text}set value(e){this.setAttribute(Es.VALUE,e)}get text(){var e;return((e=this.textContent)!=null?e:"").trim()}get checked(){if(Gm(this))return this.getAttribute("aria-checked")==="true"}set checked(e){Gm(this)&&(UR(this,GE,!0),this.setAttribute("aria-checked",e?"true":"false"),e?this.part.add("checked"):this.part.remove("checked"))}handleClick(e){Gm(this)||this.invokeTargetElement&&Rl(this,e.target)&&this.invokeTargetElement.dispatchEvent(new CM({relatedTarget:this}))}get keysUsed(){return["Enter"," "]}}GE=new WeakMap;r0=new WeakMap;JD=new WeakSet;Wre=function(r){const e=r.target;if(!e?.name)for(const n of e.assignedNodes({flatten:!0}))n instanceof Text&&n.textContent.trim()===""&&n.remove();e.name==="submenu"&&(this.submenuElement?Xa(this,LM,Hre).call(this):Xa(this,OM,Vre).call(this))};LM=new WeakSet;Hre=async function(){this.setAttribute("aria-haspopup","menu"),this.setAttribute("aria-expanded",`${!this.submenuElement.hidden}`),this.submenuElement.addEventListener("change",no(this,io)),this.submenuElement.addEventListener("addmenuitem",no(this,io)),this.submenuElement.addEventListener("removemenuitem",no(this,io)),no(this,io).call(this)};OM=new WeakSet;Vre=function(){this.removeAttribute("aria-haspopup"),this.removeAttribute("aria-expanded"),this.submenuElement.removeEventListener("change",no(this,io)),this.submenuElement.removeEventListener("addmenuitem",no(this,io)),this.submenuElement.removeEventListener("removemenuitem",no(this,io)),no(this,io).call(this)};io=new WeakMap;Ap=new WeakSet;av=function(r){const{key:e}=r;if(!this.keysUsed.includes(e)){this.removeEventListener("keyup",Xa(this,Ap,av));return}this.handleClick(r)};e2=new WeakSet;Gre=function(r){const{metaKey:e,altKey:t,key:n}=r;if(e||t||!this.keysUsed.includes(n)){this.removeEventListener("keyup",Xa(this,Ap,av));return}this.addEventListener("keyup",Xa(this,Ap,av),{once:!0})};qE=new WeakSet;t2=function(){var r;const e=(r=no(this,r0))==null?void 0:r.radioGroupItems;if(!e)return;let t=e.filter(n=>n.getAttribute("aria-checked")==="true").pop();t||(t=e[0]);for(const n of e)n.setAttribute("aria-checked","false");t?.setAttribute("aria-checked","true")};OS.template=qre;function Gm(r){return r.type==="radio"||r.type==="checkbox"}function r2(r,e){if(!r)return null;const{host:t}=r.getRootNode();return!e&&t?r2(r,t):e?.items?e:r2(e,e?.parentNode)}se.customElements.get("media-chrome-menu-item")||se.customElements.define("media-chrome-menu-item",OS);const jre=Ze.createElement("template");jre.innerHTML=kl.template.innerHTML+`
  <style>
    :host {
      background: var(--media-settings-menu-background,
        var(--media-menu-background,
        var(--media-control-background,
        var(--media-secondary-color, rgb(20 20 30 / .8)))));
      min-width: var(--media-settings-menu-min-width, 170px);
      border-radius: 2px 2px 0 0;
      overflow: hidden;
    }

    :host([role="menu"]) {
      
      justify-content: end;
    }

    slot:not([name]) {
      justify-content: var(--media-settings-menu-justify-content);
      flex-direction: var(--media-settings-menu-flex-direction, column);
      overflow: visible;
    }

    #container.has-expanded {
      --media-settings-menu-item-opacity: 0;
    }
  </style>
`;class Kre extends kl{get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Ns(this).querySelector("media-settings-menu-button")}}Kre.template=jre;se.customElements.get("media-settings-menu")||se.customElements.define("media-settings-menu",Kre);var uW;const Kw=Ze.createElement("template");Kw.innerHTML=OS.template.innerHTML+`
  <style>
    slot:not([name="submenu"]) {
      opacity: var(--media-settings-menu-item-opacity, var(--media-menu-item-opacity));
    }

    :host([aria-expanded="true"]:hover) {
      background: transparent;
    }
  </style>
`;(uW=Kw.content)!=null&&uW.querySelector&&(Kw.content.querySelector('slot[name="suffix"]').innerHTML=`
    <svg aria-hidden="true" viewBox="0 0 20 24">
      <path d="m8.12 17.585-.742-.669 4.2-4.665-4.2-4.666.743-.669 4.803 5.335-4.803 5.334Z"/>
    </svg>
  `);class zre extends OS{}zre.template=Kw;se.customElements.get("media-settings-menu-item")||se.customElements.define("media-settings-menu-item",zre);class Jp extends cs{connectedCallback(){super.connectedCallback(),this.invokeTargetElement&&this.setAttribute("aria-haspopup","menu")}get invokeTarget(){return this.getAttribute("invoketarget")}set invokeTarget(e){this.setAttribute("invoketarget",`${e}`)}get invokeTargetElement(){var e;return this.invokeTarget?(e=TS(this))==null?void 0:e.querySelector(`#${this.invokeTarget}`):null}handleClick(){var e;(e=this.invokeTargetElement)==null||e.dispatchEvent(new CM({relatedTarget:this}))}}se.customElements.get("media-chrome-menu-button")||se.customElements.define("media-chrome-menu-button",Jp);const Yre=Ze.createElement("template");Yre.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">
    <svg aria-hidden="true" viewBox="0 0 24 24">
      <path d="M4.5 14.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Zm7.5 0a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"/>
    </svg>
  </slot>
`;class Nlt extends Jp{static get observedAttributes(){return[...super.observedAttributes,"target"]}constructor(){super({slotTemplate:Yre,tooltipContent:Pr.SETTINGS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",as.SETTINGS())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Ns(this).querySelector("media-settings-menu")}}se.customElements.get("media-settings-menu-button")||se.customElements.define("media-settings-menu-button",Nlt);var PM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Qre=(r,e,t)=>(PM(r,e,"read from private field"),t?t.call(r):e.get(r)),f1=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},n2=(r,e,t,n)=>(PM(r,e,"write to private field"),e.set(r,t),t),p1=(r,e,t)=>(PM(r,e,"access private method"),t),Ag,zw,jE,i2,KE,s2;class Flt extends kl{constructor(){super(...arguments),f1(this,jE),f1(this,KE),f1(this,Ag,[]),f1(this,zw,void 0)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_AUDIO_TRACK_LIST,H.MEDIA_AUDIO_TRACK_ENABLED,H.MEDIA_AUDIO_TRACK_UNAVAILABLE]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_AUDIO_TRACK_ENABLED&&t!==n?this.value=n:e===H.MEDIA_AUDIO_TRACK_LIST&&t!==n&&(n2(this,Ag,vst(n??"")),p1(this,jE,i2).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",p1(this,KE,s2))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",p1(this,KE,s2))}get anchorElement(){var e;return this.anchor!=="auto"?super.anchorElement:(e=Ns(this))==null?void 0:e.querySelector("media-audio-track-menu-button")}get mediaAudioTrackList(){return Qre(this,Ag)}set mediaAudioTrackList(e){n2(this,Ag,e),p1(this,jE,i2).call(this)}get mediaAudioTrackEnabled(){var e;return(e=fn(this,H.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){pn(this,H.MEDIA_AUDIO_TRACK_ENABLED,e)}}Ag=new WeakMap;zw=new WeakMap;jE=new WeakSet;i2=function(){if(Qre(this,zw)===JSON.stringify(this.mediaAudioTrackList))return;n2(this,zw,JSON.stringify(this.mediaAudioTrackList));const r=this.mediaAudioTrackList;this.defaultSlot.textContent="";for(const e of r){const t=this.formatMenuItemText(e.label,e),n=Sp({type:"radio",text:t,value:`${e.id}`,checked:e.enabled});n.prepend(Ad(this,"checked-indicator")),this.defaultSlot.append(n)}};KE=new WeakSet;s2=function(){if(this.value==null)return;const r=new se.CustomEvent(qe.MEDIA_AUDIO_TRACK_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)};se.customElements.get("media-audio-track-menu")||se.customElements.define("media-audio-track-menu",Flt);const Blt=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M11 17H9.5V7H11v10Zm-3-3H6.5v-4H8v4Zm6-5h-1.5v6H14V9Zm3 7h-1.5V8H17v8Z"/>
  <path d="M22 12c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2s10 4.477 10 10Zm-2 0a8 8 0 1 0-16 0 8 8 0 0 0 16 0Z"/>
</svg>`,Xre=Ze.createElement("template");Xre.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${Blt}</slot>
`;class Ult extends Jp{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_AUDIO_TRACK_ENABLED,H.MEDIA_AUDIO_TRACK_UNAVAILABLE]}constructor(){super({slotTemplate:Xre,tooltipContent:Pr.AUDIO_TRACK_MENU})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",as.AUDIO_TRACKS())}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Ns(this))==null?void 0:e.querySelector("media-audio-track-menu")}get mediaAudioTrackEnabled(){var e;return(e=fn(this,H.MEDIA_AUDIO_TRACK_ENABLED))!=null?e:""}set mediaAudioTrackEnabled(e){pn(this,H.MEDIA_AUDIO_TRACK_ENABLED,e)}}se.customElements.get("media-audio-track-menu-button")||se.customElements.define("media-audio-track-menu-button",Ult);var MM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Wlt=(r,e,t)=>(MM(r,e,"read from private field"),e.get(r)),WR=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},Hlt=(r,e,t,n)=>(MM(r,e,"write to private field"),e.set(r,t),t),HR=(r,e,t)=>(MM(r,e,"access private method"),t),Yw,a2,Zre,zE,o2;const Vlt=`
  <svg aria-hidden="true" viewBox="0 0 26 24" part="captions-indicator indicator">
    <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
  </svg>`,Jre=Ze.createElement("template");Jre.innerHTML=kl.template.innerHTML+`
  <slot name="captions-indicator" hidden>${Vlt}</slot>`;class ene extends kl{constructor(){super(...arguments),WR(this,a2),WR(this,zE),WR(this,Yw,void 0)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_SUBTITLES_LIST,H.MEDIA_SUBTITLES_SHOWING]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_SUBTITLES_LIST&&t!==n?HR(this,a2,Zre).call(this):e===H.MEDIA_SUBTITLES_SHOWING&&t!==n&&(this.value=n)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",HR(this,zE,o2))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",HR(this,zE,o2))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Ns(this).querySelector("media-captions-menu-button")}get mediaSubtitlesList(){return dW(this,H.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){hW(this,H.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return dW(this,H.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){hW(this,H.MEDIA_SUBTITLES_SHOWING,e)}}Yw=new WeakMap;a2=new WeakSet;Zre=function(){var r;if(Wlt(this,Yw)===JSON.stringify(this.mediaSubtitlesList))return;Hlt(this,Yw,JSON.stringify(this.mediaSubtitlesList)),this.defaultSlot.textContent="";const e=!this.value,t=Sp({type:"radio",text:this.formatMenuItemText("Off"),value:"off",checked:e});t.prepend(Ad(this,"checked-indicator")),this.defaultSlot.append(t);const n=this.mediaSubtitlesList;for(const i of n){const s=Sp({type:"radio",text:this.formatMenuItemText(i.label,i),value:nD(i),checked:this.value==nD(i)});s.prepend(Ad(this,"checked-indicator")),((r=i.kind)!=null?r:"subs")==="captions"&&s.append(Ad(this,"captions-indicator")),this.defaultSlot.append(s)}};zE=new WeakSet;o2=function(){const r=this.mediaSubtitlesShowing,e=this.getAttribute(H.MEDIA_SUBTITLES_SHOWING),t=this.value!==e;if(r?.length&&t&&this.dispatchEvent(new se.CustomEvent(qe.MEDIA_DISABLE_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:r})),!this.value||!t)return;const n=new se.CustomEvent(qe.MEDIA_SHOW_SUBTITLES_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(n)};ene.template=Jre;const dW=(r,e)=>{const t=r.getAttribute(e);return t?CS(t):[]},hW=(r,e,t)=>{if(!t?.length){r.removeAttribute(e);return}const n=X0(t);r.getAttribute(e)!==n&&r.setAttribute(e,n)};se.customElements.get("media-captions-menu")||se.customElements.define("media-captions-menu",ene);var Glt=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},qlt=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},jlt=(r,e,t,n)=>(Glt(r,e,"write to private field"),e.set(r,t),t),l2;const Klt=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M22.83 5.68a2.58 2.58 0 0 0-2.3-2.5c-3.62-.24-11.44-.24-15.06 0a2.58 2.58 0 0 0-2.3 2.5c-.23 4.21-.23 8.43 0 12.64a2.58 2.58 0 0 0 2.3 2.5c3.62.24 11.44.24 15.06 0a2.58 2.58 0 0 0 2.3-2.5c.23-4.21.23-8.43 0-12.64Zm-11.39 9.45a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.92 3.92 0 0 1 .92-2.77 3.18 3.18 0 0 1 2.43-1 2.94 2.94 0 0 1 2.13.78c.364.359.62.813.74 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.17 1.61 1.61 0 0 0-1.29.58 2.79 2.79 0 0 0-.5 1.89 3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.48 1.48 0 0 0 1-.37 2.1 2.1 0 0 0 .59-1.14l1.4.44a3.23 3.23 0 0 1-1.07 1.69Zm7.22 0a3.07 3.07 0 0 1-1.91.57 3.06 3.06 0 0 1-2.34-1 3.75 3.75 0 0 1-.92-2.67 3.88 3.88 0 0 1 .93-2.77 3.14 3.14 0 0 1 2.42-1 3 3 0 0 1 2.16.82 2.8 2.8 0 0 1 .73 1.31l-1.43.35a1.49 1.49 0 0 0-1.51-1.21 1.61 1.61 0 0 0-1.29.58A2.79 2.79 0 0 0 15 12a3 3 0 0 0 .49 1.93 1.61 1.61 0 0 0 1.27.58 1.44 1.44 0 0 0 1-.37 2.1 2.1 0 0 0 .6-1.15l1.4.44a3.17 3.17 0 0 1-1.1 1.7Z"/>
</svg>`,zlt=`<svg aria-hidden="true" viewBox="0 0 26 24">
  <path d="M17.73 14.09a1.4 1.4 0 0 1-1 .37 1.579 1.579 0 0 1-1.27-.58A3 3 0 0 1 15 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34A2.89 2.89 0 0 0 19 9.07a3 3 0 0 0-2.14-.78 3.14 3.14 0 0 0-2.42 1 3.91 3.91 0 0 0-.93 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.17 3.17 0 0 0 1.07-1.74l-1.4-.45c-.083.43-.3.822-.62 1.12Zm-7.22 0a1.43 1.43 0 0 1-1 .37 1.58 1.58 0 0 1-1.27-.58A3 3 0 0 1 7.76 12a2.8 2.8 0 0 1 .5-1.85 1.63 1.63 0 0 1 1.29-.57 1.47 1.47 0 0 1 1.51 1.2l1.43-.34a2.81 2.81 0 0 0-.74-1.32 2.94 2.94 0 0 0-2.13-.78 3.18 3.18 0 0 0-2.43 1 4 4 0 0 0-.92 2.78 3.74 3.74 0 0 0 .92 2.66 3.07 3.07 0 0 0 2.34 1 3.07 3.07 0 0 0 1.91-.57 3.23 3.23 0 0 0 1.07-1.74l-1.4-.45a2.06 2.06 0 0 1-.6 1.07Zm12.32-8.41a2.59 2.59 0 0 0-2.3-2.51C18.72 3.05 15.86 3 13 3c-2.86 0-5.72.05-7.53.17a2.59 2.59 0 0 0-2.3 2.51c-.23 4.207-.23 8.423 0 12.63a2.57 2.57 0 0 0 2.3 2.5c1.81.13 4.67.19 7.53.19 2.86 0 5.72-.06 7.53-.19a2.57 2.57 0 0 0 2.3-2.5c.23-4.207.23-8.423 0-12.63Zm-1.49 12.53a1.11 1.11 0 0 1-.91 1.11c-1.67.11-4.45.18-7.43.18-2.98 0-5.76-.07-7.43-.18a1.11 1.11 0 0 1-.91-1.11c-.21-4.14-.21-8.29 0-12.43a1.11 1.11 0 0 1 .91-1.11C7.24 4.56 10 4.49 13 4.49s5.76.07 7.43.18a1.11 1.11 0 0 1 .91 1.11c.21 4.14.21 8.29 0 12.43Z"/>
</svg>`,tne=Ze.createElement("template");tne.innerHTML=`
  <style>
    :host([aria-checked="true"]) slot[name=off] {
      display: none !important;
    }

    
    :host(:not([aria-checked="true"])) slot[name=on] {
      display: none !important;
    }

    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>

  <slot name="icon">
    <slot name="on">${Klt}</slot>
    <slot name="off">${zlt}</slot>
  </slot>
`;const fW=r=>{r.setAttribute("aria-checked",lte(r).toString())};class Ylt extends Jp{constructor(e={}){super({slotTemplate:tne,tooltipContent:Pr.CAPTIONS,...e}),qlt(this,l2,void 0),jlt(this,l2,!1)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_SUBTITLES_LIST,H.MEDIA_SUBTITLES_SHOWING]}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",as.CLOSED_CAPTIONS()),fW(this)}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_SUBTITLES_SHOWING&&fW(this)}get invokeTargetElement(){var e;return this.invokeTarget!=null?super.invokeTargetElement:(e=Ns(this))==null?void 0:e.querySelector("media-captions-menu")}get mediaSubtitlesList(){return pW(this,H.MEDIA_SUBTITLES_LIST)}set mediaSubtitlesList(e){mW(this,H.MEDIA_SUBTITLES_LIST,e)}get mediaSubtitlesShowing(){return pW(this,H.MEDIA_SUBTITLES_SHOWING)}set mediaSubtitlesShowing(e){mW(this,H.MEDIA_SUBTITLES_SHOWING,e)}}l2=new WeakMap;const pW=(r,e)=>{const t=r.getAttribute(e);return t?CS(t):[]},mW=(r,e,t)=>{if(!t?.length){r.removeAttribute(e);return}const n=X0(t);r.getAttribute(e)!==n&&r.setAttribute(e,n)};se.customElements.get("media-captions-menu-button")||se.customElements.define("media-captions-menu-button",Ylt);var rne=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},m1=(r,e,t)=>(rne(r,e,"read from private field"),t?t.call(r):e.get(r)),VR=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},qm=(r,e,t)=>(rne(r,e,"access private method"),t),df,_g,YE,QE,c2;const GR={RATES:"rates"};class Qlt extends kl{constructor(){super(),VR(this,_g),VR(this,QE),VR(this,df,new _S(this,GR.RATES,{defaultValue:Kte})),qm(this,_g,YE).call(this)}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PLAYBACK_RATE,GR.RATES]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_PLAYBACK_RATE&&t!=n?this.value=n:e===GR.RATES&&t!=n&&(m1(this,df).value=n,qm(this,_g,YE).call(this))}connectedCallback(){super.connectedCallback(),this.addEventListener("change",qm(this,QE,c2))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",qm(this,QE,c2))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Ns(this).querySelector("media-playback-rate-menu-button")}get rates(){return m1(this,df)}set rates(e){e?Array.isArray(e)&&(m1(this,df).value=e.join(" ")):m1(this,df).value="",qm(this,_g,YE).call(this)}get mediaPlaybackRate(){return $r(this,H.MEDIA_PLAYBACK_RATE,dg)}set mediaPlaybackRate(e){hn(this,H.MEDIA_PLAYBACK_RATE,e)}}df=new WeakMap;_g=new WeakSet;YE=function(){this.defaultSlot.textContent="";for(const r of this.rates){const e=Sp({type:"radio",text:this.formatMenuItemText(`${r}x`,r),value:r,checked:this.mediaPlaybackRate==r});e.prepend(Ad(this,"checked-indicator")),this.defaultSlot.append(e)}};QE=new WeakSet;c2=function(){if(!this.value)return;const r=new se.CustomEvent(qe.MEDIA_PLAYBACK_RATE_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)};se.customElements.get("media-playback-rate-menu")||se.customElements.define("media-playback-rate-menu",Qlt);var Xlt=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},g1=(r,e,t)=>(Xlt(r,e,"read from private field"),t?t.call(r):e.get(r)),Zlt=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},hf;const qR={RATES:"rates"},Jlt=[1,1.2,1.5,1.7,2],jR=1,nne=Ze.createElement("template");nne.innerHTML=`
  <style>
    :host {
      min-width: 5ch;
      padding: var(--media-button-padding, var(--media-control-padding, 10px 5px));
    }
    
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon"></slot>
`;class ect extends Jp{constructor(e={}){super({slotTemplate:nne,tooltipContent:Pr.PLAYBACK_RATE,...e}),Zlt(this,hf,new _S(this,qR.RATES,{defaultValue:Jlt})),this.container=this.shadowRoot.querySelector('slot[name="icon"]'),this.container.innerHTML=`${jR}x`}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_PLAYBACK_RATE,qR.RATES]}attributeChangedCallback(e,t,n){if(super.attributeChangedCallback(e,t,n),e===qR.RATES&&(g1(this,hf).value=n),e===H.MEDIA_PLAYBACK_RATE){const i=n?+n:Number.NaN,s=Number.isNaN(i)?jR:i;this.container.innerHTML=`${s}x`,this.setAttribute("aria-label",as.PLAYBACK_RATE({playbackRate:s}))}}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Ns(this).querySelector("media-playback-rate-menu")}get rates(){return g1(this,hf)}set rates(e){e?Array.isArray(e)&&(g1(this,hf).value=e.join(" ")):g1(this,hf).value=""}get mediaPlaybackRate(){return $r(this,H.MEDIA_PLAYBACK_RATE,jR)}set mediaPlaybackRate(e){hn(this,H.MEDIA_PLAYBACK_RATE,e)}}hf=new WeakMap;se.customElements.get("media-playback-rate-menu-button")||se.customElements.define("media-playback-rate-menu-button",ect);var NM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Cg=(r,e,t)=>(NM(r,e,"read from private field"),t?t.call(r):e.get(r)),v1=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},gW=(r,e,t,n)=>(NM(r,e,"write to private field"),e.set(r,t),t),jm=(r,e,t)=>(NM(r,e,"access private method"),t),Rg,Af,kg,XE,ZE,u2;class tct extends kl{constructor(){super(...arguments),v1(this,kg),v1(this,ZE),v1(this,Rg,[]),v1(this,Af,{})}static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_RENDITION_LIST,H.MEDIA_RENDITION_SELECTED,H.MEDIA_RENDITION_UNAVAILABLE,H.MEDIA_HEIGHT]}attributeChangedCallback(e,t,n){super.attributeChangedCallback(e,t,n),e===H.MEDIA_RENDITION_SELECTED&&t!==n?this.value=n??"auto":e===H.MEDIA_RENDITION_LIST&&t!==n?(gW(this,Rg,fst(n)),jm(this,kg,XE).call(this)):e===H.MEDIA_HEIGHT&&t!==n&&jm(this,kg,XE).call(this)}connectedCallback(){super.connectedCallback(),this.addEventListener("change",jm(this,ZE,u2))}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("change",jm(this,ZE,u2))}get anchorElement(){return this.anchor!=="auto"?super.anchorElement:Ns(this).querySelector("media-rendition-menu-button")}get mediaRenditionList(){return Cg(this,Rg)}set mediaRenditionList(e){gW(this,Rg,e),jm(this,kg,XE).call(this)}get mediaRenditionSelected(){return fn(this,H.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){pn(this,H.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return $r(this,H.MEDIA_HEIGHT)}set mediaHeight(e){hn(this,H.MEDIA_HEIGHT,e)}}Rg=new WeakMap;Af=new WeakMap;kg=new WeakSet;XE=function(){if(Cg(this,Af).mediaRenditionList===JSON.stringify(this.mediaRenditionList)&&Cg(this,Af).mediaHeight===this.mediaHeight)return;Cg(this,Af).mediaRenditionList=JSON.stringify(this.mediaRenditionList),Cg(this,Af).mediaHeight=this.mediaHeight;const r=this.mediaRenditionList.sort((i,s)=>s.height-i.height);for(const i of r)i.selected=i.id===this.mediaRenditionSelected;this.defaultSlot.textContent="";const e=!this.mediaRenditionSelected;for(const i of r){const s=this.formatMenuItemText(`${Math.min(i.width,i.height)}p`,i),a=Sp({type:"radio",text:s,value:`${i.id}`,checked:i.selected&&!e});a.prepend(Ad(this,"checked-indicator")),this.defaultSlot.append(a)}const t=Sp({type:"radio",text:this.formatMenuItemText("Auto"),value:"auto",checked:e}),n=this.mediaHeight>0?`Auto (${this.mediaHeight}p)`:"Auto";t.dataset.description=n,t.prepend(Ad(this,"checked-indicator")),this.defaultSlot.append(t)};ZE=new WeakSet;u2=function(){if(this.value==null)return;const r=new se.CustomEvent(qe.MEDIA_RENDITION_REQUEST,{composed:!0,bubbles:!0,detail:this.value});this.dispatchEvent(r)};se.customElements.get("media-rendition-menu")||se.customElements.define("media-rendition-menu",tct);const rct=`<svg aria-hidden="true" viewBox="0 0 24 24">
  <path d="M13.5 2.5h2v6h-2v-2h-11v-2h11v-2Zm4 2h4v2h-4v-2Zm-12 4h2v6h-2v-2h-3v-2h3v-2Zm4 2h12v2h-12v-2Zm1 4h2v6h-2v-2h-8v-2h8v-2Zm4 2h7v2h-7v-2Z" />
</svg>`,ine=Ze.createElement("template");ine.innerHTML=`
  <style>
    :host([aria-expanded="true"]) slot[name=tooltip] {
      display: none;
    }
  </style>
  <slot name="icon">${rct}</slot>
`;class nct extends Jp{static get observedAttributes(){return[...super.observedAttributes,H.MEDIA_RENDITION_SELECTED,H.MEDIA_RENDITION_UNAVAILABLE,H.MEDIA_HEIGHT]}constructor(){super({slotTemplate:ine,tooltipContent:Pr.RENDITIONS})}connectedCallback(){super.connectedCallback(),this.setAttribute("aria-label",as.QUALITY())}get invokeTargetElement(){return this.invokeTarget!=null?super.invokeTargetElement:Ns(this).querySelector("media-rendition-menu")}get mediaRenditionSelected(){return fn(this,H.MEDIA_RENDITION_SELECTED)}set mediaRenditionSelected(e){pn(this,H.MEDIA_RENDITION_SELECTED,e)}get mediaHeight(){return $r(this,H.MEDIA_HEIGHT)}set mediaHeight(e){hn(this,H.MEDIA_HEIGHT,e)}}se.customElements.get("media-rendition-menu-button")||se.customElements.define("media-rendition-menu-button",nct);var FM=(r,e,t)=>{if(!e.has(r))throw TypeError("Cannot "+t)},Ft=(r,e,t)=>(FM(r,e,"read from private field"),t?t.call(r):e.get(r)),Tn=(r,e,t)=>{if(e.has(r))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(r):e.set(r,t)},ml=(r,e,t,n)=>(FM(r,e,"write to private field"),e.set(r,t),t),Kr=(r,e,t)=>(FM(r,e,"access private method"),t),PS=class{addEventListener(){}removeEventListener(){}dispatchEvent(r){return!0}};if(typeof DocumentFragment>"u"){class r extends PS{}globalThis.DocumentFragment=r}var BM=class extends PS{},ict=class extends PS{},sct={get(r){},define(r,e,t){},getName(r){return null},upgrade(r){},whenDefined(r){return Promise.resolve(BM)}},JE,act=class{constructor(r,e={}){Tn(this,JE,void 0),ml(this,JE,e?.detail)}get detail(){return Ft(this,JE)}initCustomEvent(){}};JE=new WeakMap;function oct(r,e){return new BM}var sne={document:{createElement:oct},DocumentFragment,customElements:sct,CustomEvent:act,EventTarget:PS,HTMLElement:BM,HTMLVideoElement:ict},ane=typeof window>"u"||typeof globalThis.customElements>"u",Dn=ane?sne:globalThis,$c=ane?sne.document:globalThis.document;function lct(r){let e="";return Object.entries(r).forEach(([t,n])=>{n!=null&&(e+=`${d2(t)}: ${n}; `)}),e?e.trim():void 0}function d2(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function one(r){return r.replace(/[-_]([a-z])/g,(e,t)=>t.toUpperCase())}function Ss(r){if(r==null)return;let e=+r;return Number.isNaN(e)?void 0:e}function lne(r){let e=cct(r).toString();return e?"?"+e:""}function cct(r){let e={};for(let t in r)r[t]!=null&&(e[t]=r[t]);return new URLSearchParams(e)}var cne=(r,e)=>!r||!e?!1:r.contains(e)?!0:cne(r,e.getRootNode().host),une="mux.com",uct=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},dct=uct(),dne=()=>dct,hct=(r,{token:e,customDomain:t=une,thumbnailTime:n,programTime:i}={})=>{var s;let a=e==null?n:void 0,{aud:o}=(s=Bf(e))!=null?s:{};if(!(e&&o!=="t"))return`https://image.${t}/${r}/thumbnail.webp${lne({token:e,time:a,program_time:i})}`},fct=(r,{token:e,customDomain:t=une,programStartTime:n,programEndTime:i}={})=>{var s;let{aud:a}=(s=Bf(e))!=null?s:{};if(!(e&&a!=="s"))return`https://image.${t}/${r}/storyboard.vtt${lne({token:e,format:"webp",program_start_time:n,program_end_time:i})}`},UM=r=>{if(r){if([zt.LIVE,zt.ON_DEMAND].includes(r))return r;if(r!=null&&r.includes("live"))return zt.LIVE}},pct={crossorigin:"crossOrigin",playsinline:"playsInline"};function mct(r){var e;return(e=pct[r])!=null?e:one(r)}var ff,pf,_i,gct=class{constructor(e,t){Tn(this,ff,void 0),Tn(this,pf,void 0),Tn(this,_i,[]),ml(this,ff,e),ml(this,pf,t)}[Symbol.iterator](){return Ft(this,_i).values()}get length(){return Ft(this,_i).length}get value(){var e;return(e=Ft(this,_i).join(" "))!=null?e:""}set value(e){var t;e!==this.value&&(ml(this,_i,[]),this.add(...(t=e?.split(" "))!=null?t:[]))}toString(){return this.value}item(e){return Ft(this,_i)[e]}values(){return Ft(this,_i).values()}keys(){return Ft(this,_i).keys()}forEach(e){Ft(this,_i).forEach(e)}add(...e){var t,n;e.forEach(i=>{this.contains(i)||Ft(this,_i).push(i)}),!(this.value===""&&!((t=Ft(this,ff))!=null&&t.hasAttribute(`${Ft(this,pf)}`)))&&((n=Ft(this,ff))==null||n.setAttribute(`${Ft(this,pf)}`,`${this.value}`))}remove(...e){var t;e.forEach(n=>{Ft(this,_i).splice(Ft(this,_i).indexOf(n),1)}),(t=Ft(this,ff))==null||t.setAttribute(`${Ft(this,pf)}`,`${this.value}`)}contains(e){return Ft(this,_i).includes(e)}toggle(e,t){return typeof t<"u"?t?(this.add(e),!0):(this.remove(e),!1):this.contains(e)?(this.remove(e),!1):(this.add(e),!0)}replace(e,t){this.remove(e),this.add(t)}};ff=new WeakMap,pf=new WeakMap,_i=new WeakMap;var hne=`[mux-player ${dne()}]`;function al(...r){console.warn(hne,...r)}function _s(...r){console.error(hne,...r)}function fne(r){var e;let t=(e=r.message)!=null?e:"";r.context&&(t+=` ${r.context}`),r.file&&(t+=` ${ze("Read more: ")}
https://github.com/muxinc/elements/blob/main/errors/${r.file}`),al(t)}var Zn={AUTOPLAY:"autoplay",CROSSORIGIN:"crossorigin",LOOP:"loop",MUTED:"muted",PLAYSINLINE:"playsinline",PRELOAD:"preload"},Gu={VOLUME:"volume",PLAYBACKRATE:"playbackrate",MUTED:"muted"},vW=Object.freeze({length:0,start(r){let e=r>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'start' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0},end(r){let e=r>>>0;if(e>=this.length)throw new DOMException(`Failed to execute 'end' on 'TimeRanges': The index provided (${e}) is greater than or equal to the maximum bound (${this.length}).`);return 0}}),vct=wM.filter(r=>r!=="error"),yct=Object.values(Zn).filter(r=>![Zn.PLAYSINLINE].includes(r)),bct=Object.values(Gu),Ig,Ect=class extends Dn.HTMLElement{constructor(){super(),Tn(this,Ig,new WeakMap);let r=e=>{for(let t of e)t.type==="childList"&&(t.removedNodes.forEach(n=>{var i;(i=Ft(this,Ig).get(n))==null||i.remove()}),t.addedNodes.forEach(n=>{var i;let s=n;s!=null&&s.slot||(i=this.media)==null||i.append(yW(Ft(this,Ig),n))}))};new MutationObserver(r).observe(this,{childList:!0,subtree:!0})}static get observedAttributes(){return[...yct,...bct]}init(){this.querySelectorAll(":scope > :not([slot])").forEach(r=>{var e;(e=this.media)==null||e.append(yW(Ft(this,Ig),r))}),vct.forEach(r=>{var e;(e=this.media)==null||e.addEventListener(r,t=>{this.dispatchEvent(new Event(t.type))})})}attributeChangedCallback(r,e,t){var n,i;switch(r){case Gu.MUTED:{this.media&&(this.media.muted=t!=null,this.media.defaultMuted=t!=null);return}case Gu.VOLUME:{let s=(n=Ss(t))!=null?n:1;this.media&&(this.media.volume=s);return}case Gu.PLAYBACKRATE:{let s=(i=Ss(t))!=null?i:1;this.media&&(this.media.playbackRate=s,this.media.defaultPlaybackRate=s);return}}}play(){var r,e;return(e=(r=this.media)==null?void 0:r.play())!=null?e:Promise.reject()}pause(){var r;(r=this.media)==null||r.pause()}load(){var r;(r=this.media)==null||r.load()}requestCast(r){var e;return(e=this.media)==null?void 0:e.requestCast(r)}get media(){var r;return(r=this.shadowRoot)==null?void 0:r.querySelector("mux-video")}get audioTracks(){return this.media.audioTracks}get videoTracks(){return this.media.videoTracks}get audioRenditions(){return this.media.audioRenditions}get videoRenditions(){return this.media.videoRenditions}get paused(){var r,e;return(e=(r=this.media)==null?void 0:r.paused)!=null?e:!0}get duration(){var r,e;return(e=(r=this.media)==null?void 0:r.duration)!=null?e:NaN}get ended(){var r,e;return(e=(r=this.media)==null?void 0:r.ended)!=null?e:!1}get buffered(){var r,e;return(e=(r=this.media)==null?void 0:r.buffered)!=null?e:vW}get seekable(){var r,e;return(e=(r=this.media)==null?void 0:r.seekable)!=null?e:vW}get readyState(){var r,e;return(e=(r=this.media)==null?void 0:r.readyState)!=null?e:0}get videoWidth(){var r,e;return(e=(r=this.media)==null?void 0:r.videoWidth)!=null?e:0}get videoHeight(){var r,e;return(e=(r=this.media)==null?void 0:r.videoHeight)!=null?e:0}get currentSrc(){var r,e;return(e=(r=this.media)==null?void 0:r.currentSrc)!=null?e:""}get currentTime(){var r,e;return(e=(r=this.media)==null?void 0:r.currentTime)!=null?e:0}set currentTime(r){this.media&&(this.media.currentTime=Number(r))}get volume(){var r,e;return(e=(r=this.media)==null?void 0:r.volume)!=null?e:1}set volume(r){this.media&&(this.media.volume=Number(r))}get playbackRate(){var r,e;return(e=(r=this.media)==null?void 0:r.playbackRate)!=null?e:1}set playbackRate(r){this.media&&(this.media.playbackRate=Number(r))}get defaultPlaybackRate(){var r;return(r=Ss(this.getAttribute(Gu.PLAYBACKRATE)))!=null?r:1}set defaultPlaybackRate(r){r!=null?this.setAttribute(Gu.PLAYBACKRATE,`${r}`):this.removeAttribute(Gu.PLAYBACKRATE)}get crossOrigin(){return Km(this,Zn.CROSSORIGIN)}set crossOrigin(r){this.setAttribute(Zn.CROSSORIGIN,`${r}`)}get autoplay(){return Km(this,Zn.AUTOPLAY)!=null}set autoplay(r){r?this.setAttribute(Zn.AUTOPLAY,typeof r=="string"?r:""):this.removeAttribute(Zn.AUTOPLAY)}get loop(){return Km(this,Zn.LOOP)!=null}set loop(r){r?this.setAttribute(Zn.LOOP,""):this.removeAttribute(Zn.LOOP)}get muted(){var r,e;return(e=(r=this.media)==null?void 0:r.muted)!=null?e:!1}set muted(r){this.media&&(this.media.muted=!!r)}get defaultMuted(){return Km(this,Zn.MUTED)!=null}set defaultMuted(r){r?this.setAttribute(Zn.MUTED,""):this.removeAttribute(Zn.MUTED)}get playsInline(){return Km(this,Zn.PLAYSINLINE)!=null}set playsInline(r){_s("playsInline is set to true by default and is not currently supported as a setter.")}get preload(){return this.media?this.media.preload:this.getAttribute("preload")}set preload(r){["","none","metadata","auto"].includes(r)?this.setAttribute(Zn.PRELOAD,r):this.removeAttribute(Zn.PRELOAD)}};Ig=new WeakMap;function Km(r,e){return r.media?r.media.getAttribute(e):r.getAttribute(e)}function yW(r,e){let t=r.get(e);return t||(t=e.cloneNode(),r.set(e,t)),t}var bW=Ect,xct=`:host {
  --media-control-display: var(--controls);
  --media-loading-indicator-display: var(--loading-indicator);
  --media-dialog-display: var(--dialog);
  --media-play-button-display: var(--play-button);
  --media-live-button-display: var(--live-button);
  --media-seek-backward-button-display: var(--seek-backward-button);
  --media-seek-forward-button-display: var(--seek-forward-button);
  --media-mute-button-display: var(--mute-button);
  --media-captions-button-display: var(--captions-button);
  --media-captions-menu-button-display: var(--captions-menu-button, var(--media-captions-button-display));
  --media-rendition-menu-button-display: var(--rendition-menu-button);
  --media-audio-track-menu-button-display: var(--audio-track-menu-button);
  --media-airplay-button-display: var(--airplay-button);
  --media-pip-button-display: var(--pip-button);
  --media-fullscreen-button-display: var(--fullscreen-button);
  --media-cast-button-display: var(--cast-button, var(--_cast-button-drm-display));
  --media-playback-rate-button-display: var(--playback-rate-button);
  --media-playback-rate-menu-button-display: var(--playback-rate-menu-button);
  --media-volume-range-display: var(--volume-range);
  --media-time-range-display: var(--time-range);
  --media-time-display-display: var(--time-display);
  --media-duration-display-display: var(--duration-display);
  --media-title-display-display: var(--title-display);

  display: inline-block;
  width: 100%;
  line-height: 0;
}

/* Hide custom elements that are not defined yet */
:not(:defined) {
  display: none;
}

a {
  color: #fff;
  font-size: 0.9em;
  text-decoration: underline;
}

media-theme {
  width: 100%;
  height: 100%;
  direction: ltr;
}

media-poster-image {
  width: 100%;
  height: 100%;
}

media-poster-image:not([src]):not([placeholdersrc]) {
  display: none;
}

::part(top),
[part~='top'] {
  --media-control-display: var(--controls, var(--top-controls));
  --media-play-button-display: var(--play-button, var(--top-play-button));
  --media-live-button-display: var(--live-button, var(--top-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--top-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--top-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--top-mute-button));
  --media-captions-button-display: var(--captions-button, var(--top-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--top-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--top-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--top-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--top-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--top-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--top-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--top-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--top-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --captions-menu-button,
    var(--media-playback-rate-button-display, var(--top-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--top-volume-range));
  --media-time-range-display: var(--time-range, var(--top-time-range));
  --media-time-display-display: var(--time-display, var(--top-time-display));
  --media-duration-display-display: var(--duration-display, var(--top-duration-display));
  --media-title-display-display: var(--title-display, var(--top-title-display));
}

::part(center),
[part~='center'] {
  --media-control-display: var(--controls, var(--center-controls));
  --media-play-button-display: var(--play-button, var(--center-play-button));
  --media-live-button-display: var(--live-button, var(--center-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--center-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--center-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--center-mute-button));
  --media-captions-button-display: var(--captions-button, var(--center-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--center-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--center-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--center-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--center-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--center-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--center-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--center-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--center-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--center-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--center-volume-range));
  --media-time-range-display: var(--time-range, var(--center-time-range));
  --media-time-display-display: var(--time-display, var(--center-time-display));
  --media-duration-display-display: var(--duration-display, var(--center-duration-display));
}

::part(bottom),
[part~='bottom'] {
  --media-control-display: var(--controls, var(--bottom-controls));
  --media-play-button-display: var(--play-button, var(--bottom-play-button));
  --media-live-button-display: var(--live-button, var(--bottom-live-button));
  --media-seek-backward-button-display: var(--seek-backward-button, var(--bottom-seek-backward-button));
  --media-seek-forward-button-display: var(--seek-forward-button, var(--bottom-seek-forward-button));
  --media-mute-button-display: var(--mute-button, var(--bottom-mute-button));
  --media-captions-button-display: var(--captions-button, var(--bottom-captions-button));
  --media-captions-menu-button-display: var(
    --captions-menu-button,
    var(--media-captions-button-display, var(--bottom-captions-menu-button))
  );
  --media-rendition-menu-button-display: var(--rendition-menu-button, var(--bottom-rendition-menu-button));
  --media-audio-track-menu-button-display: var(--audio-track-menu-button, var(--bottom-audio-track-menu-button));
  --media-airplay-button-display: var(--airplay-button, var(--bottom-airplay-button));
  --media-pip-button-display: var(--pip-button, var(--bottom-pip-button));
  --media-fullscreen-button-display: var(--fullscreen-button, var(--bottom-fullscreen-button));
  --media-cast-button-display: var(--cast-button, var(--bottom-cast-button, var(--_cast-button-drm-display)));
  --media-playback-rate-button-display: var(--playback-rate-button, var(--bottom-playback-rate-button));
  --media-playback-rate-menu-button-display: var(
    --playback-rate-menu-button,
    var(--media-playback-rate-button-display, var(--bottom-playback-rate-menu-button))
  );
  --media-volume-range-display: var(--volume-range, var(--bottom-volume-range));
  --media-time-range-display: var(--time-range, var(--bottom-time-range));
  --media-time-display-display: var(--time-display, var(--bottom-time-display));
  --media-duration-display-display: var(--duration-display, var(--bottom-duration-display));
  --media-title-display-display: var(--title-display, var(--bottom-title-display));
}

:host([no-tooltips]) {
  --media-tooltip-display: none;
}
`,pne=`
  :host {
    z-index: 100;
    display: var(--media-dialog-display, flex);
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    box-sizing: border-box;
    color: #fff;
    line-height: 18px;
    font-family: Arial, sans-serif;
    padding: var(--media-dialog-backdrop-padding, 0);
    background: var(--media-dialog-backdrop-background,
      linear-gradient(to bottom, rgba(20, 20, 30, 0.7) 50%, rgba(20, 20, 30, 0.9))
    );
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-open, visibility .2s, opacity .2s) !important;
    transform: var(--media-dialog-transform-open, none) !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
  }

  :host(:not([open])) {
    /* Needs to use !important to prevent overwrite of media-chrome */
    transition: var(--media-dialog-transition-close, visibility .1s, opacity .1s) !important;
    transform: var(--media-dialog-transform-close, none) !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
  }

  :focus-visible {
    box-shadow: 0 0 0 2px rgba(27, 127, 204, 0.9);
  }

  .dialog {
    position: relative;
    box-sizing: border-box;
    background: var(--media-dialog-background, none);
    padding: var(--media-dialog-padding, 10px);
    width: min(320px, 100%);
    word-wrap: break-word;
    max-height: 100%;
    overflow: auto;
    text-align: center;
    line-height: 1.4;
  }
`,mne=$c.createElement("template");mne.innerHTML=`
  <style>
    ${pne}
  </style>

  <div class="dialog">
    <slot></slot>
  </div>
`;var Kf=class extends Dn.HTMLElement{constructor(){var r;super(),this.attachShadow({mode:"open"}),(r=this.shadowRoot)==null||r.appendChild(this.constructor.template.content.cloneNode(!0))}show(){this.setAttribute("open",""),this.dispatchEvent(new CustomEvent("open",{composed:!0,bubbles:!0})),EW(this)}close(){this.hasAttribute("open")&&(this.removeAttribute("open"),this.dispatchEvent(new CustomEvent("close",{composed:!0,bubbles:!0})),wct(this))}attributeChangedCallback(r,e,t){r==="open"&&e!==t&&(t!=null?this.show():this.close())}connectedCallback(){this.hasAttribute("role")||this.setAttribute("role","dialog"),this.hasAttribute("open")&&EW(this)}};Kf.styles=pne,Kf.template=mne,Kf.observedAttributes=["open"];function EW(r){let e=new CustomEvent("initfocus",{composed:!0,bubbles:!0,cancelable:!0});if(r.dispatchEvent(e),e.defaultPrevented)return;let t=r.querySelector("[autofocus]:not([disabled])");!t&&r.tabIndex>=0&&(t=r),t||(t=gne(r.shadowRoot)),r._previouslyFocusedElement=$c.activeElement,$c.activeElement instanceof HTMLElement&&$c.activeElement.blur(),r.addEventListener("transitionend",()=>{t instanceof HTMLElement&&t.focus({preventScroll:!0})},{once:!0})}function gne(r){let e=["button","input","keygen","select","textarea"].map(function(n){return n+":not([disabled])"});e.push('[tabindex]:not([disabled]):not([tabindex=""])');let t=r?.querySelector(e.join(", "));if(!t&&"attachShadow"in Element.prototype){let n=r?.querySelectorAll("*")||[];for(let i=0;i<n.length&&!(n[i].tagName&&n[i].shadowRoot&&(t=gne(n[i].shadowRoot),t));i++);}return t}function wct(r){r._previouslyFocusedElement instanceof HTMLElement&&r._previouslyFocusedElement.focus()}Dn.customElements.get("media-dialog")||(Dn.customElements.define("media-dialog",Kf),Dn.MediaDialog=Kf);var vne=Kf,yne=$c.createElement("template");yne.innerHTML=`
  <style>
    ${vne.styles}

    .close {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;
      width: 28px;
      height: 28px;
      position: absolute;
      top: 1rem;
      right: 1rem;
    }
  </style>

  <div class="dialog">
    <slot></slot>
  </div>

  <slot name="close">
    <button class="close" tabindex="0">
      <svg fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
      </svg>
    </button>
  </slot>
`;var h2=class extends vne{constructor(){var r,e;super(),(e=(r=this.shadowRoot)==null?void 0:r.querySelector(".close"))==null||e.addEventListener("click",()=>{this.close()})}};h2.template=yne;Dn.customElements.get("mxp-dialog")||(Dn.customElements.define("mxp-dialog",h2),Dn.MxpDialog=h2);var zm=new WeakMap,Tct=class bne{constructor(e,t){this.element=e,this.type=t,this.element.addEventListener(this.type,this);let n=zm.get(this.element);n&&n.set(this.type,this)}set(e){if(typeof e=="function")this.handleEvent=e.bind(this.element);else if(typeof e=="object"&&typeof e.handleEvent=="function")this.handleEvent=e.handleEvent.bind(e);else{this.element.removeEventListener(this.type,this);let t=zm.get(this.element);t&&t.delete(this.type)}}static for(e){zm.has(e.element)||zm.set(e.element,new Map);let t=e.attributeName.slice(2),n=zm.get(e.element);return n&&n.has(t)?n.get(t):new bne(e.element,t)}};function Sct(r,e){return r instanceof oa&&r.attributeName.startsWith("on")?(Tct.for(r).set(e),r.element.removeAttributeNS(r.attributeNamespace,r.attributeName),!0):!1}function Act(r,e){return e instanceof Ene&&r instanceof Zp?(e.renderInto(r),!0):!1}function _ct(r,e){return e instanceof DocumentFragment&&r instanceof Zp?(e.childNodes.length&&r.replace(...e.childNodes),!0):!1}function Cct(r,e){if(r instanceof oa){let t=r.attributeNamespace,n=r.element.getAttributeNS(t,r.attributeName);return String(e)!==n&&(r.value=String(e)),!0}return r.value=String(e),!0}function Rct(r,e){if(r instanceof oa&&e instanceof Element){let t=r.element;return t[r.attributeName]!==e&&(r.element.removeAttributeNS(r.attributeNamespace,r.attributeName),t[r.attributeName]=e),!0}return!1}function kct(r,e){if(typeof e=="boolean"&&r instanceof oa){let t=r.attributeNamespace,n=r.element.hasAttributeNS(t,r.attributeName);return e!==n&&(r.booleanValue=e),!0}return!1}function Ict(r,e){return e===!1&&r instanceof Zp?(r.replace(""),!0):!1}function $ct(r,e){Rct(r,e)||kct(r,e)||Sct(r,e)||Ict(r,e)||Act(r,e)||_ct(r,e)||Cct(r,e)}var KR=new Map,xW=new WeakMap,wW=new WeakMap,Ene=class{constructor(e,t,n){this.strings=e,this.values=t,this.processor=n,this.stringsKey=this.strings.join("")}get template(){if(KR.has(this.stringsKey))return KR.get(this.stringsKey);{let e=$c.createElement("template"),t=this.strings.length-1;return e.innerHTML=this.strings.reduce((n,i,s)=>n+i+(s<t?`{{ ${s} }}`:""),""),KR.set(this.stringsKey,e),e}}renderInto(e){var t;let n=this.template;if(xW.get(e)!==n){xW.set(e,n);let s=new DS(n,this.values,this.processor);wW.set(e,s),e instanceof Zp?e.replace(...s.children):e.appendChild(s);return}let i=wW.get(e);(t=i?.update)==null||t.call(i,this.values)}},Dct={processCallback(r,e,t){var n;if(t){for(let[i,s]of e)if(i in t){let a=(n=t[i])!=null?n:"";$ct(s,a)}}}};function Jl(r,...e){return new Ene(r,e,Dct)}function Lct(r,e){r.renderInto(e)}var Oct=r=>{let{tokens:e}=r;return e.drm?":host { --_cast-button-drm-display: none; }":""},Pct=r=>Jl`
  <style>
    ${Oct(r)}
    ${xct}
  </style>
  ${Bct(r)}
`,Mct=r=>{let e=r.hotKeys?`${r.hotKeys}`:"";return UM(r.streamType)==="live"&&(e+=" noarrowleft noarrowright"),e},Nct={TOP:"top",CENTER:"center",BOTTOM:"bottom",LAYER:"layer",MEDIA_LAYER:"media-layer",POSTER_LAYER:"poster-layer",VERTICAL_LAYER:"vertical-layer",CENTERED_LAYER:"centered-layer",GESTURE_LAYER:"gesture-layer",CONTROLLER_LAYER:"controller",BUTTON:"button",RANGE:"range",DISPLAY:"display",CONTROL_BAR:"control-bar",MENU_BUTTON:"menu-button",LISTBOX:"listbox",OPTION:"option",POSTER:"poster",LIVE:"live",PLAY:"play",PRE_PLAY:"pre-play",SEEK_BACKWARD:"seek-backward",SEEK_FORWARD:"seek-forward",MUTE:"mute",CAPTIONS:"captions",AIRPLAY:"airplay",PIP:"pip",FULLSCREEN:"fullscreen",CAST:"cast",PLAYBACK_RATE:"playback-rate",VOLUME:"volume",TIME:"time",TITLE:"title",AUDIO_TRACK:"audio-track",RENDITION:"rendition"},Fct=Object.values(Nct).join(", "),Bct=r=>{var e,t,n,i,s,a,o,l,c,u,d,h,f,m,g,y,b,E,w,A,S,_,C,k,D,I,L,M,F,U,W,j,z,Q,V,Y,J,ue;return Jl`
  <media-theme
    template="${r.themeTemplate||!1}"
    defaultstreamtype="${(e=r.defaultStreamType)!=null?e:!1}"
    hotkeys="${Mct(r)||!1}"
    nohotkeys="${r.noHotKeys||!r.hasSrc||r.isDialogOpen||!1}"
    noautoseektolive="${!!((t=r.streamType)!=null&&t.includes(zt.LIVE))&&r.targetLiveWindow!==0}"
    novolumepref="${r.novolumepref||!1}"
    disabled="${!r.hasSrc||r.isDialogOpen}"
    audio="${(n=r.audio)!=null?n:!1}"
    style="${(i=lct({"--media-primary-color":r.primaryColor,"--media-secondary-color":r.secondaryColor,"--media-accent-color":r.accentColor}))!=null?i:!1}"
    defaultsubtitles="${!r.defaultHiddenCaptions}"
    forwardseekoffset="${(s=r.forwardSeekOffset)!=null?s:!1}"
    backwardseekoffset="${(a=r.backwardSeekOffset)!=null?a:!1}"
    playbackrates="${(o=r.playbackRates)!=null?o:!1}"
    defaultshowremainingtime="${(l=r.defaultShowRemainingTime)!=null?l:!1}"
    defaultduration="${(c=r.defaultDuration)!=null?c:!1}"
    hideduration="${(u=r.hideDuration)!=null?u:!1}"
    title="${(d=r.title)!=null?d:!1}"
    exportparts="${Fct}"
  >
    <mux-video
      slot="media"
      target-live-window="${(h=r.targetLiveWindow)!=null?h:!1}"
      stream-type="${(f=UM(r.streamType))!=null?f:!1}"
      crossorigin="${(m=r.crossOrigin)!=null?m:""}"
      playsinline
      autoplay="${(g=r.autoplay)!=null?g:!1}"
      muted="${(y=r.muted)!=null?y:!1}"
      loop="${(b=r.loop)!=null?b:!1}"
      preload="${(E=r.preload)!=null?E:!1}"
      debug="${(w=r.debug)!=null?w:!1}"
      prefer-cmcd="${(A=r.preferCmcd)!=null?A:!1}"
      disable-tracking="${(S=r.disableTracking)!=null?S:!1}"
      disable-cookies="${(_=r.disableCookies)!=null?_:!1}"
      prefer-playback="${(C=r.preferPlayback)!=null?C:!1}"
      start-time="${r.startTime!=null?r.startTime:!1}"
      beacon-collection-domain="${(k=r.beaconCollectionDomain)!=null?k:!1}"
      player-software-name="${(D=r.playerSoftwareName)!=null?D:!1}"
      player-software-version="${(I=r.playerSoftwareVersion)!=null?I:!1}"
      env-key="${(L=r.envKey)!=null?L:!1}"
      custom-domain="${(M=r.customDomain)!=null?M:!1}"
      src="${r.src?r.src:r.playbackId?X$(r):!1}"
      cast-src="${r.src?r.src:r.playbackId?X$(r):!1}"
      cast-receiver="${(F=r.castReceiver)!=null?F:!1}"
      drm-token="${(W=(U=r.tokens)==null?void 0:U.drm)!=null?W:!1}"
      exportparts="video"
    >
      ${r.storyboard?Jl`<track label="thumbnails" default kind="metadata" src="${r.storyboard}" />`:Jl``}
    </mux-video>
    <slot name="poster" slot="poster">
      <media-poster-image
        part="poster"
        exportparts="poster, img"
        src="${r.poster?r.poster:!1}"
        placeholdersrc="${(j=r.placeholder)!=null?j:!1}"
      ></media-poster-image>
    </slot>
    <mxp-dialog
      no-auto-hide
      open="${(z=r.isDialogOpen)!=null?z:!1}"
      onclose="${r.onCloseErrorDialog}"
      oninitfocus="${r.onInitFocusDialog}"
    >
      ${(Q=r.dialog)!=null&&Q.title?Jl`<h3>${r.dialog.title}</h3>`:Jl``}
      <p>
        ${(V=r.dialog)==null?void 0:V.message}
        ${(Y=r.dialog)!=null&&Y.linkUrl?Jl`<a
              href="${r.dialog.linkUrl}"
              target="_blank"
              rel="external noopener"
              aria-label="${(J=r.dialog.linkText)!=null?J:""} ${ze("(opens in a new window)")}"
              >${(ue=r.dialog.linkText)!=null?ue:r.dialog.linkUrl}</a
            >`:Jl``}
      </p>
    </mxp-dialog>
  </media-theme>
`},xne=r=>r.charAt(0).toUpperCase()+r.slice(1),Uct=(r,e=!1)=>{var t,n;if(r.muxCode){let i=xne((t=r.errorCategory)!=null?t:"video"),s=ES((n=r.errorCategory)!=null?n:cr.VIDEO);if(r.muxCode===Qe.NETWORK_OFFLINE)return ze("Your device appears to be offline",e);if(r.muxCode===Qe.NETWORK_TOKEN_EXPIRED)return ze("{category} URL has expired",e).format({category:i});if([Qe.NETWORK_TOKEN_SUB_MISMATCH,Qe.NETWORK_TOKEN_AUD_MISMATCH,Qe.NETWORK_TOKEN_AUD_MISSING,Qe.NETWORK_TOKEN_MALFORMED].includes(r.muxCode))return ze("{category} URL is formatted incorrectly",e).format({category:i});if(r.muxCode===Qe.NETWORK_TOKEN_MISSING)return ze("Invalid {categoryName} URL",e).format({categoryName:s});if(r.muxCode===Qe.NETWORK_NOT_FOUND)return ze("{category} does not exist",e).format({category:i});if(r.muxCode===Qe.NETWORK_NOT_READY)return ze("{category} is not currently available",e).format({category:i})}if(r.code){if(r.code===Fe.MEDIA_ERR_NETWORK)return ze("Network Error",e);if(r.code===Fe.MEDIA_ERR_DECODE)return ze("Media Error",e);if(r.code===Fe.MEDIA_ERR_SRC_NOT_SUPPORTED)return ze("Source Not Supported",e)}return ze("Error",e)},Wct=(r,e=!1)=>{var t,n;if(r.muxCode){let i=xne((t=r.errorCategory)!=null?t:"video"),s=ES((n=r.errorCategory)!=null?n:cr.VIDEO);return r.muxCode===Qe.NETWORK_OFFLINE?ze("Check your internet connection and try reloading this video.",e):r.muxCode===Qe.NETWORK_TOKEN_EXPIRED?ze("The video’s secured {tokenNamePrefix}-token has expired.",e).format({tokenNamePrefix:s}):r.muxCode===Qe.NETWORK_TOKEN_SUB_MISMATCH?ze("The video’s playback ID does not match the one encoded in the {tokenNamePrefix}-token.",e).format({tokenNamePrefix:s}):r.muxCode===Qe.NETWORK_TOKEN_MALFORMED?ze("{category} URL is formatted incorrectly",e).format({category:i}):[Qe.NETWORK_TOKEN_AUD_MISMATCH,Qe.NETWORK_TOKEN_AUD_MISSING].includes(r.muxCode)?ze("The {tokenNamePrefix}-token is formatted with incorrect information.",e).format({tokenNamePrefix:s}):[Qe.NETWORK_TOKEN_MISSING,Qe.NETWORK_INVALID_URL].includes(r.muxCode)?ze("The video URL or {tokenNamePrefix}-token are formatted with incorrect or incomplete information.",e).format({tokenNamePrefix:s}):r.muxCode===Qe.NETWORK_NOT_FOUND?"":r.muxCode===Qe.NETWORK_NOT_READY?ze("The live stream or video file are not yet ready.",e):r.message}return r.code&&(r.code===Fe.MEDIA_ERR_NETWORK||r.code===Fe.MEDIA_ERR_DECODE||(r.code,Fe.MEDIA_ERR_SRC_NOT_SUPPORTED)),r.message},Hct=(r,e=!1)=>{let t=Uct(r,e),n=Wct(r,e);return{title:t,message:n}},Vct=r=>{if(r.muxCode){if(r.muxCode===Qe.NETWORK_TOKEN_EXPIRED)return"403-expired-token.md";if(r.muxCode===Qe.NETWORK_TOKEN_MALFORMED)return"403-malformatted-token.md";if([Qe.NETWORK_TOKEN_AUD_MISMATCH,Qe.NETWORK_TOKEN_AUD_MISSING].includes(r.muxCode))return"403-incorrect-aud-value.md";if(r.muxCode===Qe.NETWORK_TOKEN_SUB_MISMATCH)return"403-playback-id-mismatch.md";if(r.muxCode===Qe.NETWORK_TOKEN_MISSING)return"missing-signed-tokens.md";if(r.muxCode===Qe.NETWORK_NOT_FOUND)return"404-not-found.md";if(r.muxCode===Qe.NETWORK_NOT_READY)return"412-not-playable.md"}if(r.code){if(r.code===Fe.MEDIA_ERR_NETWORK)return"";if(r.code===Fe.MEDIA_ERR_DECODE)return"media-decode-error.md";if(r.code===Fe.MEDIA_ERR_SRC_NOT_SUPPORTED)return"media-src-not-supported.md"}return""},Gct=(r,e)=>{let t=Vct(r);return{message:r.message,context:r.context,file:t}};function TW(r,e=!1){let t=Hct(r,e),n=Gct(r);return{dialog:t,devlog:n}}var qct=`<template id="media-theme-gerwig">
  <style>
    @keyframes pre-play-hide {
      0% {
        transform: scale(1);
        opacity: 1;
      }

      30% {
        transform: scale(0.7);
      }

      100% {
        transform: scale(1.5);
        opacity: 0;
      }
    }

    :host {
      --_primary-color: var(--media-primary-color, #fff);
      --_secondary-color: var(--media-secondary-color, transparent);
      --_accent-color: var(--media-accent-color, #fa50b5);
      --_text-color: var(--media-text-color, #000);

      --media-icon-color: var(--_primary-color);
      --media-control-background: var(--_secondary-color);
      --media-control-hover-background: var(--_accent-color);
      --media-time-buffered-color: rgba(255, 255, 255, 0.4);
      --media-preview-time-text-shadow: none;
      --media-control-height: 14px;
      --media-control-padding: 6px;
      --media-tooltip-container-margin: 6px;
      --media-tooltip-distance: 18px;

      color: var(--_primary-color);
      display: inline-block;
      width: 100%;
      height: 100%;
    }

    :host([audio]) {
      --_secondary-color: var(--media-secondary-color, black);
      --media-preview-time-text-shadow: none;
    }

    :host([audio]) ::slotted([slot='media']) {
      height: 0px;
    }

    :host([audio]) media-loading-indicator {
      display: none;
    }

    :host([audio]) media-controller {
      background: transparent;
    }

    :host([audio]) media-controller::part(vertical-layer) {
      background: transparent;
    }

    :host([audio]) media-control-bar {
      width: 100%;
      background-color: var(--media-control-background);
    }

    /*
     * 0.433s is the transition duration for VTT Regions.
     * Borrowed here, so the captions don't move too fast.
     */
    media-controller {
      --media-webkit-text-track-transform: translateY(0) scale(0.98);
      --media-webkit-text-track-transition: transform 0.433s ease-out 0.3s;
    }
    media-controller:is([mediapaused], :not([userinactive])) {
      --media-webkit-text-track-transform: translateY(-50px) scale(0.98);
      --media-webkit-text-track-transition: transform 0.15s ease;
    }

    /*
     * CSS specific to iOS devices.
     * See: https://stackoverflow.com/questions/30102792/css-media-query-to-target-only-ios-devices/60220757#60220757
     */
    @supports (-webkit-touch-callout: none) {
      /* Disable subtitle adjusting for iOS Safari */
      media-controller[mediaisfullscreen] {
        --media-webkit-text-track-transform: unset;
        --media-webkit-text-track-transition: unset;
      }
    }

    media-time-range {
      --media-box-padding-left: 6px;
      --media-box-padding-right: 6px;
      --media-range-bar-color: var(--_accent-color);
      --media-time-range-buffered-color: var(--_primary-color);
      --media-range-track-color: transparent;
      --media-range-track-background: rgba(255, 255, 255, 0.4);
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_accent-color) 25%,
        var(--_accent-color)
      );
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-transform: scale(0);
      --media-range-thumb-transition: transform 0.3s;
      --media-range-thumb-opacity: 1;
      --media-preview-background: var(--_primary-color);
      --media-box-arrow-background: var(--_primary-color);
      --media-preview-thumbnail-border: 5px solid var(--_primary-color);
      --media-preview-border-radius: 5px;
      --media-text-color: var(--_text-color);
      --media-control-hover-background: transparent;
      --media-preview-chapter-text-shadow: none;
      color: var(--_accent-color);
      padding: 0 6px;
    }

    :host([audio]) media-time-range {
      --media-preview-time-padding: 1.5px 6px;
      --media-preview-box-margin: 0 0 -5px;
    }

    media-time-range:hover {
      --media-range-thumb-transform: scale(1);
    }

    media-preview-thumbnail {
      border-bottom-width: 0;
    }

    [part~='menu'] {
      border-radius: 2px;
      border: 1px solid rgba(0, 0, 0, 0.1);
      bottom: 50px;
      padding: 2.5px 10px;
    }

    [part~='menu']::part(indicator) {
      fill: var(--_accent-color);
    }

    [part~='menu']::part(menu-item) {
      box-sizing: border-box;
      display: flex;
      align-items: center;
      padding: 6px 10px;
      min-height: 34px;
    }

    [part~='menu']::part(checked) {
      font-weight: 700;
    }

    media-captions-menu,
    media-rendition-menu,
    media-audio-track-menu,
    media-playback-rate-menu {
      position: absolute; /* ensure they don't take up space in DOM on load */
      --media-menu-background: var(--_primary-color);
      --media-menu-item-checked-background: transparent;
      --media-text-color: var(--_text-color);
      --media-menu-item-hover-background: transparent;
      --media-menu-item-hover-outline: var(--_accent-color) solid 1px;
    }

    /* The icon is a circle so make it 16px high instead of 14px for more balance. */
    media-audio-track-menu-button {
      --media-control-padding: 5px;
      --media-control-height: 16px;
    }

    media-playback-rate-menu-button {
      --media-control-padding: 6px 3px;
      min-width: 4.4ch;
    }

    media-playback-rate-menu {
      --media-menu-flex-direction: row;
      --media-menu-item-checked-background: var(--_accent-color);
      --media-menu-item-checked-indicator-display: none;
      margin-right: 6px;
      padding: 0;
      --media-menu-gap: 0.25em;
    }

    media-playback-rate-menu[part~='menu']::part(menu-item) {
      padding: 6px 6px 6px 8px;
    }

    media-playback-rate-menu[part~='menu']::part(checked) {
      color: #fff;
    }

    :host(:not([audio])) media-time-range {
      /* Adding px is required here for calc() */
      --media-range-padding: 0px;
      background: transparent;
      z-index: 10;
      height: 10px;
      bottom: -3px;
      width: 100%;
    }

    media-control-bar :is([role='button'], [role='switch'], button) {
      line-height: 0;
    }

    media-control-bar :is([part*='button'], [part*='range'], [part*='display']) {
      border-radius: 3px;
    }

    .spacer {
      flex-grow: 1;
      background-color: var(--media-control-background, rgba(20, 20, 30, 0.7));
    }

    media-control-bar[slot~='top-chrome'] {
      min-height: 42px;
      pointer-events: none;
    }

    media-control-bar {
      --gradient-steps: hsl(0 0% 0% / 0) 0%, hsl(0 0% 0% / 0.013) 8.1%, hsl(0 0% 0% / 0.049) 15.5%,
        hsl(0 0% 0% / 0.104) 22.5%, hsl(0 0% 0% / 0.175) 29%, hsl(0 0% 0% / 0.259) 35.3%, hsl(0 0% 0% / 0.352) 41.2%,
        hsl(0 0% 0% / 0.45) 47.1%, hsl(0 0% 0% / 0.55) 52.9%, hsl(0 0% 0% / 0.648) 58.8%, hsl(0 0% 0% / 0.741) 64.7%,
        hsl(0 0% 0% / 0.825) 71%, hsl(0 0% 0% / 0.896) 77.5%, hsl(0 0% 0% / 0.951) 84.5%, hsl(0 0% 0% / 0.987) 91.9%,
        hsl(0 0% 0%) 100%;
    }

    :host([title]:not([audio])) media-control-bar[slot='top-chrome']::before {
      content: '';
      position: absolute;
      width: 100%;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to top, var(--gradient-steps));
      opacity: 0.8;
      pointer-events: none;
    }

    :host(:not([audio])) media-control-bar[part~='bottom']::before {
      content: '';
      position: absolute;
      width: 100%;
      bottom: 0;
      left: 0;
      padding-bottom: min(100px, 25%);
      background: linear-gradient(to bottom, var(--gradient-steps));
      opacity: 0.8;
      z-index: 1;
      pointer-events: none;
    }

    media-control-bar[part~='bottom'] > * {
      z-index: 20;
    }

    media-control-bar[part~='bottom'] {
      padding: 6px 6px;
    }

    media-control-bar[slot~='top-chrome'] > * {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      position: relative;
    }

    media-controller::part(vertical-layer) {
      transition: background-color 1s;
    }

    media-controller:is([mediapaused], :not([userinactive]))::part(vertical-layer) {
      background-color: var(--controls-backdrop-color, var(--controls, transparent));
      transition: background-color 0.25s;
    }

    .center-controls {
      --media-button-icon-width: 100%;
      --media-button-icon-height: auto;
      --media-tooltip-display: none;
      pointer-events: none;
      width: 100%;
      display: flex;
      flex-flow: row;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
      paint-order: stroke;
      stroke: rgba(102, 102, 102, 1);
      stroke-width: 0.3px;
      text-shadow:
        0 0 2px rgb(0 0 0 / 0.25),
        0 0 6px rgb(0 0 0 / 0.25);
    }

    .center-controls media-play-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      --media-control-padding: 0;
      width: 40px;
    }

    [breakpointsm] .center-controls media-play-button {
      width: 90px;
      height: 90px;
      border-radius: 50%;
      transition: background 0.4s;
      padding: 24px;
      --media-control-background: #000;
      --media-control-hover-background: var(--_accent-color);
    }

    .center-controls media-seek-backward-button,
    .center-controls media-seek-forward-button {
      --media-control-background: transparent;
      --media-control-hover-background: transparent;
      padding: 0;
      margin: 0 20px;
      width: max(33px, min(8%, 40px));
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback {
      display: grid;
      align-items: initial;
      justify-content: initial;
      height: 100%;
      overflow: hidden;
    }

    [breakpointsm]:not([audio]) .center-controls.pre-playback media-play-button {
      place-self: var(--_pre-playback-place, center);
      grid-area: 1 / 1;
      margin: 16px;
    }

    /* Show and hide controls or pre-playback state */

    [breakpointsm]:is([mediahasplayed], :not([mediapaused])):not([audio])
      .center-controls.pre-playback
      media-play-button {
      /* Using \`forwards\` would lead to a laggy UI after the animation got in the end state */
      animation: 0.3s linear pre-play-hide;
      opacity: 0;
      pointer-events: none;
    }

    .autoplay-unmute {
      --media-control-hover-background: transparent;
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 0 2px rgb(0 0 0 / 0.25)) drop-shadow(0 0 6px rgb(0 0 0 / 0.25));
    }

    .autoplay-unmute-btn {
      --media-control-height: 16px;
      border-radius: 8px;
      background: #000;
      color: var(--_primary-color);
      display: flex;
      align-items: center;
      padding: 8px 16px;
      font-size: 18px;
      font-weight: 500;
      cursor: pointer;
    }

    .autoplay-unmute-btn:hover {
      background: var(--_accent-color);
    }

    [breakpointsm] .autoplay-unmute-btn {
      --media-control-height: 30px;
      padding: 14px 24px;
      font-size: 26px;
    }

    .autoplay-unmute-btn svg {
      margin: 0 6px 0 0;
    }

    [breakpointsm] .autoplay-unmute-btn svg {
      margin: 0 10px 0 0;
    }

    media-controller:not([audio]):not([mediahasplayed]) *:is(media-control-bar, media-time-range) {
      display: none;
    }

    media-loading-indicator {
      --media-loading-icon-width: 100%;
      --media-button-icon-height: auto;
      display: var(--media-control-display, var(--media-loading-indicator-display, flex));
      pointer-events: none;
      position: absolute;
      width: min(15%, 150px);
      flex-flow: row;
      align-items: center;
      justify-content: center;
    }

    /* Intentionally don't target the div for transition but the children
     of the div. Prevents messing with media-chrome's autohide feature. */
    media-loading-indicator + div * {
      transition: opacity 0.15s;
      opacity: 1;
    }

    media-loading-indicator[medialoading]:not([mediapaused]) ~ div > * {
      opacity: 0;
      transition-delay: 400ms;
    }

    media-volume-range {
      width: min(100%, 100px);
      --media-range-padding-left: 10px;
      --media-range-padding-right: 10px;
      --media-range-thumb-width: 12px;
      --media-range-thumb-height: 12px;
      --media-range-thumb-background: radial-gradient(
        circle,
        #000 0%,
        #000 25%,
        var(--_primary-color) 25%,
        var(--_primary-color)
      );
      --media-control-hover-background: none;
    }

    media-time-display {
      white-space: nowrap;
    }

    /* Generic style for explicitly disabled controls */
    media-control-bar[part~='bottom'] [disabled],
    media-control-bar[part~='bottom'] [aria-disabled='true'] {
      opacity: 60%;
      cursor: not-allowed;
    }

    media-text-display {
      --media-font-size: 16px;
      --media-control-padding: 14px;
      font-weight: 500;
    }

    media-play-button.animated *:is(g, path) {
      transition: all 0.3s;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt1 {
      opacity: 0;
    }

    media-play-button.animated[mediapaused] .pause-icon-pt2 {
      transform-origin: center center;
      transform: scaleY(0);
    }

    media-play-button.animated[mediapaused] .play-icon {
      clip-path: inset(0 0 0 0);
    }

    media-play-button.animated:not([mediapaused]) .play-icon {
      clip-path: inset(0 0 0 100%);
    }

    media-seek-forward-button,
    media-seek-backward-button {
      --media-font-weight: 400;
    }

    .mute-icon {
      display: inline-block;
    }

    .mute-icon :is(path, g) {
      transition: opacity 0.5s;
    }

    .muted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='low'] :is(.volume-medium, .volume-high),
    media-mute-button[mediavolumelevel='medium'] :is(.volume-high) {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .unmuted {
      opacity: 0;
    }

    media-mute-button[mediavolumelevel='off'] .muted {
      opacity: 1;
    }

    /**
     * Our defaults for these buttons are to hide them at small sizes
     * users can override this with CSS
     */
    media-controller:not([breakpointsm]):not([audio]) {
      --bottom-play-button: none;
      --bottom-seek-backward-button: none;
      --bottom-seek-forward-button: none;
      --bottom-time-display: none;
      --bottom-playback-rate-menu-button: none;
      --bottom-pip-button: none;
    }
  </style>

  <template partial="TitleDisplay">
    <template if="title">
      <media-text-display part="top title display" class="title-display">{{title}}</media-text-display>
    </template>
  </template>

  <template partial="PlayButton">
    <media-play-button
      part="{{section ?? 'bottom'}} play button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      class="animated"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon">
        <g class="play-icon">
          <path
            d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
          />
        </g>
        <g class="pause-icon">
          <path
            class="pause-icon-pt1"
            d="M5.90709 0H2.96889C2.46857 0 2.06299 0.405585 2.06299 0.9059V13.0941C2.06299 13.5944 2.46857 14 2.96889 14H5.90709C6.4074 14 6.81299 13.5944 6.81299 13.0941V0.9059C6.81299 0.405585 6.4074 0 5.90709 0Z"
          />
          <path
            class="pause-icon-pt2"
            d="M15.1571 0H12.2189C11.7186 0 11.313 0.405585 11.313 0.9059V13.0941C11.313 13.5944 11.7186 14 12.2189 14H15.1571C15.6574 14 16.063 13.5944 16.063 13.0941V0.9059C16.063 0.405585 15.6574 0 15.1571 0Z"
          />
        </g>
      </svg>
    </media-play-button>
  </template>

  <template partial="PrePlayButton">
    <media-play-button
      part="{{section ?? 'center'}} play button pre-play"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="icon" style="transform: translate(3px, 0)">
        <path
          d="M15.5987 6.2911L3.45577 0.110898C2.83667 -0.204202 2.06287 0.189698 2.06287 0.819798V13.1802C2.06287 13.8103 2.83667 14.2042 3.45577 13.8891L15.5987 7.7089C16.2178 7.3938 16.2178 6.6061 15.5987 6.2911Z"
        />
      </svg>
    </media-play-button>
  </template>

  <template partial="SeekBackwardButton">
    <media-seek-backward-button
      seekoffset="{{backwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-backward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <path
          d="M3.65 2.07888L0.0864 6.7279C-0.0288 6.87812 -0.0288 7.12188 0.0864 7.2721L3.65 11.9211C3.7792 12.0896 4 11.9703 4 11.7321V2.26787C4 2.02968 3.7792 1.9104 3.65 2.07888Z"
        />
        <text transform="translate(6 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
          {{backwardseekoffset}}
        </text>
      </svg>
    </media-seek-backward-button>
  </template>

  <template partial="SeekForwardButton">
    <media-seek-forward-button
      seekoffset="{{forwardseekoffset}}"
      part="{{section ?? 'bottom'}} seek-forward button"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <svg viewBox="0 0 22 14" aria-hidden="true" slot="icon">
        <g>
          <text transform="translate(-1 12)" style="font-size: 14px; font-family: 'ArialMT', 'Arial'">
            {{forwardseekoffset}}
          </text>
          <path
            d="M18.35 11.9211L21.9136 7.2721C22.0288 7.12188 22.0288 6.87812 21.9136 6.7279L18.35 2.07888C18.2208 1.91041 18 2.02968 18 2.26787V11.7321C18 11.9703 18.2208 12.0896 18.35 11.9211Z"
          />
        </g>
      </svg>
    </media-seek-forward-button>
  </template>

  <template partial="MuteButton">
    <media-mute-button part="bottom mute button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" slot="icon" class="mute-icon" aria-hidden="true">
        <g class="unmuted">
          <path
            d="M6.76786 1.21233L3.98606 3.98924H1.19937C0.593146 3.98924 0.101743 4.51375 0.101743 5.1607V6.96412L0 6.99998L0.101743 7.03583V8.83926C0.101743 9.48633 0.593146 10.0108 1.19937 10.0108H3.98606L6.76773 12.7877C7.23561 13.2547 8 12.9007 8 12.2171V1.78301C8 1.09925 7.23574 0.745258 6.76786 1.21233Z"
          />
          <path
            class="volume-low"
            d="M10 3.54781C10.7452 4.55141 11.1393 5.74511 11.1393 6.99991C11.1393 8.25471 10.7453 9.44791 10 10.4515L10.7988 11.0496C11.6734 9.87201 12.1356 8.47161 12.1356 6.99991C12.1356 5.52821 11.6735 4.12731 10.7988 2.94971L10 3.54781Z"
          />
          <path
            class="volume-medium"
            d="M12.3778 2.40086C13.2709 3.76756 13.7428 5.35806 13.7428 7.00026C13.7428 8.64246 13.2709 10.233 12.3778 11.5992L13.2106 12.1484C14.2107 10.6185 14.739 8.83796 14.739 7.00016C14.739 5.16236 14.2107 3.38236 13.2106 1.85156L12.3778 2.40086Z"
          />
          <path
            class="volume-high"
            d="M15.5981 0.75L14.7478 1.2719C15.7937 2.9919 16.3468 4.9723 16.3468 7C16.3468 9.0277 15.7937 11.0082 14.7478 12.7281L15.5981 13.25C16.7398 11.3722 17.343 9.211 17.343 7C17.343 4.789 16.7398 2.6268 15.5981 0.75Z"
          />
        </g>
        <g class="muted">
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M4.39976 4.98924H1.19937C1.19429 4.98924 1.17777 4.98961 1.15296 5.01609C1.1271 5.04369 1.10174 5.09245 1.10174 5.1607V8.83926C1.10174 8.90761 1.12714 8.95641 1.15299 8.984C1.17779 9.01047 1.1943 9.01084 1.19937 9.01084H4.39977L7 11.6066V2.39357L4.39976 4.98924ZM7.47434 1.92006C7.4743 1.9201 7.47439 1.92002 7.47434 1.92006V1.92006ZM6.76773 12.7877L3.98606 10.0108H1.19937C0.593146 10.0108 0.101743 9.48633 0.101743 8.83926V7.03583L0 6.99998L0.101743 6.96412V5.1607C0.101743 4.51375 0.593146 3.98924 1.19937 3.98924H3.98606L6.76786 1.21233C7.23574 0.745258 8 1.09925 8 1.78301V12.2171C8 12.9007 7.23561 13.2547 6.76773 12.7877Z"
          />
          <path
            fill-rule="evenodd"
            clip-rule="evenodd"
            d="M15.2677 9.30323C15.463 9.49849 15.7796 9.49849 15.9749 9.30323C16.1701 9.10796 16.1701 8.79138 15.9749 8.59612L14.2071 6.82841L15.9749 5.06066C16.1702 4.8654 16.1702 4.54882 15.9749 4.35355C15.7796 4.15829 15.4631 4.15829 15.2678 4.35355L13.5 6.1213L11.7322 4.35348C11.537 4.15822 11.2204 4.15822 11.0251 4.35348C10.8298 4.54874 10.8298 4.86532 11.0251 5.06058L12.7929 6.82841L11.0251 8.59619C10.8299 8.79146 10.8299 9.10804 11.0251 9.3033C11.2204 9.49856 11.537 9.49856 11.7323 9.3033L13.5 7.53552L15.2677 9.30323Z"
          />
        </g>
      </svg>
    </media-mute-button>
  </template>

  <template partial="PipButton">
    <media-pip-button part="bottom pip button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M15.9891 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.989C0 13.0996 0.9004 14 2.011 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0ZM17 11.9891C17 12.5465 16.5465 13 15.9891 13H2.011C1.4536 13 1.0001 12.5465 1.0001 11.9891V2.0109C1.0001 1.4535 1.4536 0.9999 2.011 0.9999H15.9891C16.5465 0.9999 17 1.4535 17 2.0109V11.9891Z"
        />
        <path
          d="M15.356 5.67822H8.19523C8.03253 5.67822 7.90063 5.81012 7.90063 5.97282V11.3836C7.90063 11.5463 8.03253 11.6782 8.19523 11.6782H15.356C15.5187 11.6782 15.6506 11.5463 15.6506 11.3836V5.97282C15.6506 5.81012 15.5187 5.67822 15.356 5.67822Z"
        />
      </svg>
    </media-pip-button>
  </template>

  <template partial="CaptionsMenu">
    <media-captions-menu-button part="bottom captions button">
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="on">
        <path
          d="M15.989 0H2.011C0.9004 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9004 14 2.011 14H15.989C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.989 0ZM4.2292 8.7639C4.5954 9.1902 5.0935 9.4031 5.7233 9.4031C6.1852 9.4031 6.5544 9.301 6.8302 9.0969C7.1061 8.8933 7.2863 8.614 7.3702 8.26H8.4322C8.3062 8.884 8.0093 9.3733 7.5411 9.7273C7.0733 10.0813 6.4703 10.2581 5.732 10.2581C5.108 10.2581 4.5699 10.1219 4.1168 9.8489C3.6637 9.5759 3.3141 9.1946 3.0685 8.7058C2.8224 8.2165 2.6994 7.6511 2.6994 7.009C2.6994 6.3611 2.8224 5.7927 3.0685 5.3034C3.3141 4.8146 3.6637 4.4323 4.1168 4.1559C4.5699 3.88 5.108 3.7418 5.732 3.7418C6.4703 3.7418 7.0733 3.922 7.5411 4.2818C8.0094 4.6422 8.3062 5.1461 8.4322 5.794H7.3702C7.2862 5.4283 7.106 5.1368 6.8302 4.921C6.5544 4.7052 6.1852 4.5968 5.7233 4.5968C5.0934 4.5968 4.5954 4.8116 4.2292 5.2404C3.8635 5.6696 3.6804 6.259 3.6804 7.009C3.6804 7.7531 3.8635 8.3381 4.2292 8.7639ZM11.0974 8.7639C11.4636 9.1902 11.9617 9.4031 12.5915 9.4031C13.0534 9.4031 13.4226 9.301 13.6984 9.0969C13.9743 8.8933 14.1545 8.614 14.2384 8.26H15.3004C15.1744 8.884 14.8775 9.3733 14.4093 9.7273C13.9415 10.0813 13.3385 10.2581 12.6002 10.2581C11.9762 10.2581 11.4381 10.1219 10.985 9.8489C10.5319 9.5759 10.1823 9.1946 9.9367 8.7058C9.6906 8.2165 9.5676 7.6511 9.5676 7.009C9.5676 6.3611 9.6906 5.7927 9.9367 5.3034C10.1823 4.8146 10.5319 4.4323 10.985 4.1559C11.4381 3.88 11.9762 3.7418 12.6002 3.7418C13.3385 3.7418 13.9415 3.922 14.4093 4.2818C14.8776 4.6422 15.1744 5.1461 15.3004 5.794H14.2384C14.1544 5.4283 13.9742 5.1368 13.6984 4.921C13.4226 4.7052 13.0534 4.5968 12.5915 4.5968C11.9616 4.5968 11.4636 4.8116 11.0974 5.2404C10.7317 5.6696 10.5486 6.259 10.5486 7.009C10.5486 7.7531 10.7317 8.3381 11.0974 8.7639Z"
        />
      </svg>
      <svg aria-hidden="true" viewBox="0 0 18 14" slot="off">
        <path
          d="M5.73219 10.258C5.10819 10.258 4.57009 10.1218 4.11699 9.8488C3.66389 9.5758 3.31429 9.1945 3.06869 8.7057C2.82259 8.2164 2.69958 7.651 2.69958 7.0089C2.69958 6.361 2.82259 5.7926 3.06869 5.3033C3.31429 4.8145 3.66389 4.4322 4.11699 4.1558C4.57009 3.8799 5.10819 3.7417 5.73219 3.7417C6.47049 3.7417 7.07348 3.9219 7.54128 4.2817C8.00958 4.6421 8.30638 5.146 8.43238 5.7939H7.37039C7.28639 5.4282 7.10618 5.1367 6.83039 4.9209C6.55459 4.7051 6.18538 4.5967 5.72348 4.5967C5.09358 4.5967 4.59559 4.8115 4.22939 5.2403C3.86369 5.6695 3.68058 6.2589 3.68058 7.0089C3.68058 7.753 3.86369 8.338 4.22939 8.7638C4.59559 9.1901 5.09368 9.403 5.72348 9.403C6.18538 9.403 6.55459 9.3009 6.83039 9.0968C7.10629 8.8932 7.28649 8.6139 7.37039 8.2599H8.43238C8.30638 8.8839 8.00948 9.3732 7.54128 9.7272C7.07348 10.0812 6.47049 10.258 5.73219 10.258Z"
        />
        <path
          d="M12.6003 10.258C11.9763 10.258 11.4382 10.1218 10.9851 9.8488C10.532 9.5758 10.1824 9.1945 9.93685 8.7057C9.69075 8.2164 9.56775 7.651 9.56775 7.0089C9.56775 6.361 9.69075 5.7926 9.93685 5.3033C10.1824 4.8145 10.532 4.4322 10.9851 4.1558C11.4382 3.8799 11.9763 3.7417 12.6003 3.7417C13.3386 3.7417 13.9416 3.9219 14.4094 4.2817C14.8777 4.6421 15.1745 5.146 15.3005 5.7939H14.2385C14.1545 5.4282 13.9743 5.1367 13.6985 4.9209C13.4227 4.7051 13.0535 4.5967 12.5916 4.5967C11.9617 4.5967 11.4637 4.8115 11.0975 5.2403C10.7318 5.6695 10.5487 6.2589 10.5487 7.0089C10.5487 7.753 10.7318 8.338 11.0975 8.7638C11.4637 9.1901 11.9618 9.403 12.5916 9.403C13.0535 9.403 13.4227 9.3009 13.6985 9.0968C13.9744 8.8932 14.1546 8.6139 14.2385 8.2599H15.3005C15.1745 8.8839 14.8776 9.3732 14.4094 9.7272C13.9416 10.0812 13.3386 10.258 12.6003 10.258Z"
        />
        <path
          d="M15.9891 1C16.5465 1 17 1.4535 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H2.0109C1.4535 13 1 12.5465 1 11.9891V2.0109C1 1.4535 1.4535 0.9999 2.0109 0.9999L15.9891 1ZM15.9891 0H2.0109C0.9003 0 0 0.9003 0 2.0109V11.9891C0 13.0997 0.9003 14 2.0109 14H15.9891C17.0997 14 18 13.0997 18 11.9891V2.0109C18 0.9003 17.0997 0 15.9891 0Z"
        />
      </svg>
    </media-captions-menu-button>
    <media-captions-menu
      hidden
      anchor="auto"
      part="bottom captions menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg></div
    ></media-captions-menu>
  </template>

  <template partial="AirplayButton">
    <media-airplay-button part="bottom airplay button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="icon">
        <path
          d="M16.1383 0H1.8618C0.8335 0 0 0.8335 0 1.8617V10.1382C0 11.1664 0.8335 12 1.8618 12H3.076C3.1204 11.9433 3.1503 11.8785 3.2012 11.826L4.004 11H1.8618C1.3866 11 1 10.6134 1 10.1382V1.8617C1 1.3865 1.3866 0.9999 1.8618 0.9999H16.1383C16.6135 0.9999 17.0001 1.3865 17.0001 1.8617V10.1382C17.0001 10.6134 16.6135 11 16.1383 11H13.9961L14.7989 11.826C14.8499 11.8785 14.8798 11.9432 14.9241 12H16.1383C17.1665 12 18.0001 11.1664 18.0001 10.1382V1.8617C18 0.8335 17.1665 0 16.1383 0Z"
        />
        <path
          d="M9.55061 8.21903C9.39981 8.06383 9.20001 7.98633 9.00011 7.98633C8.80021 7.98633 8.60031 8.06383 8.44951 8.21903L4.09771 12.697C3.62471 13.1838 3.96961 13.9998 4.64831 13.9998H13.3518C14.0304 13.9998 14.3754 13.1838 13.9023 12.697L9.55061 8.21903Z"
        />
      </svg>
    </media-airplay-button>
  </template>

  <template partial="FullscreenButton">
    <media-fullscreen-button part="bottom fullscreen button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M1.00745 4.39539L1.01445 1.98789C1.01605 1.43049 1.47085 0.978289 2.02835 0.979989L6.39375 0.992589L6.39665 -0.007411L2.03125 -0.020011C0.920646 -0.023211 0.0176463 0.874489 0.0144463 1.98509L0.00744629 4.39539H1.00745Z"
        />
        <path
          d="M17.0144 2.03431L17.0076 4.39541H18.0076L18.0144 2.03721C18.0176 0.926712 17.1199 0.0237125 16.0093 0.0205125L11.6439 0.0078125L11.641 1.00781L16.0064 1.02041C16.5638 1.02201 17.016 1.47681 17.0144 2.03431Z"
        />
        <path
          d="M16.9925 9.60498L16.9855 12.0124C16.9839 12.5698 16.5291 13.022 15.9717 13.0204L11.6063 13.0078L11.6034 14.0078L15.9688 14.0204C17.0794 14.0236 17.9823 13.1259 17.9855 12.0153L17.9925 9.60498H16.9925Z"
        />
        <path
          d="M0.985626 11.9661L0.992426 9.60498H-0.0074737L-0.0142737 11.9632C-0.0174737 13.0738 0.880226 13.9767 1.99083 13.98L6.35623 13.9926L6.35913 12.9926L1.99373 12.98C1.43633 12.9784 0.983926 12.5236 0.985626 11.9661Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M5.39655 -0.0200195L5.38955 2.38748C5.38795 2.94488 4.93315 3.39708 4.37565 3.39538L0.0103463 3.38278L0.00744629 4.38278L4.37285 4.39538C5.48345 4.39858 6.38635 3.50088 6.38965 2.39028L6.39665 -0.0200195H5.39655Z"
        />
        <path
          d="M12.6411 2.36891L12.6479 0.0078125H11.6479L11.6411 2.36601C11.6379 3.47651 12.5356 4.37951 13.6462 4.38271L18.0116 4.39531L18.0145 3.39531L13.6491 3.38271C13.0917 3.38111 12.6395 2.92641 12.6411 2.36891Z"
        />
        <path
          d="M12.6034 14.0204L12.6104 11.613C12.612 11.0556 13.0668 10.6034 13.6242 10.605L17.9896 10.6176L17.9925 9.61759L13.6271 9.60499C12.5165 9.60179 11.6136 10.4995 11.6104 11.6101L11.6034 14.0204H12.6034Z"
        />
        <path
          d="M5.359 11.6315L5.3522 13.9926H6.3522L6.359 11.6344C6.3622 10.5238 5.4645 9.62088 4.3539 9.61758L-0.0115043 9.60498L-0.0144043 10.605L4.351 10.6176C4.9084 10.6192 5.3607 11.074 5.359 11.6315Z"
        />
      </svg>
    </media-fullscreen-button>
  </template>

  <template partial="CastButton">
    <media-cast-button part="bottom cast button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="enter">
        <path
          d="M16.0072 0H2.0291C0.9185 0 0.0181 0.9003 0.0181 2.011V5.5009C0.357 5.5016 0.6895 5.5275 1.0181 5.5669V2.011C1.0181 1.4536 1.4716 1 2.029 1H16.0072C16.5646 1 17.0181 1.4536 17.0181 2.011V11.9891C17.0181 12.5465 16.5646 13 16.0072 13H8.4358C8.4746 13.3286 8.4999 13.6611 8.4999 13.9999H16.0071C17.1177 13.9999 18.018 13.0996 18.018 11.989V2.011C18.0181 0.9003 17.1178 0 16.0072 0ZM0 6.4999V7.4999C3.584 7.4999 6.5 10.4159 6.5 13.9999H7.5C7.5 9.8642 4.1357 6.4999 0 6.4999ZM0 8.7499V9.7499C2.3433 9.7499 4.25 11.6566 4.25 13.9999H5.25C5.25 11.1049 2.895 8.7499 0 8.7499ZM0.0181 11V14H3.0181C3.0181 12.3431 1.675 11 0.0181 11Z"
        />
      </svg>
      <svg viewBox="0 0 18 14" aria-hidden="true" slot="exit">
        <path
          d="M15.9891 0H2.01103C0.900434 0 3.35947e-05 0.9003 3.35947e-05 2.011V5.5009C0.338934 5.5016 0.671434 5.5275 1.00003 5.5669V2.011C1.00003 1.4536 1.45353 1 2.01093 1H15.9891C16.5465 1 17 1.4536 17 2.011V11.9891C17 12.5465 16.5465 13 15.9891 13H8.41773C8.45653 13.3286 8.48183 13.6611 8.48183 13.9999H15.989C17.0996 13.9999 17.9999 13.0996 17.9999 11.989V2.011C18 0.9003 17.0997 0 15.9891 0ZM-0.0180664 6.4999V7.4999C3.56593 7.4999 6.48193 10.4159 6.48193 13.9999H7.48193C7.48193 9.8642 4.11763 6.4999 -0.0180664 6.4999ZM-0.0180664 8.7499V9.7499C2.32523 9.7499 4.23193 11.6566 4.23193 13.9999H5.23193C5.23193 11.1049 2.87693 8.7499 -0.0180664 8.7499ZM3.35947e-05 11V14H3.00003C3.00003 12.3431 1.65693 11 3.35947e-05 11Z"
        />
        <path d="M2.15002 5.634C5.18352 6.4207 7.57252 8.8151 8.35282 11.8499H15.8501V2.1499H2.15002V5.634Z" />
      </svg>
    </media-cast-button>
  </template>

  <template partial="LiveButton">
    <media-live-button part="{{section ?? 'top'}} live button" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <span slot="text">Live</span>
    </media-live-button>
  </template>

  <template partial="PlaybackRateMenu">
    <media-playback-rate-menu-button part="bottom playback-rate button"></media-playback-rate-menu-button>
    <media-playback-rate-menu
      hidden
      anchor="auto"
      rates="{{playbackrates}}"
      exportparts="menu-item"
      part="bottom playback-rate menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-playback-rate-menu>
  </template>

  <template partial="VolumeRange">
    <media-volume-range
      part="bottom volume range"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-volume-range>
  </template>

  <template partial="TimeDisplay">
    <media-time-display
      remaining="{{defaultshowremainingtime}}"
      showduration="{{!hideduration}}"
      part="bottom time display"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    ></media-time-display>
  </template>

  <template partial="TimeRange">
    <media-time-range part="bottom time range" disabled="{{disabled}}" aria-disabled="{{disabled}}">
      <media-preview-thumbnail slot="preview"></media-preview-thumbnail>
      <media-preview-chapter-display slot="preview"></media-preview-chapter-display>
      <media-preview-time-display slot="preview"></media-preview-time-display>
      <div slot="preview" part="arrow"></div>
    </media-time-range>
  </template>

  <template partial="AudioTrackMenu">
    <media-audio-track-menu-button part="bottom audio-track button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 16">
        <path d="M9 15A7 7 0 1 1 9 1a7 7 0 0 1 0 14Zm0 1A8 8 0 1 0 9 0a8 8 0 0 0 0 16Z" />
        <path
          d="M5.2 6.3a.5.5 0 0 1 .5.5v2.4a.5.5 0 1 1-1 0V6.8a.5.5 0 0 1 .5-.5Zm2.4-2.4a.5.5 0 0 1 .5.5v7.2a.5.5 0 0 1-1 0V4.4a.5.5 0 0 1 .5-.5ZM10 5.5a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.4-.8a.5.5 0 0 1 .5.5v5.6a.5.5 0 0 1-1 0V5.2a.5.5 0 0 1 .5-.5Z"
        />
      </svg>
    </media-audio-track-menu-button>
    <media-audio-track-menu
      hidden
      anchor="auto"
      part="bottom audio-track menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
      exportparts="menu-item"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-audio-track-menu>
  </template>

  <template partial="RenditionMenu">
    <media-rendition-menu-button part="bottom rendition button">
      <svg aria-hidden="true" slot="icon" viewBox="0 0 18 14">
        <path
          d="M2.25 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4ZM9 9a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm6.75 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z"
        />
      </svg>
    </media-rendition-menu-button>
    <media-rendition-menu
      hidden
      anchor="auto"
      part="bottom rendition menu"
      disabled="{{disabled}}"
      aria-disabled="{{disabled}}"
    >
      <div slot="checked-indicator">
        <style>
          .indicator {
            position: relative;
            top: 1px;
            width: 0.9em;
            height: auto;
            fill: var(--_accent-color);
            margin-right: 5px;
          }

          [aria-checked='false'] .indicator {
            display: none;
          }
        </style>
        <svg viewBox="0 0 14 18" class="indicator">
          <path
            d="M12.252 3.48c-.115.033-.301.161-.425.291-.059.063-1.407 1.815-2.995 3.894s-2.897 3.79-2.908 3.802c-.013.014-.661-.616-1.672-1.624-.908-.905-1.702-1.681-1.765-1.723-.401-.27-.783-.211-1.176.183a1.285 1.285 0 0 0-.261.342.582.582 0 0 0-.082.35c0 .165.01.205.08.35.075.153.213.296 2.182 2.271 1.156 1.159 2.17 2.159 2.253 2.222.189.143.338.196.539.194.203-.003.412-.104.618-.299.205-.193 6.7-8.693 6.804-8.903a.716.716 0 0 0 .085-.345c.01-.179.005-.203-.062-.339-.124-.252-.45-.531-.746-.639a.784.784 0 0 0-.469-.027"
            fill-rule="evenodd"
          />
        </svg>
      </div>
    </media-rendition-menu>
  </template>

  <media-controller
    part="controller"
    defaultstreamtype="{{defaultstreamtype ?? 'on-demand'}}"
    breakpoints="sm:470"
    gesturesdisabled="{{disabled}}"
    hotkeys="{{hotkeys}}"
    nohotkeys="{{nohotkeys}}"
    novolumepref="{{novolumepref}}"
    audio="{{audio}}"
    noautoseektolive="{{noautoseektolive}}"
    defaultsubtitles="{{defaultsubtitles}}"
    defaultduration="{{defaultduration ?? false}}"
    keyboardforwardseekoffset="{{forwardseekoffset}}"
    keyboardbackwardseekoffset="{{backwardseekoffset}}"
    exportparts="layer, media-layer, poster-layer, vertical-layer, centered-layer, gesture-layer"
    style="--_pre-playback-place:{{preplaybackplace ?? 'center'}}"
  >
    <slot name="media" slot="media"></slot>
    <slot name="poster" slot="poster"></slot>

    <media-loading-indicator slot="centered-chrome" noautohide></media-loading-indicator>

    <template if="!audio">
      <!-- Pre-playback UI -->
      <!-- same for both on-demand and live -->
      <div slot="centered-chrome" class="center-controls pre-playback">
        <template if="!breakpointsm">{{>PlayButton section="center"}}</template>
        <template if="breakpointsm">{{>PrePlayButton section="center"}}</template>
      </div>

      <!-- Autoplay centered unmute button -->
      <!--
        todo: figure out how show this with available state variables
        needs to show when:
        - autoplay is enabled
        - playback has been successful
        - audio is muted
        - in place / instead of the pre-plaback play button
        - not to show again after user has interacted with this button
          - OR user has interacted with the mute button in the control bar
      -->
      <!--
        There should be a >MuteButton to the left of the "Unmute" text, but a templating bug
        makes it appear even if commented out in the markup, add it back when code is un-commented
      -->
      <!-- <div slot="centered-chrome" class="autoplay-unmute">
        <div role="button" class="autoplay-unmute-btn">Unmute</div>
      </div> -->

      <template if="streamtype == 'on-demand'">
        <template if="breakpointsm">
          <media-control-bar part="control-bar top" slot="top-chrome">{{>TitleDisplay}} </media-control-bar>
        </template>
        {{>TimeRange}}
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>SeekBackwardButton}} {{>SeekForwardButton}} {{>TimeDisplay}} {{>MuteButton}}
          {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>PlaybackRateMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}}
          {{>CastButton}} {{>PipButton}} {{>FullscreenButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <media-control-bar part="control-bar top" slot="top-chrome">
          {{>LiveButton}}
          <template if="breakpointsm"> {{>TitleDisplay}} </template>
        </media-control-bar>
        <template if="targetlivewindow > 0">{{>TimeRange}}</template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="targetlivewindow > 0">{{>SeekBackwardButton}} {{>SeekForwardButton}}</template>
          {{>MuteButton}} {{>VolumeRange}}
          <div class="spacer"></div>
          {{>RenditionMenu}} {{>AudioTrackMenu}} {{>CaptionsMenu}} {{>AirplayButton}} {{>CastButton}} {{>PipButton}}
          {{>FullscreenButton}}
        </media-control-bar>
      </template>
    </template>

    <template if="audio">
      <template if="streamtype == 'on-demand'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}}
          <template if="breakpointsm"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          {{>MuteButton}}
          <template if="breakpointsm">{{>VolumeRange}}</template>
          {{>TimeDisplay}} {{>TimeRange}}
          <template if="breakpointsm">{{>PlaybackRateMenu}}</template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>

      <template if="streamtype == 'live'">
        <template if="title">
          <media-control-bar part="control-bar top">{{>TitleDisplay}}</media-control-bar>
        </template>
        <media-control-bar part="control-bar bottom">
          {{>PlayButton}} {{>LiveButton section="bottom"}} {{>MuteButton}}
          <template if="breakpointsm">
            {{>VolumeRange}}
            <template if="targetlivewindow > 0"> {{>SeekBackwardButton}} {{>SeekForwardButton}} </template>
          </template>
          <template if="targetlivewindow > 0"> {{>TimeDisplay}} {{>TimeRange}} </template>
          <template if="!targetlivewindow"><div class="spacer"></div></template>
          {{>AirplayButton}} {{>CastButton}}
        </media-control-bar>
      </template>
    </template>

    <slot></slot>
  </media-controller>
</template>
`,f2=$c.createElement("template");"innerHTML"in f2&&(f2.innerHTML=qct);var SW,AW,wne=class extends LS{};wne.template=(AW=(SW=f2.content)==null?void 0:SW.children)==null?void 0:AW[0];Dn.customElements.get("media-theme-gerwig")||Dn.customElements.define("media-theme-gerwig",wne);var jct="gerwig",Qo={SRC:"src",POSTER:"poster"},Ae={STYLE:"style",DEFAULT_HIDDEN_CAPTIONS:"default-hidden-captions",PRIMARY_COLOR:"primary-color",SECONDARY_COLOR:"secondary-color",ACCENT_COLOR:"accent-color",FORWARD_SEEK_OFFSET:"forward-seek-offset",BACKWARD_SEEK_OFFSET:"backward-seek-offset",PLAYBACK_TOKEN:"playback-token",THUMBNAIL_TOKEN:"thumbnail-token",STORYBOARD_TOKEN:"storyboard-token",DRM_TOKEN:"drm-token",STORYBOARD_SRC:"storyboard-src",THUMBNAIL_TIME:"thumbnail-time",AUDIO:"audio",NOHOTKEYS:"nohotkeys",HOTKEYS:"hotkeys",PLAYBACK_RATES:"playbackrates",DEFAULT_SHOW_REMAINING_TIME:"default-show-remaining-time",DEFAULT_DURATION:"default-duration",TITLE:"title",PLACEHOLDER:"placeholder",THEME:"theme",DEFAULT_STREAM_TYPE:"default-stream-type",TARGET_LIVE_WINDOW:"target-live-window",EXTRA_SOURCE_PARAMS:"extra-source-params",NO_VOLUME_PREF:"no-volume-pref",CAST_RECEIVER:"cast-receiver",NO_TOOLTIPS:"no-tooltips"},p2=["audio","backwardseekoffset","defaultduration","defaultshowremainingtime","defaultsubtitles","noautoseektolive","disabled","exportparts","forwardseekoffset","hideduration","hotkeys","nohotkeys","playbackrates","defaultstreamtype","streamtype","style","targetlivewindow","template","title","novolumepref"];function Kct(r,e){var t;return{src:!r.playbackId&&r.src,playbackId:r.playbackId,hasSrc:!!r.playbackId||!!r.src||!!r.currentSrc,poster:r.poster,storyboard:r.storyboard,storyboardSrc:r.getAttribute(Ae.STORYBOARD_SRC),placeholder:r.getAttribute("placeholder"),themeTemplate:zct(r),thumbnailTime:!r.tokens.thumbnail&&r.thumbnailTime,autoplay:r.autoplay,crossOrigin:r.crossOrigin,loop:r.loop,noHotKeys:r.hasAttribute(Ae.NOHOTKEYS),hotKeys:r.getAttribute(Ae.HOTKEYS),muted:r.muted,paused:r.paused,preload:r.preload,envKey:r.envKey,preferCmcd:r.preferCmcd,debug:r.debug,disableTracking:r.disableTracking,disableCookies:r.disableCookies,tokens:r.tokens,beaconCollectionDomain:r.beaconCollectionDomain,maxResolution:r.maxResolution,minResolution:r.minResolution,programStartTime:r.programStartTime,programEndTime:r.programEndTime,assetStartTime:r.assetStartTime,assetEndTime:r.assetEndTime,renditionOrder:r.renditionOrder,metadata:r.metadata,playerSoftwareName:r.playerSoftwareName,playerSoftwareVersion:r.playerSoftwareVersion,startTime:r.startTime,preferPlayback:r.preferPlayback,audio:r.audio,defaultStreamType:r.defaultStreamType,targetLiveWindow:r.getAttribute(de.TARGET_LIVE_WINDOW),streamType:UM(r.getAttribute(de.STREAM_TYPE)),primaryColor:r.getAttribute(Ae.PRIMARY_COLOR),secondaryColor:r.getAttribute(Ae.SECONDARY_COLOR),accentColor:r.getAttribute(Ae.ACCENT_COLOR),forwardSeekOffset:r.forwardSeekOffset,backwardSeekOffset:r.backwardSeekOffset,defaultHiddenCaptions:r.defaultHiddenCaptions,defaultDuration:r.defaultDuration,defaultShowRemainingTime:r.defaultShowRemainingTime,hideDuration:Yct(r),playbackRates:r.getAttribute(Ae.PLAYBACK_RATES),customDomain:(t=r.getAttribute(de.CUSTOM_DOMAIN))!=null?t:void 0,title:r.getAttribute(Ae.TITLE),novolumepref:r.hasAttribute(Ae.NO_VOLUME_PREF),castReceiver:r.castReceiver,...e,extraSourceParams:r.extraSourceParams}}function zct(r){var e,t;let n=r.theme;if(n){let i=(t=(e=r.getRootNode())==null?void 0:e.getElementById)==null?void 0:t.call(e,n);if(i&&i instanceof HTMLTemplateElement)return i;n.startsWith("media-theme-")||(n=`media-theme-${n}`);let s=Dn.customElements.get(n);if(s!=null&&s.template)return s.template}}function Yct(r){var e;let t=(e=r.mediaController)==null?void 0:e.querySelector("media-time-display");return t&&getComputedStyle(t).getPropertyValue("--media-duration-display-display").trim()==="none"}function _W(r){let e=r.hasAttribute(Ae.TITLE)?{video_title:r.getAttribute(Ae.TITLE)}:{};return r.getAttributeNames().filter(t=>t.startsWith("metadata-")).reduce((t,n)=>{let i=r.getAttribute(n);return i!==null&&(t[n.replace(/^metadata-/,"").replace(/-/g,"_")]=i),t},e)}var Qct=Object.values(de),Xct=Object.values(Qo),Zct=Object.values(Ae),Jct=dne(),eut="mux-player",CW={dialog:void 0,isDialogOpen:!1},tut={redundant_streams:!0},ex,tx,qu,rx,zf,Xo,ec,m2,Tne,Qw,g2,lc,ju,v2,RW,y2,kW,b2,IW,E2,$W,DW=class extends bW{constructor(){super(),Tn(this,Xo),Tn(this,m2),Tn(this,Qw),Tn(this,lc),Tn(this,v2),Tn(this,y2),Tn(this,b2),Tn(this,E2),Tn(this,ex,!1),Tn(this,tx,{}),Tn(this,qu,!0),Tn(this,rx,new gct(this,"hotkeys")),Tn(this,zf,{...CW,onCloseErrorDialog:()=>Kr(this,Qw,g2).call(this,{dialog:void 0,isDialogOpen:!1}),onInitFocusDialog:e=>{cne(this,$c.activeElement)||e.preventDefault()}}),this.attachShadow({mode:"open"}),Kr(this,m2,Tne).call(this),this.isConnected&&Kr(this,Xo,ec).call(this)}static get observedAttributes(){var e;return[...(e=bW.observedAttributes)!=null?e:[],...Xct,...Qct,...Zct]}get mediaTheme(){var e;return(e=this.shadowRoot)==null?void 0:e.querySelector("media-theme")}get mediaController(){var e,t;return(t=(e=this.mediaTheme)==null?void 0:e.shadowRoot)==null?void 0:t.querySelector("media-controller")}connectedCallback(){var e;let t=(e=this.shadowRoot)==null?void 0:e.querySelector("mux-video");t&&(t.metadata=_W(this))}attributeChangedCallback(e,t,n){switch(Kr(this,Xo,ec).call(this),super.attributeChangedCallback(e,t,n),e){case Ae.HOTKEYS:Ft(this,rx).value=n;break;case Ae.THUMBNAIL_TIME:{n!=null&&this.tokens.thumbnail&&al(ze("Use of thumbnail-time with thumbnail-token is currently unsupported. Ignore thumbnail-time."));break}case Ae.THUMBNAIL_TOKEN:{if(n){let i=Bf(n);if(i){let{aud:s}=i,a=Yg.THUMBNAIL;s!==a&&al(ze("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"thumbnail"}))}}break}case Ae.STORYBOARD_TOKEN:{if(n){let i=Bf(n);if(i){let{aud:s}=i,a=Yg.STORYBOARD;s!==a&&al(ze("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"storyboard"}))}}break}case Ae.DRM_TOKEN:{if(n){let i=Bf(n);if(i){let{aud:s}=i,a=Yg.DRM;s!==a&&al(ze("The {tokenNamePrefix}-token has an incorrect aud value: {aud}. aud value should be {expectedAud}.").format({aud:s,expectedAud:a,tokenNamePrefix:"drm"}))}}break}case de.PLAYBACK_ID:{n!=null&&n.includes("?token")&&_s(ze("The specificed playback ID {playbackId} contains a token which must be provided via the playback-token attribute.").format({playbackId:n}));break}case de.STREAM_TYPE:n&&![zt.LIVE,zt.ON_DEMAND,zt.UNKNOWN].includes(n)?["ll-live","live:dvr","ll-live:dvr"].includes(this.streamType)?this.targetLiveWindow=n.includes("dvr")?Number.POSITIVE_INFINITY:0:fne({file:"invalid-stream-type.md",message:ze("Invalid stream-type value supplied: `{streamType}`. Please provide stream-type as either: `on-demand` or `live`").format({streamType:this.streamType})}):n===zt.LIVE?this.getAttribute(Ae.TARGET_LIVE_WINDOW)==null&&(this.targetLiveWindow=0):this.targetLiveWindow=Number.NaN}[de.PLAYBACK_ID,Qo.SRC,Ae.PLAYBACK_TOKEN].includes(e)&&t!==n&&ml(this,zf,{...Ft(this,zf),...CW}),Kr(this,lc,ju).call(this,{[mct(e)]:n})}get preferCmcd(){var e;return(e=this.getAttribute(de.PREFER_CMCD))!=null?e:void 0}set preferCmcd(e){e!==this.preferCmcd&&(e?Cw.includes(e)?this.setAttribute(de.PREFER_CMCD,e):al(`Invalid value for preferCmcd. Must be one of ${Cw.join()}`):this.removeAttribute(de.PREFER_CMCD))}get hasPlayed(){var e,t;return(t=(e=this.mediaController)==null?void 0:e.hasAttribute(H.MEDIA_HAS_PLAYED))!=null?t:!1}get inLiveWindow(){var e;return(e=this.mediaController)==null?void 0:e.hasAttribute(H.MEDIA_TIME_IS_LIVE)}get _hls(){var e;return(e=this.media)==null?void 0:e._hls}get mux(){var e;return(e=this.media)==null?void 0:e.mux}get theme(){var e;return(e=this.getAttribute(Ae.THEME))!=null?e:jct}set theme(e){this.setAttribute(Ae.THEME,`${e}`)}get themeProps(){let e=this.mediaTheme;if(!e)return;let t={};for(let n of e.getAttributeNames()){if(p2.includes(n))continue;let i=e.getAttribute(n);t[one(n)]=i===""?!0:i}return t}set themeProps(e){var t,n;Kr(this,Xo,ec).call(this);let i={...this.themeProps,...e};for(let s in i){if(p2.includes(s))continue;let a=e?.[s];typeof a=="boolean"||a==null?(t=this.mediaTheme)==null||t.toggleAttribute(d2(s),!!a):(n=this.mediaTheme)==null||n.setAttribute(d2(s),a)}}get playbackId(){var e;return(e=this.getAttribute(de.PLAYBACK_ID))!=null?e:void 0}set playbackId(e){e?this.setAttribute(de.PLAYBACK_ID,e):this.removeAttribute(de.PLAYBACK_ID)}get src(){var e,t;return this.playbackId?(e=Eu(this,Qo.SRC))!=null?e:void 0:(t=this.getAttribute(Qo.SRC))!=null?t:void 0}set src(e){e?this.setAttribute(Qo.SRC,e):this.removeAttribute(Qo.SRC)}get poster(){var e;let t=this.getAttribute(Qo.POSTER);if(t!=null)return t;let{tokens:n}=this;if(n.playback&&!n.thumbnail){al("Missing expected thumbnail token. No poster image will be shown");return}if(this.playbackId&&!this.audio)return hct(this.playbackId,{customDomain:this.customDomain,thumbnailTime:(e=this.thumbnailTime)!=null?e:this.startTime,programTime:this.programStartTime,token:n.thumbnail})}set poster(e){e||e===""?this.setAttribute(Qo.POSTER,e):this.removeAttribute(Qo.POSTER)}get storyboardSrc(){var e;return(e=this.getAttribute(Ae.STORYBOARD_SRC))!=null?e:void 0}set storyboardSrc(e){e?this.setAttribute(Ae.STORYBOARD_SRC,e):this.removeAttribute(Ae.STORYBOARD_SRC)}get storyboard(){let{tokens:e}=this;if(this.storyboardSrc&&!e.storyboard)return this.storyboardSrc;if(!(this.audio||!this.playbackId||!this.streamType||[zt.LIVE,zt.UNKNOWN].includes(this.streamType)||e.playback&&!e.storyboard))return fct(this.playbackId,{customDomain:this.customDomain,token:e.storyboard,programStartTime:this.programStartTime,programEndTime:this.programEndTime})}get audio(){return this.hasAttribute(Ae.AUDIO)}set audio(e){if(!e){this.removeAttribute(Ae.AUDIO);return}this.setAttribute(Ae.AUDIO,"")}get hotkeys(){return Ft(this,rx)}get nohotkeys(){return this.hasAttribute(Ae.NOHOTKEYS)}set nohotkeys(e){if(!e){this.removeAttribute(Ae.NOHOTKEYS);return}this.setAttribute(Ae.NOHOTKEYS,"")}get thumbnailTime(){return Ss(this.getAttribute(Ae.THUMBNAIL_TIME))}set thumbnailTime(e){this.setAttribute(Ae.THUMBNAIL_TIME,`${e}`)}get title(){var e;return(e=this.getAttribute(Ae.TITLE))!=null?e:""}set title(e){e!==this.title&&(e?this.setAttribute(Ae.TITLE,e):this.removeAttribute("title"),super.title=e)}get placeholder(){var e;return(e=Eu(this,Ae.PLACEHOLDER))!=null?e:""}set placeholder(e){this.setAttribute(Ae.PLACEHOLDER,`${e}`)}get primaryColor(){var e,t;let n=this.getAttribute(Ae.PRIMARY_COLOR);if(n!=null||this.mediaTheme&&(n=(t=(e=Dn.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_primary-color"))==null?void 0:t.trim(),n))return n}set primaryColor(e){this.setAttribute(Ae.PRIMARY_COLOR,`${e}`)}get secondaryColor(){var e,t;let n=this.getAttribute(Ae.SECONDARY_COLOR);if(n!=null||this.mediaTheme&&(n=(t=(e=Dn.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_secondary-color"))==null?void 0:t.trim(),n))return n}set secondaryColor(e){this.setAttribute(Ae.SECONDARY_COLOR,`${e}`)}get accentColor(){var e,t;let n=this.getAttribute(Ae.ACCENT_COLOR);if(n!=null||this.mediaTheme&&(n=(t=(e=Dn.getComputedStyle(this.mediaTheme))==null?void 0:e.getPropertyValue("--_accent-color"))==null?void 0:t.trim(),n))return n}set accentColor(e){this.setAttribute(Ae.ACCENT_COLOR,`${e}`)}get defaultShowRemainingTime(){return this.hasAttribute(Ae.DEFAULT_SHOW_REMAINING_TIME)}set defaultShowRemainingTime(e){e?this.setAttribute(Ae.DEFAULT_SHOW_REMAINING_TIME,""):this.removeAttribute(Ae.DEFAULT_SHOW_REMAINING_TIME)}get playbackRates(){if(this.hasAttribute(Ae.PLAYBACK_RATES))return this.getAttribute(Ae.PLAYBACK_RATES).trim().split(/\s*,?\s+/).map(e=>Number(e)).filter(e=>!Number.isNaN(e)).sort((e,t)=>e-t)}set playbackRates(e){if(!e){this.removeAttribute(Ae.PLAYBACK_RATES);return}this.setAttribute(Ae.PLAYBACK_RATES,e.join(" "))}get forwardSeekOffset(){var e;return(e=Ss(this.getAttribute(Ae.FORWARD_SEEK_OFFSET)))!=null?e:10}set forwardSeekOffset(e){this.setAttribute(Ae.FORWARD_SEEK_OFFSET,`${e}`)}get backwardSeekOffset(){var e;return(e=Ss(this.getAttribute(Ae.BACKWARD_SEEK_OFFSET)))!=null?e:10}set backwardSeekOffset(e){this.setAttribute(Ae.BACKWARD_SEEK_OFFSET,`${e}`)}get defaultHiddenCaptions(){return this.hasAttribute(Ae.DEFAULT_HIDDEN_CAPTIONS)}set defaultHiddenCaptions(e){e?this.setAttribute(Ae.DEFAULT_HIDDEN_CAPTIONS,""):this.removeAttribute(Ae.DEFAULT_HIDDEN_CAPTIONS)}get defaultDuration(){return Ss(this.getAttribute(Ae.DEFAULT_DURATION))}set defaultDuration(e){e==null?this.removeAttribute(Ae.DEFAULT_DURATION):this.setAttribute(Ae.DEFAULT_DURATION,`${e}`)}get playerSoftwareName(){var e;return(e=this.getAttribute(de.PLAYER_SOFTWARE_NAME))!=null?e:eut}get playerSoftwareVersion(){var e;return(e=this.getAttribute(de.PLAYER_SOFTWARE_VERSION))!=null?e:Jct}get beaconCollectionDomain(){var e;return(e=this.getAttribute(de.BEACON_COLLECTION_DOMAIN))!=null?e:void 0}set beaconCollectionDomain(e){e!==this.beaconCollectionDomain&&(e?this.setAttribute(de.BEACON_COLLECTION_DOMAIN,e):this.removeAttribute(de.BEACON_COLLECTION_DOMAIN))}get maxResolution(){var e;return(e=this.getAttribute(de.MAX_RESOLUTION))!=null?e:void 0}set maxResolution(e){e!==this.maxResolution&&(e?this.setAttribute(de.MAX_RESOLUTION,e):this.removeAttribute(de.MAX_RESOLUTION))}get minResolution(){var e;return(e=this.getAttribute(de.MIN_RESOLUTION))!=null?e:void 0}set minResolution(e){e!==this.minResolution&&(e?this.setAttribute(de.MIN_RESOLUTION,e):this.removeAttribute(de.MIN_RESOLUTION))}get renditionOrder(){var e;return(e=this.getAttribute(de.RENDITION_ORDER))!=null?e:void 0}set renditionOrder(e){e!==this.renditionOrder&&(e?this.setAttribute(de.RENDITION_ORDER,e):this.removeAttribute(de.RENDITION_ORDER))}get programStartTime(){return Ss(this.getAttribute(de.PROGRAM_START_TIME))}set programStartTime(e){e==null?this.removeAttribute(de.PROGRAM_START_TIME):this.setAttribute(de.PROGRAM_START_TIME,`${e}`)}get programEndTime(){return Ss(this.getAttribute(de.PROGRAM_END_TIME))}set programEndTime(e){e==null?this.removeAttribute(de.PROGRAM_END_TIME):this.setAttribute(de.PROGRAM_END_TIME,`${e}`)}get assetStartTime(){return Ss(this.getAttribute(de.ASSET_START_TIME))}set assetStartTime(e){e==null?this.removeAttribute(de.ASSET_START_TIME):this.setAttribute(de.ASSET_START_TIME,`${e}`)}get assetEndTime(){return Ss(this.getAttribute(de.ASSET_END_TIME))}set assetEndTime(e){e==null?this.removeAttribute(de.ASSET_END_TIME):this.setAttribute(de.ASSET_END_TIME,`${e}`)}get extraSourceParams(){return this.hasAttribute(Ae.EXTRA_SOURCE_PARAMS)?[...new URLSearchParams(this.getAttribute(Ae.EXTRA_SOURCE_PARAMS)).entries()].reduce((e,[t,n])=>(e[t]=n,e),{}):tut}set extraSourceParams(e){e==null?this.removeAttribute(Ae.EXTRA_SOURCE_PARAMS):this.setAttribute(Ae.EXTRA_SOURCE_PARAMS,new URLSearchParams(e).toString())}get customDomain(){var e;return(e=this.getAttribute(de.CUSTOM_DOMAIN))!=null?e:void 0}set customDomain(e){e!==this.customDomain&&(e?this.setAttribute(de.CUSTOM_DOMAIN,e):this.removeAttribute(de.CUSTOM_DOMAIN))}get envKey(){var e;return(e=Eu(this,de.ENV_KEY))!=null?e:void 0}set envKey(e){this.setAttribute(de.ENV_KEY,`${e}`)}get noVolumePref(){return this.hasAttribute(Ae.NO_VOLUME_PREF)}set noVolumePref(e){e?this.setAttribute(Ae.NO_VOLUME_PREF,""):this.removeAttribute(Ae.NO_VOLUME_PREF)}get debug(){return Eu(this,de.DEBUG)!=null}set debug(e){e?this.setAttribute(de.DEBUG,""):this.removeAttribute(de.DEBUG)}get disableTracking(){return Eu(this,de.DISABLE_TRACKING)!=null}set disableTracking(e){this.toggleAttribute(de.DISABLE_TRACKING,!!e)}get disableCookies(){return Eu(this,de.DISABLE_COOKIES)!=null}set disableCookies(e){e?this.setAttribute(de.DISABLE_COOKIES,""):this.removeAttribute(de.DISABLE_COOKIES)}get streamType(){var e,t,n;return(n=(t=this.getAttribute(de.STREAM_TYPE))!=null?t:(e=this.media)==null?void 0:e.streamType)!=null?n:zt.UNKNOWN}set streamType(e){this.setAttribute(de.STREAM_TYPE,`${e}`)}get defaultStreamType(){var e,t,n;return(n=(t=this.getAttribute(Ae.DEFAULT_STREAM_TYPE))!=null?t:(e=this.mediaController)==null?void 0:e.getAttribute(Ae.DEFAULT_STREAM_TYPE))!=null?n:zt.ON_DEMAND}set defaultStreamType(e){e?this.setAttribute(Ae.DEFAULT_STREAM_TYPE,e):this.removeAttribute(Ae.DEFAULT_STREAM_TYPE)}get targetLiveWindow(){var e,t;return this.hasAttribute(Ae.TARGET_LIVE_WINDOW)?+this.getAttribute(Ae.TARGET_LIVE_WINDOW):(t=(e=this.media)==null?void 0:e.targetLiveWindow)!=null?t:Number.NaN}set targetLiveWindow(e){e==this.targetLiveWindow||Number.isNaN(e)&&Number.isNaN(this.targetLiveWindow)||(e==null?this.removeAttribute(Ae.TARGET_LIVE_WINDOW):this.setAttribute(Ae.TARGET_LIVE_WINDOW,`${+e}`))}get liveEdgeStart(){var e;return(e=this.media)==null?void 0:e.liveEdgeStart}get startTime(){return Ss(Eu(this,de.START_TIME))}set startTime(e){this.setAttribute(de.START_TIME,`${e}`)}get preferPlayback(){let e=this.getAttribute(de.PREFER_PLAYBACK);if(e===ro.MSE||e===ro.NATIVE)return e}set preferPlayback(e){e!==this.preferPlayback&&(e===ro.MSE||e===ro.NATIVE?this.setAttribute(de.PREFER_PLAYBACK,e):this.removeAttribute(de.PREFER_PLAYBACK))}get metadata(){var e;return(e=this.media)==null?void 0:e.metadata}set metadata(e){if(Kr(this,Xo,ec).call(this),!this.media){_s("underlying media element missing when trying to set metadata. metadata will not be set.");return}this.media.metadata={..._W(this),...e}}get _hlsConfig(){var e;return(e=this.media)==null?void 0:e._hlsConfig}set _hlsConfig(e){if(Kr(this,Xo,ec).call(this),!this.media){_s("underlying media element missing when trying to set _hlsConfig. _hlsConfig will not be set.");return}this.media._hlsConfig=e}async addCuePoints(e){var t;if(Kr(this,Xo,ec).call(this),!this.media){_s("underlying media element missing when trying to addCuePoints. cuePoints will not be added.");return}return(t=this.media)==null?void 0:t.addCuePoints(e)}get activeCuePoint(){var e;return(e=this.media)==null?void 0:e.activeCuePoint}get cuePoints(){var e,t;return(t=(e=this.media)==null?void 0:e.cuePoints)!=null?t:[]}addChapters(e){var t;if(Kr(this,Xo,ec).call(this),!this.media){_s("underlying media element missing when trying to addChapters. chapters will not be added.");return}return(t=this.media)==null?void 0:t.addChapters(e)}get activeChapter(){var e;return(e=this.media)==null?void 0:e.activeChapter}get chapters(){var e,t;return(t=(e=this.media)==null?void 0:e.chapters)!=null?t:[]}getStartDate(){var e;return(e=this.media)==null?void 0:e.getStartDate()}get currentPdt(){var e;return(e=this.media)==null?void 0:e.currentPdt}get tokens(){let e=this.getAttribute(Ae.PLAYBACK_TOKEN),t=this.getAttribute(Ae.DRM_TOKEN),n=this.getAttribute(Ae.THUMBNAIL_TOKEN),i=this.getAttribute(Ae.STORYBOARD_TOKEN);return{...Ft(this,tx),...e!=null?{playback:e}:{},...t!=null?{drm:t}:{},...n!=null?{thumbnail:n}:{},...i!=null?{storyboard:i}:{}}}set tokens(e){ml(this,tx,e??{})}get playbackToken(){var e;return(e=this.getAttribute(Ae.PLAYBACK_TOKEN))!=null?e:void 0}set playbackToken(e){this.setAttribute(Ae.PLAYBACK_TOKEN,`${e}`)}get drmToken(){var e;return(e=this.getAttribute(Ae.DRM_TOKEN))!=null?e:void 0}set drmToken(e){this.setAttribute(Ae.DRM_TOKEN,`${e}`)}get thumbnailToken(){var e;return(e=this.getAttribute(Ae.THUMBNAIL_TOKEN))!=null?e:void 0}set thumbnailToken(e){this.setAttribute(Ae.THUMBNAIL_TOKEN,`${e}`)}get storyboardToken(){var e;return(e=this.getAttribute(Ae.STORYBOARD_TOKEN))!=null?e:void 0}set storyboardToken(e){this.setAttribute(Ae.STORYBOARD_TOKEN,`${e}`)}addTextTrack(e,t,n,i){var s;let a=(s=this.media)==null?void 0:s.nativeEl;if(a)return XP(a,e,t,n,i)}removeTextTrack(e){var t;let n=(t=this.media)==null?void 0:t.nativeEl;if(n)return _it(n,e)}get textTracks(){var e;return(e=this.media)==null?void 0:e.textTracks}get castReceiver(){var e;return(e=this.getAttribute(Ae.CAST_RECEIVER))!=null?e:void 0}set castReceiver(e){e!==this.castReceiver&&(e?this.setAttribute(Ae.CAST_RECEIVER,e):this.removeAttribute(Ae.CAST_RECEIVER))}get castCustomData(){var e;return(e=this.media)==null?void 0:e.castCustomData}set castCustomData(e){if(!this.media){_s("underlying media element missing when trying to set castCustomData. castCustomData will not be set.");return}this.media.castCustomData=e}get noTooltips(){return this.hasAttribute(Ae.NO_TOOLTIPS)}set noTooltips(e){if(!e){this.removeAttribute(Ae.NO_TOOLTIPS);return}this.setAttribute(Ae.NO_TOOLTIPS,"")}};ex=new WeakMap,tx=new WeakMap,qu=new WeakMap,rx=new WeakMap,zf=new WeakMap,Xo=new WeakSet,ec=function(){var r,e,t,n;if(!Ft(this,ex)){ml(this,ex,!0),Kr(this,lc,ju).call(this);try{if(customElements.upgrade(this.mediaTheme),!(this.mediaTheme instanceof Dn.HTMLElement))throw""}catch{_s("<media-theme> failed to upgrade!")}try{if(customElements.upgrade(this.media),!(this.media instanceof blt))throw""}catch{_s("<mux-video> failed to upgrade!")}try{if(customElements.upgrade(this.mediaController),!(this.mediaController instanceof uat))throw""}catch{_s("<media-controller> failed to upgrade!")}this.init(),Kr(this,v2,RW).call(this),Kr(this,y2,kW).call(this),Kr(this,b2,IW).call(this),ml(this,qu,(e=(r=this.mediaController)==null?void 0:r.hasAttribute(Ot.USER_INACTIVE))!=null?e:!0),Kr(this,E2,$W).call(this),(t=this.media)==null||t.addEventListener("streamtypechange",()=>Kr(this,lc,ju).call(this)),(n=this.media)==null||n.addEventListener("loadstart",()=>Kr(this,lc,ju).call(this))}},m2=new WeakSet,Tne=function(){var r,e;try{(r=window?.CSS)==null||r.registerProperty({name:"--media-primary-color",syntax:"<color>",inherits:!0}),(e=window?.CSS)==null||e.registerProperty({name:"--media-secondary-color",syntax:"<color>",inherits:!0})}catch{}},Qw=new WeakSet,g2=function(r){Object.assign(Ft(this,zf),r),Kr(this,lc,ju).call(this)},lc=new WeakSet,ju=function(r={}){Lct(Pct(Kct(this,{...Ft(this,zf),...r})),this.shadowRoot)},v2=new WeakSet,RW=function(){let r=e=>{var t,n;if(!(e!=null&&e.startsWith("theme-")))return;let i=e.replace(/^theme-/,"");if(p2.includes(i))return;let s=this.getAttribute(e);s!=null?(t=this.mediaTheme)==null||t.setAttribute(i,s):(n=this.mediaTheme)==null||n.removeAttribute(i)};new MutationObserver(e=>{for(let{attributeName:t}of e)r(t)}).observe(this,{attributes:!0}),this.getAttributeNames().forEach(r)},y2=new WeakSet,kW=function(){var r;let e=t=>{let{detail:n}=t;if(n instanceof Fe||(n=new Fe(n.message,n.code,n.fatal)),!(n!=null&&n.fatal)){al(n),n.data&&al(`${n.name} data:`,n.data);return}let{dialog:i,devlog:s}=TW(n,!1);s.message&&fne(s),_s(n),n.data&&_s(`${n.name} data:`,n.data),Kr(this,Qw,g2).call(this,{isDialogOpen:!0,dialog:i})};this.addEventListener("error",e),this.media&&(this.media.errorTranslator=(t={})=>{var n,i,s;if(!(((n=this.media)==null?void 0:n.error)instanceof Fe))return t;let{devlog:a}=TW((i=this.media)==null?void 0:i.error,!1);return{player_error_code:(s=this.media)==null?void 0:s.error.code,player_error_message:a.message?String(a.message):t.player_error_message,player_error_context:a.context?String(a.context):t.player_error_context}}),(r=this.media)==null||r.addEventListener("error",t=>{var n,i;let{detail:s}=t;if(!s){let{message:a,code:o}=(i=(n=this.media)==null?void 0:n.error)!=null?i:{};s=new Fe(a,o)}s!=null&&s.fatal&&this.dispatchEvent(new CustomEvent("error",{detail:s}))})},b2=new WeakSet,IW=function(){var r,e,t,n;let i=()=>Kr(this,lc,ju).call(this);(e=(r=this.media)==null?void 0:r.textTracks)==null||e.addEventListener("addtrack",i),(n=(t=this.media)==null?void 0:t.textTracks)==null||n.addEventListener("removetrack",i)},E2=new WeakSet,$W=function(){var r,e;if(!/Firefox/i.test(navigator.userAgent))return;let t,n=new WeakMap,i=()=>this.streamType===zt.LIVE&&!this.secondaryColor&&this.offsetWidth>=800,s=(l,c,u=!1)=>{i()||Array.from(l&&l.activeCues||[]).forEach(d=>{if(!(!d.snapToLines||d.line<-5||d.line>=0&&d.line<10))if(!c||this.paused){let h=d.text.split(`
`).length,f=-3;this.streamType===zt.LIVE&&(f=-2);let m=f-h;if(d.line===m&&!u)return;n.has(d)||n.set(d,d.line),d.line=m}else setTimeout(()=>{d.line=n.get(d)||"auto"},500)})},a=()=>{var l,c;s(t,(c=(l=this.mediaController)==null?void 0:l.hasAttribute(Ot.USER_INACTIVE))!=null?c:!1)},o=()=>{var l,c;let u=Array.from(((c=(l=this.mediaController)==null?void 0:l.media)==null?void 0:c.textTracks)||[]).filter(d=>["subtitles","captions"].includes(d.kind)&&d.mode==="showing")[0];u!==t&&t?.removeEventListener("cuechange",a),t=u,t?.addEventListener("cuechange",a),s(t,Ft(this,qu))};o(),(r=this.textTracks)==null||r.addEventListener("change",o),(e=this.textTracks)==null||e.addEventListener("addtrack",o),this.addEventListener("userinactivechange",()=>{var l,c;let u=(c=(l=this.mediaController)==null?void 0:l.hasAttribute(Ot.USER_INACTIVE))!=null?c:!0;Ft(this,qu)!==u&&(ml(this,qu,u),s(t,Ft(this,qu)))})};function Eu(r,e){return r.media?r.media.getAttribute(e):r.getAttribute(e)}Dn.customElements.get("mux-player")||(Dn.customElements.define("mux-player",DW),Dn.MuxPlayerElement=DW);var LW={className:"class",classname:"class",htmlFor:"for",crossOrigin:"crossorigin",viewBox:"viewBox",playsInline:"playsinline",autoPlay:"autoplay",playbackRate:"playbackrate"},rut=r=>r==null,nut=(r,e)=>rut(e)?!1:r in e,iut=r=>r.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),sut=(r,e)=>{if(!(typeof e=="boolean"&&!e)){if(nut(r,LW))return LW[r];if(typeof e!=null)return/[A-Z]/.test(r)?iut(r):r}},aut=(r,e)=>typeof r=="boolean"?"":r,out=(r={})=>Object.entries(r).reduce((e,[t,n])=>{let i=sut(t,n);if(!i)return e;let s=aut(n);return e[i]=s,e},{}),lut=(...r)=>{let e=x.useRef(null);return x.useEffect(()=>{r.forEach(t=>{t&&(typeof t=="function"?t(e.current):t.current=e.current)})},[r]),e},cut=Object.prototype.hasOwnProperty,uut=(r,e)=>{if(Object.is(r,e))return!0;if(typeof r!="object"||r===null||typeof e!="object"||e===null)return!1;if(Array.isArray(r))return!Array.isArray(e)||r.length!==e.length?!1:r.some((i,s)=>e[s]===i);let t=Object.keys(r),n=Object.keys(e);if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!cut.call(e,t[i])||!Object.is(r[t[i]],e[t[i]]))return!1;return!0},Sne=(r,e,t)=>!uut(e,r[t]),dut=(r,e,t)=>{r[t]=e},hut=(r,e,t,n=dut,i=Sne)=>x.useEffect(()=>{let s=t?.current;s&&i(s,e,r)&&n(s,e,r)},[t?.current,e]),Ia=hut,fut=()=>{try{return"3.1.0"}catch{}return"UNKNOWN"},put=fut(),mut=()=>put,gut=ft.forwardRef(({children:r,...e},t)=>ft.createElement("mux-player",out({...e,ref:t}),r)),ar=(r,e,t)=>x.useEffect(()=>{let n=e?.current;if(!(!n||!t))return n.addEventListener(r,t),()=>{n.removeEventListener(r,t)}},[e?.current,t]),vut=(r,e)=>{let{onAbort:t,onCanPlay:n,onCanPlayThrough:i,onEmptied:s,onLoadStart:a,onLoadedData:o,onLoadedMetadata:l,onProgress:c,onDurationChange:u,onVolumeChange:d,onRateChange:h,onResize:f,onWaiting:m,onPlay:g,onPlaying:y,onTimeUpdate:b,onPause:E,onSeeking:w,onSeeked:A,onStalled:S,onSuspend:_,onEnded:C,onError:k,onCuePointChange:D,onCuePointsChange:I,onChapterChange:L,metadata:M,tokens:F,paused:U,playbackId:W,playbackRates:j,currentTime:z,themeProps:Q,extraSourceParams:V,castCustomData:Y,_hlsConfig:J,...ue}=e;return Ia("playbackRates",j,r),Ia("metadata",M,r),Ia("extraSourceParams",V,r),Ia("_hlsConfig",J,r),Ia("themeProps",Q,r),Ia("tokens",F,r),Ia("playbackId",W,r),Ia("castCustomData",Y,r),Ia("paused",U,r,(ne,ge)=>{ge!=null&&(ge?ne.pause():ne.play())},(ne,ge,ae)=>ne.hasAttribute("autoplay")&&!ne.hasPlayed?!1:Sne(ne,ge,ae)),Ia("currentTime",z,r,(ne,ge)=>{ge!=null&&(ne.currentTime=ge)}),ar("abort",r,t),ar("canplay",r,n),ar("canplaythrough",r,i),ar("emptied",r,s),ar("loadstart",r,a),ar("loadeddata",r,o),ar("loadedmetadata",r,l),ar("progress",r,c),ar("durationchange",r,u),ar("volumechange",r,d),ar("ratechange",r,h),ar("resize",r,f),ar("waiting",r,m),ar("play",r,g),ar("playing",r,y),ar("timeupdate",r,b),ar("pause",r,E),ar("seeking",r,w),ar("seeked",r,A),ar("stalled",r,S),ar("suspend",r,_),ar("ended",r,C),ar("error",r,k),ar("cuepointchange",r,D),ar("cuepointschange",r,I),ar("chapterchange",r,L),[ue]},yut=mut(),but="mux-player-react",Eut=ft.forwardRef((r,e)=>{let t=x.useRef(null),n=lut(t,e),[i]=vut(t,r);return ft.createElement(gut,{ref:n,playerSoftwareName:but,playerSoftwareVersion:yut,...i})}),xut=Eut,wut="@strapi/upload",Tut={name:wut};const Sut=Tut.name.replace(/^@strapi\//i,""),Aut=r=>`${Sut}.${r}`;vo().shape({urls:Ir().test({name:"isUrlValid",message:"${path}",test(r=""){const e=r.split(/\r?\n/);if(e.length===0)return this.createError({path:this.path,message:Qr.min.id});if(e.length>20)return this.createError({path:this.path,message:Qr.max.id});const t=e.filter(s=>{try{return new URL(s),!1}catch{return!0}}),n=t.length;if(n===0)return!0;const i=n>1?"form.upload-url.error.url.invalids":"form.upload-url.error.url.invalid";return this.createError({path:this.path,message:Aut(i),params:{number:t.length}})}})});var n0;(function(r){r.Video="video",r.Image="image",r.Document="doc",r.Audio="audio"})(n0||(n0={}));var OW;(function(r){r.Url="url",r.Computer="computer"})(OW||(OW={}));q(Ie)`
  align-self: flex-end;
  height: 2.2rem;
  width: 2.8rem;

  &:hover,
  &:focus {
    background-color: ${({theme:r})=>r.colors.primary200};
  }
`;const _ut=q(De)`
  background: transparent;
  border: none;
  position: relative;
  z-index: 1;

  svg {
    height: 1.1rem;
    width: 1.1rem;
  }

  svg path {
    fill: ${({theme:r})=>r.colors.neutral600};
  }
`;q(_ut)`
  display: flex;
  background: none;
  border: none;

  svg {
    width: 0.9rem;
  }
`;q(Ie)`
  border-radius: ${({theme:r})=>`${r.borderRadius} ${r.borderRadius} 0 0`};
  width: 100%;
  height: 100%;

  svg {
    path {
      fill: ${({theme:r,error:e})=>e?r.colors.danger600:void 0};
    }
  }
`;q.button`
  border: none;
  background: none;
  width: min-content;
  color: ${({theme:r})=>r.colors.neutral600};

  &:hover,
  &:focus {
    color: ${({theme:r})=>r.colors.neutral700};
  }

  svg {
    height: 10px;
    width: 10px;

    path {
      fill: currentColor;
    }
  }
`;const PW=q(Ie)`
  min-height: 26.4rem;
  border-radius: ${({theme:r})=>r.borderRadius} ${({theme:r})=>r.borderRadius} 0 0;
  background: linear-gradient(
    180deg,
    ${({theme:r})=>r.colors.neutral0} 0%,
    ${({theme:r})=>r.colors.neutral100} 121.48%
  );
`,Cut=x.forwardRef(({mime:r,url:e,name:t,...n},i)=>{const s=GW(),{formatMessage:a}=xP();return r.includes(n0.Image)?$.jsx("img",{ref:i,src:e,alt:t,...n}):r.includes(n0.Video)?$.jsx(xut,{src:e,accentColor:s.colors.primary500}):r.includes(n0.Audio)?$.jsx(De,{margin:"5",children:$.jsx("audio",{controls:!0,src:e,ref:i,...n,children:t})}):r.includes("pdf")?$.jsx(PW,{width:"100%",justifyContent:"center",...n,children:$.jsxs(Ie,{gap:2,direction:"column",alignItems:"center",children:[$.jsx(Ede,{"aria-label":t,fill:"neutral500",width:24,height:24}),$.jsx(Je,{textColor:"neutral500",variant:"pi",children:a({id:"noPreview",defaultMessage:"No preview available"})})]})}):$.jsx(PW,{width:"100%",justifyContent:"center",...n,children:$.jsxs(Ie,{gap:2,direction:"column",alignItems:"center",children:[$.jsx(xde,{"aria-label":t,fill:"neutral500",width:24,height:24}),$.jsx(Je,{textColor:"neutral500",variant:"pi",children:a({id:"noPreview",defaultMessage:"No preview available"})})]})})});Cut.displayName="AssetPreview";q(De)`
  position: relative;
`;q.div`
  position: relative;
  display: flex;
  justify-content: center;
  background: repeating-conic-gradient(
      ${({theme:r})=>r.colors.neutral100} 0% 25%,
      transparent 0% 50%
    )
    50% / 20px 20px;

  svg {
    height: 26px;
  }

  img,
  mux-player {
    margin: 0;
    padding: 0;
    max-height: 26.4rem;
    max-width: 100%;
  }

  mux-player {
    --play-button: inline-flex;
    --mute-button: inline-flex;
    --pip-button: inline-flex;
    --fullscreen-button: inline-flex;
    --playback-rate-button: inline-flex;
    --volume-range: inline-flex;
    --time-range: inline-flex;
    --time-display: inline-flex;
    --duration-display: inline-flex;
  }
`;q(Ie)`
  height: 5.2rem;
  background-color: ${({$blurry:r})=>r?"rgba(33, 33, 52, 0.4)":void 0};
`;q(Ie)`
  z-index: 1;
  height: 5.2rem;
  position: absolute;
  background-color: rgba(33, 33, 52, 0.4);
  width: 100%;
`;q(gz)`
  span {
    color: inherit;
    font-weight: ${({theme:r})=>r.fontWeights.regular};
  }
`;q.div`
  position: absolute;
  z-index: 2;
  height: 100%;
  width: 100%;
`;q(BT.Trigger)`
  svg {
    > g,
    path {
      fill: ${({theme:r})=>r.colors.neutral500};
    }
  }

  &:hover {
    svg {
      > g,
      path {
        fill: ${({theme:r})=>r.colors.neutral600};
      }
    }
  }

  &:active {
    svg {
      > g,
      path {
        fill: ${({theme:r})=>r.colors.neutral400};
      }
    }
  }
`;q(Ie)`
  /* 80px are coming from the Tabs component that is not included in the ModalBody */
  min-height: ${()=>"calc(60vh + 8rem)"};
`;vo({name:Ir().required(),alternativeText:Ir(),caption:Ir(),folder:mP()});vo({name:Ir().required(),parent:vo({label:Ir(),value:mP().nullable(!0)}).nullable(!0)});q.span`
  text-transform: uppercase;
`;const Rut=q(Lz)`
  opacity: 0;

  &:focus-within {
    opacity: 1;
  }
`;q(cRe)`
  cursor: pointer;

  &:hover {
    ${Rut} {
      opacity: 1;
    }
  }
`;q(De)`
  canvas,
  audio {
    display: block;
    max-width: 100%;
    max-height: ${({size:r})=>r==="M"?16.4:8.8}rem;
  }
`;q(Ie)`
  border-radius: ${({theme:r})=>r.borderRadius} ${({theme:r})=>r.borderRadius} 0 0;
  background: linear-gradient(
    180deg,
    ${({theme:r})=>r.colors.neutral0} 0%,
    ${({theme:r})=>r.colors.neutral100} 121.48%
  );
`;q(De)`
  canvas,
  video {
    display: block;
    pointer-events: none;
    max-width: 100%;
    max-height: ${({size:r})=>r==="M"?16.4:8.8}rem;
  }
`;q(De)`
  background: linear-gradient(
    180deg,
    rgba(234, 234, 239, 0) 0%,
    ${({theme:r})=>r.colors.neutral200} 100%
  );
  opacity: 0.33;
`;q.button`
  height: 100%;
  left: 0;
  position: absolute;
  opacity: 0;
  top: 0;
  width: 100%;

  &:hover,
  &:focus {
    text-decoration: none;
  }
`;q(bde)`
  path {
    fill: currentColor;
  }
`;const kut=q(De)`
  display: none;
`;q(De)`
  &:hover,
  &:focus-within {
    ${kut} {
      display: ${({$isCardActions:r})=>r?"block":""};
    }
  }
`;q(Ie)`
  user-select: none;
`;const Iut=q(De)`
  &:focus {
    outline: 2px solid ${({theme:r})=>r.colors.primary600};
    outline-offset: -2px;
  }
`;q(Iut)`
  text-decoration: none;
`;q(De)`
  figure {
    width: ${({theme:r})=>r.spaces[7]};
    height: ${({theme:r})=>r.spaces[7]};
  }

  canvas,
  video {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 50%;
  }
`;q(Je)`
  line-height: revert;
`;const Ane=dt`
  padding: ${({theme:r})=>r.spaces[3]};
  border-radius: ${({theme:r})=>r.borderRadius};
  box-shadow: ${({$active:r,theme:e})=>r?e.shadows.filterShadow:void 0};
  text-decoration: none;
  display: flex;
  position: relative;
  outline: none;

  &:after {
    transition-property: all;
    transition-duration: 0.2s;
    border-radius: 8px;
    content: '';
    position: absolute;
    top: -4px;
    bottom: -4px;
    left: -4px;
    right: -4px;
    border: 2px solid transparent;
  }

  &:focus-visible {
    outline: none;

    &:after {
      border-radius: 8px;
      content: '';
      position: absolute;
      top: -5px;
      bottom: -5px;
      left: -5px;
      right: -5px;
      border: 2px solid ${r=>r.theme.colors.primary600};
    }
  }
`,WM=q.button`
  ${Ane}
`,$ut=q.div`
  ${Ane}
`;WM.defaultProps={type:"button"};q(WM)`
  color: ${({theme:r,$active:e})=>e?r.colors.primary700:r.colors.neutral800};
  background: ${({theme:r,$active:e})=>e?r.colors.neutral0:void 0};

  &:hover {
    box-shadow: ${({theme:r})=>r.shadows.filterShadow};
  }
`;q(WM)`
  font-size: 1.1rem;
  svg path {
    fill: ${r=>r["aria-disabled"]?r.theme.colors.neutral300:r.theme.colors.neutral600};
  }

  &:focus,
  &:hover {
    svg path {
      fill: ${r=>r["aria-disabled"]?r.theme.colors.neutral300:r.theme.colors.neutral700};
    }
  }

  ${r=>r["aria-disabled"]?`
  pointer-events: none;
    `:void 0}
`;q($ut)`
  color: ${({theme:r})=>r.colors.neutral800};
`;q(Je)`
  max-width: 100%;
`;q(De)`
  svg {
    path {
      fill: ${({theme:r})=>r.colors.neutral500};
    }
  }
`;q(Ie)`
  /* 80px are coming from the Tabs component that is not included in the ModalBody */
  min-height: ${()=>"calc(60vh + 8rem)"};
`;q(FIe.Root)`
  display: flex;
  flex-direction: column;
  overflow: hidden;
`;q(Ie)`
  flex-direction: column;
`;q.div`
  font-size: 6rem;

  svg path {
    fill: ${({theme:r})=>r.colors.primary600};
  }
`;q(De)`
  border-style: dashed;
`;q(De)`
  opacity: 0;
  cursor: pointer;
`;q.div`
  height: 8.8rem;
  width: 100%;
`;q.span`
  text-transform: uppercase;
`;q(Ie)`
  background: linear-gradient(180deg, #ffffff 0%, #f6f6f9 121.48%);
`;q(De)`
  canvas,
  video {
    max-width: 100%;
    height: 124px;
  }
`;q(De)`
  canvas,
  audio {
    max-width: 100%;
  }
`;q(Je)`
  align-items: center;
`;q(Je)`
  text-align: center;
`;const _ne=xl.enhanceEndpoints({addTagTypes:["Locale"]}),Dut=_ne.injectEndpoints({endpoints:r=>({createLocale:r.mutation({query:e=>({url:"/i18n/locales",method:"POST",data:e}),invalidatesTags:[{type:"Locale",id:"LIST"}]}),deleteLocale:r.mutation({query:e=>({url:`/i18n/locales/${e}`,method:"DELETE"}),invalidatesTags:(e,t,n)=>[{type:"Locale",id:n}]}),getLocales:r.query({query:()=>"/i18n/locales",providesTags:e=>[{type:"Locale",id:"LIST"},...Array.isArray(e)?e.map(t=>({type:"Locale",id:t.id})):[]]}),getDefaultLocales:r.query({query:()=>"/i18n/iso-locales"}),updateLocale:r.mutation({query:({id:e,...t})=>({url:`/i18n/locales/${e}`,method:"PUT",data:t}),invalidatesTags:(e,t,{id:n})=>[{type:"Locale",id:n}]})})}),{useCreateLocaleMutation:tft,useDeleteLocaleMutation:rft,useGetLocalesQuery:nft,useGetDefaultLocalesQuery:ift,useUpdateLocaleMutation:sft}=Dut,Lut=_ne.injectEndpoints({overrideExisting:!0,endpoints:r=>({getManyDraftRelationCount:r.query({query:({model:e,...t})=>({url:`/content-manager/collection-types/${e}/actions/countManyEntriesDraftRelations`,method:"GET",config:{params:t}}),transformResponse:e=>e.data})})}),{useGetManyDraftRelationCountQuery:aft}=Lut;q(wde)`
  path {
    fill: currentColor;
  }
`;q(Ie)`
  svg {
    width: 12px;
    height: 12px;

    fill: ${({theme:r})=>r.colors.neutral500};

    path {
      fill: ${({theme:r})=>r.colors.neutral500};
    }
  }
`;const xu=(r,e)=>{if(!r)return;const t=r.invalidatesTags;Object.assign(r,{invalidatesTags:(i,s,a,o)=>[...(typeof t=="function"?t(i,s,a,o):t)??[],...e]})},Cne=xl.enhanceEndpoints({addTagTypes:["Release","ReleaseAction","EntriesInRelease","ReleaseSettings","Document"],endpoints:{updateDocument(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteDocument(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteManyDocuments(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},discardDocument(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},createWorkflow(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},updateWorkflow(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])},deleteWorkflow(r){xu(r,[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}])}}}).injectEndpoints({endpoints:r=>({getReleasesForEntry:r.query({query(e){return{url:"/content-releases/getByDocumentAttached",method:"GET",config:{params:e}}},providesTags:e=>e?[...e.data.map(({id:t})=>({type:"Release",id:t})),{type:"Release",id:"LIST"}]:[]}),getReleases:r.query({query({page:e,pageSize:t,filters:n}={page:1,pageSize:16,filters:{releasedAt:{$notNull:!1}}}){return{url:"/content-releases",method:"GET",config:{params:{page:e||1,pageSize:t||16,filters:n||{releasedAt:{$notNull:!1}}}}}},transformResponse(e,t,n){const s=n?.filters?.releasedAt?.$notNull==="true";return{...e,meta:{...e.meta,activeTab:s?"done":"pending"}}},providesTags:e=>e?[...e.data.map(({id:t})=>({type:"Release",id:t})),{type:"Release",id:"LIST"}]:[{type:"Release",id:"LIST"}]}),getRelease:r.query({query({id:e}){return{url:`/content-releases/${e}`,method:"GET"}},providesTags:(e,t,n)=>[{type:"Release",id:"LIST"},{type:"Release",id:n.id}]}),getReleaseActions:r.query({query({releaseId:e,...t}){return{url:`/content-releases/${e}/actions`,method:"GET",config:{params:t}}},providesTags:[{type:"ReleaseAction",id:"LIST"}]}),createRelease:r.mutation({query(e){return{url:"/content-releases",method:"POST",data:e}},invalidatesTags:[{type:"Release",id:"LIST"}]}),updateRelease:r.mutation({query({id:e,...t}){return{url:`/content-releases/${e}`,method:"PUT",data:t}},invalidatesTags:(e,t,n)=>[{type:"Release",id:n.id}]}),createReleaseAction:r.mutation({query({body:e,params:t}){return{url:`/content-releases/${t.releaseId}/actions`,method:"POST",data:e}},invalidatesTags:[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"}]}),createManyReleaseActions:r.mutation({query({body:e,params:t}){return{url:`/content-releases/${t.releaseId}/actions/bulk`,method:"POST",data:e}},invalidatesTags:[{type:"Release",id:"LIST"},{type:"ReleaseAction",id:"LIST"},{type:"EntriesInRelease"}]}),updateReleaseAction:r.mutation({query({body:e,params:t}){return{url:`/content-releases/${t.releaseId}/actions/${t.actionId}`,method:"PUT",data:e}},invalidatesTags:(e,t,n)=>[{type:"ReleaseAction",id:"LIST"},{type:"Release",id:"LIST"},{type:"Release",id:n.params.releaseId}],async onQueryStarted({body:e,params:t,query:n,actionPath:i},{dispatch:s,queryFulfilled:a}){const o={releaseId:t.releaseId,...n},l=s(Cne.util.updateQueryData("getReleaseActions",o,c=>{const[u,d]=i,h=c.data[u][d];h&&(h.type=e.type)}));try{await a}catch{l.undo()}}}),deleteReleaseAction:r.mutation({query({params:e}){return{url:`/content-releases/${e.releaseId}/actions/${e.actionId}`,method:"DELETE"}},invalidatesTags:(e,t,n)=>[{type:"Release",id:"LIST"},{type:"Release",id:n.params.releaseId},{type:"ReleaseAction",id:"LIST"},{type:"EntriesInRelease"}]}),publishRelease:r.mutation({query({id:e}){return{url:`/content-releases/${e}/publish`,method:"POST"}},invalidatesTags:(e,t,n)=>[{type:"Release",id:n.id},{type:"Document",id:"ALL_LIST"}]}),deleteRelease:r.mutation({query({id:e}){return{url:`/content-releases/${e}`,method:"DELETE"}},invalidatesTags:()=>[{type:"Release",id:"LIST"},{type:"EntriesInRelease"}]}),getMappedEntriesInReleases:r.query({query(e){return{url:"/content-releases/mapEntriesToReleases",method:"GET",config:{params:e}}},transformResponse(e){return e.data},providesTags:[{type:"EntriesInRelease"}]}),getReleaseSettings:r.query({query:()=>"/content-releases/settings",providesTags:[{type:"ReleaseSettings"}]}),updateReleaseSettings:r.mutation({query(e){return{url:"/content-releases/settings",method:"PUT",data:e}},invalidatesTags:[{type:"ReleaseSettings"}]})})}),{useGetReleasesQuery:oft,useGetReleasesForEntryQuery:lft,useGetReleaseQuery:cft,useGetReleaseActionsQuery:uft,useCreateReleaseMutation:dft,useCreateReleaseActionMutation:hft,useCreateManyReleaseActionsMutation:fft,useUpdateReleaseMutation:pft,useUpdateReleaseActionMutation:mft,usePublishReleaseMutation:gft,useDeleteReleaseActionMutation:vft,useDeleteReleaseMutation:yft,useGetMappedEntriesInReleasesQuery:bft,useGetReleaseSettingsQuery:Eft,useUpdateReleaseSettingsMutation:xft}=Cne,MW=r=>r==="publish"?1:0,NW=r=>r==="publish"?0:1;q(Fz.Root)`
  border-top-left-radius: ${({$actionType:r,theme:e})=>e.spaces[MW(r)]};
  border-bottom-left-radius: ${({$actionType:r,theme:e})=>e.spaces[MW(r)]};
  border-top-right-radius: ${({$actionType:r,theme:e})=>e.spaces[NW(r)]};
  border-bottom-right-radius: ${({$actionType:r,theme:e})=>e.spaces[NW(r)]};

  > label {
    color: inherit;
    padding: ${({theme:r})=>`${r.spaces[2]} ${r.spaces[3]}`};
    text-align: center;
    vertical-align: middle;
    text-transform: capitalize;
  }

  &[data-checked='true'] {
    color: ${({theme:r,$actionType:e})=>e==="publish"?r.colors.primary700:r.colors.danger600};
    background-color: ${({theme:r,$actionType:e})=>e==="publish"?r.colors.primary100:r.colors.danger100};
    border-color: ${({theme:r,$actionType:e})=>e==="publish"?r.colors.primary700:r.colors.danger600};
  }

  &[data-checked='false'] {
    border-left: ${({$actionType:r})=>r==="unpublish"&&"none"};
    border-right: ${({$actionType:r})=>r==="publish"&&"none"};
  }

  &[data-checked='false'][data-disabled='false']:hover {
    color: ${({theme:r})=>r.colors.neutral700};
    background-color: ${({theme:r})=>r.colors.neutral100};
    border-color: ${({theme:r})=>r.colors.neutral200};

    & > label {
      cursor: pointer;
    }
  }

  &[data-disabled='true'] {
    color: ${({theme:r})=>r.colors.neutral600};
    background-color: ${({theme:r})=>r.colors.neutral150};
    border-color: ${({theme:r})=>r.colors.neutral300};
  }
`;vo().shape({type:Ir().oneOf(["publish","unpublish"]).required(),releaseId:Ir().required()});q(BT.Item)`
  &:hover {
    background: ${({theme:r,$variant:e="neutral"})=>r.colors[`${e}100`]};

    svg {
      fill: ${({theme:r,$variant:e="neutral"})=>r.colors[`${e}600`]};
    }

    a {
      color: ${({theme:r})=>r.colors.neutral800};
    }
  }

  svg {
    color: ${({theme:r,$variant:e="neutral"})=>r.colors[`${e}500`]};
  }

  span {
    color: ${({theme:r,$variant:e="neutral"})=>r.colors[`${e}800`]};
  }

  span,
  a {
    width: 100%;
  }
`;q(BT.Trigger)`
  & > span {
    display: flex;
  }
`;Oz.colors.primary600;const Rne=xl.enhanceEndpoints({addTagTypes:["ReviewWorkflow","ReviewWorkflowStages","Document","ContentTypeSettings"]}),FW="single-types",Out=Rne.injectEndpoints({endpoints:r=>({getStages:r.query({query:({model:e,slug:t,id:n,params:i})=>({url:`/review-workflows/content-manager/${t}/${e}/${n}/stages`,method:"GET",config:{params:i}}),transformResponse:e=>({meta:e.meta??{workflowCount:0},stages:e.data??[]}),providesTags:["ReviewWorkflowStages"]}),updateStage:r.mutation({query:({model:e,slug:t,id:n,params:i,...s})=>({url:`/review-workflows/content-manager/${t}/${e}/${n}/stage`,method:"PUT",data:s,config:{params:i}}),transformResponse:e=>e.data,invalidatesTags:(e,t,{slug:n,id:i,model:s})=>[{type:"Document",id:n!==FW?`${s}_${i}`:s},{type:"Document",id:`${s}_LIST`},"ReviewWorkflowStages"]}),updateAssignee:r.mutation({query:({model:e,slug:t,id:n,params:i,...s})=>({url:`/review-workflows/content-manager/${t}/${e}/${n}/assignee`,method:"PUT",data:s,config:{params:i}}),transformResponse:e=>e.data,invalidatesTags:(e,t,{slug:n,id:i,model:s})=>[{type:"Document",id:n!==FW?`${s}_${i}`:s},{type:"Document",id:`${s}_LIST`}]}),getContentTypes:r.query({query:()=>({url:"/content-manager/content-types",method:"GET"}),transformResponse:e=>e.data.reduce((t,n)=>(n.isDisplayed&&t[n.kind].push(n),t),{collectionType:[],singleType:[]})})}),overrideExisting:!0}),{useGetStagesQuery:wft,useUpdateStageMutation:Tft,useUpdateAssigneeMutation:Sft,useGetContentTypesQuery:Aft}=Out;q.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:r})=>`-${r.spaces[7]}`};
  margin-top: ${({theme:r})=>`-${r.spaces[7]}`};
  width: 360px;
`;const Put={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"};Object.entries(Put).map(([r,e])=>({hex:Oz.colors[r].toUpperCase(),name:e}));const Mut=Rne.injectEndpoints({endpoints:r=>({getWorkflows:r.query({query:e=>({url:"/review-workflows/workflows",method:"GET",config:{params:e??{}}}),transformResponse:e=>({workflows:e.data,meta:"meta"in e?e.meta:void 0}),providesTags:e=>[...e?.workflows.map(({id:t})=>({type:"ReviewWorkflow",id:t}))??[],{type:"ReviewWorkflow",id:"LIST"}]}),createWorkflow:r.mutation({query:e=>({url:"/review-workflows/workflows",method:"POST",data:e}),transformResponse:e=>e.data,invalidatesTags(e){return[{type:"ReviewWorkflow",id:"LIST"},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"},...e?.contentTypes.map(t=>({type:"Document",id:`${t}_ALL_ITEMS`}))??[]]}}),updateWorkflow:r.mutation({query:({id:e,...t})=>({url:`/review-workflows/workflows/${e}`,method:"PUT",data:t}),transformResponse:e=>e.data,invalidatesTags:(e,t,n)=>[{type:"ReviewWorkflow",id:n.id},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"},...e?.contentTypes.map(i=>({type:"Document",id:`${i}_ALL_ITEMS`}))??[]]}),deleteWorkflow:r.mutation({query:({id:e})=>({url:`/review-workflows/workflows/${e}`,method:"DELETE"}),transformResponse:e=>e.data,invalidatesTags:(e,t,n)=>[{type:"ReviewWorkflow",id:n.id},"ReviewWorkflowStages",{type:"Document",id:"ALL_LIST"},{type:"ContentTypeSettings",id:"LIST"}]})}),overrideExisting:!1}),{useGetWorkflowsQuery:_ft,useCreateWorkflowMutation:Cft,useDeleteWorkflowMutation:Rft,useUpdateWorkflowMutation:kft}=Mut;var Nut=function(r){console.error(r)},Fut=function(r){console.warn(r)},But={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Nut,onWarn:Fut};function Uut(r,e,t){if(t===void 0&&(t=Error),!r)throw new t(e)}function Wut(r){Uut(r,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}Et(Et({},But),{textComponent:x.Fragment});var HM=typeof window<"u"&&!window.__REACT_INTL_BYPASS_GLOBAL_CONTEXT__?window.__REACT_INTL_CONTEXT__||(window.__REACT_INTL_CONTEXT__=x.createContext(null)):x.createContext(null);HM.Consumer;HM.Provider;var Hut=HM;function VM(){var r=x.useContext(Hut);return Wut(r),r}var x2;(function(r){r.formatDate="FormattedDate",r.formatTime="FormattedTime",r.formatNumber="FormattedNumber",r.formatList="FormattedList",r.formatDisplayName="FormattedDisplayName"})(x2||(x2={}));var w2;(function(r){r.formatDate="FormattedDateParts",r.formatTime="FormattedTimeParts",r.formatNumber="FormattedNumberParts",r.formatList="FormattedListParts"})(w2||(w2={}));function kne(r){var e=function(t){var n=VM(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=typeof i=="string"?new Date(i||0):i,l=r==="formatDate"?n.formatDateToParts(o,a):n.formatTimeToParts(o,a);return s(l)};return e.displayName=w2[r],e}function Xv(r){var e=function(t){var n=VM(),i=t.value,s=t.children,a=Os(t,["value","children"]),o=n[r](i,a);if(typeof s=="function")return s(o);var l=n.textComponent||x.Fragment;return x.createElement(l,null,o)};return e.displayName=x2[r],e}Xv("formatDate");Xv("formatTime");Xv("formatNumber");Xv("formatList");Xv("formatDisplayName");kne("formatDate");kne("formatTime");const Vut=r=>`${Sde}.${r}`,Gut=()=>{const{formatMessage:r}=VM(),[e,t]=x.useState(null),[n,i]=x.useState(!1),[s,a]=x.useState(""),o=c=>{c.target.files&&c.target.files.length>0&&t(c.target.files[0])},l=async()=>{if(!e){a("Please select a file first.");return}i(!0),a("");const c=new FormData;c.append("file",e);try{const u=await fetch("/api/vetgroup-product/upload",{method:"POST",body:c});if(!u.ok)throw new Error("Upload failed");const d=await u.json();a(JSON.stringify(d.message)||"File uploaded successfully!")}catch(u){a(`Error uploading file. Please try again. ${u}`)}finally{i(!1)}};return $.jsx(Xz,{children:$.jsxs(De,{padding:6,children:[$.jsxs(Je,{variant:"alpha",children:["Welcome to ",r({id:Vut("plugin.name")})]}),$.jsx(De,{paddingTop:4,children:$.jsx("input",{type:"file",onChange:o,disabled:n})}),$.jsx(De,{paddingTop:4,children:$.jsx(Hx,{onClick:l,loading:n,children:"Upload"})}),s&&$.jsx(De,{paddingTop:4,children:$.jsx(Je,{variant:"epsilon",children:s})})]})})},Ift=()=>$.jsxs(Tde,{children:[$.jsx(b5,{index:!0,element:$.jsx(Gut,{})}),$.jsx(b5,{path:"*",element:$.jsx(kqe.Error,{})})]});export{Ift as App};
